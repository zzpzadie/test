const __vite__fileDeps=["assets/UserManege-CS7t18cJ.js","assets/UserManege-DvlQfkyq.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
function I8(t,i){for(var a=0;a<i.length;a++){const u=i[a];if(typeof u!="string"&&!Array.isArray(u)){for(const m in u)if(m!=="default"&&!(m in t)){const M=Object.getOwnPropertyDescriptor(u,m);M&&Object.defineProperty(t,m,M.get?M:{enumerable:!0,get:()=>u[m]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))u(m);new MutationObserver(m=>{for(const M of m)if(M.type==="childList")for(const L of M.addedNodes)L.tagName==="LINK"&&L.rel==="modulepreload"&&u(L)}).observe(document,{childList:!0,subtree:!0});function a(m){const M={};return m.integrity&&(M.integrity=m.integrity),m.referrerPolicy&&(M.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?M.credentials="include":m.crossOrigin==="anonymous"?M.credentials="omit":M.credentials="same-origin",M}function u(m){if(m.ep)return;m.ep=!0;const M=a(m);fetch(m.href,M)}})();var H1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function b4(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function UW(t){if(t.__esModule)return t;var i=t.default;if(typeof i=="function"){var a=function u(){return this instanceof u?Reflect.construct(i,arguments,this.constructor):i.apply(this,arguments)};a.prototype=i.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(t).forEach(function(u){var m=Object.getOwnPropertyDescriptor(t,u);Object.defineProperty(a,u,m.get?m:{enumerable:!0,get:function(){return t[u]}})}),a}var R8={exports:{}},VE={},L8={exports:{}},Li={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vC=Symbol.for("react.element"),kW=Symbol.for("react.portal"),HW=Symbol.for("react.fragment"),jW=Symbol.for("react.strict_mode"),GW=Symbol.for("react.profiler"),VW=Symbol.for("react.provider"),WW=Symbol.for("react.context"),XW=Symbol.for("react.forward_ref"),YW=Symbol.for("react.suspense"),ZW=Symbol.for("react.memo"),qW=Symbol.for("react.lazy"),zF=Symbol.iterator;function KW(t){return t===null||typeof t!="object"?null:(t=zF&&t[zF]||t["@@iterator"],typeof t=="function"?t:null)}var P8={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O8=Object.assign,D8={};function hx(t,i,a){this.props=t,this.context=i,this.refs=D8,this.updater=a||P8}hx.prototype.isReactComponent={};hx.prototype.setState=function(t,i){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,i,"setState")};hx.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function b8(){}b8.prototype=hx.prototype;function F4(t,i,a){this.props=t,this.context=i,this.refs=D8,this.updater=a||P8}var N4=F4.prototype=new b8;N4.constructor=F4;O8(N4,hx.prototype);N4.isPureReactComponent=!0;var UF=Array.isArray,F8=Object.prototype.hasOwnProperty,B4={current:null},N8={key:!0,ref:!0,__self:!0,__source:!0};function B8(t,i,a){var u,m={},M=null,L=null;if(i!=null)for(u in i.ref!==void 0&&(L=i.ref),i.key!==void 0&&(M=""+i.key),i)F8.call(i,u)&&!N8.hasOwnProperty(u)&&(m[u]=i[u]);var z=arguments.length-2;if(z===1)m.children=a;else if(1<z){for(var U=Array(z),W=0;W<z;W++)U[W]=arguments[W+2];m.children=U}if(t&&t.defaultProps)for(u in z=t.defaultProps,z)m[u]===void 0&&(m[u]=z[u]);return{$$typeof:vC,type:t,key:M,ref:L,props:m,_owner:B4.current}}function JW(t,i){return{$$typeof:vC,type:t.type,key:i,ref:t.ref,props:t.props,_owner:t._owner}}function z4(t){return typeof t=="object"&&t!==null&&t.$$typeof===vC}function QW(t){var i={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(a){return i[a]})}var kF=/\/+/g;function CL(t,i){return typeof t=="object"&&t!==null&&t.key!=null?QW(""+t.key):i.toString(36)}function wT(t,i,a,u,m){var M=typeof t;(M==="undefined"||M==="boolean")&&(t=null);var L=!1;if(t===null)L=!0;else switch(M){case"string":case"number":L=!0;break;case"object":switch(t.$$typeof){case vC:case kW:L=!0}}if(L)return L=t,m=m(L),t=u===""?"."+CL(L,0):u,UF(m)?(a="",t!=null&&(a=t.replace(kF,"$&/")+"/"),wT(m,i,a,"",function(W){return W})):m!=null&&(z4(m)&&(m=JW(m,a+(!m.key||L&&L.key===m.key?"":(""+m.key).replace(kF,"$&/")+"/")+t)),i.push(m)),1;if(L=0,u=u===""?".":u+":",UF(t))for(var z=0;z<t.length;z++){M=t[z];var U=u+CL(M,z);L+=wT(M,i,a,U,m)}else if(U=KW(t),typeof U=="function")for(t=U.call(t),z=0;!(M=t.next()).done;)M=M.value,U=u+CL(M,z++),L+=wT(M,i,a,U,m);else if(M==="object")throw i=String(t),Error("Objects are not valid as a React child (found: "+(i==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":i)+"). If you meant to render a collection of children, use an array instead.");return L}function FS(t,i,a){if(t==null)return t;var u=[],m=0;return wT(t,u,"","",function(M){return i.call(a,M,m++)}),u}function $W(t){if(t._status===-1){var i=t._result;i=i(),i.then(function(a){(t._status===0||t._status===-1)&&(t._status=1,t._result=a)},function(a){(t._status===0||t._status===-1)&&(t._status=2,t._result=a)}),t._status===-1&&(t._status=0,t._result=i)}if(t._status===1)return t._result.default;throw t._result}var Ll={current:null},CT={transition:null},eX={ReactCurrentDispatcher:Ll,ReactCurrentBatchConfig:CT,ReactCurrentOwner:B4};function z8(){throw Error("act(...) is not supported in production builds of React.")}Li.Children={map:FS,forEach:function(t,i,a){FS(t,function(){i.apply(this,arguments)},a)},count:function(t){var i=0;return FS(t,function(){i++}),i},toArray:function(t){return FS(t,function(i){return i})||[]},only:function(t){if(!z4(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Li.Component=hx;Li.Fragment=HW;Li.Profiler=GW;Li.PureComponent=F4;Li.StrictMode=jW;Li.Suspense=YW;Li.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eX;Li.act=z8;Li.cloneElement=function(t,i,a){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var u=O8({},t.props),m=t.key,M=t.ref,L=t._owner;if(i!=null){if(i.ref!==void 0&&(M=i.ref,L=B4.current),i.key!==void 0&&(m=""+i.key),t.type&&t.type.defaultProps)var z=t.type.defaultProps;for(U in i)F8.call(i,U)&&!N8.hasOwnProperty(U)&&(u[U]=i[U]===void 0&&z!==void 0?z[U]:i[U])}var U=arguments.length-2;if(U===1)u.children=a;else if(1<U){z=Array(U);for(var W=0;W<U;W++)z[W]=arguments[W+2];u.children=z}return{$$typeof:vC,type:t.type,key:m,ref:M,props:u,_owner:L}};Li.createContext=function(t){return t={$$typeof:WW,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:VW,_context:t},t.Consumer=t};Li.createElement=B8;Li.createFactory=function(t){var i=B8.bind(null,t);return i.type=t,i};Li.createRef=function(){return{current:null}};Li.forwardRef=function(t){return{$$typeof:XW,render:t}};Li.isValidElement=z4;Li.lazy=function(t){return{$$typeof:qW,_payload:{_status:-1,_result:t},_init:$W}};Li.memo=function(t,i){return{$$typeof:ZW,type:t,compare:i===void 0?null:i}};Li.startTransition=function(t){var i=CT.transition;CT.transition={};try{t()}finally{CT.transition=i}};Li.unstable_act=z8;Li.useCallback=function(t,i){return Ll.current.useCallback(t,i)};Li.useContext=function(t){return Ll.current.useContext(t)};Li.useDebugValue=function(){};Li.useDeferredValue=function(t){return Ll.current.useDeferredValue(t)};Li.useEffect=function(t,i){return Ll.current.useEffect(t,i)};Li.useId=function(){return Ll.current.useId()};Li.useImperativeHandle=function(t,i,a){return Ll.current.useImperativeHandle(t,i,a)};Li.useInsertionEffect=function(t,i){return Ll.current.useInsertionEffect(t,i)};Li.useLayoutEffect=function(t,i){return Ll.current.useLayoutEffect(t,i)};Li.useMemo=function(t,i){return Ll.current.useMemo(t,i)};Li.useReducer=function(t,i,a){return Ll.current.useReducer(t,i,a)};Li.useRef=function(t){return Ll.current.useRef(t)};Li.useState=function(t){return Ll.current.useState(t)};Li.useSyncExternalStore=function(t,i,a){return Ll.current.useSyncExternalStore(t,i,a)};Li.useTransition=function(){return Ll.current.useTransition()};Li.version="18.3.1";L8.exports=Li;var ie=L8.exports;const dr=b4(ie),Kv=I8({__proto__:null,default:dr},[ie]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tX=ie,rX=Symbol.for("react.element"),nX=Symbol.for("react.fragment"),iX=Object.prototype.hasOwnProperty,oX=tX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,aX={key:!0,ref:!0,__self:!0,__source:!0};function U8(t,i,a){var u,m={},M=null,L=null;a!==void 0&&(M=""+a),i.key!==void 0&&(M=""+i.key),i.ref!==void 0&&(L=i.ref);for(u in i)iX.call(i,u)&&!aX.hasOwnProperty(u)&&(m[u]=i[u]);if(t&&t.defaultProps)for(u in i=t.defaultProps,i)m[u]===void 0&&(m[u]=i[u]);return{$$typeof:rX,type:t,key:M,ref:L,props:m,_owner:oX.current}}VE.Fragment=nX;VE.jsx=U8;VE.jsxs=U8;R8.exports=VE;var rn=R8.exports,b5={},k8={exports:{}},Bu={},H8={exports:{}},j8={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function i(Ve,gt){var mt=Ve.length;Ve.push(gt);e:for(;0<mt;){var dt=mt-1>>>1,At=Ve[dt];if(0<m(At,gt))Ve[dt]=gt,Ve[mt]=At,mt=dt;else break e}}function a(Ve){return Ve.length===0?null:Ve[0]}function u(Ve){if(Ve.length===0)return null;var gt=Ve[0],mt=Ve.pop();if(mt!==gt){Ve[0]=mt;e:for(var dt=0,At=Ve.length,jt=At>>>1;dt<jt;){var ar=2*(dt+1)-1,Ht=Ve[ar],Rt=ar+1,pr=Ve[Rt];if(0>m(Ht,mt))Rt<At&&0>m(pr,Ht)?(Ve[dt]=pr,Ve[Rt]=mt,dt=Rt):(Ve[dt]=Ht,Ve[ar]=mt,dt=ar);else if(Rt<At&&0>m(pr,mt))Ve[dt]=pr,Ve[Rt]=mt,dt=Rt;else break e}}return gt}function m(Ve,gt){var mt=Ve.sortIndex-gt.sortIndex;return mt!==0?mt:Ve.id-gt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var M=performance;t.unstable_now=function(){return M.now()}}else{var L=Date,z=L.now();t.unstable_now=function(){return L.now()-z}}var U=[],W=[],J=1,te=null,ae=3,ve=!1,he=!1,oe=!1,me=typeof setTimeout=="function"?setTimeout:null,ge=typeof clearTimeout=="function"?clearTimeout:null,de=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ce(Ve){for(var gt=a(W);gt!==null;){if(gt.callback===null)u(W);else if(gt.startTime<=Ve)u(W),gt.sortIndex=gt.expirationTime,i(U,gt);else break;gt=a(W)}}function _e(Ve){if(oe=!1,ce(Ve),!he)if(a(U)!==null)he=!0,$e(Re);else{var gt=a(W);gt!==null&&tt(_e,gt.startTime-Ve)}}function Re(Ve,gt){he=!1,oe&&(oe=!1,ge(We),We=-1),ve=!0;var mt=ae;try{for(ce(gt),te=a(U);te!==null&&(!(te.expirationTime>gt)||Ve&&!Ye());){var dt=te.callback;if(typeof dt=="function"){te.callback=null,ae=te.priorityLevel;var At=dt(te.expirationTime<=gt);gt=t.unstable_now(),typeof At=="function"?te.callback=At:te===a(U)&&u(U),ce(gt)}else u(U);te=a(U)}if(te!==null)var jt=!0;else{var ar=a(W);ar!==null&&tt(_e,ar.startTime-gt),jt=!1}return jt}finally{te=null,ae=mt,ve=!1}}var Ee=!1,De=null,We=-1,Xe=5,et=-1;function Ye(){return!(t.unstable_now()-et<Xe)}function at(){if(De!==null){var Ve=t.unstable_now();et=Ve;var gt=!0;try{gt=De(!0,Ve)}finally{gt?ot():(Ee=!1,De=null)}}else Ee=!1}var ot;if(typeof de=="function")ot=function(){de(at)};else if(typeof MessageChannel<"u"){var ct=new MessageChannel,Dt=ct.port2;ct.port1.onmessage=at,ot=function(){Dt.postMessage(null)}}else ot=function(){me(at,0)};function $e(Ve){De=Ve,Ee||(Ee=!0,ot())}function tt(Ve,gt){We=me(function(){Ve(t.unstable_now())},gt)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Ve){Ve.callback=null},t.unstable_continueExecution=function(){he||ve||(he=!0,$e(Re))},t.unstable_forceFrameRate=function(Ve){0>Ve||125<Ve?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Xe=0<Ve?Math.floor(1e3/Ve):5},t.unstable_getCurrentPriorityLevel=function(){return ae},t.unstable_getFirstCallbackNode=function(){return a(U)},t.unstable_next=function(Ve){switch(ae){case 1:case 2:case 3:var gt=3;break;default:gt=ae}var mt=ae;ae=gt;try{return Ve()}finally{ae=mt}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Ve,gt){switch(Ve){case 1:case 2:case 3:case 4:case 5:break;default:Ve=3}var mt=ae;ae=Ve;try{return gt()}finally{ae=mt}},t.unstable_scheduleCallback=function(Ve,gt,mt){var dt=t.unstable_now();switch(typeof mt=="object"&&mt!==null?(mt=mt.delay,mt=typeof mt=="number"&&0<mt?dt+mt:dt):mt=dt,Ve){case 1:var At=-1;break;case 2:At=250;break;case 5:At=1073741823;break;case 4:At=1e4;break;default:At=5e3}return At=mt+At,Ve={id:J++,callback:gt,priorityLevel:Ve,startTime:mt,expirationTime:At,sortIndex:-1},mt>dt?(Ve.sortIndex=mt,i(W,Ve),a(U)===null&&Ve===a(W)&&(oe?(ge(We),We=-1):oe=!0,tt(_e,mt-dt))):(Ve.sortIndex=At,i(U,Ve),he||ve||(he=!0,$e(Re))),Ve},t.unstable_shouldYield=Ye,t.unstable_wrapCallback=function(Ve){var gt=ae;return function(){var mt=ae;ae=gt;try{return Ve.apply(this,arguments)}finally{ae=mt}}}})(j8);H8.exports=j8;var sX=H8.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lX=ie,Fu=sX;function gr(t){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+t,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var G8=new Set,zw={};function o0(t,i){K1(t,i),K1(t+"Capture",i)}function K1(t,i){for(zw[t]=i,t=0;t<i.length;t++)G8.add(i[t])}var Wd=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),F5=Object.prototype.hasOwnProperty,uX=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,HF={},jF={};function cX(t){return F5.call(jF,t)?!0:F5.call(HF,t)?!1:uX.test(t)?jF[t]=!0:(HF[t]=!0,!1)}function hX(t,i,a,u){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return u?!1:a!==null?!a.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function fX(t,i,a,u){if(i===null||typeof i>"u"||hX(t,i,a,u))return!0;if(u)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function Pl(t,i,a,u,m,M,L){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=u,this.attributeNamespace=m,this.mustUseProperty=a,this.propertyName=t,this.type=i,this.sanitizeURL=M,this.removeEmptyString=L}var Us={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Us[t]=new Pl(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var i=t[0];Us[i]=new Pl(i,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Us[t]=new Pl(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Us[t]=new Pl(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Us[t]=new Pl(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Us[t]=new Pl(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Us[t]=new Pl(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Us[t]=new Pl(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Us[t]=new Pl(t,5,!1,t.toLowerCase(),null,!1,!1)});var U4=/[\-:]([a-z])/g;function k4(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var i=t.replace(U4,k4);Us[i]=new Pl(i,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var i=t.replace(U4,k4);Us[i]=new Pl(i,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var i=t.replace(U4,k4);Us[i]=new Pl(i,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Us[t]=new Pl(t,1,!1,t.toLowerCase(),null,!1,!1)});Us.xlinkHref=new Pl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Us[t]=new Pl(t,1,!1,t.toLowerCase(),null,!0,!0)});function H4(t,i,a,u){var m=Us.hasOwnProperty(i)?Us[i]:null;(m!==null?m.type!==0:u||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(fX(i,a,m,u)&&(a=null),u||m===null?cX(i)&&(a===null?t.removeAttribute(i):t.setAttribute(i,""+a)):m.mustUseProperty?t[m.propertyName]=a===null?m.type===3?!1:"":a:(i=m.attributeName,u=m.attributeNamespace,a===null?t.removeAttribute(i):(m=m.type,a=m===3||m===4&&a===!0?"":""+a,u?t.setAttributeNS(u,i,a):t.setAttribute(i,a))))}var Jd=lX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,NS=Symbol.for("react.element"),T1=Symbol.for("react.portal"),E1=Symbol.for("react.fragment"),j4=Symbol.for("react.strict_mode"),N5=Symbol.for("react.profiler"),V8=Symbol.for("react.provider"),W8=Symbol.for("react.context"),G4=Symbol.for("react.forward_ref"),B5=Symbol.for("react.suspense"),z5=Symbol.for("react.suspense_list"),V4=Symbol.for("react.memo"),xm=Symbol.for("react.lazy"),X8=Symbol.for("react.offscreen"),GF=Symbol.iterator;function ew(t){return t===null||typeof t!="object"?null:(t=GF&&t[GF]||t["@@iterator"],typeof t=="function"?t:null)}var pa=Object.assign,_L;function mw(t){if(_L===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);_L=i&&i[1]||""}return`
`+_L+t}var ML=!1;function SL(t,i){if(!t||ML)return"";ML=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(W){var u=W}Reflect.construct(t,[],i)}else{try{i.call()}catch(W){u=W}t.call(i.prototype)}else{try{throw Error()}catch(W){u=W}t()}}catch(W){if(W&&u&&typeof W.stack=="string"){for(var m=W.stack.split(`
`),M=u.stack.split(`
`),L=m.length-1,z=M.length-1;1<=L&&0<=z&&m[L]!==M[z];)z--;for(;1<=L&&0<=z;L--,z--)if(m[L]!==M[z]){if(L!==1||z!==1)do if(L--,z--,0>z||m[L]!==M[z]){var U=`
`+m[L].replace(" at new "," at ");return t.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",t.displayName)),U}while(1<=L&&0<=z);break}}}finally{ML=!1,Error.prepareStackTrace=a}return(t=t?t.displayName||t.name:"")?mw(t):""}function dX(t){switch(t.tag){case 5:return mw(t.type);case 16:return mw("Lazy");case 13:return mw("Suspense");case 19:return mw("SuspenseList");case 0:case 2:case 15:return t=SL(t.type,!1),t;case 11:return t=SL(t.type.render,!1),t;case 1:return t=SL(t.type,!0),t;default:return""}}function U5(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case E1:return"Fragment";case T1:return"Portal";case N5:return"Profiler";case j4:return"StrictMode";case B5:return"Suspense";case z5:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case W8:return(t.displayName||"Context")+".Consumer";case V8:return(t._context.displayName||"Context")+".Provider";case G4:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case V4:return i=t.displayName||null,i!==null?i:U5(t.type)||"Memo";case xm:i=t._payload,t=t._init;try{return U5(t(i))}catch{}}return null}function pX(t){var i=t.type;switch(t.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=i.render,t=t.displayName||t.name||"",i.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U5(i);case 8:return i===j4?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Bm(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Y8(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function mX(t){var i=Y8(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),u=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var m=a.get,M=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return m.call(this)},set:function(L){u=""+L,M.call(this,L)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return u},setValue:function(L){u=""+L},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function BS(t){t._valueTracker||(t._valueTracker=mX(t))}function Z8(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),u="";return t&&(u=Y8(t)?t.checked?"true":"false":t.value),t=u,t!==a?(i.setValue(t),!0):!1}function ZT(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function k5(t,i){var a=i.checked;return pa({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??t._wrapperState.initialChecked})}function VF(t,i){var a=i.defaultValue==null?"":i.defaultValue,u=i.checked!=null?i.checked:i.defaultChecked;a=Bm(i.value!=null?i.value:a),t._wrapperState={initialChecked:u,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function q8(t,i){i=i.checked,i!=null&&H4(t,"checked",i,!1)}function H5(t,i){q8(t,i);var a=Bm(i.value),u=i.type;if(a!=null)u==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+a):t.value!==""+a&&(t.value=""+a);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}i.hasOwnProperty("value")?j5(t,i.type,a):i.hasOwnProperty("defaultValue")&&j5(t,i.type,Bm(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(t.defaultChecked=!!i.defaultChecked)}function WF(t,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var u=i.type;if(!(u!=="submit"&&u!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+t._wrapperState.initialValue,a||i===t.value||(t.value=i),t.defaultValue=i}a=t.name,a!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,a!==""&&(t.name=a)}function j5(t,i,a){(i!=="number"||ZT(t.ownerDocument)!==t)&&(a==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+a&&(t.defaultValue=""+a))}var gw=Array.isArray;function j1(t,i,a,u){if(t=t.options,i){i={};for(var m=0;m<a.length;m++)i["$"+a[m]]=!0;for(a=0;a<t.length;a++)m=i.hasOwnProperty("$"+t[a].value),t[a].selected!==m&&(t[a].selected=m),m&&u&&(t[a].defaultSelected=!0)}else{for(a=""+Bm(a),i=null,m=0;m<t.length;m++){if(t[m].value===a){t[m].selected=!0,u&&(t[m].defaultSelected=!0);return}i!==null||t[m].disabled||(i=t[m])}i!==null&&(i.selected=!0)}}function G5(t,i){if(i.dangerouslySetInnerHTML!=null)throw Error(gr(91));return pa({},i,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function XF(t,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(gr(92));if(gw(a)){if(1<a.length)throw Error(gr(93));a=a[0]}i=a}i==null&&(i=""),a=i}t._wrapperState={initialValue:Bm(a)}}function K8(t,i){var a=Bm(i.value),u=Bm(i.defaultValue);a!=null&&(a=""+a,a!==t.value&&(t.value=a),i.defaultValue==null&&t.defaultValue!==a&&(t.defaultValue=a)),u!=null&&(t.defaultValue=""+u)}function YF(t){var i=t.textContent;i===t._wrapperState.initialValue&&i!==""&&i!==null&&(t.value=i)}function J8(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function V5(t,i){return t==null||t==="http://www.w3.org/1999/xhtml"?J8(i):t==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var zS,Q8=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,u,m){MSApp.execUnsafeLocalFunction(function(){return t(i,a,u,m)})}:t}(function(t,i){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=i;else{for(zS=zS||document.createElement("div"),zS.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=zS.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;i.firstChild;)t.appendChild(i.firstChild)}});function Uw(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Cw={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gX=["Webkit","ms","Moz","O"];Object.keys(Cw).forEach(function(t){gX.forEach(function(i){i=i+t.charAt(0).toUpperCase()+t.substring(1),Cw[i]=Cw[t]})});function $8(t,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Cw.hasOwnProperty(t)&&Cw[t]?(""+i).trim():i+"px"}function eU(t,i){t=t.style;for(var a in i)if(i.hasOwnProperty(a)){var u=a.indexOf("--")===0,m=$8(a,i[a],u);a==="float"&&(a="cssFloat"),u?t.setProperty(a,m):t[a]=m}}var vX=pa({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function W5(t,i){if(i){if(vX[t]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(gr(137,t));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(gr(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(gr(61))}if(i.style!=null&&typeof i.style!="object")throw Error(gr(62))}}function X5(t,i){if(t.indexOf("-")===-1)return typeof i.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Y5=null;function W4(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Z5=null,G1=null,V1=null;function ZF(t){if(t=AC(t)){if(typeof Z5!="function")throw Error(gr(280));var i=t.stateNode;i&&(i=qE(i),Z5(t.stateNode,t.type,i))}}function tU(t){G1?V1?V1.push(t):V1=[t]:G1=t}function rU(){if(G1){var t=G1,i=V1;if(V1=G1=null,ZF(t),i)for(t=0;t<i.length;t++)ZF(i[t])}}function nU(t,i){return t(i)}function iU(){}var TL=!1;function oU(t,i,a){if(TL)return t(i,a);TL=!0;try{return nU(t,i,a)}finally{TL=!1,(G1!==null||V1!==null)&&(iU(),rU())}}function kw(t,i){var a=t.stateNode;if(a===null)return null;var u=qE(a);if(u===null)return null;a=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(gr(231,i,typeof a));return a}var q5=!1;if(Wd)try{var tw={};Object.defineProperty(tw,"passive",{get:function(){q5=!0}}),window.addEventListener("test",tw,tw),window.removeEventListener("test",tw,tw)}catch{q5=!1}function yX(t,i,a,u,m,M,L,z,U){var W=Array.prototype.slice.call(arguments,3);try{i.apply(a,W)}catch(J){this.onError(J)}}var _w=!1,qT=null,KT=!1,K5=null,xX={onError:function(t){_w=!0,qT=t}};function AX(t,i,a,u,m,M,L,z,U){_w=!1,qT=null,yX.apply(xX,arguments)}function wX(t,i,a,u,m,M,L,z,U){if(AX.apply(this,arguments),_w){if(_w){var W=qT;_w=!1,qT=null}else throw Error(gr(198));KT||(KT=!0,K5=W)}}function a0(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,i.flags&4098&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function aU(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function qF(t){if(a0(t)!==t)throw Error(gr(188))}function CX(t){var i=t.alternate;if(!i){if(i=a0(t),i===null)throw Error(gr(188));return i!==t?null:t}for(var a=t,u=i;;){var m=a.return;if(m===null)break;var M=m.alternate;if(M===null){if(u=m.return,u!==null){a=u;continue}break}if(m.child===M.child){for(M=m.child;M;){if(M===a)return qF(m),t;if(M===u)return qF(m),i;M=M.sibling}throw Error(gr(188))}if(a.return!==u.return)a=m,u=M;else{for(var L=!1,z=m.child;z;){if(z===a){L=!0,a=m,u=M;break}if(z===u){L=!0,u=m,a=M;break}z=z.sibling}if(!L){for(z=M.child;z;){if(z===a){L=!0,a=M,u=m;break}if(z===u){L=!0,u=M,a=m;break}z=z.sibling}if(!L)throw Error(gr(189))}}if(a.alternate!==u)throw Error(gr(190))}if(a.tag!==3)throw Error(gr(188));return a.stateNode.current===a?t:i}function sU(t){return t=CX(t),t!==null?lU(t):null}function lU(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var i=lU(t);if(i!==null)return i;t=t.sibling}return null}var uU=Fu.unstable_scheduleCallback,KF=Fu.unstable_cancelCallback,_X=Fu.unstable_shouldYield,MX=Fu.unstable_requestPaint,Na=Fu.unstable_now,SX=Fu.unstable_getCurrentPriorityLevel,X4=Fu.unstable_ImmediatePriority,cU=Fu.unstable_UserBlockingPriority,JT=Fu.unstable_NormalPriority,TX=Fu.unstable_LowPriority,hU=Fu.unstable_IdlePriority,WE=null,Rf=null;function EX(t){if(Rf&&typeof Rf.onCommitFiberRoot=="function")try{Rf.onCommitFiberRoot(WE,t,void 0,(t.current.flags&128)===128)}catch{}}var Sh=Math.clz32?Math.clz32:LX,IX=Math.log,RX=Math.LN2;function LX(t){return t>>>=0,t===0?32:31-(IX(t)/RX|0)|0}var US=64,kS=4194304;function vw(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function QT(t,i){var a=t.pendingLanes;if(a===0)return 0;var u=0,m=t.suspendedLanes,M=t.pingedLanes,L=a&268435455;if(L!==0){var z=L&~m;z!==0?u=vw(z):(M&=L,M!==0&&(u=vw(M)))}else L=a&~m,L!==0?u=vw(L):M!==0&&(u=vw(M));if(u===0)return 0;if(i!==0&&i!==u&&!(i&m)&&(m=u&-u,M=i&-i,m>=M||m===16&&(M&4194240)!==0))return i;if(u&4&&(u|=a&16),i=t.entangledLanes,i!==0)for(t=t.entanglements,i&=u;0<i;)a=31-Sh(i),m=1<<a,u|=t[a],i&=~m;return u}function PX(t,i){switch(t){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OX(t,i){for(var a=t.suspendedLanes,u=t.pingedLanes,m=t.expirationTimes,M=t.pendingLanes;0<M;){var L=31-Sh(M),z=1<<L,U=m[L];U===-1?(!(z&a)||z&u)&&(m[L]=PX(z,i)):U<=i&&(t.expiredLanes|=z),M&=~z}}function J5(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function fU(){var t=US;return US<<=1,!(US&4194240)&&(US=64),t}function EL(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function yC(t,i,a){t.pendingLanes|=i,i!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,i=31-Sh(i),t[i]=a}function DX(t,i){var a=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<a;){var m=31-Sh(a),M=1<<m;i[m]=0,u[m]=-1,t[m]=-1,a&=~M}}function Y4(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var u=31-Sh(a),m=1<<u;m&i|t[u]&i&&(t[u]|=i),a&=~m}}var vo=0;function dU(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var pU,Z4,mU,gU,vU,Q5=!1,HS=[],Im=null,Rm=null,Lm=null,Hw=new Map,jw=new Map,wm=[],bX="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function JF(t,i){switch(t){case"focusin":case"focusout":Im=null;break;case"dragenter":case"dragleave":Rm=null;break;case"mouseover":case"mouseout":Lm=null;break;case"pointerover":case"pointerout":Hw.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":jw.delete(i.pointerId)}}function rw(t,i,a,u,m,M){return t===null||t.nativeEvent!==M?(t={blockedOn:i,domEventName:a,eventSystemFlags:u,nativeEvent:M,targetContainers:[m]},i!==null&&(i=AC(i),i!==null&&Z4(i)),t):(t.eventSystemFlags|=u,i=t.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),t)}function FX(t,i,a,u,m){switch(i){case"focusin":return Im=rw(Im,t,i,a,u,m),!0;case"dragenter":return Rm=rw(Rm,t,i,a,u,m),!0;case"mouseover":return Lm=rw(Lm,t,i,a,u,m),!0;case"pointerover":var M=m.pointerId;return Hw.set(M,rw(Hw.get(M)||null,t,i,a,u,m)),!0;case"gotpointercapture":return M=m.pointerId,jw.set(M,rw(jw.get(M)||null,t,i,a,u,m)),!0}return!1}function yU(t){var i=zv(t.target);if(i!==null){var a=a0(i);if(a!==null){if(i=a.tag,i===13){if(i=aU(a),i!==null){t.blockedOn=i,vU(t.priority,function(){mU(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _T(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=$5(t.domEventName,t.eventSystemFlags,i[0],t.nativeEvent);if(a===null){a=t.nativeEvent;var u=new a.constructor(a.type,a);Y5=u,a.target.dispatchEvent(u),Y5=null}else return i=AC(a),i!==null&&Z4(i),t.blockedOn=a,!1;i.shift()}return!0}function QF(t,i,a){_T(t)&&a.delete(i)}function NX(){Q5=!1,Im!==null&&_T(Im)&&(Im=null),Rm!==null&&_T(Rm)&&(Rm=null),Lm!==null&&_T(Lm)&&(Lm=null),Hw.forEach(QF),jw.forEach(QF)}function nw(t,i){t.blockedOn===i&&(t.blockedOn=null,Q5||(Q5=!0,Fu.unstable_scheduleCallback(Fu.unstable_NormalPriority,NX)))}function Gw(t){function i(m){return nw(m,t)}if(0<HS.length){nw(HS[0],t);for(var a=1;a<HS.length;a++){var u=HS[a];u.blockedOn===t&&(u.blockedOn=null)}}for(Im!==null&&nw(Im,t),Rm!==null&&nw(Rm,t),Lm!==null&&nw(Lm,t),Hw.forEach(i),jw.forEach(i),a=0;a<wm.length;a++)u=wm[a],u.blockedOn===t&&(u.blockedOn=null);for(;0<wm.length&&(a=wm[0],a.blockedOn===null);)yU(a),a.blockedOn===null&&wm.shift()}var W1=Jd.ReactCurrentBatchConfig,$T=!0;function BX(t,i,a,u){var m=vo,M=W1.transition;W1.transition=null;try{vo=1,q4(t,i,a,u)}finally{vo=m,W1.transition=M}}function zX(t,i,a,u){var m=vo,M=W1.transition;W1.transition=null;try{vo=4,q4(t,i,a,u)}finally{vo=m,W1.transition=M}}function q4(t,i,a,u){if($T){var m=$5(t,i,a,u);if(m===null)BL(t,i,u,eE,a),JF(t,u);else if(FX(m,t,i,a,u))u.stopPropagation();else if(JF(t,u),i&4&&-1<bX.indexOf(t)){for(;m!==null;){var M=AC(m);if(M!==null&&pU(M),M=$5(t,i,a,u),M===null&&BL(t,i,u,eE,a),M===m)break;m=M}m!==null&&u.stopPropagation()}else BL(t,i,u,null,a)}}var eE=null;function $5(t,i,a,u){if(eE=null,t=W4(u),t=zv(t),t!==null)if(i=a0(t),i===null)t=null;else if(a=i.tag,a===13){if(t=aU(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null);return eE=t,null}function xU(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(SX()){case X4:return 1;case cU:return 4;case JT:case TX:return 16;case hU:return 536870912;default:return 16}default:return 16}}var _m=null,K4=null,MT=null;function AU(){if(MT)return MT;var t,i=K4,a=i.length,u,m="value"in _m?_m.value:_m.textContent,M=m.length;for(t=0;t<a&&i[t]===m[t];t++);var L=a-t;for(u=1;u<=L&&i[a-u]===m[M-u];u++);return MT=m.slice(t,1<u?1-u:void 0)}function ST(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function jS(){return!0}function $F(){return!1}function zu(t){function i(a,u,m,M,L){this._reactName=a,this._targetInst=m,this.type=u,this.nativeEvent=M,this.target=L,this.currentTarget=null;for(var z in t)t.hasOwnProperty(z)&&(a=t[z],this[z]=a?a(M):M[z]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?jS:$F,this.isPropagationStopped=$F,this}return pa(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=jS)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=jS)},persist:function(){},isPersistent:jS}),i}var fx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},J4=zu(fx),xC=pa({},fx,{view:0,detail:0}),UX=zu(xC),IL,RL,iw,XE=pa({},xC,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Q4,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==iw&&(iw&&t.type==="mousemove"?(IL=t.screenX-iw.screenX,RL=t.screenY-iw.screenY):RL=IL=0,iw=t),IL)},movementY:function(t){return"movementY"in t?t.movementY:RL}}),eN=zu(XE),kX=pa({},XE,{dataTransfer:0}),HX=zu(kX),jX=pa({},xC,{relatedTarget:0}),LL=zu(jX),GX=pa({},fx,{animationName:0,elapsedTime:0,pseudoElement:0}),VX=zu(GX),WX=pa({},fx,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),XX=zu(WX),YX=pa({},fx,{data:0}),tN=zu(YX),ZX={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qX={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KX={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function JX(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=KX[t])?!!i[t]:!1}function Q4(){return JX}var QX=pa({},xC,{key:function(t){if(t.key){var i=ZX[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=ST(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qX[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Q4,charCode:function(t){return t.type==="keypress"?ST(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ST(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$X=zu(QX),eY=pa({},XE,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rN=zu(eY),tY=pa({},xC,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Q4}),rY=zu(tY),nY=pa({},fx,{propertyName:0,elapsedTime:0,pseudoElement:0}),iY=zu(nY),oY=pa({},XE,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),aY=zu(oY),sY=[9,13,27,32],$4=Wd&&"CompositionEvent"in window,Mw=null;Wd&&"documentMode"in document&&(Mw=document.documentMode);var lY=Wd&&"TextEvent"in window&&!Mw,wU=Wd&&(!$4||Mw&&8<Mw&&11>=Mw),nN=" ",iN=!1;function CU(t,i){switch(t){case"keyup":return sY.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _U(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var I1=!1;function uY(t,i){switch(t){case"compositionend":return _U(i);case"keypress":return i.which!==32?null:(iN=!0,nN);case"textInput":return t=i.data,t===nN&&iN?null:t;default:return null}}function cY(t,i){if(I1)return t==="compositionend"||!$4&&CU(t,i)?(t=AU(),MT=K4=_m=null,I1=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return wU&&i.locale!=="ko"?null:i.data;default:return null}}var hY={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oN(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!hY[t.type]:i==="textarea"}function MU(t,i,a,u){tU(u),i=tE(i,"onChange"),0<i.length&&(a=new J4("onChange","change",null,a,u),t.push({event:a,listeners:i}))}var Sw=null,Vw=null;function fY(t){FU(t,0)}function YE(t){var i=P1(t);if(Z8(i))return t}function dY(t,i){if(t==="change")return i}var SU=!1;if(Wd){var PL;if(Wd){var OL="oninput"in document;if(!OL){var aN=document.createElement("div");aN.setAttribute("oninput","return;"),OL=typeof aN.oninput=="function"}PL=OL}else PL=!1;SU=PL&&(!document.documentMode||9<document.documentMode)}function sN(){Sw&&(Sw.detachEvent("onpropertychange",TU),Vw=Sw=null)}function TU(t){if(t.propertyName==="value"&&YE(Vw)){var i=[];MU(i,Vw,t,W4(t)),oU(fY,i)}}function pY(t,i,a){t==="focusin"?(sN(),Sw=i,Vw=a,Sw.attachEvent("onpropertychange",TU)):t==="focusout"&&sN()}function mY(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return YE(Vw)}function gY(t,i){if(t==="click")return YE(i)}function vY(t,i){if(t==="input"||t==="change")return YE(i)}function yY(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Lh=typeof Object.is=="function"?Object.is:yY;function Ww(t,i){if(Lh(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),u=Object.keys(i);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var m=a[u];if(!F5.call(i,m)||!Lh(t[m],i[m]))return!1}return!0}function lN(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function uN(t,i){var a=lN(t);t=0;for(var u;a;){if(a.nodeType===3){if(u=t+a.textContent.length,t<=i&&u>=i)return{node:a,offset:i-t};t=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=lN(a)}}function EU(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?EU(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function IU(){for(var t=window,i=ZT();i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=ZT(t.document)}return i}function eO(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}function xY(t){var i=IU(),a=t.focusedElem,u=t.selectionRange;if(i!==a&&a&&a.ownerDocument&&EU(a.ownerDocument.documentElement,a)){if(u!==null&&eO(a)){if(i=u.start,t=u.end,t===void 0&&(t=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(t,a.value.length);else if(t=(i=a.ownerDocument||document)&&i.defaultView||window,t.getSelection){t=t.getSelection();var m=a.textContent.length,M=Math.min(u.start,m);u=u.end===void 0?M:Math.min(u.end,m),!t.extend&&M>u&&(m=u,u=M,M=m),m=uN(a,M);var L=uN(a,u);m&&L&&(t.rangeCount!==1||t.anchorNode!==m.node||t.anchorOffset!==m.offset||t.focusNode!==L.node||t.focusOffset!==L.offset)&&(i=i.createRange(),i.setStart(m.node,m.offset),t.removeAllRanges(),M>u?(t.addRange(i),t.extend(L.node,L.offset)):(i.setEnd(L.node,L.offset),t.addRange(i)))}}for(i=[],t=a;t=t.parentNode;)t.nodeType===1&&i.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)t=i[a],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var AY=Wd&&"documentMode"in document&&11>=document.documentMode,R1=null,eP=null,Tw=null,tP=!1;function cN(t,i,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;tP||R1==null||R1!==ZT(u)||(u=R1,"selectionStart"in u&&eO(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Tw&&Ww(Tw,u)||(Tw=u,u=tE(eP,"onSelect"),0<u.length&&(i=new J4("onSelect","select",null,i,a),t.push({event:i,listeners:u}),i.target=R1)))}function GS(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var L1={animationend:GS("Animation","AnimationEnd"),animationiteration:GS("Animation","AnimationIteration"),animationstart:GS("Animation","AnimationStart"),transitionend:GS("Transition","TransitionEnd")},DL={},RU={};Wd&&(RU=document.createElement("div").style,"AnimationEvent"in window||(delete L1.animationend.animation,delete L1.animationiteration.animation,delete L1.animationstart.animation),"TransitionEvent"in window||delete L1.transitionend.transition);function ZE(t){if(DL[t])return DL[t];if(!L1[t])return t;var i=L1[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in RU)return DL[t]=i[a];return t}var LU=ZE("animationend"),PU=ZE("animationiteration"),OU=ZE("animationstart"),DU=ZE("transitionend"),bU=new Map,hN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gm(t,i){bU.set(t,i),o0(i,[t])}for(var bL=0;bL<hN.length;bL++){var FL=hN[bL],wY=FL.toLowerCase(),CY=FL[0].toUpperCase()+FL.slice(1);Gm(wY,"on"+CY)}Gm(LU,"onAnimationEnd");Gm(PU,"onAnimationIteration");Gm(OU,"onAnimationStart");Gm("dblclick","onDoubleClick");Gm("focusin","onFocus");Gm("focusout","onBlur");Gm(DU,"onTransitionEnd");K1("onMouseEnter",["mouseout","mouseover"]);K1("onMouseLeave",["mouseout","mouseover"]);K1("onPointerEnter",["pointerout","pointerover"]);K1("onPointerLeave",["pointerout","pointerover"]);o0("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));o0("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));o0("onBeforeInput",["compositionend","keypress","textInput","paste"]);o0("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));o0("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));o0("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yw="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_Y=new Set("cancel close invalid load scroll toggle".split(" ").concat(yw));function fN(t,i,a){var u=t.type||"unknown-event";t.currentTarget=a,wX(u,i,void 0,t),t.currentTarget=null}function FU(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var u=t[a],m=u.event;u=u.listeners;e:{var M=void 0;if(i)for(var L=u.length-1;0<=L;L--){var z=u[L],U=z.instance,W=z.currentTarget;if(z=z.listener,U!==M&&m.isPropagationStopped())break e;fN(m,z,W),M=U}else for(L=0;L<u.length;L++){if(z=u[L],U=z.instance,W=z.currentTarget,z=z.listener,U!==M&&m.isPropagationStopped())break e;fN(m,z,W),M=U}}}if(KT)throw t=K5,KT=!1,K5=null,t}function Xo(t,i){var a=i[aP];a===void 0&&(a=i[aP]=new Set);var u=t+"__bubble";a.has(u)||(NU(i,t,2,!1),a.add(u))}function NL(t,i,a){var u=0;i&&(u|=4),NU(a,t,u,i)}var VS="_reactListening"+Math.random().toString(36).slice(2);function Xw(t){if(!t[VS]){t[VS]=!0,G8.forEach(function(a){a!=="selectionchange"&&(_Y.has(a)||NL(a,!1,t),NL(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[VS]||(i[VS]=!0,NL("selectionchange",!1,i))}}function NU(t,i,a,u){switch(xU(i)){case 1:var m=BX;break;case 4:m=zX;break;default:m=q4}a=m.bind(null,i,a,t),m=void 0,!q5||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),u?m!==void 0?t.addEventListener(i,a,{capture:!0,passive:m}):t.addEventListener(i,a,!0):m!==void 0?t.addEventListener(i,a,{passive:m}):t.addEventListener(i,a,!1)}function BL(t,i,a,u,m){var M=u;if(!(i&1)&&!(i&2)&&u!==null)e:for(;;){if(u===null)return;var L=u.tag;if(L===3||L===4){var z=u.stateNode.containerInfo;if(z===m||z.nodeType===8&&z.parentNode===m)break;if(L===4)for(L=u.return;L!==null;){var U=L.tag;if((U===3||U===4)&&(U=L.stateNode.containerInfo,U===m||U.nodeType===8&&U.parentNode===m))return;L=L.return}for(;z!==null;){if(L=zv(z),L===null)return;if(U=L.tag,U===5||U===6){u=M=L;continue e}z=z.parentNode}}u=u.return}oU(function(){var W=M,J=W4(a),te=[];e:{var ae=bU.get(t);if(ae!==void 0){var ve=J4,he=t;switch(t){case"keypress":if(ST(a)===0)break e;case"keydown":case"keyup":ve=$X;break;case"focusin":he="focus",ve=LL;break;case"focusout":he="blur",ve=LL;break;case"beforeblur":case"afterblur":ve=LL;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=eN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=HX;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=rY;break;case LU:case PU:case OU:ve=VX;break;case DU:ve=iY;break;case"scroll":ve=UX;break;case"wheel":ve=aY;break;case"copy":case"cut":case"paste":ve=XX;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=rN}var oe=(i&4)!==0,me=!oe&&t==="scroll",ge=oe?ae!==null?ae+"Capture":null:ae;oe=[];for(var de=W,ce;de!==null;){ce=de;var _e=ce.stateNode;if(ce.tag===5&&_e!==null&&(ce=_e,ge!==null&&(_e=kw(de,ge),_e!=null&&oe.push(Yw(de,_e,ce)))),me)break;de=de.return}0<oe.length&&(ae=new ve(ae,he,null,a,J),te.push({event:ae,listeners:oe}))}}if(!(i&7)){e:{if(ae=t==="mouseover"||t==="pointerover",ve=t==="mouseout"||t==="pointerout",ae&&a!==Y5&&(he=a.relatedTarget||a.fromElement)&&(zv(he)||he[Xd]))break e;if((ve||ae)&&(ae=J.window===J?J:(ae=J.ownerDocument)?ae.defaultView||ae.parentWindow:window,ve?(he=a.relatedTarget||a.toElement,ve=W,he=he?zv(he):null,he!==null&&(me=a0(he),he!==me||he.tag!==5&&he.tag!==6)&&(he=null)):(ve=null,he=W),ve!==he)){if(oe=eN,_e="onMouseLeave",ge="onMouseEnter",de="mouse",(t==="pointerout"||t==="pointerover")&&(oe=rN,_e="onPointerLeave",ge="onPointerEnter",de="pointer"),me=ve==null?ae:P1(ve),ce=he==null?ae:P1(he),ae=new oe(_e,de+"leave",ve,a,J),ae.target=me,ae.relatedTarget=ce,_e=null,zv(J)===W&&(oe=new oe(ge,de+"enter",he,a,J),oe.target=ce,oe.relatedTarget=me,_e=oe),me=_e,ve&&he)t:{for(oe=ve,ge=he,de=0,ce=oe;ce;ce=p1(ce))de++;for(ce=0,_e=ge;_e;_e=p1(_e))ce++;for(;0<de-ce;)oe=p1(oe),de--;for(;0<ce-de;)ge=p1(ge),ce--;for(;de--;){if(oe===ge||ge!==null&&oe===ge.alternate)break t;oe=p1(oe),ge=p1(ge)}oe=null}else oe=null;ve!==null&&dN(te,ae,ve,oe,!1),he!==null&&me!==null&&dN(te,me,he,oe,!0)}}e:{if(ae=W?P1(W):window,ve=ae.nodeName&&ae.nodeName.toLowerCase(),ve==="select"||ve==="input"&&ae.type==="file")var Re=dY;else if(oN(ae))if(SU)Re=vY;else{Re=mY;var Ee=pY}else(ve=ae.nodeName)&&ve.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(Re=gY);if(Re&&(Re=Re(t,W))){MU(te,Re,a,J);break e}Ee&&Ee(t,ae,W),t==="focusout"&&(Ee=ae._wrapperState)&&Ee.controlled&&ae.type==="number"&&j5(ae,"number",ae.value)}switch(Ee=W?P1(W):window,t){case"focusin":(oN(Ee)||Ee.contentEditable==="true")&&(R1=Ee,eP=W,Tw=null);break;case"focusout":Tw=eP=R1=null;break;case"mousedown":tP=!0;break;case"contextmenu":case"mouseup":case"dragend":tP=!1,cN(te,a,J);break;case"selectionchange":if(AY)break;case"keydown":case"keyup":cN(te,a,J)}var De;if($4)e:{switch(t){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else I1?CU(t,a)&&(We="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(We="onCompositionStart");We&&(wU&&a.locale!=="ko"&&(I1||We!=="onCompositionStart"?We==="onCompositionEnd"&&I1&&(De=AU()):(_m=J,K4="value"in _m?_m.value:_m.textContent,I1=!0)),Ee=tE(W,We),0<Ee.length&&(We=new tN(We,t,null,a,J),te.push({event:We,listeners:Ee}),De?We.data=De:(De=_U(a),De!==null&&(We.data=De)))),(De=lY?uY(t,a):cY(t,a))&&(W=tE(W,"onBeforeInput"),0<W.length&&(J=new tN("onBeforeInput","beforeinput",null,a,J),te.push({event:J,listeners:W}),J.data=De))}FU(te,i)})}function Yw(t,i,a){return{instance:t,listener:i,currentTarget:a}}function tE(t,i){for(var a=i+"Capture",u=[];t!==null;){var m=t,M=m.stateNode;m.tag===5&&M!==null&&(m=M,M=kw(t,a),M!=null&&u.unshift(Yw(t,M,m)),M=kw(t,i),M!=null&&u.push(Yw(t,M,m))),t=t.return}return u}function p1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function dN(t,i,a,u,m){for(var M=i._reactName,L=[];a!==null&&a!==u;){var z=a,U=z.alternate,W=z.stateNode;if(U!==null&&U===u)break;z.tag===5&&W!==null&&(z=W,m?(U=kw(a,M),U!=null&&L.unshift(Yw(a,U,z))):m||(U=kw(a,M),U!=null&&L.push(Yw(a,U,z)))),a=a.return}L.length!==0&&t.push({event:i,listeners:L})}var MY=/\r\n?/g,SY=/\u0000|\uFFFD/g;function pN(t){return(typeof t=="string"?t:""+t).replace(MY,`
`).replace(SY,"")}function WS(t,i,a){if(i=pN(i),pN(t)!==i&&a)throw Error(gr(425))}function rE(){}var rP=null,nP=null;function iP(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var oP=typeof setTimeout=="function"?setTimeout:void 0,TY=typeof clearTimeout=="function"?clearTimeout:void 0,mN=typeof Promise=="function"?Promise:void 0,EY=typeof queueMicrotask=="function"?queueMicrotask:typeof mN<"u"?function(t){return mN.resolve(null).then(t).catch(IY)}:oP;function IY(t){setTimeout(function(){throw t})}function zL(t,i){var a=i,u=0;do{var m=a.nextSibling;if(t.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(u===0){t.removeChild(m),Gw(i);return}u--}else a!=="$"&&a!=="$?"&&a!=="$!"||u++;a=m}while(a);Gw(i)}function Pm(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return t}function gN(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}var dx=Math.random().toString(36).slice(2),Ef="__reactFiber$"+dx,Zw="__reactProps$"+dx,Xd="__reactContainer$"+dx,aP="__reactEvents$"+dx,RY="__reactListeners$"+dx,LY="__reactHandles$"+dx;function zv(t){var i=t[Ef];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Xd]||a[Ef]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=gN(t);t!==null;){if(a=t[Ef])return a;t=gN(t)}return i}t=a,a=t.parentNode}return null}function AC(t){return t=t[Ef]||t[Xd],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function P1(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(gr(33))}function qE(t){return t[Zw]||null}var sP=[],O1=-1;function Vm(t){return{current:t}}function Yo(t){0>O1||(t.current=sP[O1],sP[O1]=null,O1--)}function Uo(t,i){O1++,sP[O1]=t.current,t.current=i}var zm={},cl=Vm(zm),nu=Vm(!1),Jv=zm;function J1(t,i){var a=t.type.contextTypes;if(!a)return zm;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===i)return u.__reactInternalMemoizedMaskedChildContext;var m={},M;for(M in a)m[M]=i[M];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=m),m}function iu(t){return t=t.childContextTypes,t!=null}function nE(){Yo(nu),Yo(cl)}function vN(t,i,a){if(cl.current!==zm)throw Error(gr(168));Uo(cl,i),Uo(nu,a)}function BU(t,i,a){var u=t.stateNode;if(i=i.childContextTypes,typeof u.getChildContext!="function")return a;u=u.getChildContext();for(var m in u)if(!(m in i))throw Error(gr(108,pX(t)||"Unknown",m));return pa({},a,u)}function iE(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||zm,Jv=cl.current,Uo(cl,t),Uo(nu,nu.current),!0}function yN(t,i,a){var u=t.stateNode;if(!u)throw Error(gr(169));a?(t=BU(t,i,Jv),u.__reactInternalMemoizedMergedChildContext=t,Yo(nu),Yo(cl),Uo(cl,t)):Yo(nu),Uo(nu,a)}var Bd=null,KE=!1,UL=!1;function zU(t){Bd===null?Bd=[t]:Bd.push(t)}function PY(t){KE=!0,zU(t)}function Wm(){if(!UL&&Bd!==null){UL=!0;var t=0,i=vo;try{var a=Bd;for(vo=1;t<a.length;t++){var u=a[t];do u=u(!0);while(u!==null)}Bd=null,KE=!1}catch(m){throw Bd!==null&&(Bd=Bd.slice(t+1)),uU(X4,Wm),m}finally{vo=i,UL=!1}}return null}var D1=[],b1=0,oE=null,aE=0,xc=[],Ac=0,Qv=null,Ud=1,kd="";function bv(t,i){D1[b1++]=aE,D1[b1++]=oE,oE=t,aE=i}function UU(t,i,a){xc[Ac++]=Ud,xc[Ac++]=kd,xc[Ac++]=Qv,Qv=t;var u=Ud;t=kd;var m=32-Sh(u)-1;u&=~(1<<m),a+=1;var M=32-Sh(i)+m;if(30<M){var L=m-m%5;M=(u&(1<<L)-1).toString(32),u>>=L,m-=L,Ud=1<<32-Sh(i)+m|a<<m|u,kd=M+t}else Ud=1<<M|a<<m|u,kd=t}function tO(t){t.return!==null&&(bv(t,1),UU(t,1,0))}function rO(t){for(;t===oE;)oE=D1[--b1],D1[b1]=null,aE=D1[--b1],D1[b1]=null;for(;t===Qv;)Qv=xc[--Ac],xc[Ac]=null,kd=xc[--Ac],xc[Ac]=null,Ud=xc[--Ac],xc[Ac]=null}var bu=null,Pu=null,ta=!1,Mh=null;function kU(t,i){var a=wc(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=t,i=t.deletions,i===null?(t.deletions=[a],t.flags|=16):i.push(a)}function xN(t,i){switch(t.tag){case 5:var a=t.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(t.stateNode=i,bu=t,Pu=Pm(i.firstChild),!0):!1;case 6:return i=t.pendingProps===""||i.nodeType!==3?null:i,i!==null?(t.stateNode=i,bu=t,Pu=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=Qv!==null?{id:Ud,overflow:kd}:null,t.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=wc(18,null,null,0),a.stateNode=i,a.return=t,t.child=a,bu=t,Pu=null,!0):!1;default:return!1}}function lP(t){return(t.mode&1)!==0&&(t.flags&128)===0}function uP(t){if(ta){var i=Pu;if(i){var a=i;if(!xN(t,i)){if(lP(t))throw Error(gr(418));i=Pm(a.nextSibling);var u=bu;i&&xN(t,i)?kU(u,a):(t.flags=t.flags&-4097|2,ta=!1,bu=t)}}else{if(lP(t))throw Error(gr(418));t.flags=t.flags&-4097|2,ta=!1,bu=t}}}function AN(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bu=t}function XS(t){if(t!==bu)return!1;if(!ta)return AN(t),ta=!0,!1;var i;if((i=t.tag!==3)&&!(i=t.tag!==5)&&(i=t.type,i=i!=="head"&&i!=="body"&&!iP(t.type,t.memoizedProps)),i&&(i=Pu)){if(lP(t))throw HU(),Error(gr(418));for(;i;)kU(t,i),i=Pm(i.nextSibling)}if(AN(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(gr(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"){if(i===0){Pu=Pm(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}t=t.nextSibling}Pu=null}}else Pu=bu?Pm(t.stateNode.nextSibling):null;return!0}function HU(){for(var t=Pu;t;)t=Pm(t.nextSibling)}function Q1(){Pu=bu=null,ta=!1}function nO(t){Mh===null?Mh=[t]:Mh.push(t)}var OY=Jd.ReactCurrentBatchConfig;function ow(t,i,a){if(t=a.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(gr(309));var u=a.stateNode}if(!u)throw Error(gr(147,t));var m=u,M=""+t;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===M?i.ref:(i=function(L){var z=m.refs;L===null?delete z[M]:z[M]=L},i._stringRef=M,i)}if(typeof t!="string")throw Error(gr(284));if(!a._owner)throw Error(gr(290,t))}return t}function YS(t,i){throw t=Object.prototype.toString.call(i),Error(gr(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t))}function wN(t){var i=t._init;return i(t._payload)}function jU(t){function i(ge,de){if(t){var ce=ge.deletions;ce===null?(ge.deletions=[de],ge.flags|=16):ce.push(de)}}function a(ge,de){if(!t)return null;for(;de!==null;)i(ge,de),de=de.sibling;return null}function u(ge,de){for(ge=new Map;de!==null;)de.key!==null?ge.set(de.key,de):ge.set(de.index,de),de=de.sibling;return ge}function m(ge,de){return ge=Fm(ge,de),ge.index=0,ge.sibling=null,ge}function M(ge,de,ce){return ge.index=ce,t?(ce=ge.alternate,ce!==null?(ce=ce.index,ce<de?(ge.flags|=2,de):ce):(ge.flags|=2,de)):(ge.flags|=1048576,de)}function L(ge){return t&&ge.alternate===null&&(ge.flags|=2),ge}function z(ge,de,ce,_e){return de===null||de.tag!==6?(de=XL(ce,ge.mode,_e),de.return=ge,de):(de=m(de,ce),de.return=ge,de)}function U(ge,de,ce,_e){var Re=ce.type;return Re===E1?J(ge,de,ce.props.children,_e,ce.key):de!==null&&(de.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===xm&&wN(Re)===de.type)?(_e=m(de,ce.props),_e.ref=ow(ge,de,ce),_e.return=ge,_e):(_e=OT(ce.type,ce.key,ce.props,null,ge.mode,_e),_e.ref=ow(ge,de,ce),_e.return=ge,_e)}function W(ge,de,ce,_e){return de===null||de.tag!==4||de.stateNode.containerInfo!==ce.containerInfo||de.stateNode.implementation!==ce.implementation?(de=YL(ce,ge.mode,_e),de.return=ge,de):(de=m(de,ce.children||[]),de.return=ge,de)}function J(ge,de,ce,_e,Re){return de===null||de.tag!==7?(de=Xv(ce,ge.mode,_e,Re),de.return=ge,de):(de=m(de,ce),de.return=ge,de)}function te(ge,de,ce){if(typeof de=="string"&&de!==""||typeof de=="number")return de=XL(""+de,ge.mode,ce),de.return=ge,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case NS:return ce=OT(de.type,de.key,de.props,null,ge.mode,ce),ce.ref=ow(ge,null,de),ce.return=ge,ce;case T1:return de=YL(de,ge.mode,ce),de.return=ge,de;case xm:var _e=de._init;return te(ge,_e(de._payload),ce)}if(gw(de)||ew(de))return de=Xv(de,ge.mode,ce,null),de.return=ge,de;YS(ge,de)}return null}function ae(ge,de,ce,_e){var Re=de!==null?de.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number")return Re!==null?null:z(ge,de,""+ce,_e);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case NS:return ce.key===Re?U(ge,de,ce,_e):null;case T1:return ce.key===Re?W(ge,de,ce,_e):null;case xm:return Re=ce._init,ae(ge,de,Re(ce._payload),_e)}if(gw(ce)||ew(ce))return Re!==null?null:J(ge,de,ce,_e,null);YS(ge,ce)}return null}function ve(ge,de,ce,_e,Re){if(typeof _e=="string"&&_e!==""||typeof _e=="number")return ge=ge.get(ce)||null,z(de,ge,""+_e,Re);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case NS:return ge=ge.get(_e.key===null?ce:_e.key)||null,U(de,ge,_e,Re);case T1:return ge=ge.get(_e.key===null?ce:_e.key)||null,W(de,ge,_e,Re);case xm:var Ee=_e._init;return ve(ge,de,ce,Ee(_e._payload),Re)}if(gw(_e)||ew(_e))return ge=ge.get(ce)||null,J(de,ge,_e,Re,null);YS(de,_e)}return null}function he(ge,de,ce,_e){for(var Re=null,Ee=null,De=de,We=de=0,Xe=null;De!==null&&We<ce.length;We++){De.index>We?(Xe=De,De=null):Xe=De.sibling;var et=ae(ge,De,ce[We],_e);if(et===null){De===null&&(De=Xe);break}t&&De&&et.alternate===null&&i(ge,De),de=M(et,de,We),Ee===null?Re=et:Ee.sibling=et,Ee=et,De=Xe}if(We===ce.length)return a(ge,De),ta&&bv(ge,We),Re;if(De===null){for(;We<ce.length;We++)De=te(ge,ce[We],_e),De!==null&&(de=M(De,de,We),Ee===null?Re=De:Ee.sibling=De,Ee=De);return ta&&bv(ge,We),Re}for(De=u(ge,De);We<ce.length;We++)Xe=ve(De,ge,We,ce[We],_e),Xe!==null&&(t&&Xe.alternate!==null&&De.delete(Xe.key===null?We:Xe.key),de=M(Xe,de,We),Ee===null?Re=Xe:Ee.sibling=Xe,Ee=Xe);return t&&De.forEach(function(Ye){return i(ge,Ye)}),ta&&bv(ge,We),Re}function oe(ge,de,ce,_e){var Re=ew(ce);if(typeof Re!="function")throw Error(gr(150));if(ce=Re.call(ce),ce==null)throw Error(gr(151));for(var Ee=Re=null,De=de,We=de=0,Xe=null,et=ce.next();De!==null&&!et.done;We++,et=ce.next()){De.index>We?(Xe=De,De=null):Xe=De.sibling;var Ye=ae(ge,De,et.value,_e);if(Ye===null){De===null&&(De=Xe);break}t&&De&&Ye.alternate===null&&i(ge,De),de=M(Ye,de,We),Ee===null?Re=Ye:Ee.sibling=Ye,Ee=Ye,De=Xe}if(et.done)return a(ge,De),ta&&bv(ge,We),Re;if(De===null){for(;!et.done;We++,et=ce.next())et=te(ge,et.value,_e),et!==null&&(de=M(et,de,We),Ee===null?Re=et:Ee.sibling=et,Ee=et);return ta&&bv(ge,We),Re}for(De=u(ge,De);!et.done;We++,et=ce.next())et=ve(De,ge,We,et.value,_e),et!==null&&(t&&et.alternate!==null&&De.delete(et.key===null?We:et.key),de=M(et,de,We),Ee===null?Re=et:Ee.sibling=et,Ee=et);return t&&De.forEach(function(at){return i(ge,at)}),ta&&bv(ge,We),Re}function me(ge,de,ce,_e){if(typeof ce=="object"&&ce!==null&&ce.type===E1&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case NS:e:{for(var Re=ce.key,Ee=de;Ee!==null;){if(Ee.key===Re){if(Re=ce.type,Re===E1){if(Ee.tag===7){a(ge,Ee.sibling),de=m(Ee,ce.props.children),de.return=ge,ge=de;break e}}else if(Ee.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===xm&&wN(Re)===Ee.type){a(ge,Ee.sibling),de=m(Ee,ce.props),de.ref=ow(ge,Ee,ce),de.return=ge,ge=de;break e}a(ge,Ee);break}else i(ge,Ee);Ee=Ee.sibling}ce.type===E1?(de=Xv(ce.props.children,ge.mode,_e,ce.key),de.return=ge,ge=de):(_e=OT(ce.type,ce.key,ce.props,null,ge.mode,_e),_e.ref=ow(ge,de,ce),_e.return=ge,ge=_e)}return L(ge);case T1:e:{for(Ee=ce.key;de!==null;){if(de.key===Ee)if(de.tag===4&&de.stateNode.containerInfo===ce.containerInfo&&de.stateNode.implementation===ce.implementation){a(ge,de.sibling),de=m(de,ce.children||[]),de.return=ge,ge=de;break e}else{a(ge,de);break}else i(ge,de);de=de.sibling}de=YL(ce,ge.mode,_e),de.return=ge,ge=de}return L(ge);case xm:return Ee=ce._init,me(ge,de,Ee(ce._payload),_e)}if(gw(ce))return he(ge,de,ce,_e);if(ew(ce))return oe(ge,de,ce,_e);YS(ge,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"?(ce=""+ce,de!==null&&de.tag===6?(a(ge,de.sibling),de=m(de,ce),de.return=ge,ge=de):(a(ge,de),de=XL(ce,ge.mode,_e),de.return=ge,ge=de),L(ge)):a(ge,de)}return me}var $1=jU(!0),GU=jU(!1),sE=Vm(null),lE=null,F1=null,iO=null;function oO(){iO=F1=lE=null}function aO(t){var i=sE.current;Yo(sE),t._currentValue=i}function cP(t,i,a){for(;t!==null;){var u=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),t===a)break;t=t.return}}function X1(t,i){lE=t,iO=F1=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&i&&(ru=!0),t.firstContext=null)}function Mc(t){var i=t._currentValue;if(iO!==t)if(t={context:t,memoizedValue:i,next:null},F1===null){if(lE===null)throw Error(gr(308));F1=t,lE.dependencies={lanes:0,firstContext:t}}else F1=F1.next=t;return i}var Uv=null;function sO(t){Uv===null?Uv=[t]:Uv.push(t)}function VU(t,i,a,u){var m=i.interleaved;return m===null?(a.next=a,sO(i)):(a.next=m.next,m.next=a),i.interleaved=a,Yd(t,u)}function Yd(t,i){t.lanes|=i;var a=t.alternate;for(a!==null&&(a.lanes|=i),a=t,t=t.return;t!==null;)t.childLanes|=i,a=t.alternate,a!==null&&(a.childLanes|=i),a=t,t=t.return;return a.tag===3?a.stateNode:null}var Am=!1;function lO(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function WU(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Hd(t,i){return{eventTime:t,lane:i,tag:0,payload:null,callback:null,next:null}}function Om(t,i,a){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,Ji&2){var m=u.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),u.pending=i,Yd(t,a)}return m=u.interleaved,m===null?(i.next=i,sO(u)):(i.next=m.next,m.next=i),u.interleaved=i,Yd(t,a)}function TT(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var u=i.lanes;u&=t.pendingLanes,a|=u,i.lanes=a,Y4(t,a)}}function CN(t,i){var a=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var m=null,M=null;if(a=a.firstBaseUpdate,a!==null){do{var L={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};M===null?m=M=L:M=M.next=L,a=a.next}while(a!==null);M===null?m=M=i:M=M.next=i}else m=M=i;a={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:M,shared:u.shared,effects:u.effects},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}function uE(t,i,a,u){var m=t.updateQueue;Am=!1;var M=m.firstBaseUpdate,L=m.lastBaseUpdate,z=m.shared.pending;if(z!==null){m.shared.pending=null;var U=z,W=U.next;U.next=null,L===null?M=W:L.next=W,L=U;var J=t.alternate;J!==null&&(J=J.updateQueue,z=J.lastBaseUpdate,z!==L&&(z===null?J.firstBaseUpdate=W:z.next=W,J.lastBaseUpdate=U))}if(M!==null){var te=m.baseState;L=0,J=W=U=null,z=M;do{var ae=z.lane,ve=z.eventTime;if((u&ae)===ae){J!==null&&(J=J.next={eventTime:ve,lane:0,tag:z.tag,payload:z.payload,callback:z.callback,next:null});e:{var he=t,oe=z;switch(ae=i,ve=a,oe.tag){case 1:if(he=oe.payload,typeof he=="function"){te=he.call(ve,te,ae);break e}te=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=oe.payload,ae=typeof he=="function"?he.call(ve,te,ae):he,ae==null)break e;te=pa({},te,ae);break e;case 2:Am=!0}}z.callback!==null&&z.lane!==0&&(t.flags|=64,ae=m.effects,ae===null?m.effects=[z]:ae.push(z))}else ve={eventTime:ve,lane:ae,tag:z.tag,payload:z.payload,callback:z.callback,next:null},J===null?(W=J=ve,U=te):J=J.next=ve,L|=ae;if(z=z.next,z===null){if(z=m.shared.pending,z===null)break;ae=z,z=ae.next,ae.next=null,m.lastBaseUpdate=ae,m.shared.pending=null}}while(!0);if(J===null&&(U=te),m.baseState=U,m.firstBaseUpdate=W,m.lastBaseUpdate=J,i=m.shared.interleaved,i!==null){m=i;do L|=m.lane,m=m.next;while(m!==i)}else M===null&&(m.shared.lanes=0);e0|=L,t.lanes=L,t.memoizedState=te}}function _N(t,i,a){if(t=i.effects,i.effects=null,t!==null)for(i=0;i<t.length;i++){var u=t[i],m=u.callback;if(m!==null){if(u.callback=null,u=a,typeof m!="function")throw Error(gr(191,m));m.call(u)}}}var wC={},Lf=Vm(wC),qw=Vm(wC),Kw=Vm(wC);function kv(t){if(t===wC)throw Error(gr(174));return t}function uO(t,i){switch(Uo(Kw,i),Uo(qw,t),Uo(Lf,wC),t=i.nodeType,t){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:V5(null,"");break;default:t=t===8?i.parentNode:i,i=t.namespaceURI||null,t=t.tagName,i=V5(i,t)}Yo(Lf),Uo(Lf,i)}function ex(){Yo(Lf),Yo(qw),Yo(Kw)}function XU(t){kv(Kw.current);var i=kv(Lf.current),a=V5(i,t.type);i!==a&&(Uo(qw,t),Uo(Lf,a))}function cO(t){qw.current===t&&(Yo(Lf),Yo(qw))}var fa=Vm(0);function cE(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var kL=[];function hO(){for(var t=0;t<kL.length;t++)kL[t]._workInProgressVersionPrimary=null;kL.length=0}var ET=Jd.ReactCurrentDispatcher,HL=Jd.ReactCurrentBatchConfig,$v=0,da=null,os=null,ws=null,hE=!1,Ew=!1,Jw=0,DY=0;function il(){throw Error(gr(321))}function fO(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!Lh(t[a],i[a]))return!1;return!0}function dO(t,i,a,u,m,M){if($v=M,da=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,ET.current=t===null||t.memoizedState===null?BY:zY,t=a(u,m),Ew){M=0;do{if(Ew=!1,Jw=0,25<=M)throw Error(gr(301));M+=1,ws=os=null,i.updateQueue=null,ET.current=UY,t=a(u,m)}while(Ew)}if(ET.current=fE,i=os!==null&&os.next!==null,$v=0,ws=os=da=null,hE=!1,i)throw Error(gr(300));return t}function pO(){var t=Jw!==0;return Jw=0,t}function Tf(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ws===null?da.memoizedState=ws=t:ws=ws.next=t,ws}function Sc(){if(os===null){var t=da.alternate;t=t!==null?t.memoizedState:null}else t=os.next;var i=ws===null?da.memoizedState:ws.next;if(i!==null)ws=i,os=t;else{if(t===null)throw Error(gr(310));os=t,t={memoizedState:os.memoizedState,baseState:os.baseState,baseQueue:os.baseQueue,queue:os.queue,next:null},ws===null?da.memoizedState=ws=t:ws=ws.next=t}return ws}function Qw(t,i){return typeof i=="function"?i(t):i}function jL(t){var i=Sc(),a=i.queue;if(a===null)throw Error(gr(311));a.lastRenderedReducer=t;var u=os,m=u.baseQueue,M=a.pending;if(M!==null){if(m!==null){var L=m.next;m.next=M.next,M.next=L}u.baseQueue=m=M,a.pending=null}if(m!==null){M=m.next,u=u.baseState;var z=L=null,U=null,W=M;do{var J=W.lane;if(($v&J)===J)U!==null&&(U=U.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),u=W.hasEagerState?W.eagerState:t(u,W.action);else{var te={lane:J,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};U===null?(z=U=te,L=u):U=U.next=te,da.lanes|=J,e0|=J}W=W.next}while(W!==null&&W!==M);U===null?L=u:U.next=z,Lh(u,i.memoizedState)||(ru=!0),i.memoizedState=u,i.baseState=L,i.baseQueue=U,a.lastRenderedState=u}if(t=a.interleaved,t!==null){m=t;do M=m.lane,da.lanes|=M,e0|=M,m=m.next;while(m!==t)}else m===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function GL(t){var i=Sc(),a=i.queue;if(a===null)throw Error(gr(311));a.lastRenderedReducer=t;var u=a.dispatch,m=a.pending,M=i.memoizedState;if(m!==null){a.pending=null;var L=m=m.next;do M=t(M,L.action),L=L.next;while(L!==m);Lh(M,i.memoizedState)||(ru=!0),i.memoizedState=M,i.baseQueue===null&&(i.baseState=M),a.lastRenderedState=M}return[M,u]}function YU(){}function ZU(t,i){var a=da,u=Sc(),m=i(),M=!Lh(u.memoizedState,m);if(M&&(u.memoizedState=m,ru=!0),u=u.queue,mO(JU.bind(null,a,u,t),[t]),u.getSnapshot!==i||M||ws!==null&&ws.memoizedState.tag&1){if(a.flags|=2048,$w(9,KU.bind(null,a,u,m,i),void 0,null),Cs===null)throw Error(gr(349));$v&30||qU(a,i,m)}return m}function qU(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=da.updateQueue,i===null?(i={lastEffect:null,stores:null},da.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function KU(t,i,a,u){i.value=a,i.getSnapshot=u,QU(i)&&$U(t)}function JU(t,i,a){return a(function(){QU(i)&&$U(t)})}function QU(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!Lh(t,a)}catch{return!0}}function $U(t){var i=Yd(t,1);i!==null&&Th(i,t,1,-1)}function MN(t){var i=Tf();return typeof t=="function"&&(t=t()),i.memoizedState=i.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qw,lastRenderedState:t},i.queue=t,t=t.dispatch=NY.bind(null,da,t),[i.memoizedState,t]}function $w(t,i,a,u){return t={tag:t,create:i,destroy:a,deps:u,next:null},i=da.updateQueue,i===null?(i={lastEffect:null,stores:null},da.updateQueue=i,i.lastEffect=t.next=t):(a=i.lastEffect,a===null?i.lastEffect=t.next=t:(u=a.next,a.next=t,t.next=u,i.lastEffect=t)),t}function ek(){return Sc().memoizedState}function IT(t,i,a,u){var m=Tf();da.flags|=t,m.memoizedState=$w(1|i,a,void 0,u===void 0?null:u)}function JE(t,i,a,u){var m=Sc();u=u===void 0?null:u;var M=void 0;if(os!==null){var L=os.memoizedState;if(M=L.destroy,u!==null&&fO(u,L.deps)){m.memoizedState=$w(i,a,M,u);return}}da.flags|=t,m.memoizedState=$w(1|i,a,M,u)}function SN(t,i){return IT(8390656,8,t,i)}function mO(t,i){return JE(2048,8,t,i)}function tk(t,i){return JE(4,2,t,i)}function rk(t,i){return JE(4,4,t,i)}function nk(t,i){if(typeof i=="function")return t=t(),i(t),function(){i(null)};if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function ik(t,i,a){return a=a!=null?a.concat([t]):null,JE(4,4,nk.bind(null,i,t),a)}function gO(){}function ok(t,i){var a=Sc();i=i===void 0?null:i;var u=a.memoizedState;return u!==null&&i!==null&&fO(i,u[1])?u[0]:(a.memoizedState=[t,i],t)}function ak(t,i){var a=Sc();i=i===void 0?null:i;var u=a.memoizedState;return u!==null&&i!==null&&fO(i,u[1])?u[0]:(t=t(),a.memoizedState=[t,i],t)}function sk(t,i,a){return $v&21?(Lh(a,i)||(a=fU(),da.lanes|=a,e0|=a,t.baseState=!0),i):(t.baseState&&(t.baseState=!1,ru=!0),t.memoizedState=a)}function bY(t,i){var a=vo;vo=a!==0&&4>a?a:4,t(!0);var u=HL.transition;HL.transition={};try{t(!1),i()}finally{vo=a,HL.transition=u}}function lk(){return Sc().memoizedState}function FY(t,i,a){var u=bm(t);if(a={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null},uk(t))ck(i,a);else if(a=VU(t,i,a,u),a!==null){var m=El();Th(a,t,u,m),hk(a,i,u)}}function NY(t,i,a){var u=bm(t),m={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null};if(uk(t))ck(i,m);else{var M=t.alternate;if(t.lanes===0&&(M===null||M.lanes===0)&&(M=i.lastRenderedReducer,M!==null))try{var L=i.lastRenderedState,z=M(L,a);if(m.hasEagerState=!0,m.eagerState=z,Lh(z,L)){var U=i.interleaved;U===null?(m.next=m,sO(i)):(m.next=U.next,U.next=m),i.interleaved=m;return}}catch{}finally{}a=VU(t,i,m,u),a!==null&&(m=El(),Th(a,t,u,m),hk(a,i,u))}}function uk(t){var i=t.alternate;return t===da||i!==null&&i===da}function ck(t,i){Ew=hE=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function hk(t,i,a){if(a&4194240){var u=i.lanes;u&=t.pendingLanes,a|=u,i.lanes=a,Y4(t,a)}}var fE={readContext:Mc,useCallback:il,useContext:il,useEffect:il,useImperativeHandle:il,useInsertionEffect:il,useLayoutEffect:il,useMemo:il,useReducer:il,useRef:il,useState:il,useDebugValue:il,useDeferredValue:il,useTransition:il,useMutableSource:il,useSyncExternalStore:il,useId:il,unstable_isNewReconciler:!1},BY={readContext:Mc,useCallback:function(t,i){return Tf().memoizedState=[t,i===void 0?null:i],t},useContext:Mc,useEffect:SN,useImperativeHandle:function(t,i,a){return a=a!=null?a.concat([t]):null,IT(4194308,4,nk.bind(null,i,t),a)},useLayoutEffect:function(t,i){return IT(4194308,4,t,i)},useInsertionEffect:function(t,i){return IT(4,2,t,i)},useMemo:function(t,i){var a=Tf();return i=i===void 0?null:i,t=t(),a.memoizedState=[t,i],t},useReducer:function(t,i,a){var u=Tf();return i=a!==void 0?a(i):i,u.memoizedState=u.baseState=i,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},u.queue=t,t=t.dispatch=FY.bind(null,da,t),[u.memoizedState,t]},useRef:function(t){var i=Tf();return t={current:t},i.memoizedState=t},useState:MN,useDebugValue:gO,useDeferredValue:function(t){return Tf().memoizedState=t},useTransition:function(){var t=MN(!1),i=t[0];return t=bY.bind(null,t[1]),Tf().memoizedState=t,[i,t]},useMutableSource:function(){},useSyncExternalStore:function(t,i,a){var u=da,m=Tf();if(ta){if(a===void 0)throw Error(gr(407));a=a()}else{if(a=i(),Cs===null)throw Error(gr(349));$v&30||qU(u,i,a)}m.memoizedState=a;var M={value:a,getSnapshot:i};return m.queue=M,SN(JU.bind(null,u,M,t),[t]),u.flags|=2048,$w(9,KU.bind(null,u,M,a,i),void 0,null),a},useId:function(){var t=Tf(),i=Cs.identifierPrefix;if(ta){var a=kd,u=Ud;a=(u&~(1<<32-Sh(u)-1)).toString(32)+a,i=":"+i+"R"+a,a=Jw++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=DY++,i=":"+i+"r"+a.toString(32)+":";return t.memoizedState=i},unstable_isNewReconciler:!1},zY={readContext:Mc,useCallback:ok,useContext:Mc,useEffect:mO,useImperativeHandle:ik,useInsertionEffect:tk,useLayoutEffect:rk,useMemo:ak,useReducer:jL,useRef:ek,useState:function(){return jL(Qw)},useDebugValue:gO,useDeferredValue:function(t){var i=Sc();return sk(i,os.memoizedState,t)},useTransition:function(){var t=jL(Qw)[0],i=Sc().memoizedState;return[t,i]},useMutableSource:YU,useSyncExternalStore:ZU,useId:lk,unstable_isNewReconciler:!1},UY={readContext:Mc,useCallback:ok,useContext:Mc,useEffect:mO,useImperativeHandle:ik,useInsertionEffect:tk,useLayoutEffect:rk,useMemo:ak,useReducer:GL,useRef:ek,useState:function(){return GL(Qw)},useDebugValue:gO,useDeferredValue:function(t){var i=Sc();return os===null?i.memoizedState=t:sk(i,os.memoizedState,t)},useTransition:function(){var t=GL(Qw)[0],i=Sc().memoizedState;return[t,i]},useMutableSource:YU,useSyncExternalStore:ZU,useId:lk,unstable_isNewReconciler:!1};function Ah(t,i){if(t&&t.defaultProps){i=pa({},i),t=t.defaultProps;for(var a in t)i[a]===void 0&&(i[a]=t[a]);return i}return i}function hP(t,i,a,u){i=t.memoizedState,a=a(u,i),a=a==null?i:pa({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var QE={isMounted:function(t){return(t=t._reactInternals)?a0(t)===t:!1},enqueueSetState:function(t,i,a){t=t._reactInternals;var u=El(),m=bm(t),M=Hd(u,m);M.payload=i,a!=null&&(M.callback=a),i=Om(t,M,m),i!==null&&(Th(i,t,m,u),TT(i,t,m))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var u=El(),m=bm(t),M=Hd(u,m);M.tag=1,M.payload=i,a!=null&&(M.callback=a),i=Om(t,M,m),i!==null&&(Th(i,t,m,u),TT(i,t,m))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=El(),u=bm(t),m=Hd(a,u);m.tag=2,i!=null&&(m.callback=i),i=Om(t,m,u),i!==null&&(Th(i,t,u,a),TT(i,t,u))}};function TN(t,i,a,u,m,M,L){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,M,L):i.prototype&&i.prototype.isPureReactComponent?!Ww(a,u)||!Ww(m,M):!0}function fk(t,i,a){var u=!1,m=zm,M=i.contextType;return typeof M=="object"&&M!==null?M=Mc(M):(m=iu(i)?Jv:cl.current,u=i.contextTypes,M=(u=u!=null)?J1(t,m):zm),i=new i(a,M),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=QE,t.stateNode=i,i._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=m,t.__reactInternalMemoizedMaskedChildContext=M),i}function EN(t,i,a,u){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,u),i.state!==t&&QE.enqueueReplaceState(i,i.state,null)}function fP(t,i,a,u){var m=t.stateNode;m.props=a,m.state=t.memoizedState,m.refs={},lO(t);var M=i.contextType;typeof M=="object"&&M!==null?m.context=Mc(M):(M=iu(i)?Jv:cl.current,m.context=J1(t,M)),m.state=t.memoizedState,M=i.getDerivedStateFromProps,typeof M=="function"&&(hP(t,i,M,a),m.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(i=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),i!==m.state&&QE.enqueueReplaceState(m,m.state,null),uE(t,a,m,u),m.state=t.memoizedState),typeof m.componentDidMount=="function"&&(t.flags|=4194308)}function tx(t,i){try{var a="",u=i;do a+=dX(u),u=u.return;while(u);var m=a}catch(M){m=`
Error generating stack: `+M.message+`
`+M.stack}return{value:t,source:i,stack:m,digest:null}}function VL(t,i,a){return{value:t,source:null,stack:a??null,digest:i??null}}function dP(t,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var kY=typeof WeakMap=="function"?WeakMap:Map;function dk(t,i,a){a=Hd(-1,a),a.tag=3,a.payload={element:null};var u=i.value;return a.callback=function(){pE||(pE=!0,_P=u),dP(t,i)},a}function pk(t,i,a){a=Hd(-1,a),a.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var m=i.value;a.payload=function(){return u(m)},a.callback=function(){dP(t,i)}}var M=t.stateNode;return M!==null&&typeof M.componentDidCatch=="function"&&(a.callback=function(){dP(t,i),typeof u!="function"&&(Dm===null?Dm=new Set([this]):Dm.add(this));var L=i.stack;this.componentDidCatch(i.value,{componentStack:L!==null?L:""})}),a}function IN(t,i,a){var u=t.pingCache;if(u===null){u=t.pingCache=new kY;var m=new Set;u.set(i,m)}else m=u.get(i),m===void 0&&(m=new Set,u.set(i,m));m.has(a)||(m.add(a),t=eZ.bind(null,t,i,a),i.then(t,t))}function RN(t){do{var i;if((i=t.tag===13)&&(i=t.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return t;t=t.return}while(t!==null);return null}function LN(t,i,a,u,m){return t.mode&1?(t.flags|=65536,t.lanes=m,t):(t===i?t.flags|=65536:(t.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=Hd(-1,1),i.tag=2,Om(a,i,1))),a.lanes|=1),t)}var HY=Jd.ReactCurrentOwner,ru=!1;function Sl(t,i,a,u){i.child=t===null?GU(i,null,a,u):$1(i,t.child,a,u)}function PN(t,i,a,u,m){a=a.render;var M=i.ref;return X1(i,m),u=dO(t,i,a,u,M,m),a=pO(),t!==null&&!ru?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~m,Zd(t,i,m)):(ta&&a&&tO(i),i.flags|=1,Sl(t,i,u,m),i.child)}function ON(t,i,a,u,m){if(t===null){var M=a.type;return typeof M=="function"&&!MO(M)&&M.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=M,mk(t,i,M,u,m)):(t=OT(a.type,null,u,i,i.mode,m),t.ref=i.ref,t.return=i,i.child=t)}if(M=t.child,!(t.lanes&m)){var L=M.memoizedProps;if(a=a.compare,a=a!==null?a:Ww,a(L,u)&&t.ref===i.ref)return Zd(t,i,m)}return i.flags|=1,t=Fm(M,u),t.ref=i.ref,t.return=i,i.child=t}function mk(t,i,a,u,m){if(t!==null){var M=t.memoizedProps;if(Ww(M,u)&&t.ref===i.ref)if(ru=!1,i.pendingProps=u=M,(t.lanes&m)!==0)t.flags&131072&&(ru=!0);else return i.lanes=t.lanes,Zd(t,i,m)}return pP(t,i,a,u,m)}function gk(t,i,a){var u=i.pendingProps,m=u.children,M=t!==null?t.memoizedState:null;if(u.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Uo(B1,Lu),Lu|=a;else{if(!(a&1073741824))return t=M!==null?M.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:t,cachePool:null,transitions:null},i.updateQueue=null,Uo(B1,Lu),Lu|=t,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=M!==null?M.baseLanes:a,Uo(B1,Lu),Lu|=u}else M!==null?(u=M.baseLanes|a,i.memoizedState=null):u=a,Uo(B1,Lu),Lu|=u;return Sl(t,i,m,a),i.child}function vk(t,i){var a=i.ref;(t===null&&a!==null||t!==null&&t.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function pP(t,i,a,u,m){var M=iu(a)?Jv:cl.current;return M=J1(i,M),X1(i,m),a=dO(t,i,a,u,M,m),u=pO(),t!==null&&!ru?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~m,Zd(t,i,m)):(ta&&u&&tO(i),i.flags|=1,Sl(t,i,a,m),i.child)}function DN(t,i,a,u,m){if(iu(a)){var M=!0;iE(i)}else M=!1;if(X1(i,m),i.stateNode===null)RT(t,i),fk(i,a,u),fP(i,a,u,m),u=!0;else if(t===null){var L=i.stateNode,z=i.memoizedProps;L.props=z;var U=L.context,W=a.contextType;typeof W=="object"&&W!==null?W=Mc(W):(W=iu(a)?Jv:cl.current,W=J1(i,W));var J=a.getDerivedStateFromProps,te=typeof J=="function"||typeof L.getSnapshotBeforeUpdate=="function";te||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(z!==u||U!==W)&&EN(i,L,u,W),Am=!1;var ae=i.memoizedState;L.state=ae,uE(i,u,L,m),U=i.memoizedState,z!==u||ae!==U||nu.current||Am?(typeof J=="function"&&(hP(i,a,J,u),U=i.memoizedState),(z=Am||TN(i,a,z,u,ae,U,W))?(te||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(i.flags|=4194308)):(typeof L.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=U),L.props=u,L.state=U,L.context=W,u=z):(typeof L.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{L=i.stateNode,WU(t,i),z=i.memoizedProps,W=i.type===i.elementType?z:Ah(i.type,z),L.props=W,te=i.pendingProps,ae=L.context,U=a.contextType,typeof U=="object"&&U!==null?U=Mc(U):(U=iu(a)?Jv:cl.current,U=J1(i,U));var ve=a.getDerivedStateFromProps;(J=typeof ve=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(z!==te||ae!==U)&&EN(i,L,u,U),Am=!1,ae=i.memoizedState,L.state=ae,uE(i,u,L,m);var he=i.memoizedState;z!==te||ae!==he||nu.current||Am?(typeof ve=="function"&&(hP(i,a,ve,u),he=i.memoizedState),(W=Am||TN(i,a,W,u,ae,he,U)||!1)?(J||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(u,he,U),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(u,he,U)),typeof L.componentDidUpdate=="function"&&(i.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof L.componentDidUpdate!="function"||z===t.memoizedProps&&ae===t.memoizedState||(i.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||z===t.memoizedProps&&ae===t.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=he),L.props=u,L.state=he,L.context=U,u=W):(typeof L.componentDidUpdate!="function"||z===t.memoizedProps&&ae===t.memoizedState||(i.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||z===t.memoizedProps&&ae===t.memoizedState||(i.flags|=1024),u=!1)}return mP(t,i,a,u,M,m)}function mP(t,i,a,u,m,M){vk(t,i);var L=(i.flags&128)!==0;if(!u&&!L)return m&&yN(i,a,!1),Zd(t,i,M);u=i.stateNode,HY.current=i;var z=L&&typeof a.getDerivedStateFromError!="function"?null:u.render();return i.flags|=1,t!==null&&L?(i.child=$1(i,t.child,null,M),i.child=$1(i,null,z,M)):Sl(t,i,z,M),i.memoizedState=u.state,m&&yN(i,a,!0),i.child}function yk(t){var i=t.stateNode;i.pendingContext?vN(t,i.pendingContext,i.pendingContext!==i.context):i.context&&vN(t,i.context,!1),uO(t,i.containerInfo)}function bN(t,i,a,u,m){return Q1(),nO(m),i.flags|=256,Sl(t,i,a,u),i.child}var gP={dehydrated:null,treeContext:null,retryLane:0};function vP(t){return{baseLanes:t,cachePool:null,transitions:null}}function xk(t,i,a){var u=i.pendingProps,m=fa.current,M=!1,L=(i.flags&128)!==0,z;if((z=L)||(z=t!==null&&t.memoizedState===null?!1:(m&2)!==0),z?(M=!0,i.flags&=-129):(t===null||t.memoizedState!==null)&&(m|=1),Uo(fa,m&1),t===null)return uP(i),t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(i.mode&1?t.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(L=u.children,t=u.fallback,M?(u=i.mode,M=i.child,L={mode:"hidden",children:L},!(u&1)&&M!==null?(M.childLanes=0,M.pendingProps=L):M=t3(L,u,0,null),t=Xv(t,u,a,null),M.return=i,t.return=i,M.sibling=t,i.child=M,i.child.memoizedState=vP(a),i.memoizedState=gP,t):vO(i,L));if(m=t.memoizedState,m!==null&&(z=m.dehydrated,z!==null))return jY(t,i,L,u,z,m,a);if(M){M=u.fallback,L=i.mode,m=t.child,z=m.sibling;var U={mode:"hidden",children:u.children};return!(L&1)&&i.child!==m?(u=i.child,u.childLanes=0,u.pendingProps=U,i.deletions=null):(u=Fm(m,U),u.subtreeFlags=m.subtreeFlags&14680064),z!==null?M=Fm(z,M):(M=Xv(M,L,a,null),M.flags|=2),M.return=i,u.return=i,u.sibling=M,i.child=u,u=M,M=i.child,L=t.child.memoizedState,L=L===null?vP(a):{baseLanes:L.baseLanes|a,cachePool:null,transitions:L.transitions},M.memoizedState=L,M.childLanes=t.childLanes&~a,i.memoizedState=gP,u}return M=t.child,t=M.sibling,u=Fm(M,{mode:"visible",children:u.children}),!(i.mode&1)&&(u.lanes=a),u.return=i,u.sibling=null,t!==null&&(a=i.deletions,a===null?(i.deletions=[t],i.flags|=16):a.push(t)),i.child=u,i.memoizedState=null,u}function vO(t,i){return i=t3({mode:"visible",children:i},t.mode,0,null),i.return=t,t.child=i}function ZS(t,i,a,u){return u!==null&&nO(u),$1(i,t.child,null,a),t=vO(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function jY(t,i,a,u,m,M,L){if(a)return i.flags&256?(i.flags&=-257,u=VL(Error(gr(422))),ZS(t,i,L,u)):i.memoizedState!==null?(i.child=t.child,i.flags|=128,null):(M=u.fallback,m=i.mode,u=t3({mode:"visible",children:u.children},m,0,null),M=Xv(M,m,L,null),M.flags|=2,u.return=i,M.return=i,u.sibling=M,i.child=u,i.mode&1&&$1(i,t.child,null,L),i.child.memoizedState=vP(L),i.memoizedState=gP,M);if(!(i.mode&1))return ZS(t,i,L,null);if(m.data==="$!"){if(u=m.nextSibling&&m.nextSibling.dataset,u)var z=u.dgst;return u=z,M=Error(gr(419)),u=VL(M,u,void 0),ZS(t,i,L,u)}if(z=(L&t.childLanes)!==0,ru||z){if(u=Cs,u!==null){switch(L&-L){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=m&(u.suspendedLanes|L)?0:m,m!==0&&m!==M.retryLane&&(M.retryLane=m,Yd(t,m),Th(u,t,m,-1))}return _O(),u=VL(Error(gr(421))),ZS(t,i,L,u)}return m.data==="$?"?(i.flags|=128,i.child=t.child,i=tZ.bind(null,t),m._reactRetry=i,null):(t=M.treeContext,Pu=Pm(m.nextSibling),bu=i,ta=!0,Mh=null,t!==null&&(xc[Ac++]=Ud,xc[Ac++]=kd,xc[Ac++]=Qv,Ud=t.id,kd=t.overflow,Qv=i),i=vO(i,u.children),i.flags|=4096,i)}function FN(t,i,a){t.lanes|=i;var u=t.alternate;u!==null&&(u.lanes|=i),cP(t.return,i,a)}function WL(t,i,a,u,m){var M=t.memoizedState;M===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:m}:(M.isBackwards=i,M.rendering=null,M.renderingStartTime=0,M.last=u,M.tail=a,M.tailMode=m)}function Ak(t,i,a){var u=i.pendingProps,m=u.revealOrder,M=u.tail;if(Sl(t,i,u.children,a),u=fa.current,u&2)u=u&1|2,i.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&FN(t,a,i);else if(t.tag===19)FN(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(Uo(fa,u),!(i.mode&1))i.memoizedState=null;else switch(m){case"forwards":for(a=i.child,m=null;a!==null;)t=a.alternate,t!==null&&cE(t)===null&&(m=a),a=a.sibling;a=m,a===null?(m=i.child,i.child=null):(m=a.sibling,a.sibling=null),WL(i,!1,m,a,M);break;case"backwards":for(a=null,m=i.child,i.child=null;m!==null;){if(t=m.alternate,t!==null&&cE(t)===null){i.child=m;break}t=m.sibling,m.sibling=a,a=m,m=t}WL(i,!0,a,null,M);break;case"together":WL(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function RT(t,i){!(i.mode&1)&&t!==null&&(t.alternate=null,i.alternate=null,i.flags|=2)}function Zd(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),e0|=i.lanes,!(a&i.childLanes))return null;if(t!==null&&i.child!==t.child)throw Error(gr(153));if(i.child!==null){for(t=i.child,a=Fm(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Fm(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function GY(t,i,a){switch(i.tag){case 3:yk(i),Q1();break;case 5:XU(i);break;case 1:iu(i.type)&&iE(i);break;case 4:uO(i,i.stateNode.containerInfo);break;case 10:var u=i.type._context,m=i.memoizedProps.value;Uo(sE,u._currentValue),u._currentValue=m;break;case 13:if(u=i.memoizedState,u!==null)return u.dehydrated!==null?(Uo(fa,fa.current&1),i.flags|=128,null):a&i.child.childLanes?xk(t,i,a):(Uo(fa,fa.current&1),t=Zd(t,i,a),t!==null?t.sibling:null);Uo(fa,fa.current&1);break;case 19:if(u=(a&i.childLanes)!==0,t.flags&128){if(u)return Ak(t,i,a);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Uo(fa,fa.current),u)break;return null;case 22:case 23:return i.lanes=0,gk(t,i,a)}return Zd(t,i,a)}var wk,yP,Ck,_k;wk=function(t,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)t.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};yP=function(){};Ck=function(t,i,a,u){var m=t.memoizedProps;if(m!==u){t=i.stateNode,kv(Lf.current);var M=null;switch(a){case"input":m=k5(t,m),u=k5(t,u),M=[];break;case"select":m=pa({},m,{value:void 0}),u=pa({},u,{value:void 0}),M=[];break;case"textarea":m=G5(t,m),u=G5(t,u),M=[];break;default:typeof m.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=rE)}W5(a,u);var L;a=null;for(W in m)if(!u.hasOwnProperty(W)&&m.hasOwnProperty(W)&&m[W]!=null)if(W==="style"){var z=m[W];for(L in z)z.hasOwnProperty(L)&&(a||(a={}),a[L]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(zw.hasOwnProperty(W)?M||(M=[]):(M=M||[]).push(W,null));for(W in u){var U=u[W];if(z=m!=null?m[W]:void 0,u.hasOwnProperty(W)&&U!==z&&(U!=null||z!=null))if(W==="style")if(z){for(L in z)!z.hasOwnProperty(L)||U&&U.hasOwnProperty(L)||(a||(a={}),a[L]="");for(L in U)U.hasOwnProperty(L)&&z[L]!==U[L]&&(a||(a={}),a[L]=U[L])}else a||(M||(M=[]),M.push(W,a)),a=U;else W==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,z=z?z.__html:void 0,U!=null&&z!==U&&(M=M||[]).push(W,U)):W==="children"?typeof U!="string"&&typeof U!="number"||(M=M||[]).push(W,""+U):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(zw.hasOwnProperty(W)?(U!=null&&W==="onScroll"&&Xo("scroll",t),M||z===U||(M=[])):(M=M||[]).push(W,U))}a&&(M=M||[]).push("style",a);var W=M;(i.updateQueue=W)&&(i.flags|=4)}};_k=function(t,i,a,u){a!==u&&(i.flags|=4)};function aw(t,i){if(!ta)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function ol(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,u=0;if(i)for(var m=t.child;m!==null;)a|=m.lanes|m.childLanes,u|=m.subtreeFlags&14680064,u|=m.flags&14680064,m.return=t,m=m.sibling;else for(m=t.child;m!==null;)a|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=t,m=m.sibling;return t.subtreeFlags|=u,t.childLanes=a,i}function VY(t,i,a){var u=i.pendingProps;switch(rO(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ol(i),null;case 1:return iu(i.type)&&nE(),ol(i),null;case 3:return u=i.stateNode,ex(),Yo(nu),Yo(cl),hO(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(XS(i)?i.flags|=4:t===null||t.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,Mh!==null&&(TP(Mh),Mh=null))),yP(t,i),ol(i),null;case 5:cO(i);var m=kv(Kw.current);if(a=i.type,t!==null&&i.stateNode!=null)Ck(t,i,a,u,m),t.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!u){if(i.stateNode===null)throw Error(gr(166));return ol(i),null}if(t=kv(Lf.current),XS(i)){u=i.stateNode,a=i.type;var M=i.memoizedProps;switch(u[Ef]=i,u[Zw]=M,t=(i.mode&1)!==0,a){case"dialog":Xo("cancel",u),Xo("close",u);break;case"iframe":case"object":case"embed":Xo("load",u);break;case"video":case"audio":for(m=0;m<yw.length;m++)Xo(yw[m],u);break;case"source":Xo("error",u);break;case"img":case"image":case"link":Xo("error",u),Xo("load",u);break;case"details":Xo("toggle",u);break;case"input":VF(u,M),Xo("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!M.multiple},Xo("invalid",u);break;case"textarea":XF(u,M),Xo("invalid",u)}W5(a,M),m=null;for(var L in M)if(M.hasOwnProperty(L)){var z=M[L];L==="children"?typeof z=="string"?u.textContent!==z&&(M.suppressHydrationWarning!==!0&&WS(u.textContent,z,t),m=["children",z]):typeof z=="number"&&u.textContent!==""+z&&(M.suppressHydrationWarning!==!0&&WS(u.textContent,z,t),m=["children",""+z]):zw.hasOwnProperty(L)&&z!=null&&L==="onScroll"&&Xo("scroll",u)}switch(a){case"input":BS(u),WF(u,M,!0);break;case"textarea":BS(u),YF(u);break;case"select":case"option":break;default:typeof M.onClick=="function"&&(u.onclick=rE)}u=m,i.updateQueue=u,u!==null&&(i.flags|=4)}else{L=m.nodeType===9?m:m.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=J8(a)),t==="http://www.w3.org/1999/xhtml"?a==="script"?(t=L.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=L.createElement(a,{is:u.is}):(t=L.createElement(a),a==="select"&&(L=t,u.multiple?L.multiple=!0:u.size&&(L.size=u.size))):t=L.createElementNS(t,a),t[Ef]=i,t[Zw]=u,wk(t,i,!1,!1),i.stateNode=t;e:{switch(L=X5(a,u),a){case"dialog":Xo("cancel",t),Xo("close",t),m=u;break;case"iframe":case"object":case"embed":Xo("load",t),m=u;break;case"video":case"audio":for(m=0;m<yw.length;m++)Xo(yw[m],t);m=u;break;case"source":Xo("error",t),m=u;break;case"img":case"image":case"link":Xo("error",t),Xo("load",t),m=u;break;case"details":Xo("toggle",t),m=u;break;case"input":VF(t,u),m=k5(t,u),Xo("invalid",t);break;case"option":m=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},m=pa({},u,{value:void 0}),Xo("invalid",t);break;case"textarea":XF(t,u),m=G5(t,u),Xo("invalid",t);break;default:m=u}W5(a,m),z=m;for(M in z)if(z.hasOwnProperty(M)){var U=z[M];M==="style"?eU(t,U):M==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,U!=null&&Q8(t,U)):M==="children"?typeof U=="string"?(a!=="textarea"||U!=="")&&Uw(t,U):typeof U=="number"&&Uw(t,""+U):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(zw.hasOwnProperty(M)?U!=null&&M==="onScroll"&&Xo("scroll",t):U!=null&&H4(t,M,U,L))}switch(a){case"input":BS(t),WF(t,u,!1);break;case"textarea":BS(t),YF(t);break;case"option":u.value!=null&&t.setAttribute("value",""+Bm(u.value));break;case"select":t.multiple=!!u.multiple,M=u.value,M!=null?j1(t,!!u.multiple,M,!1):u.defaultValue!=null&&j1(t,!!u.multiple,u.defaultValue,!0);break;default:typeof m.onClick=="function"&&(t.onclick=rE)}switch(a){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return ol(i),null;case 6:if(t&&i.stateNode!=null)_k(t,i,t.memoizedProps,u);else{if(typeof u!="string"&&i.stateNode===null)throw Error(gr(166));if(a=kv(Kw.current),kv(Lf.current),XS(i)){if(u=i.stateNode,a=i.memoizedProps,u[Ef]=i,(M=u.nodeValue!==a)&&(t=bu,t!==null))switch(t.tag){case 3:WS(u.nodeValue,a,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&WS(u.nodeValue,a,(t.mode&1)!==0)}M&&(i.flags|=4)}else u=(a.nodeType===9?a:a.ownerDocument).createTextNode(u),u[Ef]=i,i.stateNode=u}return ol(i),null;case 13:if(Yo(fa),u=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ta&&Pu!==null&&i.mode&1&&!(i.flags&128))HU(),Q1(),i.flags|=98560,M=!1;else if(M=XS(i),u!==null&&u.dehydrated!==null){if(t===null){if(!M)throw Error(gr(318));if(M=i.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(gr(317));M[Ef]=i}else Q1(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;ol(i),M=!1}else Mh!==null&&(TP(Mh),Mh=null),M=!0;if(!M)return i.flags&65536?i:null}return i.flags&128?(i.lanes=a,i):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(i.child.flags|=8192,i.mode&1&&(t===null||fa.current&1?ss===0&&(ss=3):_O())),i.updateQueue!==null&&(i.flags|=4),ol(i),null);case 4:return ex(),yP(t,i),t===null&&Xw(i.stateNode.containerInfo),ol(i),null;case 10:return aO(i.type._context),ol(i),null;case 17:return iu(i.type)&&nE(),ol(i),null;case 19:if(Yo(fa),M=i.memoizedState,M===null)return ol(i),null;if(u=(i.flags&128)!==0,L=M.rendering,L===null)if(u)aw(M,!1);else{if(ss!==0||t!==null&&t.flags&128)for(t=i.child;t!==null;){if(L=cE(t),L!==null){for(i.flags|=128,aw(M,!1),u=L.updateQueue,u!==null&&(i.updateQueue=u,i.flags|=4),i.subtreeFlags=0,u=a,a=i.child;a!==null;)M=a,t=u,M.flags&=14680066,L=M.alternate,L===null?(M.childLanes=0,M.lanes=t,M.child=null,M.subtreeFlags=0,M.memoizedProps=null,M.memoizedState=null,M.updateQueue=null,M.dependencies=null,M.stateNode=null):(M.childLanes=L.childLanes,M.lanes=L.lanes,M.child=L.child,M.subtreeFlags=0,M.deletions=null,M.memoizedProps=L.memoizedProps,M.memoizedState=L.memoizedState,M.updateQueue=L.updateQueue,M.type=L.type,t=L.dependencies,M.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),a=a.sibling;return Uo(fa,fa.current&1|2),i.child}t=t.sibling}M.tail!==null&&Na()>rx&&(i.flags|=128,u=!0,aw(M,!1),i.lanes=4194304)}else{if(!u)if(t=cE(L),t!==null){if(i.flags|=128,u=!0,a=t.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),aw(M,!0),M.tail===null&&M.tailMode==="hidden"&&!L.alternate&&!ta)return ol(i),null}else 2*Na()-M.renderingStartTime>rx&&a!==1073741824&&(i.flags|=128,u=!0,aw(M,!1),i.lanes=4194304);M.isBackwards?(L.sibling=i.child,i.child=L):(a=M.last,a!==null?a.sibling=L:i.child=L,M.last=L)}return M.tail!==null?(i=M.tail,M.rendering=i,M.tail=i.sibling,M.renderingStartTime=Na(),i.sibling=null,a=fa.current,Uo(fa,u?a&1|2:a&1),i):(ol(i),null);case 22:case 23:return CO(),u=i.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(i.flags|=8192),u&&i.mode&1?Lu&1073741824&&(ol(i),i.subtreeFlags&6&&(i.flags|=8192)):ol(i),null;case 24:return null;case 25:return null}throw Error(gr(156,i.tag))}function WY(t,i){switch(rO(i),i.tag){case 1:return iu(i.type)&&nE(),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return ex(),Yo(nu),Yo(cl),hO(),t=i.flags,t&65536&&!(t&128)?(i.flags=t&-65537|128,i):null;case 5:return cO(i),null;case 13:if(Yo(fa),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(gr(340));Q1()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return Yo(fa),null;case 4:return ex(),null;case 10:return aO(i.type._context),null;case 22:case 23:return CO(),null;case 24:return null;default:return null}}var qS=!1,ll=!1,XY=typeof WeakSet=="function"?WeakSet:Set,an=null;function N1(t,i){var a=t.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(u){wa(t,i,u)}else a.current=null}function xP(t,i,a){try{a()}catch(u){wa(t,i,u)}}var NN=!1;function YY(t,i){if(rP=$T,t=IU(),eO(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var m=u.anchorOffset,M=u.focusNode;u=u.focusOffset;try{a.nodeType,M.nodeType}catch{a=null;break e}var L=0,z=-1,U=-1,W=0,J=0,te=t,ae=null;t:for(;;){for(var ve;te!==a||m!==0&&te.nodeType!==3||(z=L+m),te!==M||u!==0&&te.nodeType!==3||(U=L+u),te.nodeType===3&&(L+=te.nodeValue.length),(ve=te.firstChild)!==null;)ae=te,te=ve;for(;;){if(te===t)break t;if(ae===a&&++W===m&&(z=L),ae===M&&++J===u&&(U=L),(ve=te.nextSibling)!==null)break;te=ae,ae=te.parentNode}te=ve}a=z===-1||U===-1?null:{start:z,end:U}}else a=null}a=a||{start:0,end:0}}else a=null;for(nP={focusedElem:t,selectionRange:a},$T=!1,an=i;an!==null;)if(i=an,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,an=t;else for(;an!==null;){i=an;try{var he=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(he!==null){var oe=he.memoizedProps,me=he.memoizedState,ge=i.stateNode,de=ge.getSnapshotBeforeUpdate(i.elementType===i.type?oe:Ah(i.type,oe),me);ge.__reactInternalSnapshotBeforeUpdate=de}break;case 3:var ce=i.stateNode.containerInfo;ce.nodeType===1?ce.textContent="":ce.nodeType===9&&ce.documentElement&&ce.removeChild(ce.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(gr(163))}}catch(_e){wa(i,i.return,_e)}if(t=i.sibling,t!==null){t.return=i.return,an=t;break}an=i.return}return he=NN,NN=!1,he}function Iw(t,i,a){var u=i.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var m=u=u.next;do{if((m.tag&t)===t){var M=m.destroy;m.destroy=void 0,M!==void 0&&xP(i,a,M)}m=m.next}while(m!==u)}}function $E(t,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&t)===t){var u=a.create;a.destroy=u()}a=a.next}while(a!==i)}}function AP(t){var i=t.ref;if(i!==null){var a=t.stateNode;switch(t.tag){case 5:t=a;break;default:t=a}typeof i=="function"?i(t):i.current=t}}function Mk(t){var i=t.alternate;i!==null&&(t.alternate=null,Mk(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&(delete i[Ef],delete i[Zw],delete i[aP],delete i[RY],delete i[LY])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Sk(t){return t.tag===5||t.tag===3||t.tag===4}function BN(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Sk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wP(t,i,a){var u=t.tag;if(u===5||u===6)t=t.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(t,i):a.insertBefore(t,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(t,a)):(i=a,i.appendChild(t)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=rE));else if(u!==4&&(t=t.child,t!==null))for(wP(t,i,a),t=t.sibling;t!==null;)wP(t,i,a),t=t.sibling}function CP(t,i,a){var u=t.tag;if(u===5||u===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(CP(t,i,a),t=t.sibling;t!==null;)CP(t,i,a),t=t.sibling}var Ds=null,wh=!1;function mm(t,i,a){for(a=a.child;a!==null;)Tk(t,i,a),a=a.sibling}function Tk(t,i,a){if(Rf&&typeof Rf.onCommitFiberUnmount=="function")try{Rf.onCommitFiberUnmount(WE,a)}catch{}switch(a.tag){case 5:ll||N1(a,i);case 6:var u=Ds,m=wh;Ds=null,mm(t,i,a),Ds=u,wh=m,Ds!==null&&(wh?(t=Ds,a=a.stateNode,t.nodeType===8?t.parentNode.removeChild(a):t.removeChild(a)):Ds.removeChild(a.stateNode));break;case 18:Ds!==null&&(wh?(t=Ds,a=a.stateNode,t.nodeType===8?zL(t.parentNode,a):t.nodeType===1&&zL(t,a),Gw(t)):zL(Ds,a.stateNode));break;case 4:u=Ds,m=wh,Ds=a.stateNode.containerInfo,wh=!0,mm(t,i,a),Ds=u,wh=m;break;case 0:case 11:case 14:case 15:if(!ll&&(u=a.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){m=u=u.next;do{var M=m,L=M.destroy;M=M.tag,L!==void 0&&(M&2||M&4)&&xP(a,i,L),m=m.next}while(m!==u)}mm(t,i,a);break;case 1:if(!ll&&(N1(a,i),u=a.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=a.memoizedProps,u.state=a.memoizedState,u.componentWillUnmount()}catch(z){wa(a,i,z)}mm(t,i,a);break;case 21:mm(t,i,a);break;case 22:a.mode&1?(ll=(u=ll)||a.memoizedState!==null,mm(t,i,a),ll=u):mm(t,i,a);break;default:mm(t,i,a)}}function zN(t){var i=t.updateQueue;if(i!==null){t.updateQueue=null;var a=t.stateNode;a===null&&(a=t.stateNode=new XY),i.forEach(function(u){var m=rZ.bind(null,t,u);a.has(u)||(a.add(u),u.then(m,m))})}}function yh(t,i){var a=i.deletions;if(a!==null)for(var u=0;u<a.length;u++){var m=a[u];try{var M=t,L=i,z=L;e:for(;z!==null;){switch(z.tag){case 5:Ds=z.stateNode,wh=!1;break e;case 3:Ds=z.stateNode.containerInfo,wh=!0;break e;case 4:Ds=z.stateNode.containerInfo,wh=!0;break e}z=z.return}if(Ds===null)throw Error(gr(160));Tk(M,L,m),Ds=null,wh=!1;var U=m.alternate;U!==null&&(U.return=null),m.return=null}catch(W){wa(m,i,W)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Ek(i,t),i=i.sibling}function Ek(t,i){var a=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yh(i,t),Mf(t),u&4){try{Iw(3,t,t.return),$E(3,t)}catch(oe){wa(t,t.return,oe)}try{Iw(5,t,t.return)}catch(oe){wa(t,t.return,oe)}}break;case 1:yh(i,t),Mf(t),u&512&&a!==null&&N1(a,a.return);break;case 5:if(yh(i,t),Mf(t),u&512&&a!==null&&N1(a,a.return),t.flags&32){var m=t.stateNode;try{Uw(m,"")}catch(oe){wa(t,t.return,oe)}}if(u&4&&(m=t.stateNode,m!=null)){var M=t.memoizedProps,L=a!==null?a.memoizedProps:M,z=t.type,U=t.updateQueue;if(t.updateQueue=null,U!==null)try{z==="input"&&M.type==="radio"&&M.name!=null&&q8(m,M),X5(z,L);var W=X5(z,M);for(L=0;L<U.length;L+=2){var J=U[L],te=U[L+1];J==="style"?eU(m,te):J==="dangerouslySetInnerHTML"?Q8(m,te):J==="children"?Uw(m,te):H4(m,J,te,W)}switch(z){case"input":H5(m,M);break;case"textarea":K8(m,M);break;case"select":var ae=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!M.multiple;var ve=M.value;ve!=null?j1(m,!!M.multiple,ve,!1):ae!==!!M.multiple&&(M.defaultValue!=null?j1(m,!!M.multiple,M.defaultValue,!0):j1(m,!!M.multiple,M.multiple?[]:"",!1))}m[Zw]=M}catch(oe){wa(t,t.return,oe)}}break;case 6:if(yh(i,t),Mf(t),u&4){if(t.stateNode===null)throw Error(gr(162));m=t.stateNode,M=t.memoizedProps;try{m.nodeValue=M}catch(oe){wa(t,t.return,oe)}}break;case 3:if(yh(i,t),Mf(t),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Gw(i.containerInfo)}catch(oe){wa(t,t.return,oe)}break;case 4:yh(i,t),Mf(t);break;case 13:yh(i,t),Mf(t),m=t.child,m.flags&8192&&(M=m.memoizedState!==null,m.stateNode.isHidden=M,!M||m.alternate!==null&&m.alternate.memoizedState!==null||(AO=Na())),u&4&&zN(t);break;case 22:if(J=a!==null&&a.memoizedState!==null,t.mode&1?(ll=(W=ll)||J,yh(i,t),ll=W):yh(i,t),Mf(t),u&8192){if(W=t.memoizedState!==null,(t.stateNode.isHidden=W)&&!J&&t.mode&1)for(an=t,J=t.child;J!==null;){for(te=an=J;an!==null;){switch(ae=an,ve=ae.child,ae.tag){case 0:case 11:case 14:case 15:Iw(4,ae,ae.return);break;case 1:N1(ae,ae.return);var he=ae.stateNode;if(typeof he.componentWillUnmount=="function"){u=ae,a=ae.return;try{i=u,he.props=i.memoizedProps,he.state=i.memoizedState,he.componentWillUnmount()}catch(oe){wa(u,a,oe)}}break;case 5:N1(ae,ae.return);break;case 22:if(ae.memoizedState!==null){kN(te);continue}}ve!==null?(ve.return=ae,an=ve):kN(te)}J=J.sibling}e:for(J=null,te=t;;){if(te.tag===5){if(J===null){J=te;try{m=te.stateNode,W?(M=m.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none"):(z=te.stateNode,U=te.memoizedProps.style,L=U!=null&&U.hasOwnProperty("display")?U.display:null,z.style.display=$8("display",L))}catch(oe){wa(t,t.return,oe)}}}else if(te.tag===6){if(J===null)try{te.stateNode.nodeValue=W?"":te.memoizedProps}catch(oe){wa(t,t.return,oe)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===t)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===t)break e;for(;te.sibling===null;){if(te.return===null||te.return===t)break e;J===te&&(J=null),te=te.return}J===te&&(J=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:yh(i,t),Mf(t),u&4&&zN(t);break;case 21:break;default:yh(i,t),Mf(t)}}function Mf(t){var i=t.flags;if(i&2){try{e:{for(var a=t.return;a!==null;){if(Sk(a)){var u=a;break e}a=a.return}throw Error(gr(160))}switch(u.tag){case 5:var m=u.stateNode;u.flags&32&&(Uw(m,""),u.flags&=-33);var M=BN(t);CP(t,M,m);break;case 3:case 4:var L=u.stateNode.containerInfo,z=BN(t);wP(t,z,L);break;default:throw Error(gr(161))}}catch(U){wa(t,t.return,U)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function ZY(t,i,a){an=t,Ik(t)}function Ik(t,i,a){for(var u=(t.mode&1)!==0;an!==null;){var m=an,M=m.child;if(m.tag===22&&u){var L=m.memoizedState!==null||qS;if(!L){var z=m.alternate,U=z!==null&&z.memoizedState!==null||ll;z=qS;var W=ll;if(qS=L,(ll=U)&&!W)for(an=m;an!==null;)L=an,U=L.child,L.tag===22&&L.memoizedState!==null?HN(m):U!==null?(U.return=L,an=U):HN(m);for(;M!==null;)an=M,Ik(M),M=M.sibling;an=m,qS=z,ll=W}UN(t)}else m.subtreeFlags&8772&&M!==null?(M.return=m,an=M):UN(t)}}function UN(t){for(;an!==null;){var i=an;if(i.flags&8772){var a=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:ll||$E(5,i);break;case 1:var u=i.stateNode;if(i.flags&4&&!ll)if(a===null)u.componentDidMount();else{var m=i.elementType===i.type?a.memoizedProps:Ah(i.type,a.memoizedProps);u.componentDidUpdate(m,a.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var M=i.updateQueue;M!==null&&_N(i,M,u);break;case 3:var L=i.updateQueue;if(L!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}_N(i,L,a)}break;case 5:var z=i.stateNode;if(a===null&&i.flags&4){a=z;var U=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":U.autoFocus&&a.focus();break;case"img":U.src&&(a.src=U.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var W=i.alternate;if(W!==null){var J=W.memoizedState;if(J!==null){var te=J.dehydrated;te!==null&&Gw(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(gr(163))}ll||i.flags&512&&AP(i)}catch(ae){wa(i,i.return,ae)}}if(i===t){an=null;break}if(a=i.sibling,a!==null){a.return=i.return,an=a;break}an=i.return}}function kN(t){for(;an!==null;){var i=an;if(i===t){an=null;break}var a=i.sibling;if(a!==null){a.return=i.return,an=a;break}an=i.return}}function HN(t){for(;an!==null;){var i=an;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{$E(4,i)}catch(U){wa(i,a,U)}break;case 1:var u=i.stateNode;if(typeof u.componentDidMount=="function"){var m=i.return;try{u.componentDidMount()}catch(U){wa(i,m,U)}}var M=i.return;try{AP(i)}catch(U){wa(i,M,U)}break;case 5:var L=i.return;try{AP(i)}catch(U){wa(i,L,U)}}}catch(U){wa(i,i.return,U)}if(i===t){an=null;break}var z=i.sibling;if(z!==null){z.return=i.return,an=z;break}an=i.return}}var qY=Math.ceil,dE=Jd.ReactCurrentDispatcher,yO=Jd.ReactCurrentOwner,Cc=Jd.ReactCurrentBatchConfig,Ji=0,Cs=null,Za=null,Fs=0,Lu=0,B1=Vm(0),ss=0,eC=null,e0=0,e3=0,xO=0,Rw=null,tu=null,AO=0,rx=1/0,Nd=null,pE=!1,_P=null,Dm=null,KS=!1,Mm=null,mE=0,Lw=0,MP=null,LT=-1,PT=0;function El(){return Ji&6?Na():LT!==-1?LT:LT=Na()}function bm(t){return t.mode&1?Ji&2&&Fs!==0?Fs&-Fs:OY.transition!==null?(PT===0&&(PT=fU()),PT):(t=vo,t!==0||(t=window.event,t=t===void 0?16:xU(t.type)),t):1}function Th(t,i,a,u){if(50<Lw)throw Lw=0,MP=null,Error(gr(185));yC(t,a,u),(!(Ji&2)||t!==Cs)&&(t===Cs&&(!(Ji&2)&&(e3|=a),ss===4&&Cm(t,Fs)),ou(t,u),a===1&&Ji===0&&!(i.mode&1)&&(rx=Na()+500,KE&&Wm()))}function ou(t,i){var a=t.callbackNode;OX(t,i);var u=QT(t,t===Cs?Fs:0);if(u===0)a!==null&&KF(a),t.callbackNode=null,t.callbackPriority=0;else if(i=u&-u,t.callbackPriority!==i){if(a!=null&&KF(a),i===1)t.tag===0?PY(jN.bind(null,t)):zU(jN.bind(null,t)),EY(function(){!(Ji&6)&&Wm()}),a=null;else{switch(dU(u)){case 1:a=X4;break;case 4:a=cU;break;case 16:a=JT;break;case 536870912:a=hU;break;default:a=JT}a=Nk(a,Rk.bind(null,t))}t.callbackPriority=i,t.callbackNode=a}}function Rk(t,i){if(LT=-1,PT=0,Ji&6)throw Error(gr(327));var a=t.callbackNode;if(Y1()&&t.callbackNode!==a)return null;var u=QT(t,t===Cs?Fs:0);if(u===0)return null;if(u&30||u&t.expiredLanes||i)i=gE(t,u);else{i=u;var m=Ji;Ji|=2;var M=Pk();(Cs!==t||Fs!==i)&&(Nd=null,rx=Na()+500,Wv(t,i));do try{QY();break}catch(z){Lk(t,z)}while(!0);oO(),dE.current=M,Ji=m,Za!==null?i=0:(Cs=null,Fs=0,i=ss)}if(i!==0){if(i===2&&(m=J5(t),m!==0&&(u=m,i=SP(t,m))),i===1)throw a=eC,Wv(t,0),Cm(t,u),ou(t,Na()),a;if(i===6)Cm(t,u);else{if(m=t.current.alternate,!(u&30)&&!KY(m)&&(i=gE(t,u),i===2&&(M=J5(t),M!==0&&(u=M,i=SP(t,M))),i===1))throw a=eC,Wv(t,0),Cm(t,u),ou(t,Na()),a;switch(t.finishedWork=m,t.finishedLanes=u,i){case 0:case 1:throw Error(gr(345));case 2:Fv(t,tu,Nd);break;case 3:if(Cm(t,u),(u&130023424)===u&&(i=AO+500-Na(),10<i)){if(QT(t,0)!==0)break;if(m=t.suspendedLanes,(m&u)!==u){El(),t.pingedLanes|=t.suspendedLanes&m;break}t.timeoutHandle=oP(Fv.bind(null,t,tu,Nd),i);break}Fv(t,tu,Nd);break;case 4:if(Cm(t,u),(u&4194240)===u)break;for(i=t.eventTimes,m=-1;0<u;){var L=31-Sh(u);M=1<<L,L=i[L],L>m&&(m=L),u&=~M}if(u=m,u=Na()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*qY(u/1960))-u,10<u){t.timeoutHandle=oP(Fv.bind(null,t,tu,Nd),u);break}Fv(t,tu,Nd);break;case 5:Fv(t,tu,Nd);break;default:throw Error(gr(329))}}}return ou(t,Na()),t.callbackNode===a?Rk.bind(null,t):null}function SP(t,i){var a=Rw;return t.current.memoizedState.isDehydrated&&(Wv(t,i).flags|=256),t=gE(t,i),t!==2&&(i=tu,tu=a,i!==null&&TP(i)),t}function TP(t){tu===null?tu=t:tu.push.apply(tu,t)}function KY(t){for(var i=t;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var u=0;u<a.length;u++){var m=a[u],M=m.getSnapshot;m=m.value;try{if(!Lh(M(),m))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Cm(t,i){for(i&=~xO,i&=~e3,t.suspendedLanes|=i,t.pingedLanes&=~i,t=t.expirationTimes;0<i;){var a=31-Sh(i),u=1<<a;t[a]=-1,i&=~u}}function jN(t){if(Ji&6)throw Error(gr(327));Y1();var i=QT(t,0);if(!(i&1))return ou(t,Na()),null;var a=gE(t,i);if(t.tag!==0&&a===2){var u=J5(t);u!==0&&(i=u,a=SP(t,u))}if(a===1)throw a=eC,Wv(t,0),Cm(t,i),ou(t,Na()),a;if(a===6)throw Error(gr(345));return t.finishedWork=t.current.alternate,t.finishedLanes=i,Fv(t,tu,Nd),ou(t,Na()),null}function wO(t,i){var a=Ji;Ji|=1;try{return t(i)}finally{Ji=a,Ji===0&&(rx=Na()+500,KE&&Wm())}}function t0(t){Mm!==null&&Mm.tag===0&&!(Ji&6)&&Y1();var i=Ji;Ji|=1;var a=Cc.transition,u=vo;try{if(Cc.transition=null,vo=1,t)return t()}finally{vo=u,Cc.transition=a,Ji=i,!(Ji&6)&&Wm()}}function CO(){Lu=B1.current,Yo(B1)}function Wv(t,i){t.finishedWork=null,t.finishedLanes=0;var a=t.timeoutHandle;if(a!==-1&&(t.timeoutHandle=-1,TY(a)),Za!==null)for(a=Za.return;a!==null;){var u=a;switch(rO(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&nE();break;case 3:ex(),Yo(nu),Yo(cl),hO();break;case 5:cO(u);break;case 4:ex();break;case 13:Yo(fa);break;case 19:Yo(fa);break;case 10:aO(u.type._context);break;case 22:case 23:CO()}a=a.return}if(Cs=t,Za=t=Fm(t.current,null),Fs=Lu=i,ss=0,eC=null,xO=e3=e0=0,tu=Rw=null,Uv!==null){for(i=0;i<Uv.length;i++)if(a=Uv[i],u=a.interleaved,u!==null){a.interleaved=null;var m=u.next,M=a.pending;if(M!==null){var L=M.next;M.next=m,u.next=L}a.pending=u}Uv=null}return t}function Lk(t,i){do{var a=Za;try{if(oO(),ET.current=fE,hE){for(var u=da.memoizedState;u!==null;){var m=u.queue;m!==null&&(m.pending=null),u=u.next}hE=!1}if($v=0,ws=os=da=null,Ew=!1,Jw=0,yO.current=null,a===null||a.return===null){ss=1,eC=i,Za=null;break}e:{var M=t,L=a.return,z=a,U=i;if(i=Fs,z.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){var W=U,J=z,te=J.tag;if(!(J.mode&1)&&(te===0||te===11||te===15)){var ae=J.alternate;ae?(J.updateQueue=ae.updateQueue,J.memoizedState=ae.memoizedState,J.lanes=ae.lanes):(J.updateQueue=null,J.memoizedState=null)}var ve=RN(L);if(ve!==null){ve.flags&=-257,LN(ve,L,z,M,i),ve.mode&1&&IN(M,W,i),i=ve,U=W;var he=i.updateQueue;if(he===null){var oe=new Set;oe.add(U),i.updateQueue=oe}else he.add(U);break e}else{if(!(i&1)){IN(M,W,i),_O();break e}U=Error(gr(426))}}else if(ta&&z.mode&1){var me=RN(L);if(me!==null){!(me.flags&65536)&&(me.flags|=256),LN(me,L,z,M,i),nO(tx(U,z));break e}}M=U=tx(U,z),ss!==4&&(ss=2),Rw===null?Rw=[M]:Rw.push(M),M=L;do{switch(M.tag){case 3:M.flags|=65536,i&=-i,M.lanes|=i;var ge=dk(M,U,i);CN(M,ge);break e;case 1:z=U;var de=M.type,ce=M.stateNode;if(!(M.flags&128)&&(typeof de.getDerivedStateFromError=="function"||ce!==null&&typeof ce.componentDidCatch=="function"&&(Dm===null||!Dm.has(ce)))){M.flags|=65536,i&=-i,M.lanes|=i;var _e=pk(M,z,i);CN(M,_e);break e}}M=M.return}while(M!==null)}Dk(a)}catch(Re){i=Re,Za===a&&a!==null&&(Za=a=a.return);continue}break}while(!0)}function Pk(){var t=dE.current;return dE.current=fE,t===null?fE:t}function _O(){(ss===0||ss===3||ss===2)&&(ss=4),Cs===null||!(e0&268435455)&&!(e3&268435455)||Cm(Cs,Fs)}function gE(t,i){var a=Ji;Ji|=2;var u=Pk();(Cs!==t||Fs!==i)&&(Nd=null,Wv(t,i));do try{JY();break}catch(m){Lk(t,m)}while(!0);if(oO(),Ji=a,dE.current=u,Za!==null)throw Error(gr(261));return Cs=null,Fs=0,ss}function JY(){for(;Za!==null;)Ok(Za)}function QY(){for(;Za!==null&&!_X();)Ok(Za)}function Ok(t){var i=Fk(t.alternate,t,Lu);t.memoizedProps=t.pendingProps,i===null?Dk(t):Za=i,yO.current=null}function Dk(t){var i=t;do{var a=i.alternate;if(t=i.return,i.flags&32768){if(a=WY(a,i),a!==null){a.flags&=32767,Za=a;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ss=6,Za=null;return}}else if(a=VY(a,i,Lu),a!==null){Za=a;return}if(i=i.sibling,i!==null){Za=i;return}Za=i=t}while(i!==null);ss===0&&(ss=5)}function Fv(t,i,a){var u=vo,m=Cc.transition;try{Cc.transition=null,vo=1,$Y(t,i,a,u)}finally{Cc.transition=m,vo=u}return null}function $Y(t,i,a,u){do Y1();while(Mm!==null);if(Ji&6)throw Error(gr(327));a=t.finishedWork;var m=t.finishedLanes;if(a===null)return null;if(t.finishedWork=null,t.finishedLanes=0,a===t.current)throw Error(gr(177));t.callbackNode=null,t.callbackPriority=0;var M=a.lanes|a.childLanes;if(DX(t,M),t===Cs&&(Za=Cs=null,Fs=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||KS||(KS=!0,Nk(JT,function(){return Y1(),null})),M=(a.flags&15990)!==0,a.subtreeFlags&15990||M){M=Cc.transition,Cc.transition=null;var L=vo;vo=1;var z=Ji;Ji|=4,yO.current=null,YY(t,a),Ek(a,t),xY(nP),$T=!!rP,nP=rP=null,t.current=a,ZY(a),MX(),Ji=z,vo=L,Cc.transition=M}else t.current=a;if(KS&&(KS=!1,Mm=t,mE=m),M=t.pendingLanes,M===0&&(Dm=null),EX(a.stateNode),ou(t,Na()),i!==null)for(u=t.onRecoverableError,a=0;a<i.length;a++)m=i[a],u(m.value,{componentStack:m.stack,digest:m.digest});if(pE)throw pE=!1,t=_P,_P=null,t;return mE&1&&t.tag!==0&&Y1(),M=t.pendingLanes,M&1?t===MP?Lw++:(Lw=0,MP=t):Lw=0,Wm(),null}function Y1(){if(Mm!==null){var t=dU(mE),i=Cc.transition,a=vo;try{if(Cc.transition=null,vo=16>t?16:t,Mm===null)var u=!1;else{if(t=Mm,Mm=null,mE=0,Ji&6)throw Error(gr(331));var m=Ji;for(Ji|=4,an=t.current;an!==null;){var M=an,L=M.child;if(an.flags&16){var z=M.deletions;if(z!==null){for(var U=0;U<z.length;U++){var W=z[U];for(an=W;an!==null;){var J=an;switch(J.tag){case 0:case 11:case 15:Iw(8,J,M)}var te=J.child;if(te!==null)te.return=J,an=te;else for(;an!==null;){J=an;var ae=J.sibling,ve=J.return;if(Mk(J),J===W){an=null;break}if(ae!==null){ae.return=ve,an=ae;break}an=ve}}}var he=M.alternate;if(he!==null){var oe=he.child;if(oe!==null){he.child=null;do{var me=oe.sibling;oe.sibling=null,oe=me}while(oe!==null)}}an=M}}if(M.subtreeFlags&2064&&L!==null)L.return=M,an=L;else e:for(;an!==null;){if(M=an,M.flags&2048)switch(M.tag){case 0:case 11:case 15:Iw(9,M,M.return)}var ge=M.sibling;if(ge!==null){ge.return=M.return,an=ge;break e}an=M.return}}var de=t.current;for(an=de;an!==null;){L=an;var ce=L.child;if(L.subtreeFlags&2064&&ce!==null)ce.return=L,an=ce;else e:for(L=de;an!==null;){if(z=an,z.flags&2048)try{switch(z.tag){case 0:case 11:case 15:$E(9,z)}}catch(Re){wa(z,z.return,Re)}if(z===L){an=null;break e}var _e=z.sibling;if(_e!==null){_e.return=z.return,an=_e;break e}an=z.return}}if(Ji=m,Wm(),Rf&&typeof Rf.onPostCommitFiberRoot=="function")try{Rf.onPostCommitFiberRoot(WE,t)}catch{}u=!0}return u}finally{vo=a,Cc.transition=i}}return!1}function GN(t,i,a){i=tx(a,i),i=dk(t,i,1),t=Om(t,i,1),i=El(),t!==null&&(yC(t,1,i),ou(t,i))}function wa(t,i,a){if(t.tag===3)GN(t,t,a);else for(;i!==null;){if(i.tag===3){GN(i,t,a);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Dm===null||!Dm.has(u))){t=tx(a,t),t=pk(i,t,1),i=Om(i,t,1),t=El(),i!==null&&(yC(i,1,t),ou(i,t));break}}i=i.return}}function eZ(t,i,a){var u=t.pingCache;u!==null&&u.delete(i),i=El(),t.pingedLanes|=t.suspendedLanes&a,Cs===t&&(Fs&a)===a&&(ss===4||ss===3&&(Fs&130023424)===Fs&&500>Na()-AO?Wv(t,0):xO|=a),ou(t,i)}function bk(t,i){i===0&&(t.mode&1?(i=kS,kS<<=1,!(kS&130023424)&&(kS=4194304)):i=1);var a=El();t=Yd(t,i),t!==null&&(yC(t,i,a),ou(t,a))}function tZ(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),bk(t,a)}function rZ(t,i){var a=0;switch(t.tag){case 13:var u=t.stateNode,m=t.memoizedState;m!==null&&(a=m.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(gr(314))}u!==null&&u.delete(i),bk(t,a)}var Fk;Fk=function(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps||nu.current)ru=!0;else{if(!(t.lanes&a)&&!(i.flags&128))return ru=!1,GY(t,i,a);ru=!!(t.flags&131072)}else ru=!1,ta&&i.flags&1048576&&UU(i,aE,i.index);switch(i.lanes=0,i.tag){case 2:var u=i.type;RT(t,i),t=i.pendingProps;var m=J1(i,cl.current);X1(i,a),m=dO(null,i,u,t,m,a);var M=pO();return i.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,iu(u)?(M=!0,iE(i)):M=!1,i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,lO(i),m.updater=QE,i.stateNode=m,m._reactInternals=i,fP(i,u,t,a),i=mP(null,i,u,!0,M,a)):(i.tag=0,ta&&M&&tO(i),Sl(null,i,m,a),i=i.child),i;case 16:u=i.elementType;e:{switch(RT(t,i),t=i.pendingProps,m=u._init,u=m(u._payload),i.type=u,m=i.tag=iZ(u),t=Ah(u,t),m){case 0:i=pP(null,i,u,t,a);break e;case 1:i=DN(null,i,u,t,a);break e;case 11:i=PN(null,i,u,t,a);break e;case 14:i=ON(null,i,u,Ah(u.type,t),a);break e}throw Error(gr(306,u,""))}return i;case 0:return u=i.type,m=i.pendingProps,m=i.elementType===u?m:Ah(u,m),pP(t,i,u,m,a);case 1:return u=i.type,m=i.pendingProps,m=i.elementType===u?m:Ah(u,m),DN(t,i,u,m,a);case 3:e:{if(yk(i),t===null)throw Error(gr(387));u=i.pendingProps,M=i.memoizedState,m=M.element,WU(t,i),uE(i,u,null,a);var L=i.memoizedState;if(u=L.element,M.isDehydrated)if(M={element:u,isDehydrated:!1,cache:L.cache,pendingSuspenseBoundaries:L.pendingSuspenseBoundaries,transitions:L.transitions},i.updateQueue.baseState=M,i.memoizedState=M,i.flags&256){m=tx(Error(gr(423)),i),i=bN(t,i,u,a,m);break e}else if(u!==m){m=tx(Error(gr(424)),i),i=bN(t,i,u,a,m);break e}else for(Pu=Pm(i.stateNode.containerInfo.firstChild),bu=i,ta=!0,Mh=null,a=GU(i,null,u,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Q1(),u===m){i=Zd(t,i,a);break e}Sl(t,i,u,a)}i=i.child}return i;case 5:return XU(i),t===null&&uP(i),u=i.type,m=i.pendingProps,M=t!==null?t.memoizedProps:null,L=m.children,iP(u,m)?L=null:M!==null&&iP(u,M)&&(i.flags|=32),vk(t,i),Sl(t,i,L,a),i.child;case 6:return t===null&&uP(i),null;case 13:return xk(t,i,a);case 4:return uO(i,i.stateNode.containerInfo),u=i.pendingProps,t===null?i.child=$1(i,null,u,a):Sl(t,i,u,a),i.child;case 11:return u=i.type,m=i.pendingProps,m=i.elementType===u?m:Ah(u,m),PN(t,i,u,m,a);case 7:return Sl(t,i,i.pendingProps,a),i.child;case 8:return Sl(t,i,i.pendingProps.children,a),i.child;case 12:return Sl(t,i,i.pendingProps.children,a),i.child;case 10:e:{if(u=i.type._context,m=i.pendingProps,M=i.memoizedProps,L=m.value,Uo(sE,u._currentValue),u._currentValue=L,M!==null)if(Lh(M.value,L)){if(M.children===m.children&&!nu.current){i=Zd(t,i,a);break e}}else for(M=i.child,M!==null&&(M.return=i);M!==null;){var z=M.dependencies;if(z!==null){L=M.child;for(var U=z.firstContext;U!==null;){if(U.context===u){if(M.tag===1){U=Hd(-1,a&-a),U.tag=2;var W=M.updateQueue;if(W!==null){W=W.shared;var J=W.pending;J===null?U.next=U:(U.next=J.next,J.next=U),W.pending=U}}M.lanes|=a,U=M.alternate,U!==null&&(U.lanes|=a),cP(M.return,a,i),z.lanes|=a;break}U=U.next}}else if(M.tag===10)L=M.type===i.type?null:M.child;else if(M.tag===18){if(L=M.return,L===null)throw Error(gr(341));L.lanes|=a,z=L.alternate,z!==null&&(z.lanes|=a),cP(L,a,i),L=M.sibling}else L=M.child;if(L!==null)L.return=M;else for(L=M;L!==null;){if(L===i){L=null;break}if(M=L.sibling,M!==null){M.return=L.return,L=M;break}L=L.return}M=L}Sl(t,i,m.children,a),i=i.child}return i;case 9:return m=i.type,u=i.pendingProps.children,X1(i,a),m=Mc(m),u=u(m),i.flags|=1,Sl(t,i,u,a),i.child;case 14:return u=i.type,m=Ah(u,i.pendingProps),m=Ah(u.type,m),ON(t,i,u,m,a);case 15:return mk(t,i,i.type,i.pendingProps,a);case 17:return u=i.type,m=i.pendingProps,m=i.elementType===u?m:Ah(u,m),RT(t,i),i.tag=1,iu(u)?(t=!0,iE(i)):t=!1,X1(i,a),fk(i,u,m),fP(i,u,m,a),mP(null,i,u,!0,t,a);case 19:return Ak(t,i,a);case 22:return gk(t,i,a)}throw Error(gr(156,i.tag))};function Nk(t,i){return uU(t,i)}function nZ(t,i,a,u){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wc(t,i,a,u){return new nZ(t,i,a,u)}function MO(t){return t=t.prototype,!(!t||!t.isReactComponent)}function iZ(t){if(typeof t=="function")return MO(t)?1:0;if(t!=null){if(t=t.$$typeof,t===G4)return 11;if(t===V4)return 14}return 2}function Fm(t,i){var a=t.alternate;return a===null?(a=wc(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&14680064,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a}function OT(t,i,a,u,m,M){var L=2;if(u=t,typeof t=="function")MO(t)&&(L=1);else if(typeof t=="string")L=5;else e:switch(t){case E1:return Xv(a.children,m,M,i);case j4:L=8,m|=8;break;case N5:return t=wc(12,a,i,m|2),t.elementType=N5,t.lanes=M,t;case B5:return t=wc(13,a,i,m),t.elementType=B5,t.lanes=M,t;case z5:return t=wc(19,a,i,m),t.elementType=z5,t.lanes=M,t;case X8:return t3(a,m,M,i);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case V8:L=10;break e;case W8:L=9;break e;case G4:L=11;break e;case V4:L=14;break e;case xm:L=16,u=null;break e}throw Error(gr(130,t==null?t:typeof t,""))}return i=wc(L,a,i,m),i.elementType=t,i.type=u,i.lanes=M,i}function Xv(t,i,a,u){return t=wc(7,t,u,i),t.lanes=a,t}function t3(t,i,a,u){return t=wc(22,t,u,i),t.elementType=X8,t.lanes=a,t.stateNode={isHidden:!1},t}function XL(t,i,a){return t=wc(6,t,null,i),t.lanes=a,t}function YL(t,i,a){return i=wc(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}function oZ(t,i,a,u,m){this.tag=i,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=EL(0),this.expirationTimes=EL(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=EL(0),this.identifierPrefix=u,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function SO(t,i,a,u,m,M,L,z,U){return t=new oZ(t,i,a,z,U),i===1?(i=1,M===!0&&(i|=8)):i=0,M=wc(3,null,null,i),t.current=M,M.stateNode=t,M.memoizedState={element:u,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},lO(M),t}function aZ(t,i,a){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T1,key:u==null?null:""+u,children:t,containerInfo:i,implementation:a}}function Bk(t){if(!t)return zm;t=t._reactInternals;e:{if(a0(t)!==t||t.tag!==1)throw Error(gr(170));var i=t;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(iu(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(gr(171))}if(t.tag===1){var a=t.type;if(iu(a))return BU(t,a,i)}return i}function zk(t,i,a,u,m,M,L,z,U){return t=SO(a,u,!0,t,m,M,L,z,U),t.context=Bk(null),a=t.current,u=El(),m=bm(a),M=Hd(u,m),M.callback=i??null,Om(a,M,m),t.current.lanes=m,yC(t,m,u),ou(t,u),t}function r3(t,i,a,u){var m=i.current,M=El(),L=bm(m);return a=Bk(a),i.context===null?i.context=a:i.pendingContext=a,i=Hd(M,L),i.payload={element:t},u=u===void 0?null:u,u!==null&&(i.callback=u),t=Om(m,i,L),t!==null&&(Th(t,m,L,M),TT(t,m,L)),L}function vE(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function VN(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function TO(t,i){VN(t,i),(t=t.alternate)&&VN(t,i)}function sZ(){return null}var Uk=typeof reportError=="function"?reportError:function(t){console.error(t)};function EO(t){this._internalRoot=t}n3.prototype.render=EO.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(gr(409));r3(t,i,null,null)};n3.prototype.unmount=EO.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;t0(function(){r3(null,t,null,null)}),i[Xd]=null}};function n3(t){this._internalRoot=t}n3.prototype.unstable_scheduleHydration=function(t){if(t){var i=gU();t={blockedOn:null,target:t,priority:i};for(var a=0;a<wm.length&&i!==0&&i<wm[a].priority;a++);wm.splice(a,0,t),a===0&&yU(t)}};function IO(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function i3(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function WN(){}function lZ(t,i,a,u,m){if(m){if(typeof u=="function"){var M=u;u=function(){var W=vE(L);M.call(W)}}var L=zk(i,u,t,0,null,!1,!1,"",WN);return t._reactRootContainer=L,t[Xd]=L.current,Xw(t.nodeType===8?t.parentNode:t),t0(),L}for(;m=t.lastChild;)t.removeChild(m);if(typeof u=="function"){var z=u;u=function(){var W=vE(U);z.call(W)}}var U=SO(t,0,!1,null,null,!1,!1,"",WN);return t._reactRootContainer=U,t[Xd]=U.current,Xw(t.nodeType===8?t.parentNode:t),t0(function(){r3(i,U,a,u)}),U}function o3(t,i,a,u,m){var M=a._reactRootContainer;if(M){var L=M;if(typeof m=="function"){var z=m;m=function(){var U=vE(L);z.call(U)}}r3(i,L,t,m)}else L=lZ(a,i,t,m,u);return vE(L)}pU=function(t){switch(t.tag){case 3:var i=t.stateNode;if(i.current.memoizedState.isDehydrated){var a=vw(i.pendingLanes);a!==0&&(Y4(i,a|1),ou(i,Na()),!(Ji&6)&&(rx=Na()+500,Wm()))}break;case 13:t0(function(){var u=Yd(t,1);if(u!==null){var m=El();Th(u,t,1,m)}}),TO(t,1)}};Z4=function(t){if(t.tag===13){var i=Yd(t,134217728);if(i!==null){var a=El();Th(i,t,134217728,a)}TO(t,134217728)}};mU=function(t){if(t.tag===13){var i=bm(t),a=Yd(t,i);if(a!==null){var u=El();Th(a,t,i,u)}TO(t,i)}};gU=function(){return vo};vU=function(t,i){var a=vo;try{return vo=t,i()}finally{vo=a}};Z5=function(t,i,a){switch(i){case"input":if(H5(t,a),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var u=a[i];if(u!==t&&u.form===t.form){var m=qE(u);if(!m)throw Error(gr(90));Z8(u),H5(u,m)}}}break;case"textarea":K8(t,a);break;case"select":i=a.value,i!=null&&j1(t,!!a.multiple,i,!1)}};nU=wO;iU=t0;var uZ={usingClientEntryPoint:!1,Events:[AC,P1,qE,tU,rU,wO]},sw={findFiberByHostInstance:zv,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cZ={bundleType:sw.bundleType,version:sw.version,rendererPackageName:sw.rendererPackageName,rendererConfig:sw.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jd.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=sU(t),t===null?null:t.stateNode},findFiberByHostInstance:sw.findFiberByHostInstance||sZ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var JS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!JS.isDisabled&&JS.supportsFiber)try{WE=JS.inject(cZ),Rf=JS}catch{}}Bu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uZ;Bu.createPortal=function(t,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!IO(i))throw Error(gr(200));return aZ(t,i,null,a)};Bu.createRoot=function(t,i){if(!IO(t))throw Error(gr(299));var a=!1,u="",m=Uk;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onRecoverableError!==void 0&&(m=i.onRecoverableError)),i=SO(t,1,!1,null,null,a,!1,u,m),t[Xd]=i.current,Xw(t.nodeType===8?t.parentNode:t),new EO(i)};Bu.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(gr(188)):(t=Object.keys(t).join(","),Error(gr(268,t)));return t=sU(i),t=t===null?null:t.stateNode,t};Bu.flushSync=function(t){return t0(t)};Bu.hydrate=function(t,i,a){if(!i3(i))throw Error(gr(200));return o3(null,t,i,!0,a)};Bu.hydrateRoot=function(t,i,a){if(!IO(t))throw Error(gr(405));var u=a!=null&&a.hydratedSources||null,m=!1,M="",L=Uk;if(a!=null&&(a.unstable_strictMode===!0&&(m=!0),a.identifierPrefix!==void 0&&(M=a.identifierPrefix),a.onRecoverableError!==void 0&&(L=a.onRecoverableError)),i=zk(i,null,t,1,a??null,m,!1,M,L),t[Xd]=i.current,Xw(t),u)for(t=0;t<u.length;t++)a=u[t],m=a._getVersion,m=m(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,m]:i.mutableSourceEagerHydrationData.push(a,m);return new n3(i)};Bu.render=function(t,i,a){if(!i3(i))throw Error(gr(200));return o3(null,t,i,!1,a)};Bu.unmountComponentAtNode=function(t){if(!i3(t))throw Error(gr(40));return t._reactRootContainer?(t0(function(){o3(null,null,t,!1,function(){t._reactRootContainer=null,t[Xd]=null})}),!0):!1};Bu.unstable_batchedUpdates=wO;Bu.unstable_renderSubtreeIntoContainer=function(t,i,a,u){if(!i3(a))throw Error(gr(200));if(t==null||t._reactInternals===void 0)throw Error(gr(38));return o3(t,i,a,!1,u)};Bu.version="18.3.1-next-f1338f8080-20240426";function kk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kk)}catch(t){console.error(t)}}kk(),k8.exports=Bu;var Qd=k8.exports;const Hk=b4(Qd),hZ=I8({__proto__:null,default:Hk},[Qd]);var XN=Qd;b5.createRoot=XN.createRoot,b5.hydrateRoot=XN.hydrateRoot;/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tC(){return tC=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},tC.apply(this,arguments)}var Hv;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Hv||(Hv={}));const YN="popstate";function fZ(t){t===void 0&&(t={});function i(u,m){let{pathname:M,search:L,hash:z}=u.location;return EP("",{pathname:M,search:L,hash:z},m.state&&m.state.usr||null,m.state&&m.state.key||"default")}function a(u,m){return typeof m=="string"?m:yE(m)}return pZ(i,a,null,t)}function Ns(t,i){if(t===!1||t===null||typeof t>"u")throw new Error(i)}function jk(t,i){if(!t){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function dZ(){return Math.random().toString(36).substr(2,8)}function ZN(t,i){return{usr:t.state,key:t.key,idx:i}}function EP(t,i,a,u){return a===void 0&&(a=null),tC({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof i=="string"?CC(i):i,{state:a,key:i&&i.key||u||dZ()})}function yE(t){let{pathname:i="/",search:a="",hash:u=""}=t;return a&&a!=="?"&&(i+=a.charAt(0)==="?"?a:"?"+a),u&&u!=="#"&&(i+=u.charAt(0)==="#"?u:"#"+u),i}function CC(t){let i={};if(t){let a=t.indexOf("#");a>=0&&(i.hash=t.substr(a),t=t.substr(0,a));let u=t.indexOf("?");u>=0&&(i.search=t.substr(u),t=t.substr(0,u)),t&&(i.pathname=t)}return i}function pZ(t,i,a,u){u===void 0&&(u={});let{window:m=document.defaultView,v5Compat:M=!1}=u,L=m.history,z=Hv.Pop,U=null,W=J();W==null&&(W=0,L.replaceState(tC({},L.state,{idx:W}),""));function J(){return(L.state||{idx:null}).idx}function te(){z=Hv.Pop;let me=J(),ge=me==null?null:me-W;W=me,U&&U({action:z,location:oe.location,delta:ge})}function ae(me,ge){z=Hv.Push;let de=EP(oe.location,me,ge);W=J()+1;let ce=ZN(de,W),_e=oe.createHref(de);try{L.pushState(ce,"",_e)}catch(Re){if(Re instanceof DOMException&&Re.name==="DataCloneError")throw Re;m.location.assign(_e)}M&&U&&U({action:z,location:oe.location,delta:1})}function ve(me,ge){z=Hv.Replace;let de=EP(oe.location,me,ge);W=J();let ce=ZN(de,W),_e=oe.createHref(de);L.replaceState(ce,"",_e),M&&U&&U({action:z,location:oe.location,delta:0})}function he(me){let ge=m.location.origin!=="null"?m.location.origin:m.location.href,de=typeof me=="string"?me:yE(me);return de=de.replace(/ $/,"%20"),Ns(ge,"No window.location.(origin|href) available to create URL for href: "+de),new URL(de,ge)}let oe={get action(){return z},get location(){return t(m,L)},listen(me){if(U)throw new Error("A history only accepts one active listener");return m.addEventListener(YN,te),U=me,()=>{m.removeEventListener(YN,te),U=null}},createHref(me){return i(m,me)},createURL:he,encodeLocation(me){let ge=he(me);return{pathname:ge.pathname,search:ge.search,hash:ge.hash}},push:ae,replace:ve,go(me){return L.go(me)}};return oe}var qN;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(qN||(qN={}));function mZ(t,i,a){a===void 0&&(a="/");let u=typeof i=="string"?CC(i):i,m=RO(u.pathname||"/",a);if(m==null)return null;let M=Gk(t);gZ(M);let L=null;for(let z=0;L==null&&z<M.length;++z){let U=IZ(m);L=SZ(M[z],U)}return L}function Gk(t,i,a,u){i===void 0&&(i=[]),a===void 0&&(a=[]),u===void 0&&(u="");let m=(M,L,z)=>{let U={relativePath:z===void 0?M.path||"":z,caseSensitive:M.caseSensitive===!0,childrenIndex:L,route:M};U.relativePath.startsWith("/")&&(Ns(U.relativePath.startsWith(u),'Absolute route path "'+U.relativePath+'" nested under path '+('"'+u+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),U.relativePath=U.relativePath.slice(u.length));let W=Nm([u,U.relativePath]),J=a.concat(U);M.children&&M.children.length>0&&(Ns(M.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+W+'".')),Gk(M.children,i,J,W)),!(M.path==null&&!M.index)&&i.push({path:W,score:_Z(W,M.index),routesMeta:J})};return t.forEach((M,L)=>{var z;if(M.path===""||!((z=M.path)!=null&&z.includes("?")))m(M,L);else for(let U of Vk(M.path))m(M,L,U)}),i}function Vk(t){let i=t.split("/");if(i.length===0)return[];let[a,...u]=i,m=a.endsWith("?"),M=a.replace(/\?$/,"");if(u.length===0)return m?[M,""]:[M];let L=Vk(u.join("/")),z=[];return z.push(...L.map(U=>U===""?M:[M,U].join("/"))),m&&z.push(...L),z.map(U=>t.startsWith("/")&&U===""?"/":U)}function gZ(t){t.sort((i,a)=>i.score!==a.score?a.score-i.score:MZ(i.routesMeta.map(u=>u.childrenIndex),a.routesMeta.map(u=>u.childrenIndex)))}const vZ=/^:[\w-]+$/,yZ=3,xZ=2,AZ=1,wZ=10,CZ=-2,KN=t=>t==="*";function _Z(t,i){let a=t.split("/"),u=a.length;return a.some(KN)&&(u+=CZ),i&&(u+=xZ),a.filter(m=>!KN(m)).reduce((m,M)=>m+(vZ.test(M)?yZ:M===""?AZ:wZ),u)}function MZ(t,i){return t.length===i.length&&t.slice(0,-1).every((u,m)=>u===i[m])?t[t.length-1]-i[i.length-1]:0}function SZ(t,i){let{routesMeta:a}=t,u={},m="/",M=[];for(let L=0;L<a.length;++L){let z=a[L],U=L===a.length-1,W=m==="/"?i:i.slice(m.length)||"/",J=TZ({path:z.relativePath,caseSensitive:z.caseSensitive,end:U},W);if(!J)return null;Object.assign(u,J.params);let te=z.route;M.push({params:u,pathname:Nm([m,J.pathname]),pathnameBase:OZ(Nm([m,J.pathnameBase])),route:te}),J.pathnameBase!=="/"&&(m=Nm([m,J.pathnameBase]))}return M}function TZ(t,i){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,u]=EZ(t.path,t.caseSensitive,t.end),m=i.match(a);if(!m)return null;let M=m[0],L=M.replace(/(.)\/+$/,"$1"),z=m.slice(1);return{params:u.reduce((W,J,te)=>{let{paramName:ae,isOptional:ve}=J;if(ae==="*"){let oe=z[te]||"";L=M.slice(0,M.length-oe.length).replace(/(.)\/+$/,"$1")}const he=z[te];return ve&&!he?W[ae]=void 0:W[ae]=(he||"").replace(/%2F/g,"/"),W},{}),pathname:M,pathnameBase:L,pattern:t}}function EZ(t,i,a){i===void 0&&(i=!1),a===void 0&&(a=!0),jk(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let u=[],m="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(L,z,U)=>(u.push({paramName:z,isOptional:U!=null}),U?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(u.push({paramName:"*"}),m+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?m+="\\/*$":t!==""&&t!=="/"&&(m+="(?:(?=\\/|$))"),[new RegExp(m,i?void 0:"i"),u]}function IZ(t){try{return t.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return jk(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+i+").")),t}}function RO(t,i){if(i==="/")return t;if(!t.toLowerCase().startsWith(i.toLowerCase()))return null;let a=i.endsWith("/")?i.length-1:i.length,u=t.charAt(a);return u&&u!=="/"?null:t.slice(a)||"/"}function RZ(t,i){i===void 0&&(i="/");let{pathname:a,search:u="",hash:m=""}=typeof t=="string"?CC(t):t;return{pathname:a?a.startsWith("/")?a:LZ(a,i):i,search:DZ(u),hash:bZ(m)}}function LZ(t,i){let a=i.replace(/\/+$/,"").split("/");return t.split("/").forEach(m=>{m===".."?a.length>1&&a.pop():m!=="."&&a.push(m)}),a.length>1?a.join("/"):"/"}function ZL(t,i,a,u){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+i+"` field ["+JSON.stringify(u)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function PZ(t){return t.filter((i,a)=>a===0||i.route.path&&i.route.path.length>0)}function LO(t,i){let a=PZ(t);return i?a.map((u,m)=>m===t.length-1?u.pathname:u.pathnameBase):a.map(u=>u.pathnameBase)}function PO(t,i,a,u){u===void 0&&(u=!1);let m;typeof t=="string"?m=CC(t):(m=tC({},t),Ns(!m.pathname||!m.pathname.includes("?"),ZL("?","pathname","search",m)),Ns(!m.pathname||!m.pathname.includes("#"),ZL("#","pathname","hash",m)),Ns(!m.search||!m.search.includes("#"),ZL("#","search","hash",m)));let M=t===""||m.pathname==="",L=M?"/":m.pathname,z;if(L==null)z=a;else{let te=i.length-1;if(!u&&L.startsWith("..")){let ae=L.split("/");for(;ae[0]==="..";)ae.shift(),te-=1;m.pathname=ae.join("/")}z=te>=0?i[te]:"/"}let U=RZ(m,z),W=L&&L!=="/"&&L.endsWith("/"),J=(M||L===".")&&a.endsWith("/");return!U.pathname.endsWith("/")&&(W||J)&&(U.pathname+="/"),U}const Nm=t=>t.join("/").replace(/\/\/+/g,"/"),OZ=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),DZ=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,bZ=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function FZ(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Wk=["post","put","patch","delete"];new Set(Wk);const NZ=["get",...Wk];new Set(NZ);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xE(){return xE=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},xE.apply(this,arguments)}const OO=ie.createContext(null),BZ=ie.createContext(null),Xm=ie.createContext(null),DO=ie.createContext(null),$d=ie.createContext({outlet:null,matches:[],isDataRoute:!1}),Xk=ie.createContext(null);function zZ(t,i){let{relative:a}=i===void 0?{}:i;px()||Ns(!1);let{basename:u,navigator:m}=ie.useContext(Xm),{hash:M,pathname:L,search:z}=Zk(t,{relative:a}),U=L;return u!=="/"&&(U=L==="/"?u:Nm([u,L])),m.createHref({pathname:U,search:z,hash:M})}function px(){return ie.useContext(DO)!=null}function s0(){return px()||Ns(!1),ie.useContext(DO).location}function Yk(t){ie.useContext(Xm).static||ie.useLayoutEffect(t)}function l0(){let{isDataRoute:t}=ie.useContext($d);return t?$Z():UZ()}function UZ(){px()||Ns(!1);let t=ie.useContext(OO),{basename:i,future:a,navigator:u}=ie.useContext(Xm),{matches:m}=ie.useContext($d),{pathname:M}=s0(),L=JSON.stringify(LO(m,a.v7_relativeSplatPath)),z=ie.useRef(!1);return Yk(()=>{z.current=!0}),ie.useCallback(function(W,J){if(J===void 0&&(J={}),!z.current)return;if(typeof W=="number"){u.go(W);return}let te=PO(W,JSON.parse(L),M,J.relative==="path");t==null&&i!=="/"&&(te.pathname=te.pathname==="/"?i:Nm([i,te.pathname])),(J.replace?u.replace:u.push)(te,J.state,J)},[i,u,L,M,t])}const kZ=ie.createContext(null);function HZ(t){let i=ie.useContext($d).outlet;return i&&ie.createElement(kZ.Provider,{value:t},i)}function Zk(t,i){let{relative:a}=i===void 0?{}:i,{future:u}=ie.useContext(Xm),{matches:m}=ie.useContext($d),{pathname:M}=s0(),L=JSON.stringify(LO(m,u.v7_relativeSplatPath));return ie.useMemo(()=>PO(t,JSON.parse(L),M,a==="path"),[t,L,M,a])}function jZ(t,i){return GZ(t)}function GZ(t,i,a,u){px()||Ns(!1);let{navigator:m}=ie.useContext(Xm),{matches:M}=ie.useContext($d),L=M[M.length-1],z=L?L.params:{};L&&L.pathname;let U=L?L.pathnameBase:"/";L&&L.route;let W=s0(),J;J=W;let te=J.pathname||"/",ae=te;if(U!=="/"){let oe=U.replace(/^\//,"").split("/");ae="/"+te.replace(/^\//,"").split("/").slice(oe.length).join("/")}let ve=mZ(t,{pathname:ae});return ZZ(ve&&ve.map(oe=>Object.assign({},oe,{params:Object.assign({},z,oe.params),pathname:Nm([U,m.encodeLocation?m.encodeLocation(oe.pathname).pathname:oe.pathname]),pathnameBase:oe.pathnameBase==="/"?U:Nm([U,m.encodeLocation?m.encodeLocation(oe.pathnameBase).pathname:oe.pathnameBase])})),M,a,u)}function VZ(){let t=QZ(),i=FZ(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,m={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ie.createElement(ie.Fragment,null,ie.createElement("h2",null,"Unexpected Application Error!"),ie.createElement("h3",{style:{fontStyle:"italic"}},i),a?ie.createElement("pre",{style:m},a):null,null)}const WZ=ie.createElement(VZ,null);class XZ extends ie.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,a){return a.location!==i.location||a.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:a.error,location:a.location,revalidation:i.revalidation||a.revalidation}}componentDidCatch(i,a){console.error("React Router caught the following error during render",i,a)}render(){return this.state.error!==void 0?ie.createElement($d.Provider,{value:this.props.routeContext},ie.createElement(Xk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function YZ(t){let{routeContext:i,match:a,children:u}=t,m=ie.useContext(OO);return m&&m.static&&m.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(m.staticContext._deepestRenderedBoundaryId=a.route.id),ie.createElement($d.Provider,{value:i},u)}function ZZ(t,i,a,u){var m;if(i===void 0&&(i=[]),a===void 0&&(a=null),u===void 0&&(u=null),t==null){var M;if((M=a)!=null&&M.errors)t=a.matches;else return null}let L=t,z=(m=a)==null?void 0:m.errors;if(z!=null){let J=L.findIndex(te=>te.route.id&&(z==null?void 0:z[te.route.id])!==void 0);J>=0||Ns(!1),L=L.slice(0,Math.min(L.length,J+1))}let U=!1,W=-1;if(a&&u&&u.v7_partialHydration)for(let J=0;J<L.length;J++){let te=L[J];if((te.route.HydrateFallback||te.route.hydrateFallbackElement)&&(W=J),te.route.id){let{loaderData:ae,errors:ve}=a,he=te.route.loader&&ae[te.route.id]===void 0&&(!ve||ve[te.route.id]===void 0);if(te.route.lazy||he){U=!0,W>=0?L=L.slice(0,W+1):L=[L[0]];break}}}return L.reduceRight((J,te,ae)=>{let ve,he=!1,oe=null,me=null;a&&(ve=z&&te.route.id?z[te.route.id]:void 0,oe=te.route.errorElement||WZ,U&&(W<0&&ae===0?(he=!0,me=null):W===ae&&(he=!0,me=te.route.hydrateFallbackElement||null)));let ge=i.concat(L.slice(0,ae+1)),de=()=>{let ce;return ve?ce=oe:he?ce=me:te.route.Component?ce=ie.createElement(te.route.Component,null):te.route.element?ce=te.route.element:ce=J,ie.createElement(YZ,{match:te,routeContext:{outlet:J,matches:ge,isDataRoute:a!=null},children:ce})};return a&&(te.route.ErrorBoundary||te.route.errorElement||ae===0)?ie.createElement(XZ,{location:a.location,revalidation:a.revalidation,component:oe,error:ve,children:de(),routeContext:{outlet:null,matches:ge,isDataRoute:!0}}):de()},null)}var qk=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(qk||{}),AE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(AE||{});function qZ(t){let i=ie.useContext(OO);return i||Ns(!1),i}function KZ(t){let i=ie.useContext(BZ);return i||Ns(!1),i}function JZ(t){let i=ie.useContext($d);return i||Ns(!1),i}function Kk(t){let i=JZ(),a=i.matches[i.matches.length-1];return a.route.id||Ns(!1),a.route.id}function QZ(){var t;let i=ie.useContext(Xk),a=KZ(AE.UseRouteError),u=Kk(AE.UseRouteError);return i!==void 0?i:(t=a.errors)==null?void 0:t[u]}function $Z(){let{router:t}=qZ(qk.UseNavigateStable),i=Kk(AE.UseNavigateStable),a=ie.useRef(!1);return Yk(()=>{a.current=!0}),ie.useCallback(function(m,M){M===void 0&&(M={}),a.current&&(typeof m=="number"?t.navigate(m):t.navigate(m,xE({fromRouteId:i},M)))},[t,i])}function JN(t){let{to:i,replace:a,state:u,relative:m}=t;px()||Ns(!1);let{future:M,static:L}=ie.useContext(Xm),{matches:z}=ie.useContext($d),{pathname:U}=s0(),W=l0(),J=PO(i,LO(z,M.v7_relativeSplatPath),U,m==="path"),te=JSON.stringify(J);return ie.useEffect(()=>W(JSON.parse(te),{replace:a,state:u,relative:m}),[W,te,m,a,u]),null}function eq(t){return HZ(t.context)}function tq(t){let{basename:i="/",children:a=null,location:u,navigationType:m=Hv.Pop,navigator:M,static:L=!1,future:z}=t;px()&&Ns(!1);let U=i.replace(/^\/*/,"/"),W=ie.useMemo(()=>({basename:U,navigator:M,static:L,future:xE({v7_relativeSplatPath:!1},z)}),[U,z,M,L]);typeof u=="string"&&(u=CC(u));let{pathname:J="/",search:te="",hash:ae="",state:ve=null,key:he="default"}=u,oe=ie.useMemo(()=>{let me=RO(J,U);return me==null?null:{location:{pathname:me,search:te,hash:ae,state:ve,key:he},navigationType:m}},[U,J,te,ae,ve,he,m]);return oe==null?null:ie.createElement(Xm.Provider,{value:W},ie.createElement(DO.Provider,{children:a,value:oe}))}new Promise(()=>{});/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function IP(){return IP=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},IP.apply(this,arguments)}function rq(t,i){if(t==null)return{};var a={},u=Object.keys(t),m,M;for(M=0;M<u.length;M++)m=u[M],!(i.indexOf(m)>=0)&&(a[m]=t[m]);return a}function nq(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function iq(t,i){return t.button===0&&(!i||i==="_self")&&!nq(t)}const oq=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],aq="6";try{window.__reactRouterVersion=aq}catch{}const sq="startTransition",QN=Kv[sq];function lq(t){let{basename:i,children:a,future:u,window:m}=t,M=ie.useRef();M.current==null&&(M.current=fZ({window:m,v5Compat:!0}));let L=M.current,[z,U]=ie.useState({action:L.action,location:L.location}),{v7_startTransition:W}=u||{},J=ie.useCallback(te=>{W&&QN?QN(()=>U(te)):U(te)},[U,W]);return ie.useLayoutEffect(()=>L.listen(J),[L,J]),ie.createElement(tq,{basename:i,children:a,location:z.location,navigationType:z.action,navigator:L,future:u})}const uq=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cq=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$N=ie.forwardRef(function(i,a){let{onClick:u,relative:m,reloadDocument:M,replace:L,state:z,target:U,to:W,preventScrollReset:J,unstable_viewTransition:te}=i,ae=rq(i,oq),{basename:ve}=ie.useContext(Xm),he,oe=!1;if(typeof W=="string"&&cq.test(W)&&(he=W,uq))try{let ce=new URL(window.location.href),_e=W.startsWith("//")?new URL(ce.protocol+W):new URL(W),Re=RO(_e.pathname,ve);_e.origin===ce.origin&&Re!=null?W=Re+_e.search+_e.hash:oe=!0}catch{}let me=zZ(W,{relative:m}),ge=hq(W,{replace:L,state:z,target:U,preventScrollReset:J,relative:m,unstable_viewTransition:te});function de(ce){u&&u(ce),ce.defaultPrevented||ge(ce)}return ie.createElement("a",IP({},ae,{href:he||me,onClick:oe||M?u:de,ref:a,target:U}))});var eB;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(eB||(eB={}));var tB;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(tB||(tB={}));function hq(t,i){let{target:a,replace:u,state:m,preventScrollReset:M,relative:L,unstable_viewTransition:z}=i===void 0?{}:i,U=l0(),W=s0(),J=Zk(t,{relative:L});return ie.useCallback(te=>{if(iq(te,a)){te.preventDefault();let ae=u!==void 0?u:yE(W)===yE(J);U(t,{replace:ae,state:m,preventScrollReset:M,relative:L,unstable_viewTransition:z})}},[W,U,J,u,m,a,t,M,L,z])}const fq="modulepreload",dq=function(t){return"/test/"+t},rB={},_C=function(i,a,u){let m=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const M=document.querySelector("meta[property=csp-nonce]"),L=(M==null?void 0:M.nonce)||(M==null?void 0:M.getAttribute("nonce"));m=Promise.all(a.map(z=>{if(z=dq(z),z in rB)return;rB[z]=!0;const U=z.endsWith(".css"),W=U?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${z}"]${W}`))return;const J=document.createElement("link");if(J.rel=U?"stylesheet":fq,U||(J.as="script",J.crossOrigin=""),J.href=z,L&&J.setAttribute("nonce",L),document.head.appendChild(J),U)return new Promise((te,ae)=>{J.addEventListener("load",te),J.addEventListener("error",()=>ae(new Error(`Unable to preload CSS for ${z}`)))})}))}return m.then(()=>i()).catch(M=>{const L=new Event("vite:preloadError",{cancelable:!0});if(L.payload=M,window.dispatchEvent(L),!L.defaultPrevented)throw M})};var Jk={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var i={}.hasOwnProperty;function a(){for(var M="",L=0;L<arguments.length;L++){var z=arguments[L];z&&(M=m(M,u(z)))}return M}function u(M){if(typeof M=="string"||typeof M=="number")return M;if(typeof M!="object")return"";if(Array.isArray(M))return a.apply(null,M);if(M.toString!==Object.prototype.toString&&!M.toString.toString().includes("[native code]"))return M.toString();var L="";for(var z in M)i.call(M,z)&&M[z]&&(L=m(L,z));return L}function m(M,L){return L?M?M+" "+L:M+L:M}t.exports?(a.default=a,t.exports=a):window.classNames=a})()})(Jk);var pq=Jk.exports;const mr=b4(pq);function Sn(){return Sn=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},Sn.apply(this,arguments)}var Qk={exports:{}},yo={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bO=Symbol.for("react.element"),FO=Symbol.for("react.portal"),a3=Symbol.for("react.fragment"),s3=Symbol.for("react.strict_mode"),l3=Symbol.for("react.profiler"),u3=Symbol.for("react.provider"),c3=Symbol.for("react.context"),mq=Symbol.for("react.server_context"),h3=Symbol.for("react.forward_ref"),f3=Symbol.for("react.suspense"),d3=Symbol.for("react.suspense_list"),p3=Symbol.for("react.memo"),m3=Symbol.for("react.lazy"),gq=Symbol.for("react.offscreen"),$k;$k=Symbol.for("react.module.reference");function Ic(t){if(typeof t=="object"&&t!==null){var i=t.$$typeof;switch(i){case bO:switch(t=t.type,t){case a3:case l3:case s3:case f3:case d3:return t;default:switch(t=t&&t.$$typeof,t){case mq:case c3:case h3:case m3:case p3:case u3:return t;default:return i}}case FO:return i}}}yo.ContextConsumer=c3;yo.ContextProvider=u3;yo.Element=bO;yo.ForwardRef=h3;yo.Fragment=a3;yo.Lazy=m3;yo.Memo=p3;yo.Portal=FO;yo.Profiler=l3;yo.StrictMode=s3;yo.Suspense=f3;yo.SuspenseList=d3;yo.isAsyncMode=function(){return!1};yo.isConcurrentMode=function(){return!1};yo.isContextConsumer=function(t){return Ic(t)===c3};yo.isContextProvider=function(t){return Ic(t)===u3};yo.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===bO};yo.isForwardRef=function(t){return Ic(t)===h3};yo.isFragment=function(t){return Ic(t)===a3};yo.isLazy=function(t){return Ic(t)===m3};yo.isMemo=function(t){return Ic(t)===p3};yo.isPortal=function(t){return Ic(t)===FO};yo.isProfiler=function(t){return Ic(t)===l3};yo.isStrictMode=function(t){return Ic(t)===s3};yo.isSuspense=function(t){return Ic(t)===f3};yo.isSuspenseList=function(t){return Ic(t)===d3};yo.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===a3||t===l3||t===s3||t===f3||t===d3||t===gq||typeof t=="object"&&t!==null&&(t.$$typeof===m3||t.$$typeof===p3||t.$$typeof===u3||t.$$typeof===c3||t.$$typeof===h3||t.$$typeof===$k||t.getModuleId!==void 0)};yo.typeOf=Ic;Qk.exports=yo;var Pw=Qk.exports;function Pf(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=[];return dr.Children.forEach(t,function(u){u==null&&!i.keepEmpty||(Array.isArray(u)?a=a.concat(Pf(u)):Pw.isFragment(u)&&u.props?a=a.concat(Pf(u.props.children,i)):a.push(u))}),a}var RP={},vq=function(i){};function yq(t,i){}function xq(t,i){}function Aq(){RP={}}function e7(t,i,a){!i&&!RP[a]&&(t(!1,a),RP[a]=!0)}function Il(t,i){e7(yq,t,i)}function wq(t,i){e7(xq,t,i)}Il.preMessage=vq;Il.resetWarned=Aq;Il.noteOnce=wq;function ii(t){"@babel/helpers - typeof";return ii=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ii(t)}function Cq(t,i){if(ii(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var u=a.call(t,i||"default");if(ii(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function t7(t){var i=Cq(t,"string");return ii(i)=="symbol"?i:i+""}function _t(t,i,a){return i=t7(i),i in t?Object.defineProperty(t,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[i]=a,t}function nB(t,i){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),a.push.apply(a,u)}return a}function Ft(t){for(var i=1;i<arguments.length;i++){var a=arguments[i]!=null?arguments[i]:{};i%2?nB(Object(a),!0).forEach(function(u){_t(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):nB(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function wE(t){return t instanceof HTMLElement||t instanceof SVGElement}function DT(t){return wE(t)?t:t instanceof dr.Component?Hk.findDOMNode(t):null}function g3(t,i,a){var u=ie.useRef({});return(!("value"in u.current)||a(u.current.condition,i))&&(u.current.value=t(),u.current.condition=i),u.current.value}var NO=function(i,a){typeof i=="function"?i(a):ii(i)==="object"&&i&&"current"in i&&(i.current=a)},ep=function(){for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];var m=a.filter(Boolean);return m.length<=1?m[0]:function(M){a.forEach(function(L){NO(L,M)})}},MC=function(){for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return g3(function(){return ep.apply(void 0,a)},a,function(m,M){return m.length!==M.length||m.every(function(L,z){return L!==M[z]})})},mx=function(i){var a,u,m=Pw.isMemo(i)?i.type.type:i.type;return!(typeof m=="function"&&!((a=m.prototype)!==null&&a!==void 0&&a.render)&&m.$$typeof!==Pw.ForwardRef||typeof i=="function"&&!((u=i.prototype)!==null&&u!==void 0&&u.render)&&i.$$typeof!==Pw.ForwardRef)},_q=function(i){return!ie.isValidElement(i)||Pw.isFragment(i)?!1:mx(i)},LP=ie.createContext(null);function Mq(t){var i=t.children,a=t.onBatchResize,u=ie.useRef(0),m=ie.useRef([]),M=ie.useContext(LP),L=ie.useCallback(function(z,U,W){u.current+=1;var J=u.current;m.current.push({size:z,element:U,data:W}),Promise.resolve().then(function(){J===u.current&&(a==null||a(m.current),m.current=[])}),M==null||M(z,U,W)},[a,M]);return ie.createElement(LP.Provider,{value:L},i)}var r7=function(){if(typeof Map<"u")return Map;function t(i,a){var u=-1;return i.some(function(m,M){return m[0]===a?(u=M,!0):!1}),u}return function(){function i(){this.__entries__=[]}return Object.defineProperty(i.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),i.prototype.get=function(a){var u=t(this.__entries__,a),m=this.__entries__[u];return m&&m[1]},i.prototype.set=function(a,u){var m=t(this.__entries__,a);~m?this.__entries__[m][1]=u:this.__entries__.push([a,u])},i.prototype.delete=function(a){var u=this.__entries__,m=t(u,a);~m&&u.splice(m,1)},i.prototype.has=function(a){return!!~t(this.__entries__,a)},i.prototype.clear=function(){this.__entries__.splice(0)},i.prototype.forEach=function(a,u){u===void 0&&(u=null);for(var m=0,M=this.__entries__;m<M.length;m++){var L=M[m];a.call(u,L[1],L[0])}},i}()}(),PP=typeof window<"u"&&typeof document<"u"&&window.document===document,CE=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),Sq=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(CE):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),Tq=2;function Eq(t,i){var a=!1,u=!1,m=0;function M(){a&&(a=!1,t()),u&&z()}function L(){Sq(M)}function z(){var U=Date.now();if(a){if(U-m<Tq)return;u=!0}else a=!0,u=!1,setTimeout(L,i);m=U}return z}var Iq=20,Rq=["top","right","bottom","left","width","height","size","weight"],Lq=typeof MutationObserver<"u",Pq=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Eq(this.refresh.bind(this),Iq)}return t.prototype.addObserver=function(i){~this.observers_.indexOf(i)||this.observers_.push(i),this.connected_||this.connect_()},t.prototype.removeObserver=function(i){var a=this.observers_,u=a.indexOf(i);~u&&a.splice(u,1),!a.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var i=this.updateObservers_();i&&this.refresh()},t.prototype.updateObservers_=function(){var i=this.observers_.filter(function(a){return a.gatherActive(),a.hasActive()});return i.forEach(function(a){return a.broadcastActive()}),i.length>0},t.prototype.connect_=function(){!PP||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Lq?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!PP||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(i){var a=i.propertyName,u=a===void 0?"":a,m=Rq.some(function(M){return!!~u.indexOf(M)});m&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),n7=function(t,i){for(var a=0,u=Object.keys(i);a<u.length;a++){var m=u[a];Object.defineProperty(t,m,{value:i[m],enumerable:!1,writable:!1,configurable:!0})}return t},nx=function(t){var i=t&&t.ownerDocument&&t.ownerDocument.defaultView;return i||CE},i7=v3(0,0,0,0);function _E(t){return parseFloat(t)||0}function iB(t){for(var i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];return i.reduce(function(u,m){var M=t["border-"+m+"-width"];return u+_E(M)},0)}function Oq(t){for(var i=["top","right","bottom","left"],a={},u=0,m=i;u<m.length;u++){var M=m[u],L=t["padding-"+M];a[M]=_E(L)}return a}function Dq(t){var i=t.getBBox();return v3(0,0,i.width,i.height)}function bq(t){var i=t.clientWidth,a=t.clientHeight;if(!i&&!a)return i7;var u=nx(t).getComputedStyle(t),m=Oq(u),M=m.left+m.right,L=m.top+m.bottom,z=_E(u.width),U=_E(u.height);if(u.boxSizing==="border-box"&&(Math.round(z+M)!==i&&(z-=iB(u,"left","right")+M),Math.round(U+L)!==a&&(U-=iB(u,"top","bottom")+L)),!Nq(t)){var W=Math.round(z+M)-i,J=Math.round(U+L)-a;Math.abs(W)!==1&&(z-=W),Math.abs(J)!==1&&(U-=J)}return v3(m.left,m.top,z,U)}var Fq=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof nx(t).SVGGraphicsElement}:function(t){return t instanceof nx(t).SVGElement&&typeof t.getBBox=="function"}}();function Nq(t){return t===nx(t).document.documentElement}function Bq(t){return PP?Fq(t)?Dq(t):bq(t):i7}function zq(t){var i=t.x,a=t.y,u=t.width,m=t.height,M=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,L=Object.create(M.prototype);return n7(L,{x:i,y:a,width:u,height:m,top:a,right:i+u,bottom:m+a,left:i}),L}function v3(t,i,a,u){return{x:t,y:i,width:a,height:u}}var Uq=function(){function t(i){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=v3(0,0,0,0),this.target=i}return t.prototype.isActive=function(){var i=Bq(this.target);return this.contentRect_=i,i.width!==this.broadcastWidth||i.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var i=this.contentRect_;return this.broadcastWidth=i.width,this.broadcastHeight=i.height,i},t}(),kq=function(){function t(i,a){var u=zq(a);n7(this,{target:i,contentRect:u})}return t}(),Hq=function(){function t(i,a,u){if(this.activeObservations_=[],this.observations_=new r7,typeof i!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=i,this.controller_=a,this.callbackCtx_=u}return t.prototype.observe=function(i){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(i instanceof nx(i).Element))throw new TypeError('parameter 1 is not of type "Element".');var a=this.observations_;a.has(i)||(a.set(i,new Uq(i)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(i){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(i instanceof nx(i).Element))throw new TypeError('parameter 1 is not of type "Element".');var a=this.observations_;a.has(i)&&(a.delete(i),a.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var i=this;this.clearActive(),this.observations_.forEach(function(a){a.isActive()&&i.activeObservations_.push(a)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var i=this.callbackCtx_,a=this.activeObservations_.map(function(u){return new kq(u.target,u.broadcastRect())});this.callback_.call(i,a,i),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),o7=typeof WeakMap<"u"?new WeakMap:new r7,a7=function(){function t(i){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var a=Pq.getInstance(),u=new Hq(i,a,this);o7.set(this,u)}return t}();["observe","unobserve","disconnect"].forEach(function(t){a7.prototype[t]=function(){var i;return(i=o7.get(this))[t].apply(i,arguments)}});var jq=function(){return typeof CE.ResizeObserver<"u"?CE.ResizeObserver:a7}(),Sm=new Map;function Gq(t){t.forEach(function(i){var a,u=i.target;(a=Sm.get(u))===null||a===void 0||a.forEach(function(m){return m(u)})})}var s7=new jq(Gq);function Vq(t,i){Sm.has(t)||(Sm.set(t,new Set),s7.observe(t)),Sm.get(t).add(i)}function Wq(t,i){Sm.has(t)&&(Sm.get(t).delete(i),Sm.get(t).size||(s7.unobserve(t),Sm.delete(t)))}function hl(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function oB(t,i){for(var a=0;a<i.length;a++){var u=i[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,t7(u.key),u)}}function fl(t,i,a){return i&&oB(t.prototype,i),a&&oB(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function rC(t,i){return rC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,m){return u.__proto__=m,u},rC(t,i)}function Ym(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&rC(t,i)}function r0(t){return r0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},r0(t)}function y3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(y3=function(){return!!t})()}function Bi(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l7(t,i){if(i&&(ii(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bi(t)}function gx(t){var i=y3();return function(){var u=r0(t),m;if(i){var M=r0(this).constructor;m=Reflect.construct(u,arguments,M)}else m=u.apply(this,arguments);return l7(this,m)}}var Xq=function(t){Ym(a,t);var i=gx(a);function a(){return hl(this,a),i.apply(this,arguments)}return fl(a,[{key:"render",value:function(){return this.props.children}}]),a}(ie.Component);function Yq(t,i){var a=t.children,u=t.disabled,m=ie.useRef(null),M=ie.useRef(null),L=ie.useContext(LP),z=typeof a=="function",U=z?a(m):a,W=ie.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),J=!z&&ie.isValidElement(U)&&mx(U),te=J?U.ref:null,ae=MC(te,m),ve=function(){var ge;return DT(m.current)||(m.current&&ii(m.current)==="object"?DT((ge=m.current)===null||ge===void 0?void 0:ge.nativeElement):null)||DT(M.current)};ie.useImperativeHandle(i,function(){return ve()});var he=ie.useRef(t);he.current=t;var oe=ie.useCallback(function(me){var ge=he.current,de=ge.onResize,ce=ge.data,_e=me.getBoundingClientRect(),Re=_e.width,Ee=_e.height,De=me.offsetWidth,We=me.offsetHeight,Xe=Math.floor(Re),et=Math.floor(Ee);if(W.current.width!==Xe||W.current.height!==et||W.current.offsetWidth!==De||W.current.offsetHeight!==We){var Ye={width:Xe,height:et,offsetWidth:De,offsetHeight:We};W.current=Ye;var at=De===Math.round(Re)?Re:De,ot=We===Math.round(Ee)?Ee:We,ct=Ft(Ft({},Ye),{},{offsetWidth:at,offsetHeight:ot});L==null||L(ct,me,ce),de&&Promise.resolve().then(function(){de(ct,me)})}},[]);return ie.useEffect(function(){var me=ve();return me&&!u&&Vq(me,oe),function(){return Wq(me,oe)}},[m.current,u]),ie.createElement(Xq,{ref:M},J?ie.cloneElement(U,{ref:ae}):U)}var Zq=ie.forwardRef(Yq),qq="rc-observer-key";function Kq(t,i){var a=t.children,u=typeof a=="function"?[a]:Pf(a);return u.map(function(m,M){var L=(m==null?void 0:m.key)||"".concat(qq,"-").concat(M);return ie.createElement(Zq,Sn({},t,{key:L,ref:M===0?i:void 0}),m)})}var u0=ie.forwardRef(Kq);u0.Collection=Mq;function Oh(t,i){var a=Ft({},t);return Array.isArray(i)&&i.forEach(function(u){delete a[u]}),a}function OP(t,i){(i==null||i>t.length)&&(i=t.length);for(var a=0,u=new Array(i);a<i;a++)u[a]=t[a];return u}function Jq(t){if(Array.isArray(t))return OP(t)}function u7(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function BO(t,i){if(t){if(typeof t=="string")return OP(t,i);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return OP(t,i)}}function Qq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function on(t){return Jq(t)||u7(t)||BO(t)||Qq()}var c7=function(i){return+setTimeout(i,16)},h7=function(i){return clearTimeout(i)};typeof window<"u"&&"requestAnimationFrame"in window&&(c7=function(i){return window.requestAnimationFrame(i)},h7=function(i){return window.cancelAnimationFrame(i)});var aB=0,zO=new Map;function f7(t){zO.delete(t)}var ul=function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;aB+=1;var u=aB;function m(M){if(M===0)f7(u),i();else{var L=c7(function(){m(M-1)});zO.set(u,L)}}return m(a),u};ul.cancel=function(t){var i=zO.get(t);return f7(t),h7(i)};function d7(t){if(Array.isArray(t))return t}function $q(t,i){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var u,m,M,L,z=[],U=!0,W=!1;try{if(M=(a=a.call(t)).next,i===0){if(Object(a)!==a)return;U=!1}else for(;!(U=(u=M.call(a)).done)&&(z.push(u.value),z.length!==i);U=!0);}catch(J){W=!0,m=J}finally{try{if(!U&&a.return!=null&&(L=a.return(),Object(L)!==L))return}finally{if(W)throw m}}return z}}function p7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sr(t,i){return d7(t)||$q(t,i)||BO(t,i)||p7()}function nC(t){for(var i=0,a,u=0,m=t.length;m>=4;++u,m-=4)a=t.charCodeAt(u)&255|(t.charCodeAt(++u)&255)<<8|(t.charCodeAt(++u)&255)<<16|(t.charCodeAt(++u)&255)<<24,a=(a&65535)*1540483477+((a>>>16)*59797<<16),a^=a>>>24,i=(a&65535)*1540483477+((a>>>16)*59797<<16)^(i&65535)*1540483477+((i>>>16)*59797<<16);switch(m){case 3:i^=(t.charCodeAt(u+2)&255)<<16;case 2:i^=(t.charCodeAt(u+1)&255)<<8;case 1:i^=t.charCodeAt(u)&255,i=(i&65535)*1540483477+((i>>>16)*59797<<16)}return i^=i>>>13,i=(i&65535)*1540483477+((i>>>16)*59797<<16),((i^i>>>15)>>>0).toString(36)}function Nu(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function eK(t,i){if(!t)return!1;if(t.contains)return t.contains(i);for(var a=i;a;){if(a===t)return!0;a=a.parentNode}return!1}var sB="data-rc-order",lB="data-rc-priority",tK="rc-util-key",DP=new Map;function m7(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.mark;return i?i.startsWith("data-")?i:"data-".concat(i):tK}function x3(t){if(t.attachTo)return t.attachTo;var i=document.querySelector("head");return i||document.body}function rK(t){return t==="queue"?"prependQueue":t?"prepend":"append"}function UO(t){return Array.from((DP.get(t)||t).children).filter(function(i){return i.tagName==="STYLE"})}function g7(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Nu())return null;var a=i.csp,u=i.prepend,m=i.priority,M=m===void 0?0:m,L=rK(u),z=L==="prependQueue",U=document.createElement("style");U.setAttribute(sB,L),z&&M&&U.setAttribute(lB,"".concat(M)),a!=null&&a.nonce&&(U.nonce=a==null?void 0:a.nonce),U.innerHTML=t;var W=x3(i),J=W.firstChild;if(u){if(z){var te=(i.styles||UO(W)).filter(function(ae){if(!["prepend","prependQueue"].includes(ae.getAttribute(sB)))return!1;var ve=Number(ae.getAttribute(lB)||0);return M>=ve});if(te.length)return W.insertBefore(U,te[te.length-1].nextSibling),U}W.insertBefore(U,J)}else W.appendChild(U);return U}function v7(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=x3(i);return(i.styles||UO(a)).find(function(u){return u.getAttribute(m7(i))===t})}function iC(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=v7(t,i);if(a){var u=x3(i);u.removeChild(a)}}function nK(t,i){var a=DP.get(t);if(!a||!eK(document,a)){var u=g7("",i),m=u.parentNode;DP.set(t,m),t.removeChild(u)}}function jd(t,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=x3(a),m=UO(u),M=Ft(Ft({},a),{},{styles:m});nK(u,M);var L=v7(i,M);if(L){var z,U;if((z=M.csp)!==null&&z!==void 0&&z.nonce&&L.nonce!==((U=M.csp)===null||U===void 0?void 0:U.nonce)){var W;L.nonce=(W=M.csp)===null||W===void 0?void 0:W.nonce}return L.innerHTML!==t&&(L.innerHTML=t),L}var J=g7(t,M);return J.setAttribute(m7(M),i),J}function iK(t,i){if(t==null)return{};var a={};for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){if(i.indexOf(u)>=0)continue;a[u]=t[u]}return a}function Qi(t,i){if(t==null)return{};var a=iK(t,i),u,m;if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(t);for(m=0;m<M.length;m++)u=M[m],!(i.indexOf(u)>=0)&&Object.prototype.propertyIsEnumerable.call(t,u)&&(a[u]=t[u])}return a}function oC(t,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,u=new Set;function m(M,L){var z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,U=u.has(M);if(Il(!U,"Warning: There may be circular references"),U)return!1;if(M===L)return!0;if(a&&z>1)return!1;u.add(M);var W=z+1;if(Array.isArray(M)){if(!Array.isArray(L)||M.length!==L.length)return!1;for(var J=0;J<M.length;J++)if(!m(M[J],L[J],W))return!1;return!0}if(M&&L&&ii(M)==="object"&&ii(L)==="object"){var te=Object.keys(M);return te.length!==Object.keys(L).length?!1:te.every(function(ae){return m(M[ae],L[ae],W)})}return!1}return m(t,i)}var oK="%";function bP(t){return t.join(oK)}var aK=function(){function t(i){hl(this,t),_t(this,"instanceId",void 0),_t(this,"cache",new Map),this.instanceId=i}return fl(t,[{key:"get",value:function(a){return this.opGet(bP(a))}},{key:"opGet",value:function(a){return this.cache.get(a)||null}},{key:"update",value:function(a,u){return this.opUpdate(bP(a),u)}},{key:"opUpdate",value:function(a,u){var m=this.cache.get(a),M=u(m);M===null?this.cache.delete(a):this.cache.set(a,M)}}]),t}(),ix="data-token-hash",Eh="data-css-hash",Tm="__cssinjs_instance__";function sK(){var t=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var i=document.body.querySelectorAll("style[".concat(Eh,"]"))||[],a=document.head.firstChild;Array.from(i).forEach(function(m){m[Tm]=m[Tm]||t,m[Tm]===t&&document.head.insertBefore(m,a)});var u={};Array.from(document.querySelectorAll("style[".concat(Eh,"]"))).forEach(function(m){var M=m.getAttribute(Eh);if(u[M]){if(m[Tm]===t){var L;(L=m.parentNode)===null||L===void 0||L.removeChild(m)}}else u[M]=!0})}return new aK(t)}var A3=ie.createContext({hashPriority:"low",cache:sK(),defaultCache:!0});function lK(t,i){if(t.length!==i.length)return!1;for(var a=0;a<t.length;a++)if(t[a]!==i[a])return!1;return!0}var kO=function(){function t(){hl(this,t),_t(this,"cache",void 0),_t(this,"keys",void 0),_t(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return fl(t,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(a){var u,m,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,L={map:this.cache};return a.forEach(function(z){if(!L)L=void 0;else{var U;L=(U=L)===null||U===void 0||(U=U.map)===null||U===void 0?void 0:U.get(z)}}),(u=L)!==null&&u!==void 0&&u.value&&M&&(L.value[1]=this.cacheCallTimes++),(m=L)===null||m===void 0?void 0:m.value}},{key:"get",value:function(a){var u;return(u=this.internalGet(a,!0))===null||u===void 0?void 0:u[0]}},{key:"has",value:function(a){return!!this.internalGet(a)}},{key:"set",value:function(a,u){var m=this;if(!this.has(a)){if(this.size()+1>t.MAX_CACHE_SIZE+t.MAX_CACHE_OFFSET){var M=this.keys.reduce(function(W,J){var te=sr(W,2),ae=te[1];return m.internalGet(J)[1]<ae?[J,m.internalGet(J)[1]]:W},[this.keys[0],this.cacheCallTimes]),L=sr(M,1),z=L[0];this.delete(z)}this.keys.push(a)}var U=this.cache;a.forEach(function(W,J){if(J===a.length-1)U.set(W,{value:[u,m.cacheCallTimes++]});else{var te=U.get(W);te?te.map||(te.map=new Map):U.set(W,{map:new Map}),U=U.get(W).map}})}},{key:"deleteByPath",value:function(a,u){var m=a.get(u[0]);if(u.length===1){var M;return m.map?a.set(u[0],{map:m.map}):a.delete(u[0]),(M=m.value)===null||M===void 0?void 0:M[0]}var L=this.deleteByPath(m.map,u.slice(1));return(!m.map||m.map.size===0)&&!m.value&&a.delete(u[0]),L}},{key:"delete",value:function(a){if(this.has(a))return this.keys=this.keys.filter(function(u){return!lK(u,a)}),this.deleteByPath(this.cache,a)}}]),t}();_t(kO,"MAX_CACHE_SIZE",20);_t(kO,"MAX_CACHE_OFFSET",5);var uB=0,y7=function(){function t(i){hl(this,t),_t(this,"derivatives",void 0),_t(this,"id",void 0),this.derivatives=Array.isArray(i)?i:[i],this.id=uB,i.length===0&&(i.length>0,void 0),uB+=1}return fl(t,[{key:"getDerivativeToken",value:function(a){return this.derivatives.reduce(function(u,m){return m(a,u)},void 0)}}]),t}(),qL=new kO;function aC(t){var i=Array.isArray(t)?t:[t];return qL.has(i)||qL.set(i,new y7(i)),qL.get(i)}var uK=new WeakMap,KL={};function cK(t,i){for(var a=uK,u=0;u<i.length;u+=1){var m=i[u];a.has(m)||a.set(m,new WeakMap),a=a.get(m)}return a.has(KL)||a.set(KL,t()),a.get(KL)}var cB=new WeakMap;function Ow(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=cB.get(t)||"";return a||(Object.keys(t).forEach(function(u){var m=t[u];a+=u,m instanceof y7?a+=m.id:m&&ii(m)==="object"?a+=Ow(m,i):a+=m}),i&&(a=nC(a)),cB.set(t,a)),a}function hB(t,i){return nC("".concat(i,"_").concat(Ow(t,!0)))}var FP=Nu();function pn(t){return typeof t=="number"?"".concat(t,"px"):t}function ME(t,i,a){var u,m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},M=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(M)return t;var L=Ft(Ft({},m),{},(u={},_t(u,ix,i),_t(u,Eh,a),u)),z=Object.keys(L).map(function(U){var W=L[U];return W?"".concat(U,'="').concat(W,'"'):null}).filter(function(U){return U}).join(" ");return"<style ".concat(z,">").concat(t,"</style>")}var x7=function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"--".concat(a?"".concat(a,"-"):"").concat(i).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},hK=function(i,a,u){return Object.keys(i).length?".".concat(a).concat(u!=null&&u.scope?".".concat(u.scope):"","{").concat(Object.entries(i).map(function(m){var M=sr(m,2),L=M[0],z=M[1];return"".concat(L,":").concat(z,";")}).join(""),"}"):""},A7=function(i,a,u){var m={},M={};return Object.entries(i).forEach(function(L){var z,U,W=sr(L,2),J=W[0],te=W[1];if(u!=null&&(z=u.preserve)!==null&&z!==void 0&&z[J])M[J]=te;else if((typeof te=="string"||typeof te=="number")&&!(u!=null&&(U=u.ignore)!==null&&U!==void 0&&U[J])){var ae,ve=x7(J,u==null?void 0:u.prefix);m[ve]=typeof te=="number"&&!(u!=null&&(ae=u.unitless)!==null&&ae!==void 0&&ae[J])?"".concat(te,"px"):String(te),M[J]="var(".concat(ve,")")}}),[M,hK(m,a,{scope:u==null?void 0:u.scope})]},fB=Nu()?ie.useLayoutEffect:ie.useEffect,as=function(i,a){var u=ie.useRef(!0);fB(function(){return i(u.current)},a),fB(function(){return u.current=!1,function(){u.current=!0}},[])},dB=function(i,a){as(function(u){if(!u)return i()},a)},fK=Ft({},Kv),pB=fK.useInsertionEffect,dK=function(i,a,u){ie.useMemo(i,u),as(function(){return a(!0)},u)},pK=pB?function(t,i,a){return pB(function(){return t(),i()},a)}:dK,mK=Ft({},Kv),gK=mK.useInsertionEffect,vK=function(i){var a=[],u=!1;function m(M){u||a.push(M)}return ie.useEffect(function(){return u=!1,function(){u=!0,a.length&&a.forEach(function(M){return M()})}},i),m},yK=function(){return function(i){i()}},xK=typeof gK<"u"?vK:yK;function HO(t,i,a,u,m){var M=ie.useContext(A3),L=M.cache,z=[t].concat(on(i)),U=bP(z),W=xK([U]),J=function(he){L.opUpdate(U,function(oe){var me=oe||[void 0,void 0],ge=sr(me,2),de=ge[0],ce=de===void 0?0:de,_e=ge[1],Re=_e,Ee=Re||a(),De=[ce,Ee];return he?he(De):De})};ie.useMemo(function(){J()},[U]);var te=L.opGet(U),ae=te[1];return pK(function(){m==null||m(ae)},function(ve){return J(function(he){var oe=sr(he,2),me=oe[0],ge=oe[1];return ve&&me===0&&(m==null||m(ae)),[me+1,ge]}),function(){L.opUpdate(U,function(he){var oe=he||[],me=sr(oe,2),ge=me[0],de=ge===void 0?0:ge,ce=me[1],_e=de-1;return _e===0?(W(function(){(ve||!L.opGet(U))&&(u==null||u(ce,!1))}),null):[de-1,ce]})}},[U]),ae}var AK={},wK="css",Bv=new Map;function CK(t){Bv.set(t,(Bv.get(t)||0)+1)}function _K(t,i){if(typeof document<"u"){var a=document.querySelectorAll("style[".concat(ix,'="').concat(t,'"]'));a.forEach(function(u){if(u[Tm]===i){var m;(m=u.parentNode)===null||m===void 0||m.removeChild(u)}})}}var MK=0;function SK(t,i){Bv.set(t,(Bv.get(t)||0)-1);var a=Array.from(Bv.keys()),u=a.filter(function(m){var M=Bv.get(m)||0;return M<=0});a.length-u.length>MK&&u.forEach(function(m){_K(m,i),Bv.delete(m)})}var w7=function(i,a,u,m){var M=u.getDerivativeToken(i),L=Ft(Ft({},M),a);return m&&(L=m(L)),L},C7="token";function TK(t,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=ie.useContext(A3),m=u.cache.instanceId,M=u.container,L=a.salt,z=L===void 0?"":L,U=a.override,W=U===void 0?AK:U,J=a.formatToken,te=a.getComputedToken,ae=a.cssVar,ve=cK(function(){return Object.assign.apply(Object,[{}].concat(on(i)))},i),he=Ow(ve),oe=Ow(W),me=ae?Ow(ae):"",ge=HO(C7,[z,t.id,he,oe,me],function(){var de,ce=te?te(ve,W,t):w7(ve,W,t,J),_e=Ft({},ce),Re="";if(ae){var Ee=A7(ce,ae.key,{prefix:ae.prefix,ignore:ae.ignore,unitless:ae.unitless,preserve:ae.preserve}),De=sr(Ee,2);ce=De[0],Re=De[1]}var We=hB(ce,z);ce._tokenKey=We,_e._tokenKey=hB(_e,z);var Xe=(de=ae==null?void 0:ae.key)!==null&&de!==void 0?de:We;ce._themeKey=Xe,CK(Xe);var et="".concat(wK,"-").concat(nC(We));return ce._hashId=et,[ce,et,_e,Re,(ae==null?void 0:ae.key)||""]},function(de){SK(de[0]._themeKey,m)},function(de){var ce=sr(de,4),_e=ce[0],Re=ce[3];if(ae&&Re){var Ee=jd(Re,nC("css-variables-".concat(_e._themeKey)),{mark:Eh,prepend:"queue",attachTo:M,priority:-999});Ee[Tm]=m,Ee.setAttribute(ix,_e._themeKey)}});return ge}var EK=function(i,a,u){var m=sr(i,5),M=m[2],L=m[3],z=m[4],U=u||{},W=U.plain;if(!L)return null;var J=M._tokenKey,te=-999,ae={"data-rc-order":"prependQueue","data-rc-priority":"".concat(te)},ve=ME(L,z,J,ae,W);return[te,J,ve]},IK={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},_7="comm",M7="rule",S7="decl",RK="@import",LK="@keyframes",PK="@layer",T7=Math.abs,jO=String.fromCharCode;function E7(t){return t.trim()}function bT(t,i,a){return t.replace(i,a)}function OK(t,i,a){return t.indexOf(i,a)}function sC(t,i){return t.charCodeAt(i)|0}function lC(t,i,a){return t.slice(i,a)}function zd(t){return t.length}function DK(t){return t.length}function QS(t,i){return i.push(t),t}var w3=1,ox=1,I7=0,Tc=0,Ya=0,vx="";function GO(t,i,a,u,m,M,L,z){return{value:t,root:i,parent:a,type:u,props:m,children:M,line:w3,column:ox,length:L,return:"",siblings:z}}function bK(){return Ya}function FK(){return Ya=Tc>0?sC(vx,--Tc):0,ox--,Ya===10&&(ox=1,w3--),Ya}function Ih(){return Ya=Tc<I7?sC(vx,Tc++):0,ox++,Ya===10&&(ox=1,w3++),Ya}function Yv(){return sC(vx,Tc)}function FT(){return Tc}function C3(t,i){return lC(vx,t,i)}function NP(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function NK(t){return w3=ox=1,I7=zd(vx=t),Tc=0,[]}function BK(t){return vx="",t}function JL(t){return E7(C3(Tc-1,BP(t===91?t+2:t===40?t+1:t)))}function zK(t){for(;(Ya=Yv())&&Ya<33;)Ih();return NP(t)>2||NP(Ya)>3?"":" "}function UK(t,i){for(;--i&&Ih()&&!(Ya<48||Ya>102||Ya>57&&Ya<65||Ya>70&&Ya<97););return C3(t,FT()+(i<6&&Yv()==32&&Ih()==32))}function BP(t){for(;Ih();)switch(Ya){case t:return Tc;case 34:case 39:t!==34&&t!==39&&BP(Ya);break;case 40:t===41&&BP(t);break;case 92:Ih();break}return Tc}function kK(t,i){for(;Ih()&&t+Ya!==57;)if(t+Ya===84&&Yv()===47)break;return"/*"+C3(i,Tc-1)+"*"+jO(t===47?t:Ih())}function HK(t){for(;!NP(Yv());)Ih();return C3(t,Tc)}function jK(t){return BK(NT("",null,null,null,[""],t=NK(t),0,[0],t))}function NT(t,i,a,u,m,M,L,z,U){for(var W=0,J=0,te=L,ae=0,ve=0,he=0,oe=1,me=1,ge=1,de=0,ce="",_e=m,Re=M,Ee=u,De=ce;me;)switch(he=de,de=Ih()){case 40:if(he!=108&&sC(De,te-1)==58){OK(De+=bT(JL(de),"&","&\f"),"&\f",T7(W?z[W-1]:0))!=-1&&(ge=-1);break}case 34:case 39:case 91:De+=JL(de);break;case 9:case 10:case 13:case 32:De+=zK(he);break;case 92:De+=UK(FT()-1,7);continue;case 47:switch(Yv()){case 42:case 47:QS(GK(kK(Ih(),FT()),i,a,U),U);break;default:De+="/"}break;case 123*oe:z[W++]=zd(De)*ge;case 125*oe:case 59:case 0:switch(de){case 0:case 125:me=0;case 59+J:ge==-1&&(De=bT(De,/\f/g,"")),ve>0&&zd(De)-te&&QS(ve>32?gB(De+";",u,a,te-1,U):gB(bT(De," ","")+";",u,a,te-2,U),U);break;case 59:De+=";";default:if(QS(Ee=mB(De,i,a,W,J,m,z,ce,_e=[],Re=[],te,M),M),de===123)if(J===0)NT(De,i,Ee,Ee,_e,M,te,z,Re);else switch(ae===99&&sC(De,3)===110?100:ae){case 100:case 108:case 109:case 115:NT(t,Ee,Ee,u&&QS(mB(t,Ee,Ee,0,0,m,z,ce,m,_e=[],te,Re),Re),m,Re,te,z,u?_e:Re);break;default:NT(De,Ee,Ee,Ee,[""],Re,0,z,Re)}}W=J=ve=0,oe=ge=1,ce=De="",te=L;break;case 58:te=1+zd(De),ve=he;default:if(oe<1){if(de==123)--oe;else if(de==125&&oe++==0&&FK()==125)continue}switch(De+=jO(de),de*oe){case 38:ge=J>0?1:(De+="\f",-1);break;case 44:z[W++]=(zd(De)-1)*ge,ge=1;break;case 64:Yv()===45&&(De+=JL(Ih())),ae=Yv(),J=te=zd(ce=De+=HK(FT())),de++;break;case 45:he===45&&zd(De)==2&&(oe=0)}}return M}function mB(t,i,a,u,m,M,L,z,U,W,J,te){for(var ae=m-1,ve=m===0?M:[""],he=DK(ve),oe=0,me=0,ge=0;oe<u;++oe)for(var de=0,ce=lC(t,ae+1,ae=T7(me=L[oe])),_e=t;de<he;++de)(_e=E7(me>0?ve[de]+" "+ce:bT(ce,/&\f/g,ve[de])))&&(U[ge++]=_e);return GO(t,i,a,m===0?M7:z,U,W,J,te)}function GK(t,i,a,u){return GO(t,i,a,_7,jO(bK()),lC(t,2,-2),0,u)}function gB(t,i,a,u,m){return GO(t,i,a,S7,lC(t,0,u),lC(t,u+1,-1),u,m)}function zP(t,i){for(var a="",u=0;u<t.length;u++)a+=i(t[u],u,t,i)||"";return a}function VK(t,i,a,u){switch(t.type){case PK:if(t.children.length)break;case RK:case S7:return t.return=t.return||t.value;case _7:return"";case LK:return t.return=t.value+"{"+zP(t.children,u)+"}";case M7:if(!zd(t.value=t.props.join(",")))return""}return zd(a=zP(t.children,u))?t.return=t.value+"{"+a+"}":""}var vB="data-ant-cssinjs-cache-path",R7="_FILE_STYLE__",Zv,L7=!0;function WK(){if(!Zv&&(Zv={},Nu())){var t=document.createElement("div");t.className=vB,t.style.position="fixed",t.style.visibility="hidden",t.style.top="-9999px",document.body.appendChild(t);var i=getComputedStyle(t).content||"";i=i.replace(/^"/,"").replace(/"$/,""),i.split(";").forEach(function(m){var M=m.split(":"),L=sr(M,2),z=L[0],U=L[1];Zv[z]=U});var a=document.querySelector("style[".concat(vB,"]"));if(a){var u;L7=!1,(u=a.parentNode)===null||u===void 0||u.removeChild(a)}document.body.removeChild(t)}}function XK(t){return WK(),!!Zv[t]}function YK(t){var i=Zv[t],a=null;if(i&&Nu())if(L7)a=R7;else{var u=document.querySelector("style[".concat(Eh,'="').concat(Zv[t],'"]'));u?a=u.innerHTML:delete Zv[t]}return[a,i]}var ZK="_skip_check_",P7="_multi_value_";function BT(t){var i=zP(jK(t),VK);return i.replace(/\{%%%\:[^;];}/g,";")}function qK(t){return ii(t)==="object"&&t&&(ZK in t||P7 in t)}function KK(t,i,a){if(!i)return t;var u=".".concat(i),m=a==="low"?":where(".concat(u,")"):u,M=t.split(",").map(function(L){var z,U=L.trim().split(/\s+/),W=U[0]||"",J=((z=W.match(/^\w+/))===null||z===void 0?void 0:z[0])||"";return W="".concat(J).concat(m).concat(W.slice(J.length)),[W].concat(on(U.slice(1))).join(" ")});return M.join(",")}var JK=function t(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},m=u.root,M=u.injectHash,L=u.parentSelectors,z=a.hashId,U=a.layer;a.path;var W=a.hashPriority,J=a.transformers,te=J===void 0?[]:J;a.linters;var ae="",ve={};function he(ge){var de=ge.getName(z);if(!ve[de]){var ce=t(ge.style,a,{root:!1,parentSelectors:L}),_e=sr(ce,1),Re=_e[0];ve[de]="@keyframes ".concat(ge.getName(z)).concat(Re)}}function oe(ge){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return ge.forEach(function(ce){Array.isArray(ce)?oe(ce,de):ce&&de.push(ce)}),de}var me=oe(Array.isArray(i)?i:[i]);return me.forEach(function(ge){var de=typeof ge=="string"&&!m?{}:ge;if(typeof de=="string")ae+="".concat(de,`
`);else if(de._keyframe)he(de);else{var ce=te.reduce(function(_e,Re){var Ee;return(Re==null||(Ee=Re.visit)===null||Ee===void 0?void 0:Ee.call(Re,_e))||_e},de);Object.keys(ce).forEach(function(_e){var Re=ce[_e];if(ii(Re)==="object"&&Re&&(_e!=="animationName"||!Re._keyframe)&&!qK(Re)){var Ee=!1,De=_e.trim(),We=!1;(m||M)&&z?De.startsWith("@")?Ee=!0:De=KK(_e,z,W):m&&!z&&(De==="&"||De==="")&&(De="",We=!0);var Xe=t(Re,a,{root:We,injectHash:Ee,parentSelectors:[].concat(on(L),[De])}),et=sr(Xe,2),Ye=et[0],at=et[1];ve=Ft(Ft({},ve),at),ae+="".concat(De).concat(Ye)}else{let Dt=function($e,tt){var Ve=$e.replace(/[A-Z]/g,function(mt){return"-".concat(mt.toLowerCase())}),gt=tt;!IK[$e]&&typeof gt=="number"&&gt!==0&&(gt="".concat(gt,"px")),$e==="animationName"&&tt!==null&&tt!==void 0&&tt._keyframe&&(he(tt),gt=tt.getName(z)),ae+="".concat(Ve,":").concat(gt,";")};var ot,ct=(ot=Re==null?void 0:Re.value)!==null&&ot!==void 0?ot:Re;ii(Re)==="object"&&Re!==null&&Re!==void 0&&Re[P7]&&Array.isArray(ct)?ct.forEach(function($e){Dt(_e,$e)}):Dt(_e,ct)}})}}),m?U&&(ae="@layer ".concat(U.name," {").concat(ae,"}"),U.dependencies&&(ve["@layer ".concat(U.name)]=U.dependencies.map(function(ge){return"@layer ".concat(ge,", ").concat(U.name,";")}).join(`
`))):ae="{".concat(ae,"}"),[ae,ve]};function O7(t,i){return nC("".concat(t.join("%")).concat(i))}function QK(){return null}var D7="style";function UP(t,i){var a=t.token,u=t.path,m=t.hashId,M=t.layer,L=t.nonce,z=t.clientOnly,U=t.order,W=U===void 0?0:U,J=ie.useContext(A3),te=J.autoClear;J.mock;var ae=J.defaultCache,ve=J.hashPriority,he=J.container,oe=J.ssrInline,me=J.transformers,ge=J.linters,de=J.cache,ce=J.layer,_e=a._tokenKey,Re=[_e];ce&&Re.push("layer"),Re.push.apply(Re,on(u));var Ee=FP,De=HO(D7,Re,function(){var at=Re.join("|");if(XK(at)){var ot=YK(at),ct=sr(ot,2),Dt=ct[0],$e=ct[1];if(Dt)return[Dt,_e,$e,{},z,W]}var tt=i(),Ve=JK(tt,{hashId:m,hashPriority:ve,layer:ce?M:void 0,path:u.join("-"),transformers:me,linters:ge}),gt=sr(Ve,2),mt=gt[0],dt=gt[1],At=BT(mt),jt=O7(Re,At);return[At,_e,jt,dt,z,W]},function(at,ot){var ct=sr(at,3),Dt=ct[2];(ot||te)&&FP&&iC(Dt,{mark:Eh})},function(at){var ot=sr(at,4),ct=ot[0];ot[1];var Dt=ot[2],$e=ot[3];if(Ee&&ct!==R7){var tt={mark:Eh,prepend:ce?!1:"queue",attachTo:he,priority:W},Ve=typeof L=="function"?L():L;Ve&&(tt.csp={nonce:Ve});var gt=[],mt=[];Object.keys($e).forEach(function(At){At.startsWith("@layer")?gt.push(At):mt.push(At)}),gt.forEach(function(At){jd(BT($e[At]),"_layer-".concat(At),Ft(Ft({},tt),{},{prepend:!0}))});var dt=jd(ct,Dt,tt);dt[Tm]=de.instanceId,dt.setAttribute(ix,_e),mt.forEach(function(At){jd(BT($e[At]),"_effect-".concat(At),tt)})}}),We=sr(De,3),Xe=We[0],et=We[1],Ye=We[2];return function(at){var ot;if(!oe||Ee||!ae)ot=ie.createElement(QK,null);else{var ct;ot=ie.createElement("style",Sn({},(ct={},_t(ct,ix,et),_t(ct,Eh,Ye),ct),{dangerouslySetInnerHTML:{__html:Xe}}))}return ie.createElement(ie.Fragment,null,ot,at)}}var $K=function(i,a,u){var m=sr(i,6),M=m[0],L=m[1],z=m[2],U=m[3],W=m[4],J=m[5],te=u||{},ae=te.plain;if(W)return null;var ve=M,he={"data-rc-order":"prependQueue","data-rc-priority":"".concat(J)};return ve=ME(M,L,z,he,ae),U&&Object.keys(U).forEach(function(oe){if(!a[oe]){a[oe]=!0;var me=BT(U[oe]),ge=ME(me,L,"_effect-".concat(oe),he,ae);oe.startsWith("@layer")?ve=ge+ve:ve+=ge}}),[J,z,ve]},b7="cssVar",eJ=function(i,a){var u=i.key,m=i.prefix,M=i.unitless,L=i.ignore,z=i.token,U=i.scope,W=U===void 0?"":U,J=ie.useContext(A3),te=J.cache.instanceId,ae=J.container,ve=z._tokenKey,he=[].concat(on(i.path),[u,W,ve]),oe=HO(b7,he,function(){var me=a(),ge=A7(me,u,{prefix:m,unitless:M,ignore:L,scope:W}),de=sr(ge,2),ce=de[0],_e=de[1],Re=O7(he,_e);return[ce,_e,Re,u]},function(me){var ge=sr(me,3),de=ge[2];FP&&iC(de,{mark:Eh})},function(me){var ge=sr(me,3),de=ge[1],ce=ge[2];if(de){var _e=jd(de,ce,{mark:Eh,prepend:"queue",attachTo:ae,priority:-999});_e[Tm]=te,_e.setAttribute(ix,u)}});return oe},tJ=function(i,a,u){var m=sr(i,4),M=m[1],L=m[2],z=m[3],U=u||{},W=U.plain;if(!M)return null;var J=-999,te={"data-rc-order":"prependQueue","data-rc-priority":"".concat(J)},ae=ME(M,z,L,te,W);return[J,L,ae]},lw;lw={},_t(lw,D7,$K),_t(lw,C7,EK),_t(lw,b7,tJ);var Ca=function(){function t(i,a){hl(this,t),_t(this,"name",void 0),_t(this,"style",void 0),_t(this,"_keyframe",!0),this.name=i,this.style=a}return fl(t,[{key:"getName",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return a?"".concat(a,"-").concat(this.name):this.name}}]),t}();function m1(t){return t.notSplit=!0,t}m1(["borderTop","borderBottom"]),m1(["borderTop"]),m1(["borderBottom"]),m1(["borderLeft","borderRight"]),m1(["borderLeft"]),m1(["borderRight"]);var VO=ie.createContext({});function rJ(t){return d7(t)||u7(t)||BO(t)||p7()}function If(t,i){for(var a=t,u=0;u<i.length;u+=1){if(a==null)return;a=a[i[u]]}return a}function F7(t,i,a,u){if(!i.length)return a;var m=rJ(i),M=m[0],L=m.slice(1),z;return!t&&typeof M=="number"?z=[]:Array.isArray(t)?z=on(t):z=Ft({},t),u&&a===void 0&&L.length===1?delete z[M][L[0]]:z[M]=F7(z[M],L,a,u),z}function Ch(t,i,a){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return i.length&&u&&a===void 0&&!If(t,i.slice(0,-1))?t:F7(t,i,a,u)}function nJ(t){return ii(t)==="object"&&t!==null&&Object.getPrototypeOf(t)===Object.prototype}function yB(t){return Array.isArray(t)?[]:{}}var iJ=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function z1(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];var u=yB(i[0]);return i.forEach(function(m){function M(L,z){var U=new Set(z),W=If(m,L),J=Array.isArray(W);if(J||nJ(W)){if(!U.has(W)){U.add(W);var te=If(u,L);J?u=Ch(u,L,[]):(!te||ii(te)!=="object")&&(u=Ch(u,L,yB(W))),iJ(W).forEach(function(ae){M([].concat(on(L),[ae]),U)})}}else u=Ch(u,L,W)}M([])}),u}function oJ(){}const aJ=ie.createContext({}),WO=()=>{const t=()=>{};return t.deprecated=oJ,t},sJ=ie.createContext(void 0);var lJ={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},uJ={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};const N7={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},xB={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},uJ),timePickerLocale:Object.assign({},N7)},Eu="${label} is not a valid ${type}",_3={locale:"en",Pagination:lJ,DatePicker:xB,TimePicker:N7,Calendar:xB,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:Eu,method:Eu,array:Eu,object:Eu,number:Eu,date:Eu,boolean:Eu,integer:Eu,float:Eu,regexp:Eu,email:Eu,url:Eu,hex:Eu},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty"}};let zT=Object.assign({},_3.Modal),UT=[];const AB=()=>UT.reduce((t,i)=>Object.assign(Object.assign({},t),i),_3.Modal);function cJ(t){if(t){const i=Object.assign({},t);return UT.push(i),zT=AB(),()=>{UT=UT.filter(a=>a!==i),zT=AB()}}zT=Object.assign({},_3.Modal)}function Ice(){return zT}const B7=ie.createContext(void 0),hJ="internalMark",fJ=t=>{const{locale:i={},children:a,_ANT_MARK__:u}=t;ie.useEffect(()=>cJ(i&&i.Modal),[i]);const m=ie.useMemo(()=>Object.assign(Object.assign({},i),{exist:!0}),[i]);return ie.createElement(B7.Provider,{value:m},a)};function Bs(t,i){dJ(t)&&(t="100%");var a=pJ(t);return t=i===360?t:Math.min(i,Math.max(0,parseFloat(t))),a&&(t=parseInt(String(t*i),10)/100),Math.abs(t-i)<1e-6?1:(i===360?t=(t<0?t%i+i:t%i)/parseFloat(String(i)):t=t%i/parseFloat(String(i)),t)}function $S(t){return Math.min(1,Math.max(0,t))}function dJ(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function pJ(t){return typeof t=="string"&&t.indexOf("%")!==-1}function z7(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function eT(t){return t<=1?"".concat(Number(t)*100,"%"):t}function jv(t){return t.length===1?"0"+t:String(t)}function mJ(t,i,a){return{r:Bs(t,255)*255,g:Bs(i,255)*255,b:Bs(a,255)*255}}function wB(t,i,a){t=Bs(t,255),i=Bs(i,255),a=Bs(a,255);var u=Math.max(t,i,a),m=Math.min(t,i,a),M=0,L=0,z=(u+m)/2;if(u===m)L=0,M=0;else{var U=u-m;switch(L=z>.5?U/(2-u-m):U/(u+m),u){case t:M=(i-a)/U+(i<a?6:0);break;case i:M=(a-t)/U+2;break;case a:M=(t-i)/U+4;break}M/=6}return{h:M,s:L,l:z}}function QL(t,i,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?t+(i-t)*(6*a):a<1/2?i:a<2/3?t+(i-t)*(2/3-a)*6:t}function gJ(t,i,a){var u,m,M;if(t=Bs(t,360),i=Bs(i,100),a=Bs(a,100),i===0)m=a,M=a,u=a;else{var L=a<.5?a*(1+i):a+i-a*i,z=2*a-L;u=QL(z,L,t+1/3),m=QL(z,L,t),M=QL(z,L,t-1/3)}return{r:u*255,g:m*255,b:M*255}}function kP(t,i,a){t=Bs(t,255),i=Bs(i,255),a=Bs(a,255);var u=Math.max(t,i,a),m=Math.min(t,i,a),M=0,L=u,z=u-m,U=u===0?0:z/u;if(u===m)M=0;else{switch(u){case t:M=(i-a)/z+(i<a?6:0);break;case i:M=(a-t)/z+2;break;case a:M=(t-i)/z+4;break}M/=6}return{h:M,s:U,v:L}}function vJ(t,i,a){t=Bs(t,360)*6,i=Bs(i,100),a=Bs(a,100);var u=Math.floor(t),m=t-u,M=a*(1-i),L=a*(1-m*i),z=a*(1-(1-m)*i),U=u%6,W=[a,L,M,M,z,a][U],J=[z,a,a,L,M,M][U],te=[M,M,z,a,a,L][U];return{r:W*255,g:J*255,b:te*255}}function HP(t,i,a,u){var m=[jv(Math.round(t).toString(16)),jv(Math.round(i).toString(16)),jv(Math.round(a).toString(16))];return u&&m[0].startsWith(m[0].charAt(1))&&m[1].startsWith(m[1].charAt(1))&&m[2].startsWith(m[2].charAt(1))?m[0].charAt(0)+m[1].charAt(0)+m[2].charAt(0):m.join("")}function yJ(t,i,a,u,m){var M=[jv(Math.round(t).toString(16)),jv(Math.round(i).toString(16)),jv(Math.round(a).toString(16)),jv(xJ(u))];return m&&M[0].startsWith(M[0].charAt(1))&&M[1].startsWith(M[1].charAt(1))&&M[2].startsWith(M[2].charAt(1))&&M[3].startsWith(M[3].charAt(1))?M[0].charAt(0)+M[1].charAt(0)+M[2].charAt(0)+M[3].charAt(0):M.join("")}function xJ(t){return Math.round(parseFloat(t)*255).toString(16)}function CB(t){return Ru(t)/255}function Ru(t){return parseInt(t,16)}function AJ(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var jP={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function S1(t){var i={r:0,g:0,b:0},a=1,u=null,m=null,M=null,L=!1,z=!1;return typeof t=="string"&&(t=_J(t)),typeof t=="object"&&(Dd(t.r)&&Dd(t.g)&&Dd(t.b)?(i=mJ(t.r,t.g,t.b),L=!0,z=String(t.r).substr(-1)==="%"?"prgb":"rgb"):Dd(t.h)&&Dd(t.s)&&Dd(t.v)?(u=eT(t.s),m=eT(t.v),i=vJ(t.h,u,m),L=!0,z="hsv"):Dd(t.h)&&Dd(t.s)&&Dd(t.l)&&(u=eT(t.s),M=eT(t.l),i=gJ(t.h,u,M),L=!0,z="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(a=t.a)),a=z7(a),{ok:L,format:t.format||z,r:Math.min(255,Math.max(i.r,0)),g:Math.min(255,Math.max(i.g,0)),b:Math.min(255,Math.max(i.b,0)),a}}var wJ="[-\\+]?\\d+%?",CJ="[-\\+]?\\d*\\.\\d+%?",Em="(?:".concat(CJ,")|(?:").concat(wJ,")"),$L="[\\s|\\(]+(".concat(Em,")[,|\\s]+(").concat(Em,")[,|\\s]+(").concat(Em,")\\s*\\)?"),e5="[\\s|\\(]+(".concat(Em,")[,|\\s]+(").concat(Em,")[,|\\s]+(").concat(Em,")[,|\\s]+(").concat(Em,")\\s*\\)?"),xh={CSS_UNIT:new RegExp(Em),rgb:new RegExp("rgb"+$L),rgba:new RegExp("rgba"+e5),hsl:new RegExp("hsl"+$L),hsla:new RegExp("hsla"+e5),hsv:new RegExp("hsv"+$L),hsva:new RegExp("hsva"+e5),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function _J(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;var i=!1;if(jP[t])t=jP[t],i=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var a=xh.rgb.exec(t);return a?{r:a[1],g:a[2],b:a[3]}:(a=xh.rgba.exec(t),a?{r:a[1],g:a[2],b:a[3],a:a[4]}:(a=xh.hsl.exec(t),a?{h:a[1],s:a[2],l:a[3]}:(a=xh.hsla.exec(t),a?{h:a[1],s:a[2],l:a[3],a:a[4]}:(a=xh.hsv.exec(t),a?{h:a[1],s:a[2],v:a[3]}:(a=xh.hsva.exec(t),a?{h:a[1],s:a[2],v:a[3],a:a[4]}:(a=xh.hex8.exec(t),a?{r:Ru(a[1]),g:Ru(a[2]),b:Ru(a[3]),a:CB(a[4]),format:i?"name":"hex8"}:(a=xh.hex6.exec(t),a?{r:Ru(a[1]),g:Ru(a[2]),b:Ru(a[3]),format:i?"name":"hex"}:(a=xh.hex4.exec(t),a?{r:Ru(a[1]+a[1]),g:Ru(a[2]+a[2]),b:Ru(a[3]+a[3]),a:CB(a[4]+a[4]),format:i?"name":"hex8"}:(a=xh.hex3.exec(t),a?{r:Ru(a[1]+a[1]),g:Ru(a[2]+a[2]),b:Ru(a[3]+a[3]),format:i?"name":"hex"}:!1)))))))))}function Dd(t){return!!xh.CSS_UNIT.exec(String(t))}var bs=function(){function t(i,a){i===void 0&&(i=""),a===void 0&&(a={});var u;if(i instanceof t)return i;typeof i=="number"&&(i=AJ(i)),this.originalInput=i;var m=S1(i);this.originalInput=i,this.r=m.r,this.g=m.g,this.b=m.b,this.a=m.a,this.roundA=Math.round(100*this.a)/100,this.format=(u=a.format)!==null&&u!==void 0?u:m.format,this.gradientType=a.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=m.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var i=this.toRgb();return(i.r*299+i.g*587+i.b*114)/1e3},t.prototype.getLuminance=function(){var i=this.toRgb(),a,u,m,M=i.r/255,L=i.g/255,z=i.b/255;return M<=.03928?a=M/12.92:a=Math.pow((M+.055)/1.055,2.4),L<=.03928?u=L/12.92:u=Math.pow((L+.055)/1.055,2.4),z<=.03928?m=z/12.92:m=Math.pow((z+.055)/1.055,2.4),.2126*a+.7152*u+.0722*m},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(i){return this.a=z7(i),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){var i=this.toHsl().s;return i===0},t.prototype.toHsv=function(){var i=kP(this.r,this.g,this.b);return{h:i.h*360,s:i.s,v:i.v,a:this.a}},t.prototype.toHsvString=function(){var i=kP(this.r,this.g,this.b),a=Math.round(i.h*360),u=Math.round(i.s*100),m=Math.round(i.v*100);return this.a===1?"hsv(".concat(a,", ").concat(u,"%, ").concat(m,"%)"):"hsva(".concat(a,", ").concat(u,"%, ").concat(m,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var i=wB(this.r,this.g,this.b);return{h:i.h*360,s:i.s,l:i.l,a:this.a}},t.prototype.toHslString=function(){var i=wB(this.r,this.g,this.b),a=Math.round(i.h*360),u=Math.round(i.s*100),m=Math.round(i.l*100);return this.a===1?"hsl(".concat(a,", ").concat(u,"%, ").concat(m,"%)"):"hsla(".concat(a,", ").concat(u,"%, ").concat(m,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(i){return i===void 0&&(i=!1),HP(this.r,this.g,this.b,i)},t.prototype.toHexString=function(i){return i===void 0&&(i=!1),"#"+this.toHex(i)},t.prototype.toHex8=function(i){return i===void 0&&(i=!1),yJ(this.r,this.g,this.b,this.a,i)},t.prototype.toHex8String=function(i){return i===void 0&&(i=!1),"#"+this.toHex8(i)},t.prototype.toHexShortString=function(i){return i===void 0&&(i=!1),this.a===1?this.toHexString(i):this.toHex8String(i)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var i=Math.round(this.r),a=Math.round(this.g),u=Math.round(this.b);return this.a===1?"rgb(".concat(i,", ").concat(a,", ").concat(u,")"):"rgba(".concat(i,", ").concat(a,", ").concat(u,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var i=function(a){return"".concat(Math.round(Bs(a,255)*100),"%")};return{r:i(this.r),g:i(this.g),b:i(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var i=function(a){return Math.round(Bs(a,255)*100)};return this.a===1?"rgb(".concat(i(this.r),"%, ").concat(i(this.g),"%, ").concat(i(this.b),"%)"):"rgba(".concat(i(this.r),"%, ").concat(i(this.g),"%, ").concat(i(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var i="#"+HP(this.r,this.g,this.b,!1),a=0,u=Object.entries(jP);a<u.length;a++){var m=u[a],M=m[0],L=m[1];if(i===L)return M}return!1},t.prototype.toString=function(i){var a=!!i;i=i??this.format;var u=!1,m=this.a<1&&this.a>=0,M=!a&&m&&(i.startsWith("hex")||i==="name");return M?i==="name"&&this.a===0?this.toName():this.toRgbString():(i==="rgb"&&(u=this.toRgbString()),i==="prgb"&&(u=this.toPercentageRgbString()),(i==="hex"||i==="hex6")&&(u=this.toHexString()),i==="hex3"&&(u=this.toHexString(!0)),i==="hex4"&&(u=this.toHex8String(!0)),i==="hex8"&&(u=this.toHex8String()),i==="name"&&(u=this.toName()),i==="hsl"&&(u=this.toHslString()),i==="hsv"&&(u=this.toHsvString()),u||this.toHexString())},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(i){i===void 0&&(i=10);var a=this.toHsl();return a.l+=i/100,a.l=$S(a.l),new t(a)},t.prototype.brighten=function(i){i===void 0&&(i=10);var a=this.toRgb();return a.r=Math.max(0,Math.min(255,a.r-Math.round(255*-(i/100)))),a.g=Math.max(0,Math.min(255,a.g-Math.round(255*-(i/100)))),a.b=Math.max(0,Math.min(255,a.b-Math.round(255*-(i/100)))),new t(a)},t.prototype.darken=function(i){i===void 0&&(i=10);var a=this.toHsl();return a.l-=i/100,a.l=$S(a.l),new t(a)},t.prototype.tint=function(i){return i===void 0&&(i=10),this.mix("white",i)},t.prototype.shade=function(i){return i===void 0&&(i=10),this.mix("black",i)},t.prototype.desaturate=function(i){i===void 0&&(i=10);var a=this.toHsl();return a.s-=i/100,a.s=$S(a.s),new t(a)},t.prototype.saturate=function(i){i===void 0&&(i=10);var a=this.toHsl();return a.s+=i/100,a.s=$S(a.s),new t(a)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(i){var a=this.toHsl(),u=(a.h+i)%360;return a.h=u<0?360+u:u,new t(a)},t.prototype.mix=function(i,a){a===void 0&&(a=50);var u=this.toRgb(),m=new t(i).toRgb(),M=a/100,L={r:(m.r-u.r)*M+u.r,g:(m.g-u.g)*M+u.g,b:(m.b-u.b)*M+u.b,a:(m.a-u.a)*M+u.a};return new t(L)},t.prototype.analogous=function(i,a){i===void 0&&(i=6),a===void 0&&(a=30);var u=this.toHsl(),m=360/a,M=[this];for(u.h=(u.h-(m*i>>1)+720)%360;--i;)u.h=(u.h+m)%360,M.push(new t(u));return M},t.prototype.complement=function(){var i=this.toHsl();return i.h=(i.h+180)%360,new t(i)},t.prototype.monochromatic=function(i){i===void 0&&(i=6);for(var a=this.toHsv(),u=a.h,m=a.s,M=a.v,L=[],z=1/i;i--;)L.push(new t({h:u,s:m,v:M})),M=(M+z)%1;return L},t.prototype.splitcomplement=function(){var i=this.toHsl(),a=i.h;return[this,new t({h:(a+72)%360,s:i.s,l:i.l}),new t({h:(a+216)%360,s:i.s,l:i.l})]},t.prototype.onBackground=function(i){var a=this.toRgb(),u=new t(i).toRgb(),m=a.a+u.a*(1-a.a);return new t({r:(a.r*a.a+u.r*u.a*(1-a.a))/m,g:(a.g*a.a+u.g*u.a*(1-a.a))/m,b:(a.b*a.a+u.b*u.a*(1-a.a))/m,a:m})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(i){for(var a=this.toHsl(),u=a.h,m=[this],M=360/i,L=1;L<i;L++)m.push(new t({h:(u+L*M)%360,s:a.s,l:a.l}));return m},t.prototype.equals=function(i){return this.toRgbString()===new t(i).toRgbString()},t}(),tT=2,_B=.16,MJ=.05,SJ=.05,TJ=.15,U7=5,k7=4,EJ=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function MB(t){var i=t.r,a=t.g,u=t.b,m=kP(i,a,u);return{h:m.h*360,s:m.s,v:m.v}}function rT(t){var i=t.r,a=t.g,u=t.b;return"#".concat(HP(i,a,u,!1))}function IJ(t,i,a){var u=a/100,m={r:(i.r-t.r)*u+t.r,g:(i.g-t.g)*u+t.g,b:(i.b-t.b)*u+t.b};return m}function SB(t,i,a){var u;return Math.round(t.h)>=60&&Math.round(t.h)<=240?u=a?Math.round(t.h)-tT*i:Math.round(t.h)+tT*i:u=a?Math.round(t.h)+tT*i:Math.round(t.h)-tT*i,u<0?u+=360:u>=360&&(u-=360),u}function TB(t,i,a){if(t.h===0&&t.s===0)return t.s;var u;return a?u=t.s-_B*i:i===k7?u=t.s+_B:u=t.s+MJ*i,u>1&&(u=1),a&&i===U7&&u>.1&&(u=.1),u<.06&&(u=.06),Number(u.toFixed(2))}function EB(t,i,a){var u;return a?u=t.v+SJ*i:u=t.v-TJ*i,u>1&&(u=1),Number(u.toFixed(2))}function qd(t){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=[],u=S1(t),m=U7;m>0;m-=1){var M=MB(u),L=rT(S1({h:SB(M,m,!0),s:TB(M,m,!0),v:EB(M,m,!0)}));a.push(L)}a.push(rT(u));for(var z=1;z<=k7;z+=1){var U=MB(u),W=rT(S1({h:SB(U,z),s:TB(U,z),v:EB(U,z)}));a.push(W)}return i.theme==="dark"?EJ.map(function(J){var te=J.index,ae=J.opacity,ve=rT(IJ(S1(i.backgroundColor||"#141414"),S1(a[te]),ae*100));return ve}):a}var t5={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},kT={},r5={};Object.keys(t5).forEach(function(t){kT[t]=qd(t5[t]),kT[t].primary=kT[t][5],r5[t]=qd(t5[t],{theme:"dark",backgroundColor:"#141414"}),r5[t].primary=r5[t][5]});var RJ=kT.blue;const XO={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},ax=Object.assign(Object.assign({},XO),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0});function H7(t,i){let{generateColorPalettes:a,generateNeutralColorPalettes:u}=i;const{colorSuccess:m,colorWarning:M,colorError:L,colorInfo:z,colorPrimary:U,colorBgBase:W,colorTextBase:J}=t,te=a(U),ae=a(m),ve=a(M),he=a(L),oe=a(z),me=u(W,J),ge=t.colorLink||t.colorInfo,de=a(ge);return Object.assign(Object.assign({},me),{colorPrimaryBg:te[1],colorPrimaryBgHover:te[2],colorPrimaryBorder:te[3],colorPrimaryBorderHover:te[4],colorPrimaryHover:te[5],colorPrimary:te[6],colorPrimaryActive:te[7],colorPrimaryTextHover:te[8],colorPrimaryText:te[9],colorPrimaryTextActive:te[10],colorSuccessBg:ae[1],colorSuccessBgHover:ae[2],colorSuccessBorder:ae[3],colorSuccessBorderHover:ae[4],colorSuccessHover:ae[4],colorSuccess:ae[6],colorSuccessActive:ae[7],colorSuccessTextHover:ae[8],colorSuccessText:ae[9],colorSuccessTextActive:ae[10],colorErrorBg:he[1],colorErrorBgHover:he[2],colorErrorBgActive:he[3],colorErrorBorder:he[3],colorErrorBorderHover:he[4],colorErrorHover:he[5],colorError:he[6],colorErrorActive:he[7],colorErrorTextHover:he[8],colorErrorText:he[9],colorErrorTextActive:he[10],colorWarningBg:ve[1],colorWarningBgHover:ve[2],colorWarningBorder:ve[3],colorWarningBorderHover:ve[4],colorWarningHover:ve[4],colorWarning:ve[6],colorWarningActive:ve[7],colorWarningTextHover:ve[8],colorWarningText:ve[9],colorWarningTextActive:ve[10],colorInfoBg:oe[1],colorInfoBgHover:oe[2],colorInfoBorder:oe[3],colorInfoBorderHover:oe[4],colorInfoHover:oe[4],colorInfo:oe[6],colorInfoActive:oe[7],colorInfoTextHover:oe[8],colorInfoText:oe[9],colorInfoTextActive:oe[10],colorLinkHover:de[4],colorLink:de[6],colorLinkActive:de[7],colorBgMask:new bs("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}const LJ=t=>{let i=t,a=t,u=t,m=t;return t<6&&t>=5?i=t+1:t<16&&t>=6?i=t+2:t>=16&&(i=16),t<7&&t>=5?a=4:t<8&&t>=7?a=5:t<14&&t>=8?a=6:t<16&&t>=14?a=7:t>=16&&(a=8),t<6&&t>=2?u=1:t>=6&&(u=2),t>4&&t<8?m=4:t>=8&&(m=6),{borderRadius:t,borderRadiusXS:u,borderRadiusSM:a,borderRadiusLG:i,borderRadiusOuter:m}};function PJ(t){const{motionUnit:i,motionBase:a,borderRadius:u,lineWidth:m}=t;return Object.assign({motionDurationFast:`${(a+i).toFixed(1)}s`,motionDurationMid:`${(a+i*2).toFixed(1)}s`,motionDurationSlow:`${(a+i*3).toFixed(1)}s`,lineWidthBold:m+1},LJ(u))}const j7=t=>{const{controlHeight:i}=t;return{controlHeightSM:i*.75,controlHeightXS:i*.5,controlHeightLG:i*1.25}};function HT(t){return(t+8)/t}function OJ(t){const i=new Array(10).fill(null).map((a,u)=>{const m=u-1,M=t*Math.pow(2.71828,m/5),L=u>1?Math.floor(M):Math.ceil(M);return Math.floor(L/2)*2});return i[1]=t,i.map(a=>({size:a,lineHeight:HT(a)}))}const G7=t=>{const i=OJ(t),a=i.map(J=>J.size),u=i.map(J=>J.lineHeight),m=a[1],M=a[0],L=a[2],z=u[1],U=u[0],W=u[2];return{fontSizeSM:M,fontSize:m,fontSizeLG:L,fontSizeXL:a[3],fontSizeHeading1:a[6],fontSizeHeading2:a[5],fontSizeHeading3:a[4],fontSizeHeading4:a[3],fontSizeHeading5:a[2],lineHeight:z,lineHeightLG:W,lineHeightSM:U,fontHeight:Math.round(z*m),fontHeightLG:Math.round(W*L),fontHeightSM:Math.round(U*M),lineHeightHeading1:u[6],lineHeightHeading2:u[5],lineHeightHeading3:u[4],lineHeightHeading4:u[3],lineHeightHeading5:u[2]}};function DJ(t){const{sizeUnit:i,sizeStep:a}=t;return{sizeXXL:i*(a+8),sizeXL:i*(a+4),sizeLG:i*(a+2),sizeMD:i*(a+1),sizeMS:i*a,size:i*a,sizeSM:i*(a-1),sizeXS:i*(a-2),sizeXXS:i*(a-3)}}const bd=(t,i)=>new bs(t).setAlpha(i).toRgbString(),uw=(t,i)=>new bs(t).darken(i).toHexString(),bJ=t=>{const i=qd(t);return{1:i[0],2:i[1],3:i[2],4:i[3],5:i[4],6:i[5],7:i[6],8:i[4],9:i[5],10:i[6]}},FJ=(t,i)=>{const a=t||"#fff",u=i||"#000";return{colorBgBase:a,colorTextBase:u,colorText:bd(u,.88),colorTextSecondary:bd(u,.65),colorTextTertiary:bd(u,.45),colorTextQuaternary:bd(u,.25),colorFill:bd(u,.15),colorFillSecondary:bd(u,.06),colorFillTertiary:bd(u,.04),colorFillQuaternary:bd(u,.02),colorBgLayout:uw(a,4),colorBgContainer:uw(a,0),colorBgElevated:uw(a,0),colorBgSpotlight:bd(u,.85),colorBgBlur:"transparent",colorBorder:uw(a,15),colorBorderSecondary:uw(a,6)}};function SC(t){const i=Object.keys(XO).map(a=>{const u=qd(t[a]);return new Array(10).fill(1).reduce((m,M,L)=>(m[`${a}-${L+1}`]=u[L],m[`${a}${L+1}`]=u[L],m),{})}).reduce((a,u)=>(a=Object.assign(Object.assign({},a),u),a),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t),i),H7(t,{generateColorPalettes:bJ,generateNeutralColorPalettes:FJ})),G7(t.fontSize)),DJ(t)),j7(t)),PJ(t))}const V7=aC(SC),uC={token:ax,override:{override:ax},hashed:!0},W7=dr.createContext(uC),YO="anticon",NJ=(t,i)=>i||(t?`ant-${t}`:"ant"),lo=ie.createContext({getPrefixCls:NJ,iconPrefixCls:YO}),BJ=`-ant-${Date.now()}-${Math.random()}`;function zJ(t,i){const a={},u=(L,z)=>{let U=L.clone();return U=(z==null?void 0:z(U))||U,U.toRgbString()},m=(L,z)=>{const U=new bs(L),W=qd(U.toRgbString());a[`${z}-color`]=u(U),a[`${z}-color-disabled`]=W[1],a[`${z}-color-hover`]=W[4],a[`${z}-color-active`]=W[6],a[`${z}-color-outline`]=U.clone().setAlpha(.2).toRgbString(),a[`${z}-color-deprecated-bg`]=W[0],a[`${z}-color-deprecated-border`]=W[2]};if(i.primaryColor){m(i.primaryColor,"primary");const L=new bs(i.primaryColor),z=qd(L.toRgbString());z.forEach((W,J)=>{a[`primary-${J+1}`]=W}),a["primary-color-deprecated-l-35"]=u(L,W=>W.lighten(35)),a["primary-color-deprecated-l-20"]=u(L,W=>W.lighten(20)),a["primary-color-deprecated-t-20"]=u(L,W=>W.tint(20)),a["primary-color-deprecated-t-50"]=u(L,W=>W.tint(50)),a["primary-color-deprecated-f-12"]=u(L,W=>W.setAlpha(W.getAlpha()*.12));const U=new bs(z[0]);a["primary-color-active-deprecated-f-30"]=u(U,W=>W.setAlpha(W.getAlpha()*.3)),a["primary-color-active-deprecated-d-02"]=u(U,W=>W.darken(2))}return i.successColor&&m(i.successColor,"success"),i.warningColor&&m(i.warningColor,"warning"),i.errorColor&&m(i.errorColor,"error"),i.infoColor&&m(i.infoColor,"info"),`
  :root {
    ${Object.keys(a).map(L=>`--${t}-${L}: ${a[L]};`).join(`
`)}
  }
  `.trim()}function UJ(t,i){const a=zJ(t,i);Nu()&&jd(a,`${BJ}-dynamic-theme`)}const sx=ie.createContext(!1),kJ=t=>{let{children:i,disabled:a}=t;const u=ie.useContext(sx);return ie.createElement(sx.Provider,{value:a??u},i)},lx=ie.createContext(void 0),HJ=t=>{let{children:i,size:a}=t;const u=ie.useContext(lx);return ie.createElement(lx.Provider,{value:a||u},i)};function jJ(){const t=ie.useContext(sx),i=ie.useContext(lx);return{componentDisabled:t,componentSize:i}}const cC=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"],GJ="5.17.2";function n5(t){return t>=0&&t<=255}function nT(t,i){const{r:a,g:u,b:m,a:M}=new bs(t).toRgb();if(M<1)return t;const{r:L,g:z,b:U}=new bs(i).toRgb();for(let W=.01;W<=1;W+=.01){const J=Math.round((a-L*(1-W))/W),te=Math.round((u-z*(1-W))/W),ae=Math.round((m-U*(1-W))/W);if(n5(J)&&n5(te)&&n5(ae))return new bs({r:J,g:te,b:ae,a:Math.round(W*100)/100}).toRgbString()}return new bs({r:a,g:u,b:m,a:1}).toRgbString()}var VJ=function(t,i){var a={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&i.indexOf(u)<0&&(a[u]=t[u]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,u=Object.getOwnPropertySymbols(t);m<u.length;m++)i.indexOf(u[m])<0&&Object.prototype.propertyIsEnumerable.call(t,u[m])&&(a[u[m]]=t[u[m]]);return a};function ZO(t){const{override:i}=t,a=VJ(t,["override"]),u=Object.assign({},i);Object.keys(ax).forEach(ae=>{delete u[ae]});const m=Object.assign(Object.assign({},a),u),M=480,L=576,z=768,U=992,W=1200,J=1600;if(m.motion===!1){const ae="0s";m.motionDurationFast=ae,m.motionDurationMid=ae,m.motionDurationSlow=ae}return Object.assign(Object.assign(Object.assign({},m),{colorFillContent:m.colorFillSecondary,colorFillContentHover:m.colorFill,colorFillAlter:m.colorFillQuaternary,colorBgContainerDisabled:m.colorFillTertiary,colorBorderBg:m.colorBgContainer,colorSplit:nT(m.colorBorderSecondary,m.colorBgContainer),colorTextPlaceholder:m.colorTextQuaternary,colorTextDisabled:m.colorTextQuaternary,colorTextHeading:m.colorText,colorTextLabel:m.colorTextSecondary,colorTextDescription:m.colorTextTertiary,colorTextLightSolid:m.colorWhite,colorHighlight:m.colorError,colorBgTextHover:m.colorFillSecondary,colorBgTextActive:m.colorFill,colorIcon:m.colorTextTertiary,colorIconHover:m.colorText,colorErrorOutline:nT(m.colorErrorBg,m.colorBgContainer),colorWarningOutline:nT(m.colorWarningBg,m.colorBgContainer),fontSizeIcon:m.fontSizeSM,lineWidthFocus:m.lineWidth*4,lineWidth:m.lineWidth,controlOutlineWidth:m.lineWidth*2,controlInteractiveSize:m.controlHeight/2,controlItemBgHover:m.colorFillTertiary,controlItemBgActive:m.colorPrimaryBg,controlItemBgActiveHover:m.colorPrimaryBgHover,controlItemBgActiveDisabled:m.colorFill,controlTmpOutline:m.colorFillQuaternary,controlOutline:nT(m.colorPrimaryBg,m.colorBgContainer),lineType:m.lineType,borderRadius:m.borderRadius,borderRadiusXS:m.borderRadiusXS,borderRadiusSM:m.borderRadiusSM,borderRadiusLG:m.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:m.sizeXXS,paddingXS:m.sizeXS,paddingSM:m.sizeSM,padding:m.size,paddingMD:m.sizeMD,paddingLG:m.sizeLG,paddingXL:m.sizeXL,paddingContentHorizontalLG:m.sizeLG,paddingContentVerticalLG:m.sizeMS,paddingContentHorizontal:m.sizeMS,paddingContentVertical:m.sizeSM,paddingContentHorizontalSM:m.size,paddingContentVerticalSM:m.sizeXS,marginXXS:m.sizeXXS,marginXS:m.sizeXS,marginSM:m.sizeSM,margin:m.size,marginMD:m.sizeMD,marginLG:m.sizeLG,marginXL:m.sizeXL,marginXXL:m.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:M,screenXSMin:M,screenXSMax:L-1,screenSM:L,screenSMMin:L,screenSMMax:z-1,screenMD:z,screenMDMin:z,screenMDMax:U-1,screenLG:U,screenLGMin:U,screenLGMax:W-1,screenXL:W,screenXLMin:W,screenXLMax:J-1,screenXXL:J,screenXXLMin:J,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new bs("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new bs("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new bs("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),u)}var IB=function(t,i){var a={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&i.indexOf(u)<0&&(a[u]=t[u]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,u=Object.getOwnPropertySymbols(t);m<u.length;m++)i.indexOf(u[m])<0&&Object.prototype.propertyIsEnumerable.call(t,u[m])&&(a[u[m]]=t[u[m]]);return a};const X7={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0},Y7={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},WJ={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},Z7=(t,i,a)=>{const u=a.getDerivativeToken(t),{override:m}=i,M=IB(i,["override"]);let L=Object.assign(Object.assign({},u),{override:m});return L=ZO(L),M&&Object.entries(M).forEach(z=>{let[U,W]=z;const{theme:J}=W,te=IB(W,["theme"]);let ae=te;J&&(ae=Z7(Object.assign(Object.assign({},L),te),{override:te},J)),L[U]=ae}),L};function Ec(){const{token:t,hashed:i,theme:a,override:u,cssVar:m}=dr.useContext(W7),M=`${GJ}-${i||""}`,L=a||V7,[z,U,W]=TK(L,[ax,t],{salt:M,override:u,getComputedToken:Z7,formatToken:ZO,cssVar:m&&{prefix:m.prefix,key:m.key,unitless:X7,ignore:Y7,preserve:WJ}});return[L,W,i?U:"",z,m]}function q7(t,i,a){return i=r0(i),l7(t,y3()?Reflect.construct(i,[],r0(t).constructor):i.apply(t,a))}let K7=fl(function t(){hl(this,t)});const J7="CALC_UNIT",XJ=new RegExp(J7,"g");function i5(t){return typeof t=="number"?`${t}${J7}`:t}let YJ=function(t){function i(a){var u;return hl(this,i),u=q7(this,i),u.result="",a instanceof i?u.result=`(${a.result})`:typeof a=="number"?u.result=i5(a):typeof a=="string"&&(u.result=a),u}return Ym(i,t),fl(i,[{key:"add",value:function(u){return u instanceof i?this.result=`${this.result} + ${u.getResult()}`:(typeof u=="number"||typeof u=="string")&&(this.result=`${this.result} + ${i5(u)}`),this.lowPriority=!0,this}},{key:"sub",value:function(u){return u instanceof i?this.result=`${this.result} - ${u.getResult()}`:(typeof u=="number"||typeof u=="string")&&(this.result=`${this.result} - ${i5(u)}`),this.lowPriority=!0,this}},{key:"mul",value:function(u){return this.lowPriority&&(this.result=`(${this.result})`),u instanceof i?this.result=`${this.result} * ${u.getResult(!0)}`:(typeof u=="number"||typeof u=="string")&&(this.result=`${this.result} * ${u}`),this.lowPriority=!1,this}},{key:"div",value:function(u){return this.lowPriority&&(this.result=`(${this.result})`),u instanceof i?this.result=`${this.result} / ${u.getResult(!0)}`:(typeof u=="number"||typeof u=="string")&&(this.result=`${this.result} / ${u}`),this.lowPriority=!1,this}},{key:"getResult",value:function(u){return this.lowPriority||u?`(${this.result})`:this.result}},{key:"equal",value:function(u){const{unit:m=!0}=u||{};return this.result=this.result.replace(XJ,m?"px":""),typeof this.lowPriority<"u"?`calc(${this.result})`:this.result}}])}(K7),ZJ=function(t){function i(a){var u;return hl(this,i),u=q7(this,i),u.result=0,a instanceof i?u.result=a.result:typeof a=="number"&&(u.result=a),u}return Ym(i,t),fl(i,[{key:"add",value:function(u){return u instanceof i?this.result+=u.result:typeof u=="number"&&(this.result+=u),this}},{key:"sub",value:function(u){return u instanceof i?this.result-=u.result:typeof u=="number"&&(this.result-=u),this}},{key:"mul",value:function(u){return u instanceof i?this.result*=u.result:typeof u=="number"&&(this.result*=u),this}},{key:"div",value:function(u){return u instanceof i?this.result/=u.result:typeof u=="number"&&(this.result/=u),this}},{key:"equal",value:function(){return this.result}}])}(K7);const qJ=t=>{const i=t==="css"?YJ:ZJ;return a=>new i(a)};function Tl(t){var i=ie.useRef();i.current=t;var a=ie.useCallback(function(){for(var u,m=arguments.length,M=new Array(m),L=0;L<m;L++)M[L]=arguments[L];return(u=i.current)===null||u===void 0?void 0:u.call.apply(u,[i].concat(M))},[]);return a}function Z1(t){var i=ie.useRef(!1),a=ie.useState(t),u=sr(a,2),m=u[0],M=u[1];ie.useEffect(function(){return i.current=!1,function(){i.current=!0}},[]);function L(z,U){U&&i.current||M(z)}return[m,L]}function o5(t){return t!==void 0}function Gd(t,i){var a=i||{},u=a.defaultValue,m=a.value,M=a.onChange,L=a.postState,z=Z1(function(){return o5(m)?m:o5(u)?typeof u=="function"?u():u:typeof t=="function"?t():t}),U=sr(z,2),W=U[0],J=U[1],te=m!==void 0?m:W,ae=L?L(te):te,ve=Tl(M),he=Z1([te]),oe=sr(he,2),me=oe[0],ge=oe[1];dB(function(){var ce=me[0];W!==ce&&ve(W,ce)},[me]),dB(function(){o5(m)||J(m)},[m]);var de=Tl(function(ce,_e){J(ce,_e),ge([te],_e)});return[ae,de]}const KJ={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},c0=function(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:t.colorText,fontSize:t.fontSize,lineHeight:t.lineHeight,listStyle:"none",fontFamily:i?"inherit":t.fontFamily}},Q7=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),GP=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),JJ=t=>({a:{color:t.colorLink,textDecoration:t.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${t.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:t.colorLinkHover},"&:active":{color:t.colorLinkActive},"&:active,\n  &:hover":{textDecoration:t.linkHoverDecoration,outline:0},"&:focus":{textDecoration:t.linkFocusDecoration,outline:0},"&[disabled]":{color:t.colorTextDisabled,cursor:"not-allowed"}}}),QJ=(t,i,a,u)=>{const m=`[class^="${i}"], [class*=" ${i}"]`,M=a?`.${a}`:m,L={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let z={};return u!==!1&&(z={fontFamily:t.fontFamily,fontSize:t.fontSize}),{[M]:Object.assign(Object.assign(Object.assign({},z),L),{[m]:L})}},$7=t=>({outline:`${pn(t.lineWidthFocus)} solid ${t.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),$J=t=>({"&:focus-visible":Object.assign({},$7(t))});function eQ(t){return t==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return`max(${a.map(m=>pn(m)).join(",")})`},min:function(){for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return`min(${a.map(m=>pn(m)).join(",")})`}}}const e9=typeof CSSINJS_STATISTIC<"u";let VP=!0;function _s(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];if(!e9)return Object.assign.apply(Object,[{}].concat(i));VP=!1;const u={};return i.forEach(m=>{Object.keys(m).forEach(L=>{Object.defineProperty(u,L,{configurable:!0,enumerable:!0,get:()=>m[L]})})}),VP=!0,u}const RB={};function tQ(){}const rQ=t=>{let i,a=t,u=tQ;return e9&&typeof Proxy<"u"&&(i=new Set,a=new Proxy(t,{get(m,M){return VP&&i.add(M),m[M]}}),u=(m,M)=>{var L;RB[m]={global:Array.from(i),component:Object.assign(Object.assign({},(L=RB[m])===null||L===void 0?void 0:L.component),M)}}),{token:a,keys:i,flush:u}},t9=(t,i)=>{const[a,u]=Ec();return UP({theme:a,token:u,hashId:"",path:["ant-design-icons",t],nonce:()=>i==null?void 0:i.nonce,layer:{name:"antd"}},()=>[{[`.${t}`]:Object.assign(Object.assign({},Q7()),{[`.${t} .${t}-icon`]:{display:"block"}})}])},r9=(t,i,a)=>{var u;return typeof a=="function"?a(_s(i,(u=i[t])!==null&&u!==void 0?u:{})):a??{}},n9=(t,i,a,u)=>{const m=Object.assign({},i[t]);if(u!=null&&u.deprecatedTokens){const{deprecatedTokens:L}=u;L.forEach(z=>{let[U,W]=z;var J;(m!=null&&m[U]||m!=null&&m[W])&&((J=m[W])!==null&&J!==void 0||(m[W]=m==null?void 0:m[U]))})}const M=Object.assign(Object.assign({},a),m);return Object.keys(M).forEach(L=>{M[L]===i[L]&&delete M[L]}),M},nQ=(t,i)=>`${[i,t.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-")}`;function qO(t,i,a){let u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const m=Array.isArray(t)?t:[t,t],[M]=m,L=m.join("-");return function(z){let U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:z;const[W,J,te,ae,ve]=Ec(),{getPrefixCls:he,iconPrefixCls:oe,csp:me}=ie.useContext(lo),ge=he(),de=ve?"css":"js",ce=qJ(de),{max:_e,min:Re}=eQ(de),Ee={theme:W,token:ae,hashId:te,nonce:()=>me==null?void 0:me.nonce,clientOnly:u.clientOnly,layer:{name:"antd"},order:u.order||-999};return UP(Object.assign(Object.assign({},Ee),{clientOnly:!1,path:["Shared",ge]}),()=>[{"&":JJ(ae)}]),t9(oe,me),[UP(Object.assign(Object.assign({},Ee),{path:[L,z,oe]}),()=>{if(u.injectStyle===!1)return[];const{token:We,flush:Xe}=rQ(ae),et=r9(M,J,a),Ye=`.${z}`,at=n9(M,J,et,{deprecatedTokens:u.deprecatedTokens});ve&&Object.keys(et).forEach(Dt=>{et[Dt]=`var(${x7(Dt,nQ(M,ve.prefix))})`});const ot=_s(We,{componentCls:Ye,prefixCls:z,iconCls:`.${oe}`,antCls:`.${ge}`,calc:ce,max:_e,min:Re},ve?et:at),ct=i(ot,{hashId:te,prefixCls:z,rootPrefixCls:ge,iconPrefixCls:oe});return Xe(M,at),[u.resetStyle===!1?null:QJ(ot,z,U,u.resetFont),ct]}),te]}}const iQ=(t,i,a,u)=>{const m=qO(t,i,a,Object.assign({resetStyle:!1,order:-998},u));return L=>{let{prefixCls:z,rootCls:U=z}=L;return m(z,U),null}},oQ=(t,i,a)=>{function u(W){return`${t}${W.slice(0,1).toUpperCase()}${W.slice(1)}`}const{unitless:m={},injectStyle:M=!0}=a??{},L={[u("zIndexPopup")]:!0};Object.keys(m).forEach(W=>{L[u(W)]=m[W]});const z=W=>{let{rootCls:J,cssVar:te}=W;const[,ae]=Ec();return eJ({path:[t],prefix:te.prefix,key:te==null?void 0:te.key,unitless:Object.assign(Object.assign({},X7),L),ignore:Y7,token:ae,scope:J},()=>{const ve=r9(t,ae,i),he=n9(t,ae,ve,{deprecatedTokens:a==null?void 0:a.deprecatedTokens});return Object.keys(ve).forEach(oe=>{he[u(oe)]=he[oe],delete he[oe]}),he}),null};return W=>{const[,,,,J]=Ec();return[te=>M&&J?dr.createElement(dr.Fragment,null,dr.createElement(z,{rootCls:W,cssVar:J,component:t}),te):te,J==null?void 0:J.key]}},Df=(t,i,a,u)=>{const m=qO(t,i,a,u),M=oQ(Array.isArray(t)?t[0]:t,a,u);return function(L){let z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:L;const[,U]=m(L,z),[W,J]=M(z);return[W,U,J]}};function aQ(t,i){return cC.reduce((a,u)=>{const m=t[`${u}1`],M=t[`${u}3`],L=t[`${u}6`],z=t[`${u}7`];return Object.assign(Object.assign({},a),i(u,{lightColor:m,lightBorderColor:M,darkColor:L,textColor:z}))},{})}const sQ=Object.assign({},Kv),{useId:LB}=sQ,lQ=()=>"",uQ=typeof LB>"u"?lQ:LB;function cQ(t,i,a){var u;WO();const m=t||{},M=m.inherit===!1||!i?Object.assign(Object.assign({},uC),{hashed:(u=i==null?void 0:i.hashed)!==null&&u!==void 0?u:uC.hashed,cssVar:i==null?void 0:i.cssVar}):i,L=uQ();return g3(()=>{var z,U;if(!t)return i;const W=Object.assign({},M.components);Object.keys(t.components||{}).forEach(ae=>{W[ae]=Object.assign(Object.assign({},W[ae]),t.components[ae])});const J=`css-var-${L.replace(/:/g,"")}`,te=((z=m.cssVar)!==null&&z!==void 0?z:M.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:a==null?void 0:a.prefixCls},typeof M.cssVar=="object"?M.cssVar:{}),typeof m.cssVar=="object"?m.cssVar:{}),{key:typeof m.cssVar=="object"&&((U=m.cssVar)===null||U===void 0?void 0:U.key)||J});return Object.assign(Object.assign(Object.assign({},M),m),{token:Object.assign(Object.assign({},M.token),m.token),components:W,cssVar:te})},[m,M],(z,U)=>z.some((W,J)=>{const te=U[J];return!oC(W,te,!0)}))}var hQ=["children"],i9=ie.createContext({});function fQ(t){var i=t.children,a=Qi(t,hQ);return ie.createElement(i9.Provider,{value:a},i)}var dQ=function(t){Ym(a,t);var i=gx(a);function a(){return hl(this,a),i.apply(this,arguments)}return fl(a,[{key:"render",value:function(){return this.props.children}}]),a}(ie.Component),ym="none",iT="appear",oT="enter",aT="leave",PB="none",_h="prepare",U1="start",k1="active",KO="end",o9="prepared";function OB(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit".concat(t)]="webkit".concat(i),a["Moz".concat(t)]="moz".concat(i),a["ms".concat(t)]="MS".concat(i),a["O".concat(t)]="o".concat(i.toLowerCase()),a}function pQ(t,i){var a={animationend:OB("Animation","AnimationEnd"),transitionend:OB("Transition","TransitionEnd")};return t&&("AnimationEvent"in i||delete a.animationend.animation,"TransitionEvent"in i||delete a.transitionend.transition),a}var mQ=pQ(Nu(),typeof window<"u"?window:{}),a9={};if(Nu()){var gQ=document.createElement("div");a9=gQ.style}var sT={};function s9(t){if(sT[t])return sT[t];var i=mQ[t];if(i)for(var a=Object.keys(i),u=a.length,m=0;m<u;m+=1){var M=a[m];if(Object.prototype.hasOwnProperty.call(i,M)&&M in a9)return sT[t]=i[M],sT[t]}return""}var l9=s9("animationend"),u9=s9("transitionend"),c9=!!(l9&&u9),DB=l9||"animationend",bB=u9||"transitionend";function FB(t,i){if(!t)return null;if(ii(t)==="object"){var a=i.replace(/-\w/g,function(u){return u[1].toUpperCase()});return t[a]}return"".concat(t,"-").concat(i)}const vQ=function(t){var i=ie.useRef();function a(m){m&&(m.removeEventListener(bB,t),m.removeEventListener(DB,t))}function u(m){i.current&&i.current!==m&&a(i.current),m&&m!==i.current&&(m.addEventListener(bB,t),m.addEventListener(DB,t),i.current=m)}return ie.useEffect(function(){return function(){a(i.current)}},[]),[u,a]};var h9=Nu()?ie.useLayoutEffect:ie.useEffect;const yQ=function(){var t=ie.useRef(null);function i(){ul.cancel(t.current)}function a(u){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;i();var M=ul(function(){m<=1?u({isCanceled:function(){return M!==t.current}}):a(u,m-1)});t.current=M}return ie.useEffect(function(){return function(){i()}},[]),[a,i]};var xQ=[_h,U1,k1,KO],AQ=[_h,o9],f9=!1,wQ=!0;function d9(t){return t===k1||t===KO}const CQ=function(t,i,a){var u=Z1(PB),m=sr(u,2),M=m[0],L=m[1],z=yQ(),U=sr(z,2),W=U[0],J=U[1];function te(){L(_h,!0)}var ae=i?AQ:xQ;return h9(function(){if(M!==PB&&M!==KO){var ve=ae.indexOf(M),he=ae[ve+1],oe=a(M);oe===f9?L(he,!0):he&&W(function(me){function ge(){me.isCanceled()||L(he,!0)}oe===!0?ge():Promise.resolve(oe).then(ge)})}},[t,M]),ie.useEffect(function(){return function(){J()}},[]),[te,M]};function _Q(t,i,a,u){var m=u.motionEnter,M=m===void 0?!0:m,L=u.motionAppear,z=L===void 0?!0:L,U=u.motionLeave,W=U===void 0?!0:U,J=u.motionDeadline,te=u.motionLeaveImmediately,ae=u.onAppearPrepare,ve=u.onEnterPrepare,he=u.onLeavePrepare,oe=u.onAppearStart,me=u.onEnterStart,ge=u.onLeaveStart,de=u.onAppearActive,ce=u.onEnterActive,_e=u.onLeaveActive,Re=u.onAppearEnd,Ee=u.onEnterEnd,De=u.onLeaveEnd,We=u.onVisibleChanged,Xe=Z1(),et=sr(Xe,2),Ye=et[0],at=et[1],ot=Z1(ym),ct=sr(ot,2),Dt=ct[0],$e=ct[1],tt=Z1(null),Ve=sr(tt,2),gt=Ve[0],mt=Ve[1],dt=ie.useRef(!1),At=ie.useRef(null);function jt(){return a()}var ar=ie.useRef(!1);function Ht(){$e(ym,!0),mt(null,!0)}var Rt=Tl(function(lr){if(Dt!==ym){var er=jt();if(!(lr&&!lr.deadline&&lr.target!==er)){var cn=ar.current,oi;Dt===iT&&cn?oi=Re==null?void 0:Re(er,lr):Dt===oT&&cn?oi=Ee==null?void 0:Ee(er,lr):Dt===aT&&cn&&(oi=De==null?void 0:De(er,lr)),cn&&oi!==!1&&Ht()}}}),pr=vQ(Rt),Cr=sr(pr,1),Ir=Cr[0],Ut=function(er){switch(er){case iT:return _t(_t(_t({},_h,ae),U1,oe),k1,de);case oT:return _t(_t(_t({},_h,ve),U1,me),k1,ce);case aT:return _t(_t(_t({},_h,he),U1,ge),k1,_e);default:return{}}},_r=ie.useMemo(function(){return Ut(Dt)},[Dt]),Bn=CQ(Dt,!t,function(lr){if(lr===_h){var er=_r[_h];return er?er(jt()):f9}if(jn in _r){var cn;mt(((cn=_r[jn])===null||cn===void 0?void 0:cn.call(_r,jt(),null))||null)}return jn===k1&&Dt!==ym&&(Ir(jt()),J>0&&(clearTimeout(At.current),At.current=setTimeout(function(){Rt({deadline:!0})},J))),jn===o9&&Ht(),wQ}),bn=sr(Bn,2),ur=bn[0],jn=bn[1],An=d9(jn);ar.current=An,h9(function(){at(i);var lr=dt.current;dt.current=!0;var er;!lr&&i&&z&&(er=iT),lr&&i&&M&&(er=oT),(lr&&!i&&W||!lr&&te&&!i&&W)&&(er=aT);var cn=Ut(er);er&&(t||cn[_h])?($e(er),ur()):$e(ym)},[i]),ie.useEffect(function(){(Dt===iT&&!z||Dt===oT&&!M||Dt===aT&&!W)&&$e(ym)},[z,M,W]),ie.useEffect(function(){return function(){dt.current=!1,clearTimeout(At.current)}},[]);var en=ie.useRef(!1);ie.useEffect(function(){Ye&&(en.current=!0),Ye!==void 0&&Dt===ym&&((en.current||Ye)&&(We==null||We(Ye)),en.current=!0)},[Ye,Dt]);var Fn=gt;return _r[_h]&&jn===U1&&(Fn=Ft({transition:"none"},Fn)),[Dt,jn,Fn,Ye??i]}function MQ(t){var i=t;ii(t)==="object"&&(i=t.transitionSupport);function a(m,M){return!!(m.motionName&&i&&M!==!1)}var u=ie.forwardRef(function(m,M){var L=m.visible,z=L===void 0?!0:L,U=m.removeOnLeave,W=U===void 0?!0:U,J=m.forceRender,te=m.children,ae=m.motionName,ve=m.leavedClassName,he=m.eventProps,oe=ie.useContext(i9),me=oe.motion,ge=a(m,me),de=ie.useRef(),ce=ie.useRef();function _e(){try{return de.current instanceof HTMLElement?de.current:DT(ce.current)}catch{return null}}var Re=_Q(ge,z,_e,m),Ee=sr(Re,4),De=Ee[0],We=Ee[1],Xe=Ee[2],et=Ee[3],Ye=ie.useRef(et);et&&(Ye.current=!0);var at=ie.useCallback(function(gt){de.current=gt,NO(M,gt)},[M]),ot,ct=Ft(Ft({},he),{},{visible:z});if(!te)ot=null;else if(De===ym)et?ot=te(Ft({},ct),at):!W&&Ye.current&&ve?ot=te(Ft(Ft({},ct),{},{className:ve}),at):J||!W&&!ve?ot=te(Ft(Ft({},ct),{},{style:{display:"none"}}),at):ot=null;else{var Dt;We===_h?Dt="prepare":d9(We)?Dt="active":We===U1&&(Dt="start");var $e=FB(ae,"".concat(De,"-").concat(Dt));ot=te(Ft(Ft({},ct),{},{className:mr(FB(ae,De),_t(_t({},$e,$e&&Dt),ae,typeof ae=="string")),style:Xe}),at)}if(ie.isValidElement(ot)&&mx(ot)){var tt=ot,Ve=tt.ref;Ve||(ot=ie.cloneElement(ot,{ref:at}))}return ie.createElement(dQ,{ref:ce},ot)});return u.displayName="CSSMotion",u}const yx=MQ(c9);var WP="add",XP="keep",YP="remove",a5="removed";function SQ(t){var i;return t&&ii(t)==="object"&&"key"in t?i=t:i={key:t},Ft(Ft({},i),{},{key:String(i.key)})}function ZP(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return t.map(SQ)}function TQ(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=[],u=0,m=i.length,M=ZP(t),L=ZP(i);M.forEach(function(W){for(var J=!1,te=u;te<m;te+=1){var ae=L[te];if(ae.key===W.key){u<te&&(a=a.concat(L.slice(u,te).map(function(ve){return Ft(Ft({},ve),{},{status:WP})})),u=te),a.push(Ft(Ft({},ae),{},{status:XP})),u+=1,J=!0;break}}J||a.push(Ft(Ft({},W),{},{status:YP}))}),u<m&&(a=a.concat(L.slice(u).map(function(W){return Ft(Ft({},W),{},{status:WP})})));var z={};a.forEach(function(W){var J=W.key;z[J]=(z[J]||0)+1});var U=Object.keys(z).filter(function(W){return z[W]>1});return U.forEach(function(W){a=a.filter(function(J){var te=J.key,ae=J.status;return te!==W||ae!==YP}),a.forEach(function(J){J.key===W&&(J.status=XP)})}),a}var EQ=["component","children","onVisibleChanged","onAllRemoved"],IQ=["status"],RQ=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function LQ(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yx,a=function(u){Ym(M,u);var m=gx(M);function M(){var L;hl(this,M);for(var z=arguments.length,U=new Array(z),W=0;W<z;W++)U[W]=arguments[W];return L=m.call.apply(m,[this].concat(U)),_t(Bi(L),"state",{keyEntities:[]}),_t(Bi(L),"removeKey",function(J){var te=L.state.keyEntities,ae=te.map(function(ve){return ve.key!==J?ve:Ft(Ft({},ve),{},{status:a5})});return L.setState({keyEntities:ae}),ae.filter(function(ve){var he=ve.status;return he!==a5}).length}),L}return fl(M,[{key:"render",value:function(){var z=this,U=this.state.keyEntities,W=this.props,J=W.component,te=W.children,ae=W.onVisibleChanged,ve=W.onAllRemoved,he=Qi(W,EQ),oe=J||ie.Fragment,me={};return RQ.forEach(function(ge){me[ge]=he[ge],delete he[ge]}),delete he.keys,ie.createElement(oe,he,U.map(function(ge,de){var ce=ge.status,_e=Qi(ge,IQ),Re=ce===WP||ce===XP;return ie.createElement(i,Sn({},me,{key:_e.key,visible:Re,eventProps:_e,onVisibleChanged:function(De){if(ae==null||ae(De,{key:_e.key}),!De){var We=z.removeKey(_e.key);We===0&&ve&&ve()}}}),function(Ee,De){return te(Ft(Ft({},Ee),{},{index:de}),De)})}))}}],[{key:"getDerivedStateFromProps",value:function(z,U){var W=z.keys,J=U.keyEntities,te=ZP(W),ae=TQ(J,te);return{keyEntities:ae.filter(function(ve){var he=J.find(function(oe){var me=oe.key;return ve.key===me});return!(he&&he.status===a5&&ve.status===YP)})}}}]),M}(ie.Component);return _t(a,"defaultProps",{component:"div"}),a}const PQ=LQ(c9);function OQ(t){const{children:i}=t,[,a]=Ec(),{motion:u}=a,m=ie.useRef(!1);return m.current=m.current||u===!1,m.current?ie.createElement(fQ,{motion:u},i):i}const DQ=()=>null;var bQ=function(t,i){var a={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&i.indexOf(u)<0&&(a[u]=t[u]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,u=Object.getOwnPropertySymbols(t);m<u.length;m++)i.indexOf(u[m])<0&&Object.prototype.propertyIsEnumerable.call(t,u[m])&&(a[u[m]]=t[u[m]]);return a};const FQ=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"],NQ="ant";let SE,p9,m9,g9;function jT(){return SE||NQ}function BQ(){return p9||YO}function zQ(t){return Object.keys(t).some(i=>i.endsWith("Color"))}const UQ=t=>{const{prefixCls:i,iconPrefixCls:a,theme:u,holderRender:m}=t;i!==void 0&&(SE=i),a!==void 0&&(p9=a),"holderRender"in t&&(g9=m),u&&(zQ(u)?UJ(jT(),u):m9=u)},kQ=()=>({getPrefixCls:(t,i)=>i||(t?`${jT()}-${t}`:jT()),getIconPrefixCls:BQ,getRootPrefixCls:()=>SE||jT(),getTheme:()=>m9,holderRender:g9}),HQ=t=>{const{children:i,csp:a,autoInsertSpaceInButton:u,alert:m,anchor:M,form:L,locale:z,componentSize:U,direction:W,space:J,virtual:te,dropdownMatchSelectWidth:ae,popupMatchSelectWidth:ve,popupOverflow:he,legacyLocale:oe,parentContext:me,iconPrefixCls:ge,theme:de,componentDisabled:ce,segmented:_e,statistic:Re,spin:Ee,calendar:De,carousel:We,cascader:Xe,collapse:et,typography:Ye,checkbox:at,descriptions:ot,divider:ct,drawer:Dt,skeleton:$e,steps:tt,image:Ve,layout:gt,list:mt,mentions:dt,modal:At,progress:jt,result:ar,slider:Ht,breadcrumb:Rt,menu:pr,pagination:Cr,input:Ir,textArea:Ut,empty:_r,badge:Bn,radio:bn,rate:ur,switch:jn,transfer:An,avatar:en,message:Fn,tag:lr,table:er,card:cn,tabs:oi,timeline:xn,timePicker:qn,upload:Dn,notification:mn,tree:pi,colorPicker:ui,datePicker:hn,rangePicker:Kn,flex:$i,wave:ji,dropdown:_a,warning:ro,tour:bi,floatButtonGroup:us}=t,Ao=ie.useCallback((nn,Gn)=>{const{prefixCls:Wi}=t;if(Gn)return Gn;const Co=Wi||me.getPrefixCls("");return nn?`${Co}-${nn}`:Co},[me.getPrefixCls,t.prefixCls]),Gi=ge||me.iconPrefixCls||YO,Vi=a||me.csp;t9(Gi,Vi);const zi=cQ(de,me.theme,{prefixCls:Ao("")}),To={csp:Vi,autoInsertSpaceInButton:u,alert:m,anchor:M,locale:z||oe,direction:W,space:J,virtual:te,popupMatchSelectWidth:ve??ae,popupOverflow:he,getPrefixCls:Ao,iconPrefixCls:Gi,theme:zi,segmented:_e,statistic:Re,spin:Ee,calendar:De,carousel:We,cascader:Xe,collapse:et,typography:Ye,checkbox:at,descriptions:ot,divider:ct,drawer:Dt,skeleton:$e,steps:tt,image:Ve,input:Ir,textArea:Ut,layout:gt,list:mt,mentions:dt,modal:At,progress:jt,result:ar,slider:Ht,breadcrumb:Rt,menu:pr,pagination:Cr,empty:_r,badge:Bn,radio:bn,rate:ur,switch:jn,transfer:An,avatar:en,message:Fn,tag:lr,table:er,card:cn,tabs:oi,timeline:xn,timePicker:qn,upload:Dn,notification:mn,tree:pi,colorPicker:ui,datePicker:hn,rangePicker:Kn,flex:$i,wave:ji,dropdown:_a,warning:ro,tour:bi,floatButtonGroup:us},wo=Object.assign({},me);Object.keys(To).forEach(nn=>{To[nn]!==void 0&&(wo[nn]=To[nn])}),FQ.forEach(nn=>{const Gn=t[nn];Gn&&(wo[nn]=Gn)}),typeof u<"u"&&(wo.button=Object.assign({autoInsertSpace:u},wo.button));const _i=g3(()=>wo,wo,(nn,Gn)=>{const Wi=Object.keys(nn),Co=Object.keys(Gn);return Wi.length!==Co.length||Wi.some(Ja=>nn[Ja]!==Gn[Ja])}),ti=ie.useMemo(()=>({prefixCls:Gi,csp:Vi}),[Gi,Vi]);let wn=ie.createElement(ie.Fragment,null,ie.createElement(DQ,{dropdownMatchSelectWidth:ae}),i);const Ui=ie.useMemo(()=>{var nn,Gn,Wi,Co;return z1(((nn=_3.Form)===null||nn===void 0?void 0:nn.defaultValidateMessages)||{},((Wi=(Gn=_i.locale)===null||Gn===void 0?void 0:Gn.Form)===null||Wi===void 0?void 0:Wi.defaultValidateMessages)||{},((Co=_i.form)===null||Co===void 0?void 0:Co.validateMessages)||{},(L==null?void 0:L.validateMessages)||{})},[_i,L==null?void 0:L.validateMessages]);Object.keys(Ui).length>0&&(wn=ie.createElement(sJ.Provider,{value:Ui},wn)),z&&(wn=ie.createElement(fJ,{locale:z,_ANT_MARK__:hJ},wn)),(Gi||Vi)&&(wn=ie.createElement(VO.Provider,{value:ti},wn)),U&&(wn=ie.createElement(HJ,{size:U},wn)),wn=ie.createElement(OQ,null,wn);const Nn=ie.useMemo(()=>{const nn=zi||{},{algorithm:Gn,token:Wi,components:Co,cssVar:Ja}=nn,ma=bQ(nn,["algorithm","token","components","cssVar"]),ku=Gn&&(!Array.isArray(Gn)||Gn.length>0)?aC(Gn):V7,Ti={};Object.entries(Co||{}).forEach(ks=>{let[Ms,pl]=ks;const hr=Object.assign({},pl);"algorithm"in hr&&(hr.algorithm===!0?hr.theme=ku:(Array.isArray(hr.algorithm)||typeof hr.algorithm=="function")&&(hr.theme=aC(hr.algorithm)),delete hr.algorithm),Ti[Ms]=hr});const Ma=Object.assign(Object.assign({},ax),Wi);return Object.assign(Object.assign({},ma),{theme:ku,token:Ma,components:Ti,override:Object.assign({override:Ma},Ti),cssVar:Ja})},[zi]);return de&&(wn=ie.createElement(W7.Provider,{value:Nn},wn)),_i.warning&&(wn=ie.createElement(aJ.Provider,{value:_i.warning},wn)),ce!==void 0&&(wn=ie.createElement(kJ,{disabled:ce},wn)),ie.createElement(lo.Provider,{value:_i},wn)},xx=t=>{const i=ie.useContext(lo),a=ie.useContext(B7);return ie.createElement(HQ,Object.assign({parentContext:i,legacyLocale:a},t))};xx.ConfigContext=lo;xx.SizeContext=lx;xx.config=UQ;xx.useConfig=jJ;Object.defineProperty(xx,"SizeContext",{get:()=>lx});const jQ=xx;var GQ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};function v9(t){var i;return t==null||(i=t.getRootNode)===null||i===void 0?void 0:i.call(t)}function VQ(t){return v9(t)instanceof ShadowRoot}function TE(t){return VQ(t)?v9(t):null}function WQ(t){return t.replace(/-(.)/g,function(i,a){return a.toUpperCase()})}function XQ(t,i){Il(t,"[@ant-design/icons] ".concat(i))}function NB(t){return ii(t)==="object"&&typeof t.name=="string"&&typeof t.theme=="string"&&(ii(t.icon)==="object"||typeof t.icon=="function")}function BB(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(t).reduce(function(i,a){var u=t[a];switch(a){case"class":i.className=u,delete i.class;break;default:delete i[a],i[WQ(a)]=u}return i},{})}function qP(t,i,a){return a?dr.createElement(t.tag,Ft(Ft({key:i},BB(t.attrs)),a),(t.children||[]).map(function(u,m){return qP(u,"".concat(i,"-").concat(t.tag,"-").concat(m))})):dr.createElement(t.tag,Ft({key:i},BB(t.attrs)),(t.children||[]).map(function(u,m){return qP(u,"".concat(i,"-").concat(t.tag,"-").concat(m))}))}function y9(t){return qd(t)[0]}function x9(t){return t?Array.isArray(t)?t:[t]:[]}var YQ=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,ZQ=function(i){var a=ie.useContext(VO),u=a.csp,m=a.prefixCls,M=YQ;m&&(M=M.replace(/anticon/g,m)),ie.useEffect(function(){var L=i.current,z=TE(L);jd(M,"@ant-design-icons",{prepend:!0,csp:u,attachTo:z})},[])},qQ=["icon","className","onClick","style","primaryColor","secondaryColor"],Dw={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function KQ(t){var i=t.primaryColor,a=t.secondaryColor;Dw.primaryColor=i,Dw.secondaryColor=a||y9(i),Dw.calculated=!!a}function JQ(){return Ft({},Dw)}var Ax=function(i){var a=i.icon,u=i.className,m=i.onClick,M=i.style,L=i.primaryColor,z=i.secondaryColor,U=Qi(i,qQ),W=ie.useRef(),J=Dw;if(L&&(J={primaryColor:L,secondaryColor:z||y9(L)}),ZQ(W),XQ(NB(a),"icon should be icon definiton, but got ".concat(a)),!NB(a))return null;var te=a;return te&&typeof te.icon=="function"&&(te=Ft(Ft({},te),{},{icon:te.icon(J.primaryColor,J.secondaryColor)})),qP(te.icon,"svg-".concat(te.name),Ft(Ft({className:u,onClick:m,style:M,"data-icon":te.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},U),{},{ref:W}))};Ax.displayName="IconReact";Ax.getTwoToneColors=JQ;Ax.setTwoToneColors=KQ;function A9(t){var i=x9(t),a=sr(i,2),u=a[0],m=a[1];return Ax.setTwoToneColors({primaryColor:u,secondaryColor:m})}function QQ(){var t=Ax.getTwoToneColors();return t.calculated?[t.primaryColor,t.secondaryColor]:t.primaryColor}var $Q=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];A9(RJ.primary);var Ka=ie.forwardRef(function(t,i){var a=t.className,u=t.icon,m=t.spin,M=t.rotate,L=t.tabIndex,z=t.onClick,U=t.twoToneColor,W=Qi(t,$Q),J=ie.useContext(VO),te=J.prefixCls,ae=te===void 0?"anticon":te,ve=J.rootClassName,he=mr(ve,ae,_t(_t({},"".concat(ae,"-").concat(u.name),!!u.name),"".concat(ae,"-spin"),!!m||u.name==="loading"),a),oe=L;oe===void 0&&z&&(oe=-1);var me=M?{msTransform:"rotate(".concat(M,"deg)"),transform:"rotate(".concat(M,"deg)")}:void 0,ge=x9(U),de=sr(ge,2),ce=de[0],_e=de[1];return ie.createElement("span",Sn({role:"img","aria-label":u.name},W,{ref:i,tabIndex:oe,onClick:z,className:he}),ie.createElement(Ax,{icon:u,primaryColor:ce,secondaryColor:_e,style:me}))});Ka.displayName="AntdIcon";Ka.getTwoToneColor=QQ;Ka.setTwoToneColor=A9;var e$=function(i,a){return ie.createElement(Ka,Sn({},i,{ref:a,icon:GQ}))},t$=ie.forwardRef(e$),r$={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"},n$=function(i,a){return ie.createElement(Ka,Sn({},i,{ref:a,icon:r$}))},w9=ie.forwardRef(n$),i$={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"},o$=function(i,a){return ie.createElement(Ka,Sn({},i,{ref:a,icon:i$}))},a$=ie.forwardRef(o$),s$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},l$=function(i,a){return ie.createElement(Ka,Sn({},i,{ref:a,icon:s$}))},u$=ie.forwardRef(l$),c$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},h$=function(i,a){return ie.createElement(Ka,Sn({},i,{ref:a,icon:c$}))},f$=ie.forwardRef(h$),d$=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,p$=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,m$="".concat(d$," ").concat(p$).split(/[\s\n]+/),g$="aria-",v$="data-";function zB(t,i){return t.indexOf(i)===0}function C9(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a;i===!1?a={aria:!0,data:!0,attr:!0}:i===!0?a={aria:!0}:a=Ft({},i);var u={};return Object.keys(t).forEach(function(m){(a.aria&&(m==="role"||zB(m,g$))||a.data&&zB(m,v$)||a.attr&&m$.includes(m))&&(u[m]=t[m])}),u}function _9(t){return t&&dr.isValidElement(t)&&t.type===dr.Fragment}const y$=(t,i,a)=>dr.isValidElement(t)?dr.cloneElement(t,typeof a=="function"?a(t.props||{}):a):i;function Of(t,i){return y$(t,t,i)}const Zm=t=>{const[,,,,i]=Ec();return i?`${t}-css-var`:""};var yn={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(i){var a=i.keyCode;if(i.altKey&&!i.ctrlKey||i.metaKey||a>=yn.F1&&a<=yn.F12)return!1;switch(a){case yn.ALT:case yn.CAPS_LOCK:case yn.CONTEXT_MENU:case yn.CTRL:case yn.DOWN:case yn.END:case yn.ESC:case yn.HOME:case yn.INSERT:case yn.LEFT:case yn.MAC_FF_META:case yn.META:case yn.NUMLOCK:case yn.NUM_CENTER:case yn.PAGE_DOWN:case yn.PAGE_UP:case yn.PAUSE:case yn.PRINT_SCREEN:case yn.RIGHT:case yn.SHIFT:case yn.UP:case yn.WIN_KEY:case yn.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(i){if(i>=yn.ZERO&&i<=yn.NINE||i>=yn.NUM_ZERO&&i<=yn.NUM_MULTIPLY||i>=yn.A&&i<=yn.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&i===0)return!0;switch(i){case yn.SPACE:case yn.QUESTION_MARK:case yn.NUM_PLUS:case yn.NUM_MINUS:case yn.NUM_PERIOD:case yn.NUM_DIVISION:case yn.SEMICOLON:case yn.DASH:case yn.EQUALS:case yn.COMMA:case yn.PERIOD:case yn.SLASH:case yn.APOSTROPHE:case yn.SINGLE_QUOTE:case yn.OPEN_SQUARE_BRACKET:case yn.BACKSLASH:case yn.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},M9=ie.forwardRef(function(t,i){var a=t.prefixCls,u=t.style,m=t.className,M=t.duration,L=M===void 0?4.5:M,z=t.eventKey,U=t.content,W=t.closable,J=t.closeIcon,te=J===void 0?"x":J,ae=t.props,ve=t.onClick,he=t.onNoticeClose,oe=t.times,me=t.hovering,ge=ie.useState(!1),de=sr(ge,2),ce=de[0],_e=de[1],Re=me||ce,Ee=function(){he(z)},De=function(at){(at.key==="Enter"||at.code==="Enter"||at.keyCode===yn.ENTER)&&Ee()};ie.useEffect(function(){if(!Re&&L>0){var Ye=setTimeout(function(){Ee()},L*1e3);return function(){clearTimeout(Ye)}}},[L,Re,oe]);var We=ie.useMemo(function(){return ii(W)==="object"&&W!==null?W:W?{closeIcon:te}:{}},[W,te]),Xe=C9(We,!0),et="".concat(a,"-notice");return ie.createElement("div",Sn({},ae,{ref:i,className:mr(et,m,_t({},"".concat(et,"-closable"),W)),style:u,onMouseEnter:function(at){var ot;_e(!0),ae==null||(ot=ae.onMouseEnter)===null||ot===void 0||ot.call(ae,at)},onMouseLeave:function(at){var ot;_e(!1),ae==null||(ot=ae.onMouseLeave)===null||ot===void 0||ot.call(ae,at)},onClick:ve}),ie.createElement("div",{className:"".concat(et,"-content")},U),W&&ie.createElement("a",Sn({tabIndex:0,className:"".concat(et,"-close"),onKeyDown:De,"aria-label":"Close"},Xe,{onClick:function(at){at.preventDefault(),at.stopPropagation(),Ee()}}),We.closeIcon))}),S9=dr.createContext({}),x$=function(i){var a=i.children,u=i.classNames;return dr.createElement(S9.Provider,{value:{classNames:u}},a)},UB=8,kB=3,HB=16,A$=function(i){var a={offset:UB,threshold:kB,gap:HB};if(i&&ii(i)==="object"){var u,m,M;a.offset=(u=i.offset)!==null&&u!==void 0?u:UB,a.threshold=(m=i.threshold)!==null&&m!==void 0?m:kB,a.gap=(M=i.gap)!==null&&M!==void 0?M:HB}return[!!i,a]},w$=["className","style","classNames","styles"],C$=function(i){var a=i.configList,u=i.placement,m=i.prefixCls,M=i.className,L=i.style,z=i.motion,U=i.onAllNoticeRemoved,W=i.onNoticeClose,J=i.stack,te=ie.useContext(S9),ae=te.classNames,ve=ie.useRef({}),he=ie.useState(null),oe=sr(he,2),me=oe[0],ge=oe[1],de=ie.useState([]),ce=sr(de,2),_e=ce[0],Re=ce[1],Ee=a.map(function($e){return{config:$e,key:String($e.key)}}),De=A$(J),We=sr(De,2),Xe=We[0],et=We[1],Ye=et.offset,at=et.threshold,ot=et.gap,ct=Xe&&(_e.length>0||Ee.length<=at),Dt=typeof z=="function"?z(u):z;return ie.useEffect(function(){Xe&&_e.length>1&&Re(function($e){return $e.filter(function(tt){return Ee.some(function(Ve){var gt=Ve.key;return tt===gt})})})},[_e,Ee,Xe]),ie.useEffect(function(){var $e;if(Xe&&ve.current[($e=Ee[Ee.length-1])===null||$e===void 0?void 0:$e.key]){var tt;ge(ve.current[(tt=Ee[Ee.length-1])===null||tt===void 0?void 0:tt.key])}},[Ee,Xe]),dr.createElement(PQ,Sn({key:u,className:mr(m,"".concat(m,"-").concat(u),ae==null?void 0:ae.list,M,_t(_t({},"".concat(m,"-stack"),!!Xe),"".concat(m,"-stack-expanded"),ct)),style:L,keys:Ee,motionAppear:!0},Dt,{onAllRemoved:function(){U(u)}}),function($e,tt){var Ve=$e.config,gt=$e.className,mt=$e.style,dt=$e.index,At=Ve,jt=At.key,ar=At.times,Ht=String(jt),Rt=Ve,pr=Rt.className,Cr=Rt.style,Ir=Rt.classNames,Ut=Rt.styles,_r=Qi(Rt,w$),Bn=Ee.findIndex(function(qn){return qn.key===Ht}),bn={};if(Xe){var ur=Ee.length-1-(Bn>-1?Bn:dt-1),jn=u==="top"||u==="bottom"?"-50%":"0";if(ur>0){var An,en,Fn;bn.height=ct?(An=ve.current[Ht])===null||An===void 0?void 0:An.offsetHeight:me==null?void 0:me.offsetHeight;for(var lr=0,er=0;er<ur;er++){var cn;lr+=((cn=ve.current[Ee[Ee.length-1-er].key])===null||cn===void 0?void 0:cn.offsetHeight)+ot}var oi=(ct?lr:ur*Ye)*(u.startsWith("top")?1:-1),xn=!ct&&me!==null&&me!==void 0&&me.offsetWidth&&(en=ve.current[Ht])!==null&&en!==void 0&&en.offsetWidth?((me==null?void 0:me.offsetWidth)-Ye*2*(ur<3?ur:3))/((Fn=ve.current[Ht])===null||Fn===void 0?void 0:Fn.offsetWidth):1;bn.transform="translate3d(".concat(jn,", ").concat(oi,"px, 0) scaleX(").concat(xn,")")}else bn.transform="translate3d(".concat(jn,", 0, 0)")}return dr.createElement("div",{ref:tt,className:mr("".concat(m,"-notice-wrapper"),gt,Ir==null?void 0:Ir.wrapper),style:Ft(Ft(Ft({},mt),bn),Ut==null?void 0:Ut.wrapper),onMouseEnter:function(){return Re(function(Dn){return Dn.includes(Ht)?Dn:[].concat(on(Dn),[Ht])})},onMouseLeave:function(){return Re(function(Dn){return Dn.filter(function(mn){return mn!==Ht})})}},dr.createElement(M9,Sn({},_r,{ref:function(Dn){Bn>-1?ve.current[Ht]=Dn:delete ve.current[Ht]},prefixCls:m,classNames:Ir,styles:Ut,className:mr(pr,ae==null?void 0:ae.notice),style:Cr,times:ar,key:jt,eventKey:jt,onNoticeClose:W,hovering:Xe&&_e.length>0})))})},_$=ie.forwardRef(function(t,i){var a=t.prefixCls,u=a===void 0?"rc-notification":a,m=t.container,M=t.motion,L=t.maxCount,z=t.className,U=t.style,W=t.onAllRemoved,J=t.stack,te=t.renderNotifications,ae=ie.useState([]),ve=sr(ae,2),he=ve[0],oe=ve[1],me=function(Xe){var et,Ye=he.find(function(at){return at.key===Xe});Ye==null||(et=Ye.onClose)===null||et===void 0||et.call(Ye),oe(function(at){return at.filter(function(ot){return ot.key!==Xe})})};ie.useImperativeHandle(i,function(){return{open:function(Xe){oe(function(et){var Ye=on(et),at=Ye.findIndex(function(Dt){return Dt.key===Xe.key}),ot=Ft({},Xe);if(at>=0){var ct;ot.times=(((ct=et[at])===null||ct===void 0?void 0:ct.times)||0)+1,Ye[at]=ot}else ot.times=0,Ye.push(ot);return L>0&&Ye.length>L&&(Ye=Ye.slice(-L)),Ye})},close:function(Xe){me(Xe)},destroy:function(){oe([])}}});var ge=ie.useState({}),de=sr(ge,2),ce=de[0],_e=de[1];ie.useEffect(function(){var We={};he.forEach(function(Xe){var et=Xe.placement,Ye=et===void 0?"topRight":et;Ye&&(We[Ye]=We[Ye]||[],We[Ye].push(Xe))}),Object.keys(ce).forEach(function(Xe){We[Xe]=We[Xe]||[]}),_e(We)},[he]);var Re=function(Xe){_e(function(et){var Ye=Ft({},et),at=Ye[Xe]||[];return at.length||delete Ye[Xe],Ye})},Ee=ie.useRef(!1);if(ie.useEffect(function(){Object.keys(ce).length>0?Ee.current=!0:Ee.current&&(W==null||W(),Ee.current=!1)},[ce]),!m)return null;var De=Object.keys(ce);return Qd.createPortal(ie.createElement(ie.Fragment,null,De.map(function(We){var Xe=ce[We],et=ie.createElement(C$,{key:We,configList:Xe,placement:We,prefixCls:u,className:z==null?void 0:z(We),style:U==null?void 0:U(We),motion:M,onNoticeClose:me,onAllNoticeRemoved:Re,stack:J});return te?te(et,{prefixCls:u,key:We}):et})),m)}),M$=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],S$=function(){return document.body},jB=0;function T$(){for(var t={},i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return a.forEach(function(m){m&&Object.keys(m).forEach(function(M){var L=m[M];L!==void 0&&(t[M]=L)})}),t}function E$(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.getContainer,a=i===void 0?S$:i,u=t.motion,m=t.prefixCls,M=t.maxCount,L=t.className,z=t.style,U=t.onAllRemoved,W=t.stack,J=t.renderNotifications,te=Qi(t,M$),ae=ie.useState(),ve=sr(ae,2),he=ve[0],oe=ve[1],me=ie.useRef(),ge=ie.createElement(_$,{container:he,ref:me,prefixCls:m,motion:u,maxCount:M,className:L,style:z,onAllRemoved:U,stack:W,renderNotifications:J}),de=ie.useState([]),ce=sr(de,2),_e=ce[0],Re=ce[1],Ee=ie.useMemo(function(){return{open:function(We){var Xe=T$(te,We);(Xe.key===null||Xe.key===void 0)&&(Xe.key="rc-notification-".concat(jB),jB+=1),Re(function(et){return[].concat(on(et),[{type:"open",config:Xe}])})},close:function(We){Re(function(Xe){return[].concat(on(Xe),[{type:"close",key:We}])})},destroy:function(){Re(function(We){return[].concat(on(We),[{type:"destroy"}])})}}},[]);return ie.useEffect(function(){oe(a())}),ie.useEffect(function(){me.current&&_e.length&&(_e.forEach(function(De){switch(De.type){case"open":me.current.open(De.config);break;case"close":me.current.close(De.key);break;case"destroy":me.current.destroy();break}}),Re(function(De){return De.filter(function(We){return!_e.includes(We)})}))},[_e]),[Ee,ge]}var I$={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},R$=function(i,a){return ie.createElement(Ka,Sn({},i,{ref:a,icon:I$}))},T9=ie.forwardRef(R$);const E9=dr.createContext(void 0),Nv=100,L$=10,I9=Nv*L$,R9={Modal:Nv,Drawer:Nv,Popover:Nv,Popconfirm:Nv,Tooltip:Nv,Tour:Nv},P$={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function O$(t){return t in R9}function L9(t,i){const[,a]=Ec(),u=dr.useContext(E9),m=O$(t);if(i!==void 0)return[i,i];let M=u??0;return m?(M+=(u?0:a.zIndexPopupBase)+R9[t],M=Math.min(M,a.zIndexPopupBase+I9)):M+=P$[t],[u===void 0?i:M,M]}const D$=t=>{const{componentCls:i,iconCls:a,boxShadow:u,colorText:m,colorSuccess:M,colorError:L,colorWarning:z,colorInfo:U,fontSizeLG:W,motionEaseInOutCirc:J,motionDurationSlow:te,marginXS:ae,paddingXS:ve,borderRadiusLG:he,zIndexPopup:oe,contentPadding:me,contentBg:ge}=t,de=`${i}-notice`,ce=new Ca("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:ve,transform:"translateY(0)",opacity:1}}),_e=new Ca("MessageMoveOut",{"0%":{maxHeight:t.height,padding:ve,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),Re={padding:ve,textAlign:"center",[`${i}-custom-content > ${a}`]:{verticalAlign:"text-bottom",marginInlineEnd:ae,fontSize:W},[`${de}-content`]:{display:"inline-block",padding:me,background:ge,borderRadius:he,boxShadow:u,pointerEvents:"all"},[`${i}-success > ${a}`]:{color:M},[`${i}-error > ${a}`]:{color:L},[`${i}-warning > ${a}`]:{color:z},[`${i}-info > ${a},
      ${i}-loading > ${a}`]:{color:U}};return[{[i]:Object.assign(Object.assign({},c0(t)),{color:m,position:"fixed",top:ae,width:"100%",pointerEvents:"none",zIndex:oe,[`${i}-move-up`]:{animationFillMode:"forwards"},[`
        ${i}-move-up-appear,
        ${i}-move-up-enter
      `]:{animationName:ce,animationDuration:te,animationPlayState:"paused",animationTimingFunction:J},[`
        ${i}-move-up-appear${i}-move-up-appear-active,
        ${i}-move-up-enter${i}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${i}-move-up-leave`]:{animationName:_e,animationDuration:te,animationPlayState:"paused",animationTimingFunction:J},[`${i}-move-up-leave${i}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[i]:{[`${de}-wrapper`]:Object.assign({},Re)}},{[`${i}-notice-pure-panel`]:Object.assign(Object.assign({},Re),{padding:0,textAlign:"start"})}]},b$=t=>({zIndexPopup:t.zIndexPopupBase+I9+10,contentBg:t.colorBgElevated,contentPadding:`${(t.controlHeightLG-t.fontSize*t.lineHeight)/2}px ${t.paddingSM}px`}),P9=Df("Message",t=>{const i=_s(t,{height:150});return[D$(i)]},b$);var F$=function(t,i){var a={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&i.indexOf(u)<0&&(a[u]=t[u]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,u=Object.getOwnPropertySymbols(t);m<u.length;m++)i.indexOf(u[m])<0&&Object.prototype.propertyIsEnumerable.call(t,u[m])&&(a[u[m]]=t[u[m]]);return a};const N$={info:ie.createElement(f$,null),success:ie.createElement(t$,null),error:ie.createElement(w9,null),warning:ie.createElement(u$,null),loading:ie.createElement(T9,null)},O9=t=>{let{prefixCls:i,type:a,icon:u,children:m}=t;return ie.createElement("div",{className:mr(`${i}-custom-content`,`${i}-${a}`)},u||N$[a],ie.createElement("span",null,m))},B$=t=>{const{prefixCls:i,className:a,type:u,icon:m,content:M}=t,L=F$(t,["prefixCls","className","type","icon","content"]),{getPrefixCls:z}=ie.useContext(lo),U=i||z("message"),W=Zm(U),[J,te,ae]=P9(U,W);return J(ie.createElement(M9,Object.assign({},L,{prefixCls:U,className:mr(a,te,`${U}-notice-pure-panel`,ae,W),eventKey:"pure",duration:null,content:ie.createElement(O9,{prefixCls:U,type:u,icon:m},M)})))};function z$(t,i){return{motionName:i??`${t}-move-up`}}function JO(t){let i;const a=new Promise(m=>{i=t(()=>{m(!0)})}),u=()=>{i==null||i()};return u.then=(m,M)=>a.then(m,M),u.promise=a,u}var U$=function(t,i){var a={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&i.indexOf(u)<0&&(a[u]=t[u]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,u=Object.getOwnPropertySymbols(t);m<u.length;m++)i.indexOf(u[m])<0&&Object.prototype.propertyIsEnumerable.call(t,u[m])&&(a[u[m]]=t[u[m]]);return a};const k$=8,H$=3,j$=t=>{let{children:i,prefixCls:a}=t;const u=Zm(a),[m,M,L]=P9(a,u);return m(ie.createElement(x$,{classNames:{list:mr(M,L,u)}},i))},G$=(t,i)=>{let{prefixCls:a,key:u}=i;return ie.createElement(j$,{prefixCls:a,key:u},t)},V$=ie.forwardRef((t,i)=>{const{top:a,prefixCls:u,getContainer:m,maxCount:M,duration:L=H$,rtl:z,transitionName:U,onAllRemoved:W}=t,{getPrefixCls:J,getPopupContainer:te,message:ae,direction:ve}=ie.useContext(lo),he=u||J("message"),oe=()=>({left:"50%",transform:"translateX(-50%)",top:a??k$}),me=()=>mr({[`${he}-rtl`]:z??ve==="rtl"}),ge=()=>z$(he,U),de=ie.createElement("span",{className:`${he}-close-x`},ie.createElement(a$,{className:`${he}-close-icon`})),[ce,_e]=E$({prefixCls:he,style:oe,className:me,motion:ge,closable:!1,closeIcon:de,duration:L,getContainer:()=>(m==null?void 0:m())||(te==null?void 0:te())||document.body,maxCount:M,onAllRemoved:W,renderNotifications:G$});return ie.useImperativeHandle(i,()=>Object.assign(Object.assign({},ce),{prefixCls:he,message:ae})),_e});let GB=0;function D9(t){const i=ie.useRef(null);return WO(),[ie.useMemo(()=>{const u=U=>{var W;(W=i.current)===null||W===void 0||W.close(U)},m=U=>{if(!i.current){const Ee=()=>{};return Ee.then=()=>{},Ee}const{open:W,prefixCls:J,message:te}=i.current,ae=`${J}-notice`,{content:ve,icon:he,type:oe,key:me,className:ge,style:de,onClose:ce}=U,_e=U$(U,["content","icon","type","key","className","style","onClose"]);let Re=me;return Re==null&&(GB+=1,Re=`antd-message-${GB}`),JO(Ee=>(W(Object.assign(Object.assign({},_e),{key:Re,content:ie.createElement(O9,{prefixCls:J,type:oe,icon:he},ve),placement:"top",className:mr(oe&&`${ae}-${oe}`,ge,te==null?void 0:te.className),style:Object.assign(Object.assign({},te==null?void 0:te.style),de),onClose:()=>{ce==null||ce(),Ee()}})),()=>{u(Re)}))},L={open:m,destroy:U=>{var W;U!==void 0?u(U):(W=i.current)===null||W===void 0||W.destroy()}};return["info","success","warning","error","loading"].forEach(U=>{const W=(J,te,ae)=>{let ve;J&&typeof J=="object"&&"content"in J?ve=J:ve={content:J};let he,oe;typeof te=="function"?oe=te:(he=te,oe=ae);const me=Object.assign(Object.assign({onClose:oe,duration:he},ve),{type:U});return m(me)};L[U]=W}),L},[]),ie.createElement(V$,Object.assign({key:"message-holder"},t,{ref:i}))]}function W$(t){return D9(t)}function Rl(){Rl=function(){return i};var t,i={},a=Object.prototype,u=a.hasOwnProperty,m=Object.defineProperty||function($e,tt,Ve){$e[tt]=Ve.value},M=typeof Symbol=="function"?Symbol:{},L=M.iterator||"@@iterator",z=M.asyncIterator||"@@asyncIterator",U=M.toStringTag||"@@toStringTag";function W($e,tt,Ve){return Object.defineProperty($e,tt,{value:Ve,enumerable:!0,configurable:!0,writable:!0}),$e[tt]}try{W({},"")}catch{W=function(Ve,gt,mt){return Ve[gt]=mt}}function J($e,tt,Ve,gt){var mt=tt&&tt.prototype instanceof ge?tt:ge,dt=Object.create(mt.prototype),At=new ct(gt||[]);return m(dt,"_invoke",{value:et($e,Ve,At)}),dt}function te($e,tt,Ve){try{return{type:"normal",arg:$e.call(tt,Ve)}}catch(gt){return{type:"throw",arg:gt}}}i.wrap=J;var ae="suspendedStart",ve="suspendedYield",he="executing",oe="completed",me={};function ge(){}function de(){}function ce(){}var _e={};W(_e,L,function(){return this});var Re=Object.getPrototypeOf,Ee=Re&&Re(Re(Dt([])));Ee&&Ee!==a&&u.call(Ee,L)&&(_e=Ee);var De=ce.prototype=ge.prototype=Object.create(_e);function We($e){["next","throw","return"].forEach(function(tt){W($e,tt,function(Ve){return this._invoke(tt,Ve)})})}function Xe($e,tt){function Ve(mt,dt,At,jt){var ar=te($e[mt],$e,dt);if(ar.type!=="throw"){var Ht=ar.arg,Rt=Ht.value;return Rt&&ii(Rt)=="object"&&u.call(Rt,"__await")?tt.resolve(Rt.__await).then(function(pr){Ve("next",pr,At,jt)},function(pr){Ve("throw",pr,At,jt)}):tt.resolve(Rt).then(function(pr){Ht.value=pr,At(Ht)},function(pr){return Ve("throw",pr,At,jt)})}jt(ar.arg)}var gt;m(this,"_invoke",{value:function(dt,At){function jt(){return new tt(function(ar,Ht){Ve(dt,At,ar,Ht)})}return gt=gt?gt.then(jt,jt):jt()}})}function et($e,tt,Ve){var gt=ae;return function(mt,dt){if(gt===he)throw Error("Generator is already running");if(gt===oe){if(mt==="throw")throw dt;return{value:t,done:!0}}for(Ve.method=mt,Ve.arg=dt;;){var At=Ve.delegate;if(At){var jt=Ye(At,Ve);if(jt){if(jt===me)continue;return jt}}if(Ve.method==="next")Ve.sent=Ve._sent=Ve.arg;else if(Ve.method==="throw"){if(gt===ae)throw gt=oe,Ve.arg;Ve.dispatchException(Ve.arg)}else Ve.method==="return"&&Ve.abrupt("return",Ve.arg);gt=he;var ar=te($e,tt,Ve);if(ar.type==="normal"){if(gt=Ve.done?oe:ve,ar.arg===me)continue;return{value:ar.arg,done:Ve.done}}ar.type==="throw"&&(gt=oe,Ve.method="throw",Ve.arg=ar.arg)}}}function Ye($e,tt){var Ve=tt.method,gt=$e.iterator[Ve];if(gt===t)return tt.delegate=null,Ve==="throw"&&$e.iterator.return&&(tt.method="return",tt.arg=t,Ye($e,tt),tt.method==="throw")||Ve!=="return"&&(tt.method="throw",tt.arg=new TypeError("The iterator does not provide a '"+Ve+"' method")),me;var mt=te(gt,$e.iterator,tt.arg);if(mt.type==="throw")return tt.method="throw",tt.arg=mt.arg,tt.delegate=null,me;var dt=mt.arg;return dt?dt.done?(tt[$e.resultName]=dt.value,tt.next=$e.nextLoc,tt.method!=="return"&&(tt.method="next",tt.arg=t),tt.delegate=null,me):dt:(tt.method="throw",tt.arg=new TypeError("iterator result is not an object"),tt.delegate=null,me)}function at($e){var tt={tryLoc:$e[0]};1 in $e&&(tt.catchLoc=$e[1]),2 in $e&&(tt.finallyLoc=$e[2],tt.afterLoc=$e[3]),this.tryEntries.push(tt)}function ot($e){var tt=$e.completion||{};tt.type="normal",delete tt.arg,$e.completion=tt}function ct($e){this.tryEntries=[{tryLoc:"root"}],$e.forEach(at,this),this.reset(!0)}function Dt($e){if($e||$e===""){var tt=$e[L];if(tt)return tt.call($e);if(typeof $e.next=="function")return $e;if(!isNaN($e.length)){var Ve=-1,gt=function mt(){for(;++Ve<$e.length;)if(u.call($e,Ve))return mt.value=$e[Ve],mt.done=!1,mt;return mt.value=t,mt.done=!0,mt};return gt.next=gt}}throw new TypeError(ii($e)+" is not iterable")}return de.prototype=ce,m(De,"constructor",{value:ce,configurable:!0}),m(ce,"constructor",{value:de,configurable:!0}),de.displayName=W(ce,U,"GeneratorFunction"),i.isGeneratorFunction=function($e){var tt=typeof $e=="function"&&$e.constructor;return!!tt&&(tt===de||(tt.displayName||tt.name)==="GeneratorFunction")},i.mark=function($e){return Object.setPrototypeOf?Object.setPrototypeOf($e,ce):($e.__proto__=ce,W($e,U,"GeneratorFunction")),$e.prototype=Object.create(De),$e},i.awrap=function($e){return{__await:$e}},We(Xe.prototype),W(Xe.prototype,z,function(){return this}),i.AsyncIterator=Xe,i.async=function($e,tt,Ve,gt,mt){mt===void 0&&(mt=Promise);var dt=new Xe(J($e,tt,Ve,gt),mt);return i.isGeneratorFunction(tt)?dt:dt.next().then(function(At){return At.done?At.value:dt.next()})},We(De),W(De,U,"Generator"),W(De,L,function(){return this}),W(De,"toString",function(){return"[object Generator]"}),i.keys=function($e){var tt=Object($e),Ve=[];for(var gt in tt)Ve.push(gt);return Ve.reverse(),function mt(){for(;Ve.length;){var dt=Ve.pop();if(dt in tt)return mt.value=dt,mt.done=!1,mt}return mt.done=!0,mt}},i.values=Dt,ct.prototype={constructor:ct,reset:function(tt){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(ot),!tt)for(var Ve in this)Ve.charAt(0)==="t"&&u.call(this,Ve)&&!isNaN(+Ve.slice(1))&&(this[Ve]=t)},stop:function(){this.done=!0;var tt=this.tryEntries[0].completion;if(tt.type==="throw")throw tt.arg;return this.rval},dispatchException:function(tt){if(this.done)throw tt;var Ve=this;function gt(Ht,Rt){return At.type="throw",At.arg=tt,Ve.next=Ht,Rt&&(Ve.method="next",Ve.arg=t),!!Rt}for(var mt=this.tryEntries.length-1;mt>=0;--mt){var dt=this.tryEntries[mt],At=dt.completion;if(dt.tryLoc==="root")return gt("end");if(dt.tryLoc<=this.prev){var jt=u.call(dt,"catchLoc"),ar=u.call(dt,"finallyLoc");if(jt&&ar){if(this.prev<dt.catchLoc)return gt(dt.catchLoc,!0);if(this.prev<dt.finallyLoc)return gt(dt.finallyLoc)}else if(jt){if(this.prev<dt.catchLoc)return gt(dt.catchLoc,!0)}else{if(!ar)throw Error("try statement without catch or finally");if(this.prev<dt.finallyLoc)return gt(dt.finallyLoc)}}}},abrupt:function(tt,Ve){for(var gt=this.tryEntries.length-1;gt>=0;--gt){var mt=this.tryEntries[gt];if(mt.tryLoc<=this.prev&&u.call(mt,"finallyLoc")&&this.prev<mt.finallyLoc){var dt=mt;break}}dt&&(tt==="break"||tt==="continue")&&dt.tryLoc<=Ve&&Ve<=dt.finallyLoc&&(dt=null);var At=dt?dt.completion:{};return At.type=tt,At.arg=Ve,dt?(this.method="next",this.next=dt.finallyLoc,me):this.complete(At)},complete:function(tt,Ve){if(tt.type==="throw")throw tt.arg;return tt.type==="break"||tt.type==="continue"?this.next=tt.arg:tt.type==="return"?(this.rval=this.arg=tt.arg,this.method="return",this.next="end"):tt.type==="normal"&&Ve&&(this.next=Ve),me},finish:function(tt){for(var Ve=this.tryEntries.length-1;Ve>=0;--Ve){var gt=this.tryEntries[Ve];if(gt.finallyLoc===tt)return this.complete(gt.completion,gt.afterLoc),ot(gt),me}},catch:function(tt){for(var Ve=this.tryEntries.length-1;Ve>=0;--Ve){var gt=this.tryEntries[Ve];if(gt.tryLoc===tt){var mt=gt.completion;if(mt.type==="throw"){var dt=mt.arg;ot(gt)}return dt}}throw Error("illegal catch attempt")},delegateYield:function(tt,Ve,gt){return this.delegate={iterator:Dt(tt),resultName:Ve,nextLoc:gt},this.method==="next"&&(this.arg=t),me}},i}function VB(t,i,a,u,m,M,L){try{var z=t[M](L),U=z.value}catch(W){a(W);return}z.done?i(U):Promise.resolve(U).then(u,m)}function h0(t){return function(){var i=this,a=arguments;return new Promise(function(u,m){var M=t.apply(i,a);function L(U){VB(M,u,m,L,z,"next",U)}function z(U){VB(M,u,m,L,z,"throw",U)}L(void 0)})}}var TC=Ft({},hZ),X$=TC.version,Y$=TC.render,Z$=TC.unmountComponentAtNode,M3;try{var q$=Number((X$||"").split(".")[0]);q$>=18&&(M3=TC.createRoot)}catch{}function WB(t){var i=TC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;i&&ii(i)==="object"&&(i.usingClientEntryPoint=t)}var EE="__rc_react_root__";function K$(t,i){WB(!0);var a=i[EE]||M3(i);WB(!1),a.render(t),i[EE]=a}function J$(t,i){Y$(t,i)}function b9(t,i){if(M3){K$(t,i);return}J$(t,i)}function Q$(t){return KP.apply(this,arguments)}function KP(){return KP=h0(Rl().mark(function t(i){return Rl().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",Promise.resolve().then(function(){var m;(m=i[EE])===null||m===void 0||m.unmount(),delete i[EE]}));case 1:case"end":return u.stop()}},t)})),KP.apply(this,arguments)}function $$(t){Z$(t)}function eee(t){return JP.apply(this,arguments)}function JP(){return JP=h0(Rl().mark(function t(i){return Rl().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(M3===void 0){u.next=2;break}return u.abrupt("return",Q$(i));case 2:$$(i);case 3:case"end":return u.stop()}},t)})),JP.apply(this,arguments)}const s5=()=>({height:0,opacity:0}),XB=t=>{const{scrollHeight:i}=t;return{height:i,opacity:1}},tee=t=>({height:t?t.offsetHeight:0}),l5=(t,i)=>(i==null?void 0:i.deadline)===!0||i.propertyName==="height",ree=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant"}-motion-collapse`,onAppearStart:s5,onEnterStart:s5,onAppearActive:XB,onEnterActive:XB,onLeaveStart:tee,onLeaveActive:s5,onAppearEnd:l5,onEnterEnd:l5,onLeaveEnd:l5,motionDeadline:500}},F9=(t,i,a)=>a!==void 0?a:`${t}-${i}`,nee=ree,QO=function(t){if(!t)return!1;if(t instanceof Element){if(t.offsetParent)return!0;if(t.getBBox){var i=t.getBBox(),a=i.width,u=i.height;if(a||u)return!0}if(t.getBoundingClientRect){var m=t.getBoundingClientRect(),M=m.width,L=m.height;if(M||L)return!0}}return!1},iee=t=>{const{componentCls:i,colorPrimary:a}=t;return{[i]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${a})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${t.motionEaseOutCirc}`,`opacity 2s ${t.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${t.motionDurationSlow} ${t.motionEaseInOut}`,`opacity ${t.motionDurationSlow} ${t.motionEaseInOut}`].join(",")}}}}},oee=qO("Wave",t=>[iee(t)]),N9="ant-wave-target";function aee(t){const i=(t||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return i&&i[1]&&i[2]&&i[3]?!(i[1]===i[2]&&i[2]===i[3]):!0}function u5(t){return t&&t!=="#fff"&&t!=="#ffffff"&&t!=="rgb(255, 255, 255)"&&t!=="rgba(255, 255, 255, 1)"&&aee(t)&&!/rgba\((?:\d*, ){3}0\)/.test(t)&&t!=="transparent"}function see(t){const{borderTopColor:i,borderColor:a,backgroundColor:u}=getComputedStyle(t);return u5(i)?i:u5(a)?a:u5(u)?u:null}function c5(t){return Number.isNaN(t)?0:t}const lee=t=>{const{className:i,target:a,component:u}=t,m=ie.useRef(null),[M,L]=ie.useState(null),[z,U]=ie.useState([]),[W,J]=ie.useState(0),[te,ae]=ie.useState(0),[ve,he]=ie.useState(0),[oe,me]=ie.useState(0),[ge,de]=ie.useState(!1),ce={left:W,top:te,width:ve,height:oe,borderRadius:z.map(Ee=>`${Ee}px`).join(" ")};M&&(ce["--wave-color"]=M);function _e(){const Ee=getComputedStyle(a);L(see(a));const De=Ee.position==="static",{borderLeftWidth:We,borderTopWidth:Xe}=Ee;J(De?a.offsetLeft:c5(-parseFloat(We))),ae(De?a.offsetTop:c5(-parseFloat(Xe))),he(a.offsetWidth),me(a.offsetHeight);const{borderTopLeftRadius:et,borderTopRightRadius:Ye,borderBottomLeftRadius:at,borderBottomRightRadius:ot}=Ee;U([et,Ye,ot,at].map(ct=>c5(parseFloat(ct))))}if(ie.useEffect(()=>{if(a){const Ee=ul(()=>{_e(),de(!0)});let De;return typeof ResizeObserver<"u"&&(De=new ResizeObserver(_e),De.observe(a)),()=>{ul.cancel(Ee),De==null||De.disconnect()}}},[]),!ge)return null;const Re=(u==="Checkbox"||u==="Radio")&&(a==null?void 0:a.classList.contains(N9));return ie.createElement(yx,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(Ee,De)=>{var We;if(De.deadline||De.propertyName==="opacity"){const Xe=(We=m.current)===null||We===void 0?void 0:We.parentElement;eee(Xe).then(()=>{Xe==null||Xe.remove()})}return!1}},(Ee,De)=>{let{className:We}=Ee;return ie.createElement("div",{ref:ep(m,De),className:mr(i,{"wave-quick":Re},We),style:ce})})},uee=(t,i)=>{var a;const{component:u}=i;if(u==="Checkbox"&&!(!((a=t.querySelector("input"))===null||a===void 0)&&a.checked))return;const m=document.createElement("div");m.style.position="absolute",m.style.left="0px",m.style.top="0px",t==null||t.insertBefore(m,t==null?void 0:t.firstChild),b9(ie.createElement(lee,Object.assign({},i,{target:t})),m)},cee=(t,i,a)=>{const{wave:u}=ie.useContext(lo),[,m,M]=Ec(),L=Tl(W=>{const J=t.current;if(u!=null&&u.disabled||!J)return;const te=J.querySelector(`.${N9}`)||J,{showEffect:ae}=u||{};(ae||uee)(te,{className:i,token:m,component:a,event:W,hashId:M})}),z=ie.useRef();return W=>{ul.cancel(z.current),z.current=ul(()=>{L(W)})}},hee=t=>{const{children:i,disabled:a,component:u}=t,{getPrefixCls:m}=ie.useContext(lo),M=ie.useRef(null),L=m("wave"),[,z]=oee(L),U=cee(M,mr(L,z),u);if(dr.useEffect(()=>{const J=M.current;if(!J||J.nodeType!==1||a)return;const te=ae=>{!QO(ae.target)||!J.getAttribute||J.getAttribute("disabled")||J.disabled||J.className.includes("disabled")||J.className.includes("-leave")||U(ae)};return J.addEventListener("click",te,!0),()=>{J.removeEventListener("click",te,!0)}},[a]),!dr.isValidElement(i))return i??null;const W=mx(i)?ep(i.ref,M):M;return Of(i,{ref:W})},f0=t=>{const i=dr.useContext(lx);return dr.useMemo(()=>t?typeof t=="string"?t??i:t instanceof Function?t(i):i:i,[t,i])},fee=t=>{const{componentCls:i}=t;return{[i]:{"&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}},dee=t=>{const{componentCls:i,antCls:a}=t;return{[i]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${i}-item:empty`]:{display:"none"},[`${i}-item > ${a}-badge-not-a-wrapper:only-child`]:{display:"block"}}}},pee=t=>{const{componentCls:i}=t;return{[i]:{"&-gap-row-small":{rowGap:t.spaceGapSmallSize},"&-gap-row-middle":{rowGap:t.spaceGapMiddleSize},"&-gap-row-large":{rowGap:t.spaceGapLargeSize},"&-gap-col-small":{columnGap:t.spaceGapSmallSize},"&-gap-col-middle":{columnGap:t.spaceGapMiddleSize},"&-gap-col-large":{columnGap:t.spaceGapLargeSize}}}},B9=Df("Space",t=>{const i=_s(t,{spaceGapSmallSize:t.paddingXS,spaceGapMiddleSize:t.padding,spaceGapLargeSize:t.paddingLG});return[dee(i),pee(i),fee(i)]},()=>({}),{resetStyle:!1});var z9=function(t,i){var a={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&i.indexOf(u)<0&&(a[u]=t[u]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,u=Object.getOwnPropertySymbols(t);m<u.length;m++)i.indexOf(u[m])<0&&Object.prototype.propertyIsEnumerable.call(t,u[m])&&(a[u[m]]=t[u[m]]);return a};const S3=ie.createContext(null),$O=(t,i)=>{const a=ie.useContext(S3),u=ie.useMemo(()=>{if(!a)return"";const{compactDirection:m,isFirstItem:M,isLastItem:L}=a,z=m==="vertical"?"-vertical-":"-";return mr(`${t}-compact${z}item`,{[`${t}-compact${z}first-item`]:M,[`${t}-compact${z}last-item`]:L,[`${t}-compact${z}item-rtl`]:i==="rtl"})},[t,i,a]);return{compactSize:a==null?void 0:a.compactSize,compactDirection:a==null?void 0:a.compactDirection,compactItemClassnames:u}},IE=t=>{let{children:i}=t;return ie.createElement(S3.Provider,{value:null},i)},mee=t=>{var{children:i}=t,a=z9(t,["children"]);return ie.createElement(S3.Provider,{value:a},i)},gee=t=>{const{getPrefixCls:i,direction:a}=ie.useContext(lo),{size:u,direction:m,block:M,prefixCls:L,className:z,rootClassName:U,children:W}=t,J=z9(t,["size","direction","block","prefixCls","className","rootClassName","children"]),te=f0(ce=>u??ce),ae=i("space-compact",L),[ve,he]=B9(ae),oe=mr(ae,he,{[`${ae}-rtl`]:a==="rtl",[`${ae}-block`]:M,[`${ae}-vertical`]:m==="vertical"},z,U),me=ie.useContext(S3),ge=Pf(W),de=ie.useMemo(()=>ge.map((ce,_e)=>{const Re=ce&&ce.key||`${ae}-item-${_e}`;return ie.createElement(mee,{key:Re,compactSize:te,compactDirection:m,isFirstItem:_e===0&&(!me||(me==null?void 0:me.isFirstItem)),isLastItem:_e===ge.length-1&&(!me||(me==null?void 0:me.isLastItem))},ce)}),[u,ge,me]);return ge.length===0?null:ve(ie.createElement("div",Object.assign({className:oe},J),de))},vee=gee;var yee=function(t,i){var a={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&i.indexOf(u)<0&&(a[u]=t[u]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,u=Object.getOwnPropertySymbols(t);m<u.length;m++)i.indexOf(u[m])<0&&Object.prototype.propertyIsEnumerable.call(t,u[m])&&(a[u[m]]=t[u[m]]);return a};const U9=ie.createContext(void 0),xee=t=>{const{getPrefixCls:i,direction:a}=ie.useContext(lo),{prefixCls:u,size:m,className:M}=t,L=yee(t,["prefixCls","size","className"]),z=i("btn-group",u),[,,U]=Ec();let W="";switch(m){case"large":W="lg";break;case"small":W="sm";break}const J=mr(z,{[`${z}-${W}`]:W,[`${z}-rtl`]:a==="rtl"},M,U);return ie.createElement(U9.Provider,{value:m},ie.createElement("div",Object.assign({},L,{className:J})))},YB=/^[\u4e00-\u9fa5]{2}$/,QP=YB.test.bind(YB);function Rce(t){return t==="danger"?{danger:!0}:{type:t}}function ZB(t){return typeof t=="string"}function h5(t){return t==="text"||t==="link"}function Aee(t,i){if(t==null)return;const a=i?" ":"";return typeof t!="string"&&typeof t!="number"&&ZB(t.type)&&QP(t.props.children)?Of(t,{children:t.props.children.split("").join(a)}):ZB(t)?QP(t)?dr.createElement("span",null,t.split("").join(a)):dr.createElement("span",null,t):_9(t)?dr.createElement("span",null,t):t}function wee(t,i){let a=!1;const u=[];return dr.Children.forEach(t,m=>{const M=typeof m,L=M==="string"||M==="number";if(a&&L){const z=u.length-1,U=u[z];u[z]=`${U}${m}`}else u.push(m);a=L}),dr.Children.map(u,m=>Aee(m,i))}const k9=ie.forwardRef((t,i)=>{const{className:a,style:u,children:m,prefixCls:M}=t,L=mr(`${M}-icon`,a);return dr.createElement("span",{ref:i,className:L,style:u},m)}),qB=ie.forwardRef((t,i)=>{const{prefixCls:a,className:u,style:m,iconClassName:M,iconPosition:L="start"}=t,z=mr(u,{[`${a}-loading-icon-end`]:L==="end",[`${a}-loading-icon`]:L==="start"});return dr.createElement(k9,{prefixCls:a,className:z,style:m,ref:i},dr.createElement(T9,{className:M}))}),f5=()=>({width:0,opacity:0,transform:"scale(0)"}),d5=t=>({width:t.scrollWidth,opacity:1,transform:"scale(1)"}),Cee=t=>{const{prefixCls:i,loading:a,existIcon:u,className:m,style:M,iconPosition:L}=t,z=!!a;return u?dr.createElement(qB,{prefixCls:i,className:m,style:M,iconPosition:L}):dr.createElement(yx,{visible:z,motionName:`${i}-loading-icon-motion`,motionLeave:z,removeOnLeave:!0,onAppearStart:f5,onAppearActive:d5,onEnterStart:f5,onEnterActive:d5,onLeaveStart:d5,onLeaveActive:f5},(U,W)=>{let{className:J,style:te}=U;return dr.createElement(qB,{prefixCls:i,className:m,style:Object.assign(Object.assign({},M),te),ref:W,iconClassName:J,iconPosition:L})})},KB=(t,i)=>({[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{"&:not(:disabled)":{borderInlineEndColor:i}}},"&:not(:first-child)":{[`&, & > ${t}`]:{"&:not(:disabled)":{borderInlineStartColor:i}}}}}),_ee=t=>{const{componentCls:i,fontSize:a,lineWidth:u,groupBorderColor:m,colorErrorHover:M}=t;return{[`${i}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${i}`]:{"&:not(:last-child)":{[`&, & > ${i}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:t.calc(u).mul(-1).equal(),[`&, & > ${i}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[i]:{position:"relative",zIndex:1,"&:hover,\n          &:focus,\n          &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${i}-icon-only`]:{fontSize:a}},KB(`${i}-primary`,m),KB(`${i}-danger`,M)]}},H9=t=>{const{paddingInline:i,onlyIconSize:a,paddingBlock:u}=t;return _s(t,{buttonPaddingHorizontal:i,buttonPaddingVertical:u,buttonIconOnlyFontSize:a})},j9=t=>{var i,a,u,m,M,L;const z=(i=t.contentFontSize)!==null&&i!==void 0?i:t.fontSize,U=(a=t.contentFontSizeSM)!==null&&a!==void 0?a:t.fontSize,W=(u=t.contentFontSizeLG)!==null&&u!==void 0?u:t.fontSizeLG,J=(m=t.contentLineHeight)!==null&&m!==void 0?m:HT(z),te=(M=t.contentLineHeightSM)!==null&&M!==void 0?M:HT(U),ae=(L=t.contentLineHeightLG)!==null&&L!==void 0?L:HT(W);return{fontWeight:400,defaultShadow:`0 ${t.controlOutlineWidth}px 0 ${t.controlTmpOutline}`,primaryShadow:`0 ${t.controlOutlineWidth}px 0 ${t.controlOutline}`,dangerShadow:`0 ${t.controlOutlineWidth}px 0 ${t.colorErrorOutline}`,primaryColor:t.colorTextLightSolid,dangerColor:t.colorTextLightSolid,borderColorDisabled:t.colorBorder,defaultGhostColor:t.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:t.colorBgContainer,paddingInline:t.paddingContentHorizontal-t.lineWidth,paddingInlineLG:t.paddingContentHorizontal-t.lineWidth,paddingInlineSM:8-t.lineWidth,onlyIconSize:t.fontSizeLG,onlyIconSizeSM:t.fontSizeLG-2,onlyIconSizeLG:t.fontSizeLG+2,groupBorderColor:t.colorPrimaryHover,linkHoverBg:"transparent",textHoverBg:t.colorBgTextHover,defaultColor:t.colorText,defaultBg:t.colorBgContainer,defaultBorderColor:t.colorBorder,defaultBorderColorDisabled:t.colorBorder,defaultHoverBg:t.colorBgContainer,defaultHoverColor:t.colorPrimaryHover,defaultHoverBorderColor:t.colorPrimaryHover,defaultActiveBg:t.colorBgContainer,defaultActiveColor:t.colorPrimaryActive,defaultActiveBorderColor:t.colorPrimaryActive,contentFontSize:z,contentFontSizeSM:U,contentFontSizeLG:W,contentLineHeight:J,contentLineHeightSM:te,contentLineHeightLG:ae,paddingBlock:Math.max((t.controlHeight-z*J)/2-t.lineWidth,0),paddingBlockSM:Math.max((t.controlHeightSM-U*te)/2-t.lineWidth,0),paddingBlockLG:Math.max((t.controlHeightLG-W*ae)/2-t.lineWidth,0)}},Mee=t=>{const{componentCls:i,iconCls:a,fontWeight:u}=t;return{[i]:{outline:"none",position:"relative",display:"inline-block",fontWeight:u,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",background:"transparent",border:`${pn(t.lineWidth)} ${t.lineType} transparent`,cursor:"pointer",transition:`all ${t.motionDurationMid} ${t.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",color:t.colorText,"&:disabled > *":{pointerEvents:"none"},"> span":{display:"inline-block"},[`${i}-icon`]:{lineHeight:0,"&-end":{marginInlineStart:t.marginXS}},[`> ${a} + span, > span + ${a}`]:{marginInlineStart:t.marginXS},[`&:not(${i}-icon-only) > ${i}-icon`]:{[`&${i}-loading-icon, &:not(:last-child)`]:{marginInlineEnd:t.marginXS},[`&${i}-loading-icon-end`]:{marginInlineStart:t.marginXS}},"> a":{color:"currentColor"},"&:not(:disabled)":Object.assign({},$J(t)),[`&${i}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${i}-two-chinese-chars > *:not(${a})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},[`&-icon-only${i}-compact-item`]:{flex:"none"}}}},Kd=(t,i,a)=>({[`&:not(:disabled):not(${t}-disabled)`]:{"&:hover":i,"&:active":a}}),See=t=>({minWidth:t.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),Tee=t=>({borderRadius:t.controlHeight,paddingInlineStart:t.calc(t.controlHeight).div(2).equal(),paddingInlineEnd:t.calc(t.controlHeight).div(2).equal()}),Eee=t=>({cursor:"not-allowed",borderColor:t.borderColorDisabled,color:t.colorTextDisabled,background:t.colorBgContainerDisabled,boxShadow:"none"}),hC=(t,i,a,u,m,M,L,z)=>({[`&${t}-background-ghost`]:Object.assign(Object.assign({color:a||void 0,background:i,borderColor:u||void 0,boxShadow:"none"},Kd(t,Object.assign({background:i},L),Object.assign({background:i},z))),{"&:disabled":{cursor:"not-allowed",color:m||void 0,borderColor:M||void 0}})}),eD=t=>({[`&:disabled, &${t.componentCls}-disabled`]:Object.assign({},Eee(t))}),G9=t=>Object.assign({},eD(t)),RE=t=>({[`&:disabled, &${t.componentCls}-disabled`]:{cursor:"not-allowed",color:t.colorTextDisabled}}),V9=t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},G9(t)),{background:t.defaultBg,borderColor:t.defaultBorderColor,color:t.defaultColor,boxShadow:t.defaultShadow}),Kd(t.componentCls,{color:t.defaultHoverColor,borderColor:t.defaultHoverBorderColor,background:t.defaultHoverBg},{color:t.defaultActiveColor,borderColor:t.defaultActiveBorderColor,background:t.defaultActiveBg})),hC(t.componentCls,t.ghostBg,t.defaultGhostColor,t.defaultGhostBorderColor,t.colorTextDisabled,t.colorBorder)),{[`&${t.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({color:t.colorError,borderColor:t.colorError},Kd(t.componentCls,{color:t.colorErrorHover,borderColor:t.colorErrorBorderHover},{color:t.colorErrorActive,borderColor:t.colorErrorActive})),hC(t.componentCls,t.ghostBg,t.colorError,t.colorError,t.colorTextDisabled,t.colorBorder)),eD(t))}),Iee=t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},G9(t)),{color:t.primaryColor,background:t.colorPrimary,boxShadow:t.primaryShadow}),Kd(t.componentCls,{color:t.colorTextLightSolid,background:t.colorPrimaryHover},{color:t.colorTextLightSolid,background:t.colorPrimaryActive})),hC(t.componentCls,t.ghostBg,t.colorPrimary,t.colorPrimary,t.colorTextDisabled,t.colorBorder,{color:t.colorPrimaryHover,borderColor:t.colorPrimaryHover},{color:t.colorPrimaryActive,borderColor:t.colorPrimaryActive})),{[`&${t.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({background:t.colorError,boxShadow:t.dangerShadow,color:t.dangerColor},Kd(t.componentCls,{background:t.colorErrorHover},{background:t.colorErrorActive})),hC(t.componentCls,t.ghostBg,t.colorError,t.colorError,t.colorTextDisabled,t.colorBorder,{color:t.colorErrorHover,borderColor:t.colorErrorHover},{color:t.colorErrorActive,borderColor:t.colorErrorActive})),eD(t))}),Ree=t=>Object.assign(Object.assign({},V9(t)),{borderStyle:"dashed"}),Lee=t=>Object.assign(Object.assign(Object.assign({color:t.colorLink},Kd(t.componentCls,{color:t.colorLinkHover,background:t.linkHoverBg},{color:t.colorLinkActive})),RE(t)),{[`&${t.componentCls}-dangerous`]:Object.assign(Object.assign({color:t.colorError},Kd(t.componentCls,{color:t.colorErrorHover},{color:t.colorErrorActive})),RE(t))}),Pee=t=>Object.assign(Object.assign(Object.assign({},Kd(t.componentCls,{color:t.colorText,background:t.textHoverBg},{color:t.colorText,background:t.colorBgTextActive})),RE(t)),{[`&${t.componentCls}-dangerous`]:Object.assign(Object.assign({color:t.colorError},RE(t)),Kd(t.componentCls,{color:t.colorErrorHover,background:t.colorErrorBg},{color:t.colorErrorHover,background:t.colorErrorBgActive}))}),Oee=t=>{const{componentCls:i}=t;return{[`${i}-default`]:V9(t),[`${i}-primary`]:Iee(t),[`${i}-dashed`]:Ree(t),[`${i}-link`]:Lee(t),[`${i}-text`]:Pee(t),[`${i}-ghost`]:hC(t.componentCls,t.ghostBg,t.colorBgContainer,t.colorBgContainer,t.colorTextDisabled,t.colorBorder)}},tD=function(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:a,controlHeight:u,fontSize:m,lineHeight:M,borderRadius:L,buttonPaddingHorizontal:z,iconCls:U,buttonPaddingVertical:W}=t,J=`${a}-icon-only`;return[{[`${i}`]:{fontSize:m,lineHeight:M,height:u,padding:`${pn(W)} ${pn(z)}`,borderRadius:L,[`&${J}`]:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:u,paddingInlineStart:0,paddingInlineEnd:0,[`&${a}-round`]:{width:"auto"},[U]:{fontSize:t.buttonIconOnlyFontSize}},[`&${a}-loading`]:{opacity:t.opacityLoading,cursor:"default"},[`${a}-loading-icon`]:{transition:`width ${t.motionDurationSlow} ${t.motionEaseInOut}, opacity ${t.motionDurationSlow} ${t.motionEaseInOut}`}}},{[`${a}${a}-circle${i}`]:See(t)},{[`${a}${a}-round${i}`]:Tee(t)}]},Dee=t=>{const i=_s(t,{fontSize:t.contentFontSize,lineHeight:t.contentLineHeight});return tD(i,t.componentCls)},bee=t=>{const i=_s(t,{controlHeight:t.controlHeightSM,fontSize:t.contentFontSizeSM,lineHeight:t.contentLineHeightSM,padding:t.paddingXS,buttonPaddingHorizontal:t.paddingInlineSM,buttonPaddingVertical:t.paddingBlockSM,borderRadius:t.borderRadiusSM,buttonIconOnlyFontSize:t.onlyIconSizeSM});return tD(i,`${t.componentCls}-sm`)},Fee=t=>{const i=_s(t,{controlHeight:t.controlHeightLG,fontSize:t.contentFontSizeLG,lineHeight:t.contentLineHeightLG,buttonPaddingHorizontal:t.paddingInlineLG,buttonPaddingVertical:t.paddingBlockLG,borderRadius:t.borderRadiusLG,buttonIconOnlyFontSize:t.onlyIconSizeLG});return tD(i,`${t.componentCls}-lg`)},Nee=t=>{const{componentCls:i}=t;return{[i]:{[`&${i}-block`]:{width:"100%"}}}},Bee=Df("Button",t=>{const i=H9(t);return[Mee(i),Dee(i),bee(i),Fee(i),Nee(i),Oee(i),_ee(i)]},j9,{unitless:{fontWeight:!0,contentLineHeight:!0,contentLineHeightSM:!0,contentLineHeightLG:!0}});function zee(t,i,a){const{focusElCls:u,focus:m,borderElCls:M}=a,L=M?"> *":"",z=["hover",m?"focus":null,"active"].filter(Boolean).map(U=>`&:${U} ${L}`).join(",");return{[`&-item:not(${i}-last-item)`]:{marginInlineEnd:t.calc(t.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[z]:{zIndex:2}},u?{[`&${u}`]:{zIndex:2}}:{}),{[`&[disabled] ${L}`]:{zIndex:0}})}}function Uee(t,i,a){const{borderElCls:u}=a,m=u?`> ${u}`:"";return{[`&-item:not(${i}-first-item):not(${i}-last-item) ${m}`]:{borderRadius:0},[`&-item:not(${i}-last-item)${i}-first-item`]:{[`& ${m}, &${t}-sm ${m}, &${t}-lg ${m}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${i}-first-item)${i}-last-item`]:{[`& ${m}, &${t}-sm ${m}, &${t}-lg ${m}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function W9(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:a}=t,u=`${a}-compact`;return{[u]:Object.assign(Object.assign({},zee(t,u,i)),Uee(a,u,i))}}function kee(t,i){return{[`&-item:not(${i}-last-item)`]:{marginBottom:t.calc(t.lineWidth).mul(-1).equal()},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function Hee(t,i){return{[`&-item:not(${i}-first-item):not(${i}-last-item)`]:{borderRadius:0},[`&-item${i}-first-item:not(${i}-last-item)`]:{[`&, &${t}-sm, &${t}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${i}-last-item:not(${i}-first-item)`]:{[`&, &${t}-sm, &${t}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function jee(t){const i=`${t.componentCls}-compact-vertical`;return{[i]:Object.assign(Object.assign({},kee(t,i)),Hee(t.componentCls,i))}}const Gee=t=>{const{componentCls:i,calc:a}=t;return{[i]:{[`&-compact-item${i}-primary`]:{[`&:not([disabled]) + ${i}-compact-item${i}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:a(t.lineWidth).mul(-1).equal(),insetInlineStart:a(t.lineWidth).mul(-1).equal(),display:"inline-block",width:t.lineWidth,height:`calc(100% + ${pn(t.lineWidth)} * 2)`,backgroundColor:t.colorPrimaryHover,content:'""'}}},"&-compact-vertical-item":{[`&${i}-primary`]:{[`&:not([disabled]) + ${i}-compact-vertical-item${i}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:a(t.lineWidth).mul(-1).equal(),insetInlineStart:a(t.lineWidth).mul(-1).equal(),display:"inline-block",width:`calc(100% + ${pn(t.lineWidth)} * 2)`,height:t.lineWidth,backgroundColor:t.colorPrimaryHover,content:'""'}}}}}}},Vee=iQ(["Button","compact"],t=>{const i=H9(t);return[W9(i),jee(i),Gee(i)]},j9);var Wee=function(t,i){var a={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&i.indexOf(u)<0&&(a[u]=t[u]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,u=Object.getOwnPropertySymbols(t);m<u.length;m++)i.indexOf(u[m])<0&&Object.prototype.propertyIsEnumerable.call(t,u[m])&&(a[u[m]]=t[u[m]]);return a};function Xee(t){if(typeof t=="object"&&t){let i=t==null?void 0:t.delay;return i=!Number.isNaN(i)&&typeof i=="number"?i:0,{loading:i<=0,delay:i}}return{loading:!!t,delay:0}}const Yee=dr.forwardRef((t,i)=>{var a,u,m;const{loading:M=!1,prefixCls:L,type:z,danger:U,shape:W="default",size:J,styles:te,disabled:ae,className:ve,rootClassName:he,children:oe,icon:me,iconPosition:ge="start",ghost:de=!1,block:ce=!1,htmlType:_e="button",classNames:Re,style:Ee={},autoInsertSpace:De}=t,We=Wee(t,["loading","prefixCls","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","iconPosition","ghost","block","htmlType","classNames","style","autoInsertSpace"]),Xe=z||"default",{getPrefixCls:et,direction:Ye,button:at}=ie.useContext(lo),ot=(a=De??(at==null?void 0:at.autoInsertSpace))!==null&&a!==void 0?a:!0,ct=et("btn",L),[Dt,$e,tt]=Bee(ct),Ve=ie.useContext(sx),gt=ae??Ve,mt=ie.useContext(U9),dt=ie.useMemo(()=>Xee(M),[M]),[At,jt]=ie.useState(dt.loading),[ar,Ht]=ie.useState(!1),pr=ep(i,ie.createRef()),Cr=ie.Children.count(oe)===1&&!me&&!h5(Xe);ie.useEffect(()=>{let mn=null;dt.delay>0?mn=setTimeout(()=>{mn=null,jt(!0)},dt.delay):jt(dt.loading);function pi(){mn&&(clearTimeout(mn),mn=null)}return pi},[dt]),ie.useEffect(()=>{if(!pr||!pr.current||!ot)return;const mn=pr.current.textContent;Cr&&QP(mn)?ar||Ht(!0):ar&&Ht(!1)},[pr]);const Ir=mn=>{const{onClick:pi}=t;if(At||gt){mn.preventDefault();return}pi==null||pi(mn)},{compactSize:Ut,compactItemClassnames:_r}=$O(ct,Ye),Bn={large:"lg",small:"sm",middle:void 0},bn=f0(mn=>{var pi,ui;return(ui=(pi=J??Ut)!==null&&pi!==void 0?pi:mt)!==null&&ui!==void 0?ui:mn}),ur=bn&&Bn[bn]||"",jn=At?"loading":me,An=Oh(We,["navigate"]),en=mr(ct,$e,tt,{[`${ct}-${W}`]:W!=="default"&&W,[`${ct}-${Xe}`]:Xe,[`${ct}-${ur}`]:ur,[`${ct}-icon-only`]:!oe&&oe!==0&&!!jn,[`${ct}-background-ghost`]:de&&!h5(Xe),[`${ct}-loading`]:At,[`${ct}-two-chinese-chars`]:ar&&ot&&!At,[`${ct}-block`]:ce,[`${ct}-dangerous`]:!!U,[`${ct}-rtl`]:Ye==="rtl"},_r,ve,he,at==null?void 0:at.className),Fn=Object.assign(Object.assign({},at==null?void 0:at.style),Ee),lr=ge==="end"&&oe&&oe!==0&&jn,er=mr(Re==null?void 0:Re.icon,(u=at==null?void 0:at.classNames)===null||u===void 0?void 0:u.icon,{[`${ct}-icon-end`]:lr}),cn=Object.assign(Object.assign({},(te==null?void 0:te.icon)||{}),((m=at==null?void 0:at.styles)===null||m===void 0?void 0:m.icon)||{}),oi=me&&!At?dr.createElement(k9,{prefixCls:ct,className:er,style:cn},me):dr.createElement(Cee,{existIcon:!!me,prefixCls:ct,loading:!!At,iconPosition:ge}),xn=oe||oe===0?wee(oe,Cr&&ot):null,qn=(mn,pi)=>ge==="start"?dr.createElement(dr.Fragment,null,mn,pi):dr.createElement(dr.Fragment,null,pi,mn);if(An.href!==void 0)return Dt(dr.createElement("a",Object.assign({},An,{className:mr(en,{[`${ct}-disabled`]:gt}),href:gt?void 0:An.href,style:Fn,onClick:Ir,ref:pr,tabIndex:gt?-1:0}),qn(oi,xn)));let Dn=dr.createElement("button",Object.assign({},We,{type:_e,className:en,style:Fn,onClick:Ir,disabled:gt,ref:pr}),qn(oi,xn),!!_r&&dr.createElement(Vee,{key:"compact",prefixCls:ct}));return h5(Xe)||(Dn=dr.createElement(hee,{component:"Button",disabled:!!At},Dn)),Dt(Dn)}),T3=Yee;T3.Group=xee;T3.__ANT_BUTTON=!0;var X9=ie.createContext(null),JB=[];function Zee(t,i){var a=ie.useState(function(){if(!Nu())return null;var he=document.createElement("div");return he}),u=sr(a,1),m=u[0],M=ie.useRef(!1),L=ie.useContext(X9),z=ie.useState(JB),U=sr(z,2),W=U[0],J=U[1],te=L||(M.current?void 0:function(he){J(function(oe){var me=[he].concat(on(oe));return me})});function ae(){m.parentElement||document.body.appendChild(m),M.current=!0}function ve(){var he;(he=m.parentElement)===null||he===void 0||he.removeChild(m),M.current=!1}return as(function(){return t?L?L(ae):ae():ve(),ve},[t]),as(function(){W.length&&(W.forEach(function(he){return he()}),J(JB))},[W]),[m,te]}var p5;function Y9(t){var i="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),a=document.createElement("div");a.id=i;var u=a.style;u.position="absolute",u.left="0",u.top="0",u.width="100px",u.height="100px",u.overflow="scroll";var m,M;if(t){var L=getComputedStyle(t);u.scrollbarColor=L.scrollbarColor,u.scrollbarWidth=L.scrollbarWidth;var z=getComputedStyle(t,"::-webkit-scrollbar"),U=parseInt(z.width,10),W=parseInt(z.height,10);try{var J=U?"width: ".concat(z.width,";"):"",te=W?"height: ".concat(z.height,";"):"";jd(`
#`.concat(i,`::-webkit-scrollbar {
`).concat(J,`
`).concat(te,`
}`),i)}catch(he){console.error(he),m=U,M=W}}document.body.appendChild(a);var ae=t&&m&&!isNaN(m)?m:a.offsetWidth-a.clientWidth,ve=t&&M&&!isNaN(M)?M:a.offsetHeight-a.clientHeight;return document.body.removeChild(a),iC(i),{width:ae,height:ve}}function Lce(t){return typeof document>"u"?0:(p5===void 0&&(p5=Y9()),p5.width)}function qee(t){return typeof document>"u"||!t||!(t instanceof Element)?{width:0,height:0}:Y9(t)}function Kee(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var Jee="rc-util-locker-".concat(Date.now()),QB=0;function Qee(t){var i=!!t,a=ie.useState(function(){return QB+=1,"".concat(Jee,"_").concat(QB)}),u=sr(a,1),m=u[0];as(function(){if(i){var M=qee(document.body).width,L=Kee();jd(`
html body {
  overflow-y: hidden;
  `.concat(L?"width: calc(100% - ".concat(M,"px);"):"",`
}`),m)}else iC(m);return function(){iC(m)}},[i,m])}var $ee=!1;function ete(t){return $ee}var $B=function(i){return i===!1?!1:!Nu()||!i?null:typeof i=="string"?document.querySelector(i):typeof i=="function"?i():i},Z9=ie.forwardRef(function(t,i){var a=t.open,u=t.autoLock,m=t.getContainer;t.debug;var M=t.autoDestroy,L=M===void 0?!0:M,z=t.children,U=ie.useState(a),W=sr(U,2),J=W[0],te=W[1],ae=J||a;ie.useEffect(function(){(L||a)&&te(a)},[a,L]);var ve=ie.useState(function(){return $B(m)}),he=sr(ve,2),oe=he[0],me=he[1];ie.useEffect(function(){var Ye=$B(m);me(Ye??null)});var ge=Zee(ae&&!oe),de=sr(ge,2),ce=de[0],_e=de[1],Re=oe??ce;Qee(u&&a&&Nu()&&(Re===ce||Re===document.body));var Ee=null;if(z&&mx(z)&&i){var De=z;Ee=De.ref}var We=MC(Ee,i);if(!ae||!Nu()||oe===void 0)return null;var Xe=Re===!1||ete(),et=z;return i&&(et=ie.cloneElement(z,{ref:We})),ie.createElement(X9.Provider,{value:_e},Xe?et:Qd.createPortal(et,Re))});function tte(){var t=Ft({},Kv);return t.useId}var ez=0,tz=tte();const rte=tz?function(i){var a=tz();return i||a}:function(i){var a=ie.useState("ssr-id"),u=sr(a,2),m=u[0],M=u[1];return ie.useEffect(function(){var L=ez;ez+=1,M("rc_unique_".concat(L))},[]),i||m};var Gv="RC_FORM_INTERNAL_HOOKS",So=function(){Il(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},ux=ie.createContext({getFieldValue:So,getFieldsValue:So,getFieldError:So,getFieldWarning:So,getFieldsError:So,isFieldsTouched:So,isFieldTouched:So,isFieldValidating:So,isFieldsValidating:So,resetFields:So,setFields:So,setFieldValue:So,setFieldsValue:So,validateFields:So,submit:So,getInternalHooks:function(){return So(),{dispatch:So,initEntityValue:So,registerField:So,useSubscribe:So,setInitialValues:So,destroyForm:So,setCallbacks:So,registerWatch:So,getFields:So,setValidateMessages:So,setPreserve:So,getInitialValue:So}}}),LE=ie.createContext(null);function $P(t){return t==null?[]:Array.isArray(t)?t:[t]}function nte(t){return t&&!!t._init}function e4(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var i=JSON.parse(JSON.stringify(this));return i.clone=this.clone,i}}}var t4=e4();function ite(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function ote(t,i,a){if(y3())return Reflect.construct.apply(null,arguments);var u=[null];u.push.apply(u,i);var m=new(t.bind.apply(t,u));return a&&rC(m,a.prototype),m}function r4(t){var i=typeof Map=="function"?new Map:void 0;return r4=function(u){if(u===null||!ite(u))return u;if(typeof u!="function")throw new TypeError("Super expression must either be null or a function");if(typeof i<"u"){if(i.has(u))return i.get(u);i.set(u,m)}function m(){return ote(u,arguments,r0(this).constructor)}return m.prototype=Object.create(u.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),rC(m,u)},r4(t)}var ate=/%[sdj%]/g,ste=function(){};function n4(t){if(!t||!t.length)return null;var i={};return t.forEach(function(a){var u=a.field;i[u]=i[u]||[],i[u].push(a)}),i}function Ou(t){for(var i=arguments.length,a=new Array(i>1?i-1:0),u=1;u<i;u++)a[u-1]=arguments[u];var m=0,M=a.length;if(typeof t=="function")return t.apply(null,a);if(typeof t=="string"){var L=t.replace(ate,function(z){if(z==="%%")return"%";if(m>=M)return z;switch(z){case"%s":return String(a[m++]);case"%d":return Number(a[m++]);case"%j":try{return JSON.stringify(a[m++])}catch{return"[Circular]"}break;default:return z}});return L}return t}function lte(t){return t==="string"||t==="url"||t==="hex"||t==="email"||t==="date"||t==="pattern"}function ls(t,i){return!!(t==null||i==="array"&&Array.isArray(t)&&!t.length||lte(i)&&typeof t=="string"&&!t)}function ute(t,i,a){var u=[],m=0,M=t.length;function L(z){u.push.apply(u,on(z||[])),m++,m===M&&a(u)}t.forEach(function(z){i(z,L)})}function rz(t,i,a){var u=0,m=t.length;function M(L){if(L&&L.length){a(L);return}var z=u;u=u+1,z<m?i(t[z],M):a([])}M([])}function cte(t){var i=[];return Object.keys(t).forEach(function(a){i.push.apply(i,on(t[a]||[]))}),i}var nz=function(t){Ym(a,t);var i=gx(a);function a(u,m){var M;return hl(this,a),M=i.call(this,"Async Validation Error"),_t(Bi(M),"errors",void 0),_t(Bi(M),"fields",void 0),M.errors=u,M.fields=m,M}return fl(a)}(r4(Error));function hte(t,i,a,u,m){if(i.first){var M=new Promise(function(ae,ve){var he=function(ge){return u(ge),ge.length?ve(new nz(ge,n4(ge))):ae(m)},oe=cte(t);rz(oe,a,he)});return M.catch(function(ae){return ae}),M}var L=i.firstFields===!0?Object.keys(t):i.firstFields||[],z=Object.keys(t),U=z.length,W=0,J=[],te=new Promise(function(ae,ve){var he=function(me){if(J.push.apply(J,me),W++,W===U)return u(J),J.length?ve(new nz(J,n4(J))):ae(m)};z.length||(u(J),ae(m)),z.forEach(function(oe){var me=t[oe];L.indexOf(oe)!==-1?rz(me,a,he):ute(me,a,he)})});return te.catch(function(ae){return ae}),te}function fte(t){return!!(t&&t.message!==void 0)}function dte(t,i){for(var a=t,u=0;u<i.length;u++){if(a==null)return a;a=a[i[u]]}return a}function iz(t,i){return function(a){var u;return t.fullFields?u=dte(i,t.fullFields):u=i[a.field||t.fullField],fte(a)?(a.field=a.field||t.fullField,a.fieldValue=u,a):{message:typeof a=="function"?a():a,fieldValue:u,field:a.field||t.fullField}}}function oz(t,i){if(i){for(var a in i)if(i.hasOwnProperty(a)){var u=i[a];ii(u)==="object"&&ii(t[a])==="object"?t[a]=Ft(Ft({},t[a]),u):t[a]=u}}return t}var g1="enum",pte=function(i,a,u,m,M){i[g1]=Array.isArray(i[g1])?i[g1]:[],i[g1].indexOf(a)===-1&&m.push(Ou(M.messages[g1],i.fullField,i[g1].join(", ")))},mte=function(i,a,u,m,M){if(i.pattern){if(i.pattern instanceof RegExp)i.pattern.lastIndex=0,i.pattern.test(a)||m.push(Ou(M.messages.pattern.mismatch,i.fullField,a,i.pattern));else if(typeof i.pattern=="string"){var L=new RegExp(i.pattern);L.test(a)||m.push(Ou(M.messages.pattern.mismatch,i.fullField,a,i.pattern))}}},gte=function(i,a,u,m,M){var L=typeof i.len=="number",z=typeof i.min=="number",U=typeof i.max=="number",W=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,J=a,te=null,ae=typeof a=="number",ve=typeof a=="string",he=Array.isArray(a);if(ae?te="number":ve?te="string":he&&(te="array"),!te)return!1;he&&(J=a.length),ve&&(J=a.replace(W,"_").length),L?J!==i.len&&m.push(Ou(M.messages[te].len,i.fullField,i.len)):z&&!U&&J<i.min?m.push(Ou(M.messages[te].min,i.fullField,i.min)):U&&!z&&J>i.max?m.push(Ou(M.messages[te].max,i.fullField,i.max)):z&&U&&(J<i.min||J>i.max)&&m.push(Ou(M.messages[te].range,i.fullField,i.min,i.max))},q9=function(i,a,u,m,M,L){i.required&&(!u.hasOwnProperty(i.field)||ls(a,L||i.type))&&m.push(Ou(M.messages.required,i.fullField))},lT;const vte=function(){if(lT)return lT;var t="[a-fA-F\\d:]",i=function(Ee){return Ee&&Ee.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(t,")|(?<=").concat(t,")(?=\\s|$))"):""},a="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",u="[a-fA-F\\d]{1,4}",m=["(?:".concat(u,":){7}(?:").concat(u,"|:)"),"(?:".concat(u,":){6}(?:").concat(a,"|:").concat(u,"|:)"),"(?:".concat(u,":){5}(?::").concat(a,"|(?::").concat(u,"){1,2}|:)"),"(?:".concat(u,":){4}(?:(?::").concat(u,"){0,1}:").concat(a,"|(?::").concat(u,"){1,3}|:)"),"(?:".concat(u,":){3}(?:(?::").concat(u,"){0,2}:").concat(a,"|(?::").concat(u,"){1,4}|:)"),"(?:".concat(u,":){2}(?:(?::").concat(u,"){0,3}:").concat(a,"|(?::").concat(u,"){1,5}|:)"),"(?:".concat(u,":){1}(?:(?::").concat(u,"){0,4}:").concat(a,"|(?::").concat(u,"){1,6}|:)"),"(?::(?:(?::".concat(u,"){0,5}:").concat(a,"|(?::").concat(u,"){1,7}|:))")],M="(?:%[0-9a-zA-Z]{1,})?",L="(?:".concat(m.join("|"),")").concat(M),z=new RegExp("(?:^".concat(a,"$)|(?:^").concat(L,"$)")),U=new RegExp("^".concat(a,"$")),W=new RegExp("^".concat(L,"$")),J=function(Ee){return Ee&&Ee.exact?z:new RegExp("(?:".concat(i(Ee)).concat(a).concat(i(Ee),")|(?:").concat(i(Ee)).concat(L).concat(i(Ee),")"),"g")};J.v4=function(Re){return Re&&Re.exact?U:new RegExp("".concat(i(Re)).concat(a).concat(i(Re)),"g")},J.v6=function(Re){return Re&&Re.exact?W:new RegExp("".concat(i(Re)).concat(L).concat(i(Re)),"g")};var te="(?:(?:[a-z]+:)?//)",ae="(?:\\S+(?::\\S*)?@)?",ve=J.v4().source,he=J.v6().source,oe="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",me="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",ge="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",de="(?::\\d{2,5})?",ce='(?:[/?#][^\\s"]*)?',_e="(?:".concat(te,"|www\\.)").concat(ae,"(?:localhost|").concat(ve,"|").concat(he,"|").concat(oe).concat(me).concat(ge,")").concat(de).concat(ce);return lT=new RegExp("(?:^".concat(_e,"$)"),"i"),lT};var az={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},xw={integer:function(i){return xw.number(i)&&parseInt(i,10)===i},float:function(i){return xw.number(i)&&!xw.integer(i)},array:function(i){return Array.isArray(i)},regexp:function(i){if(i instanceof RegExp)return!0;try{return!!new RegExp(i)}catch{return!1}},date:function(i){return typeof i.getTime=="function"&&typeof i.getMonth=="function"&&typeof i.getYear=="function"&&!isNaN(i.getTime())},number:function(i){return isNaN(i)?!1:typeof i=="number"},object:function(i){return ii(i)==="object"&&!xw.array(i)},method:function(i){return typeof i=="function"},email:function(i){return typeof i=="string"&&i.length<=320&&!!i.match(az.email)},url:function(i){return typeof i=="string"&&i.length<=2048&&!!i.match(vte())},hex:function(i){return typeof i=="string"&&!!i.match(az.hex)}},yte=function(i,a,u,m,M){if(i.required&&a===void 0){q9(i,a,u,m,M);return}var L=["integer","float","array","regexp","object","method","email","number","date","url","hex"],z=i.type;L.indexOf(z)>-1?xw[z](a)||m.push(Ou(M.messages.types[z],i.fullField,i.type)):z&&ii(a)!==i.type&&m.push(Ou(M.messages.types[z],i.fullField,i.type))},xte=function(i,a,u,m,M){(/^\s+$/.test(a)||a==="")&&m.push(Ou(M.messages.whitespace,i.fullField))};const Di={required:q9,whitespace:xte,type:yte,range:gte,enum:pte,pattern:mte};var Ate=function(i,a,u,m,M){var L=[],z=i.required||!i.required&&m.hasOwnProperty(i.field);if(z){if(ls(a)&&!i.required)return u();Di.required(i,a,m,L,M)}u(L)},wte=function(i,a,u,m,M){var L=[],z=i.required||!i.required&&m.hasOwnProperty(i.field);if(z){if(a==null&&!i.required)return u();Di.required(i,a,m,L,M,"array"),a!=null&&(Di.type(i,a,m,L,M),Di.range(i,a,m,L,M))}u(L)},Cte=function(i,a,u,m,M){var L=[],z=i.required||!i.required&&m.hasOwnProperty(i.field);if(z){if(ls(a)&&!i.required)return u();Di.required(i,a,m,L,M),a!==void 0&&Di.type(i,a,m,L,M)}u(L)},_te=function(i,a,u,m,M){var L=[],z=i.required||!i.required&&m.hasOwnProperty(i.field);if(z){if(ls(a,"date")&&!i.required)return u();if(Di.required(i,a,m,L,M),!ls(a,"date")){var U;a instanceof Date?U=a:U=new Date(a),Di.type(i,U,m,L,M),U&&Di.range(i,U.getTime(),m,L,M)}}u(L)},Mte="enum",Ste=function(i,a,u,m,M){var L=[],z=i.required||!i.required&&m.hasOwnProperty(i.field);if(z){if(ls(a)&&!i.required)return u();Di.required(i,a,m,L,M),a!==void 0&&Di[Mte](i,a,m,L,M)}u(L)},Tte=function(i,a,u,m,M){var L=[],z=i.required||!i.required&&m.hasOwnProperty(i.field);if(z){if(ls(a)&&!i.required)return u();Di.required(i,a,m,L,M),a!==void 0&&(Di.type(i,a,m,L,M),Di.range(i,a,m,L,M))}u(L)},Ete=function(i,a,u,m,M){var L=[],z=i.required||!i.required&&m.hasOwnProperty(i.field);if(z){if(ls(a)&&!i.required)return u();Di.required(i,a,m,L,M),a!==void 0&&(Di.type(i,a,m,L,M),Di.range(i,a,m,L,M))}u(L)},Ite=function(i,a,u,m,M){var L=[],z=i.required||!i.required&&m.hasOwnProperty(i.field);if(z){if(ls(a)&&!i.required)return u();Di.required(i,a,m,L,M),a!==void 0&&Di.type(i,a,m,L,M)}u(L)},Rte=function(i,a,u,m,M){var L=[],z=i.required||!i.required&&m.hasOwnProperty(i.field);if(z){if(a===""&&(a=void 0),ls(a)&&!i.required)return u();Di.required(i,a,m,L,M),a!==void 0&&(Di.type(i,a,m,L,M),Di.range(i,a,m,L,M))}u(L)},Lte=function(i,a,u,m,M){var L=[],z=i.required||!i.required&&m.hasOwnProperty(i.field);if(z){if(ls(a)&&!i.required)return u();Di.required(i,a,m,L,M),a!==void 0&&Di.type(i,a,m,L,M)}u(L)},Pte=function(i,a,u,m,M){var L=[],z=i.required||!i.required&&m.hasOwnProperty(i.field);if(z){if(ls(a,"string")&&!i.required)return u();Di.required(i,a,m,L,M),ls(a,"string")||Di.pattern(i,a,m,L,M)}u(L)},Ote=function(i,a,u,m,M){var L=[],z=i.required||!i.required&&m.hasOwnProperty(i.field);if(z){if(ls(a)&&!i.required)return u();Di.required(i,a,m,L,M),ls(a)||Di.type(i,a,m,L,M)}u(L)},Dte=function(i,a,u,m,M){var L=[],z=Array.isArray(a)?"array":ii(a);Di.required(i,a,m,L,M,z),u(L)},bte=function(i,a,u,m,M){var L=[],z=i.required||!i.required&&m.hasOwnProperty(i.field);if(z){if(ls(a,"string")&&!i.required)return u();Di.required(i,a,m,L,M,"string"),ls(a,"string")||(Di.type(i,a,m,L,M),Di.range(i,a,m,L,M),Di.pattern(i,a,m,L,M),i.whitespace===!0&&Di.whitespace(i,a,m,L,M))}u(L)},m5=function(i,a,u,m,M){var L=i.type,z=[],U=i.required||!i.required&&m.hasOwnProperty(i.field);if(U){if(ls(a,L)&&!i.required)return u();Di.required(i,a,m,z,M,L),ls(a,L)||Di.type(i,a,m,z,M)}u(z)};const bw={string:bte,method:Ite,number:Rte,boolean:Cte,regexp:Ote,integer:Ete,float:Tte,array:wte,object:Lte,enum:Ste,pattern:Pte,date:_te,url:m5,hex:m5,email:m5,required:Dte,any:Ate};var EC=function(){function t(i){hl(this,t),_t(this,"rules",null),_t(this,"_messages",t4),this.define(i)}return fl(t,[{key:"define",value:function(a){var u=this;if(!a)throw new Error("Cannot configure a schema with no rules");if(ii(a)!=="object"||Array.isArray(a))throw new Error("Rules must be an object");this.rules={},Object.keys(a).forEach(function(m){var M=a[m];u.rules[m]=Array.isArray(M)?M:[M]})}},{key:"messages",value:function(a){return a&&(this._messages=oz(e4(),a)),this._messages}},{key:"validate",value:function(a){var u=this,m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},L=a,z=m,U=M;if(typeof z=="function"&&(U=z,z={}),!this.rules||Object.keys(this.rules).length===0)return U&&U(null,L),Promise.resolve(L);function W(he){var oe=[],me={};function ge(ce){if(Array.isArray(ce)){var _e;oe=(_e=oe).concat.apply(_e,on(ce))}else oe.push(ce)}for(var de=0;de<he.length;de++)ge(he[de]);oe.length?(me=n4(oe),U(oe,me)):U(null,L)}if(z.messages){var J=this.messages();J===t4&&(J=e4()),oz(J,z.messages),z.messages=J}else z.messages=this.messages();var te={},ae=z.keys||Object.keys(this.rules);ae.forEach(function(he){var oe=u.rules[he],me=L[he];oe.forEach(function(ge){var de=ge;typeof de.transform=="function"&&(L===a&&(L=Ft({},L)),me=L[he]=de.transform(me),me!=null&&(de.type=de.type||(Array.isArray(me)?"array":ii(me)))),typeof de=="function"?de={validator:de}:de=Ft({},de),de.validator=u.getValidationMethod(de),de.validator&&(de.field=he,de.fullField=de.fullField||he,de.type=u.getType(de),te[he]=te[he]||[],te[he].push({rule:de,value:me,source:L,field:he}))})});var ve={};return hte(te,z,function(he,oe){var me=he.rule,ge=(me.type==="object"||me.type==="array")&&(ii(me.fields)==="object"||ii(me.defaultField)==="object");ge=ge&&(me.required||!me.required&&he.value),me.field=he.field;function de(De,We){return Ft(Ft({},We),{},{fullField:"".concat(me.fullField,".").concat(De),fullFields:me.fullFields?[].concat(on(me.fullFields),[De]):[De]})}function ce(){var De=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],We=Array.isArray(De)?De:[De];!z.suppressWarning&&We.length&&t.warning("async-validator:",We),We.length&&me.message!==void 0&&(We=[].concat(me.message));var Xe=We.map(iz(me,L));if(z.first&&Xe.length)return ve[me.field]=1,oe(Xe);if(!ge)oe(Xe);else{if(me.required&&!he.value)return me.message!==void 0?Xe=[].concat(me.message).map(iz(me,L)):z.error&&(Xe=[z.error(me,Ou(z.messages.required,me.field))]),oe(Xe);var et={};me.defaultField&&Object.keys(he.value).map(function(ot){et[ot]=me.defaultField}),et=Ft(Ft({},et),he.rule.fields);var Ye={};Object.keys(et).forEach(function(ot){var ct=et[ot],Dt=Array.isArray(ct)?ct:[ct];Ye[ot]=Dt.map(de.bind(null,ot))});var at=new t(Ye);at.messages(z.messages),he.rule.options&&(he.rule.options.messages=z.messages,he.rule.options.error=z.error),at.validate(he.value,he.rule.options||z,function(ot){var ct=[];Xe&&Xe.length&&ct.push.apply(ct,on(Xe)),ot&&ot.length&&ct.push.apply(ct,on(ot)),oe(ct.length?ct:null)})}}var _e;if(me.asyncValidator)_e=me.asyncValidator(me,he.value,ce,he.source,z);else if(me.validator){try{_e=me.validator(me,he.value,ce,he.source,z)}catch(De){var Re,Ee;(Re=(Ee=console).error)===null||Re===void 0||Re.call(Ee,De),z.suppressValidatorError||setTimeout(function(){throw De},0),ce(De.message)}_e===!0?ce():_e===!1?ce(typeof me.message=="function"?me.message(me.fullField||me.field):me.message||"".concat(me.fullField||me.field," fails")):_e instanceof Array?ce(_e):_e instanceof Error&&ce(_e.message)}_e&&_e.then&&_e.then(function(){return ce()},function(De){return ce(De)})},function(he){W(he)},L)}},{key:"getType",value:function(a){if(a.type===void 0&&a.pattern instanceof RegExp&&(a.type="pattern"),typeof a.validator!="function"&&a.type&&!bw.hasOwnProperty(a.type))throw new Error(Ou("Unknown rule type %s",a.type));return a.type||"string"}},{key:"getValidationMethod",value:function(a){if(typeof a.validator=="function")return a.validator;var u=Object.keys(a),m=u.indexOf("message");return m!==-1&&u.splice(m,1),u.length===1&&u[0]==="required"?bw.required:bw[this.getType(a)]||void 0}}]),t}();_t(EC,"register",function(i,a){if(typeof a!="function")throw new Error("Cannot register a validator by type, validator is not a function");bw[i]=a});_t(EC,"warning",ste);_t(EC,"messages",t4);_t(EC,"validators",bw);var Iu="'${name}' is not a valid ${type}",K9={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:Iu,method:Iu,array:Iu,object:Iu,number:Iu,date:Iu,boolean:Iu,integer:Iu,float:Iu,regexp:Iu,email:Iu,url:Iu,hex:Iu},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},sz=EC;function Fte(t,i){return t.replace(/\$\{\w+\}/g,function(a){var u=a.slice(2,-1);return i[u]})}var lz="CODE_LOGIC_ERROR";function i4(t,i,a,u,m){return o4.apply(this,arguments)}function o4(){return o4=h0(Rl().mark(function t(i,a,u,m,M){var L,z,U,W,J,te,ae,ve,he;return Rl().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return L=Ft({},u),delete L.ruleIndex,sz.warning=function(){},L.validator&&(z=L.validator,L.validator=function(){try{return z.apply(void 0,arguments)}catch(ge){return console.error(ge),Promise.reject(lz)}}),U=null,L&&L.type==="array"&&L.defaultField&&(U=L.defaultField,delete L.defaultField),W=new sz(_t({},i,[L])),J=z1(K9,m.validateMessages),W.messages(J),te=[],me.prev=10,me.next=13,Promise.resolve(W.validate(_t({},i,a),Ft({},m)));case 13:me.next=18;break;case 15:me.prev=15,me.t0=me.catch(10),me.t0.errors&&(te=me.t0.errors.map(function(ge,de){var ce=ge.message,_e=ce===lz?J.default:ce;return ie.isValidElement(_e)?ie.cloneElement(_e,{key:"error_".concat(de)}):_e}));case 18:if(!(!te.length&&U)){me.next=23;break}return me.next=21,Promise.all(a.map(function(ge,de){return i4("".concat(i,".").concat(de),ge,U,m,M)}));case 21:return ae=me.sent,me.abrupt("return",ae.reduce(function(ge,de){return[].concat(on(ge),on(de))},[]));case 23:return ve=Ft(Ft({},u),{},{name:i,enum:(u.enum||[]).join(", ")},M),he=te.map(function(ge){return typeof ge=="string"?Fte(ge,ve):ge}),me.abrupt("return",he);case 26:case"end":return me.stop()}},t,null,[[10,15]])})),o4.apply(this,arguments)}function Nte(t,i,a,u,m,M){var L=t.join("."),z=a.map(function(J,te){var ae=J.validator,ve=Ft(Ft({},J),{},{ruleIndex:te});return ae&&(ve.validator=function(he,oe,me){var ge=!1,de=function(){for(var Re=arguments.length,Ee=new Array(Re),De=0;De<Re;De++)Ee[De]=arguments[De];Promise.resolve().then(function(){Il(!ge,"Your validator function has already return a promise. `callback` will be ignored."),ge||me.apply(void 0,Ee)})},ce=ae(he,oe,de);ge=ce&&typeof ce.then=="function"&&typeof ce.catch=="function",Il(ge,"`callback` is deprecated. Please return a promise instead."),ge&&ce.then(function(){me()}).catch(function(_e){me(_e||" ")})}),ve}).sort(function(J,te){var ae=J.warningOnly,ve=J.ruleIndex,he=te.warningOnly,oe=te.ruleIndex;return!!ae==!!he?ve-oe:ae?1:-1}),U;if(m===!0)U=new Promise(function(){var J=h0(Rl().mark(function te(ae,ve){var he,oe,me;return Rl().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:he=0;case 1:if(!(he<z.length)){de.next=12;break}return oe=z[he],de.next=5,i4(L,i,oe,u,M);case 5:if(me=de.sent,!me.length){de.next=9;break}return ve([{errors:me,rule:oe}]),de.abrupt("return");case 9:he+=1,de.next=1;break;case 12:ae([]);case 13:case"end":return de.stop()}},te)}));return function(te,ae){return J.apply(this,arguments)}}());else{var W=z.map(function(J){return i4(L,i,J,u,M).then(function(te){return{errors:te,rule:J}})});U=(m?zte(W):Bte(W)).then(function(J){return Promise.reject(J)})}return U.catch(function(J){return J}),U}function Bte(t){return a4.apply(this,arguments)}function a4(){return a4=h0(Rl().mark(function t(i){return Rl().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",Promise.all(i).then(function(m){var M,L=(M=[]).concat.apply(M,on(m));return L}));case 1:case"end":return u.stop()}},t)})),a4.apply(this,arguments)}function zte(t){return s4.apply(this,arguments)}function s4(){return s4=h0(Rl().mark(function t(i){var a;return Rl().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return a=0,m.abrupt("return",new Promise(function(M){i.forEach(function(L){L.then(function(z){z.errors.length&&M([z]),a+=1,a===i.length&&M([])})})}));case 2:case"end":return m.stop()}},t)})),s4.apply(this,arguments)}function Fa(t){return $P(t)}function uz(t,i){var a={};return i.forEach(function(u){var m=If(t,u);a=Ch(a,u,m)}),a}function q1(t,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return t&&t.some(function(u){return J9(i,u,a)})}function J9(t,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!t||!i||!a&&t.length!==i.length?!1:i.every(function(u,m){return t[m]===u})}function Ute(t,i){if(t===i)return!0;if(!t&&i||t&&!i||!t||!i||ii(t)!=="object"||ii(i)!=="object")return!1;var a=Object.keys(t),u=Object.keys(i),m=new Set([].concat(a,u));return on(m).every(function(M){var L=t[M],z=i[M];return typeof L=="function"&&typeof z=="function"?!0:L===z})}function kte(t){var i=arguments.length<=1?void 0:arguments[1];return i&&i.target&&ii(i.target)==="object"&&t in i.target?i.target[t]:i}function cz(t,i,a){var u=t.length;if(i<0||i>=u||a<0||a>=u)return t;var m=t[i],M=i-a;return M>0?[].concat(on(t.slice(0,a)),[m],on(t.slice(a,i)),on(t.slice(i+1,u))):M<0?[].concat(on(t.slice(0,i)),on(t.slice(i+1,a+1)),[m],on(t.slice(a+1,u))):t}var Hte=["name"],mc=[];function hz(t,i,a,u,m,M){return typeof t=="function"?t(i,a,"source"in M?{source:M.source}:{}):u!==m}var rD=function(t){Ym(a,t);var i=gx(a);function a(u){var m;if(hl(this,a),m=i.call(this,u),_t(Bi(m),"state",{resetCount:0}),_t(Bi(m),"cancelRegisterFunc",null),_t(Bi(m),"mounted",!1),_t(Bi(m),"touched",!1),_t(Bi(m),"dirty",!1),_t(Bi(m),"validatePromise",void 0),_t(Bi(m),"prevValidating",void 0),_t(Bi(m),"errors",mc),_t(Bi(m),"warnings",mc),_t(Bi(m),"cancelRegister",function(){var U=m.props,W=U.preserve,J=U.isListField,te=U.name;m.cancelRegisterFunc&&m.cancelRegisterFunc(J,W,Fa(te)),m.cancelRegisterFunc=null}),_t(Bi(m),"getNamePath",function(){var U=m.props,W=U.name,J=U.fieldContext,te=J.prefixName,ae=te===void 0?[]:te;return W!==void 0?[].concat(on(ae),on(W)):[]}),_t(Bi(m),"getRules",function(){var U=m.props,W=U.rules,J=W===void 0?[]:W,te=U.fieldContext;return J.map(function(ae){return typeof ae=="function"?ae(te):ae})}),_t(Bi(m),"refresh",function(){m.mounted&&m.setState(function(U){var W=U.resetCount;return{resetCount:W+1}})}),_t(Bi(m),"metaCache",null),_t(Bi(m),"triggerMetaEvent",function(U){var W=m.props.onMetaChange;if(W){var J=Ft(Ft({},m.getMeta()),{},{destroy:U});oC(m.metaCache,J)||W(J),m.metaCache=J}else m.metaCache=null}),_t(Bi(m),"onStoreChange",function(U,W,J){var te=m.props,ae=te.shouldUpdate,ve=te.dependencies,he=ve===void 0?[]:ve,oe=te.onReset,me=J.store,ge=m.getNamePath(),de=m.getValue(U),ce=m.getValue(me),_e=W&&q1(W,ge);switch(J.type==="valueUpdate"&&J.source==="external"&&!oC(de,ce)&&(m.touched=!0,m.dirty=!0,m.validatePromise=null,m.errors=mc,m.warnings=mc,m.triggerMetaEvent()),J.type){case"reset":if(!W||_e){m.touched=!1,m.dirty=!1,m.validatePromise=void 0,m.errors=mc,m.warnings=mc,m.triggerMetaEvent(),oe==null||oe(),m.refresh();return}break;case"remove":{if(ae){m.reRender();return}break}case"setField":{var Re=J.data;if(_e){"touched"in Re&&(m.touched=Re.touched),"validating"in Re&&!("originRCField"in Re)&&(m.validatePromise=Re.validating?Promise.resolve([]):null),"errors"in Re&&(m.errors=Re.errors||mc),"warnings"in Re&&(m.warnings=Re.warnings||mc),m.dirty=!0,m.triggerMetaEvent(),m.reRender();return}else if("value"in Re&&q1(W,ge,!0)){m.reRender();return}if(ae&&!ge.length&&hz(ae,U,me,de,ce,J)){m.reRender();return}break}case"dependenciesUpdate":{var Ee=he.map(Fa);if(Ee.some(function(De){return q1(J.relatedFields,De)})){m.reRender();return}break}default:if(_e||(!he.length||ge.length||ae)&&hz(ae,U,me,de,ce,J)){m.reRender();return}break}ae===!0&&m.reRender()}),_t(Bi(m),"validateRules",function(U){var W=m.getNamePath(),J=m.getValue(),te=U||{},ae=te.triggerName,ve=te.validateOnly,he=ve===void 0?!1:ve,oe=Promise.resolve().then(h0(Rl().mark(function me(){var ge,de,ce,_e,Re,Ee,De;return Rl().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:if(m.mounted){Xe.next=2;break}return Xe.abrupt("return",[]);case 2:if(ge=m.props,de=ge.validateFirst,ce=de===void 0?!1:de,_e=ge.messageVariables,Re=ge.validateDebounce,Ee=m.getRules(),ae&&(Ee=Ee.filter(function(et){return et}).filter(function(et){var Ye=et.validateTrigger;if(!Ye)return!0;var at=$P(Ye);return at.includes(ae)})),!(Re&&ae)){Xe.next=10;break}return Xe.next=8,new Promise(function(et){setTimeout(et,Re)});case 8:if(m.validatePromise===oe){Xe.next=10;break}return Xe.abrupt("return",[]);case 10:return De=Nte(W,J,Ee,U,ce,_e),De.catch(function(et){return et}).then(function(){var et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:mc;if(m.validatePromise===oe){var Ye;m.validatePromise=null;var at=[],ot=[];(Ye=et.forEach)===null||Ye===void 0||Ye.call(et,function(ct){var Dt=ct.rule.warningOnly,$e=ct.errors,tt=$e===void 0?mc:$e;Dt?ot.push.apply(ot,on(tt)):at.push.apply(at,on(tt))}),m.errors=at,m.warnings=ot,m.triggerMetaEvent(),m.reRender()}}),Xe.abrupt("return",De);case 13:case"end":return Xe.stop()}},me)})));return he||(m.validatePromise=oe,m.dirty=!0,m.errors=mc,m.warnings=mc,m.triggerMetaEvent(),m.reRender()),oe}),_t(Bi(m),"isFieldValidating",function(){return!!m.validatePromise}),_t(Bi(m),"isFieldTouched",function(){return m.touched}),_t(Bi(m),"isFieldDirty",function(){if(m.dirty||m.props.initialValue!==void 0)return!0;var U=m.props.fieldContext,W=U.getInternalHooks(Gv),J=W.getInitialValue;return J(m.getNamePath())!==void 0}),_t(Bi(m),"getErrors",function(){return m.errors}),_t(Bi(m),"getWarnings",function(){return m.warnings}),_t(Bi(m),"isListField",function(){return m.props.isListField}),_t(Bi(m),"isList",function(){return m.props.isList}),_t(Bi(m),"isPreserve",function(){return m.props.preserve}),_t(Bi(m),"getMeta",function(){m.prevValidating=m.isFieldValidating();var U={touched:m.isFieldTouched(),validating:m.prevValidating,errors:m.errors,warnings:m.warnings,name:m.getNamePath(),validated:m.validatePromise===null};return U}),_t(Bi(m),"getOnlyChild",function(U){if(typeof U=="function"){var W=m.getMeta();return Ft(Ft({},m.getOnlyChild(U(m.getControlled(),W,m.props.fieldContext))),{},{isFunction:!0})}var J=Pf(U);return J.length!==1||!ie.isValidElement(J[0])?{child:J,isFunction:!1}:{child:J[0],isFunction:!1}}),_t(Bi(m),"getValue",function(U){var W=m.props.fieldContext.getFieldsValue,J=m.getNamePath();return If(U||W(!0),J)}),_t(Bi(m),"getControlled",function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},W=m.props,J=W.name,te=W.trigger,ae=W.validateTrigger,ve=W.getValueFromEvent,he=W.normalize,oe=W.valuePropName,me=W.getValueProps,ge=W.fieldContext,de=ae!==void 0?ae:ge.validateTrigger,ce=m.getNamePath(),_e=ge.getInternalHooks,Re=ge.getFieldsValue,Ee=_e(Gv),De=Ee.dispatch,We=m.getValue(),Xe=me||function(ct){return _t({},oe,ct)},et=U[te],Ye=J!==void 0?Xe(We):{},at=Ft(Ft({},U),Ye);at[te]=function(){m.touched=!0,m.dirty=!0,m.triggerMetaEvent();for(var ct,Dt=arguments.length,$e=new Array(Dt),tt=0;tt<Dt;tt++)$e[tt]=arguments[tt];ve?ct=ve.apply(void 0,$e):ct=kte.apply(void 0,[oe].concat($e)),he&&(ct=he(ct,We,Re(!0))),De({type:"updateValue",namePath:ce,value:ct}),et&&et.apply(void 0,$e)};var ot=$P(de||[]);return ot.forEach(function(ct){var Dt=at[ct];at[ct]=function(){Dt&&Dt.apply(void 0,arguments);var $e=m.props.rules;$e&&$e.length&&De({type:"validateField",namePath:ce,triggerName:ct})}}),at}),u.fieldContext){var M=u.fieldContext.getInternalHooks,L=M(Gv),z=L.initEntityValue;z(Bi(m))}return m}return fl(a,[{key:"componentDidMount",value:function(){var m=this.props,M=m.shouldUpdate,L=m.fieldContext;if(this.mounted=!0,L){var z=L.getInternalHooks,U=z(Gv),W=U.registerField;this.cancelRegisterFunc=W(this)}M===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var m=this.state.resetCount,M=this.props.children,L=this.getOnlyChild(M),z=L.child,U=L.isFunction,W;return U?W=z:ie.isValidElement(z)?W=ie.cloneElement(z,this.getControlled(z.props)):(Il(!z,"`children` of Field is not validate ReactElement."),W=z),ie.createElement(ie.Fragment,{key:m},W)}}]),a}(ie.Component);_t(rD,"contextType",ux);_t(rD,"defaultProps",{trigger:"onChange",valuePropName:"value"});function Q9(t){var i=t.name,a=Qi(t,Hte),u=ie.useContext(ux),m=ie.useContext(LE),M=i!==void 0?Fa(i):void 0,L="keep";return a.isListField||(L="_".concat((M||[]).join("_"))),ie.createElement(rD,Sn({key:L,name:M,isListField:!!m},a,{fieldContext:u}))}function jte(t){var i=t.name,a=t.initialValue,u=t.children,m=t.rules,M=t.validateTrigger,L=t.isListField,z=ie.useContext(ux),U=ie.useContext(LE),W=ie.useRef({keys:[],id:0}),J=W.current,te=ie.useMemo(function(){var oe=Fa(z.prefixName)||[];return[].concat(on(oe),on(Fa(i)))},[z.prefixName,i]),ae=ie.useMemo(function(){return Ft(Ft({},z),{},{prefixName:te})},[z,te]),ve=ie.useMemo(function(){return{getKey:function(me){var ge=te.length,de=me[ge];return[J.keys[de],me.slice(ge+1)]}}},[te]);if(typeof u!="function")return Il(!1,"Form.List only accepts function as children."),null;var he=function(me,ge,de){var ce=de.source;return ce==="internal"?!1:me!==ge};return ie.createElement(LE.Provider,{value:ve},ie.createElement(ux.Provider,{value:ae},ie.createElement(Q9,{name:[],shouldUpdate:he,rules:m,validateTrigger:M,initialValue:a,isList:!0,isListField:L??!!U},function(oe,me){var ge=oe.value,de=ge===void 0?[]:ge,ce=oe.onChange,_e=z.getFieldValue,Re=function(){var Xe=_e(te||[]);return Xe||[]},Ee={add:function(Xe,et){var Ye=Re();et>=0&&et<=Ye.length?(J.keys=[].concat(on(J.keys.slice(0,et)),[J.id],on(J.keys.slice(et))),ce([].concat(on(Ye.slice(0,et)),[Xe],on(Ye.slice(et))))):(J.keys=[].concat(on(J.keys),[J.id]),ce([].concat(on(Ye),[Xe]))),J.id+=1},remove:function(Xe){var et=Re(),Ye=new Set(Array.isArray(Xe)?Xe:[Xe]);Ye.size<=0||(J.keys=J.keys.filter(function(at,ot){return!Ye.has(ot)}),ce(et.filter(function(at,ot){return!Ye.has(ot)})))},move:function(Xe,et){if(Xe!==et){var Ye=Re();Xe<0||Xe>=Ye.length||et<0||et>=Ye.length||(J.keys=cz(J.keys,Xe,et),ce(cz(Ye,Xe,et)))}}},De=de||[];return Array.isArray(De)||(De=[]),u(De.map(function(We,Xe){var et=J.keys[Xe];return et===void 0&&(J.keys[Xe]=J.id,et=J.keys[Xe],J.id+=1),{name:Xe,key:et,isListField:!0}}),Ee,me)})))}function Gte(t){var i=!1,a=t.length,u=[];return t.length?new Promise(function(m,M){t.forEach(function(L,z){L.catch(function(U){return i=!0,U}).then(function(U){a-=1,u[z]=U,!(a>0)&&(i&&M(u),m(u))})})}):Promise.resolve([])}var $9="__@field_split__";function g5(t){return t.map(function(i){return"".concat(ii(i),":").concat(i)}).join($9)}var v1=function(){function t(){hl(this,t),_t(this,"kvs",new Map)}return fl(t,[{key:"set",value:function(a,u){this.kvs.set(g5(a),u)}},{key:"get",value:function(a){return this.kvs.get(g5(a))}},{key:"update",value:function(a,u){var m=this.get(a),M=u(m);M?this.set(a,M):this.delete(a)}},{key:"delete",value:function(a){this.kvs.delete(g5(a))}},{key:"map",value:function(a){return on(this.kvs.entries()).map(function(u){var m=sr(u,2),M=m[0],L=m[1],z=M.split($9);return a({key:z.map(function(U){var W=U.match(/^([^:]*):(.*)$/),J=sr(W,3),te=J[1],ae=J[2];return te==="number"?Number(ae):ae}),value:L})})}},{key:"toJSON",value:function(){var a={};return this.map(function(u){var m=u.key,M=u.value;return a[m.join(".")]=M,null}),a}}]),t}(),Vte=["name"],Wte=fl(function t(i){var a=this;hl(this,t),_t(this,"formHooked",!1),_t(this,"forceRootUpdate",void 0),_t(this,"subscribable",!0),_t(this,"store",{}),_t(this,"fieldEntities",[]),_t(this,"initialValues",{}),_t(this,"callbacks",{}),_t(this,"validateMessages",null),_t(this,"preserve",null),_t(this,"lastValidatePromise",null),_t(this,"getForm",function(){return{getFieldValue:a.getFieldValue,getFieldsValue:a.getFieldsValue,getFieldError:a.getFieldError,getFieldWarning:a.getFieldWarning,getFieldsError:a.getFieldsError,isFieldsTouched:a.isFieldsTouched,isFieldTouched:a.isFieldTouched,isFieldValidating:a.isFieldValidating,isFieldsValidating:a.isFieldsValidating,resetFields:a.resetFields,setFields:a.setFields,setFieldValue:a.setFieldValue,setFieldsValue:a.setFieldsValue,validateFields:a.validateFields,submit:a.submit,_init:!0,getInternalHooks:a.getInternalHooks}}),_t(this,"getInternalHooks",function(u){return u===Gv?(a.formHooked=!0,{dispatch:a.dispatch,initEntityValue:a.initEntityValue,registerField:a.registerField,useSubscribe:a.useSubscribe,setInitialValues:a.setInitialValues,destroyForm:a.destroyForm,setCallbacks:a.setCallbacks,setValidateMessages:a.setValidateMessages,getFields:a.getFields,setPreserve:a.setPreserve,getInitialValue:a.getInitialValue,registerWatch:a.registerWatch}):(Il(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),_t(this,"useSubscribe",function(u){a.subscribable=u}),_t(this,"prevWithoutPreserves",null),_t(this,"setInitialValues",function(u,m){if(a.initialValues=u||{},m){var M,L=z1(u,a.store);(M=a.prevWithoutPreserves)===null||M===void 0||M.map(function(z){var U=z.key;L=Ch(L,U,If(u,U))}),a.prevWithoutPreserves=null,a.updateStore(L)}}),_t(this,"destroyForm",function(){var u=new v1;a.getFieldEntities(!0).forEach(function(m){a.isMergedPreserve(m.isPreserve())||u.set(m.getNamePath(),!0)}),a.prevWithoutPreserves=u}),_t(this,"getInitialValue",function(u){var m=If(a.initialValues,u);return u.length?z1(m):m}),_t(this,"setCallbacks",function(u){a.callbacks=u}),_t(this,"setValidateMessages",function(u){a.validateMessages=u}),_t(this,"setPreserve",function(u){a.preserve=u}),_t(this,"watchList",[]),_t(this,"registerWatch",function(u){return a.watchList.push(u),function(){a.watchList=a.watchList.filter(function(m){return m!==u})}}),_t(this,"notifyWatch",function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(a.watchList.length){var m=a.getFieldsValue(),M=a.getFieldsValue(!0);a.watchList.forEach(function(L){L(m,M,u)})}}),_t(this,"timeoutId",null),_t(this,"warningUnhooked",function(){}),_t(this,"updateStore",function(u){a.store=u}),_t(this,"getFieldEntities",function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u?a.fieldEntities.filter(function(m){return m.getNamePath().length}):a.fieldEntities}),_t(this,"getFieldsMap",function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,m=new v1;return a.getFieldEntities(u).forEach(function(M){var L=M.getNamePath();m.set(L,M)}),m}),_t(this,"getFieldEntitiesForNamePathList",function(u){if(!u)return a.getFieldEntities(!0);var m=a.getFieldsMap(!0);return u.map(function(M){var L=Fa(M);return m.get(L)||{INVALIDATE_NAME_PATH:Fa(M)}})}),_t(this,"getFieldsValue",function(u,m){a.warningUnhooked();var M,L,z;if(u===!0||Array.isArray(u)?(M=u,L=m):u&&ii(u)==="object"&&(z=u.strict,L=u.filter),M===!0&&!L)return a.store;var U=a.getFieldEntitiesForNamePathList(Array.isArray(M)?M:null),W=[];return U.forEach(function(J){var te,ae,ve="INVALIDATE_NAME_PATH"in J?J.INVALIDATE_NAME_PATH:J.getNamePath();if(z){var he,oe;if((he=(oe=J).isList)!==null&&he!==void 0&&he.call(oe))return}else if(!M&&(te=(ae=J).isListField)!==null&&te!==void 0&&te.call(ae))return;if(!L)W.push(ve);else{var me="getMeta"in J?J.getMeta():null;L(me)&&W.push(ve)}}),uz(a.store,W.map(Fa))}),_t(this,"getFieldValue",function(u){a.warningUnhooked();var m=Fa(u);return If(a.store,m)}),_t(this,"getFieldsError",function(u){a.warningUnhooked();var m=a.getFieldEntitiesForNamePathList(u);return m.map(function(M,L){return M&&!("INVALIDATE_NAME_PATH"in M)?{name:M.getNamePath(),errors:M.getErrors(),warnings:M.getWarnings()}:{name:Fa(u[L]),errors:[],warnings:[]}})}),_t(this,"getFieldError",function(u){a.warningUnhooked();var m=Fa(u),M=a.getFieldsError([m])[0];return M.errors}),_t(this,"getFieldWarning",function(u){a.warningUnhooked();var m=Fa(u),M=a.getFieldsError([m])[0];return M.warnings}),_t(this,"isFieldsTouched",function(){a.warningUnhooked();for(var u=arguments.length,m=new Array(u),M=0;M<u;M++)m[M]=arguments[M];var L=m[0],z=m[1],U,W=!1;m.length===0?U=null:m.length===1?Array.isArray(L)?(U=L.map(Fa),W=!1):(U=null,W=L):(U=L.map(Fa),W=z);var J=a.getFieldEntities(!0),te=function(me){return me.isFieldTouched()};if(!U)return W?J.every(function(oe){return te(oe)||oe.isList()}):J.some(te);var ae=new v1;U.forEach(function(oe){ae.set(oe,[])}),J.forEach(function(oe){var me=oe.getNamePath();U.forEach(function(ge){ge.every(function(de,ce){return me[ce]===de})&&ae.update(ge,function(de){return[].concat(on(de),[oe])})})});var ve=function(me){return me.some(te)},he=ae.map(function(oe){var me=oe.value;return me});return W?he.every(ve):he.some(ve)}),_t(this,"isFieldTouched",function(u){return a.warningUnhooked(),a.isFieldsTouched([u])}),_t(this,"isFieldsValidating",function(u){a.warningUnhooked();var m=a.getFieldEntities();if(!u)return m.some(function(L){return L.isFieldValidating()});var M=u.map(Fa);return m.some(function(L){var z=L.getNamePath();return q1(M,z)&&L.isFieldValidating()})}),_t(this,"isFieldValidating",function(u){return a.warningUnhooked(),a.isFieldsValidating([u])}),_t(this,"resetWithFieldInitialValue",function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=new v1,M=a.getFieldEntities(!0);M.forEach(function(U){var W=U.props.initialValue,J=U.getNamePath();if(W!==void 0){var te=m.get(J)||new Set;te.add({entity:U,value:W}),m.set(J,te)}});var L=function(W){W.forEach(function(J){var te=J.props.initialValue;if(te!==void 0){var ae=J.getNamePath(),ve=a.getInitialValue(ae);if(ve!==void 0)Il(!1,"Form already set 'initialValues' with path '".concat(ae.join("."),"'. Field can not overwrite it."));else{var he=m.get(ae);if(he&&he.size>1)Il(!1,"Multiple Field with path '".concat(ae.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(he){var oe=a.getFieldValue(ae),me=J.isListField();!me&&(!u.skipExist||oe===void 0)&&a.updateStore(Ch(a.store,ae,on(he)[0].value))}}}})},z;u.entities?z=u.entities:u.namePathList?(z=[],u.namePathList.forEach(function(U){var W=m.get(U);if(W){var J;(J=z).push.apply(J,on(on(W).map(function(te){return te.entity})))}})):z=M,L(z)}),_t(this,"resetFields",function(u){a.warningUnhooked();var m=a.store;if(!u){a.updateStore(z1(a.initialValues)),a.resetWithFieldInitialValue(),a.notifyObservers(m,null,{type:"reset"}),a.notifyWatch();return}var M=u.map(Fa);M.forEach(function(L){var z=a.getInitialValue(L);a.updateStore(Ch(a.store,L,z))}),a.resetWithFieldInitialValue({namePathList:M}),a.notifyObservers(m,M,{type:"reset"}),a.notifyWatch(M)}),_t(this,"setFields",function(u){a.warningUnhooked();var m=a.store,M=[];u.forEach(function(L){var z=L.name,U=Qi(L,Vte),W=Fa(z);M.push(W),"value"in U&&a.updateStore(Ch(a.store,W,U.value)),a.notifyObservers(m,[W],{type:"setField",data:L})}),a.notifyWatch(M)}),_t(this,"getFields",function(){var u=a.getFieldEntities(!0),m=u.map(function(M){var L=M.getNamePath(),z=M.getMeta(),U=Ft(Ft({},z),{},{name:L,value:a.getFieldValue(L)});return Object.defineProperty(U,"originRCField",{value:!0}),U});return m}),_t(this,"initEntityValue",function(u){var m=u.props.initialValue;if(m!==void 0){var M=u.getNamePath(),L=If(a.store,M);L===void 0&&a.updateStore(Ch(a.store,M,m))}}),_t(this,"isMergedPreserve",function(u){var m=u!==void 0?u:a.preserve;return m??!0}),_t(this,"registerField",function(u){a.fieldEntities.push(u);var m=u.getNamePath();if(a.notifyWatch([m]),u.props.initialValue!==void 0){var M=a.store;a.resetWithFieldInitialValue({entities:[u],skipExist:!0}),a.notifyObservers(M,[u.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(L,z){var U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(a.fieldEntities=a.fieldEntities.filter(function(te){return te!==u}),!a.isMergedPreserve(z)&&(!L||U.length>1)){var W=L?void 0:a.getInitialValue(m);if(m.length&&a.getFieldValue(m)!==W&&a.fieldEntities.every(function(te){return!J9(te.getNamePath(),m)})){var J=a.store;a.updateStore(Ch(J,m,W,!0)),a.notifyObservers(J,[m],{type:"remove"}),a.triggerDependenciesUpdate(J,m)}}a.notifyWatch([m])}}),_t(this,"dispatch",function(u){switch(u.type){case"updateValue":{var m=u.namePath,M=u.value;a.updateValue(m,M);break}case"validateField":{var L=u.namePath,z=u.triggerName;a.validateFields([L],{triggerName:z});break}}}),_t(this,"notifyObservers",function(u,m,M){if(a.subscribable){var L=Ft(Ft({},M),{},{store:a.getFieldsValue(!0)});a.getFieldEntities().forEach(function(z){var U=z.onStoreChange;U(u,m,L)})}else a.forceRootUpdate()}),_t(this,"triggerDependenciesUpdate",function(u,m){var M=a.getDependencyChildrenFields(m);return M.length&&a.validateFields(M),a.notifyObservers(u,M,{type:"dependenciesUpdate",relatedFields:[m].concat(on(M))}),M}),_t(this,"updateValue",function(u,m){var M=Fa(u),L=a.store;a.updateStore(Ch(a.store,M,m)),a.notifyObservers(L,[M],{type:"valueUpdate",source:"internal"}),a.notifyWatch([M]);var z=a.triggerDependenciesUpdate(L,M),U=a.callbacks.onValuesChange;if(U){var W=uz(a.store,[M]);U(W,a.getFieldsValue())}a.triggerOnFieldsChange([M].concat(on(z)))}),_t(this,"setFieldsValue",function(u){a.warningUnhooked();var m=a.store;if(u){var M=z1(a.store,u);a.updateStore(M)}a.notifyObservers(m,null,{type:"valueUpdate",source:"external"}),a.notifyWatch()}),_t(this,"setFieldValue",function(u,m){a.setFields([{name:u,value:m}])}),_t(this,"getDependencyChildrenFields",function(u){var m=new Set,M=[],L=new v1;a.getFieldEntities().forEach(function(U){var W=U.props.dependencies;(W||[]).forEach(function(J){var te=Fa(J);L.update(te,function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return ae.add(U),ae})})});var z=function U(W){var J=L.get(W)||new Set;J.forEach(function(te){if(!m.has(te)){m.add(te);var ae=te.getNamePath();te.isFieldDirty()&&ae.length&&(M.push(ae),U(ae))}})};return z(u),M}),_t(this,"triggerOnFieldsChange",function(u,m){var M=a.callbacks.onFieldsChange;if(M){var L=a.getFields();if(m){var z=new v1;m.forEach(function(W){var J=W.name,te=W.errors;z.set(J,te)}),L.forEach(function(W){W.errors=z.get(W.name)||W.errors})}var U=L.filter(function(W){var J=W.name;return q1(u,J)});U.length&&M(U,L)}}),_t(this,"validateFields",function(u,m){a.warningUnhooked();var M,L;Array.isArray(u)||typeof u=="string"||typeof m=="string"?(M=u,L=m):L=u;var z=!!M,U=z?M.map(Fa):[],W=[],J=String(Date.now()),te=new Set,ae=L||{},ve=ae.recursive,he=ae.dirty;a.getFieldEntities(!0).forEach(function(de){if(z||U.push(de.getNamePath()),!(!de.props.rules||!de.props.rules.length)&&!(he&&!de.isFieldDirty())){var ce=de.getNamePath();if(te.add(ce.join(J)),!z||q1(U,ce,ve)){var _e=de.validateRules(Ft({validateMessages:Ft(Ft({},K9),a.validateMessages)},L));W.push(_e.then(function(){return{name:ce,errors:[],warnings:[]}}).catch(function(Re){var Ee,De=[],We=[];return(Ee=Re.forEach)===null||Ee===void 0||Ee.call(Re,function(Xe){var et=Xe.rule.warningOnly,Ye=Xe.errors;et?We.push.apply(We,on(Ye)):De.push.apply(De,on(Ye))}),De.length?Promise.reject({name:ce,errors:De,warnings:We}):{name:ce,errors:De,warnings:We}}))}}});var oe=Gte(W);a.lastValidatePromise=oe,oe.catch(function(de){return de}).then(function(de){var ce=de.map(function(_e){var Re=_e.name;return Re});a.notifyObservers(a.store,ce,{type:"validateFinish"}),a.triggerOnFieldsChange(ce,de)});var me=oe.then(function(){return a.lastValidatePromise===oe?Promise.resolve(a.getFieldsValue(U)):Promise.reject([])}).catch(function(de){var ce=de.filter(function(_e){return _e&&_e.errors.length});return Promise.reject({values:a.getFieldsValue(U),errorFields:ce,outOfDate:a.lastValidatePromise!==oe})});me.catch(function(de){return de});var ge=U.filter(function(de){return te.has(de.join(J))});return a.triggerOnFieldsChange(ge),me}),_t(this,"submit",function(){a.warningUnhooked(),a.validateFields().then(function(u){var m=a.callbacks.onFinish;if(m)try{m(u)}catch(M){console.error(M)}}).catch(function(u){var m=a.callbacks.onFinishFailed;m&&m(u)})}),this.forceRootUpdate=i});function eH(t){var i=ie.useRef(),a=ie.useState({}),u=sr(a,2),m=u[1];if(!i.current)if(t)i.current=t;else{var M=function(){m({})},L=new Wte(M);i.current=L.getForm()}return[i.current]}var l4=ie.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),tH=function(i){var a=i.validateMessages,u=i.onFormChange,m=i.onFormFinish,M=i.children,L=ie.useContext(l4),z=ie.useRef({});return ie.createElement(l4.Provider,{value:Ft(Ft({},L),{},{validateMessages:Ft(Ft({},L.validateMessages),a),triggerFormChange:function(W,J){u&&u(W,{changedFields:J,forms:z.current}),L.triggerFormChange(W,J)},triggerFormFinish:function(W,J){m&&m(W,{values:J,forms:z.current}),L.triggerFormFinish(W,J)},registerForm:function(W,J){W&&(z.current=Ft(Ft({},z.current),{},_t({},W,J))),L.registerForm(W,J)},unregisterForm:function(W){var J=Ft({},z.current);delete J[W],z.current=J,L.unregisterForm(W)}})},M)},Xte=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],Yte=function(i,a){var u=i.name,m=i.initialValues,M=i.fields,L=i.form,z=i.preserve,U=i.children,W=i.component,J=W===void 0?"form":W,te=i.validateMessages,ae=i.validateTrigger,ve=ae===void 0?"onChange":ae,he=i.onValuesChange,oe=i.onFieldsChange,me=i.onFinish,ge=i.onFinishFailed,de=Qi(i,Xte),ce=ie.useContext(l4),_e=eH(L),Re=sr(_e,1),Ee=Re[0],De=Ee.getInternalHooks(Gv),We=De.useSubscribe,Xe=De.setInitialValues,et=De.setCallbacks,Ye=De.setValidateMessages,at=De.setPreserve,ot=De.destroyForm;ie.useImperativeHandle(a,function(){return Ee}),ie.useEffect(function(){return ce.registerForm(u,Ee),function(){ce.unregisterForm(u)}},[ce,Ee,u]),Ye(Ft(Ft({},ce.validateMessages),te)),et({onValuesChange:he,onFieldsChange:function(At){if(ce.triggerFormChange(u,At),oe){for(var jt=arguments.length,ar=new Array(jt>1?jt-1:0),Ht=1;Ht<jt;Ht++)ar[Ht-1]=arguments[Ht];oe.apply(void 0,[At].concat(ar))}},onFinish:function(At){ce.triggerFormFinish(u,At),me&&me(At)},onFinishFailed:ge}),at(z);var ct=ie.useRef(null);Xe(m,!ct.current),ct.current||(ct.current=!0),ie.useEffect(function(){return ot},[]);var Dt,$e=typeof U=="function";if($e){var tt=Ee.getFieldsValue(!0);Dt=U(tt,Ee)}else Dt=U;We(!$e);var Ve=ie.useRef();ie.useEffect(function(){Ute(Ve.current||[],M||[])||Ee.setFields(M||[]),Ve.current=M},[M,Ee]);var gt=ie.useMemo(function(){return Ft(Ft({},Ee),{},{validateTrigger:ve})},[Ee,ve]),mt=ie.createElement(LE.Provider,{value:null},ie.createElement(ux.Provider,{value:gt},Dt));return J===!1?mt:ie.createElement(J,Sn({},de,{onSubmit:function(At){At.preventDefault(),At.stopPropagation(),Ee.submit()},onReset:function(At){var jt;At.preventDefault(),Ee.resetFields(),(jt=de.onReset)===null||jt===void 0||jt.call(de,At)}}),mt)};function fz(t){try{return JSON.stringify(t)}catch{return Math.random()}}function Zte(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];var u=i[0],m=i[1],M=m===void 0?{}:m,L=nte(M)?{form:M}:M,z=L.form,U=ie.useState(),W=sr(U,2),J=W[0],te=W[1],ae=ie.useMemo(function(){return fz(J)},[J]),ve=ie.useRef(ae);ve.current=ae;var he=ie.useContext(ux),oe=z||he,me=oe&&oe._init,ge=Fa(u),de=ie.useRef(ge);return de.current=ge,ie.useEffect(function(){if(me){var ce=oe.getFieldsValue,_e=oe.getInternalHooks,Re=_e(Gv),Ee=Re.registerWatch,De=function(Ye,at){var ot=L.preserve?at:Ye;return typeof u=="function"?u(ot):If(ot,de.current)},We=Ee(function(et,Ye){var at=De(et,Ye),ot=fz(at);ve.current!==ot&&(ve.current=ot,te(at))}),Xe=De(ce(),ce(!0));return J!==Xe&&te(Xe),We}},[me]),J}var qte=ie.forwardRef(Yte),IC=qte;IC.FormProvider=tH;IC.Field=Q9;IC.List=jte;IC.useForm=eH;IC.useWatch=Zte;const Pce=ie.createContext({labelAlign:"right",vertical:!1,itemRef:()=>{}}),Oce=ie.createContext(null),Dce=t=>{const i=Oh(t,["prefixCls"]);return ie.createElement(tH,Object.assign({},i))},bce=ie.createContext({prefixCls:""}),Um=ie.createContext({}),dz=t=>{let{children:i,status:a,override:u}=t;const m=ie.useContext(Um),M=ie.useMemo(()=>{const L=Object.assign({},m);return u&&delete L.isFormItemInput,a&&(delete L.status,delete L.hasFeedback,delete L.feedbackIcon),L},[a,u,m]);return ie.createElement(Um.Provider,{value:M},i)},Kte=ie.createContext(void 0),Jte=t=>({[t.componentCls]:{[`${t.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${t.motionDurationMid} ${t.motionEaseInOut},
        opacity ${t.motionDurationMid} ${t.motionEaseInOut} !important`}},[`${t.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${t.motionDurationMid} ${t.motionEaseInOut},
        opacity ${t.motionDurationMid} ${t.motionEaseInOut} !important`}}}),Qte=t=>({animationDuration:t,animationFillMode:"both"}),$te=t=>({animationDuration:t,animationFillMode:"both"}),rH=function(t,i,a,u){const M=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${M}${t}-enter,
      ${M}${t}-appear
    `]:Object.assign(Object.assign({},Qte(u)),{animationPlayState:"paused"}),[`${M}${t}-leave`]:Object.assign(Object.assign({},$te(u)),{animationPlayState:"paused"}),[`
      ${M}${t}-enter${t}-enter-active,
      ${M}${t}-appear${t}-appear-active
    `]:{animationName:i,animationPlayState:"running"},[`${M}${t}-leave${t}-leave-active`]:{animationName:a,animationPlayState:"running",pointerEvents:"none"}}},ere=new Ca("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),tre=new Ca("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),rre=new Ca("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),nre=new Ca("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),ire=new Ca("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),ore=new Ca("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),are=new Ca("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),sre=new Ca("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),lre={"slide-up":{inKeyframes:ere,outKeyframes:tre},"slide-down":{inKeyframes:rre,outKeyframes:nre},"slide-left":{inKeyframes:ire,outKeyframes:ore},"slide-right":{inKeyframes:are,outKeyframes:sre}},pz=(t,i)=>{const{antCls:a}=t,u=`${a}-${i}`,{inKeyframes:m,outKeyframes:M}=lre[i];return[rH(u,m,M,t.motionDurationMid),{[`
      ${u}-enter,
      ${u}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:t.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${u}-leave`]:{animationTimingFunction:t.motionEaseInQuint}}]},ure=new Ca("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),cre=new Ca("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),mz=new Ca("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),gz=new Ca("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),hre=new Ca("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),fre=new Ca("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),dre=new Ca("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),pre=new Ca("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),mre=new Ca("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),gre=new Ca("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),vre=new Ca("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),yre=new Ca("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),xre={zoom:{inKeyframes:ure,outKeyframes:cre},"zoom-big":{inKeyframes:mz,outKeyframes:gz},"zoom-big-fast":{inKeyframes:mz,outKeyframes:gz},"zoom-left":{inKeyframes:dre,outKeyframes:pre},"zoom-right":{inKeyframes:mre,outKeyframes:gre},"zoom-up":{inKeyframes:hre,outKeyframes:fre},"zoom-down":{inKeyframes:vre,outKeyframes:yre}},nD=(t,i)=>{const{antCls:a}=t,u=`${a}-${i}`,{inKeyframes:m,outKeyframes:M}=xre[i];return[rH(u,m,M,i==="zoom-big-fast"?t.motionDurationFast:t.motionDurationMid),{[`
        ${u}-enter,
        ${u}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:t.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${u}-leave`]:{animationTimingFunction:t.motionEaseInOutCirc}}]},Are=dr.createContext({}),wre=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t==null?void 0:t.substr(0,4))};var Cre=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],y1=void 0;function _re(t,i){var a=t.prefixCls,u=t.invalidate,m=t.item,M=t.renderItem,L=t.responsive,z=t.responsiveDisabled,U=t.registerSize,W=t.itemKey,J=t.className,te=t.style,ae=t.children,ve=t.display,he=t.order,oe=t.component,me=oe===void 0?"div":oe,ge=Qi(t,Cre),de=L&&!ve;function ce(We){U(W,We)}ie.useEffect(function(){return function(){ce(null)}},[]);var _e=M&&m!==y1?M(m):ae,Re;u||(Re={opacity:de?0:1,height:de?0:y1,overflowY:de?"hidden":y1,order:L?he:y1,pointerEvents:de?"none":y1,position:de?"absolute":y1});var Ee={};de&&(Ee["aria-hidden"]=!0);var De=ie.createElement(me,Sn({className:mr(!u&&a,J),style:Ft(Ft({},Re),te)},Ee,ge,{ref:i}),_e);return L&&(De=ie.createElement(u0,{onResize:function(Xe){var et=Xe.offsetWidth;ce(et)},disabled:z},De)),De}var Fw=ie.forwardRef(_re);Fw.displayName="Item";function Mre(t){if(typeof MessageChannel>"u")ul(t);else{var i=new MessageChannel;i.port1.onmessage=function(){return t()},i.port2.postMessage(void 0)}}function Sre(){var t=ie.useRef(null),i=function(u){t.current||(t.current=[],Mre(function(){Qd.unstable_batchedUpdates(function(){t.current.forEach(function(m){m()}),t.current=null})})),t.current.push(u)};return i}function cw(t,i){var a=ie.useState(i),u=sr(a,2),m=u[0],M=u[1],L=Tl(function(z){t(function(){M(z)})});return[m,L]}var PE=dr.createContext(null),Tre=["component"],Ere=["className"],Ire=["className"],Rre=function(i,a){var u=ie.useContext(PE);if(!u){var m=i.component,M=m===void 0?"div":m,L=Qi(i,Tre);return ie.createElement(M,Sn({},L,{ref:a}))}var z=u.className,U=Qi(u,Ere),W=i.className,J=Qi(i,Ire);return ie.createElement(PE.Provider,{value:null},ie.createElement(Fw,Sn({ref:a,className:mr(z,W)},U,J)))},nH=ie.forwardRef(Rre);nH.displayName="RawItem";var Lre=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],iH="responsive",oH="invalidate";function Pre(t){return"+ ".concat(t.length," ...")}function Ore(t,i){var a=t.prefixCls,u=a===void 0?"rc-overflow":a,m=t.data,M=m===void 0?[]:m,L=t.renderItem,z=t.renderRawItem,U=t.itemKey,W=t.itemWidth,J=W===void 0?10:W,te=t.ssr,ae=t.style,ve=t.className,he=t.maxCount,oe=t.renderRest,me=t.renderRawRest,ge=t.suffix,de=t.component,ce=de===void 0?"div":de,_e=t.itemComponent,Re=t.onVisibleChange,Ee=Qi(t,Lre),De=te==="full",We=Sre(),Xe=cw(We,null),et=sr(Xe,2),Ye=et[0],at=et[1],ot=Ye||0,ct=cw(We,new Map),Dt=sr(ct,2),$e=Dt[0],tt=Dt[1],Ve=cw(We,0),gt=sr(Ve,2),mt=gt[0],dt=gt[1],At=cw(We,0),jt=sr(At,2),ar=jt[0],Ht=jt[1],Rt=cw(We,0),pr=sr(Rt,2),Cr=pr[0],Ir=pr[1],Ut=ie.useState(null),_r=sr(Ut,2),Bn=_r[0],bn=_r[1],ur=ie.useState(null),jn=sr(ur,2),An=jn[0],en=jn[1],Fn=ie.useMemo(function(){return An===null&&De?Number.MAX_SAFE_INTEGER:An||0},[An,Ye]),lr=ie.useState(!1),er=sr(lr,2),cn=er[0],oi=er[1],xn="".concat(u,"-item"),qn=Math.max(mt,ar),Dn=he===iH,mn=M.length&&Dn,pi=he===oH,ui=mn||typeof he=="number"&&M.length>he,hn=ie.useMemo(function(){var Nn=M;return mn?Ye===null&&De?Nn=M:Nn=M.slice(0,Math.min(M.length,ot/J)):typeof he=="number"&&(Nn=M.slice(0,he)),Nn},[M,J,Ye,he,mn]),Kn=ie.useMemo(function(){return mn?M.slice(Fn+1):M.slice(hn.length)},[M,hn,mn,Fn]),$i=ie.useCallback(function(Nn,nn){var Gn;return typeof U=="function"?U(Nn):(Gn=U&&(Nn==null?void 0:Nn[U]))!==null&&Gn!==void 0?Gn:nn},[U]),ji=ie.useCallback(L||function(Nn){return Nn},[L]);function _a(Nn,nn,Gn){An===Nn&&(nn===void 0||nn===Bn)||(en(Nn),Gn||(oi(Nn<M.length-1),Re==null||Re(Nn)),nn!==void 0&&bn(nn))}function ro(Nn,nn){at(nn.clientWidth)}function bi(Nn,nn){tt(function(Gn){var Wi=new Map(Gn);return nn===null?Wi.delete(Nn):Wi.set(Nn,nn),Wi})}function us(Nn,nn){Ht(nn),dt(ar)}function Ao(Nn,nn){Ir(nn)}function Gi(Nn){return $e.get($i(hn[Nn],Nn))}as(function(){if(ot&&typeof qn=="number"&&hn){var Nn=Cr,nn=hn.length,Gn=nn-1;if(!nn){_a(0,null);return}for(var Wi=0;Wi<nn;Wi+=1){var Co=Gi(Wi);if(De&&(Co=Co||0),Co===void 0){_a(Wi-1,void 0,!0);break}if(Nn+=Co,Gn===0&&Nn<=ot||Wi===Gn-1&&Nn+Gi(Gn)<=ot){_a(Gn,null);break}else if(Nn+qn>ot){_a(Wi-1,Nn-Co-Cr+ar);break}}ge&&Gi(0)+Cr>ot&&bn(null)}},[ot,$e,ar,Cr,$i,hn]);var Vi=cn&&!!Kn.length,zi={};Bn!==null&&mn&&(zi={position:"absolute",left:Bn,top:0});var To={prefixCls:xn,responsive:mn,component:_e,invalidate:pi},wo=z?function(Nn,nn){var Gn=$i(Nn,nn);return ie.createElement(PE.Provider,{key:Gn,value:Ft(Ft({},To),{},{order:nn,item:Nn,itemKey:Gn,registerSize:bi,display:nn<=Fn})},z(Nn,nn))}:function(Nn,nn){var Gn=$i(Nn,nn);return ie.createElement(Fw,Sn({},To,{order:nn,key:Gn,item:Nn,renderItem:ji,itemKey:Gn,registerSize:bi,display:nn<=Fn}))},_i,ti={order:Vi?Fn:Number.MAX_SAFE_INTEGER,className:"".concat(xn,"-rest"),registerSize:us,display:Vi};if(me)me&&(_i=ie.createElement(PE.Provider,{value:Ft(Ft({},To),ti)},me(Kn)));else{var wn=oe||Pre;_i=ie.createElement(Fw,Sn({},To,ti),typeof wn=="function"?wn(Kn):wn)}var Ui=ie.createElement(ce,Sn({className:mr(!pi&&u,ve),style:ae,ref:i},Ee),hn.map(wo),ui?_i:null,ge&&ie.createElement(Fw,Sn({},To,{responsive:Dn,responsiveDisabled:!mn,order:Fn,className:"".concat(xn,"-suffix"),registerSize:Ao,display:!0,style:zi}),ge));return Dn&&(Ui=ie.createElement(u0,{onResize:ro,disabled:!mn},Ui)),Ui}var Vd=ie.forwardRef(Ore);Vd.displayName="Overflow";Vd.Item=nH;Vd.RESPONSIVE=iH;Vd.INVALIDATE=oH;function Dre(t){var i=t.prefixCls,a=t.align,u=t.arrow,m=t.arrowPos,M=u||{},L=M.className,z=M.content,U=m.x,W=U===void 0?0:U,J=m.y,te=J===void 0?0:J,ae=ie.useRef();if(!a||!a.points)return null;var ve={position:"absolute"};if(a.autoArrow!==!1){var he=a.points[0],oe=a.points[1],me=he[0],ge=he[1],de=oe[0],ce=oe[1];me===de||!["t","b"].includes(me)?ve.top=te:me==="t"?ve.top=0:ve.bottom=0,ge===ce||!["l","r"].includes(ge)?ve.left=W:ge==="l"?ve.left=0:ve.right=0}return ie.createElement("div",{ref:ae,className:mr("".concat(i,"-arrow"),L),style:ve},z)}function bre(t){var i=t.prefixCls,a=t.open,u=t.zIndex,m=t.mask,M=t.motion;return m?ie.createElement(yx,Sn({},M,{motionAppear:!0,visible:a,removeOnLeave:!0}),function(L){var z=L.className;return ie.createElement("div",{style:{zIndex:u},className:mr("".concat(i,"-mask"),z)})}):null}var Fre=ie.memo(function(t){var i=t.children;return i},function(t,i){return i.cache}),Nre=ie.forwardRef(function(t,i){var a=t.popup,u=t.className,m=t.prefixCls,M=t.style,L=t.target,z=t.onVisibleChanged,U=t.open,W=t.keepDom,J=t.fresh,te=t.onClick,ae=t.mask,ve=t.arrow,he=t.arrowPos,oe=t.align,me=t.motion,ge=t.maskMotion,de=t.forceRender,ce=t.getPopupContainer,_e=t.autoDestroy,Re=t.portal,Ee=t.zIndex,De=t.onMouseEnter,We=t.onMouseLeave,Xe=t.onPointerEnter,et=t.ready,Ye=t.offsetX,at=t.offsetY,ot=t.offsetR,ct=t.offsetB,Dt=t.onAlign,$e=t.onPrepare,tt=t.stretch,Ve=t.targetWidth,gt=t.targetHeight,mt=typeof a=="function"?a():a,dt=U||W,At=(ce==null?void 0:ce.length)>0,jt=ie.useState(!ce||!At),ar=sr(jt,2),Ht=ar[0],Rt=ar[1];if(as(function(){!Ht&&At&&L&&Rt(!0)},[Ht,At,L]),!Ht)return null;var pr="auto",Cr={left:"-1000vw",top:"-1000vh",right:pr,bottom:pr};if(et||!U){var Ir,Ut=oe.points,_r=oe.dynamicInset||((Ir=oe._experimental)===null||Ir===void 0?void 0:Ir.dynamicInset),Bn=_r&&Ut[0][1]==="r",bn=_r&&Ut[0][0]==="b";Bn?(Cr.right=ot,Cr.left=pr):(Cr.left=Ye,Cr.right=pr),bn?(Cr.bottom=ct,Cr.top=pr):(Cr.top=at,Cr.bottom=pr)}var ur={};return tt&&(tt.includes("height")&&gt?ur.height=gt:tt.includes("minHeight")&&gt&&(ur.minHeight=gt),tt.includes("width")&&Ve?ur.width=Ve:tt.includes("minWidth")&&Ve&&(ur.minWidth=Ve)),U||(ur.pointerEvents="none"),ie.createElement(Re,{open:de||dt,getContainer:ce&&function(){return ce(L)},autoDestroy:_e},ie.createElement(bre,{prefixCls:m,open:U,zIndex:Ee,mask:ae,motion:ge}),ie.createElement(u0,{onResize:Dt,disabled:!U},function(jn){return ie.createElement(yx,Sn({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:de,leavedClassName:"".concat(m,"-hidden")},me,{onAppearPrepare:$e,onEnterPrepare:$e,visible:U,onVisibleChanged:function(en){var Fn;me==null||(Fn=me.onVisibleChanged)===null||Fn===void 0||Fn.call(me,en),z(en)}}),function(An,en){var Fn=An.className,lr=An.style,er=mr(m,Fn,u);return ie.createElement("div",{ref:ep(jn,i,en),className:er,style:Ft(Ft(Ft(Ft({"--arrow-x":"".concat(he.x||0,"px"),"--arrow-y":"".concat(he.y||0,"px")},Cr),ur),lr),{},{boxSizing:"border-box",zIndex:Ee},M),onMouseEnter:De,onMouseLeave:We,onPointerEnter:Xe,onClick:te},ve&&ie.createElement(Dre,{prefixCls:m,arrow:ve,arrowPos:he,align:oe}),ie.createElement(Fre,{cache:!U&&!J},mt))})}))}),Bre=ie.forwardRef(function(t,i){var a=t.children,u=t.getTriggerDOMNode,m=mx(a),M=ie.useCallback(function(z){NO(i,u?u(z):z)},[u]),L=MC(M,a.ref);return m?ie.cloneElement(a,{ref:L}):a}),vz=ie.createContext(null);function yz(t){return t?Array.isArray(t)?t:[t]:[]}function zre(t,i,a,u){return ie.useMemo(function(){var m=yz(a??i),M=yz(u??i),L=new Set(m),z=new Set(M);return t&&(L.has("hover")&&(L.delete("hover"),L.add("click")),z.has("hover")&&(z.delete("hover"),z.add("click"))),[L,z]},[t,i,a,u])}function Ure(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0;return a?t[0]===i[0]:t[0]===i[0]&&t[1]===i[1]}function kre(t,i,a,u){for(var m=a.points,M=Object.keys(t),L=0;L<M.length;L+=1){var z,U=M[L];if(Ure((z=t[U])===null||z===void 0?void 0:z.points,m,u))return"".concat(i,"-placement-").concat(U)}return""}function xz(t,i,a,u){return i||(a?{motionName:"".concat(t,"-").concat(a)}:u?{motionName:u}:null)}function RC(t){return t.ownerDocument.defaultView}function u4(t){for(var i=[],a=t==null?void 0:t.parentElement,u=["hidden","scroll","clip","auto"];a;){var m=RC(a).getComputedStyle(a),M=m.overflowX,L=m.overflowY,z=m.overflow;[M,L,z].some(function(U){return u.includes(U)})&&i.push(a),a=a.parentElement}return i}function fC(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(t)?i:t}function hw(t){return fC(parseFloat(t),0)}function Az(t,i){var a=Ft({},t);return(i||[]).forEach(function(u){if(!(u instanceof HTMLBodyElement||u instanceof HTMLHtmlElement)){var m=RC(u).getComputedStyle(u),M=m.overflow,L=m.overflowClipMargin,z=m.borderTopWidth,U=m.borderBottomWidth,W=m.borderLeftWidth,J=m.borderRightWidth,te=u.getBoundingClientRect(),ae=u.offsetHeight,ve=u.clientHeight,he=u.offsetWidth,oe=u.clientWidth,me=hw(z),ge=hw(U),de=hw(W),ce=hw(J),_e=fC(Math.round(te.width/he*1e3)/1e3),Re=fC(Math.round(te.height/ae*1e3)/1e3),Ee=(he-oe-de-ce)*_e,De=(ae-ve-me-ge)*Re,We=me*Re,Xe=ge*Re,et=de*_e,Ye=ce*_e,at=0,ot=0;if(M==="clip"){var ct=hw(L);at=ct*_e,ot=ct*Re}var Dt=te.x+et-at,$e=te.y+We-ot,tt=Dt+te.width+2*at-et-Ye-Ee,Ve=$e+te.height+2*ot-We-Xe-De;a.left=Math.max(a.left,Dt),a.top=Math.max(a.top,$e),a.right=Math.min(a.right,tt),a.bottom=Math.min(a.bottom,Ve)}}),a}function wz(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a="".concat(i),u=a.match(/^(.*)\%$/);return u?t*(parseFloat(u[1])/100):parseFloat(a)}function Cz(t,i){var a=i||[],u=sr(a,2),m=u[0],M=u[1];return[wz(t.width,m),wz(t.height,M)]}function _z(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[t[0],t[1]]}function x1(t,i){var a=i[0],u=i[1],m,M;return a==="t"?M=t.y:a==="b"?M=t.y+t.height:M=t.y+t.height/2,u==="l"?m=t.x:u==="r"?m=t.x+t.width:m=t.x+t.width/2,{x:m,y:M}}function gm(t,i){var a={t:"b",b:"t",l:"r",r:"l"};return t.map(function(u,m){return m===i?a[u]||"c":u}).join("")}function Hre(t,i,a,u,m,M,L){var z=ie.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:m[u]||{}}),U=sr(z,2),W=U[0],J=U[1],te=ie.useRef(0),ae=ie.useMemo(function(){return i?u4(i):[]},[i]),ve=ie.useRef({}),he=function(){ve.current={}};t||he();var oe=Tl(function(){if(i&&a&&t){let Vs=function(ml,qo){var Ho=arguments.length>2&&arguments[2]!==void 0?arguments[2]:er,tn=mt.x+ml,Nl=mt.y+qo,tp=tn+Ir,bf=Nl+Cr,Eo=Math.max(tn,Ho.left),Ff=Math.max(Nl,Ho.top),Bh=Math.min(tp,Ho.right),Oc=Math.min(bf,Ho.bottom);return Math.max(0,(Bh-Eo)*(Oc-Ff))},Ua=function(){Ms=mt.y+wn,pl=Ms+Cr,hr=mt.x+ti,Ba=hr+Ir};var de,ce,_e=i,Re=_e.ownerDocument,Ee=RC(_e),De=Ee.getComputedStyle(_e),We=De.width,Xe=De.height,et=De.position,Ye=_e.style.left,at=_e.style.top,ot=_e.style.right,ct=_e.style.bottom,Dt=_e.style.overflow,$e=Ft(Ft({},m[u]),M),tt=Re.createElement("div");(de=_e.parentElement)===null||de===void 0||de.appendChild(tt),tt.style.left="".concat(_e.offsetLeft,"px"),tt.style.top="".concat(_e.offsetTop,"px"),tt.style.position=et,tt.style.height="".concat(_e.offsetHeight,"px"),tt.style.width="".concat(_e.offsetWidth,"px"),_e.style.left="0",_e.style.top="0",_e.style.right="auto",_e.style.bottom="auto",_e.style.overflow="hidden";var Ve;if(Array.isArray(a))Ve={x:a[0],y:a[1],width:0,height:0};else{var gt=a.getBoundingClientRect();Ve={x:gt.x,y:gt.y,width:gt.width,height:gt.height}}var mt=_e.getBoundingClientRect(),dt=Re.documentElement,At=dt.clientWidth,jt=dt.clientHeight,ar=dt.scrollWidth,Ht=dt.scrollHeight,Rt=dt.scrollTop,pr=dt.scrollLeft,Cr=mt.height,Ir=mt.width,Ut=Ve.height,_r=Ve.width,Bn={left:0,top:0,right:At,bottom:jt},bn={left:-pr,top:-Rt,right:ar-pr,bottom:Ht-Rt},ur=$e.htmlRegion,jn="visible",An="visibleFirst";ur!=="scroll"&&ur!==An&&(ur=jn);var en=ur===An,Fn=Az(bn,ae),lr=Az(Bn,ae),er=ur===jn?lr:Fn,cn=en?lr:er;_e.style.left="auto",_e.style.top="auto",_e.style.right="0",_e.style.bottom="0";var oi=_e.getBoundingClientRect();_e.style.left=Ye,_e.style.top=at,_e.style.right=ot,_e.style.bottom=ct,_e.style.overflow=Dt,(ce=_e.parentElement)===null||ce===void 0||ce.removeChild(tt);var xn=fC(Math.round(Ir/parseFloat(We)*1e3)/1e3),qn=fC(Math.round(Cr/parseFloat(Xe)*1e3)/1e3);if(xn===0||qn===0||wE(a)&&!QO(a))return;var Dn=$e.offset,mn=$e.targetOffset,pi=Cz(mt,Dn),ui=sr(pi,2),hn=ui[0],Kn=ui[1],$i=Cz(Ve,mn),ji=sr($i,2),_a=ji[0],ro=ji[1];Ve.x-=_a,Ve.y-=ro;var bi=$e.points||[],us=sr(bi,2),Ao=us[0],Gi=us[1],Vi=_z(Gi),zi=_z(Ao),To=x1(Ve,Vi),wo=x1(mt,zi),_i=Ft({},$e),ti=To.x-wo.x+hn,wn=To.y-wo.y+Kn,Ui=Vs(ti,wn),Nn=Vs(ti,wn,lr),nn=x1(Ve,["t","l"]),Gn=x1(mt,["t","l"]),Wi=x1(Ve,["b","r"]),Co=x1(mt,["b","r"]),Ja=$e.overflow||{},ma=Ja.adjustX,ku=Ja.adjustY,Ti=Ja.shiftX,Ma=Ja.shiftY,ks=function(qo){return typeof qo=="boolean"?qo:qo>=0},Ms,pl,hr,Ba;Ua();var Rc=ks(ku),Ei=zi[0]===Vi[0];if(Rc&&zi[0]==="t"&&(pl>cn.bottom||ve.current.bt)){var Ol=wn;Ei?Ol-=Cr-Ut:Ol=nn.y-Co.y-Kn;var Hs=Vs(ti,Ol),Dl=Vs(ti,Ol,lr);Hs>Ui||Hs===Ui&&(!en||Dl>=Nn)?(ve.current.bt=!0,wn=Ol,Kn=-Kn,_i.points=[gm(zi,0),gm(Vi,0)]):ve.current.bt=!1}if(Rc&&zi[0]==="b"&&(Ms<cn.top||ve.current.tb)){var ra=wn;Ei?ra+=Cr-Ut:ra=Wi.y-Gn.y-Kn;var Zo=Vs(ti,ra),Lc=Vs(ti,ra,lr);Zo>Ui||Zo===Ui&&(!en||Lc>=Nn)?(ve.current.tb=!0,wn=ra,Kn=-Kn,_i.points=[gm(zi,0),gm(Vi,0)]):ve.current.tb=!1}var Hu=ks(ma),Fh=zi[1]===Vi[1];if(Hu&&zi[1]==="l"&&(Ba>cn.right||ve.current.rl)){var js=ti;Fh?js-=Ir-_r:js=nn.x-Co.x-hn;var Pc=Vs(js,wn),ju=Vs(js,wn,lr);Pc>Ui||Pc===Ui&&(!en||ju>=Nn)?(ve.current.rl=!0,ti=js,hn=-hn,_i.points=[gm(zi,1),gm(Vi,1)]):ve.current.rl=!1}if(Hu&&zi[1]==="r"&&(hr<cn.left||ve.current.lr)){var yi=ti;Fh?yi+=Ir-_r:yi=Wi.x-Gn.x-hn;var Un=Vs(yi,wn),su=Vs(yi,wn,lr);Un>Ui||Un===Ui&&(!en||su>=Nn)?(ve.current.lr=!0,ti=yi,hn=-hn,_i.points=[gm(zi,1),gm(Vi,1)]):ve.current.lr=!1}Ua();var cs=Ti===!0?0:Ti;typeof cs=="number"&&(hr<lr.left&&(ti-=hr-lr.left-hn,Ve.x+_r<lr.left+cs&&(ti+=Ve.x-lr.left+_r-cs)),Ba>lr.right&&(ti-=Ba-lr.right-hn,Ve.x>lr.right-cs&&(ti+=Ve.x-lr.right+cs)));var Gs=Ma===!0?0:Ma;typeof Gs=="number"&&(Ms<lr.top&&(wn-=Ms-lr.top-Kn,Ve.y+Ut<lr.top+Gs&&(wn+=Ve.y-lr.top+Ut-Gs)),pl>lr.bottom&&(wn-=pl-lr.bottom-Kn,Ve.y>lr.bottom-Gs&&(wn+=Ve.y-lr.bottom+Gs)));var Sa=mt.x+ti,Gu=Sa+Ir,Ss=mt.y+wn,bl=Ss+Cr,Pi=Ve.x,xi=Pi+_r,mi=Ve.y,Po=mi+Ut,no=Math.max(Sa,Pi),uo=Math.min(Gu,xi),Oo=(no+uo)/2,ko=Oo-Sa,hs=Math.max(Ss,mi),na=Math.min(bl,Po),za=(hs+na)/2,Fl=za-Ss;L==null||L(i,_i);var Nh=oi.right-mt.x-(ti+mt.width),Vu=oi.bottom-mt.y-(wn+mt.height);J({ready:!0,offsetX:ti/xn,offsetY:wn/qn,offsetR:Nh/xn,offsetB:Vu/qn,arrowX:ko/xn,arrowY:Fl/qn,scaleX:xn,scaleY:qn,align:_i})}}),me=function(){te.current+=1;var ce=te.current;Promise.resolve().then(function(){te.current===ce&&oe()})},ge=function(){J(function(ce){return Ft(Ft({},ce),{},{ready:!1})})};return as(ge,[u]),as(function(){t||ge()},[t]),[W.ready,W.offsetX,W.offsetY,W.offsetR,W.offsetB,W.arrowX,W.arrowY,W.scaleX,W.scaleY,W.align,me]}function jre(t,i,a,u,m){as(function(){if(t&&i&&a){let te=function(){u(),m()};var M=i,L=a,z=u4(M),U=u4(L),W=RC(L),J=new Set([W].concat(on(z),on(U)));return J.forEach(function(ae){ae.addEventListener("scroll",te,{passive:!0})}),W.addEventListener("resize",te,{passive:!0}),u(),function(){J.forEach(function(ae){ae.removeEventListener("scroll",te),W.removeEventListener("resize",te)})}}},[t,i,a])}function Gre(t,i,a,u,m,M,L,z){var U=ie.useRef(t);U.current=t,ie.useEffect(function(){if(i&&u&&(!m||M)){var W=function(ve){var he=ve.target;U.current&&!L(he)&&z(!1)},J=RC(u);J.addEventListener("mousedown",W,!0),J.addEventListener("contextmenu",W,!0);var te=TE(a);return te&&(te.addEventListener("mousedown",W,!0),te.addEventListener("contextmenu",W,!0)),function(){J.removeEventListener("mousedown",W,!0),J.removeEventListener("contextmenu",W,!0),te&&(te.removeEventListener("mousedown",W,!0),te.removeEventListener("contextmenu",W,!0))}}},[i,a,u,m,M])}var Vre=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function Wre(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Z9,i=ie.forwardRef(function(a,u){var m=a.prefixCls,M=m===void 0?"rc-trigger-popup":m,L=a.children,z=a.action,U=z===void 0?"hover":z,W=a.showAction,J=a.hideAction,te=a.popupVisible,ae=a.defaultPopupVisible,ve=a.onPopupVisibleChange,he=a.afterPopupVisibleChange,oe=a.mouseEnterDelay,me=a.mouseLeaveDelay,ge=me===void 0?.1:me,de=a.focusDelay,ce=a.blurDelay,_e=a.mask,Re=a.maskClosable,Ee=Re===void 0?!0:Re,De=a.getPopupContainer,We=a.forceRender,Xe=a.autoDestroy,et=a.destroyPopupOnHide,Ye=a.popup,at=a.popupClassName,ot=a.popupStyle,ct=a.popupPlacement,Dt=a.builtinPlacements,$e=Dt===void 0?{}:Dt,tt=a.popupAlign,Ve=a.zIndex,gt=a.stretch,mt=a.getPopupClassNameFromAlign,dt=a.fresh,At=a.alignPoint,jt=a.onPopupClick,ar=a.onPopupAlign,Ht=a.arrow,Rt=a.popupMotion,pr=a.maskMotion,Cr=a.popupTransitionName,Ir=a.popupAnimation,Ut=a.maskTransitionName,_r=a.maskAnimation,Bn=a.className,bn=a.getTriggerDOMNode,ur=Qi(a,Vre),jn=Xe||et||!1,An=ie.useState(!1),en=sr(An,2),Fn=en[0],lr=en[1];as(function(){lr(wre())},[]);var er=ie.useRef({}),cn=ie.useContext(vz),oi=ie.useMemo(function(){return{registerSubPopup:function(Tn,Lr){er.current[Tn]=Lr,cn==null||cn.registerSubPopup(Tn,Lr)}}},[cn]),xn=rte(),qn=ie.useState(null),Dn=sr(qn,2),mn=Dn[0],pi=Dn[1],ui=ie.useRef(null),hn=Tl(function(Wr){ui.current=Wr,wE(Wr)&&mn!==Wr&&pi(Wr),cn==null||cn.registerSubPopup(xn,Wr)}),Kn=ie.useState(null),$i=sr(Kn,2),ji=$i[0],_a=$i[1],ro=ie.useRef(null),bi=Tl(function(Wr){wE(Wr)&&ji!==Wr&&(_a(Wr),ro.current=Wr)}),us=ie.Children.only(L),Ao=(us==null?void 0:us.props)||{},Gi={},Vi=Tl(function(Wr){var Tn,Lr,Ko=ji;return(Ko==null?void 0:Ko.contains(Wr))||((Tn=TE(Ko))===null||Tn===void 0?void 0:Tn.host)===Wr||Wr===Ko||(mn==null?void 0:mn.contains(Wr))||((Lr=TE(mn))===null||Lr===void 0?void 0:Lr.host)===Wr||Wr===mn||Object.values(er.current).some(function(Do){return(Do==null?void 0:Do.contains(Wr))||Wr===Do})}),zi=xz(M,Rt,Ir,Cr),To=xz(M,pr,_r,Ut),wo=ie.useState(ae||!1),_i=sr(wo,2),ti=_i[0],wn=_i[1],Ui=te??ti,Nn=Tl(function(Wr){te===void 0&&wn(Wr)});as(function(){wn(te||!1)},[te]);var nn=ie.useRef(Ui);nn.current=Ui;var Gn=ie.useRef([]);Gn.current=[];var Wi=Tl(function(Wr){var Tn;Nn(Wr),((Tn=Gn.current[Gn.current.length-1])!==null&&Tn!==void 0?Tn:Ui)!==Wr&&(Gn.current.push(Wr),ve==null||ve(Wr))}),Co=ie.useRef(),Ja=function(){clearTimeout(Co.current)},ma=function(Tn){var Lr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Ja(),Lr===0?Wi(Tn):Co.current=setTimeout(function(){Wi(Tn)},Lr*1e3)};ie.useEffect(function(){return Ja},[]);var ku=ie.useState(!1),Ti=sr(ku,2),Ma=Ti[0],ks=Ti[1];as(function(Wr){(!Wr||Ui)&&ks(!0)},[Ui]);var Ms=ie.useState(null),pl=sr(Ms,2),hr=pl[0],Ba=pl[1],Rc=ie.useState([0,0]),Ei=sr(Rc,2),Ol=Ei[0],Hs=Ei[1],Dl=function(Tn){Hs([Tn.clientX,Tn.clientY])},ra=Hre(Ui,mn,At?Ol:ji,ct,$e,tt,ar),Zo=sr(ra,11),Lc=Zo[0],Hu=Zo[1],Fh=Zo[2],js=Zo[3],Pc=Zo[4],ju=Zo[5],yi=Zo[6],Un=Zo[7],su=Zo[8],cs=Zo[9],Gs=Zo[10],Sa=zre(Fn,U,W,J),Gu=sr(Sa,2),Ss=Gu[0],bl=Gu[1],Pi=Ss.has("click"),xi=bl.has("click")||bl.has("contextMenu"),mi=Tl(function(){Ma||Gs()}),Po=function(){nn.current&&At&&xi&&ma(!1)};jre(Ui,ji,mn,mi,Po),as(function(){mi()},[Ol,ct]),as(function(){Ui&&!($e!=null&&$e[ct])&&mi()},[JSON.stringify(tt)]);var no=ie.useMemo(function(){var Wr=kre($e,M,cs,At);return mr(Wr,mt==null?void 0:mt(cs))},[cs,mt,$e,M,At]);ie.useImperativeHandle(u,function(){return{nativeElement:ro.current,popupElement:ui.current,forceAlign:mi}});var uo=ie.useState(0),Oo=sr(uo,2),ko=Oo[0],hs=Oo[1],na=ie.useState(0),za=sr(na,2),Fl=za[0],Nh=za[1],Vu=function(){if(gt&&ji){var Tn=ji.getBoundingClientRect();hs(Tn.width),Nh(Tn.height)}},Vs=function(){Vu(),mi()},Ua=function(Tn){ks(!1),Gs(),he==null||he(Tn)},ml=function(){return new Promise(function(Tn){Vu(),Ba(function(){return Tn})})};as(function(){hr&&(Gs(),hr(),Ba(null))},[hr]);function qo(Wr,Tn,Lr,Ko){Gi[Wr]=function(Do){var Nf;Ko==null||Ko(Do),ma(Tn,Lr);for(var Bf=arguments.length,fs=new Array(Bf>1?Bf-1:0),Dr=1;Dr<Bf;Dr++)fs[Dr-1]=arguments[Dr];(Nf=Ao[Wr])===null||Nf===void 0||Nf.call.apply(Nf,[Ao,Do].concat(fs))}}(Pi||xi)&&(Gi.onClick=function(Wr){var Tn;nn.current&&xi?ma(!1):!nn.current&&Pi&&(Dl(Wr),ma(!0));for(var Lr=arguments.length,Ko=new Array(Lr>1?Lr-1:0),Do=1;Do<Lr;Do++)Ko[Do-1]=arguments[Do];(Tn=Ao.onClick)===null||Tn===void 0||Tn.call.apply(Tn,[Ao,Wr].concat(Ko))}),Gre(Ui,xi,ji,mn,_e,Ee,Vi,ma);var Ho=Ss.has("hover"),tn=bl.has("hover"),Nl,tp;Ho&&(qo("onMouseEnter",!0,oe,function(Wr){Dl(Wr)}),qo("onPointerEnter",!0,oe,function(Wr){Dl(Wr)}),Nl=function(Tn){(Ui||Ma)&&mn!==null&&mn!==void 0&&mn.contains(Tn.target)&&ma(!0,oe)},At&&(Gi.onMouseMove=function(Wr){var Tn;(Tn=Ao.onMouseMove)===null||Tn===void 0||Tn.call(Ao,Wr)})),tn&&(qo("onMouseLeave",!1,ge),qo("onPointerLeave",!1,ge),tp=function(){ma(!1,ge)}),Ss.has("focus")&&qo("onFocus",!0,de),bl.has("focus")&&qo("onBlur",!1,ce),Ss.has("contextMenu")&&(Gi.onContextMenu=function(Wr){var Tn;nn.current&&bl.has("contextMenu")?ma(!1):(Dl(Wr),ma(!0)),Wr.preventDefault();for(var Lr=arguments.length,Ko=new Array(Lr>1?Lr-1:0),Do=1;Do<Lr;Do++)Ko[Do-1]=arguments[Do];(Tn=Ao.onContextMenu)===null||Tn===void 0||Tn.call.apply(Tn,[Ao,Wr].concat(Ko))}),Bn&&(Gi.className=mr(Ao.className,Bn));var bf=Ft(Ft({},Ao),Gi),Eo={},Ff=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];Ff.forEach(function(Wr){ur[Wr]&&(Eo[Wr]=function(){for(var Tn,Lr=arguments.length,Ko=new Array(Lr),Do=0;Do<Lr;Do++)Ko[Do]=arguments[Do];(Tn=bf[Wr])===null||Tn===void 0||Tn.call.apply(Tn,[bf].concat(Ko)),ur[Wr].apply(ur,Ko)})});var Bh=ie.cloneElement(us,Ft(Ft({},bf),Eo)),Oc={x:ju,y:yi},Sx=Ht?Ft({},Ht!==!0?Ht:{}):null;return ie.createElement(ie.Fragment,null,ie.createElement(u0,{disabled:!Ui,ref:bi,onResize:Vs},ie.createElement(Bre,{getTriggerDOMNode:bn},Bh)),ie.createElement(vz.Provider,{value:oi},ie.createElement(Nre,{portal:t,ref:hn,prefixCls:M,popup:Ye,className:mr(at,no),style:ot,target:ji,onMouseEnter:Nl,onMouseLeave:tp,onPointerEnter:Nl,zIndex:Ve,open:Ui,keepDom:Ma,fresh:dt,onClick:jt,mask:_e,motion:zi,maskMotion:To,onVisibleChanged:Ua,onPrepare:ml,forceRender:We,autoDestroy:jn,getPopupContainer:De,align:cs,arrow:Sx,arrowPos:Oc,ready:Lc,offsetX:Hu,offsetY:Fh,offsetR:js,offsetB:Pc,onAlign:mi,stretch:gt,targetWidth:ko/Un,targetHeight:Fl/su})))});return i}const aH=Wre(Z9);function c4(t,i,a){return mr({[`${t}-status-success`]:i==="success",[`${t}-status-warning`]:i==="warning",[`${t}-status-error`]:i==="error",[`${t}-status-validating`]:i==="validating",[`${t}-has-feedback`]:a})}const iD=(t,i)=>i||t,Xre=["outlined","borderless","filled"],sH=function(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;const a=ie.useContext(Kte);let u;typeof t<"u"?u=t:i===!1?u="borderless":u=a??"outlined";const m=Xre.includes(u);return[u,m]};var Yre={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},Zre=function(i,a){return ie.createElement(Ka,Sn({},i,{ref:a,icon:Yre}))},qre=ie.forwardRef(Zre);const lH=["xxl","xl","lg","md","sm","xs"],Kre=t=>({xs:`(max-width: ${t.screenXSMax}px)`,sm:`(min-width: ${t.screenSM}px)`,md:`(min-width: ${t.screenMD}px)`,lg:`(min-width: ${t.screenLG}px)`,xl:`(min-width: ${t.screenXL}px)`,xxl:`(min-width: ${t.screenXXL}px)`}),Jre=t=>{const i=t,a=[].concat(lH).reverse();return a.forEach((u,m)=>{const M=u.toUpperCase(),L=`screen${M}Min`,z=`screen${M}`;if(!(i[L]<=i[z]))throw new Error(`${L}<=${z} fails : !(${i[L]}<=${i[z]})`);if(m<a.length-1){const U=`screen${M}Max`;if(!(i[z]<=i[U]))throw new Error(`${z}<=${U} fails : !(${i[z]}<=${i[U]})`);const J=`screen${a[m+1].toUpperCase()}Min`;if(!(i[U]<=i[J]))throw new Error(`${U}<=${J} fails : !(${i[U]}<=${i[J]})`)}}),t};function Qre(){const[,t]=Ec(),i=Kre(Jre(t));return dr.useMemo(()=>{const a=new Map;let u=-1,m={};return{matchHandlers:{},dispatch(M){return m=M,a.forEach(L=>L(m)),a.size>=1},subscribe(M){return a.size||this.register(),u+=1,a.set(u,M),M(m),u},unsubscribe(M){a.delete(M),a.size||this.unregister()},unregister(){Object.keys(i).forEach(M=>{const L=i[M],z=this.matchHandlers[L];z==null||z.mql.removeListener(z==null?void 0:z.listener)}),a.clear()},register(){Object.keys(i).forEach(M=>{const L=i[M],z=W=>{let{matches:J}=W;this.dispatch(Object.assign(Object.assign({},m),{[M]:J}))},U=window.matchMedia(L);U.addListener(z),this.matchHandlers[L]={mql:U,listener:z},z(U)})},responsiveMap:i}},[t])}function $re(){const[,t]=ie.useReducer(i=>i+1,0);return t}function ene(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const i=ie.useRef({}),a=$re(),u=Qre();return as(()=>{const m=u.subscribe(M=>{i.current=M,t&&a()});return()=>u.unsubscribe(m)},[]),i.current}const h4=ie.createContext({}),tne=t=>{const{antCls:i,componentCls:a,iconCls:u,avatarBg:m,avatarColor:M,containerSize:L,containerSizeLG:z,containerSizeSM:U,textFontSize:W,textFontSizeLG:J,textFontSizeSM:te,borderRadius:ae,borderRadiusLG:ve,borderRadiusSM:he,lineWidth:oe,lineType:me}=t,ge=(de,ce,_e)=>({width:de,height:de,borderRadius:"50%",[`&${a}-square`]:{borderRadius:_e},[`&${a}-icon`]:{fontSize:ce,[`> ${u}`]:{margin:0}}});return{[a]:Object.assign(Object.assign(Object.assign(Object.assign({},c0(t)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:M,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:m,border:`${pn(oe)} ${me} transparent`,"&-image":{background:"transparent"},[`${i}-image-img`]:{display:"block"}}),ge(L,W,ae)),{"&-lg":Object.assign({},ge(z,J,ve)),"&-sm":Object.assign({},ge(U,te,he)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},rne=t=>{const{componentCls:i,groupBorderColor:a,groupOverlapping:u,groupSpace:m}=t;return{[`${i}-group`]:{display:"inline-flex",[`${i}`]:{borderColor:a},"> *:not(:first-child)":{marginInlineStart:u}},[`${i}-group-popover`]:{[`${i} + ${i}`]:{marginInlineStart:m}}}},nne=t=>{const{controlHeight:i,controlHeightLG:a,controlHeightSM:u,fontSize:m,fontSizeLG:M,fontSizeXL:L,fontSizeHeading3:z,marginXS:U,marginXXS:W,colorBorderBg:J}=t;return{containerSize:i,containerSizeLG:a,containerSizeSM:u,textFontSize:Math.round((M+L)/2),textFontSizeLG:z,textFontSizeSM:m,groupSpace:W,groupOverlapping:-U,groupBorderColor:J}},uH=Df("Avatar",t=>{const{colorTextLightSolid:i,colorTextPlaceholder:a}=t,u=_s(t,{avatarBg:a,avatarColor:i});return[tne(u),rne(u)]},nne);var ine=function(t,i){var a={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&i.indexOf(u)<0&&(a[u]=t[u]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,u=Object.getOwnPropertySymbols(t);m<u.length;m++)i.indexOf(u[m])<0&&Object.prototype.propertyIsEnumerable.call(t,u[m])&&(a[u[m]]=t[u[m]]);return a};const one=(t,i)=>{const[a,u]=ie.useState(1),[m,M]=ie.useState(!1),[L,z]=ie.useState(!0),U=ie.useRef(null),W=ie.useRef(null),J=ep(i,U),{getPrefixCls:te,avatar:ae}=ie.useContext(lo),ve=ie.useContext(h4),he=()=>{if(!W.current||!U.current)return;const Cr=W.current.offsetWidth,Ir=U.current.offsetWidth;if(Cr!==0&&Ir!==0){const{gap:Ut=4}=t;Ut*2<Ir&&u(Ir-Ut*2<Cr?(Ir-Ut*2)/Cr:1)}};ie.useEffect(()=>{M(!0)},[]),ie.useEffect(()=>{z(!0),u(1)},[t.src]),ie.useEffect(he,[t.gap]);const oe=()=>{const{onError:Cr}=t;(Cr==null?void 0:Cr())!==!1&&z(!1)},{prefixCls:me,shape:ge,size:de,src:ce,srcSet:_e,icon:Re,className:Ee,rootClassName:De,alt:We,draggable:Xe,children:et,crossOrigin:Ye}=t,at=ine(t,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),ot=f0(Cr=>{var Ir,Ut;return(Ut=(Ir=de??(ve==null?void 0:ve.size))!==null&&Ir!==void 0?Ir:Cr)!==null&&Ut!==void 0?Ut:"default"}),ct=Object.keys(typeof ot=="object"?ot||{}:{}).some(Cr=>["xs","sm","md","lg","xl","xxl"].includes(Cr)),Dt=ene(ct),$e=ie.useMemo(()=>{if(typeof ot!="object")return{};const Cr=lH.find(Ut=>Dt[Ut]),Ir=ot[Cr];return Ir?{width:Ir,height:Ir,fontSize:Ir&&(Re||et)?Ir/2:18}:{}},[Dt,ot]),tt=te("avatar",me),Ve=Zm(tt),[gt,mt,dt]=uH(tt,Ve),At=mr({[`${tt}-lg`]:ot==="large",[`${tt}-sm`]:ot==="small"}),jt=ie.isValidElement(ce),ar=ge||(ve==null?void 0:ve.shape)||"circle",Ht=mr(tt,At,ae==null?void 0:ae.className,`${tt}-${ar}`,{[`${tt}-image`]:jt||ce&&L,[`${tt}-icon`]:!!Re},dt,Ve,Ee,De,mt),Rt=typeof ot=="number"?{width:ot,height:ot,fontSize:Re?ot/2:18}:{};let pr;if(typeof ce=="string"&&L)pr=ie.createElement("img",{src:ce,draggable:Xe,srcSet:_e,onError:oe,alt:We,crossOrigin:Ye});else if(jt)pr=ce;else if(Re)pr=Re;else if(m||a!==1){const Cr=`scale(${a})`,Ir={msTransform:Cr,WebkitTransform:Cr,transform:Cr};pr=ie.createElement(u0,{onResize:he},ie.createElement("span",{className:`${tt}-string`,ref:W,style:Object.assign({},Ir)},et))}else pr=ie.createElement("span",{className:`${tt}-string`,style:{opacity:0},ref:W},et);return delete at.onError,delete at.gap,gt(ie.createElement("span",Object.assign({},at,{style:Object.assign(Object.assign(Object.assign(Object.assign({},Rt),$e),ae==null?void 0:ae.style),at.style),className:Ht,ref:J}),pr))},cH=ie.forwardRef(one),OE=t=>t?typeof t=="function"?t():t:null;function oD(t){var i=t.children,a=t.prefixCls,u=t.id,m=t.overlayInnerStyle,M=t.className,L=t.style;return ie.createElement("div",{className:mr("".concat(a,"-content"),M),style:L},ie.createElement("div",{className:"".concat(a,"-inner"),id:u,role:"tooltip",style:m},typeof i=="function"?i():i))}var A1={shiftX:64,adjustY:1},w1={adjustX:1,shiftY:!0},gc=[0,0],ane={left:{points:["cr","cl"],overflow:w1,offset:[-4,0],targetOffset:gc},right:{points:["cl","cr"],overflow:w1,offset:[4,0],targetOffset:gc},top:{points:["bc","tc"],overflow:A1,offset:[0,-4],targetOffset:gc},bottom:{points:["tc","bc"],overflow:A1,offset:[0,4],targetOffset:gc},topLeft:{points:["bl","tl"],overflow:A1,offset:[0,-4],targetOffset:gc},leftTop:{points:["tr","tl"],overflow:w1,offset:[-4,0],targetOffset:gc},topRight:{points:["br","tr"],overflow:A1,offset:[0,-4],targetOffset:gc},rightTop:{points:["tl","tr"],overflow:w1,offset:[4,0],targetOffset:gc},bottomRight:{points:["tr","br"],overflow:A1,offset:[0,4],targetOffset:gc},rightBottom:{points:["bl","br"],overflow:w1,offset:[4,0],targetOffset:gc},bottomLeft:{points:["tl","bl"],overflow:A1,offset:[0,4],targetOffset:gc},leftBottom:{points:["br","bl"],overflow:w1,offset:[-4,0],targetOffset:gc}},sne=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],lne=function(i,a){var u=i.overlayClassName,m=i.trigger,M=m===void 0?["hover"]:m,L=i.mouseEnterDelay,z=L===void 0?0:L,U=i.mouseLeaveDelay,W=U===void 0?.1:U,J=i.overlayStyle,te=i.prefixCls,ae=te===void 0?"rc-tooltip":te,ve=i.children,he=i.onVisibleChange,oe=i.afterVisibleChange,me=i.transitionName,ge=i.animation,de=i.motion,ce=i.placement,_e=ce===void 0?"right":ce,Re=i.align,Ee=Re===void 0?{}:Re,De=i.destroyTooltipOnHide,We=De===void 0?!1:De,Xe=i.defaultVisible,et=i.getTooltipContainer,Ye=i.overlayInnerStyle;i.arrowContent;var at=i.overlay,ot=i.id,ct=i.showArrow,Dt=ct===void 0?!0:ct,$e=Qi(i,sne),tt=ie.useRef(null);ie.useImperativeHandle(a,function(){return tt.current});var Ve=Ft({},$e);"visible"in i&&(Ve.popupVisible=i.visible);var gt=function(){return ie.createElement(oD,{key:"content",prefixCls:ae,id:ot,overlayInnerStyle:Ye},at)};return ie.createElement(aH,Sn({popupClassName:u,prefixCls:ae,popup:gt,action:M,builtinPlacements:ane,popupPlacement:_e,ref:tt,popupAlign:Ee,getPopupContainer:et,onPopupVisibleChange:he,afterPopupVisibleChange:oe,popupTransitionName:me,popupAnimation:ge,popupMotion:de,defaultPopupVisible:Xe,autoDestroy:We,mouseLeaveDelay:W,popupStyle:J,mouseEnterDelay:z,arrow:Dt},Ve),ve)};const une=ie.forwardRef(lne);function hH(t){const{sizePopupArrow:i,borderRadiusXS:a,borderRadiusOuter:u}=t,m=i/2,M=0,L=m,z=u*1/Math.sqrt(2),U=m-u*(1-1/Math.sqrt(2)),W=m-a*(1/Math.sqrt(2)),J=u*(Math.sqrt(2)-1)+a*(1/Math.sqrt(2)),te=2*m-W,ae=J,ve=2*m-z,he=U,oe=2*m-M,me=L,ge=m*Math.sqrt(2)+u*(Math.sqrt(2)-2),de=u*(Math.sqrt(2)-1),ce=`polygon(${de}px 100%, 50% ${de}px, ${2*m-de}px 100%, ${de}px 100%)`,_e=`path('M ${M} ${L} A ${u} ${u} 0 0 0 ${z} ${U} L ${W} ${J} A ${a} ${a} 0 0 1 ${te} ${ae} L ${ve} ${he} A ${u} ${u} 0 0 0 ${oe} ${me} Z')`;return{arrowShadowWidth:ge,arrowPath:_e,arrowPolygon:ce}}const cne=(t,i,a)=>{const{sizePopupArrow:u,arrowPolygon:m,arrowPath:M,arrowShadowWidth:L,borderRadiusXS:z,calc:U}=t;return{pointerEvents:"none",width:u,height:u,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:u,height:U(u).div(2).equal(),background:i,clipPath:{_multi_value_:!0,value:[m,M]},content:'""'},"&::after":{content:'""',position:"absolute",width:L,height:L,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${pn(z)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:a,zIndex:0,background:"transparent"}}},fH=8;function aD(t){const{contentRadius:i,limitVerticalRadius:a}=t,u=i>12?i+2:12;return{arrowOffsetHorizontal:u,arrowOffsetVertical:a?fH:u}}function uT(t,i){return t?i:{}}function dH(t,i,a){const{componentCls:u,boxShadowPopoverArrow:m,arrowOffsetVertical:M,arrowOffsetHorizontal:L}=t,{arrowDistance:z=0,arrowPlacement:U={left:!0,right:!0,top:!0,bottom:!0}}=a||{};return{[u]:Object.assign(Object.assign(Object.assign(Object.assign({[`${u}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},cne(t,i,m)),{"&:before":{background:i}})]},uT(!!U.top,{[[`&-placement-top > ${u}-arrow`,`&-placement-topLeft > ${u}-arrow`,`&-placement-topRight > ${u}-arrow`].join(",")]:{bottom:z,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${u}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft > ${u}-arrow`]:{left:{_skip_check_:!0,value:L}},[`&-placement-topRight > ${u}-arrow`]:{right:{_skip_check_:!0,value:L}}})),uT(!!U.bottom,{[[`&-placement-bottom > ${u}-arrow`,`&-placement-bottomLeft > ${u}-arrow`,`&-placement-bottomRight > ${u}-arrow`].join(",")]:{top:z,transform:"translateY(-100%)"},[`&-placement-bottom > ${u}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft > ${u}-arrow`]:{left:{_skip_check_:!0,value:L}},[`&-placement-bottomRight > ${u}-arrow`]:{right:{_skip_check_:!0,value:L}}})),uT(!!U.left,{[[`&-placement-left > ${u}-arrow`,`&-placement-leftTop > ${u}-arrow`,`&-placement-leftBottom > ${u}-arrow`].join(",")]:{right:{_skip_check_:!0,value:z},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${u}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${u}-arrow`]:{top:M},[`&-placement-leftBottom > ${u}-arrow`]:{bottom:M}})),uT(!!U.right,{[[`&-placement-right > ${u}-arrow`,`&-placement-rightTop > ${u}-arrow`,`&-placement-rightBottom > ${u}-arrow`].join(",")]:{left:{_skip_check_:!0,value:z},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${u}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${u}-arrow`]:{top:M},[`&-placement-rightBottom > ${u}-arrow`]:{bottom:M}}))}}function hne(t,i,a,u){if(u===!1)return{adjustX:!1,adjustY:!1};const m=u&&typeof u=="object"?u:{},M={};switch(t){case"top":case"bottom":M.shiftX=i.arrowOffsetHorizontal*2+a,M.shiftY=!0,M.adjustY=!0;break;case"left":case"right":M.shiftY=i.arrowOffsetVertical*2+a,M.shiftX=!0,M.adjustX=!0;break}const L=Object.assign(Object.assign({},M),m);return L.shiftX||(L.adjustX=!0),L.shiftY||(L.adjustY=!0),L}const Mz={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},fne={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},dne=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function pne(t){const{arrowWidth:i,autoAdjustOverflow:a,arrowPointAtCenter:u,offset:m,borderRadius:M,visibleFirst:L}=t,z=i/2,U={};return Object.keys(Mz).forEach(W=>{const J=u&&fne[W]||Mz[W],te=Object.assign(Object.assign({},J),{offset:[0,0],dynamicInset:!0});switch(U[W]=te,dne.has(W)&&(te.autoArrow=!1),W){case"top":case"topLeft":case"topRight":te.offset[1]=-z-m;break;case"bottom":case"bottomLeft":case"bottomRight":te.offset[1]=z+m;break;case"left":case"leftTop":case"leftBottom":te.offset[0]=-z-m;break;case"right":case"rightTop":case"rightBottom":te.offset[0]=z+m;break}const ae=aD({contentRadius:M,limitVerticalRadius:!0});if(u)switch(W){case"topLeft":case"bottomLeft":te.offset[0]=-ae.arrowOffsetHorizontal-z;break;case"topRight":case"bottomRight":te.offset[0]=ae.arrowOffsetHorizontal+z;break;case"leftTop":case"rightTop":te.offset[1]=-ae.arrowOffsetHorizontal-z;break;case"leftBottom":case"rightBottom":te.offset[1]=ae.arrowOffsetHorizontal+z;break}te.overflow=hne(W,ae,i,a),L&&(te.htmlRegion="visibleFirst")}),U}const mne=t=>{const{componentCls:i,tooltipMaxWidth:a,tooltipColor:u,tooltipBg:m,tooltipBorderRadius:M,zIndexPopup:L,controlHeight:z,boxShadowSecondary:U,paddingSM:W,paddingXS:J}=t;return[{[i]:Object.assign(Object.assign(Object.assign(Object.assign({},c0(t)),{position:"absolute",zIndex:L,display:"block",width:"max-content",maxWidth:a,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":m,[`${i}-inner`]:{minWidth:"1em",minHeight:z,padding:`${pn(t.calc(W).div(2).equal())} ${pn(J)}`,color:u,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:m,borderRadius:M,boxShadow:U,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${i}-inner`]:{borderRadius:t.min(M,fH)}},[`${i}-content`]:{position:"relative"}}),aQ(t,(te,ae)=>{let{darkColor:ve}=ae;return{[`&${i}-${te}`]:{[`${i}-inner`]:{backgroundColor:ve},[`${i}-arrow`]:{"--antd-arrow-background-color":ve}}}})),{"&-rtl":{direction:"rtl"}})},dH(t,"var(--antd-arrow-background-color)"),{[`${i}-pure`]:{position:"relative",maxWidth:"none",margin:t.sizePopupArrow}}]},gne=t=>Object.assign(Object.assign({zIndexPopup:t.zIndexPopupBase+70},aD({contentRadius:t.borderRadius,limitVerticalRadius:!0})),hH(_s(t,{borderRadiusOuter:Math.min(t.borderRadiusOuter,4)}))),pH=function(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Df("Tooltip",u=>{const{borderRadius:m,colorTextLightSolid:M,colorBgSpotlight:L}=u,z=_s(u,{tooltipMaxWidth:250,tooltipColor:M,tooltipBorderRadius:m,tooltipBg:L});return[mne(z),nD(u,"zoom-big-fast")]},gne,{resetStyle:!1,injectStyle:i})(t)},vne=cC.map(t=>`${t}-inverse`);function yne(t){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat(on(vne),on(cC)).includes(t):cC.includes(t)}function mH(t,i){const a=yne(i),u=mr({[`${t}-${i}`]:i&&a}),m={},M={};return i&&!a&&(m.background=i,M["--antd-arrow-background-color"]=i),{className:u,overlayStyle:m,arrowStyle:M}}const xne=t=>{const{prefixCls:i,className:a,placement:u="top",title:m,color:M,overlayInnerStyle:L}=t,{getPrefixCls:z}=ie.useContext(lo),U=z("tooltip",i),[W,J,te]=pH(U),ae=mH(U,M),ve=ae.arrowStyle,he=Object.assign(Object.assign({},L),ae.overlayStyle),oe=mr(J,te,U,`${U}-pure`,`${U}-placement-${u}`,a,ae.className);return W(ie.createElement("div",{className:oe,style:ve},ie.createElement("div",{className:`${U}-arrow`}),ie.createElement(oD,Object.assign({},t,{className:J,prefixCls:U,overlayInnerStyle:he}),m)))};var Ane=function(t,i){var a={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&i.indexOf(u)<0&&(a[u]=t[u]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,u=Object.getOwnPropertySymbols(t);m<u.length;m++)i.indexOf(u[m])<0&&Object.prototype.propertyIsEnumerable.call(t,u[m])&&(a[u[m]]=t[u[m]]);return a};const wne=ie.forwardRef((t,i)=>{var a,u;const{prefixCls:m,openClassName:M,getTooltipContainer:L,overlayClassName:z,color:U,overlayInnerStyle:W,children:J,afterOpenChange:te,afterVisibleChange:ae,destroyTooltipOnHide:ve,arrow:he=!0,title:oe,overlay:me,builtinPlacements:ge,arrowPointAtCenter:de=!1,autoAdjustOverflow:ce=!0}=t,_e=!!he,[,Re]=Ec(),{getPopupContainer:Ee,getPrefixCls:De,direction:We}=ie.useContext(lo),Xe=WO(),et=ie.useRef(null),Ye=()=>{var xn;(xn=et.current)===null||xn===void 0||xn.forceAlign()};ie.useImperativeHandle(i,()=>({forceAlign:Ye,forcePopupAlign:()=>{Xe.deprecated(!1,"forcePopupAlign","forceAlign"),Ye()}}));const[at,ot]=Gd(!1,{value:(a=t.open)!==null&&a!==void 0?a:t.visible,defaultValue:(u=t.defaultOpen)!==null&&u!==void 0?u:t.defaultVisible}),ct=!oe&&!me&&oe!==0,Dt=xn=>{var qn,Dn;ot(ct?!1:xn),ct||((qn=t.onOpenChange)===null||qn===void 0||qn.call(t,xn),(Dn=t.onVisibleChange)===null||Dn===void 0||Dn.call(t,xn))},$e=ie.useMemo(()=>{var xn,qn;let Dn=de;return typeof he=="object"&&(Dn=(qn=(xn=he.pointAtCenter)!==null&&xn!==void 0?xn:he.arrowPointAtCenter)!==null&&qn!==void 0?qn:de),ge||pne({arrowPointAtCenter:Dn,autoAdjustOverflow:ce,arrowWidth:_e?Re.sizePopupArrow:0,borderRadius:Re.borderRadius,offset:Re.marginXXS,visibleFirst:!0})},[de,he,ge,Re]),tt=ie.useMemo(()=>oe===0?oe:me||oe||"",[me,oe]),Ve=ie.createElement(IE,null,typeof tt=="function"?tt():tt),{getPopupContainer:gt,placement:mt="top",mouseEnterDelay:dt=.1,mouseLeaveDelay:At=.1,overlayStyle:jt,rootClassName:ar}=t,Ht=Ane(t,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),Rt=De("tooltip",m),pr=De(),Cr=t["data-popover-inject"];let Ir=at;!("open"in t)&&!("visible"in t)&&ct&&(Ir=!1);const Ut=ie.isValidElement(J)&&!_9(J)?J:ie.createElement("span",null,J),_r=Ut.props,Bn=!_r.className||typeof _r.className=="string"?mr(_r.className,M||`${Rt}-open`):_r.className,[bn,ur,jn]=pH(Rt,!Cr),An=mH(Rt,U),en=An.arrowStyle,Fn=Object.assign(Object.assign({},W),An.overlayStyle),lr=mr(z,{[`${Rt}-rtl`]:We==="rtl"},An.className,ar,ur,jn),[er,cn]=L9("Tooltip",Ht.zIndex),oi=ie.createElement(une,Object.assign({},Ht,{zIndex:er,showArrow:_e,placement:mt,mouseEnterDelay:dt,mouseLeaveDelay:At,prefixCls:Rt,overlayClassName:lr,overlayStyle:Object.assign(Object.assign({},en),jt),getTooltipContainer:gt||L||Ee,ref:et,builtinPlacements:$e,overlay:Ve,visible:Ir,onVisibleChange:Dt,afterVisibleChange:te??ae,overlayInnerStyle:Fn,arrowContent:ie.createElement("span",{className:`${Rt}-arrow-content`}),motion:{motionName:F9(pr,"zoom-big-fast",t.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!ve}),Ir?Of(Ut,{className:Bn}):Ut);return bn(ie.createElement(E9.Provider,{value:cn},oi))}),sD=wne;sD._InternalPanelDoNotUseOrYouWillBeFired=xne;const Cne=t=>{const{componentCls:i,popoverColor:a,titleMinWidth:u,fontWeightStrong:m,innerPadding:M,boxShadowSecondary:L,colorTextHeading:z,borderRadiusLG:U,zIndexPopup:W,titleMarginBottom:J,colorBgElevated:te,popoverBg:ae,titleBorderBottom:ve,innerContentPadding:he,titlePadding:oe}=t;return[{[i]:Object.assign(Object.assign({},c0(t)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:W,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","--antd-arrow-background-color":te,width:"max-content",maxWidth:"100vw","&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${i}-content`]:{position:"relative"},[`${i}-inner`]:{backgroundColor:ae,backgroundClip:"padding-box",borderRadius:U,boxShadow:L,padding:M},[`${i}-title`]:{minWidth:u,marginBottom:J,color:z,fontWeight:m,borderBottom:ve,padding:oe},[`${i}-inner-content`]:{color:a,padding:he}})},dH(t,"var(--antd-arrow-background-color)"),{[`${i}-pure`]:{position:"relative",maxWidth:"none",margin:t.sizePopupArrow,display:"inline-block",[`${i}-content`]:{display:"inline-block"}}}]},_ne=t=>{const{componentCls:i}=t;return{[i]:cC.map(a=>{const u=t[`${a}6`];return{[`&${i}-${a}`]:{"--antd-arrow-background-color":u,[`${i}-inner`]:{backgroundColor:u},[`${i}-arrow`]:{background:"transparent"}}}})}},Mne=t=>{const{lineWidth:i,controlHeight:a,fontHeight:u,padding:m,wireframe:M,zIndexPopupBase:L,borderRadiusLG:z,marginXS:U,lineType:W,colorSplit:J,paddingSM:te}=t,ae=a-u,ve=ae/2,he=ae/2-i,oe=m;return Object.assign(Object.assign(Object.assign({titleMinWidth:177,zIndexPopup:L+30},hH(t)),aD({contentRadius:z,limitVerticalRadius:!0})),{innerPadding:M?0:12,titleMarginBottom:M?0:U,titlePadding:M?`${ve}px ${oe}px ${he}px`:0,titleBorderBottom:M?`${i}px ${W} ${J}`:"none",innerContentPadding:M?`${te}px ${oe}px`:0})},gH=Df("Popover",t=>{const{colorBgElevated:i,colorText:a}=t,u=_s(t,{popoverBg:i,popoverColor:a});return[Cne(u),_ne(u),nD(u,"zoom-big")]},Mne,{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]});var Sne=function(t,i){var a={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&i.indexOf(u)<0&&(a[u]=t[u]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,u=Object.getOwnPropertySymbols(t);m<u.length;m++)i.indexOf(u[m])<0&&Object.prototype.propertyIsEnumerable.call(t,u[m])&&(a[u[m]]=t[u[m]]);return a};const Tne=(t,i,a)=>!i&&!a?null:ie.createElement(ie.Fragment,null,i&&ie.createElement("div",{className:`${t}-title`},OE(i)),ie.createElement("div",{className:`${t}-inner-content`},OE(a))),Ene=t=>{const{hashId:i,prefixCls:a,className:u,style:m,placement:M="top",title:L,content:z,children:U}=t;return ie.createElement("div",{className:mr(i,a,`${a}-pure`,`${a}-placement-${M}`,u),style:m},ie.createElement("div",{className:`${a}-arrow`}),ie.createElement(oD,Object.assign({},t,{className:i,prefixCls:a}),U||Tne(a,L,z)))},Ine=t=>{const{prefixCls:i,className:a}=t,u=Sne(t,["prefixCls","className"]),{getPrefixCls:m}=ie.useContext(lo),M=m("popover",i),[L,z,U]=gH(M);return L(ie.createElement(Ene,Object.assign({},u,{prefixCls:M,hashId:z,className:mr(a,U)})))};var Rne=function(t,i){var a={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&i.indexOf(u)<0&&(a[u]=t[u]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,u=Object.getOwnPropertySymbols(t);m<u.length;m++)i.indexOf(u[m])<0&&Object.prototype.propertyIsEnumerable.call(t,u[m])&&(a[u[m]]=t[u[m]]);return a};const Lne=t=>{let{title:i,content:a,prefixCls:u}=t;return ie.createElement(ie.Fragment,null,i&&ie.createElement("div",{className:`${u}-title`},OE(i)),ie.createElement("div",{className:`${u}-inner-content`},OE(a)))},Pne=ie.forwardRef((t,i)=>{var a,u;const{prefixCls:m,title:M,content:L,overlayClassName:z,placement:U="top",trigger:W="hover",children:J,mouseEnterDelay:te=.1,mouseLeaveDelay:ae=.1,onOpenChange:ve,overlayStyle:he={}}=t,oe=Rne(t,["prefixCls","title","content","overlayClassName","placement","trigger","children","mouseEnterDelay","mouseLeaveDelay","onOpenChange","overlayStyle"]),{getPrefixCls:me}=ie.useContext(lo),ge=me("popover",m),[de,ce,_e]=gH(ge),Re=me(),Ee=mr(z,ce,_e),[De,We]=Gd(!1,{value:(a=t.open)!==null&&a!==void 0?a:t.visible,defaultValue:(u=t.defaultOpen)!==null&&u!==void 0?u:t.defaultVisible}),Xe=(at,ot)=>{We(at,!0),ve==null||ve(at,ot)},et=at=>{at.keyCode===yn.ESC&&Xe(!1,at)},Ye=at=>{Xe(at)};return de(ie.createElement(sD,Object.assign({placement:U,trigger:W,mouseEnterDelay:te,mouseLeaveDelay:ae,overlayStyle:he},oe,{prefixCls:ge,overlayClassName:Ee,ref:i,open:De,onOpenChange:Ye,overlay:M||L?ie.createElement(Lne,{prefixCls:ge,title:M,content:L}):null,transitionName:F9(Re,"zoom-big",oe.transitionName),"data-popover-inject":!0}),Of(J,{onKeyDown:at=>{var ot,ct;ie.isValidElement(J)&&((ct=J==null?void 0:(ot=J.props).onKeyDown)===null||ct===void 0||ct.call(ot,at)),et(at)}})))}),vH=Pne;vH._InternalPanelDoNotUseOrYouWillBeFired=Ine;const Sz=t=>{const{size:i,shape:a}=ie.useContext(h4),u=ie.useMemo(()=>({size:t.size||i,shape:t.shape||a}),[t.size,t.shape,i,a]);return ie.createElement(h4.Provider,{value:u},t.children)},One=t=>{const{getPrefixCls:i,direction:a}=ie.useContext(lo),{prefixCls:u,className:m,rootClassName:M,style:L,maxCount:z,maxStyle:U,size:W,shape:J,maxPopoverPlacement:te="top",maxPopoverTrigger:ae="hover",children:ve}=t,he=i("avatar",u),oe=`${he}-group`,me=Zm(he),[ge,de,ce]=uH(he,me),_e=mr(oe,{[`${oe}-rtl`]:a==="rtl"},ce,me,m,M,de),Re=Pf(ve).map((De,We)=>Of(De,{key:`avatar-key-${We}`})),Ee=Re.length;if(z&&z<Ee){const De=Re.slice(0,z),We=Re.slice(z,Ee);return De.push(ie.createElement(vH,{key:"avatar-popover-key",content:We,trigger:ae,placement:te,overlayClassName:`${oe}-popover`,destroyTooltipOnHide:!0},ie.createElement(cH,{style:U},`+${Ee-z}`))),ge(ie.createElement(Sz,{shape:J,size:W},ie.createElement("div",{className:_e,style:L},De)))}return ge(ie.createElement(Sz,{shape:J,size:W},ie.createElement("div",{className:_e,style:L},Re)))},yH=cH;yH.Group=One;var Dne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},bne=function(i,a){return ie.createElement(Ka,Sn({},i,{ref:a,icon:Dne}))},Tz=ie.forwardRef(bne),xH=ie.createContext(null);function AH(t,i){return t===void 0?null:"".concat(t,"-").concat(i)}function wH(t){var i=ie.useContext(xH);return AH(i,t)}var Fne=["children","locked"],Ph=ie.createContext(null);function Nne(t,i){var a=Ft({},t);return Object.keys(i).forEach(function(u){var m=i[u];m!==void 0&&(a[u]=m)}),a}function dC(t){var i=t.children,a=t.locked,u=Qi(t,Fne),m=ie.useContext(Ph),M=g3(function(){return Nne(m,u)},[m,u],function(L,z){return!a&&(L[0]!==z[0]||!oC(L[1],z[1],!0))});return ie.createElement(Ph.Provider,{value:M},i)}var Bne=[],CH=ie.createContext(null);function E3(){return ie.useContext(CH)}var _H=ie.createContext(Bne);function wx(t){var i=ie.useContext(_H);return ie.useMemo(function(){return t!==void 0?[].concat(on(i),[t]):i},[i,t])}var MH=ie.createContext(null),lD=ie.createContext({});function Ez(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(QO(t)){var a=t.nodeName.toLowerCase(),u=["input","select","textarea","button"].includes(a)||t.isContentEditable||a==="a"&&!!t.getAttribute("href"),m=t.getAttribute("tabindex"),M=Number(m),L=null;return m&&!Number.isNaN(M)?L=M:u&&L===null&&(L=0),u&&t.disabled&&(L=null),L!==null&&(L>=0||i&&L<0)}return!1}function zne(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=on(t.querySelectorAll("*")).filter(function(u){return Ez(u,i)});return Ez(t,i)&&a.unshift(t),a}var f4=yn.LEFT,d4=yn.RIGHT,p4=yn.UP,GT=yn.DOWN,VT=yn.ENTER,SH=yn.ESC,fw=yn.HOME,dw=yn.END,Iz=[p4,GT,f4,d4];function Une(t,i,a,u){var m,M="prev",L="next",z="children",U="parent";if(t==="inline"&&u===VT)return{inlineTrigger:!0};var W=_t(_t({},p4,M),GT,L),J=_t(_t(_t(_t({},f4,a?L:M),d4,a?M:L),GT,z),VT,z),te=_t(_t(_t(_t(_t(_t({},p4,M),GT,L),VT,z),SH,U),f4,a?z:U),d4,a?U:z),ae={inline:W,horizontal:J,vertical:te,inlineSub:W,horizontalSub:te,verticalSub:te},ve=(m=ae["".concat(t).concat(i?"":"Sub")])===null||m===void 0?void 0:m[u];switch(ve){case M:return{offset:-1,sibling:!0};case L:return{offset:1,sibling:!0};case U:return{offset:-1,sibling:!1};case z:return{offset:1,sibling:!1};default:return null}}function kne(t){for(var i=t;i;){if(i.getAttribute("data-menu-list"))return i;i=i.parentElement}return null}function Hne(t,i){for(var a=t||document.activeElement;a;){if(i.has(a))return a;a=a.parentElement}return null}function uD(t,i){var a=zne(t,!0);return a.filter(function(u){return i.has(u)})}function Rz(t,i,a){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(!t)return null;var m=uD(t,i),M=m.length,L=m.findIndex(function(z){return a===z});return u<0?L===-1?L=M-1:L-=1:u>0&&(L+=1),L=(L+M)%M,m[L]}var m4=function(i,a){var u=new Set,m=new Map,M=new Map;return i.forEach(function(L){var z=document.querySelector("[data-menu-id='".concat(AH(a,L),"']"));z&&(u.add(z),M.set(z,L),m.set(L,z))}),{elements:u,key2element:m,element2key:M}};function jne(t,i,a,u,m,M,L,z,U,W){var J=ie.useRef(),te=ie.useRef();te.current=i;var ae=function(){ul.cancel(J.current)};return ie.useEffect(function(){return function(){ae()}},[]),function(ve){var he=ve.which;if([].concat(Iz,[VT,SH,fw,dw]).includes(he)){var oe=M(),me=m4(oe,u),ge=me,de=ge.elements,ce=ge.key2element,_e=ge.element2key,Re=ce.get(i),Ee=Hne(Re,de),De=_e.get(Ee),We=Une(t,L(De,!0).length===1,a,he);if(!We&&he!==fw&&he!==dw)return;(Iz.includes(he)||[fw,dw].includes(he))&&ve.preventDefault();var Xe=function(tt){if(tt){var Ve=tt,gt=tt.querySelector("a");gt!=null&&gt.getAttribute("href")&&(Ve=gt);var mt=_e.get(tt);z(mt),ae(),J.current=ul(function(){te.current===mt&&Ve.focus()})}};if([fw,dw].includes(he)||We.sibling||!Ee){var et;!Ee||t==="inline"?et=m.current:et=kne(Ee);var Ye,at=uD(et,de);he===fw?Ye=at[0]:he===dw?Ye=at[at.length-1]:Ye=Rz(et,de,Ee,We.offset),Xe(Ye)}else if(We.inlineTrigger)U(De);else if(We.offset>0)U(De,!0),ae(),J.current=ul(function(){me=m4(oe,u);var $e=Ee.getAttribute("aria-controls"),tt=document.getElementById($e),Ve=Rz(tt,me.elements);Xe(Ve)},5);else if(We.offset<0){var ot=L(De,!0),ct=ot[ot.length-2],Dt=ce.get(ct);U(ct,!1),Xe(Dt)}}W==null||W(ve)}}function Gne(t){Promise.resolve().then(t)}var cD="__RC_UTIL_PATH_SPLIT__",Lz=function(i){return i.join(cD)},Vne=function(i){return i.split(cD)},g4="rc-menu-more";function Wne(){var t=ie.useState({}),i=sr(t,2),a=i[1],u=ie.useRef(new Map),m=ie.useRef(new Map),M=ie.useState([]),L=sr(M,2),z=L[0],U=L[1],W=ie.useRef(0),J=ie.useRef(!1),te=function(){J.current||a({})},ae=ie.useCallback(function(ce,_e){var Re=Lz(_e);m.current.set(Re,ce),u.current.set(ce,Re),W.current+=1;var Ee=W.current;Gne(function(){Ee===W.current&&te()})},[]),ve=ie.useCallback(function(ce,_e){var Re=Lz(_e);m.current.delete(Re),u.current.delete(ce)},[]),he=ie.useCallback(function(ce){U(ce)},[]),oe=ie.useCallback(function(ce,_e){var Re=u.current.get(ce)||"",Ee=Vne(Re);return _e&&z.includes(Ee[0])&&Ee.unshift(g4),Ee},[z]),me=ie.useCallback(function(ce,_e){return ce.some(function(Re){var Ee=oe(Re,!0);return Ee.includes(_e)})},[oe]),ge=function(){var _e=on(u.current.keys());return z.length&&_e.push(g4),_e},de=ie.useCallback(function(ce){var _e="".concat(u.current.get(ce)).concat(cD),Re=new Set;return on(m.current.keys()).forEach(function(Ee){Ee.startsWith(_e)&&Re.add(m.current.get(Ee))}),Re},[]);return ie.useEffect(function(){return function(){J.current=!0}},[]),{registerPath:ae,unregisterPath:ve,refreshOverflowKeys:he,isSubPathKey:me,getKeyPath:oe,getKeys:ge,getSubPathKeys:de}}function Aw(t){var i=ie.useRef(t);i.current=t;var a=ie.useCallback(function(){for(var u,m=arguments.length,M=new Array(m),L=0;L<m;L++)M[L]=arguments[L];return(u=i.current)===null||u===void 0?void 0:u.call.apply(u,[i].concat(M))},[]);return t?a:void 0}var Xne=Math.random().toFixed(5).toString().slice(2),Pz=0;function Yne(t){var i=Gd(t,{value:t}),a=sr(i,2),u=a[0],m=a[1];return ie.useEffect(function(){Pz+=1;var M="".concat(Xne,"-").concat(Pz);m("rc-menu-uuid-".concat(M))},[]),u}function TH(t,i,a,u){var m=ie.useContext(Ph),M=m.activeKey,L=m.onActive,z=m.onInactive,U={active:M===t};return i||(U.onMouseEnter=function(W){a==null||a({key:t,domEvent:W}),L(t)},U.onMouseLeave=function(W){u==null||u({key:t,domEvent:W}),z(t)}),U}function EH(t){var i=ie.useContext(Ph),a=i.mode,u=i.rtl,m=i.inlineIndent;if(a!=="inline")return null;var M=t;return u?{paddingRight:M*m}:{paddingLeft:M*m}}function IH(t){var i=t.icon,a=t.props,u=t.children,m;return i===null||i===!1?null:(typeof i=="function"?m=ie.createElement(i,Ft({},a)):typeof i!="boolean"&&(m=i),m||u||null)}var Zne=["item"];function DE(t){var i=t.item,a=Qi(t,Zne);return Object.defineProperty(a,"item",{get:function(){return Il(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),i}}),a}var qne=["title","attribute","elementRef"],Kne=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],Jne=["active"],Qne=function(t){Ym(a,t);var i=gx(a);function a(){return hl(this,a),i.apply(this,arguments)}return fl(a,[{key:"render",value:function(){var m=this.props,M=m.title,L=m.attribute,z=m.elementRef,U=Qi(m,qne),W=Oh(U,["eventKey","popupClassName","popupOffset","onTitleClick"]);return Il(!L,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),ie.createElement(Vd.Item,Sn({},L,{title:typeof M=="string"?M:void 0},W,{ref:z}))}}]),a}(ie.Component),$ne=ie.forwardRef(function(t,i){var a=t.style,u=t.className,m=t.eventKey;t.warnKey;var M=t.disabled,L=t.itemIcon,z=t.children,U=t.role,W=t.onMouseEnter,J=t.onMouseLeave,te=t.onClick,ae=t.onKeyDown,ve=t.onFocus,he=Qi(t,Kne),oe=wH(m),me=ie.useContext(Ph),ge=me.prefixCls,de=me.onItemClick,ce=me.disabled,_e=me.overflowDisabled,Re=me.itemIcon,Ee=me.selectedKeys,De=me.onActive,We=ie.useContext(lD),Xe=We._internalRenderMenuItem,et="".concat(ge,"-item"),Ye=ie.useRef(),at=ie.useRef(),ot=ce||M,ct=MC(i,at),Dt=wx(m),$e=function(Ir){return{key:m,keyPath:on(Dt).reverse(),item:Ye.current,domEvent:Ir}},tt=L||Re,Ve=TH(m,ot,W,J),gt=Ve.active,mt=Qi(Ve,Jne),dt=Ee.includes(m),At=EH(Dt.length),jt=function(Ir){if(!ot){var Ut=$e(Ir);te==null||te(DE(Ut)),de(Ut)}},ar=function(Ir){if(ae==null||ae(Ir),Ir.which===yn.ENTER){var Ut=$e(Ir);te==null||te(DE(Ut)),de(Ut)}},Ht=function(Ir){De(m),ve==null||ve(Ir)},Rt={};t.role==="option"&&(Rt["aria-selected"]=dt);var pr=ie.createElement(Qne,Sn({ref:Ye,elementRef:ct,role:U===null?"none":U||"menuitem",tabIndex:M?null:-1,"data-menu-id":_e&&oe?null:oe},he,mt,Rt,{component:"li","aria-disabled":M,style:Ft(Ft({},At),a),className:mr(et,_t(_t(_t({},"".concat(et,"-active"),gt),"".concat(et,"-selected"),dt),"".concat(et,"-disabled"),ot),u),onClick:jt,onKeyDown:ar,onFocus:Ht}),z,ie.createElement(IH,{props:Ft(Ft({},t),{},{isSelected:dt}),icon:tt}));return Xe&&(pr=Xe(pr,t,{selected:dt})),pr});function eie(t,i){var a=t.eventKey,u=E3(),m=wx(a);return ie.useEffect(function(){if(u)return u.registerPath(a,m),function(){u.unregisterPath(a,m)}},[m]),u?null:ie.createElement($ne,Sn({},t,{ref:i}))}const I3=ie.forwardRef(eie);var tie=["className","children"],rie=function(i,a){var u=i.className,m=i.children,M=Qi(i,tie),L=ie.useContext(Ph),z=L.prefixCls,U=L.mode,W=L.rtl;return ie.createElement("ul",Sn({className:mr(z,W&&"".concat(z,"-rtl"),"".concat(z,"-sub"),"".concat(z,"-").concat(U==="inline"?"inline":"vertical"),u),role:"menu"},M,{"data-menu-list":!0,ref:a}),m)},hD=ie.forwardRef(rie);hD.displayName="SubMenuList";function fD(t,i){return Pf(t).map(function(a,u){if(ie.isValidElement(a)){var m,M,L=a.key,z=(m=(M=a.props)===null||M===void 0?void 0:M.eventKey)!==null&&m!==void 0?m:L,U=z==null;U&&(z="tmp_key-".concat([].concat(on(i),[u]).join("-")));var W={key:z,eventKey:z};return ie.cloneElement(a,W)}return a})}var sl={adjustX:1,adjustY:1},nie={topLeft:{points:["bl","tl"],overflow:sl},topRight:{points:["br","tr"],overflow:sl},bottomLeft:{points:["tl","bl"],overflow:sl},bottomRight:{points:["tr","br"],overflow:sl},leftTop:{points:["tr","tl"],overflow:sl},leftBottom:{points:["br","bl"],overflow:sl},rightTop:{points:["tl","tr"],overflow:sl},rightBottom:{points:["bl","br"],overflow:sl}},iie={topLeft:{points:["bl","tl"],overflow:sl},topRight:{points:["br","tr"],overflow:sl},bottomLeft:{points:["tl","bl"],overflow:sl},bottomRight:{points:["tr","br"],overflow:sl},rightTop:{points:["tr","tl"],overflow:sl},rightBottom:{points:["br","bl"],overflow:sl},leftTop:{points:["tl","tr"],overflow:sl},leftBottom:{points:["bl","br"],overflow:sl}};function RH(t,i,a){if(i)return i;if(a)return a[t]||a.other}var oie={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function aie(t){var i=t.prefixCls,a=t.visible,u=t.children,m=t.popup,M=t.popupStyle,L=t.popupClassName,z=t.popupOffset,U=t.disabled,W=t.mode,J=t.onVisibleChange,te=ie.useContext(Ph),ae=te.getPopupContainer,ve=te.rtl,he=te.subMenuOpenDelay,oe=te.subMenuCloseDelay,me=te.builtinPlacements,ge=te.triggerSubMenuAction,de=te.forceSubMenuRender,ce=te.rootClassName,_e=te.motion,Re=te.defaultMotions,Ee=ie.useState(!1),De=sr(Ee,2),We=De[0],Xe=De[1],et=Ft(ve?Ft({},iie):Ft({},nie),me),Ye=oie[W],at=RH(W,_e,Re),ot=ie.useRef(at);W!=="inline"&&(ot.current=at);var ct=Ft(Ft({},ot.current),{},{leavedClassName:"".concat(i,"-hidden"),removeOnLeave:!1,motionAppear:!0}),Dt=ie.useRef();return ie.useEffect(function(){return Dt.current=ul(function(){Xe(a)}),function(){ul.cancel(Dt.current)}},[a]),ie.createElement(aH,{prefixCls:i,popupClassName:mr("".concat(i,"-popup"),_t({},"".concat(i,"-rtl"),ve),L,ce),stretch:W==="horizontal"?"minWidth":null,getPopupContainer:ae,builtinPlacements:et,popupPlacement:Ye,popupVisible:We,popup:m,popupStyle:M,popupAlign:z&&{offset:z},action:U?[]:[ge],mouseEnterDelay:he,mouseLeaveDelay:oe,onPopupVisibleChange:J,forceRender:de,popupMotion:ct,fresh:!0},u)}function sie(t){var i=t.id,a=t.open,u=t.keyPath,m=t.children,M="inline",L=ie.useContext(Ph),z=L.prefixCls,U=L.forceSubMenuRender,W=L.motion,J=L.defaultMotions,te=L.mode,ae=ie.useRef(!1);ae.current=te===M;var ve=ie.useState(!ae.current),he=sr(ve,2),oe=he[0],me=he[1],ge=ae.current?a:!1;ie.useEffect(function(){ae.current&&me(!1)},[te]);var de=Ft({},RH(M,W,J));u.length>1&&(de.motionAppear=!1);var ce=de.onVisibleChanged;return de.onVisibleChanged=function(_e){return!ae.current&&!_e&&me(!0),ce==null?void 0:ce(_e)},oe?null:ie.createElement(dC,{mode:M,locked:!ae.current},ie.createElement(yx,Sn({visible:ge},de,{forceRender:U,removeOnLeave:!1,leavedClassName:"".concat(z,"-hidden")}),function(_e){var Re=_e.className,Ee=_e.style;return ie.createElement(hD,{id:i,className:Re,style:Ee},m)}))}var lie=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","popupStyle","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],uie=["active"],cie=function(i){var a=i.style,u=i.className,m=i.title,M=i.eventKey;i.warnKey;var L=i.disabled,z=i.internalPopupClose,U=i.children,W=i.itemIcon,J=i.expandIcon,te=i.popupClassName,ae=i.popupOffset,ve=i.popupStyle,he=i.onClick,oe=i.onMouseEnter,me=i.onMouseLeave,ge=i.onTitleClick,de=i.onTitleMouseEnter,ce=i.onTitleMouseLeave,_e=Qi(i,lie),Re=wH(M),Ee=ie.useContext(Ph),De=Ee.prefixCls,We=Ee.mode,Xe=Ee.openKeys,et=Ee.disabled,Ye=Ee.overflowDisabled,at=Ee.activeKey,ot=Ee.selectedKeys,ct=Ee.itemIcon,Dt=Ee.expandIcon,$e=Ee.onItemClick,tt=Ee.onOpenChange,Ve=Ee.onActive,gt=ie.useContext(lD),mt=gt._internalRenderSubMenuItem,dt=ie.useContext(MH),At=dt.isSubPathKey,jt=wx(),ar="".concat(De,"-submenu"),Ht=et||L,Rt=ie.useRef(),pr=ie.useRef(),Cr=W??ct,Ir=J??Dt,Ut=Xe.includes(M),_r=!Ye&&Ut,Bn=At(ot,M),bn=TH(M,Ht,de,ce),ur=bn.active,jn=Qi(bn,uie),An=ie.useState(!1),en=sr(An,2),Fn=en[0],lr=en[1],er=function(bi){Ht||lr(bi)},cn=function(bi){er(!0),oe==null||oe({key:M,domEvent:bi})},oi=function(bi){er(!1),me==null||me({key:M,domEvent:bi})},xn=ie.useMemo(function(){return ur||(We!=="inline"?Fn||At([at],M):!1)},[We,ur,at,Fn,M,At]),qn=EH(jt.length),Dn=function(bi){Ht||(ge==null||ge({key:M,domEvent:bi}),We==="inline"&&tt(M,!Ut))},mn=Aw(function(ro){he==null||he(DE(ro)),$e(ro)}),pi=function(bi){We!=="inline"&&tt(M,bi)},ui=function(){Ve(M)},hn=Re&&"".concat(Re,"-popup"),Kn=ie.createElement("div",Sn({role:"menuitem",style:qn,className:"".concat(ar,"-title"),tabIndex:Ht?null:-1,ref:Rt,title:typeof m=="string"?m:null,"data-menu-id":Ye&&Re?null:Re,"aria-expanded":_r,"aria-haspopup":!0,"aria-controls":hn,"aria-disabled":Ht,onClick:Dn,onFocus:ui},jn),m,ie.createElement(IH,{icon:We!=="horizontal"?Ir:void 0,props:Ft(Ft({},i),{},{isOpen:_r,isSubMenu:!0})},ie.createElement("i",{className:"".concat(ar,"-arrow")}))),$i=ie.useRef(We);if(We!=="inline"&&jt.length>1?$i.current="vertical":$i.current=We,!Ye){var ji=$i.current;Kn=ie.createElement(aie,{mode:ji,prefixCls:ar,visible:!z&&_r&&We!=="inline",popupClassName:te,popupOffset:ae,popupStyle:ve,popup:ie.createElement(dC,{mode:ji==="horizontal"?"vertical":ji},ie.createElement(hD,{id:hn,ref:pr},U)),disabled:Ht,onVisibleChange:pi},Kn)}var _a=ie.createElement(Vd.Item,Sn({role:"none"},_e,{component:"li",style:a,className:mr(ar,"".concat(ar,"-").concat(We),u,_t(_t(_t(_t({},"".concat(ar,"-open"),_r),"".concat(ar,"-active"),xn),"".concat(ar,"-selected"),Bn),"".concat(ar,"-disabled"),Ht)),onMouseEnter:cn,onMouseLeave:oi}),Kn,!Ye&&ie.createElement(sie,{id:hn,open:_r,keyPath:jt},U));return mt&&(_a=mt(_a,i,{selected:Bn,active:xn,open:_r,disabled:Ht})),ie.createElement(dC,{onItemClick:mn,mode:We==="horizontal"?"vertical":We,itemIcon:Cr,expandIcon:Ir},_a)};function R3(t){var i=t.eventKey,a=t.children,u=wx(i),m=fD(a,u),M=E3();ie.useEffect(function(){if(M)return M.registerPath(i,u),function(){M.unregisterPath(i,u)}},[u]);var L;return M?L=m:L=ie.createElement(cie,t,m),ie.createElement(_H.Provider,{value:u},L)}var hie=["className","title","eventKey","children"],fie=["children"],die=function(i){var a=i.className,u=i.title;i.eventKey;var m=i.children,M=Qi(i,hie),L=ie.useContext(Ph),z=L.prefixCls,U="".concat(z,"-item-group");return ie.createElement("li",Sn({role:"presentation"},M,{onClick:function(J){return J.stopPropagation()},className:mr(U,a)}),ie.createElement("div",{role:"presentation",className:"".concat(U,"-title"),title:typeof u=="string"?u:void 0},u),ie.createElement("ul",{role:"group",className:"".concat(U,"-list")},m))};function L3(t){var i=t.children,a=Qi(t,fie),u=wx(a.eventKey),m=fD(i,u),M=E3();return M?m:ie.createElement(die,Oh(a,["warnKey"]),m)}function dD(t){var i=t.className,a=t.style,u=ie.useContext(Ph),m=u.prefixCls,M=E3();return M?null:ie.createElement("li",{role:"separator",className:mr("".concat(m,"-item-divider"),i),style:a})}var pie=["label","children","key","type"];function v4(t){return(t||[]).map(function(i,a){if(i&&ii(i)==="object"){var u=i,m=u.label,M=u.children,L=u.key,z=u.type,U=Qi(u,pie),W=L??"tmp-".concat(a);return M||z==="group"?z==="group"?ie.createElement(L3,Sn({key:W},U,{title:m}),v4(M)):ie.createElement(R3,Sn({key:W},U,{title:m}),v4(M)):z==="divider"?ie.createElement(dD,Sn({key:W},U)):ie.createElement(I3,Sn({key:W},U),m)}return null}).filter(function(i){return i})}function mie(t,i,a){var u=t;return i&&(u=v4(i)),fD(u,a)}var gie=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],C1=[],vie=ie.forwardRef(function(t,i){var a,u=t,m=u.prefixCls,M=m===void 0?"rc-menu":m,L=u.rootClassName,z=u.style,U=u.className,W=u.tabIndex,J=W===void 0?0:W,te=u.items,ae=u.children,ve=u.direction,he=u.id,oe=u.mode,me=oe===void 0?"vertical":oe,ge=u.inlineCollapsed,de=u.disabled,ce=u.disabledOverflow,_e=u.subMenuOpenDelay,Re=_e===void 0?.1:_e,Ee=u.subMenuCloseDelay,De=Ee===void 0?.1:Ee,We=u.forceSubMenuRender,Xe=u.defaultOpenKeys,et=u.openKeys,Ye=u.activeKey,at=u.defaultActiveFirst,ot=u.selectable,ct=ot===void 0?!0:ot,Dt=u.multiple,$e=Dt===void 0?!1:Dt,tt=u.defaultSelectedKeys,Ve=u.selectedKeys,gt=u.onSelect,mt=u.onDeselect,dt=u.inlineIndent,At=dt===void 0?24:dt,jt=u.motion,ar=u.defaultMotions,Ht=u.triggerSubMenuAction,Rt=Ht===void 0?"hover":Ht,pr=u.builtinPlacements,Cr=u.itemIcon,Ir=u.expandIcon,Ut=u.overflowedIndicator,_r=Ut===void 0?"...":Ut,Bn=u.overflowedIndicatorPopupClassName,bn=u.getPopupContainer,ur=u.onClick,jn=u.onOpenChange,An=u.onKeyDown;u.openAnimation,u.openTransitionName;var en=u._internalRenderMenuItem,Fn=u._internalRenderSubMenuItem,lr=Qi(u,gie),er=ie.useMemo(function(){return mie(ae,te,C1)},[ae,te]),cn=ie.useState(!1),oi=sr(cn,2),xn=oi[0],qn=oi[1],Dn=ie.useRef(),mn=Yne(he),pi=ve==="rtl",ui=Gd(Xe,{value:et,postState:function(xi){return xi||C1}}),hn=sr(ui,2),Kn=hn[0],$i=hn[1],ji=function(xi){var mi=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;function Po(){$i(xi),jn==null||jn(xi)}mi?Qd.flushSync(Po):Po()},_a=ie.useState(Kn),ro=sr(_a,2),bi=ro[0],us=ro[1],Ao=ie.useRef(!1),Gi=ie.useMemo(function(){return(me==="inline"||me==="vertical")&&ge?["vertical",ge]:[me,!1]},[me,ge]),Vi=sr(Gi,2),zi=Vi[0],To=Vi[1],wo=zi==="inline",_i=ie.useState(zi),ti=sr(_i,2),wn=ti[0],Ui=ti[1],Nn=ie.useState(To),nn=sr(Nn,2),Gn=nn[0],Wi=nn[1];ie.useEffect(function(){Ui(zi),Wi(To),Ao.current&&(wo?$i(bi):ji(C1))},[zi,To]);var Co=ie.useState(0),Ja=sr(Co,2),ma=Ja[0],ku=Ja[1],Ti=ma>=er.length-1||wn!=="horizontal"||ce;ie.useEffect(function(){wo&&us(Kn)},[Kn]),ie.useEffect(function(){return Ao.current=!0,function(){Ao.current=!1}},[]);var Ma=Wne(),ks=Ma.registerPath,Ms=Ma.unregisterPath,pl=Ma.refreshOverflowKeys,hr=Ma.isSubPathKey,Ba=Ma.getKeyPath,Rc=Ma.getKeys,Ei=Ma.getSubPathKeys,Ol=ie.useMemo(function(){return{registerPath:ks,unregisterPath:Ms}},[ks,Ms]),Hs=ie.useMemo(function(){return{isSubPathKey:hr}},[hr]);ie.useEffect(function(){pl(Ti?C1:er.slice(ma+1).map(function(Pi){return Pi.key}))},[ma,Ti]);var Dl=Gd(Ye||at&&((a=er[0])===null||a===void 0?void 0:a.key),{value:Ye}),ra=sr(Dl,2),Zo=ra[0],Lc=ra[1],Hu=Aw(function(Pi){Lc(Pi)}),Fh=Aw(function(){Lc(void 0)});ie.useImperativeHandle(i,function(){return{list:Dn.current,focus:function(xi){var mi,Po=Rc(),no=m4(Po,mn),uo=no.elements,Oo=no.key2element,ko=no.element2key,hs=uD(Dn.current,uo),na=Zo??(hs[0]?ko.get(hs[0]):(mi=er.find(function(Nh){return!Nh.props.disabled}))===null||mi===void 0?void 0:mi.key),za=Oo.get(na);if(na&&za){var Fl;za==null||(Fl=za.focus)===null||Fl===void 0||Fl.call(za,xi)}}}});var js=Gd(tt||[],{value:Ve,postState:function(xi){return Array.isArray(xi)?xi:xi==null?C1:[xi]}}),Pc=sr(js,2),ju=Pc[0],yi=Pc[1],Un=function(xi){if(ct){var mi=xi.key,Po=ju.includes(mi),no;$e?Po?no=ju.filter(function(Oo){return Oo!==mi}):no=[].concat(on(ju),[mi]):no=[mi],yi(no);var uo=Ft(Ft({},xi),{},{selectedKeys:no});Po?mt==null||mt(uo):gt==null||gt(uo)}!$e&&Kn.length&&wn!=="inline"&&ji(C1)},su=Aw(function(Pi){ur==null||ur(DE(Pi)),Un(Pi)}),cs=Aw(function(Pi,xi){var mi=Kn.filter(function(no){return no!==Pi});if(xi)mi.push(Pi);else if(wn!=="inline"){var Po=Ei(Pi);mi=mi.filter(function(no){return!Po.has(no)})}oC(Kn,mi,!0)||ji(mi,!0)}),Gs=function(xi,mi){var Po=mi??!Kn.includes(xi);cs(xi,Po)},Sa=jne(wn,Zo,pi,mn,Dn,Rc,Ba,Lc,Gs,An);ie.useEffect(function(){qn(!0)},[]);var Gu=ie.useMemo(function(){return{_internalRenderMenuItem:en,_internalRenderSubMenuItem:Fn}},[en,Fn]),Ss=wn!=="horizontal"||ce?er:er.map(function(Pi,xi){return ie.createElement(dC,{key:Pi.key,overflowDisabled:xi>ma},Pi)}),bl=ie.createElement(Vd,Sn({id:he,ref:Dn,prefixCls:"".concat(M,"-overflow"),component:"ul",itemComponent:I3,className:mr(M,"".concat(M,"-root"),"".concat(M,"-").concat(wn),U,_t(_t({},"".concat(M,"-inline-collapsed"),Gn),"".concat(M,"-rtl"),pi),L),dir:ve,style:z,role:"menu",tabIndex:J,data:Ss,renderRawItem:function(xi){return xi},renderRawRest:function(xi){var mi=xi.length,Po=mi?er.slice(-mi):null;return ie.createElement(R3,{eventKey:g4,title:_r,disabled:Ti,internalPopupClose:mi===0,popupClassName:Bn},Po)},maxCount:wn!=="horizontal"||ce?Vd.INVALIDATE:Vd.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(xi){ku(xi)},onKeyDown:Sa},lr));return ie.createElement(lD.Provider,{value:Gu},ie.createElement(xH.Provider,{value:mn},ie.createElement(dC,{prefixCls:M,rootClassName:L,mode:wn,openKeys:Kn,rtl:pi,disabled:de,motion:xn?jt:null,defaultMotions:xn?ar:null,activeKey:Zo,onActive:Hu,onInactive:Fh,selectedKeys:ju,inlineIndent:At,subMenuOpenDelay:Re,subMenuCloseDelay:De,forceSubMenuRender:We,builtinPlacements:pr,triggerSubMenuAction:Rt,getPopupContainer:bn,itemIcon:Cr,expandIcon:Ir,onItemClick:su,onOpenChange:cs},ie.createElement(MH.Provider,{value:Hs},bl),ie.createElement("div",{style:{display:"none"},"aria-hidden":!0},ie.createElement(CH.Provider,{value:Ol},er)))))}),LC=vie;LC.Item=I3;LC.SubMenu=R3;LC.ItemGroup=L3;LC.Divider=dD;var yie={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"bars",theme:"outlined"},xie=function(i,a){return ie.createElement(Ka,Sn({},i,{ref:a,icon:yie}))},Aie=ie.forwardRef(xie),wie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},Cie=function(i,a){return ie.createElement(Ka,Sn({},i,{ref:a,icon:wie}))},Oz=ie.forwardRef(Cie);const _ie=t=>!isNaN(parseFloat(t))&&isFinite(t),LH=ie.createContext({siderHook:{addSider:()=>null,removeSider:()=>null}});var Mie=function(t,i){var a={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&i.indexOf(u)<0&&(a[u]=t[u]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,u=Object.getOwnPropertySymbols(t);m<u.length;m++)i.indexOf(u[m])<0&&Object.prototype.propertyIsEnumerable.call(t,u[m])&&(a[u[m]]=t[u[m]]);return a};const Dz={xs:"479.98px",sm:"575.98px",md:"767.98px",lg:"991.98px",xl:"1199.98px",xxl:"1599.98px"},P3=ie.createContext({}),Sie=(()=>{let t=0;return function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return t+=1,`${i}${t}`}})(),PH=ie.forwardRef((t,i)=>{const{prefixCls:a,className:u,trigger:m,children:M,defaultCollapsed:L=!1,theme:z="dark",style:U={},collapsible:W=!1,reverseArrow:J=!1,width:te=200,collapsedWidth:ae=80,zeroWidthTriggerStyle:ve,breakpoint:he,onCollapse:oe,onBreakpoint:me}=t,ge=Mie(t,["prefixCls","className","trigger","children","defaultCollapsed","theme","style","collapsible","reverseArrow","width","collapsedWidth","zeroWidthTriggerStyle","breakpoint","onCollapse","onBreakpoint"]),{siderHook:de}=ie.useContext(LH),[ce,_e]=ie.useState("collapsed"in t?t.collapsed:L),[Re,Ee]=ie.useState(!1);ie.useEffect(()=>{"collapsed"in t&&_e(t.collapsed)},[t.collapsed]);const De=(ot,ct)=>{"collapsed"in t||_e(ot),oe==null||oe(ot,ct)},We=ie.useRef();We.current=ot=>{Ee(ot.matches),me==null||me(ot.matches),ce!==ot.matches&&De(ot.matches,"responsive")},ie.useEffect(()=>{function ot(Dt){return We.current(Dt)}let ct;if(typeof window<"u"){const{matchMedia:Dt}=window;if(Dt&&he&&he in Dz){ct=Dt(`screen and (max-width: ${Dz[he]})`);try{ct.addEventListener("change",ot)}catch{ct.addListener(ot)}ot(ct)}}return()=>{try{ct==null||ct.removeEventListener("change",ot)}catch{ct==null||ct.removeListener(ot)}}},[he]),ie.useEffect(()=>{const ot=Sie("ant-sider-");return de.addSider(ot),()=>de.removeSider(ot)},[]);const Xe=()=>{De(!ce,"clickTrigger")},{getPrefixCls:et}=ie.useContext(lo),Ye=()=>{const ot=et("layout-sider",a),ct=Oh(ge,["collapsed"]),Dt=ce?ae:te,$e=_ie(Dt)?`${Dt}px`:String(Dt),tt=parseFloat(String(ae||0))===0?ie.createElement("span",{onClick:Xe,className:mr(`${ot}-zero-width-trigger`,`${ot}-zero-width-trigger-${J?"right":"left"}`),style:ve},m||ie.createElement(Aie,null)):null,mt={expanded:J?ie.createElement(Tz,null):ie.createElement(Oz,null),collapsed:J?ie.createElement(Oz,null):ie.createElement(Tz,null)}[ce?"collapsed":"expanded"],dt=m!==null?tt||ie.createElement("div",{className:`${ot}-trigger`,onClick:Xe,style:{width:$e}},m||mt):null,At=Object.assign(Object.assign({},U),{flex:`0 0 ${$e}`,maxWidth:$e,minWidth:$e,width:$e}),jt=mr(ot,`${ot}-${z}`,{[`${ot}-collapsed`]:!!ce,[`${ot}-has-trigger`]:W&&m!==null&&!tt,[`${ot}-below`]:!!Re,[`${ot}-zero-width`]:parseFloat($e)===0},u);return ie.createElement("aside",Object.assign({className:jt},ct,{style:At,ref:i}),ie.createElement("div",{className:`${ot}-children`},M),W||Re&&tt?dt:null)},at=ie.useMemo(()=>({siderCollapsed:ce}),[ce]);return ie.createElement(P3.Provider,{value:at},Ye())});var Tie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},Eie=function(i,a){return ie.createElement(Ka,Sn({},i,{ref:a,icon:Tie}))},Iie=ie.forwardRef(Eie),Rie=function(t,i){var a={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&i.indexOf(u)<0&&(a[u]=t[u]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,u=Object.getOwnPropertySymbols(t);m<u.length;m++)i.indexOf(u[m])<0&&Object.prototype.propertyIsEnumerable.call(t,u[m])&&(a[u[m]]=t[u[m]]);return a};const OH=t=>{const{prefixCls:i,className:a,dashed:u}=t,m=Rie(t,["prefixCls","className","dashed"]),{getPrefixCls:M}=ie.useContext(lo),L=M("menu",i),z=mr({[`${L}-item-divider-dashed`]:!!u},a);return ie.createElement(dD,Object.assign({className:z},m))},bE=ie.createContext({prefixCls:"",firstLevel:!0,inlineCollapsed:!1}),DH=t=>{var i;const{className:a,children:u,icon:m,title:M,danger:L}=t,{prefixCls:z,firstLevel:U,direction:W,disableMenuItemTitleTooltip:J,inlineCollapsed:te}=ie.useContext(bE),ae=de=>{const ce=ie.createElement("span",{className:`${z}-title-content`},u);return(!m||ie.isValidElement(u)&&u.type==="span")&&u&&de&&U&&typeof u=="string"?ie.createElement("div",{className:`${z}-inline-collapsed-noicon`},u.charAt(0)):ce},{siderCollapsed:ve}=ie.useContext(P3);let he=M;typeof M>"u"?he=U?u:"":M===!1&&(he="");const oe={title:he};!ve&&!te&&(oe.title=null,oe.open=!1);const me=Pf(u).length;let ge=ie.createElement(I3,Object.assign({},Oh(t,["title","icon","danger"]),{className:mr({[`${z}-item-danger`]:L,[`${z}-item-only-child`]:(m?me+1:me)===1},a),title:typeof M=="string"?M:void 0}),Of(m,{className:mr(ie.isValidElement(m)?(i=m.props)===null||i===void 0?void 0:i.className:"",`${z}-item-icon`)}),ae(te));return J||(ge=ie.createElement(sD,Object.assign({},oe,{placement:W==="rtl"?"left":"right",overlayClassName:`${z}-inline-collapsed-tooltip`}),ge)),ge},bH=t=>{var i;const{popupClassName:a,icon:u,title:m,theme:M}=t,L=ie.useContext(bE),{prefixCls:z,inlineCollapsed:U,theme:W}=L,J=wx();let te;if(!u)te=U&&!J.length&&m&&typeof m=="string"?ie.createElement("div",{className:`${z}-inline-collapsed-noicon`},m.charAt(0)):ie.createElement("span",{className:`${z}-title-content`},m);else{const he=ie.isValidElement(m)&&m.type==="span";te=ie.createElement(ie.Fragment,null,Of(u,{className:mr(ie.isValidElement(u)?(i=u.props)===null||i===void 0?void 0:i.className:"",`${z}-item-icon`)}),he?m:ie.createElement("span",{className:`${z}-title-content`},m))}const ae=ie.useMemo(()=>Object.assign(Object.assign({},L),{firstLevel:!1}),[L]),[ve]=L9("Menu");return ie.createElement(bE.Provider,{value:ae},ie.createElement(R3,Object.assign({},Oh(t,["icon"]),{title:te,popupClassName:mr(z,a,`${z}-${M||W}`),popupStyle:{zIndex:ve}})))};var Lie=function(t,i){var a={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&i.indexOf(u)<0&&(a[u]=t[u]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,u=Object.getOwnPropertySymbols(t);m<u.length;m++)i.indexOf(u[m])<0&&Object.prototype.propertyIsEnumerable.call(t,u[m])&&(a[u[m]]=t[u[m]]);return a};function y4(t){return(t||[]).map((i,a)=>{if(i&&typeof i=="object"){const u=i,{label:m,children:M,key:L,type:z}=u,U=Lie(u,["label","children","key","type"]),W=L??`tmp-${a}`;return M||z==="group"?z==="group"?ie.createElement(L3,Object.assign({key:W},U,{title:m}),y4(M)):ie.createElement(bH,Object.assign({key:W},U,{title:m}),y4(M)):z==="divider"?ie.createElement(OH,Object.assign({key:W},U)):ie.createElement(DH,Object.assign({key:W},U),m)}return null}).filter(i=>i)}function Pie(t){return ie.useMemo(()=>t&&y4(t),[t])}var Oie=function(t,i){var a={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&i.indexOf(u)<0&&(a[u]=t[u]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,u=Object.getOwnPropertySymbols(t);m<u.length;m++)i.indexOf(u[m])<0&&Object.prototype.propertyIsEnumerable.call(t,u[m])&&(a[u[m]]=t[u[m]]);return a};const FE=ie.createContext(null),Fce=ie.forwardRef((t,i)=>{const{children:a}=t,u=Oie(t,["children"]),m=ie.useContext(FE),M=ie.useMemo(()=>Object.assign(Object.assign({},m),u),[m,u.prefixCls,u.mode,u.selectable,u.rootClassName]),L=_q(a),z=MC(i,L?a.ref:null);return ie.createElement(FE.Provider,{value:M},ie.createElement(IE,null,L?ie.cloneElement(a,{ref:z}):a))}),Die=t=>{const{componentCls:i,motionDurationSlow:a,horizontalLineHeight:u,colorSplit:m,lineWidth:M,lineType:L,itemPaddingInline:z}=t;return{[`${i}-horizontal`]:{lineHeight:u,border:0,borderBottom:`${pn(M)} ${L} ${m}`,boxShadow:"none","&::after":{display:"block",clear:"both",height:0,content:'"\\20"'},[`${i}-item, ${i}-submenu`]:{position:"relative",display:"inline-block",verticalAlign:"bottom",paddingInline:z},[`> ${i}-item:hover,
        > ${i}-item-active,
        > ${i}-submenu ${i}-submenu-title:hover`]:{backgroundColor:"transparent"},[`${i}-item, ${i}-submenu-title`]:{transition:[`border-color ${a}`,`background ${a}`].join(",")},[`${i}-submenu-arrow`]:{display:"none"}}}},bie=t=>{let{componentCls:i,menuArrowOffset:a,calc:u}=t;return{[`${i}-rtl`]:{direction:"rtl"},[`${i}-submenu-rtl`]:{transformOrigin:"100% 0"},[`${i}-rtl${i}-vertical,
    ${i}-submenu-rtl ${i}-vertical`]:{[`${i}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateY(${pn(u(a).mul(-1).equal())})`},"&::after":{transform:`rotate(45deg) translateY(${pn(a)})`}}}}},bz=t=>Object.assign({},$7(t)),Fz=(t,i)=>{const{componentCls:a,itemColor:u,itemSelectedColor:m,groupTitleColor:M,itemBg:L,subMenuItemBg:z,itemSelectedBg:U,activeBarHeight:W,activeBarWidth:J,activeBarBorderWidth:te,motionDurationSlow:ae,motionEaseInOut:ve,motionEaseOut:he,itemPaddingInline:oe,motionDurationMid:me,itemHoverColor:ge,lineType:de,colorSplit:ce,itemDisabledColor:_e,dangerItemColor:Re,dangerItemHoverColor:Ee,dangerItemSelectedColor:De,dangerItemActiveBg:We,dangerItemSelectedBg:Xe,popupBg:et,itemHoverBg:Ye,itemActiveBg:at,menuSubMenuBg:ot,horizontalItemSelectedColor:ct,horizontalItemSelectedBg:Dt,horizontalItemBorderRadius:$e,horizontalItemHoverBg:tt}=t;return{[`${a}-${i}, ${a}-${i} > ${a}`]:{color:u,background:L,[`&${a}-root:focus-visible`]:Object.assign({},bz(t)),[`${a}-item-group-title`]:{color:M},[`${a}-submenu-selected`]:{[`> ${a}-submenu-title`]:{color:m}},[`${a}-item, ${a}-submenu-title`]:{color:u,[`&:not(${a}-item-disabled):focus-visible`]:Object.assign({},bz(t))},[`${a}-item-disabled, ${a}-submenu-disabled`]:{color:`${_e} !important`},[`${a}-item:not(${a}-item-selected):not(${a}-submenu-selected)`]:{[`&:hover, > ${a}-submenu-title:hover`]:{color:ge}},[`&:not(${a}-horizontal)`]:{[`${a}-item:not(${a}-item-selected)`]:{"&:hover":{backgroundColor:Ye},"&:active":{backgroundColor:at}},[`${a}-submenu-title`]:{"&:hover":{backgroundColor:Ye},"&:active":{backgroundColor:at}}},[`${a}-item-danger`]:{color:Re,[`&${a}-item:hover`]:{[`&:not(${a}-item-selected):not(${a}-submenu-selected)`]:{color:Ee}},[`&${a}-item:active`]:{background:We}},[`${a}-item a`]:{"&, &:hover":{color:"inherit"}},[`${a}-item-selected`]:{color:m,[`&${a}-item-danger`]:{color:De},"a, a:hover":{color:"inherit"}},[`& ${a}-item-selected`]:{backgroundColor:U,[`&${a}-item-danger`]:{backgroundColor:Xe}},[`&${a}-submenu > ${a}`]:{backgroundColor:ot},[`&${a}-popup > ${a}`]:{backgroundColor:et},[`&${a}-submenu-popup > ${a}`]:{backgroundColor:et},[`&${a}-horizontal`]:Object.assign(Object.assign({},i==="dark"?{borderBottom:0}:{}),{[`> ${a}-item, > ${a}-submenu`]:{top:te,marginTop:t.calc(te).mul(-1).equal(),marginBottom:0,borderRadius:$e,"&::after":{position:"absolute",insetInline:oe,bottom:0,borderBottom:`${pn(W)} solid transparent`,transition:`border-color ${ae} ${ve}`,content:'""'},"&:hover, &-active, &-open":{background:tt,"&::after":{borderBottomWidth:W,borderBottomColor:ct}},"&-selected":{color:ct,backgroundColor:Dt,"&:hover":{backgroundColor:Dt},"&::after":{borderBottomWidth:W,borderBottomColor:ct}}}}),[`&${a}-root`]:{[`&${a}-inline, &${a}-vertical`]:{borderInlineEnd:`${pn(te)} ${de} ${ce}`}},[`&${a}-inline`]:{[`${a}-sub${a}-inline`]:{background:z},[`${a}-item`]:{position:"relative","&::after":{position:"absolute",insetBlock:0,insetInlineEnd:0,borderInlineEnd:`${pn(J)} solid ${m}`,transform:"scaleY(0.0001)",opacity:0,transition:[`transform ${me} ${he}`,`opacity ${me} ${he}`].join(","),content:'""'},[`&${a}-item-danger`]:{"&::after":{borderInlineEndColor:De}}},[`${a}-selected, ${a}-item-selected`]:{"&::after":{transform:"scaleY(1)",opacity:1,transition:[`transform ${me} ${ve}`,`opacity ${me} ${ve}`].join(",")}}}}}},Nz=t=>{const{componentCls:i,itemHeight:a,itemMarginInline:u,padding:m,menuArrowSize:M,marginXS:L,itemMarginBlock:z,itemWidth:U}=t,W=t.calc(M).add(m).add(L).equal();return{[`${i}-item`]:{position:"relative",overflow:"hidden"},[`${i}-item, ${i}-submenu-title`]:{height:a,lineHeight:pn(a),paddingInline:m,overflow:"hidden",textOverflow:"ellipsis",marginInline:u,marginBlock:z,width:U},[`> ${i}-item,
            > ${i}-submenu > ${i}-submenu-title`]:{height:a,lineHeight:pn(a)},[`${i}-item-group-list ${i}-submenu-title,
            ${i}-submenu-title`]:{paddingInlineEnd:W}}},Fie=t=>{const{componentCls:i,iconCls:a,itemHeight:u,colorTextLightSolid:m,dropdownWidth:M,controlHeightLG:L,motionDurationMid:z,motionEaseOut:U,paddingXL:W,itemMarginInline:J,fontSizeLG:te,motionDurationSlow:ae,paddingXS:ve,boxShadowSecondary:he,collapsedWidth:oe,collapsedIconSize:me}=t,ge={height:u,lineHeight:pn(u),listStylePosition:"inside",listStyleType:"disc"};return[{[i]:{"&-inline, &-vertical":Object.assign({[`&${i}-root`]:{boxShadow:"none"}},Nz(t))},[`${i}-submenu-popup`]:{[`${i}-vertical`]:Object.assign(Object.assign({},Nz(t)),{boxShadow:he})}},{[`${i}-submenu-popup ${i}-vertical${i}-sub`]:{minWidth:M,maxHeight:`calc(100vh - ${pn(t.calc(L).mul(2.5).equal())})`,padding:"0",overflow:"hidden",borderInlineEnd:0,"&:not([class*='-active'])":{overflowX:"hidden",overflowY:"auto"}}},{[`${i}-inline`]:{width:"100%",[`&${i}-root`]:{[`${i}-item, ${i}-submenu-title`]:{display:"flex",alignItems:"center",transition:[`border-color ${ae}`,`background ${ae}`,`padding ${z} ${U}`,`padding-inline calc(50% - ${pn(t.calc(te).div(2).equal())} - ${pn(J)})`].join(","),[`> ${i}-title-content`]:{flex:"auto",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},"> *":{flex:"none"}}},[`${i}-sub${i}-inline`]:{padding:0,border:0,borderRadius:0,boxShadow:"none",[`& > ${i}-submenu > ${i}-submenu-title`]:ge,[`& ${i}-item-group-title`]:{paddingInlineStart:W}},[`${i}-item`]:ge}},{[`${i}-inline-collapsed`]:{width:oe,[`&${i}-root`]:{[`${i}-item, ${i}-submenu ${i}-submenu-title`]:{[`> ${i}-inline-collapsed-noicon`]:{fontSize:te,textAlign:"center"}}},[`> ${i}-item,
          > ${i}-item-group > ${i}-item-group-list > ${i}-item,
          > ${i}-item-group > ${i}-item-group-list > ${i}-submenu > ${i}-submenu-title,
          > ${i}-submenu > ${i}-submenu-title`]:{insetInlineStart:0,paddingInline:`calc(50% - ${pn(t.calc(te).div(2).equal())} - ${pn(J)})`,textOverflow:"clip",[`
            ${i}-submenu-arrow,
            ${i}-submenu-expand-icon
          `]:{opacity:0},[`${i}-item-icon, ${a}`]:{margin:0,fontSize:me,lineHeight:pn(u),"+ span":{display:"inline-block",opacity:0}}},[`${i}-item-icon, ${a}`]:{display:"inline-block"},"&-tooltip":{pointerEvents:"none",[`${i}-item-icon, ${a}`]:{display:"none"},"a, a:hover":{color:m}},[`${i}-item-group-title`]:Object.assign(Object.assign({},KJ),{paddingInline:ve})}}]},Bz=t=>{const{componentCls:i,motionDurationSlow:a,motionDurationMid:u,motionEaseInOut:m,motionEaseOut:M,iconCls:L,iconSize:z,iconMarginInlineEnd:U}=t;return{[`${i}-item, ${i}-submenu-title`]:{position:"relative",display:"block",margin:0,whiteSpace:"nowrap",cursor:"pointer",transition:[`border-color ${a}`,`background ${a}`,`padding ${a} ${m}`].join(","),[`${i}-item-icon, ${L}`]:{minWidth:z,fontSize:z,transition:[`font-size ${u} ${M}`,`margin ${a} ${m}`,`color ${a}`].join(","),"+ span":{marginInlineStart:U,opacity:1,transition:[`opacity ${a} ${m}`,`margin ${a}`,`color ${a}`].join(",")}},[`${i}-item-icon`]:Object.assign({},Q7()),[`&${i}-item-only-child`]:{[`> ${L}, > ${i}-item-icon`]:{marginInlineEnd:0}}},[`${i}-item-disabled, ${i}-submenu-disabled`]:{background:"none !important",cursor:"not-allowed","&::after":{borderColor:"transparent !important"},a:{color:"inherit !important"},[`> ${i}-submenu-title`]:{color:"inherit !important",cursor:"not-allowed"}}}},zz=t=>{const{componentCls:i,motionDurationSlow:a,motionEaseInOut:u,borderRadius:m,menuArrowSize:M,menuArrowOffset:L}=t;return{[`${i}-submenu`]:{"&-expand-icon, &-arrow":{position:"absolute",top:"50%",insetInlineEnd:t.margin,width:M,color:"currentcolor",transform:"translateY(-50%)",transition:`transform ${a} ${u}, opacity ${a}`},"&-arrow":{"&::before, &::after":{position:"absolute",width:t.calc(M).mul(.6).equal(),height:t.calc(M).mul(.15).equal(),backgroundColor:"currentcolor",borderRadius:m,transition:[`background ${a} ${u}`,`transform ${a} ${u}`,`top ${a} ${u}`,`color ${a} ${u}`].join(","),content:'""'},"&::before":{transform:`rotate(45deg) translateY(${pn(t.calc(L).mul(-1).equal())})`},"&::after":{transform:`rotate(-45deg) translateY(${pn(L)})`}}}}},Nie=t=>{const{antCls:i,componentCls:a,fontSize:u,motionDurationSlow:m,motionDurationMid:M,motionEaseInOut:L,paddingXS:z,padding:U,colorSplit:W,lineWidth:J,zIndexPopup:te,borderRadiusLG:ae,subMenuItemBorderRadius:ve,menuArrowSize:he,menuArrowOffset:oe,lineType:me,groupTitleLineHeight:ge,groupTitleFontSize:de}=t;return[{"":{[`${a}`]:Object.assign(Object.assign({},GP()),{"&-hidden":{display:"none"}})},[`${a}-submenu-hidden`]:{display:"none"}},{[a]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},c0(t)),GP()),{marginBottom:0,paddingInlineStart:0,fontSize:u,lineHeight:0,listStyle:"none",outline:"none",transition:`width ${m} cubic-bezier(0.2, 0, 0, 1) 0s`,"ul, ol":{margin:0,padding:0,listStyle:"none"},"&-overflow":{display:"flex",[`${a}-item`]:{flex:"none"}},[`${a}-item, ${a}-submenu, ${a}-submenu-title`]:{borderRadius:t.itemBorderRadius},[`${a}-item-group-title`]:{padding:`${pn(z)} ${pn(U)}`,fontSize:de,lineHeight:ge,transition:`all ${m}`},[`&-horizontal ${a}-submenu`]:{transition:[`border-color ${m} ${L}`,`background ${m} ${L}`].join(",")},[`${a}-submenu, ${a}-submenu-inline`]:{transition:[`border-color ${m} ${L}`,`background ${m} ${L}`,`padding ${M} ${L}`].join(",")},[`${a}-submenu ${a}-sub`]:{cursor:"initial",transition:[`background ${m} ${L}`,`padding ${m} ${L}`].join(",")},[`${a}-title-content`]:{transition:`color ${m}`,[`> ${i}-typography-ellipsis-single-line`]:{display:"inline",verticalAlign:"unset"}},[`${a}-item a`]:{"&::before":{position:"absolute",inset:0,backgroundColor:"transparent",content:'""'}},[`${a}-item-divider`]:{overflow:"hidden",lineHeight:0,borderColor:W,borderStyle:me,borderWidth:0,borderTopWidth:J,marginBlock:J,padding:0,"&-dashed":{borderStyle:"dashed"}}}),Bz(t)),{[`${a}-item-group`]:{[`${a}-item-group-list`]:{margin:0,padding:0,[`${a}-item, ${a}-submenu-title`]:{paddingInline:`${pn(t.calc(u).mul(2).equal())} ${pn(U)}`}}},"&-submenu":{"&-popup":{position:"absolute",zIndex:te,borderRadius:ae,boxShadow:"none",transformOrigin:"0 0",[`&${a}-submenu`]:{background:"transparent"},"&::before":{position:"absolute",inset:0,zIndex:-1,width:"100%",height:"100%",opacity:0,content:'""'},[`> ${a}`]:Object.assign(Object.assign(Object.assign({borderRadius:ae},Bz(t)),zz(t)),{[`${a}-item, ${a}-submenu > ${a}-submenu-title`]:{borderRadius:ve},[`${a}-submenu-title::after`]:{transition:`transform ${m} ${L}`}})},"\n          &-placement-leftTop,\n          &-placement-bottomRight,\n          ":{transformOrigin:"100% 0"},"\n          &-placement-leftBottom,\n          &-placement-topRight,\n          ":{transformOrigin:"100% 100%"},"\n          &-placement-rightBottom,\n          &-placement-topLeft,\n          ":{transformOrigin:"0 100%"},"\n          &-placement-bottomLeft,\n          &-placement-rightTop,\n          ":{transformOrigin:"0 0"},"\n          &-placement-leftTop,\n          &-placement-leftBottom\n          ":{paddingInlineEnd:t.paddingXS},"\n          &-placement-rightTop,\n          &-placement-rightBottom\n          ":{paddingInlineStart:t.paddingXS},"\n          &-placement-topRight,\n          &-placement-topLeft\n          ":{paddingBottom:t.paddingXS},"\n          &-placement-bottomRight,\n          &-placement-bottomLeft\n          ":{paddingTop:t.paddingXS}}}),zz(t)),{[`&-inline-collapsed ${a}-submenu-arrow,
        &-inline ${a}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateX(${pn(oe)})`},"&::after":{transform:`rotate(45deg) translateX(${pn(t.calc(oe).mul(-1).equal())})`}},[`${a}-submenu-open${a}-submenu-inline > ${a}-submenu-title > ${a}-submenu-arrow`]:{transform:`translateY(${pn(t.calc(he).mul(.2).mul(-1).equal())})`,"&::after":{transform:`rotate(-45deg) translateX(${pn(t.calc(oe).mul(-1).equal())})`},"&::before":{transform:`rotate(45deg) translateX(${pn(oe)})`}}})},{[`${i}-layout-header`]:{[a]:{lineHeight:"inherit"}}}]},Bie=t=>{var i,a,u;const{colorPrimary:m,colorError:M,colorTextDisabled:L,colorErrorBg:z,colorText:U,colorTextDescription:W,colorBgContainer:J,colorFillAlter:te,colorFillContent:ae,lineWidth:ve,lineWidthBold:he,controlItemBgActive:oe,colorBgTextHover:me,controlHeightLG:ge,lineHeight:de,colorBgElevated:ce,marginXXS:_e,padding:Re,fontSize:Ee,controlHeightSM:De,fontSizeLG:We,colorTextLightSolid:Xe,colorErrorHover:et}=t,Ye=(i=t.activeBarWidth)!==null&&i!==void 0?i:0,at=(a=t.activeBarBorderWidth)!==null&&a!==void 0?a:ve,ot=(u=t.itemMarginInline)!==null&&u!==void 0?u:t.marginXXS,ct=new bs(Xe).setAlpha(.65).toRgbString();return{dropdownWidth:160,zIndexPopup:t.zIndexPopupBase+50,radiusItem:t.borderRadiusLG,itemBorderRadius:t.borderRadiusLG,radiusSubMenuItem:t.borderRadiusSM,subMenuItemBorderRadius:t.borderRadiusSM,colorItemText:U,itemColor:U,colorItemTextHover:U,itemHoverColor:U,colorItemTextHoverHorizontal:m,horizontalItemHoverColor:m,colorGroupTitle:W,groupTitleColor:W,colorItemTextSelected:m,itemSelectedColor:m,colorItemTextSelectedHorizontal:m,horizontalItemSelectedColor:m,colorItemBg:J,itemBg:J,colorItemBgHover:me,itemHoverBg:me,colorItemBgActive:ae,itemActiveBg:oe,colorSubItemBg:te,subMenuItemBg:te,colorItemBgSelected:oe,itemSelectedBg:oe,colorItemBgSelectedHorizontal:"transparent",horizontalItemSelectedBg:"transparent",colorActiveBarWidth:0,activeBarWidth:Ye,colorActiveBarHeight:he,activeBarHeight:he,colorActiveBarBorderSize:ve,activeBarBorderWidth:at,colorItemTextDisabled:L,itemDisabledColor:L,colorDangerItemText:M,dangerItemColor:M,colorDangerItemTextHover:M,dangerItemHoverColor:M,colorDangerItemTextSelected:M,dangerItemSelectedColor:M,colorDangerItemBgActive:z,dangerItemActiveBg:z,colorDangerItemBgSelected:z,dangerItemSelectedBg:z,itemMarginInline:ot,horizontalItemBorderRadius:0,horizontalItemHoverBg:"transparent",itemHeight:ge,groupTitleLineHeight:de,collapsedWidth:ge*2,popupBg:ce,itemMarginBlock:_e,itemPaddingInline:Re,horizontalLineHeight:`${ge*1.15}px`,iconSize:Ee,iconMarginInlineEnd:De-Ee,collapsedIconSize:We,groupTitleFontSize:Ee,darkItemDisabledColor:new bs(Xe).setAlpha(.25).toRgbString(),darkItemColor:ct,darkDangerItemColor:M,darkItemBg:"#001529",darkPopupBg:"#001529",darkSubMenuItemBg:"#000c17",darkItemSelectedColor:Xe,darkItemSelectedBg:m,darkDangerItemSelectedBg:M,darkItemHoverBg:"transparent",darkGroupTitleColor:ct,darkItemHoverColor:Xe,darkDangerItemHoverColor:et,darkDangerItemSelectedColor:Xe,darkDangerItemActiveBg:M,itemWidth:Ye?`calc(100% + ${at}px)`:`calc(100% - ${ot*2}px)`}},zie=function(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return Df("Menu",m=>{const{colorBgElevated:M,controlHeightLG:L,fontSize:z,darkItemColor:U,darkDangerItemColor:W,darkItemBg:J,darkSubMenuItemBg:te,darkItemSelectedColor:ae,darkItemSelectedBg:ve,darkDangerItemSelectedBg:he,darkItemHoverBg:oe,darkGroupTitleColor:me,darkItemHoverColor:ge,darkItemDisabledColor:de,darkDangerItemHoverColor:ce,darkDangerItemSelectedColor:_e,darkDangerItemActiveBg:Re,popupBg:Ee,darkPopupBg:De}=m,We=m.calc(z).div(7).mul(5).equal(),Xe=_s(m,{menuArrowSize:We,menuHorizontalHeight:m.calc(L).mul(1.15).equal(),menuArrowOffset:m.calc(We).mul(.25).equal(),menuSubMenuBg:M,calc:m.calc,popupBg:Ee}),et=_s(Xe,{itemColor:U,itemHoverColor:ge,groupTitleColor:me,itemSelectedColor:ae,itemBg:J,popupBg:De,subMenuItemBg:te,itemActiveBg:"transparent",itemSelectedBg:ve,activeBarHeight:0,activeBarBorderWidth:0,itemHoverBg:oe,itemDisabledColor:de,dangerItemColor:W,dangerItemHoverColor:ce,dangerItemSelectedColor:_e,dangerItemActiveBg:Re,dangerItemSelectedBg:he,menuSubMenuBg:te,horizontalItemSelectedColor:ae,horizontalItemSelectedBg:ve});return[Nie(Xe),Die(Xe),Fie(Xe),Fz(Xe,"light"),Fz(et,"dark"),bie(Xe),Jte(Xe),pz(Xe,"slide-up"),pz(Xe,"slide-down"),nD(Xe,"zoom-big")]},Bie,{deprecatedTokens:[["colorGroupTitle","groupTitleColor"],["radiusItem","itemBorderRadius"],["radiusSubMenuItem","subMenuItemBorderRadius"],["colorItemText","itemColor"],["colorItemTextHover","itemHoverColor"],["colorItemTextHoverHorizontal","horizontalItemHoverColor"],["colorItemTextSelected","itemSelectedColor"],["colorItemTextSelectedHorizontal","horizontalItemSelectedColor"],["colorItemTextDisabled","itemDisabledColor"],["colorDangerItemText","dangerItemColor"],["colorDangerItemTextHover","dangerItemHoverColor"],["colorDangerItemTextSelected","dangerItemSelectedColor"],["colorDangerItemBgActive","dangerItemActiveBg"],["colorDangerItemBgSelected","dangerItemSelectedBg"],["colorItemBg","itemBg"],["colorItemBgHover","itemHoverBg"],["colorSubItemBg","subMenuItemBg"],["colorItemBgActive","itemActiveBg"],["colorItemBgSelectedHorizontal","horizontalItemSelectedBg"],["colorActiveBarWidth","activeBarWidth"],["colorActiveBarHeight","activeBarHeight"],["colorActiveBarBorderSize","activeBarBorderWidth"],["colorItemBgSelected","itemSelectedBg"]],injectStyle:a,unitless:{groupTitleLineHeight:!0}})(t,i)};var Uie=function(t,i){var a={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&i.indexOf(u)<0&&(a[u]=t[u]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,u=Object.getOwnPropertySymbols(t);m<u.length;m++)i.indexOf(u[m])<0&&Object.prototype.propertyIsEnumerable.call(t,u[m])&&(a[u[m]]=t[u[m]]);return a};function v5(t){return t===null||t===!1}const kie=ie.forwardRef((t,i)=>{var a;const u=ie.useContext(FE),m=u||{},{getPrefixCls:M,getPopupContainer:L,direction:z,menu:U}=ie.useContext(lo),W=M(),{prefixCls:J,className:te,style:ae,theme:ve="light",expandIcon:he,_internalDisableMenuItemTitleTooltip:oe,inlineCollapsed:me,siderCollapsed:ge,items:de,children:ce,rootClassName:_e,mode:Re,selectable:Ee,onClick:De,overflowedIndicatorPopupClassName:We}=t,Xe=Uie(t,["prefixCls","className","style","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","items","children","rootClassName","mode","selectable","onClick","overflowedIndicatorPopupClassName"]),et=Oh(Xe,["collapsedWidth"]),Ye=Pie(de)||ce;(a=m.validator)===null||a===void 0||a.call(m,{mode:Re});const at=Tl(function(){var Ht;De==null||De.apply(void 0,arguments),(Ht=m.onClick)===null||Ht===void 0||Ht.call(m)}),ot=m.mode||Re,ct=Ee??m.selectable,Dt=ie.useMemo(()=>ge!==void 0?ge:me,[me,ge]),$e={horizontal:{motionName:`${W}-slide-up`},inline:nee(W),other:{motionName:`${W}-zoom-big`}},tt=M("menu",J||m.prefixCls),Ve=Zm(tt),[gt,mt,dt]=zie(tt,Ve,!u),At=mr(`${tt}-${ve}`,U==null?void 0:U.className,te),jt=ie.useMemo(()=>{var Ht,Rt;if(typeof he=="function"||v5(he))return he||null;if(typeof m.expandIcon=="function"||v5(m.expandIcon))return m.expandIcon||null;if(typeof(U==null?void 0:U.expandIcon)=="function"||v5(U==null?void 0:U.expandIcon))return(U==null?void 0:U.expandIcon)||null;const pr=(Ht=he??(m==null?void 0:m.expandIcon))!==null&&Ht!==void 0?Ht:U==null?void 0:U.expandIcon;return Of(pr,{className:mr(`${tt}-submenu-expand-icon`,ie.isValidElement(pr)?(Rt=pr.props)===null||Rt===void 0?void 0:Rt.className:void 0)})},[he,m==null?void 0:m.expandIcon,U==null?void 0:U.expandIcon,tt]),ar=ie.useMemo(()=>({prefixCls:tt,inlineCollapsed:Dt||!1,direction:z,firstLevel:!0,theme:ve,mode:ot,disableMenuItemTitleTooltip:oe}),[tt,Dt,z,oe,ve]);return gt(ie.createElement(FE.Provider,{value:null},ie.createElement(bE.Provider,{value:ar},ie.createElement(LC,Object.assign({getPopupContainer:L,overflowedIndicator:ie.createElement(Iie,null),overflowedIndicatorPopupClassName:mr(tt,`${tt}-${ve}`,We),mode:ot,selectable:ct,onClick:at},et,{inlineCollapsed:Dt,style:Object.assign(Object.assign({},U==null?void 0:U.style),ae),className:At,prefixCls:tt,direction:z,defaultMotions:$e,expandIcon:jt,ref:i,rootClassName:mr(_e,mt,m.rootClassName,dt,Ve)}),Ye))))}),PC=ie.forwardRef((t,i)=>{const a=ie.useRef(null),u=ie.useContext(P3);return ie.useImperativeHandle(i,()=>({menu:a.current,focus:m=>{var M;(M=a.current)===null||M===void 0||M.focus(m)}})),ie.createElement(kie,Object.assign({ref:a},t,u))});PC.Item=DH;PC.SubMenu=bH;PC.Divider=OH;PC.ItemGroup=L3;function FH(t){return _s(t,{inputAffixPadding:t.paddingXXS})}const NH=t=>{const{controlHeight:i,fontSize:a,lineHeight:u,lineWidth:m,controlHeightSM:M,controlHeightLG:L,fontSizeLG:z,lineHeightLG:U,paddingSM:W,controlPaddingHorizontalSM:J,controlPaddingHorizontal:te,colorFillAlter:ae,colorPrimaryHover:ve,colorPrimary:he,controlOutlineWidth:oe,controlOutline:me,colorErrorOutline:ge,colorWarningOutline:de,colorBgContainer:ce}=t;return{paddingBlock:Math.max(Math.round((i-a*u)/2*10)/10-m,0),paddingBlockSM:Math.max(Math.round((M-a*u)/2*10)/10-m,0),paddingBlockLG:Math.ceil((L-z*U)/2*10)/10-m,paddingInline:W-m,paddingInlineSM:J-m,paddingInlineLG:te-m,addonBg:ae,activeBorderColor:he,hoverBorderColor:ve,activeShadow:`0 0 0 ${oe}px ${me}`,errorActiveShadow:`0 0 0 ${oe}px ${ge}`,warningActiveShadow:`0 0 0 ${oe}px ${de}`,hoverBg:ce,activeBg:ce,inputFontSize:a,inputFontSizeLG:z,inputFontSizeSM:a}},Hie=t=>({borderColor:t.hoverBorderColor,backgroundColor:t.hoverBg}),pD=t=>({color:t.colorTextDisabled,backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"input[disabled], textarea[disabled]":{cursor:"not-allowed"},"&:hover:not([disabled])":Object.assign({},Hie(_s(t,{hoverBorderColor:t.colorBorder,hoverBg:t.colorBgContainerDisabled})))}),BH=(t,i)=>({background:t.colorBgContainer,borderWidth:t.lineWidth,borderStyle:t.lineType,borderColor:i.borderColor,"&:hover":{borderColor:i.hoverBorderColor,backgroundColor:t.hoverBg},"&:focus, &:focus-within":{borderColor:i.activeBorderColor,boxShadow:i.activeShadow,outline:0,backgroundColor:t.activeBg}}),Uz=(t,i)=>({[`&${t.componentCls}-status-${i.status}:not(${t.componentCls}-disabled)`]:Object.assign(Object.assign({},BH(t,i)),{[`${t.componentCls}-prefix, ${t.componentCls}-suffix`]:{color:i.affixColor}}),[`&${t.componentCls}-status-${i.status}${t.componentCls}-disabled`]:{borderColor:i.borderColor}}),jie=(t,i)=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},BH(t,{borderColor:t.colorBorder,hoverBorderColor:t.hoverBorderColor,activeBorderColor:t.activeBorderColor,activeShadow:t.activeShadow})),{[`&${t.componentCls}-disabled, &[disabled]`]:Object.assign({},pD(t))}),Uz(t,{status:"error",borderColor:t.colorError,hoverBorderColor:t.colorErrorBorderHover,activeBorderColor:t.colorError,activeShadow:t.errorActiveShadow,affixColor:t.colorError})),Uz(t,{status:"warning",borderColor:t.colorWarning,hoverBorderColor:t.colorWarningBorderHover,activeBorderColor:t.colorWarning,activeShadow:t.warningActiveShadow,affixColor:t.colorWarning})),i)}),kz=(t,i)=>({[`&${t.componentCls}-group-wrapper-status-${i.status}`]:{[`${t.componentCls}-group-addon`]:{borderColor:i.addonBorderColor,color:i.addonColor}}}),Gie=t=>({"&-outlined":Object.assign(Object.assign(Object.assign({[`${t.componentCls}-group`]:{"&-addon":{background:t.addonBg,border:`${pn(t.lineWidth)} ${t.lineType} ${t.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}}},kz(t,{status:"error",addonBorderColor:t.colorError,addonColor:t.colorErrorText})),kz(t,{status:"warning",addonBorderColor:t.colorWarning,addonColor:t.colorWarningText})),{[`&${t.componentCls}-group-wrapper-disabled`]:{[`${t.componentCls}-group-addon`]:Object.assign({},pD(t))}})}),Vie=(t,i)=>({"&-borderless":Object.assign({background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${t.componentCls}-disabled, &[disabled]`]:{color:t.colorTextDisabled}},i)}),zH=(t,i)=>({background:i.bg,borderWidth:t.lineWidth,borderStyle:t.lineType,borderColor:"transparent","input&, & input, textarea&, & textarea":{color:i==null?void 0:i.inputColor},"&:hover":{background:i.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:i.activeBorderColor,backgroundColor:t.activeBg}}),Hz=(t,i)=>({[`&${t.componentCls}-status-${i.status}:not(${t.componentCls}-disabled)`]:Object.assign(Object.assign({},zH(t,i)),{[`${t.componentCls}-prefix, ${t.componentCls}-suffix`]:{color:i.affixColor}})}),Wie=(t,i)=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},zH(t,{bg:t.colorFillTertiary,hoverBg:t.colorFillSecondary,activeBorderColor:t.colorPrimary})),{[`&${t.componentCls}-disabled, &[disabled]`]:Object.assign({},pD(t))}),Hz(t,{status:"error",bg:t.colorErrorBg,hoverBg:t.colorErrorBgHover,activeBorderColor:t.colorError,inputColor:t.colorErrorText,affixColor:t.colorError})),Hz(t,{status:"warning",bg:t.colorWarningBg,hoverBg:t.colorWarningBgHover,activeBorderColor:t.colorWarning,inputColor:t.colorWarningText,affixColor:t.colorWarning})),i)}),jz=(t,i)=>({[`&${t.componentCls}-group-wrapper-status-${i.status}`]:{[`${t.componentCls}-group-addon`]:{background:i.addonBg,color:i.addonColor}}}),Xie=t=>({"&-filled":Object.assign(Object.assign(Object.assign({[`${t.componentCls}-group`]:{"&-addon":{background:t.colorFillTertiary},[`${t.componentCls}-filled:not(:focus):not(:focus-within)`]:{"&:not(:first-child)":{borderInlineStart:`${pn(t.lineWidth)} ${t.lineType} ${t.colorSplit}`},"&:not(:last-child)":{borderInlineEnd:`${pn(t.lineWidth)} ${t.lineType} ${t.colorSplit}`}}}},jz(t,{status:"error",addonBg:t.colorErrorBg,addonColor:t.colorErrorText})),jz(t,{status:"warning",addonBg:t.colorWarningBg,addonColor:t.colorWarningText})),{[`&${t.componentCls}-group-wrapper-disabled`]:{[`${t.componentCls}-group`]:{"&-addon":{background:t.colorFillTertiary,color:t.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${pn(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderTop:`${pn(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderBottom:`${pn(t.lineWidth)} ${t.lineType} ${t.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${pn(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderTop:`${pn(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderBottom:`${pn(t.lineWidth)} ${t.lineType} ${t.colorBorder}`}}}})}),Yie=t=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:t,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),UH=t=>{const{paddingBlockLG:i,lineHeightLG:a,borderRadiusLG:u,paddingInlineLG:m}=t;return{padding:`${pn(i)} ${pn(m)}`,fontSize:t.inputFontSizeLG,lineHeight:a,borderRadius:u}},kH=t=>({padding:`${pn(t.paddingBlockSM)} ${pn(t.paddingInlineSM)}`,fontSize:t.inputFontSizeSM,borderRadius:t.borderRadiusSM}),HH=t=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${pn(t.paddingBlock)} ${pn(t.paddingInline)}`,color:t.colorText,fontSize:t.inputFontSize,lineHeight:t.lineHeight,borderRadius:t.borderRadius,transition:`all ${t.motionDurationMid}`},Yie(t.colorTextPlaceholder)),{"textarea&":{maxWidth:"100%",height:"auto",minHeight:t.controlHeight,lineHeight:t.lineHeight,verticalAlign:"bottom",transition:`all ${t.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},UH(t)),"&-sm":Object.assign({},kH(t)),"&-rtl":{direction:"rtl"},"&-textarea-rtl":{direction:"rtl"}}),Zie=t=>{const{componentCls:i,antCls:a}=t;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:t.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${i}, &-lg > ${i}-group-addon`]:Object.assign({},UH(t)),[`&-sm ${i}, &-sm > ${i}-group-addon`]:Object.assign({},kH(t)),[`&-lg ${a}-select-single ${a}-select-selector`]:{height:t.controlHeightLG},[`&-sm ${a}-select-single ${a}-select-selector`]:{height:t.controlHeightSM},[`> ${i}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${i}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${pn(t.paddingInline)}`,color:t.colorText,fontWeight:"normal",fontSize:t.inputFontSize,textAlign:"center",borderRadius:t.borderRadius,transition:`all ${t.motionDurationSlow}`,lineHeight:1,[`${a}-select`]:{margin:`${pn(t.calc(t.paddingBlock).add(1).mul(-1).equal())} ${pn(t.calc(t.paddingInline).mul(-1).equal())}`,[`&${a}-select-single:not(${a}-select-customize-input):not(${a}-pagination-size-changer)`]:{[`${a}-select-selector`]:{backgroundColor:"inherit",border:`${pn(t.lineWidth)} ${t.lineType} transparent`,boxShadow:"none"}},"&-open, &-focused":{[`${a}-select-selector`]:{color:t.colorPrimary}}},[`${a}-cascader-picker`]:{margin:`-9px ${pn(t.calc(t.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${a}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[`${i}`]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${i}-search-with-button &`]:{zIndex:0}}},[`> ${i}:first-child, ${i}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${a}-select ${a}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${i}-affix-wrapper`]:{[`&:not(:first-child) ${i}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${i}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${i}:last-child, ${i}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${a}-select ${a}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${i}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${i}-search &`]:{borderStartStartRadius:t.borderRadius,borderEndStartRadius:t.borderRadius}},[`&:not(:first-child), ${i}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${i}-group-compact`]:Object.assign(Object.assign({display:"block"},GP()),{[`${i}-group-addon, ${i}-group-wrap, > ${i}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:t.lineWidth,"&:hover":{zIndex:1},"&:focus":{zIndex:1}}},"& > *":{display:"inline-block",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${i}-affix-wrapper,
        & > ${i}-number-affix-wrapper,
        & > ${a}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:t.calc(t.lineWidth).mul(-1).equal(),borderInlineEndWidth:t.lineWidth},[`${i}`]:{float:"none"},[`& > ${a}-select > ${a}-select-selector,
      & > ${a}-select-auto-complete ${i},
      & > ${a}-cascader-picker ${i},
      & > ${i}-group-wrapper ${i}`]:{borderInlineEndWidth:t.lineWidth,borderRadius:0,"&:hover":{zIndex:1},"&:focus":{zIndex:1}},[`& > ${a}-select-focused`]:{zIndex:1},[`& > ${a}-select > ${a}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${a}-select:first-child > ${a}-select-selector,
      & > ${a}-select-auto-complete:first-child ${i},
      & > ${a}-cascader-picker:first-child ${i}`]:{borderStartStartRadius:t.borderRadius,borderEndStartRadius:t.borderRadius},[`& > *:last-child,
      & > ${a}-select:last-child > ${a}-select-selector,
      & > ${a}-cascader-picker:last-child ${i},
      & > ${a}-cascader-picker-focused:last-child ${i}`]:{borderInlineEndWidth:t.lineWidth,borderStartEndRadius:t.borderRadius,borderEndEndRadius:t.borderRadius},[`& > ${a}-select-auto-complete ${i}`]:{verticalAlign:"top"},[`${i}-group-wrapper + ${i}-group-wrapper`]:{marginInlineStart:t.calc(t.lineWidth).mul(-1).equal(),[`${i}-affix-wrapper`]:{borderRadius:0}},[`${i}-group-wrapper:not(:last-child)`]:{[`&${i}-search > ${i}-group`]:{[`& > ${i}-group-addon > ${i}-search-button`]:{borderRadius:0},[`& > ${i}`]:{borderStartStartRadius:t.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:t.borderRadius}}}})}},qie=t=>{const{componentCls:i,controlHeightSM:a,lineWidth:u,calc:m}=t,L=m(a).sub(m(u).mul(2)).sub(16).div(2).equal();return{[i]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},c0(t)),HH(t)),jie(t)),Wie(t)),Vie(t)),{'&[type="color"]':{height:t.controlHeight,[`&${i}-lg`]:{height:t.controlHeightLG},[`&${i}-sm`]:{height:a,paddingTop:L,paddingBottom:L}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},Kie=t=>{const{componentCls:i}=t;return{[`${i}-clear-icon`]:{margin:0,color:t.colorTextQuaternary,fontSize:t.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${t.motionDurationSlow}`,"&:hover":{color:t.colorTextTertiary},"&:active":{color:t.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${pn(t.inputAffixPadding)}`}}}},Jie=t=>{const{componentCls:i,inputAffixPadding:a,colorTextDescription:u,motionDurationSlow:m,colorIcon:M,colorIconHover:L,iconCls:z}=t;return{[`${i}-affix-wrapper`]:Object.assign(Object.assign(Object.assign(Object.assign({},HH(t)),{display:"inline-flex",[`&:not(${i}-disabled):hover`]:{zIndex:1,[`${i}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},[`> input${i}`]:{padding:0},[`> input${i}, > textarea${i}`]:{fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${i}`]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:t.paddingXS}},"&-show-count-suffix":{color:u},"&-show-count-has-suffix":{marginInlineEnd:t.paddingXXS},"&-prefix":{marginInlineEnd:a},"&-suffix":{marginInlineStart:a}}}),Kie(t)),{[`${z}${i}-password-icon`]:{color:M,cursor:"pointer",transition:`all ${m}`,"&:hover":{color:L}}})}},Qie=t=>{const{componentCls:i,borderRadiusLG:a,borderRadiusSM:u}=t;return{[`${i}-group`]:Object.assign(Object.assign(Object.assign({},c0(t)),Zie(t)),{"&-rtl":{direction:"rtl"},"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${i}-group-addon`]:{borderRadius:a,fontSize:t.inputFontSizeLG}},"&-sm":{[`${i}-group-addon`]:{borderRadius:u}}},Gie(t)),Xie(t)),{[`&:not(${i}-compact-first-item):not(${i}-compact-last-item)${i}-compact-item`]:{[`${i}, ${i}-group-addon`]:{borderRadius:0}},[`&:not(${i}-compact-last-item)${i}-compact-first-item`]:{[`${i}, ${i}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${i}-compact-first-item)${i}-compact-last-item`]:{[`${i}, ${i}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${i}-compact-last-item)${i}-compact-item`]:{[`${i}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}}})})}},$ie=t=>{const{componentCls:i,antCls:a}=t,u=`${i}-search`;return{[u]:{[`${i}`]:{"&:hover, &:focus":{borderColor:t.colorPrimaryHover,[`+ ${i}-group-addon ${u}-button:not(${a}-btn-primary)`]:{borderInlineStartColor:t.colorPrimaryHover}}},[`${i}-affix-wrapper`]:{borderRadius:0},[`${i}-lg`]:{lineHeight:t.calc(t.lineHeightLG).sub(2e-4).equal({unit:!1})},[`> ${i}-group`]:{[`> ${i}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${u}-button`]:{marginInlineEnd:-1,paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:t.borderRadius,borderEndEndRadius:t.borderRadius,borderEndStartRadius:0,boxShadow:"none"},[`${u}-button:not(${a}-btn-primary)`]:{color:t.colorTextDescription,"&:hover":{color:t.colorPrimaryHover},"&:active":{color:t.colorPrimaryActive},[`&${a}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${u}-button`]:{height:t.controlHeight,"&:hover, &:focus":{zIndex:1}},[`&-large ${u}-button`]:{height:t.controlHeightLG},[`&-small ${u}-button`]:{height:t.controlHeightSM},"&-rtl":{direction:"rtl"},[`&${i}-compact-item`]:{[`&:not(${i}-compact-last-item)`]:{[`${i}-group-addon`]:{[`${i}-search-button`]:{marginInlineEnd:t.calc(t.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${i}-compact-first-item)`]:{[`${i},${i}-affix-wrapper`]:{borderRadius:0}},[`> ${i}-group-addon ${i}-search-button,
        > ${i},
        ${i}-affix-wrapper`]:{"&:hover,&:focus,&:active":{zIndex:2}},[`> ${i}-affix-wrapper-focused`]:{zIndex:2}}}}},eoe=t=>{const{componentCls:i,paddingLG:a}=t,u=`${i}-textarea`;return{[u]:{position:"relative","&-show-count":{[`> ${i}`]:{height:"100%"},[`${i}-data-count`]:{position:"absolute",bottom:t.calc(t.fontSize).mul(t.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:t.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},"&-allow-clear":{[`> ${i}`]:{paddingInlineEnd:a}},[`&-affix-wrapper${u}-has-feedback`]:{[`${i}`]:{paddingInlineEnd:a}},[`&-affix-wrapper${i}-affix-wrapper`]:{padding:0,[`> textarea${i}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent","&:focus":{boxShadow:"none !important"}},[`${i}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${i}-clear-icon`]:{position:"absolute",insetInlineEnd:t.paddingXS,insetBlockStart:t.paddingXS},[`${u}-suffix`]:{position:"absolute",top:0,insetInlineEnd:t.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}}}}},toe=t=>{const{componentCls:i}=t;return{[`${i}-out-of-range`]:{[`&, & input, & textarea, ${i}-show-count-suffix, ${i}-data-count`]:{color:t.colorError}}}},mD=Df("Input",t=>{const i=_s(t,FH(t));return[qie(i),eoe(i),Jie(i),Qie(i),$ie(i),toe(i),W9(i)]},NH,{resetFont:!1});function roe(t){return!!(t.addonBefore||t.addonAfter)}function noe(t){return!!(t.prefix||t.suffix||t.allowClear)}function Gz(t,i,a){var u=i.cloneNode(!0),m=Object.create(t,{target:{value:u},currentTarget:{value:u}});return u.value=a,typeof i.selectionStart=="number"&&typeof i.selectionEnd=="number"&&(u.selectionStart=i.selectionStart,u.selectionEnd=i.selectionEnd),m}function NE(t,i,a,u){if(a){var m=i;if(i.type==="click"){m=Gz(i,t,""),a(m);return}if(t.type!=="file"&&u!==void 0){m=Gz(i,t,u),a(m);return}a(m)}}function ioe(t,i){if(t){t.focus(i);var a=i||{},u=a.cursor;if(u){var m=t.value.length;switch(u){case"start":t.setSelectionRange(0,0);break;case"end":t.setSelectionRange(m,m);break;default:t.setSelectionRange(0,m)}}}}var jH=function(i){var a,u,m=i.inputElement,M=i.children,L=i.prefixCls,z=i.prefix,U=i.suffix,W=i.addonBefore,J=i.addonAfter,te=i.className,ae=i.style,ve=i.disabled,he=i.readOnly,oe=i.focused,me=i.triggerFocus,ge=i.allowClear,de=i.value,ce=i.handleReset,_e=i.hidden,Re=i.classes,Ee=i.classNames,De=i.dataAttrs,We=i.styles,Xe=i.components,et=M??m,Ye=(Xe==null?void 0:Xe.affixWrapper)||"span",at=(Xe==null?void 0:Xe.groupWrapper)||"span",ot=(Xe==null?void 0:Xe.wrapper)||"span",ct=(Xe==null?void 0:Xe.groupAddon)||"span",Dt=ie.useRef(null),$e=function(ur){var jn;(jn=Dt.current)!==null&&jn!==void 0&&jn.contains(ur.target)&&(me==null||me())},tt=noe(i),Ve=ie.cloneElement(et,{value:de,className:mr(et.props.className,!tt&&(Ee==null?void 0:Ee.variant))||null});if(tt){var gt,mt=null;if(ge){var dt,At=!ve&&!he&&de,jt="".concat(L,"-clear-icon"),ar=ii(ge)==="object"&&ge!==null&&ge!==void 0&&ge.clearIcon?ge.clearIcon:"✖";mt=dr.createElement("span",{onClick:ce,onMouseDown:function(ur){return ur.preventDefault()},className:mr(jt,(dt={},_t(dt,"".concat(jt,"-hidden"),!At),_t(dt,"".concat(jt,"-has-suffix"),!!U),dt)),role:"button",tabIndex:-1},ar)}var Ht="".concat(L,"-affix-wrapper"),Rt=mr(Ht,(gt={},_t(gt,"".concat(L,"-disabled"),ve),_t(gt,"".concat(Ht,"-disabled"),ve),_t(gt,"".concat(Ht,"-focused"),oe),_t(gt,"".concat(Ht,"-readonly"),he),_t(gt,"".concat(Ht,"-input-with-clear-btn"),U&&ge&&de),gt),Re==null?void 0:Re.affixWrapper,Ee==null?void 0:Ee.affixWrapper,Ee==null?void 0:Ee.variant),pr=(U||ge)&&dr.createElement("span",{className:mr("".concat(L,"-suffix"),Ee==null?void 0:Ee.suffix),style:We==null?void 0:We.suffix},mt,U);Ve=dr.createElement(Ye,Sn({className:Rt,style:We==null?void 0:We.affixWrapper,onClick:$e},De==null?void 0:De.affixWrapper,{ref:Dt}),z&&dr.createElement("span",{className:mr("".concat(L,"-prefix"),Ee==null?void 0:Ee.prefix),style:We==null?void 0:We.prefix},z),Ve,pr)}if(roe(i)){var Cr="".concat(L,"-group"),Ir="".concat(Cr,"-addon"),Ut="".concat(Cr,"-wrapper"),_r=mr("".concat(L,"-wrapper"),Cr,Re==null?void 0:Re.wrapper,Ee==null?void 0:Ee.wrapper),Bn=mr(Ut,_t({},"".concat(Ut,"-disabled"),ve),Re==null?void 0:Re.group,Ee==null?void 0:Ee.groupWrapper);Ve=dr.createElement(at,{className:Bn},dr.createElement(ot,{className:_r},W&&dr.createElement(ct,{className:Ir},W),Ve,J&&dr.createElement(ct,{className:Ir},J)))}return dr.cloneElement(Ve,{className:mr((a=Ve.props)===null||a===void 0?void 0:a.className,te)||null,style:Ft(Ft({},(u=Ve.props)===null||u===void 0?void 0:u.style),ae),hidden:_e})},ooe=["show"];function GH(t,i){return ie.useMemo(function(){var a={};i&&(a.show=ii(i)==="object"&&i.formatter?i.formatter:!!i),a=Ft(Ft({},a),t);var u=a,m=u.show,M=Qi(u,ooe);return Ft(Ft({},M),{},{show:!!m,showFormatter:typeof m=="function"?m:void 0,strategy:M.strategy||function(L){return L.length}})},[t,i])}var aoe=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],soe=ie.forwardRef(function(t,i){var a=t.autoComplete,u=t.onChange,m=t.onFocus,M=t.onBlur,L=t.onPressEnter,z=t.onKeyDown,U=t.prefixCls,W=U===void 0?"rc-input":U,J=t.disabled,te=t.htmlSize,ae=t.className,ve=t.maxLength,he=t.suffix,oe=t.showCount,me=t.count,ge=t.type,de=ge===void 0?"text":ge,ce=t.classes,_e=t.classNames,Re=t.styles,Ee=t.onCompositionStart,De=t.onCompositionEnd,We=Qi(t,aoe),Xe=ie.useState(!1),et=sr(Xe,2),Ye=et[0],at=et[1],ot=ie.useRef(!1),ct=ie.useRef(null),Dt=function(er){ct.current&&ioe(ct.current,er)},$e=Gd(t.defaultValue,{value:t.value}),tt=sr($e,2),Ve=tt[0],gt=tt[1],mt=Ve==null?"":String(Ve),dt=ie.useState(null),At=sr(dt,2),jt=At[0],ar=At[1],Ht=GH(me,oe),Rt=Ht.max||ve,pr=Ht.strategy(mt),Cr=!!Rt&&pr>Rt;ie.useImperativeHandle(i,function(){return{focus:Dt,blur:function(){var er;(er=ct.current)===null||er===void 0||er.blur()},setSelectionRange:function(er,cn,oi){var xn;(xn=ct.current)===null||xn===void 0||xn.setSelectionRange(er,cn,oi)},select:function(){var er;(er=ct.current)===null||er===void 0||er.select()},input:ct.current}}),ie.useEffect(function(){at(function(lr){return lr&&J?!1:lr})},[J]);var Ir=function(er,cn,oi){var xn=cn;if(!ot.current&&Ht.exceedFormatter&&Ht.max&&Ht.strategy(cn)>Ht.max){if(xn=Ht.exceedFormatter(cn,{max:Ht.max}),cn!==xn){var qn,Dn;ar([((qn=ct.current)===null||qn===void 0?void 0:qn.selectionStart)||0,((Dn=ct.current)===null||Dn===void 0?void 0:Dn.selectionEnd)||0])}}else if(oi.source==="compositionEnd")return;gt(xn),ct.current&&NE(ct.current,er,u,xn)};ie.useEffect(function(){if(jt){var lr;(lr=ct.current)===null||lr===void 0||lr.setSelectionRange.apply(lr,on(jt))}},[jt]);var Ut=function(er){Ir(er,er.target.value,{source:"change"})},_r=function(er){ot.current=!1,Ir(er,er.currentTarget.value,{source:"compositionEnd"}),De==null||De(er)},Bn=function(er){L&&er.key==="Enter"&&L(er),z==null||z(er)},bn=function(er){at(!0),m==null||m(er)},ur=function(er){at(!1),M==null||M(er)},jn=function(er){gt(""),Dt(),ct.current&&NE(ct.current,er,u)},An=Cr&&"".concat(W,"-out-of-range"),en=function(){var er=Oh(t,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames"]);return dr.createElement("input",Sn({autoComplete:a},er,{onChange:Ut,onFocus:bn,onBlur:ur,onKeyDown:Bn,className:mr(W,_t({},"".concat(W,"-disabled"),J),_e==null?void 0:_e.input),style:Re==null?void 0:Re.input,ref:ct,size:te,type:de,onCompositionStart:function(oi){ot.current=!0,Ee==null||Ee(oi)},onCompositionEnd:_r}))},Fn=function(){var er=Number(Rt)>0;if(he||Ht.show){var cn=Ht.showFormatter?Ht.showFormatter({value:mt,count:pr,maxLength:Rt}):"".concat(pr).concat(er?" / ".concat(Rt):"");return dr.createElement(dr.Fragment,null,Ht.show&&dr.createElement("span",{className:mr("".concat(W,"-show-count-suffix"),_t({},"".concat(W,"-show-count-has-suffix"),!!he),_e==null?void 0:_e.count),style:Ft({},Re==null?void 0:Re.count)},cn),he)}return null};return dr.createElement(jH,Sn({},We,{prefixCls:W,className:mr(ae,An),handleReset:jn,value:mt,focused:Ye,triggerFocus:Dt,suffix:Fn(),disabled:J,classes:ce,classNames:_e,styles:Re}),en())});const loe=t=>{const{getPrefixCls:i,direction:a}=ie.useContext(lo),{prefixCls:u,className:m}=t,M=i("input-group",u),L=i("input"),[z,U]=mD(L),W=mr(M,{[`${M}-lg`]:t.size==="large",[`${M}-sm`]:t.size==="small",[`${M}-compact`]:t.compact,[`${M}-rtl`]:a==="rtl"},U,m),J=ie.useContext(Um),te=ie.useMemo(()=>Object.assign(Object.assign({},J),{isFormItemInput:!1}),[J]);return z(ie.createElement("span",{className:W,style:t.style,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,onFocus:t.onFocus,onBlur:t.onBlur},ie.createElement(Um.Provider,{value:te},t.children)))},VH=t=>{let i;return typeof t=="object"&&(t!=null&&t.clearIcon)?i=t:t&&(i={clearIcon:dr.createElement(w9,null)}),i};function WH(t,i){const a=ie.useRef([]),u=()=>{a.current.push(setTimeout(()=>{var m,M,L,z;!((m=t.current)===null||m===void 0)&&m.input&&((M=t.current)===null||M===void 0?void 0:M.input.getAttribute("type"))==="password"&&(!((L=t.current)===null||L===void 0)&&L.input.hasAttribute("value"))&&((z=t.current)===null||z===void 0||z.input.removeAttribute("value"))}))};return ie.useEffect(()=>(i&&u(),()=>a.current.forEach(m=>{m&&clearTimeout(m)})),[]),u}function uoe(t){return!!(t.prefix||t.suffix||t.allowClear||t.showCount)}var coe=function(t,i){var a={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&i.indexOf(u)<0&&(a[u]=t[u]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,u=Object.getOwnPropertySymbols(t);m<u.length;m++)i.indexOf(u[m])<0&&Object.prototype.propertyIsEnumerable.call(t,u[m])&&(a[u[m]]=t[u[m]]);return a};function hoe(t,i){if(!t)return;t.focus(i);const{cursor:a}=i||{};if(a){const u=t.value.length;switch(a){case"start":t.setSelectionRange(0,0);break;case"end":t.setSelectionRange(u,u);break;default:t.setSelectionRange(0,u);break}}}const O3=ie.forwardRef((t,i)=>{var a;const{prefixCls:u,bordered:m=!0,status:M,size:L,disabled:z,onBlur:U,onFocus:W,suffix:J,allowClear:te,addonAfter:ae,addonBefore:ve,className:he,style:oe,styles:me,rootClassName:ge,onChange:de,classNames:ce,variant:_e}=t,Re=coe(t,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:Ee,direction:De,input:We}=dr.useContext(lo),Xe=Ee("input",u),et=ie.useRef(null),Ye=Zm(Xe),[at,ot,ct]=mD(Xe,Ye),{compactSize:Dt,compactItemClassnames:$e}=$O(Xe,De),tt=f0(bn=>{var ur;return(ur=L??Dt)!==null&&ur!==void 0?ur:bn}),Ve=dr.useContext(sx),gt=z??Ve,{status:mt,hasFeedback:dt,feedbackIcon:At}=ie.useContext(Um),jt=iD(mt,M),ar=uoe(t)||!!dt;ie.useRef(ar);const Ht=WH(et,!0),Rt=bn=>{Ht(),U==null||U(bn)},pr=bn=>{Ht(),W==null||W(bn)},Cr=bn=>{Ht(),de==null||de(bn)},Ir=(dt||J)&&dr.createElement(dr.Fragment,null,J,dt&&At),Ut=VH(te??(We==null?void 0:We.allowClear)),[_r,Bn]=sH(_e,m);return at(dr.createElement(soe,Object.assign({ref:ep(i,et),prefixCls:Xe,autoComplete:We==null?void 0:We.autoComplete},Re,{disabled:gt,onBlur:Rt,onFocus:pr,style:Object.assign(Object.assign({},We==null?void 0:We.style),oe),styles:Object.assign(Object.assign({},We==null?void 0:We.styles),me),suffix:Ir,allowClear:Ut,className:mr(he,ge,ct,Ye,$e,We==null?void 0:We.className),onChange:Cr,addonAfter:ae&&dr.createElement(IE,null,dr.createElement(dz,{override:!0,status:!0},ae)),addonBefore:ve&&dr.createElement(IE,null,dr.createElement(dz,{override:!0,status:!0},ve)),classNames:Object.assign(Object.assign(Object.assign({},ce),We==null?void 0:We.classNames),{input:mr({[`${Xe}-sm`]:tt==="small",[`${Xe}-lg`]:tt==="large",[`${Xe}-rtl`]:De==="rtl"},ce==null?void 0:ce.input,(a=We==null?void 0:We.classNames)===null||a===void 0?void 0:a.input,ot),variant:mr({[`${Xe}-${_r}`]:Bn},c4(Xe,jt)),affixWrapper:mr({[`${Xe}-affix-wrapper-sm`]:tt==="small",[`${Xe}-affix-wrapper-lg`]:tt==="large",[`${Xe}-affix-wrapper-rtl`]:De==="rtl"},ot),wrapper:mr({[`${Xe}-group-rtl`]:De==="rtl"},ot),groupWrapper:mr({[`${Xe}-group-wrapper-sm`]:tt==="small",[`${Xe}-group-wrapper-lg`]:tt==="large",[`${Xe}-group-wrapper-rtl`]:De==="rtl",[`${Xe}-group-wrapper-${_r}`]:Bn},c4(`${Xe}-group-wrapper`,jt,dt),ot)})})))}),foe=t=>{const{componentCls:i,paddingXS:a}=t;return{[`${i}`]:{display:"inline-flex",alignItems:"center",flexWrap:"nowrap",columnGap:a,"&-rtl":{direction:"rtl"},[`${i}-input`]:{textAlign:"center",paddingInline:t.paddingXXS},[`&${i}-sm ${i}-input`]:{paddingInline:t.calc(t.paddingXXS).div(2).equal()},[`&${i}-lg ${i}-input`]:{paddingInline:t.paddingXS}}}},doe=Df(["Input","OTP"],t=>{const i=_s(t,FH(t));return[foe(i)]},NH);var poe=function(t,i){var a={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&i.indexOf(u)<0&&(a[u]=t[u]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,u=Object.getOwnPropertySymbols(t);m<u.length;m++)i.indexOf(u[m])<0&&Object.prototype.propertyIsEnumerable.call(t,u[m])&&(a[u[m]]=t[u[m]]);return a};const moe=ie.forwardRef((t,i)=>{const{value:a,onChange:u,onActiveChange:m,index:M,mask:L}=t,z=poe(t,["value","onChange","onActiveChange","index","mask"]),U=a&&typeof L=="string"?L:a,W=he=>{u(M,he.target.value)},J=ie.useRef(null);ie.useImperativeHandle(i,()=>J.current);const te=()=>{ul(()=>{var he;const oe=(he=J.current)===null||he===void 0?void 0:he.input;document.activeElement===oe&&oe&&oe.select()})},ae=he=>{let{key:oe}=he;oe==="ArrowLeft"?m(M-1):oe==="ArrowRight"&&m(M+1),te()},ve=he=>{he.key==="Backspace"&&!a&&m(M-1),te()};return ie.createElement(O3,Object.assign({},z,{ref:J,value:U,onInput:W,onFocus:te,onKeyDown:ae,onKeyUp:ve,onMouseDown:te,onMouseUp:te,type:L===!0?"password":"text"}))});var goe=function(t,i){var a={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&i.indexOf(u)<0&&(a[u]=t[u]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,u=Object.getOwnPropertySymbols(t);m<u.length;m++)i.indexOf(u[m])<0&&Object.prototype.propertyIsEnumerable.call(t,u[m])&&(a[u[m]]=t[u[m]]);return a};function cT(t){return(t||"").split("")}const voe=ie.forwardRef((t,i)=>{const{prefixCls:a,length:u=6,size:m,defaultValue:M,value:L,onChange:z,formatter:U,variant:W,disabled:J,status:te,autoFocus:ae,mask:ve}=t,he=goe(t,["prefixCls","length","size","defaultValue","value","onChange","formatter","variant","disabled","status","autoFocus","mask"]),{getPrefixCls:oe,direction:me}=ie.useContext(lo),ge=oe("otp",a),de=C9(he,{aria:!0,data:!0,attr:!0}),ce=Zm(ge),[_e,Re,Ee]=doe(ge,ce),De=f0(dt=>m??dt),We=ie.useContext(Um),Xe=iD(We.status,te),et=ie.useMemo(()=>Object.assign(Object.assign({},We),{status:Xe,hasFeedback:!1,feedbackIcon:null}),[We,Xe]),Ye=ie.useRef(null),at=ie.useRef({});ie.useImperativeHandle(i,()=>({focus:()=>{var dt;(dt=at.current[0])===null||dt===void 0||dt.focus()},blur:()=>{var dt;for(let At=0;At<u;At+=1)(dt=at.current[At])===null||dt===void 0||dt.blur()},nativeElement:Ye.current}));const ot=dt=>U?U(dt):dt,[ct,Dt]=ie.useState(cT(ot(M||"")));ie.useEffect(()=>{L!==void 0&&Dt(cT(L))},[L]);const $e=Tl(dt=>{Dt(dt),z&&dt.length===u&&dt.every(At=>At)&&dt.some((At,jt)=>ct[jt]!==At)&&z(dt.join(""))}),tt=Tl((dt,At)=>{let jt=on(ct);for(let Ht=0;Ht<dt;Ht+=1)jt[Ht]||(jt[Ht]="");At.length<=1?jt[dt]=At:jt=jt.slice(0,dt).concat(cT(At)),jt=jt.slice(0,u);for(let Ht=jt.length-1;Ht>=0&&!jt[Ht];Ht-=1)jt.pop();const ar=ot(jt.map(Ht=>Ht||" ").join(""));return jt=cT(ar).map((Ht,Rt)=>Ht===" "&&!jt[Rt]?jt[Rt]:Ht),jt}),Ve=(dt,At)=>{var jt;const ar=tt(dt,At),Ht=Math.min(dt+At.length,u-1);Ht!==dt&&((jt=at.current[Ht])===null||jt===void 0||jt.focus()),$e(ar)},gt=dt=>{var At;(At=at.current[dt])===null||At===void 0||At.focus()},mt={variant:W,disabled:J,status:Xe,mask:ve};return _e(ie.createElement("div",Object.assign({},de,{ref:Ye,className:mr(ge,{[`${ge}-sm`]:De==="small",[`${ge}-lg`]:De==="large",[`${ge}-rtl`]:me==="rtl"},Ee,Re)}),ie.createElement(Um.Provider,{value:et},Array.from({length:u}).map((dt,At)=>{const jt=`otp-${At}`,ar=ct[At]||"";return ie.createElement(moe,Object.assign({ref:Ht=>{at.current[At]=Ht},key:jt,index:At,size:De,htmlSize:1,className:`${ge}-input`,onChange:Ve,value:ar,onActiveChange:gt,autoFocus:At===0&&ae},mt))}))))});var yoe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},xoe=function(i,a){return ie.createElement(Ka,Sn({},i,{ref:a,icon:yoe}))},Aoe=ie.forwardRef(xoe),woe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},Coe=function(i,a){return ie.createElement(Ka,Sn({},i,{ref:a,icon:woe}))},_oe=ie.forwardRef(Coe),Moe=function(t,i){var a={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&i.indexOf(u)<0&&(a[u]=t[u]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,u=Object.getOwnPropertySymbols(t);m<u.length;m++)i.indexOf(u[m])<0&&Object.prototype.propertyIsEnumerable.call(t,u[m])&&(a[u[m]]=t[u[m]]);return a};const Soe=t=>t?ie.createElement(_oe,null):ie.createElement(Aoe,null),Toe={click:"onClick",hover:"onMouseOver"},Eoe=ie.forwardRef((t,i)=>{const{disabled:a,action:u="click",visibilityToggle:m=!0,iconRender:M=Soe}=t,L=typeof m=="object"&&m.visible!==void 0,[z,U]=ie.useState(()=>L?m.visible:!1),W=ie.useRef(null);ie.useEffect(()=>{L&&U(m.visible)},[L,m]);const J=WH(W),te=()=>{a||(z&&J(),U(We=>{var Xe;const et=!We;return typeof m=="object"&&((Xe=m.onVisibleChange)===null||Xe===void 0||Xe.call(m,et)),et}))},ae=We=>{const Xe=Toe[u]||"",et=M(z),Ye={[Xe]:te,className:`${We}-icon`,key:"passwordIcon",onMouseDown:at=>{at.preventDefault()},onMouseUp:at=>{at.preventDefault()}};return ie.cloneElement(ie.isValidElement(et)?et:ie.createElement("span",null,et),Ye)},{className:ve,prefixCls:he,inputPrefixCls:oe,size:me}=t,ge=Moe(t,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:de}=ie.useContext(lo),ce=de("input",oe),_e=de("input-password",he),Re=m&&ae(_e),Ee=mr(_e,ve,{[`${_e}-${me}`]:!!me}),De=Object.assign(Object.assign({},Oh(ge,["suffix","iconRender","visibilityToggle"])),{type:z?"text":"password",className:Ee,prefixCls:ce,suffix:Re});return me&&(De.size=me),ie.createElement(O3,Object.assign({ref:ep(i,W)},De))});var Ioe=function(t,i){var a={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&i.indexOf(u)<0&&(a[u]=t[u]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,u=Object.getOwnPropertySymbols(t);m<u.length;m++)i.indexOf(u[m])<0&&Object.prototype.propertyIsEnumerable.call(t,u[m])&&(a[u[m]]=t[u[m]]);return a};const Roe=ie.forwardRef((t,i)=>{const{prefixCls:a,inputPrefixCls:u,className:m,size:M,suffix:L,enterButton:z=!1,addonAfter:U,loading:W,disabled:J,onSearch:te,onChange:ae,onCompositionStart:ve,onCompositionEnd:he}=t,oe=Ioe(t,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:me,direction:ge}=ie.useContext(lo),de=ie.useRef(!1),ce=me("input-search",a),_e=me("input",u),{compactSize:Re}=$O(ce,ge),Ee=f0(mt=>{var dt;return(dt=M??Re)!==null&&dt!==void 0?dt:mt}),De=ie.useRef(null),We=mt=>{mt&&mt.target&&mt.type==="click"&&te&&te(mt.target.value,mt,{source:"clear"}),ae&&ae(mt)},Xe=mt=>{var dt;document.activeElement===((dt=De.current)===null||dt===void 0?void 0:dt.input)&&mt.preventDefault()},et=mt=>{var dt,At;te&&te((At=(dt=De.current)===null||dt===void 0?void 0:dt.input)===null||At===void 0?void 0:At.value,mt,{source:"input"})},Ye=mt=>{de.current||W||et(mt)},at=typeof z=="boolean"?ie.createElement(qre,null):null,ot=`${ce}-button`;let ct;const Dt=z||{},$e=Dt.type&&Dt.type.__ANT_BUTTON===!0;$e||Dt.type==="button"?ct=Of(Dt,Object.assign({onMouseDown:Xe,onClick:mt=>{var dt,At;(At=(dt=Dt==null?void 0:Dt.props)===null||dt===void 0?void 0:dt.onClick)===null||At===void 0||At.call(dt,mt),et(mt)},key:"enterButton"},$e?{className:ot,size:Ee}:{})):ct=ie.createElement(T3,{className:ot,type:z?"primary":void 0,size:Ee,disabled:J,key:"enterButton",onMouseDown:Xe,onClick:et,loading:W,icon:at},z),U&&(ct=[ct,Of(U,{key:"addonAfter"})]);const tt=mr(ce,{[`${ce}-rtl`]:ge==="rtl",[`${ce}-${Ee}`]:!!Ee,[`${ce}-with-button`]:!!z},m),Ve=mt=>{de.current=!0,ve==null||ve(mt)},gt=mt=>{de.current=!1,he==null||he(mt)};return ie.createElement(O3,Object.assign({ref:ep(De,i),onPressEnter:Ye},oe,{size:Ee,onCompositionStart:Ve,onCompositionEnd:gt,prefixCls:_e,addonAfter:ct,suffix:L,onChange:We,className:tt,disabled:J}))});var Loe=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,Poe=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],y5={},vc;function Ooe(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=t.getAttribute("id")||t.getAttribute("data-reactid")||t.getAttribute("name");if(i&&y5[a])return y5[a];var u=window.getComputedStyle(t),m=u.getPropertyValue("box-sizing")||u.getPropertyValue("-moz-box-sizing")||u.getPropertyValue("-webkit-box-sizing"),M=parseFloat(u.getPropertyValue("padding-bottom"))+parseFloat(u.getPropertyValue("padding-top")),L=parseFloat(u.getPropertyValue("border-bottom-width"))+parseFloat(u.getPropertyValue("border-top-width")),z=Poe.map(function(W){return"".concat(W,":").concat(u.getPropertyValue(W))}).join(";"),U={sizingStyle:z,paddingSize:M,borderSize:L,boxSizing:m};return i&&a&&(y5[a]=U),U}function Doe(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;vc||(vc=document.createElement("textarea"),vc.setAttribute("tab-index","-1"),vc.setAttribute("aria-hidden","true"),document.body.appendChild(vc)),t.getAttribute("wrap")?vc.setAttribute("wrap",t.getAttribute("wrap")):vc.removeAttribute("wrap");var m=Ooe(t,i),M=m.paddingSize,L=m.borderSize,z=m.boxSizing,U=m.sizingStyle;vc.setAttribute("style","".concat(U,";").concat(Loe)),vc.value=t.value||t.placeholder||"";var W=void 0,J=void 0,te,ae=vc.scrollHeight;if(z==="border-box"?ae+=L:z==="content-box"&&(ae-=M),a!==null||u!==null){vc.value=" ";var ve=vc.scrollHeight-M;a!==null&&(W=ve*a,z==="border-box"&&(W=W+M+L),ae=Math.max(W,ae)),u!==null&&(J=ve*u,z==="border-box"&&(J=J+M+L),te=ae>J?"":"hidden",ae=Math.min(J,ae))}var he={height:ae,overflowY:te,resize:"none"};return W&&(he.minHeight=W),J&&(he.maxHeight=J),he}var boe=["prefixCls","onPressEnter","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],x5=0,A5=1,w5=2,Foe=ie.forwardRef(function(t,i){var a=t,u=a.prefixCls;a.onPressEnter;var m=a.defaultValue,M=a.value,L=a.autoSize,z=a.onResize,U=a.className,W=a.style,J=a.disabled,te=a.onChange;a.onInternalAutoSize;var ae=Qi(a,boe),ve=Gd(m,{value:M,postState:function(ar){return ar??""}}),he=sr(ve,2),oe=he[0],me=he[1],ge=function(ar){me(ar.target.value),te==null||te(ar)},de=ie.useRef();ie.useImperativeHandle(i,function(){return{textArea:de.current}});var ce=ie.useMemo(function(){return L&&ii(L)==="object"?[L.minRows,L.maxRows]:[]},[L]),_e=sr(ce,2),Re=_e[0],Ee=_e[1],De=!!L,We=function(){try{if(document.activeElement===de.current){var ar=de.current,Ht=ar.selectionStart,Rt=ar.selectionEnd,pr=ar.scrollTop;de.current.setSelectionRange(Ht,Rt),de.current.scrollTop=pr}}catch{}},Xe=ie.useState(w5),et=sr(Xe,2),Ye=et[0],at=et[1],ot=ie.useState(),ct=sr(ot,2),Dt=ct[0],$e=ct[1],tt=function(){at(x5)};as(function(){De&&tt()},[M,Re,Ee,De]),as(function(){if(Ye===x5)at(A5);else if(Ye===A5){var jt=Doe(de.current,!1,Re,Ee);at(w5),$e(jt)}else We()},[Ye]);var Ve=ie.useRef(),gt=function(){ul.cancel(Ve.current)},mt=function(ar){Ye===w5&&(z==null||z(ar),L&&(gt(),Ve.current=ul(function(){tt()})))};ie.useEffect(function(){return gt},[]);var dt=De?Dt:null,At=Ft(Ft({},W),dt);return(Ye===x5||Ye===A5)&&(At.overflowY="hidden",At.overflowX="hidden"),ie.createElement(u0,{onResize:mt,disabled:!(L||z)},ie.createElement("textarea",Sn({},ae,{ref:de,style:At,className:mr(u,U,_t({},"".concat(u,"-disabled"),J)),disabled:J,value:oe,onChange:ge})))}),Noe=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize"],Boe=dr.forwardRef(function(t,i){var a,u,m=t.defaultValue,M=t.value,L=t.onFocus,z=t.onBlur,U=t.onChange,W=t.allowClear,J=t.maxLength,te=t.onCompositionStart,ae=t.onCompositionEnd,ve=t.suffix,he=t.prefixCls,oe=he===void 0?"rc-textarea":he,me=t.showCount,ge=t.count,de=t.className,ce=t.style,_e=t.disabled,Re=t.hidden,Ee=t.classNames,De=t.styles,We=t.onResize,Xe=Qi(t,Noe),et=Gd(m,{value:M,defaultValue:m}),Ye=sr(et,2),at=Ye[0],ot=Ye[1],ct=at==null?"":String(at),Dt=dr.useState(!1),$e=sr(Dt,2),tt=$e[0],Ve=$e[1],gt=dr.useRef(!1),mt=dr.useState(null),dt=sr(mt,2),At=dt[0],jt=dt[1],ar=ie.useRef(null),Ht=function(){var hn;return(hn=ar.current)===null||hn===void 0?void 0:hn.textArea},Rt=function(){Ht().focus()};ie.useImperativeHandle(i,function(){return{resizableTextArea:ar.current,focus:Rt,blur:function(){Ht().blur()}}}),ie.useEffect(function(){Ve(function(ui){return!_e&&ui})},[_e]);var pr=dr.useState(null),Cr=sr(pr,2),Ir=Cr[0],Ut=Cr[1];dr.useEffect(function(){if(Ir){var ui;(ui=Ht()).setSelectionRange.apply(ui,on(Ir))}},[Ir]);var _r=GH(ge,me),Bn=(a=_r.max)!==null&&a!==void 0?a:J,bn=Number(Bn)>0,ur=_r.strategy(ct),jn=!!Bn&&ur>Bn,An=function(hn,Kn){var $i=Kn;!gt.current&&_r.exceedFormatter&&_r.max&&_r.strategy(Kn)>_r.max&&($i=_r.exceedFormatter(Kn,{max:_r.max}),Kn!==$i&&Ut([Ht().selectionStart||0,Ht().selectionEnd||0])),ot($i),NE(hn.currentTarget,hn,U,$i)},en=function(hn){gt.current=!0,te==null||te(hn)},Fn=function(hn){gt.current=!1,An(hn,hn.currentTarget.value),ae==null||ae(hn)},lr=function(hn){An(hn,hn.target.value)},er=function(hn){var Kn=Xe.onPressEnter,$i=Xe.onKeyDown;hn.key==="Enter"&&Kn&&Kn(hn),$i==null||$i(hn)},cn=function(hn){Ve(!0),L==null||L(hn)},oi=function(hn){Ve(!1),z==null||z(hn)},xn=function(hn){ot(""),Rt(),NE(Ht(),hn,U)},qn=ve,Dn;_r.show&&(_r.showFormatter?Dn=_r.showFormatter({value:ct,count:ur,maxLength:Bn}):Dn="".concat(ur).concat(bn?" / ".concat(Bn):""),qn=dr.createElement(dr.Fragment,null,qn,dr.createElement("span",{className:mr("".concat(oe,"-data-count"),Ee==null?void 0:Ee.count),style:De==null?void 0:De.count},Dn)));var mn=function(hn){var Kn;We==null||We(hn),(Kn=Ht())!==null&&Kn!==void 0&&Kn.style.height&&jt(!0)},pi=!Xe.autoSize&&!me&&!W;return dr.createElement(jH,{value:ct,allowClear:W,handleReset:xn,suffix:qn,prefixCls:oe,classNames:Ft(Ft({},Ee),{},{affixWrapper:mr(Ee==null?void 0:Ee.affixWrapper,(u={},_t(u,"".concat(oe,"-show-count"),me),_t(u,"".concat(oe,"-textarea-allow-clear"),W),u))}),disabled:_e,focused:tt,className:mr(de,jn&&"".concat(oe,"-out-of-range")),style:Ft(Ft({},ce),At&&!pi?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof Dn=="string"?Dn:void 0}},hidden:Re},dr.createElement(Foe,Sn({},Xe,{maxLength:J,onKeyDown:er,onChange:lr,onFocus:cn,onBlur:oi,onCompositionStart:en,onCompositionEnd:Fn,className:mr(Ee==null?void 0:Ee.textarea),style:Ft(Ft({},De==null?void 0:De.textarea),{},{resize:ce==null?void 0:ce.resize}),disabled:_e,prefixCls:oe,onResize:mn,ref:ar})))}),zoe=function(t,i){var a={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&i.indexOf(u)<0&&(a[u]=t[u]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,u=Object.getOwnPropertySymbols(t);m<u.length;m++)i.indexOf(u[m])<0&&Object.prototype.propertyIsEnumerable.call(t,u[m])&&(a[u[m]]=t[u[m]]);return a};const Uoe=ie.forwardRef((t,i)=>{var a,u;const{prefixCls:m,bordered:M=!0,size:L,disabled:z,status:U,allowClear:W,classNames:J,rootClassName:te,className:ae,style:ve,styles:he,variant:oe}=t,me=zoe(t,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant"]),{getPrefixCls:ge,direction:de,textArea:ce}=ie.useContext(lo),_e=f0(L),Re=ie.useContext(sx),Ee=z??Re,{status:De,hasFeedback:We,feedbackIcon:Xe}=ie.useContext(Um),et=iD(De,U),Ye=ie.useRef(null);ie.useImperativeHandle(i,()=>{var mt;return{resizableTextArea:(mt=Ye.current)===null||mt===void 0?void 0:mt.resizableTextArea,focus:dt=>{var At,jt;hoe((jt=(At=Ye.current)===null||At===void 0?void 0:At.resizableTextArea)===null||jt===void 0?void 0:jt.textArea,dt)},blur:()=>{var dt;return(dt=Ye.current)===null||dt===void 0?void 0:dt.blur()}}});const at=ge("input",m),ot=Zm(at),[ct,Dt,$e]=mD(at,ot),[tt,Ve]=sH(oe,M),gt=VH(W??(ce==null?void 0:ce.allowClear));return ct(ie.createElement(Boe,Object.assign({autoComplete:ce==null?void 0:ce.autoComplete},me,{style:Object.assign(Object.assign({},ce==null?void 0:ce.style),ve),styles:Object.assign(Object.assign({},ce==null?void 0:ce.styles),he),disabled:Ee,allowClear:gt,className:mr($e,ot,ae,te,ce==null?void 0:ce.className),classNames:Object.assign(Object.assign(Object.assign({},J),ce==null?void 0:ce.classNames),{textarea:mr({[`${at}-sm`]:_e==="small",[`${at}-lg`]:_e==="large"},Dt,J==null?void 0:J.textarea,(a=ce==null?void 0:ce.classNames)===null||a===void 0?void 0:a.textarea),variant:mr({[`${at}-${tt}`]:Ve},c4(at,et)),affixWrapper:mr(`${at}-textarea-affix-wrapper`,{[`${at}-affix-wrapper-rtl`]:de==="rtl",[`${at}-affix-wrapper-sm`]:_e==="small",[`${at}-affix-wrapper-lg`]:_e==="large",[`${at}-textarea-show-count`]:t.showCount||((u=t.count)===null||u===void 0?void 0:u.show)},Dt)}),prefixCls:at,suffix:We&&ie.createElement("span",{className:`${at}-textarea-suffix`},Xe),ref:Ye})))}),n0=O3;n0.Group=loe;n0.Search=Roe;n0.TextArea=Uoe;n0.Password=Eoe;n0.OTP=voe;function Vz(t){return["small","middle","large"].includes(t)}function Wz(t){return t?typeof t=="number"&&!Number.isNaN(t):!1}const XH=dr.createContext({latestIndex:0}),koe=XH.Provider,Hoe=t=>{let{className:i,index:a,children:u,split:m,style:M}=t;const{latestIndex:L}=ie.useContext(XH);return u==null?null:ie.createElement(ie.Fragment,null,ie.createElement("div",{className:i,style:M},u),a<L&&m&&ie.createElement("span",{className:`${i}-split`},m))};var joe=function(t,i){var a={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&i.indexOf(u)<0&&(a[u]=t[u]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,u=Object.getOwnPropertySymbols(t);m<u.length;m++)i.indexOf(u[m])<0&&Object.prototype.propertyIsEnumerable.call(t,u[m])&&(a[u[m]]=t[u[m]]);return a};const Goe=ie.forwardRef((t,i)=>{var a,u;const{getPrefixCls:m,space:M,direction:L}=ie.useContext(lo),{size:z=(M==null?void 0:M.size)||"small",align:U,className:W,rootClassName:J,children:te,direction:ae="horizontal",prefixCls:ve,split:he,style:oe,wrap:me=!1,classNames:ge,styles:de}=t,ce=joe(t,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap","classNames","styles"]),[_e,Re]=Array.isArray(z)?z:[z,z],Ee=Vz(Re),De=Vz(_e),We=Wz(Re),Xe=Wz(_e),et=Pf(te,{keepEmpty:!0}),Ye=U===void 0&&ae==="horizontal"?"center":U,at=m("space",ve),[ot,ct,Dt]=B9(at),$e=mr(at,M==null?void 0:M.className,ct,`${at}-${ae}`,{[`${at}-rtl`]:L==="rtl",[`${at}-align-${Ye}`]:Ye,[`${at}-gap-row-${Re}`]:Ee,[`${at}-gap-col-${_e}`]:De},W,J,Dt),tt=mr(`${at}-item`,(a=ge==null?void 0:ge.item)!==null&&a!==void 0?a:(u=M==null?void 0:M.classNames)===null||u===void 0?void 0:u.item);let Ve=0;const gt=et.map((At,jt)=>{var ar,Ht;At!=null&&(Ve=jt);const Rt=At&&At.key||`${tt}-${jt}`;return ie.createElement(Hoe,{className:tt,key:Rt,index:jt,split:he,style:(ar=de==null?void 0:de.item)!==null&&ar!==void 0?ar:(Ht=M==null?void 0:M.styles)===null||Ht===void 0?void 0:Ht.item},At)}),mt=ie.useMemo(()=>({latestIndex:Ve}),[Ve]);if(et.length===0)return null;const dt={};return me&&(dt.flexWrap="wrap"),!De&&Xe&&(dt.columnGap=_e),!Ee&&We&&(dt.rowGap=Re),ot(ie.createElement("div",Object.assign({ref:i,className:$e,style:Object.assign(Object.assign(Object.assign({},dt),M==null?void 0:M.style),oe)},ce),ie.createElement(koe,{value:mt},gt)))}),YH=Goe;YH.Compact=vee;function Voe(t,i,a){return typeof a=="boolean"?a:t.length?!0:Pf(i).some(m=>m.type===PH)}const Woe=t=>{const{componentCls:i,bodyBg:a,lightSiderBg:u,lightTriggerBg:m,lightTriggerColor:M}=t;return{[`${i}-sider-light`]:{background:u,[`${i}-sider-trigger`]:{color:M,background:m},[`${i}-sider-zero-width-trigger`]:{color:M,background:m,border:`1px solid ${a}`,borderInlineStart:0}}}},Xoe=t=>{const{antCls:i,componentCls:a,colorText:u,triggerColor:m,footerBg:M,triggerBg:L,headerHeight:z,headerPadding:U,headerColor:W,footerPadding:J,triggerHeight:te,zeroTriggerHeight:ae,zeroTriggerWidth:ve,motionDurationMid:he,motionDurationSlow:oe,fontSize:me,borderRadius:ge,bodyBg:de,headerBg:ce,siderBg:_e}=t;return{[a]:Object.assign(Object.assign({display:"flex",flex:"auto",flexDirection:"column",minHeight:0,background:de,"&, *":{boxSizing:"border-box"},[`&${a}-has-sider`]:{flexDirection:"row",[`> ${a}, > ${a}-content`]:{width:0}},[`${a}-header, &${a}-footer`]:{flex:"0 0 auto"},[`${a}-sider`]:{position:"relative",minWidth:0,background:_e,transition:`all ${he}, background 0s`,"&-children":{height:"100%",marginTop:-.1,paddingTop:.1,[`${i}-menu${i}-menu-inline-collapsed`]:{width:"auto"}},"&-has-trigger":{paddingBottom:te},"&-right":{order:1},"&-trigger":{position:"fixed",bottom:0,zIndex:1,height:te,color:m,lineHeight:pn(te),textAlign:"center",background:L,cursor:"pointer",transition:`all ${he}`},"&-zero-width":{"> *":{overflow:"hidden"},"&-trigger":{position:"absolute",top:z,insetInlineEnd:t.calc(ve).mul(-1).equal(),zIndex:1,width:ve,height:ae,color:m,fontSize:t.fontSizeXL,display:"flex",alignItems:"center",justifyContent:"center",background:_e,borderStartStartRadius:0,borderStartEndRadius:ge,borderEndEndRadius:ge,borderEndStartRadius:0,cursor:"pointer",transition:`background ${oe} ease`,"&::after":{position:"absolute",inset:0,background:"transparent",transition:`all ${oe}`,content:'""'},"&:hover::after":{background:"rgba(255, 255, 255, 0.2)"},"&-right":{insetInlineStart:t.calc(ve).mul(-1).equal(),borderStartStartRadius:ge,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:ge}}}}},Woe(t)),{"&-rtl":{direction:"rtl"}}),[`${a}-header`]:{height:z,padding:U,color:W,lineHeight:pn(z),background:ce,[`${i}-menu`]:{lineHeight:"inherit"}},[`${a}-footer`]:{padding:J,color:u,fontSize:me,background:M},[`${a}-content`]:{flex:"auto",color:u,minHeight:0}}},Yoe=t=>{const{colorBgLayout:i,controlHeight:a,controlHeightLG:u,colorText:m,controlHeightSM:M,marginXXS:L,colorTextLightSolid:z,colorBgContainer:U}=t,W=u*1.25;return{colorBgHeader:"#001529",colorBgBody:i,colorBgTrigger:"#002140",bodyBg:i,headerBg:"#001529",headerHeight:a*2,headerPadding:`0 ${W}px`,headerColor:m,footerPadding:`${M}px ${W}px`,footerBg:i,siderBg:"#001529",triggerHeight:u+L*2,triggerBg:"#002140",triggerColor:z,zeroTriggerWidth:u,zeroTriggerHeight:u,lightSiderBg:U,lightTriggerBg:U,lightTriggerColor:m}},ZH=Df("Layout",t=>[Xoe(t)],Yoe,{deprecatedTokens:[["colorBgBody","bodyBg"],["colorBgHeader","headerBg"],["colorBgTrigger","triggerBg"]]});var qH=function(t,i){var a={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&i.indexOf(u)<0&&(a[u]=t[u]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,u=Object.getOwnPropertySymbols(t);m<u.length;m++)i.indexOf(u[m])<0&&Object.prototype.propertyIsEnumerable.call(t,u[m])&&(a[u[m]]=t[u[m]]);return a};function D3(t){let{suffixCls:i,tagName:a,displayName:u}=t;return m=>ie.forwardRef((L,z)=>ie.createElement(m,Object.assign({ref:z,suffixCls:i,tagName:a},L)))}const gD=ie.forwardRef((t,i)=>{const{prefixCls:a,suffixCls:u,className:m,tagName:M}=t,L=qH(t,["prefixCls","suffixCls","className","tagName"]),{getPrefixCls:z}=ie.useContext(lo),U=z("layout",a),[W,J,te]=ZH(U),ae=u?`${U}-${u}`:U;return W(ie.createElement(M,Object.assign({className:mr(a||ae,m,J,te),ref:i},L)))}),Zoe=ie.forwardRef((t,i)=>{const{direction:a}=ie.useContext(lo),[u,m]=ie.useState([]),{prefixCls:M,className:L,rootClassName:z,children:U,hasSider:W,tagName:J,style:te}=t,ae=qH(t,["prefixCls","className","rootClassName","children","hasSider","tagName","style"]),ve=Oh(ae,["suffixCls"]),{getPrefixCls:he,layout:oe}=ie.useContext(lo),me=he("layout",M),ge=Voe(u,U,W),[de,ce,_e]=ZH(me),Re=mr(me,{[`${me}-has-sider`]:ge,[`${me}-rtl`]:a==="rtl"},oe==null?void 0:oe.className,L,z,ce,_e),Ee=ie.useMemo(()=>({siderHook:{addSider:De=>{m(We=>[].concat(on(We),[De]))},removeSider:De=>{m(We=>We.filter(Xe=>Xe!==De))}}}),[]);return de(ie.createElement(LH.Provider,{value:Ee},ie.createElement(J,Object.assign({ref:i,className:Re,style:Object.assign(Object.assign({},oe==null?void 0:oe.style),te)},ve),U)))}),qoe=D3({tagName:"div",displayName:"Layout"})(Zoe),Koe=D3({suffixCls:"header",tagName:"header",displayName:"Header"})(gD),Joe=D3({suffixCls:"footer",tagName:"footer",displayName:"Footer"})(gD),Qoe=D3({suffixCls:"content",tagName:"main",displayName:"Content"})(gD),km=qoe;km.Header=Koe;km.Footer=Joe;km.Content=Qoe;km.Sider=PH;km._InternalSiderContext=P3;let yc=null,Vv=t=>t(),pC=[],mC={};function Xz(){const{getContainer:t,duration:i,rtl:a,maxCount:u,top:m}=mC,M=(t==null?void 0:t())||document.body;return{getContainer:()=>M,duration:i,rtl:a,maxCount:u,top:m}}const $oe=dr.forwardRef((t,i)=>{const{messageConfig:a,sync:u}=t,{getPrefixCls:m}=ie.useContext(lo),M=mC.prefixCls||m("message"),L=ie.useContext(Are),[z,U]=D9(Object.assign(Object.assign(Object.assign({},a),{prefixCls:M}),L.message));return dr.useImperativeHandle(i,()=>{const W=Object.assign({},z);return Object.keys(W).forEach(J=>{W[J]=function(){return u(),z[J].apply(z,arguments)}}),{instance:W,sync:u}}),U}),eae=dr.forwardRef((t,i)=>{const[a,u]=dr.useState(Xz),m=()=>{u(Xz)};dr.useEffect(m,[]);const M=kQ(),L=M.getRootPrefixCls(),z=M.getIconPrefixCls(),U=M.getTheme(),W=dr.createElement($oe,{ref:i,sync:m,messageConfig:a});return dr.createElement(jQ,{prefixCls:L,iconPrefixCls:z,theme:U},M.holderRender?M.holderRender(W):W)});function b3(){if(!yc){const t=document.createDocumentFragment(),i={fragment:t};yc=i,Vv(()=>{b9(dr.createElement(eae,{ref:a=>{const{instance:u,sync:m}=a||{};Promise.resolve().then(()=>{!i.instance&&u&&(i.instance=u,i.sync=m,b3())})}}),t)});return}yc.instance&&(pC.forEach(t=>{const{type:i,skipped:a}=t;if(!a)switch(i){case"open":{Vv(()=>{const u=yc.instance.open(Object.assign(Object.assign({},mC),t.config));u==null||u.then(t.resolve),t.setCloseFn(u)});break}case"destroy":Vv(()=>{yc==null||yc.instance.destroy(t.key)});break;default:Vv(()=>{var u;const m=(u=yc.instance)[i].apply(u,on(t.args));m==null||m.then(t.resolve),t.setCloseFn(m)})}}),pC=[])}function tae(t){mC=Object.assign(Object.assign({},mC),t),Vv(()=>{var i;(i=yc==null?void 0:yc.sync)===null||i===void 0||i.call(yc)})}function rae(t){const i=JO(a=>{let u;const m={type:"open",config:t,resolve:a,setCloseFn:M=>{u=M}};return pC.push(m),()=>{u?Vv(()=>{u()}):m.skipped=!0}});return b3(),i}function nae(t,i){const a=JO(u=>{let m;const M={type:t,args:i,resolve:u,setCloseFn:L=>{m=L}};return pC.push(M),()=>{m?Vv(()=>{m()}):M.skipped=!0}});return b3(),a}const iae=t=>{pC.push({type:"destroy",key:t}),b3()},oae=["success","info","warning","error","loading"],aae={open:rae,destroy:iae,config:tae,useMessage:W$,_InternalPanelDoNotUseOrYouWillBeFired:B$},Nw=aae;oae.forEach(t=>{Nw[t]=function(){for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return nae(t,a)}});var sae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"},lae=function(i,a){return ie.createElement(Ka,Sn({},i,{ref:a,icon:sae}))},C5=ie.forwardRef(lae);const uae=t=>{const i=t!=null&&t.algorithm?aC(t.algorithm):aC(SC),a=Object.assign(Object.assign({},ax),t==null?void 0:t.token);return w7(a,{override:t==null?void 0:t.token},i,ZO)};function cae(t){const{sizeUnit:i,sizeStep:a}=t,u=a-2;return{sizeXXL:i*(u+10),sizeXL:i*(u+6),sizeLG:i*(u+2),sizeMD:i*(u+2),sizeMS:i*(u+1),size:i*u,sizeSM:i*u,sizeXS:i*(u-1),sizeXXS:i*(u-1)}}const hae=(t,i)=>{const a=i??SC(t),u=a.fontSizeSM,m=a.controlHeight-4;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},a),cae(i??t)),G7(u)),{controlHeight:m}),j7(Object.assign(Object.assign({},a),{controlHeight:m})))},Fd=(t,i)=>new bs(t).setAlpha(i).toRgbString(),_1=(t,i)=>new bs(t).lighten(i).toHexString(),fae=t=>{const i=qd(t,{theme:"dark"});return{1:i[0],2:i[1],3:i[2],4:i[3],5:i[6],6:i[5],7:i[4],8:i[6],9:i[5],10:i[4]}},dae=(t,i)=>{const a=t||"#000",u=i||"#fff";return{colorBgBase:a,colorTextBase:u,colorText:Fd(u,.85),colorTextSecondary:Fd(u,.65),colorTextTertiary:Fd(u,.45),colorTextQuaternary:Fd(u,.25),colorFill:Fd(u,.18),colorFillSecondary:Fd(u,.12),colorFillTertiary:Fd(u,.08),colorFillQuaternary:Fd(u,.04),colorBgElevated:_1(a,12),colorBgContainer:_1(a,8),colorBgLayout:_1(a,0),colorBgSpotlight:_1(a,26),colorBgBlur:Fd(u,.04),colorBorder:_1(a,26),colorBorderSecondary:_1(a,19)}},pae=(t,i)=>{const a=Object.keys(XO).map(m=>{const M=qd(t[m],{theme:"dark"});return new Array(10).fill(1).reduce((L,z,U)=>(L[`${m}-${U+1}`]=M[U],L[`${m}${U+1}`]=M[U],L),{})}).reduce((m,M)=>(m=Object.assign(Object.assign({},m),M),m),{}),u=i??SC(t);return Object.assign(Object.assign(Object.assign({},u),a),H7(t,{generateColorPalettes:fae,generateNeutralColorPalettes:dae}))};function mae(){const[t,i,a]=Ec();return{theme:t,token:i,hashId:a}}const gae={defaultConfig:uC,defaultSeed:uC.token,useToken:mae,defaultAlgorithm:SC,darkAlgorithm:pae,compactAlgorithm:hae,getDesignToken:uae};var ww={},x4=function(t,i){return x4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var m in u)Object.prototype.hasOwnProperty.call(u,m)&&(a[m]=u[m])},x4(t,i)};function KH(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");x4(t,i);function a(){this.constructor=t}t.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}var BE=function(){return BE=Object.assign||function(i){for(var a,u=1,m=arguments.length;u<m;u++){a=arguments[u];for(var M in a)Object.prototype.hasOwnProperty.call(a,M)&&(i[M]=a[M])}return i},BE.apply(this,arguments)};function JH(t,i){var a={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&i.indexOf(u)<0&&(a[u]=t[u]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,u=Object.getOwnPropertySymbols(t);m<u.length;m++)i.indexOf(u[m])<0&&Object.prototype.propertyIsEnumerable.call(t,u[m])&&(a[u[m]]=t[u[m]]);return a}function QH(t,i,a,u){var m=arguments.length,M=m<3?i:u===null?u=Object.getOwnPropertyDescriptor(i,a):u,L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(t,i,a,u);else for(var z=t.length-1;z>=0;z--)(L=t[z])&&(M=(m<3?L(M):m>3?L(i,a,M):L(i,a))||M);return m>3&&M&&Object.defineProperty(i,a,M),M}function $H(t,i){return function(a,u){i(a,u,t)}}function vae(t,i,a,u,m,M){function L(ge){if(ge!==void 0&&typeof ge!="function")throw new TypeError("Function expected");return ge}for(var z=u.kind,U=z==="getter"?"get":z==="setter"?"set":"value",W=!i&&t?u.static?t:t.prototype:null,J=i||(W?Object.getOwnPropertyDescriptor(W,u.name):{}),te,ae=!1,ve=a.length-1;ve>=0;ve--){var he={};for(var oe in u)he[oe]=oe==="access"?{}:u[oe];for(var oe in u.access)he.access[oe]=u.access[oe];he.addInitializer=function(ge){if(ae)throw new TypeError("Cannot add initializers after decoration has completed");M.push(L(ge||null))};var me=(0,a[ve])(z==="accessor"?{get:J.get,set:J.set}:J[U],he);if(z==="accessor"){if(me===void 0)continue;if(me===null||typeof me!="object")throw new TypeError("Object expected");(te=L(me.get))&&(J.get=te),(te=L(me.set))&&(J.set=te),(te=L(me.init))&&m.unshift(te)}else(te=L(me))&&(z==="field"?m.unshift(te):J[U]=te)}W&&Object.defineProperty(W,u.name,J),ae=!0}function yae(t,i,a){for(var u=arguments.length>2,m=0;m<i.length;m++)a=u?i[m].call(t,a):i[m].call(t);return u?a:void 0}function xae(t){return typeof t=="symbol"?t:"".concat(t)}function Aae(t,i,a){return typeof i=="symbol"&&(i=i.description?"[".concat(i.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:a?"".concat(a," ",i):i})}function ej(t,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,i)}function tj(t,i,a,u){function m(M){return M instanceof a?M:new a(function(L){L(M)})}return new(a||(a=Promise))(function(M,L){function z(J){try{W(u.next(J))}catch(te){L(te)}}function U(J){try{W(u.throw(J))}catch(te){L(te)}}function W(J){J.done?M(J.value):m(J.value).then(z,U)}W((u=u.apply(t,i||[])).next())})}function rj(t,i){var a={label:0,sent:function(){if(M[0]&1)throw M[1];return M[1]},trys:[],ops:[]},u,m,M,L;return L={next:z(0),throw:z(1),return:z(2)},typeof Symbol=="function"&&(L[Symbol.iterator]=function(){return this}),L;function z(W){return function(J){return U([W,J])}}function U(W){if(u)throw new TypeError("Generator is already executing.");for(;L&&(L=0,W[0]&&(a=0)),a;)try{if(u=1,m&&(M=W[0]&2?m.return:W[0]?m.throw||((M=m.return)&&M.call(m),0):m.next)&&!(M=M.call(m,W[1])).done)return M;switch(m=0,M&&(W=[W[0]&2,M.value]),W[0]){case 0:case 1:M=W;break;case 4:return a.label++,{value:W[1],done:!1};case 5:a.label++,m=W[1],W=[0];continue;case 7:W=a.ops.pop(),a.trys.pop();continue;default:if(M=a.trys,!(M=M.length>0&&M[M.length-1])&&(W[0]===6||W[0]===2)){a=0;continue}if(W[0]===3&&(!M||W[1]>M[0]&&W[1]<M[3])){a.label=W[1];break}if(W[0]===6&&a.label<M[1]){a.label=M[1],M=W;break}if(M&&a.label<M[2]){a.label=M[2],a.ops.push(W);break}M[2]&&a.ops.pop(),a.trys.pop();continue}W=i.call(t,a)}catch(J){W=[6,J],m=0}finally{u=M=0}if(W[0]&5)throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}}var F3=Object.create?function(t,i,a,u){u===void 0&&(u=a);var m=Object.getOwnPropertyDescriptor(i,a);(!m||("get"in m?!i.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(t,u,m)}:function(t,i,a,u){u===void 0&&(u=a),t[u]=i[a]};function nj(t,i){for(var a in t)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&F3(i,t,a)}function zE(t){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&t[i],u=0;if(a)return a.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&u>=t.length&&(t=void 0),{value:t&&t[u++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function vD(t,i){var a=typeof Symbol=="function"&&t[Symbol.iterator];if(!a)return t;var u=a.call(t),m,M=[],L;try{for(;(i===void 0||i-- >0)&&!(m=u.next()).done;)M.push(m.value)}catch(z){L={error:z}}finally{try{m&&!m.done&&(a=u.return)&&a.call(u)}finally{if(L)throw L.error}}return M}function ij(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(vD(arguments[i]));return t}function oj(){for(var t=0,i=0,a=arguments.length;i<a;i++)t+=arguments[i].length;for(var u=Array(t),m=0,i=0;i<a;i++)for(var M=arguments[i],L=0,z=M.length;L<z;L++,m++)u[m]=M[L];return u}function aj(t,i,a){if(a||arguments.length===2)for(var u=0,m=i.length,M;u<m;u++)(M||!(u in i))&&(M||(M=Array.prototype.slice.call(i,0,u)),M[u]=i[u]);return t.concat(M||Array.prototype.slice.call(i))}function cx(t){return this instanceof cx?(this.v=t,this):new cx(t)}function sj(t,i,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u=a.apply(t,i||[]),m,M=[];return m={},L("next"),L("throw"),L("return"),m[Symbol.asyncIterator]=function(){return this},m;function L(ae){u[ae]&&(m[ae]=function(ve){return new Promise(function(he,oe){M.push([ae,ve,he,oe])>1||z(ae,ve)})})}function z(ae,ve){try{U(u[ae](ve))}catch(he){te(M[0][3],he)}}function U(ae){ae.value instanceof cx?Promise.resolve(ae.value.v).then(W,J):te(M[0][2],ae)}function W(ae){z("next",ae)}function J(ae){z("throw",ae)}function te(ae,ve){ae(ve),M.shift(),M.length&&z(M[0][0],M[0][1])}}function lj(t){var i,a;return i={},u("next"),u("throw",function(m){throw m}),u("return"),i[Symbol.iterator]=function(){return this},i;function u(m,M){i[m]=t[m]?function(L){return(a=!a)?{value:cx(t[m](L)),done:!1}:M?M(L):L}:M}}function uj(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t[Symbol.asyncIterator],a;return i?i.call(t):(t=typeof zE=="function"?zE(t):t[Symbol.iterator](),a={},u("next"),u("throw"),u("return"),a[Symbol.asyncIterator]=function(){return this},a);function u(M){a[M]=t[M]&&function(L){return new Promise(function(z,U){L=t[M](L),m(z,U,L.done,L.value)})}}function m(M,L,z,U){Promise.resolve(U).then(function(W){M({value:W,done:z})},L)}}function cj(t,i){return Object.defineProperty?Object.defineProperty(t,"raw",{value:i}):t.raw=i,t}var wae=Object.create?function(t,i){Object.defineProperty(t,"default",{enumerable:!0,value:i})}:function(t,i){t.default=i};function hj(t){if(t&&t.__esModule)return t;var i={};if(t!=null)for(var a in t)a!=="default"&&Object.prototype.hasOwnProperty.call(t,a)&&F3(i,t,a);return wae(i,t),i}function fj(t){return t&&t.__esModule?t:{default:t}}function dj(t,i,a,u){if(a==="a"&&!u)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?t!==i||!u:!i.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?u:a==="a"?u.call(t):u?u.value:i.get(t)}function pj(t,i,a,u,m){if(u==="m")throw new TypeError("Private method is not writable");if(u==="a"&&!m)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?t!==i||!m:!i.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return u==="a"?m.call(t,a):m?m.value=a:i.set(t,a),a}function mj(t,i){if(i===null||typeof i!="object"&&typeof i!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?i===t:t.has(i)}function gj(t,i,a){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var u;if(a){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");u=i[Symbol.asyncDispose]}if(u===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");u=i[Symbol.dispose]}if(typeof u!="function")throw new TypeError("Object not disposable.");t.stack.push({value:i,dispose:u,async:a})}else a&&t.stack.push({async:!0});return i}var Cae=typeof SuppressedError=="function"?SuppressedError:function(t,i,a){var u=new Error(a);return u.name="SuppressedError",u.error=t,u.suppressed=i,u};function vj(t){function i(u){t.error=t.hasError?new Cae(u,t.error,"An error was suppressed during disposal."):u,t.hasError=!0}function a(){for(;t.stack.length;){var u=t.stack.pop();try{var m=u.dispose&&u.dispose.call(u.value);if(u.async)return Promise.resolve(m).then(a,function(M){return i(M),a()})}catch(M){i(M)}}if(t.hasError)throw t.error}return a()}const _ae={__extends:KH,__assign:BE,__rest:JH,__decorate:QH,__param:$H,__metadata:ej,__awaiter:tj,__generator:rj,__createBinding:F3,__exportStar:nj,__values:zE,__read:vD,__spread:ij,__spreadArrays:oj,__spreadArray:aj,__await:cx,__asyncGenerator:sj,__asyncDelegator:lj,__asyncValues:uj,__makeTemplateObject:cj,__importStar:hj,__importDefault:fj,__classPrivateFieldGet:dj,__classPrivateFieldSet:pj,__classPrivateFieldIn:mj,__addDisposableResource:gj,__disposeResources:vj},Mae=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:gj,get __assign(){return BE},__asyncDelegator:lj,__asyncGenerator:sj,__asyncValues:uj,__await:cx,__awaiter:tj,__classPrivateFieldGet:dj,__classPrivateFieldIn:mj,__classPrivateFieldSet:pj,__createBinding:F3,__decorate:QH,__disposeResources:vj,__esDecorate:vae,__exportStar:nj,__extends:KH,__generator:rj,__importDefault:fj,__importStar:hj,__makeTemplateObject:cj,__metadata:ej,__param:$H,__propKey:xae,__read:vD,__rest:JH,__runInitializers:yae,__setFunctionName:Aae,__spread:ij,__spreadArray:aj,__spreadArrays:oj,__values:zE,default:_ae},Symbol.toStringTag,{value:"Module"})),xo=UW(Mae);window._hmt_private||(window._hmt=window._hmt||[],function(){var t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?b97569d26a525941d8d163729d284198";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i)}());var Uu={},dl={},zs={},_5,Yz;function Dh(){return Yz||(Yz=1,_5=function(i,a,u,m){var M=u?u.call(m,i,a):void 0;if(M!==void 0)return!!M;if(i===a)return!0;if(typeof i!="object"||!i||typeof a!="object"||!a)return!1;var L=Object.keys(i),z=Object.keys(a);if(L.length!==z.length)return!1;for(var U=Object.prototype.hasOwnProperty.bind(a),W=0;W<L.length;W++){var J=L[W];if(!U(J))return!1;var te=i[J],ae=a[J];if(M=u?u.call(m,te,ae,J):void 0,M===!1||M===void 0&&te!==ae)return!1}return!0}),_5}Object.defineProperty(zs,"__esModule",{value:!0});zs.toggleMethods=zs.unregisterEvents=zs.registerEvents=void 0;var Sae=xo,A4=Sae.__importDefault(Dh());function w4(t,i,a){a&&i&&i.addEventListener&&(t.registeredEvents={},a.forEach(function(u){var m="on"+u.substr(0,1).toUpperCase()+u.substr(1);t.props[m]&&typeof t.props[m]=="function"&&(i.addEventListener(u,t.props[m]),t.registeredEvents[u]=t.props[m])}))}zs.registerEvents=w4;function C4(t,i){t.registeredEvents&&i&&i.removeEventListener&&(Object.keys(t.registeredEvents).forEach(function(a){i.removeEventListener(a,t.registeredEvents[a])}),t.registeredEvents=null)}zs.unregisterEvents=C4;function _4(t,i,a,u){a&&i&&Object.keys(a).forEach(function(m){(u===void 0&&t.props[m]!==void 0||u!==void 0&&!A4.default(t.props[m],u[m]))&&(t.props[m]?i&&i[a[m][0]]():i&&i[a[m][1]]())})}zs.toggleMethods=_4;function Tae(t,i){var a=t.prototype.getInstance,u=t.prototype.componentDidMount,m=t.prototype.componentDidUpdate;return a&&i&&Object.keys(i).length>0&&(t.prototype.componentDidMount=function(){u&&u.call(this),_4(this,a(this),i)},t.prototype.componentDidUpdate=function(M,L){_4(this,a(this),i,M),m&&m.call(this,M,L)}),t}function Eae(t,i){var a=t.prototype.getInstance,u=t.prototype.componentDidUpdate,m=t.prototype.componentDidMount,M=t.prototype.componentWillUnmount;return i&&i.length>0&&(t.prototype.componentDidMount=function(){m&&m.call(this),w4(this,a(this),i)},t.prototype.componentDidUpdate=function(L,z){A4.default(this.props,L)||C4(this,a(this)),u&&u.call(this,L,z),A4.default(this.props,L)||w4(this,a(this),i)},t.prototype.componentWillUnmount=function(){C4(this,a(this)),M&&M.call(this)}),t}function Iae(t,i,a){var u=Tae(t,a);return u=Eae(u,i),u}zs.default=Iae;var yD={};Object.defineProperty(yD,"__esModule",{value:!0});var Rae=xo,Lae=ie,Pae=function(t){Rae.__extends(i,t);function i(){var a=t!==null&&t.apply(this,arguments)||this;return a.options=[],a}return i.prototype.getMap=function(){return this.props.map||this.context.map},i.prototype.getInstance=function(a){return a.instance},i.prototype.getOptions=function(a){a===void 0&&(a=this.props);var u={};return this.options.map(function(m){a[m]!==void 0&&(u[m]=a[m])}),u},i}(Lae.PureComponent);yD.default=Pae;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var i=zs;Object.defineProperty(t,"Wrapper",{enumerable:!0,get:function(){return i.default}});var a=yD;Object.defineProperty(t,"Component",{enumerable:!0,get:function(){return a.default}})})(dl);var hT={},Zz;function yj(){if(Zz)return hT;Zz=1,Object.defineProperty(hT,"__esModule",{value:!0});function t(i){return Object.prototype.toString.call(i)==="[object String]"}return hT.default=t,hT}var N3={},fT={},qz;function xj(){if(qz)return fT;qz=1,Object.defineProperty(fT,"__esModule",{value:!0});function t(i){if(typeof i=="string")return i;if(i)return i.displayName||i.name||"Component"}return fT.default=t,fT}Object.defineProperty(N3,"__esModule",{value:!0});var UE=xo,M5=UE.__importStar(ie),Oae=UE.__importDefault(xj());N3.default=function(t){return function(i){var a;return a=function(u){UE.__extends(m,u);function m(M){var L=u.call(this,M)||this;return L.state={loaded:L.isLoadReady()},L.loadJSAPI=L.loadJSAPI.bind(L),L.handleLoaded=L.handleLoaded.bind(L),L}return m.prototype.isLoadReady=function(){return!!(window.BMapGL&&window.BMapGL.Map)},m.prototype.componentDidMount=function(){if(!this.isLoadReady()){if(!t.ak)throw new TypeError("MapApiLoaderHOC: ak is required");this.loadJSAPI()}},m.prototype.componentWillUnmount=function(){this.apiTimer&&clearTimeout(this.apiTimer),this.loadedTimer&&clearTimeout(this.loadedTimer)},m.prototype.loadJSAPI=function(){var M=this;if(this.isLoadReady()){this.handleLoaded();return}if(window.loadingMap)this.apiTimer=window.setTimeout(function(){M.loadJSAPI()},300);else if(!window.MapApiLoaderCallback){window.loadingMap=!0,window.MapApiLoaderCallback=function(){delete window.loadingMap,delete window.MapApiLoaderCallback};var L=t.ak,z=t.booter,U=document.createElement("script");U.type="text/javascript",U.src="//api.map.baidu.com/api?type=webgl&v=1.0&ak="+L+"&callback=MapApiLoaderCallback",z&&(window.BMAP_AUTHENTIC_KEY=L,U.src=z),document.body.appendChild(U),this.loadedTimer=window.setTimeout(function(){M.handleLoaded()},300)}},m.prototype.handleLoaded=function(){var M=this;if(!this.isLoadReady()){this.loadedTimer=window.setTimeout(function(){M.handleLoaded()},300);return}this.setState({loaded:!0})},m.prototype.render=function(){var M=this.state.loaded;return M?M5.default.createElement(i,UE.__assign({},this.props)):M5.default.createElement("div",null,"loading...")},m}(M5.Component),a.displayName="MapApiLoaderHOC("+Oae.default(i)+")",a}};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MapContext=void 0;var i=xo,a=i.__importDefault(ie),u=dl,m=i.__importDefault(zs),M=i.__importDefault(Dh()),L=i.__importDefault(yj()),z=["click","dblclick","rightclick","rightdblclick","maptypechange","mousemove","mouseover","mouseout","movestart","moving","moveend","zoomstart","zoomend","addoverlay","addcontrol","removecontrol","removeoverlay","clearoverlays","dragstart","dragging","dragend","addtilelayer","removetilelayer","load","resize","hotspotclick","hotspotover","hotspotout","tilesloaded","touchstart","touchmove","touchend","longpress"],U={enableScrollWheelZoom:["enableScrollWheelZoom","disableScrollWheelZoom"],enableDragging:["enableDragging","disableDragging"],enableDoubleClickZoom:["enableDoubleClickZoom","disableDoubleClickZoom"],enableKeyboard:["enableKeyboard","disableKeyboard"],enableInertialDragging:["enableInertialDragging","disableInertialDragging"],enableContinuousZoom:["enableContinuousZoom","disableContinuousZoom"],enablePinchToZoom:["enablePinchToZoom","disablePinchToZoom"],enableRotate:["enableRotate","disableRotate"],enableTilt:["enableTilt","disableTilt"],enableAutoResize:["enableAutoResize","disableAutoResize"]};t.MapContext=a.default.createContext({map:void 0});var W=function(te){i.__extends(ae,te);function ae(ve){var he=te.call(this,ve)||this;return he.el=a.default.createRef(),he.options=["minZoom","maxZoom","mapType","backgroundColor","displayOptions"],he}return ae.prototype.componentDidMount=function(){this.initialize(),this.forceUpdate()},ae.prototype.componentDidUpdate=function(ve){var he=ve.center,oe=ve.zoom,me=this.props,ge=me.center,de=me.zoom,ce=!!ge&&!M.default(he,ge),_e=!!(de&&!M.default(oe,de)),Re;if(L.default(ge))Re=ge;else{var Ee=ge,De=Ee.lng,We=Ee.lat;Re=new BMapGL.Point(De,We)}ce&&_e?this.map.centerAndZoom(Re,de):ce?this.map.setCenter(Re):_e&&this.map.setZoom(de)},ae.prototype.componentWillUnmount=function(){this.map&&(this.map.destroy(),this.instance=this.map=void 0)},ae.prototype.initialize=function(){if(!this.map){var ve=Object.assign({},this.props.defaultOptions,this.getOptions());ve.mapType&&(ve.mapType=ve.mapType==="normal"?BMAP_NORMAL_MAP:ve.mapType,ve.mapType=ve.mapType==="earth"?BMAP_EARTH_MAP:ve.mapType),this.props.mapStyleV2&&(ve.style=this.props.mapStyleV2);var he=new BMapGL.Map(this.el.current,ve);if(this.map=he,this.instance=he,L.default(this.props.center))he.centerAndZoom(this.props.center,this.props.zoom);else{var oe=this.props.center,me=oe.lng,ge=oe.lat,de=new BMapGL.Point(me,ge);he.centerAndZoom(de,this.props.zoom)}this.props.heading&&he.setHeading(this.props.heading),this.props.tilt&&he.setTilt(this.props.tilt)}},ae.prototype.renderChildren=function(ve,he){var oe=this;if(!(!ve||!he))return a.default.Children.map(ve,function(me){return me?typeof me.type=="string"||!me.props?me:a.default.cloneElement(me,{map:he},oe.renderChildren(me.props.children,he)):null})},ae.prototype.render=function(){return a.default.createElement("div",{style:this.props.style},a.default.createElement("div",{ref:this.el,className:this.props.className,style:{height:"100%"}},"加载地图中..."),a.default.createElement(t.MapContext.Provider,{value:{map:this.map}},this.renderChildren(this.props.children,this.map)))},ae}(u.Component);W.defaultProps={center:{lng:116.404449,lat:39.914889},zoom:12,defaultOptions:{},style:{position:"relative",height:"360px"}},t.default=m.default(W,z,U);var J=N3;Object.defineProperty(t,"MapApiLoaderHOC",{enumerable:!0,get:function(){return J.default}})})(Uu);var xD={},dT={},Kz;function Cx(){if(Kz)return dT;Kz=1,Object.defineProperty(dT,"__esModule",{value:!0});var t=xo,i=dl,a=t.__importDefault(Dh()),u=Uu,m=function(M){t.__extends(L,M);function L(z){var U=M.call(this,z)||this;return U.options=["anchor","offset"],U}return L.prototype.componentDidUpdate=function(z){if(!this.map){this.initialize();return}var U=this.props,W=U.anchor,J=U.offset,te=z.anchor,ae=z.offset,ve=!a.default(W,te),he=!a.default(J,ae);W&&ve&&this.control.setAnchor(W),J&&he&&this.control.setOffset(J)},L.prototype.componentDidMount=function(){this.initialize()},L.prototype.componentWillUnmount=function(){this.destroy()},L.prototype.destroy=function(){this.control&&this.map&&!this.map._destroyed&&(this.map.removeControl(this.control),this.control=null)},L.prototype.initialize=function(){var z=this.map=this.getMap();z&&(this.destroy(),this.control=this.getControl(),z.addControl(this.control))},L.prototype.getControl=function(){throw new Error("Method getControl not implemented.")},L.contextType=u.MapContext,L}(i.Component);return dT.default=m,dT}Object.defineProperty(xD,"__esModule",{value:!0});var Aj=xo,Dae=Aj.__importDefault(Cx()),bae=function(t){Aj.__extends(i,t);function i(a){return t.call(this,a)||this}return i.prototype.getControl=function(){return new BMapGL.MapTypeControl(this.getOptions())},i.prototype.render=function(){return null},i}(Dae.default);xD.default=bae;var AD={};Object.defineProperty(AD,"__esModule",{value:!0});var wj=xo,Fae=wj.__importDefault(Cx()),Nae=function(t){wj.__extends(i,t);function i(a){return t.call(this,a)||this}return i.prototype.getControl=function(){return new BMapGL.ScaleControl(this.getOptions())},i.prototype.render=function(){return null},i}(Fae.default);AD.default=Nae;var wD={};Object.defineProperty(wD,"__esModule",{value:!0});var Cj=xo,Bae=Cj.__importDefault(Cx()),zae=function(t){Cj.__extends(i,t);function i(a){return t.call(this,a)||this}return i.prototype.getControl=function(){return new BMapGL.ZoomControl(this.getOptions())},i.prototype.render=function(){return null},i}(Bae.default);wD.default=zae;var CD={};Object.defineProperty(CD,"__esModule",{value:!0});var _j=xo,Uae=_j.__importDefault(Cx()),kae=function(t){_j.__extends(i,t);function i(a){return t.call(this,a)||this}return i.prototype.getControl=function(){return new BMapGL.NavigationControl3D(this.getOptions())},i.prototype.render=function(){return null},i}(Uae.default);CD.default=kae;var _D={};Object.defineProperty(_D,"__esModule",{value:!0});var Mj=xo,Hae=Mj.__importDefault(Cx()),jae=function(t){Mj.__extends(i,t);function i(a){return t.call(this,a)||this}return i.prototype.getControl=function(){return new BMapGL.CityListControl(this.getOptions())},i.prototype.render=function(){return null},i}(Hae.default);_D.default=jae;var MD={};Object.defineProperty(MD,"__esModule",{value:!0});var Sj=xo,Gae=Sj.__importDefault(Cx()),Vae=function(t){Sj.__extends(i,t);function i(a){return t.call(this,a)||this}return i.prototype.getControl=function(){var a={offset:new BMapGL.Size(30,30),anchor:BMAP_ANCHOR_BOTTOM_RIGHT},u=new BMapGL.PanoramaControl(this.getOptions());return u.setOffset(this.getOptions().offset||a.offset),u.setAnchor(this.getOptions().anchor||a.anchor),u},i.prototype.render=function(){return null},i}(Gae.default);MD.default=Vae;var SD={};Object.defineProperty(SD,"__esModule",{value:!0});var TD=xo,Wae=dl,Xae=TD.__importDefault(zs),M1=TD.__importDefault(Dh()),Yae=Uu;function Zae(){for(var t="//mapopen.bj.bcebos.com/cms/react-bmap/markers_new2x_fbb9e99.png",i={simple_red:new BMapGL.Icon(t,new BMapGL.Size(21,33),{imageOffset:new BMapGL.Size(227,189),imageSize:new BMapGL.Size(300,300)}),simple_blue:new BMapGL.Icon(t,new BMapGL.Size(21,33),{imageOffset:new BMapGL.Size(227,225),imageSize:new BMapGL.Size(300,300)}),loc_red:new BMapGL.Icon(t,new BMapGL.Size(23,35),{imageOffset:new BMapGL.Size(200,189),imageSize:new BMapGL.Size(300,300)}),loc_blue:new BMapGL.Icon(t,new BMapGL.Size(23,35),{imageOffset:new BMapGL.Size(200,225),imageSize:new BMapGL.Size(300,300)}),start:new BMapGL.Icon(t,new BMapGL.Size(25,40),{imageOffset:new BMapGL.Size(200,139),imageSize:new BMapGL.Size(300,300)}),end:new BMapGL.Icon(t,new BMapGL.Size(25,40),{imageOffset:new BMapGL.Size(225,139),imageSize:new BMapGL.Size(300,300)}),location:new BMapGL.Icon(t,new BMapGL.Size(14,20),{imageOffset:new BMapGL.Size(124,233),imageSize:new BMapGL.Size(300,300)})},a=1;a<=10;a++)i["red"+a]=new BMapGL.Icon(t,new BMapGL.Size(42/2,66/2),{imageOffset:new BMapGL.Size(42/2*(a-1),0),imageSize:new BMapGL.Size(600/2,600/2)});for(var a=1;a<=10;a++)i["blue"+a]=new BMapGL.Icon(t,new BMapGL.Size(42/2,66/2),{imageOffset:new BMapGL.Size(42/2*(a-1),132/2),imageSize:new BMapGL.Size(600/2,600/2)});return i}var qae=["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","infowindowclose","infowindowopen","dragstart","dragging","dragend","rightclick"],Kae={enableMassClear:["enableMassClear","disableMassClear"],enableDragging:["enableDragging","disableDragging"]},Tj=function(t){TD.__extends(i,t);function i(a){var u=t.call(this,a)||this;return u.options=["offset","icon","enableMassClear","enableDragging","enableClicking","raiseOnDrag","draggingCursor","rotation","title"],u.defaultIcons=Zae(),u}return i.prototype.componentDidUpdate=function(a){if(!this.map){this.initialize();return}var u=this.props,m=u.position,M=u.icon,L=u.autoViewport,z=u.offset,U=u.isTop,W=u.rotation,J=a.position,te=a.icon,ae=a.autoViewport,ve=a.offset,he=a.isTop,oe=a.rotation,me=m&&!M1.default(m,J),ge=W&&!M1.default(W,oe),de=!!(M&&!M1.default(M,te)),ce=!M1.default(L,ae),_e=!!(z&&!M1.default(z,ve)),Re=!M1.default(U,he),Ee=this.parsePosition(m);if(me&&this.marker.setPosition(Ee),ge&&this.marker.setRotation(Number(W)),de){var De=this.parseIcon(M);this.marker.setIcon(De)}_e&&this.marker.setOffset(z),Re&&this.marker.setTop(!!U),L&&(me||ce)&&this.map.setCenter(Ee)},i.prototype.componentDidMount=function(){this.initialize()},i.prototype.componentWillUnmount=function(){this.destroy()},i.prototype.destroy=function(){this.marker&&this.map&&!this.map._destroyed&&(this.map.removeOverlay(this.marker),this.instance=this.marker=void 0)},i.prototype.initialize=function(){var a=this.map=this.getMap();if(a){this.destroy();var u=this.parseIcon(this.props.icon),m=this.parsePosition(this.props.position),M=this.getOptions();M.icon=u,this.instance=this.marker=new BMapGL.Marker(m,M),this.props.isTop&&this.marker.setTop(!0),a.addOverlay(this.marker),this.props.autoViewport&&a.setCenter(m)}},i.prototype.parsePosition=function(a){var u=this.props.coordType==="bd09mc",m;return a instanceof Array?m=new BMapGL.Point(a[0],a[1]):a instanceof BMapGL.Point?m=a:m=new BMapGL.Point(a.lng,a.lat),u&&(m=BMapGL.Projection.convertMC2LL(m)),m},i.prototype.parseIcon=function(a){var u;return a&&a instanceof BMapGL.Icon?u=a:a&&this.defaultIcons[a]?u=this.defaultIcons[a]:u=this.defaultIcons.simple_red,u},i.prototype.render=function(){return null},i.contextType=Yae.MapContext,i}(Wae.Component);Tj.defaultProps={icon:"simple_red"};SD.default=Xae.default(Tj,qae,Kae);var ED={},pT={},Jz;function ID(){if(Jz)return pT;Jz=1,Object.defineProperty(pT,"__esModule",{value:!0});var t=xo,i=dl,a=t.__importDefault(zs),u=t.__importDefault(Dh()),m=Uu,M=["click","dblclick","rightclick","mousedown","mouseup","mouseout","mouseover","mousemove","remove","lineupdate"],L={enableMassClear:["enableMassClear","disableMassClear"],enableEditing:["enableEditing","disableEditing"]},z=function(U){t.__extends(W,U);function W(J){var te=U.call(this,J)||this;return te.options=["strokeColor","strokeWeight","strokeOpacity","strokeStyle","fillColor","fillOpacity","enableMassClear","enableEditing","enableClicking"],te}return W.prototype.componentDidUpdate=function(J){var te=this.props,ae=te.strokeColor,ve=te.strokeWeight,he=te.strokeOpacity,oe=te.strokeStyle,me=te.fillColor,ge=te.fillOpacity,de=J.strokeColor,ce=J.strokeWeight,_e=J.strokeOpacity,Re=J.strokeStyle,Ee=J.fillColor,De=J.fillOpacity,We=!u.default(ae,de),Xe=!u.default(ve,ce),et=!u.default(he,_e),Ye=!u.default(oe,Re),at=!u.default(me,Ee),ot=!u.default(ge,De);(We||Xe||et||Ye||at||ot)&&this.overlay.setOptions(this.getOptions()),this.onDataUpdate(J)},W.prototype.componentDidMount=function(){this.initialize()},W.prototype.componentWillUnmount=function(){this.destroy()},W.prototype.destroy=function(){this.overlay&&this.map&&!this.map._destroyed&&(this.map.removeOverlay(this.overlay),this.instance=this.overlay=void 0)},W.prototype.initialize=function(){var J=this.map=this.getMap();if(J){this.destroy(),this.instance=this.overlay=this.getOverlay(),J.addOverlay(this.overlay);var te;if(this.overlay instanceof BMapGL.Polyline||this.overlay instanceof BMapGL.Polygon){var ae=this.overlay.getPath();te=J.getViewport(ae,this.props.viewportOptions||{})}else if(this.overlay instanceof BMapGL.Circle){var ve=this.overlay.getBounds();te=J.getViewport(ve,this.props.viewportOptions||{})}te&&this.props.autoViewport&&J.setViewport(te)}},W.prototype.getOverlay=function(){throw new Error("Method getOverlay not implemented.")},W.prototype.onDataUpdate=function(J){throw new Error("Method onDataUpdate not implemented.")},W.contextType=m.MapContext,W}(i.Component);return pT.default=a.default(z,M,L),pT}Object.defineProperty(ED,"__esModule",{value:!0});var RD=xo,Jae=RD.__importDefault(ID()),Qz=RD.__importDefault(Dh()),Qae=function(t){RD.__extends(i,t);function i(a){var u=t.call(this,a)||this;return u.options=["strokeColor","strokeWeight","strokeOpacity","strokeStyle","dashArray","enableMassClear","enableEditing"],u}return i.prototype.onDataUpdate=function(a){var u=this.props,m=u.path,M=u.autoViewport,L=a.path,z=a.autoViewport,U=m&&!Qz.default(m,L),W=!Qz.default(M,z);if(U&&this.overlay.setPath(this.parsePath(m)),M&&(U||W)){var J=this.overlay.getPath(),te=this.props.map.getViewport(J,this.props.viewportOptions||{});this.props.map.setViewport(te)}},i.prototype.getOverlay=function(){var a=this.parsePath(this.props.path);return new BMapGL.Polyline(a,this.getOptions())},i.prototype.parsePath=function(a){var u=this.props.coordType==="bd09mc",m=a.map(function(M){var L;return M instanceof Array?L=new BMapGL.Point(M[0],M[1]):M instanceof BMapGL.Point?L=M:L=new BMapGL.Point(M.lng,M.lat),u&&(L=BMapGL.Projection.convertMC2LL(L)),L});return m},i.prototype.render=function(){return null},i}(Jae.default);ED.default=Qae;var LD={};Object.defineProperty(LD,"__esModule",{value:!0});var PD=xo,$ae=PD.__importDefault(ID()),$z=PD.__importDefault(Dh()),ese=function(t){PD.__extends(i,t);function i(a){var u=t.call(this,a)||this;return u.options=["strokeColor","strokeWeight","strokeOpacity","strokeStyle","fillColor","fillOpacity","enableMassClear","enableEditing"],u}return i.prototype.onDataUpdate=function(a){var u=this.props,m=u.path,M=u.autoViewport,L=a.path,z=a.autoViewport,U=m&&!$z.default(m,L),W=!$z.default(M,z);if(U&&this.overlay.setPath(this.parsePath(m)),M&&(U||W)){var J=this.overlay.getPath(),te=this.props.map.getViewport(J,this.props.viewportOptions||{});this.props.map.setViewport(te)}},i.prototype.getOverlay=function(){var a=this.parsePath(this.props.path);return new BMapGL.Polygon(a,this.getOptions())},i.prototype.parsePath=function(a){var u=this.props.coordType==="bd09mc",m=a.map(function(M){var L;return M instanceof Array?L=new BMapGL.Point(M[0],M[1]):M instanceof BMapGL.Point?L=M:L=new BMapGL.Point(M.lng,M.lat),u&&(L=BMapGL.Projection.convertMC2LL(L)),L});return m},i.prototype.render=function(){return null},i}($ae.default);LD.default=ese;var OD={};Object.defineProperty(OD,"__esModule",{value:!0});var DD=xo,tse=DD.__importDefault(ID()),S5=DD.__importDefault(Dh()),rse=function(t){DD.__extends(i,t);function i(a){var u=t.call(this,a)||this;return u.options=["strokeColor","strokeWeight","strokeOpacity","strokeStyle","fillColor","fillOpacity","enableMassClear","enableEditing"],u}return i.prototype.onDataUpdate=function(a){var u=this.props,m=u.center,M=u.radius,L=u.autoViewport,z=a.center,U=a.radius,W=a.autoViewport,J=m&&!S5.default(m,z),te=!!(M&&!S5.default(M,U)),ae=!S5.default(L,W);if(J&&this.overlay.setCenter(this.parseCenter(m)),te&&this.overlay.setRadius(M),L&&(J||te||ae)){var ve=this.overlay.getBounds(),he=this.props.map.getViewport(ve,this.props.viewportOptions||{});this.props.map.setViewport(he)}},i.prototype.getOverlay=function(){var a=this.props,u=a.center,m=a.radius;return new BMapGL.Circle(this.parseCenter(u),m,this.getOptions())},i.prototype.parseCenter=function(a){var u=this.props.coordType==="bd09mc",m;return a instanceof Array?m=new BMapGL.Point(a[0],a[1]):a instanceof BMapGL.Point?m=a:m=new BMapGL.Point(a.lng,a.lat),u&&(m=BMapGL.Projection.convertMC2LL(m)),m},i.prototype.render=function(){return null},i}(tse.default);OD.default=rse;var bD={};Object.defineProperty(bD,"__esModule",{value:!0});var Ej=xo,nse=dl,ise=Ej.__importDefault(zs),e8=Qd,ose=Uu,ase=["close","open","maximize","restore","clickclose"],sse={enableMaximize:["enableMaximize","disableMaximize"],enableAutoPan:["enableAutoPan","disableAutoPan"],enableCloseOnClick:["enableCloseOnClick","disableCloseOnClick"]},Ij=function(t){Ej.__extends(i,t);function i(a){var u=t.call(this,a)||this;return u.options=["width","height","maxWidth","offset","title","enableMassClear"],u}return i.prototype.componentDidUpdate=function(a){this.initialize()},i.prototype.componentDidMount=function(){this.initialize()},i.prototype.componentWillUnmount=function(){this.destroy()},i.prototype.destroy=function(){this.content&&e8.unmountComponentAtNode(this.content),this.infoWindow&&this.map&&!this.map._destroyed&&(this.map.closeInfoWindow(),this.instance=this.infoWindow=void 0)},i.prototype.initialize=function(){var a=this.map=this.getMap();if(a){this.destroy();var u=this.getOptions(),m=this.parsePosition(this.props.position);if(this.instance=this.infoWindow=new BMapGL.InfoWindow(this.props.text||"",u),a.openInfoWindow(this.infoWindow,m),this.props.children!==void 0){var M=this.content=document.createElement("div");e8.render(this.props.children,M),this.infoWindow.setContent(M)}}},i.prototype.parsePosition=function(a){var u=this.props.coordType==="bd09mc",m;return a instanceof Array?m=new BMapGL.Point(a[0],a[1]):a instanceof BMapGL.Point?m=a:m=new BMapGL.Point(a.lng,a.lat),u&&(m=BMapGL.Projection.convertMC2LL(m)),m},i.prototype.render=function(){return null},i.contextType=ose.MapContext,i}(nse.Component);Ij.defaultProps={};bD.default=ise.default(Ij,ase,sse);var FD={};Object.defineProperty(FD,"__esModule",{value:!0});var ND=xo,lse=dl,use=ND.__importDefault(zs),mT=ND.__importDefault(Dh()),cse=Uu,hse=["click","dblclick","rightclick","mousedown","mouseup","mouseout","mouseover","mousemove","remove"],fse={enableMassClear:["enableMassClear","disableMassClear"]},Rj=function(t){ND.__extends(i,t);function i(a){var u=t.call(this,a)||this;return u.options=["position","offset","enableMassClear"],u}return i.prototype.componentDidUpdate=function(a){var u=this.props,m=u.position,M=u.offset,L=u.text,z=u.style,U=a.position,W=a.offset,J=a.text,te=a.style,ae=m&&!mT.default(m,U),ve=!!(M&&!mT.default(M,W)),he=!mT.default(L,J),oe=!!(z&&!mT.default(z,te)),me=this.parsePosition(m);ae&&this.label.setPosition(me),ve&&this.label.setOffset(M),he&&this.label.setContent(L),oe&&this.label.setStyle(z)},i.prototype.componentDidMount=function(){this.initialize()},i.prototype.componentWillUnmount=function(){this.destroy()},i.prototype.destroy=function(){this.label&&this.map&&!this.map._destroyed&&(this.map.removeOverlay(this.label),this.instance=this.label=void 0)},i.prototype.initialize=function(){var a=this.map=this.getMap();if(a){this.destroy();var u=this.getOptions(),m=this.parsePosition(this.props.position);u.position=m,this.instance=this.label=new BMapGL.Label(this.props.text||"",u),a.addOverlay(this.label),this.props.style&&this.label.setStyle(this.props.style)}},i.prototype.parsePosition=function(a){var u=this.props.coordType==="bd09mc",m;return a instanceof Array?m=new BMapGL.Point(a[0],a[1]):a instanceof BMapGL.Point?m=a:m=new BMapGL.Point(a.lng,a.lat),u&&(m=BMapGL.Projection.convertMC2LL(m)),m},i.prototype.render=function(){return null},i.contextType=cse.MapContext,i}(lse.Component);Rj.defaultProps={style:{color:"red"}};FD.default=use.default(Rj,hse,fse);var BD={},gT={},t8;function dse(){if(t8)return gT;t8=1,Object.defineProperty(gT,"__esModule",{value:!0});var t=Qd;function i(a,u){this._point=new BMapGL.Point(a.lng,a.lat),this._options=u||{},this._html=u.html||"";var m=new BMapGL.Overlay;for(var M in m)M!=="initialize"&&M!=="draw"&&M!=="destroy"&&(this.__proto__[M]=m[M])}return i.prototype.initialize=function(a){return this._map=a,this._div=document.createElement("div"),this._div.style.position="absolute",this._div.style.zIndex=this._options.zIndex||BMapGL.Overlay.getZIndex(this._point.lat),t.render(this._html,this._div),this._div.onmousedown=function(u){return u=u||window.event,u.preventDefault?u.preventDefault():u.returnValue=!1,!1},a.getPanes().floatShadow.appendChild(this._div),this._div},i.prototype.destroy=function(){t.unmountComponentAtNode(this._div)},i.prototype.draw=function(){var a=this._map,u=a.pointToOverlayPixel(this._point),m={width:0,height:0};this._options&&this._options.offset&&(m=this._options.offset);var M=m.width,L=m.height;this._options&&this._options.unit&&this._options.unit==="m"&&(M/=a.getZoomUnits(),L/=a.getZoomUnits()),this._div.style.left=u.x+M+"px",this._div.style.top=u.y+L+"px",this._div.style.transform="translate(-50%, -100%)"},gT.default=i,gT}Object.defineProperty(BD,"__esModule",{value:!0});var zD=xo,pse=dl,mse=zD.__importDefault(Dh()),gse=zD.__importDefault(dse()),vse=Uu,yse=function(t){zD.__extends(i,t);function i(a){var u=t.call(this,a)||this;return u.options=["zIndex","offset","unit"],u}return i.prototype.componentDidUpdate=function(a){mse.default(this.props,a)||this.initialize()},i.prototype.componentDidMount=function(){this.initialize()},i.prototype.componentWillUnmount=function(){this.destroy()},i.prototype.destroy=function(){this.overlay&&this.map&&!this.map._destroyed&&(this.overlay.destroy(),this.map.removeOverlay(this.overlay),this.instance=this.overlay=void 0)},i.prototype.initialize=function(){var a=this.map=this.getMap();if(a){this.destroy();var u=this.getOptions();u.html=this.props.children;var m=this.parsePosition(this.props.position);this.instance=this.overlay=new gse.default(m,u),a.addOverlay(this.overlay),this.props.autoViewport&&a.setCenter(m)}},i.prototype.parsePosition=function(a){var u=this.props.coordType==="bd09mc",m;return a instanceof Array?m=new BMapGL.Point(a[0],a[1]):a instanceof BMapGL.Point?m=a:m=new BMapGL.Point(a.lng,a.lat),u&&(m=BMapGL.Projection.convertMC2LL(m)),m},i.prototype.render=function(){return null},i.contextType=vse.MapContext,i}(pse.Component);BD.default=yse;var UD={},M4={exports:{}};(function(t,i){(function(a,u){u(i)})(H1,function(a){function u(d){this.options=d||{},this.paneName=this.options.paneName||"labelPane",this.zIndex=this.options.zIndex||1,this._map=d.map,this._lastDrawTime=null,this.show()}function m(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}function M(d,p){return p={exports:{}},d(p,p.exports),p.exports}function L(d,p){return function(s){return p(d(s))}}function z(d){var p=function(s){return s==null?s:(1<arguments.length&&(s=Array.prototype.slice.call(arguments)),d(s))};return"conversion"in d&&(p.conversion=d.conversion),p}function U(d){var p=function(s){if(s==null)return s;1<arguments.length&&(s=Array.prototype.slice.call(arguments));var h=d(s);if((typeof h>"u"?"undefined":Ta(h))==="object")for(var _=h.length,x=0;x<_;x++)h[x]=Math.round(h[x]);return h};return"conversion"in d&&(p.conversion=d.conversion),p}function W(d,p){if(!(this instanceof W))return new W(d,p);if(p&&p in Vh&&(p=null),p&&!(p in ga))throw Error("Unknown model: "+p);if(typeof d>"u")this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(d instanceof W)this.model=d.model,this.color=d.color.slice(),this.valpha=d.valpha;else if(typeof d=="string"){if(p=Js.get(d),p===null)throw Error("Unable to parse color from string: "+d);this.model=p.model;var s=ga[this.model].channels;this.color=p.value.slice(0,s),this.valpha=typeof p.value[s]=="number"?p.value[s]:1}else if(d.length)this.model=p||"rgb",s=ga[this.model].channels,p=Hl.call(d,0,s),this.color=ve(p,s),this.valpha=typeof d[s]=="number"?d[s]:1;else if(typeof d=="number")d&=16777215,this.model="rgb",this.color=[d>>16&255,d>>8&255,d&255],this.valpha=1;else{if(this.valpha=1,p=Eo(d),"alpha"in d&&(p.splice(p.indexOf("alpha"),1),this.valpha=typeof d.alpha=="number"?d.alpha:0),p=p.sort().join(""),!(p in po))throw Error("Unable to parse color from object: "+Qf(d));this.model=po[p],s=ga[this.model].labels;var h=[];for(p=0;p<s.length;p++)h.push(d[s[p]]);this.color=ve(h)}if(Ap[this.model])for(s=ga[this.model].channels,p=0;p<s;p++)(d=Ap[this.model][p])&&(this.color[p]=d(this.color[p]));this.valpha=Math.max(0,Math.min(1,this.valpha)),xp&&xp(this)}function J(d){return function(p){return Number(p.toFixed(d))}}function te(d,p,s){return d=Array.isArray(d)?d:[d],d.forEach(function(h){(Ap[h]||(Ap[h]=[]))[p]=s}),d=d[0],function(h){if(arguments.length){s&&(h=s(h));var _=this[d]();return _.color[p]=h,_}return _=this[d]().color[p],s&&(_=s(_)),_}}function ae(d){return function(p){return Math.max(0,Math.min(d,p))}}function ve(d,p){for(var s=0;s<p;s++)typeof d[s]!="number"&&(d[s]=0);return d}function he(d){return d*Math.PI/180}function oe(d){return d/Math.PI*180}function me(d){return Math.pow(2,Math.ceil(Math.log(d)/Math.LN2))}function ge(d){return Math.pow(2,Math.floor(Math.log(d)/Math.LN2))}function de(d,p){return 1e-8>Math.abs(d-p)}function ce(d){var p=d[0],s=d[d.length-1];return Math.sqrt(Math.pow(p[0]-s[0],2)+Math.pow(p[1]-s[1],2)+Math.pow((p[2]||0)-(s[2]||0),2))<(1<arguments.length&&arguments[1]!==void 0?arguments[1]:2e-7)}function _e(){}function Re(d,p){for(var s in p)d[s]=p[s]}function Ee(d,p){this.lng=d,this.lat=p}function De(d,p){this.x=d,this.y=p}function We(d,p){var s=document.createElement("canvas");return d&&(s.width=d),p&&(s.height=p),s}function Xe(d){d=d||{},this.gradient=d.gradient||{"0.25":"rgba(0, 0, 255, 1)","0.55":"rgba(0, 255, 0, 1)","0.85":"rgba(255, 255, 0, 1)",1:"rgba(255, 0, 0, 1)"},this.maxSize=d.maxSize===void 0?35:d.maxSize,this.minSize=d.minSize||0,this.max=d.max||100,this.min=d.min||0,this.initPalette()}function et(d){this.options=d||{},this._initialize()}function Ye(d,p,s,h,_){var x=1-d,S=1-d;return x*x*x*p+3*S*S*d*s+3*(1-d)*d*d*h+d*d*d*_}function at(d){this.WORLD_SIZE_MC_HALF=20037726372307256e-9,this.WORLD_SIZE_MC=2*this.WORLD_SIZE_MC_HALF,this.options=d||{},this._initialize()}function ot(d,p){return d&&p?Math.round(Math.sqrt(Math.pow(d.lng-p.lng,2)+Math.pow(d.lat-p.lat,2))):0}function ct(d){return d=d.split("|"),d[0]=d[0].split(","),{lng:parseFloat(d[0][0]),lat:parseFloat(d[0][1])}}function Dt(d){for(var p=d.length;0<=--p;)d[p]=0}function $e(d,p,s,h,_){this.static_tree=d,this.extra_bits=p,this.extra_base=s,this.elems=h,this.max_length=_,this.has_stree=d&&d.length}function tt(d,p){this.dyn_tree=d,this.max_code=0,this.stat_desc=p}function Ve(d,p,s,h,_){this.good_length=d,this.max_lazy=p,this.nice_length=s,this.max_chain=h,this.func=_}function gt(){this.strm=null,this.status=0,this.pending_buf=null,this.wrap=this.pending=this.pending_out=this.pending_buf_size=0,this.gzhead=null,this.gzindex=0,this.method=es,this.last_flush=-1,this.w_mask=this.w_bits=this.w_size=0,this.window=null,this.window_size=0,this.head=this.prev=null,this.nice_match=this.good_match=this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=this.hash_shift=this.hash_mask=this.hash_bits=this.hash_size=this.ins_h=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),gl(this.dyn_ltree),gl(this.dyn_dtree),gl(this.bl_tree),this.bl_desc=this.d_desc=this.l_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),gl(this.heap),this.heap_max=this.heap_len=0,this.depth=new Uint16Array(573),gl(this.depth),this.bi_valid=this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=this.d_buf=this.last_lit=this.lit_bufsize=this.l_buf=0}function mt(d){d=this.options=Ra.assign({level:gs,method:W3,chunkSize:16384,windowBits:15,memLevel:8,strategy:kr},d||{}),d.raw&&0<d.windowBits?d.windowBits=-d.windowBits:d.gzip&&0<d.windowBits&&16>d.windowBits&&(d.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Zx,this.strm.avail_out=0;var p=bo.deflateInit2(this.strm,d.level,d.method,d.windowBits,d.memLevel,d.strategy);if(p!==L0)throw Error(Yh[p]);if(d.header&&bo.deflateSetHeader(this.strm,d.header),d.dictionary){if(d=typeof d.dictionary=="string"?$h.string2buf(d.dictionary):Ep.call(d.dictionary)==="[object ArrayBuffer]"?new Uint8Array(d.dictionary):d.dictionary,p=bo.deflateSetDictionary(this.strm,d),p!==L0)throw Error(Yh[p]);this._dict_set=!0}}function dt(d,p){if(p=new mt(p),p.push(d,!0),p.err)throw p.msg||Yh[p.err];return p.result}function At(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.total=this.check=this.dmax=this.flags=0,this.head=null,this.wnext=this.whave=this.wsize=this.wbits=0,this.window=null,this.extra=this.offset=this.length=this.bits=this.hold=0,this.distcode=this.lencode=null,this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.distdyn=this.lendyn=null,this.was=this.back=this.sane=0}function jt(d){var p=this.options=Ra.assign({chunkSize:65536,windowBits:15,to:""},d||{});if(p.raw&&0<=p.windowBits&&16>p.windowBits&&(p.windowBits=-p.windowBits,p.windowBits===0&&(p.windowBits=-15)),!(0<=p.windowBits&&16>p.windowBits)||d&&d.windowBits||(p.windowBits+=32),15<p.windowBits&&48>p.windowBits&&!(p.windowBits&15)&&(p.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Zx,this.strm.avail_out=0,d=Wc.inflateInit2(this.strm,p.windowBits),d!==Ig||(this.header=new $x,Wc.inflateGetHeader(this.strm,this.header),p.dictionary&&(typeof p.dictionary=="string"?p.dictionary=$h.string2buf(p.dictionary):Eg.call(p.dictionary)==="[object ArrayBuffer]"&&(p.dictionary=new Uint8Array(p.dictionary)),p.raw&&(d=Wc.inflateSetDictionary(this.strm,p.dictionary),d!==Ig))))throw Error(Yh[d])}function ar(d,p){if(p=new jt(p),p.push(d),p.err)throw p.msg||Yh[p.err];return p.result}function Ht(d,p){for(var s=["webgl2","experimental-webgl2","webgl","experimental-webgl"],h=void 0,_=0;_<s.length;_++)try{if(h=d.getContext(s[_],{stencil:!0,alpha:!0,premultipliedAlpha:!1,antialias:p.antialias||!0,preserveDrawingBuffer:p.preserveDrawingBuffer||!1}))break}catch{}return h}function Rt(d,p,s){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{};s=Lr({TEXTURE_MAG_FILTER:"LINEAR",TEXTURE_MIN_FILTER:"LINEAR",TEXTURE_WRAP_S:"REPEAT",TEXTURE_WRAP_T:"REPEAT"},s);var _=d.createTexture();if(d.bindTexture(d.TEXTURE_2D,_),d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,h.flipY||!0),h.format&&h.width){var x=d.LUMINANCE;h.format&&(x=d[h.format]),h.format!=="RGBA"&&h.format!=="RGB"?(p=new Float32Array(p),d.texImage2D(d.TEXTURE_2D,0,d.R32F,h.width,h.height,0,d.RED,d[h.type]||d.FLOAT,p)):d.texImage2D(d.TEXTURE_2D,0,x,h.width,h.height,0,x,d[h.type]||d.FLOAT,p)}else d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,p);for(var S in s)d.texParameteri(d.TEXTURE_2D,d[S],d[s[S]]);return d.bindTexture(d.TEXTURE_2D,null),{texture:_,data:{width:h.width,height:h.height,data:p,type:h.type}}}function pr(d,p,s,h,_){if((typeof p>"u"?"undefined":Ta(p))==="object")p=Rt(d,p,h,_),s(p.texture,null,p.data);else{var x=new Image;x.crossOrigin="anonymous",x.onload=function(){var S=ge(x.width),C=ge(x.height),R=document.createElement("canvas");R.width=S,R.height=C;var H=R.getContext("2d");H.drawImage(x,0,0,S,C),x=R,R=Rt(d,x,h,_).texture,s(R,x,{width:S,height:C,data:H.getImageData(0,0,S,C),type:"RGBA"})},x.src=p}}function Cr(d,p){if(p instanceof Array){var s={zero:d.ZERO,one:d.ONE,src_color:d.SRC_COLOR,one_minus_src_color:d.ONE_MINUS_SRC_COLOR,dst_color:d.DST_COLOR,one_minus_dst_color:d.ONE_MINUS_DST_COLOR,src_alpha:d.SRC_ALPHA,one_minus_src_alpha:d.ONE_MINUS_SRC_ALPHA,dst_alpha:d.DST_ALPHA,one_minus_dst_alpha:d.ONE_MINUS_DST_ALPHA,constant_color:d.CONSTANT_COLOR,one_minus_constant_color:d.ONE_MINUS_CONSTANT_COLOR,constant_alpha:d.CONSTANT_ALPHA,one_minus_constant_alpha:d.ONE_MINUS_CONSTANT_ALPHA,src_alpha_saturate:d.SRC_ALPHA_SATURATE};return p.map(function(h){return s[h]})}switch(p){case"default":return yg?[d.SRC_ALPHA,d.ZERO,d.ONE,d.ZERO]:[d.ONE,d.ZERO];case"deeper":return[d.ONE,d.ONE_MINUS_SRC_ALPHA];case"normal":return[d.SRC_ALPHA,d.ONE];case"lighter":return[d.SRC_ALPHA,d.ONE_MINUS_SRC_ALPHA];default:return[d.ONE,d.ZERO]}}function Ir(d,p){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:[],h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:"#ccc",_=4<arguments.length&&arguments[4]!==void 0?arguments[4]:1,x=document.createElement("canvas"),S=x.getContext("2d");x.width=256,x.height=_,x=p[0];var C=p[p.length-1];if(d.length===p.length){for(var R=S.createLinearGradient(0,0,256,1),H=0;H<d.length;++H)R.addColorStop((p[H]-x)/(C-x),d[H]);S.fillStyle=R,S.fillRect(0,0,256,_)}else if(d.length-p.length===-1){R=0,H=1;for(var Z=0;Z<d.length;++Z){var P=Math.floor((p[H]-x)/(C-x)*256);S.fillStyle=d[Z],S.fillRect(R,0,P,_),R=P,H++}}else S.fillStyle=h||"#ccc",S.fillRect(0,0,256,_);return-1>=d.length-p.length&&s.length===2&&(S.fillStyle=h||"#ccc",h=(s[0]-x)/(C-x),h=Math.floor(256*h),S.fillRect(0,0,h,_),h=(s[1]-x)/(C-x),h=Math.floor(256*h),S.fillRect(h,0,255,_)),{data:new Uint8Array(new Uint8ClampedArray(S.getImageData(0,0,256,_).data)),width:256,height:_}}function Ut(d,p,s){s=s||2;var h=p&&p.length,_=h?p[0]*s:d.length,x=_r(d,0,_,s,!0),S=[];if(!x||x.next===x.prev)return S;var C;if(h){var R=s;h=[];var H,Z=0;for(H=p.length;Z<H;Z++){var P=p[Z]*R,F=Z<H-1?p[Z+1]*R:d.length;P=_r(d,P,F,R,!1),P===P.next&&(P.steiner=!0),h.push(Fn(P))}for(h.sort(jn),Z=0;Z<h.length;Z++)R=h[Z],p=x,(p=An(R,p))&&(R=mn(p,R),Bn(p,p.next),Bn(R,R.next)),x=Bn(x,x.next)}if(d.length>80*s){var V=C=d[0],j=h=d[1];for(R=s;R<_;R+=s)Z=d[R],p=d[R+1],Z<V&&(V=Z),p<j&&(j=p),Z>C&&(C=Z),p>h&&(h=p);C=Math.max(C-V,h-j),C=C!==0?1/C:0}return bn(x,S,s,V,j,C),S}function _r(d,p,s,h,_){if(_===0<Kn(d,p,s,h))for(_=p;_<s;_+=h)var x=pi(_,d[_],d[_+1],x);else for(_=s-h;_>=p;_-=h)x=pi(_,d[_],d[_+1],x);return x&&cn(x,x.next)&&(ui(x),x=x.next),x}function Bn(d,p){if(!d)return d;p||(p=d);do{var s=!1;if(d.steiner||!cn(d,d.next)&&er(d.prev,d,d.next)!==0)d=d.next;else{if(ui(d),d=p=d.prev,d===d.next)break;s=!0}}while(s||d!==p);return p}function bn(d,p,s,h,_,x,S){if(d){if(!S&&x){var C=d,R=C;do R.z===null&&(R.z=en(R.x,R.y,h,_,x)),R.prevZ=R.prev,R=R.nextZ=R.next;while(R!==C);R.prevZ.nextZ=null,R.prevZ=null,C=R;var H,Z,P,F,V=1;do{R=C;var j=C=null;for(Z=0;R;){Z++;var q=R;for(H=P=0;H<V&&(P++,q=q.nextZ,q);H++);for(F=V;0<P||0<F&&q;)P!==0&&(F===0||!q||R.z<=q.z)?(H=R,R=R.nextZ,P--):(H=q,q=q.nextZ,F--),j?j.nextZ=H:C=H,H.prevZ=j,j=H;R=q}j.nextZ=null,V*=2}while(1<Z)}for(C=d;d.prev!==d.next;){if(R=d.prev,q=d.next,x)j=ur(d,h,_,x);else e:if(j=d,Z=j.prev,P=j,V=j.next,0<=er(Z,P,V))j=!1;else{for(H=j.next.next;H!==j.prev;){if(lr(Z.x,Z.y,P.x,P.y,V.x,V.y,H.x,H.y)&&0<=er(H.prev,H,H.next)){j=!1;break e}H=H.next}j=!0}if(j)p.push(R.i/s),p.push(d.i/s),p.push(q.i/s),ui(d),C=d=q.next;else if(d=q,d===C){if(!S)bn(Bn(d),p,s,h,_,x,1);else if(S===1){d=Bn(d),S=p,C=s,R=d;do q=R.prev,j=R.next.next,!cn(q,j)&&oi(q,R,R.next,j)&&Dn(q,j)&&Dn(j,q)&&(S.push(q.i/C),S.push(R.i/C),S.push(j.i/C),ui(R),ui(R.next),R=d=j),R=R.next;while(R!==d);d=Bn(R),bn(d,p,s,h,_,x,2)}else if(S===2)e:{S=d;do{for(C=S.next.next;C!==S.prev;){if(R=S.i!==C.i){if(R=S,q=C,j=R.next.i!==q.i&&R.prev.i!==q.i){t:{j=R;do{if(j.i!==R.i&&j.next.i!==R.i&&j.i!==q.i&&j.next.i!==q.i&&oi(j,j.next,R,q)){j=!0;break t}j=j.next}while(j!==R);j=!1}j=!j}if(j){if(j=Dn(R,q)&&Dn(q,R)){j=R,Z=!1,P=(R.x+q.x)/2,V=(R.y+q.y)/2;do j.y>V!=j.next.y>V&&j.next.y!==j.y&&P<(j.next.x-j.x)*(V-j.y)/(j.next.y-j.y)+j.x&&(Z=!Z),j=j.next;while(j!==R);j=Z}j=j&&(er(R.prev,R,q.prev)||er(R,q.prev,q))||cn(R,q)&&0<er(R.prev,R,R.next)&&0<er(q.prev,q,q.next)}R=j}if(R){d=mn(S,C),S=Bn(S,S.next),d=Bn(d,d.next),bn(S,p,s,h,_,x),bn(d,p,s,h,_,x);break e}C=C.next}S=S.next}while(S!==d)}break}}}}function ur(d,p,s,h){var _=d.prev,x=d.next;if(0<=er(_,d,x))return!1;var S=_.x>d.x?_.x>x.x?_.x:x.x:d.x>x.x?d.x:x.x,C=_.y>d.y?_.y>x.y?_.y:x.y:d.y>x.y?d.y:x.y,R=en(_.x<d.x?_.x<x.x?_.x:x.x:d.x<x.x?d.x:x.x,_.y<d.y?_.y<x.y?_.y:x.y:d.y<x.y?d.y:x.y,p,s,h);for(p=en(S,C,p,s,h),s=d.prevZ,h=d.nextZ;s&&s.z>=R&&h&&h.z<=p;){if(s!==d.prev&&s!==d.next&&lr(_.x,_.y,d.x,d.y,x.x,x.y,s.x,s.y)&&0<=er(s.prev,s,s.next)||(s=s.prevZ,h!==d.prev&&h!==d.next&&lr(_.x,_.y,d.x,d.y,x.x,x.y,h.x,h.y)&&0<=er(h.prev,h,h.next)))return!1;h=h.nextZ}for(;s&&s.z>=R;){if(s!==d.prev&&s!==d.next&&lr(_.x,_.y,d.x,d.y,x.x,x.y,s.x,s.y)&&0<=er(s.prev,s,s.next))return!1;s=s.prevZ}for(;h&&h.z<=p;){if(h!==d.prev&&h!==d.next&&lr(_.x,_.y,d.x,d.y,x.x,x.y,h.x,h.y)&&0<=er(h.prev,h,h.next))return!1;h=h.nextZ}return!0}function jn(d,p){return d.x-p.x}function An(d,p){var s=p,h=d.x,_=d.y,x=-1/0;do{if(_<=s.y&&_>=s.next.y&&s.next.y!==s.y){var S=s.x+(_-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(S<=h&&S>x){if(x=S,S===h){if(_===s.y)return s;if(_===s.next.y)return s.next}var C=s.x<s.next.x?s:s.next}}s=s.next}while(s!==p);if(!C)return null;if(h===x)return C;p=C,S=C.x;var R=C.y,H=1/0;s=C;do{if(h>=s.x&&s.x>=S&&h!==s.x&&lr(_<R?h:x,_,S,R,_<R?x:h,_,s.x,s.y)){var Z=Math.abs(_-s.y)/(h-s.x),P;if((P=Dn(s,d))&&!(P=Z<H)&&(P=Z===H)&&!(P=s.x>C.x)&&(P=s.x===C.x)){P=C;var F=s;P=0>er(P.prev,P,F.prev)&&0>er(F.next,P,P.next)}P&&(C=s,H=Z)}s=s.next}while(s!==p);return C}function en(d,p,s,h,_){return d=32767*(d-s)*_,p=32767*(p-h)*_,d=(d|d<<8)&16711935,d=(d|d<<4)&252645135,d=(d|d<<2)&858993459,p=(p|p<<8)&16711935,p=(p|p<<4)&252645135,p=(p|p<<2)&858993459,(d|d<<1)&1431655765|((p|p<<1)&1431655765)<<1}function Fn(d){var p=d,s=d;do(p.x<s.x||p.x===s.x&&p.y<s.y)&&(s=p),p=p.next;while(p!==d);return s}function lr(d,p,s,h,_,x,S,C){return 0<=(_-S)*(p-C)-(d-S)*(x-C)&&0<=(d-S)*(h-C)-(s-S)*(p-C)&&0<=(s-S)*(x-C)-(_-S)*(h-C)}function er(d,p,s){return(p.y-d.y)*(s.x-p.x)-(p.x-d.x)*(s.y-p.y)}function cn(d,p){return d.x===p.x&&d.y===p.y}function oi(d,p,s,h){var _=qn(er(d,p,s)),x=qn(er(d,p,h)),S=qn(er(s,h,d)),C=qn(er(s,h,p));return!!(_!==x&&S!==C||_===0&&xn(d,s,p)||x===0&&xn(d,h,p)||S===0&&xn(s,d,h)||C===0&&xn(s,p,h))}function xn(d,p,s){return p.x<=Math.max(d.x,s.x)&&p.x>=Math.min(d.x,s.x)&&p.y<=Math.max(d.y,s.y)&&p.y>=Math.min(d.y,s.y)}function qn(d){return 0<d?1:0>d?-1:0}function Dn(d,p){return 0>er(d.prev,d,d.next)?0<=er(d,p,d.next)&&0<=er(d,d.prev,p):0>er(d,p,d.prev)||0>er(d,d.next,p)}function mn(d,p){var s=new hn(d.i,d.x,d.y),h=new hn(p.i,p.x,p.y),_=d.next,x=p.prev;return d.next=p,p.prev=d,s.next=_,_.prev=s,h.next=s,s.prev=h,x.next=h,h.prev=x,h}function pi(d,p,s,h){return d=new hn(d,p,s),h?(d.next=h.next,d.prev=h,h.next.prev=d,h.next=d):(d.prev=d,d.next=d),d}function ui(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function hn(d,p,s){this.i=d,this.x=p,this.y=s,this.nextZ=this.prevZ=this.z=this.next=this.prev=null,this.steiner=!1}function Kn(d,p,s,h){for(var _=0,x=s-h;p<s;p+=h)_+=(d[x]-d[p])*(d[p+1]+d[x+1]),x=p;return _}function $i(d){try{return Dg.createObjectURL(new Blob([d],{type:"application/javascript"}))}catch{var p=new Og;return p.append(d),Dg.createObjectURL(p.getBlob(type))}}function ji(d,p){this.shapeLayer=d,this.gl=p,this.initData()}function _a(d,p,s,h){var _=[];return h=h*Math.PI/180,_[0]=(d-s[0])*Math.cos(h)-(p-s[1])*Math.sin(h)+s[0],_[1]=(d-s[0])*Math.sin(h)+(p-s[1])*Math.cos(h)+s[1],_}function ro(d){var p=0,s=0,h=!0,_=!1,x=void 0;try{for(var S=Gh(d),C;!(h=(C=S.next()).done);h=!0){var R=C.value;p+=R.w*R.h,s=Math.max(s,R.w)}}catch(q){_=!0,x=q}finally{try{!h&&S.return&&S.return()}finally{if(_)throw x}}d.sort(function(q,ee){return ee.h-q.h}),s=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(p/.95)),s),h:1/0}],_=h=0,x=!0,S=!1,C=void 0;try{for(var H=Gh(d),Z;!(x=(Z=H.next()).done);x=!0)for(var P=Z.value,F=s.length-1;0<=F;F--){var V=s[F];if(!(P.w>V.w||P.h>V.h)){if(P.x=V.x,P.y=V.y,_=Math.max(_,P.y+P.h),h=Math.max(h,P.x+P.w),P.w===V.w&&P.h===V.h){var j=s.pop();F<s.length&&(s[F]=j)}else P.h===V.h?(V.x+=P.w,V.w-=P.w):(P.w!==V.w&&s.push({x:V.x+P.w,y:V.y,w:V.w-P.w,h:P.h}),V.y+=P.h,V.h-=P.h);break}}}catch(q){S=!0,C=q}finally{try{!x&&H.return&&H.return()}finally{if(S)throw C}}return{w:h,h:_,fill:p/(h*_)||0}}function bi(d,p){var s=[];return d.forEach(function(h){s.push(p?-h:h,h)}),s}function us(d){for(var p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,s=[],h=0;h<d-1;h++){var _=2*(h+p);s.push(_,_+1,_+2),s.push(_+2,_+1,_+3)}return s}function Ao(d){return function(p,s,h){return p=s+d,s=h.length-1,h[0<s?0>p?0:p>s?s:p:p<s?s:0<p?0:p]}}function Gi(d){if(!d[0]||!d[0].length)return d;for(var p=d[0].length,s=[],h=0,_=0;_<d.length;_++)for(var x=0;x<p;x++)s[h++]=d[_][x];return s}function Vi(){for(var d=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],p=[],s=0,h=0;h<d.length;h++){var _=d[h];if(0<h){var x=d[h-1];s+=Math.sqrt(Math.pow(_[0]-x[0],2)+Math.pow(_[1]-x[1],2))}p.push(s)}return{arr:p,total:s}}function zi(){var d=document.createElement("canvas");d.width=d.height=32;var p=d.getContext("2d");return{canvas:d,ctx:p}}function To(){var d=(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{}).color,p=zi(),s=p.canvas;return p=p.ctx,p.save(),p.moveTo(0,0),p.lineTo(20,0),p.lineTo(32,16),p.lineTo(20,32),p.lineTo(0,32),p.lineTo(10,16),p.fillStyle=d||"#fff",p.fill(),p.restore(),s}function wo(d,p){return Qn.set(d,-p[1],p[0])}function _i(d,p,s){return Qn.sub(d,p,s),Qn.normalize(d,d),d}function ti(d){var p,s;this.promise=new d(function(h,_){if(p!==void 0||s!==void 0)throw TypeError("Bad Promise constructor");p=h,s=_}),this.resolve=no(p),this.reject=no(s)}function wn(d,p,s){return s=Math.PI/180*(60*s+30),[d.x+p*Math.cos(s),d.y+p*Math.sin(s)]}function Ui(d,p,s){for(var h={},_=[],x=d.length,S=p/2/Math.sin(Math.PI/3),C=1.5*S,R=1,H=0;H<x;++H){var Z=d[H].geometry.coordinates;s&&(Z=s(Z));var P=+Z[0],F=+Z[1];if(!isNaN(P)&&!isNaN(F)){Z=Math.round(F/=C);var V=Math.round(P=P/p-(Z&1)/2),j=F-Z;if(1<3*Math.abs(j)){var q=P-V,ee=V+(P<V?-1:1)/2,Q=Z+(F<Z?-1:1);P-=ee,F-=Q,q*q+j*j>P*P+F*F&&(V=ee+(Z&1?1:-1)/2,Z=Q)}j=V+"-"+Z,(q=h[j])?(q.count+=d[H].count||1,R=Math.max(R,q.count)):(h[j]={center:{x:(V+(Z&1)/2)*p,y:Z*C},count:d[H].count||1},_.push(h[j]))}}return _.max=R,_.r=S,_}function Nn(d,p,s,h){switch(h){case 5122:return new Int16Array(d,p,s);case 5123:return new Uint16Array(d,p,s);case 5124:return new Int32Array(d,p,s);case 5125:return new Uint32Array(d,p,s);case 5126:return new Float32Array(d,p,s);default:return null}}function nn(d){return Nn(d.bufferView.data,d.byteOffset,d.count*j2[d.type],d.componentType)}function Gn(d){var p="",s=d.lastIndexOf("/");return s!==-1&&(p=d.substring(0,s+1)),p}function Wi(d,p){var s=new XMLHttpRequest;s.overrideMimeType("application/json"),s.open("GET",d,!0),s.onreadystatechange=function(){s.readyState==4&&s.status=="200"&&p(s.responseText,this)},s.send(null)}function Co(d,p,s){var h=new XMLHttpRequest;h.responseType="arraybuffer",h.open("GET",d,!0),h.onreadystatechange=function(){if(h.readyState==4&&h.status=="200"){var _=h.response;_&&p&&p(_,s)}},h.send(null)}function Ja(d,p,s){var h=new Image;h.crossOrigin="Anonymous",h.src=d,h.onload=function(){s(h,p)}}function ma(d){function p(bt,fr){s.uniform1i(bt,fr.index),s.activeTexture(s.TEXTURE0+fr.index),bt=Ie.glTF.textures[fr.index],s.bindTexture(s.TEXTURE_2D,bt.texture),s.bindSampler(fr.index,bt.sampler?bt.sampler.sampler:S)}var s=d.gl,h=0,_=[];d=s.canvas;var x=function(bt,fr,un){for(this.glTFScene=bt,this.glTF=fr,this.id=un,this.rootTransform=Er.create(),this.nodeMatrix=Array(fr.nodes.length),bt=0,fr=this.nodeMatrix.length;bt<fr;bt++)this.nodeMatrix[bt]=Er.create()},S=s.createSampler();s.samplerParameteri(S,s.TEXTURE_MIN_FILTER,s.NEAREST_MIPMAP_LINEAR),s.samplerParameteri(S,s.TEXTURE_MAG_FILTER,s.LINEAR),s.samplerParameteri(S,s.TEXTURE_WRAP_S,s.REPEAT),s.samplerParameteri(S,s.TEXTURE_WRAP_T,s.REPEAT),s.bindVertexArray(null),s.bindVertexArray(null);var C={HAS_SKIN:1,SKIN_VEC8:2,HAS_BASECOLORMAP:4,HAS_NORMALMAP:8,HAS_METALROUGHNESSMAP:16,HAS_OCCLUSIONMAP:32,HAS_EMISSIVEMAP:64},R={},H=function(){this.flags=0,this.programObject=null};H.prototype.hasSkin=function(){return this.flags&C.HAS_SKIN},H.prototype.hasBaseColorMap=function(){return this.flags&C.HAS_BASECOLORMAP},H.prototype.hasNormalMap=function(){return this.flags&C.HAS_NORMALMAP},H.prototype.hasMetalRoughnessMap=function(){return this.flags&C.HAS_METALROUGHNESSMAP},H.prototype.hasOcclusionMap=function(){return this.flags&C.HAS_OCCLUSIONMAP},H.prototype.hasEmissiveMap=function(){return this.flags&C.HAS_EMISSIVEMAP},H.prototype.defineMacro=function(bt){C[bt]!==void 0&&(this.flags|=C[bt])},H.prototype.compile=function(){var bt=R[this.flags];if(bt)this.programObject=bt;else{var fr=bt="";this.flags&C.HAS_SKIN&&(bt+=`#define HAS_SKIN
`),this.flags&C.SKIN_VEC8&&(bt+=`#define SKIN_VEC8
`),this.flags&C.HAS_BASECOLORMAP&&(fr+=`#define HAS_BASECOLORMAP
`),this.flags&C.HAS_NORMALMAP&&(fr+=`#define HAS_NORMALMAP
`),this.flags&C.HAS_METALROUGHNESSMAP&&(fr+=`#define HAS_METALROUGHNESSMAP
`),this.flags&C.HAS_OCCLUSIONMAP&&(fr+=`#define HAS_OCCLUSIONMAP
`),this.flags&C.HAS_EMISSIVEMAP&&(fr+=`#define HAS_EMISSIVEMAP
`),bt=Up.createProgram(s,`#version 300 es
`+bt+`#define POSITION_LOCATION 0
#define NORMAL_LOCATION 1
#define TEXCOORD_0_LOCATION 2
#define JOINTS_0_LOCATION 3
#define JOINTS_1_LOCATION 5
#define WEIGHTS_0_LOCATION 4
#define WEIGHTS_1_LOCATION 6
#define TANGENT_LOCATION 7
precision highp float;precision highp int;uniform mat4 u_MVP;uniform mat4 u_MV;uniform mat4 u_MVNormal;
#ifdef HAS_SKIN
uniform JointMatrix{mat4 matrix[65];}u_jointMatrix;
#endif
layout(location=POSITION_LOCATION)in vec3 position;layout(location=NORMAL_LOCATION)in vec3 normal;layout(location=TEXCOORD_0_LOCATION)in vec2 uv;
#ifdef HAS_SKIN
layout(location=JOINTS_0_LOCATION)in vec4 joint0;layout(location=WEIGHTS_0_LOCATION)in vec4 weight0;
#ifdef SKIN_VEC8
layout(location=JOINTS_1_LOCATION)in vec4 joint1;layout(location=WEIGHTS_1_LOCATION)in vec4 weight1;
#endif
#endif
out vec3 v_position;out vec3 v_normal;out vec2 v_uv;void main(){
#ifdef HAS_SKIN
mat4 skinMatrix=weight0.x*u_jointMatrix.matrix[int(joint0.x)]+weight0.y*u_jointMatrix.matrix[int(joint0.y)]+weight0.z*u_jointMatrix.matrix[int(joint0.z)]+weight0.w*u_jointMatrix.matrix[int(joint0.w)];
#ifdef SKIN_VEC8
skinMatrix+=weight1.x*u_jointMatrix.matrix[int(joint1.x)]+weight1.y*u_jointMatrix.matrix[int(joint1.y)]+weight1.z*u_jointMatrix.matrix[int(joint1.z)]+weight1.w*u_jointMatrix.matrix[int(joint1.w)];
#endif
#endif
v_uv=uv;
#ifdef HAS_SKIN
v_normal=normalize((u_MVNormal*transpose(inverse(skinMatrix))*vec4(normal,0)).xyz);vec4 pos=u_MV*skinMatrix*vec4(position,1.0);gl_Position=u_MVP*skinMatrix*vec4(position,1.0);
#else
v_normal=normalize((u_MVNormal*vec4(normal,0)).xyz);vec4 pos=u_MV*vec4(position,1.0);gl_Position=u_MVP*vec4(position,1.0);
#endif
v_position=vec3(pos.xyz)/pos.w;}`,`#version 300 es
`+fr+`#define FRAG_COLOR_LOCATION 0
precision highp float;precision highp int;uniform sampler2D u_brdfLUT;uniform vec4 u_baseColorFactor;
#ifdef HAS_BASECOLORMAP
uniform sampler2D u_baseColorTexture;
#endif
#ifdef HAS_NORMALMAP
uniform sampler2D u_normalTexture;uniform float u_normalTextureScale;
#endif
#ifdef HAS_EMISSIVEMAP
uniform sampler2D u_emissiveTexture;uniform vec3 u_emissiveFactor;
#endif
#ifdef HAS_METALROUGHNESSMAP
uniform sampler2D u_metallicRoughnessTexture;
#endif
uniform float u_metallicFactor;uniform float u_roughnessFactor;
#ifdef HAS_OCCLUSIONMAP
uniform sampler2D u_occlusionTexture;uniform float u_occlusionStrength;
#endif
in vec3 v_position;in vec3 v_normal;in vec2 v_uv;layout(location=FRAG_COLOR_LOCATION)out vec4 frag_color;struct PBRInfo{float NdotL;float NdotV;float NdotH;float LdotH;float VdotH;float perceptualRoughness;float metalness;vec3 reflectance0;vec3 reflectance90;float alphaRoughness;vec3 diffuseColor;vec3 specularColor;};const float M_PI=3.141592653589793;const float c_MinRoughness=0.04;vec3 getNormal(){vec3 pos_dx=dFdx(v_position);vec3 pos_dy=dFdy(v_position);vec3 tex_dx=dFdx(vec3(v_uv,0.0));vec3 tex_dy=dFdy(vec3(v_uv,0.0));vec3 t=(tex_dy.t*pos_dx-tex_dx.t*pos_dy)/(tex_dx.s*tex_dy.t-tex_dy.s*tex_dx.t);vec3 ng=v_normal;t=normalize(t-ng*dot(ng,t));vec3 b=normalize(cross(ng,t));mat3 tbn=mat3(t,b,ng);
#ifdef HAS_NORMALMAP
vec3 n=texture(u_normalTexture,v_uv).rgb;n=normalize(tbn*((2.0*n-1.0)*vec3(u_normalTextureScale,u_normalTextureScale,1.0)));
#else
vec3 n=tbn[2].xyz;
#endif
return n;}vec3 getIBLContribution(PBRInfo pbrInputs,vec3 n,vec3 reflection){float mipCount=10.0;float lod=(pbrInputs.perceptualRoughness*mipCount);vec3 brdf=texture(u_brdfLUT,vec2(pbrInputs.NdotV,1.0-pbrInputs.perceptualRoughness)).rgb;vec3 diffuseLight=vec3(0.6,0.6,0.6);vec3 specularLight=vec3(0.6,0.6,0.6);vec3 diffuse=diffuseLight*pbrInputs.diffuseColor;vec3 specular=specularLight*(pbrInputs.specularColor*brdf.x+brdf.y);return diffuse+specular;}vec3 diffuse(PBRInfo pbrInputs){return pbrInputs.diffuseColor/M_PI;}vec3 specularReflection(PBRInfo pbrInputs){return pbrInputs.reflectance0+(pbrInputs.reflectance90-pbrInputs.reflectance0)*pow(clamp(1.0-pbrInputs.VdotH,0.0,1.0),5.0);}float geometricOcclusion(PBRInfo pbrInputs){float NdotL=pbrInputs.NdotL;float NdotV=pbrInputs.NdotV;float r=pbrInputs.alphaRoughness;float attenuationL=2.0*NdotL/(NdotL+sqrt(r*r+(1.0-r*r)*(NdotL*NdotL)));float attenuationV=2.0*NdotV/(NdotV+sqrt(r*r+(1.0-r*r)*(NdotV*NdotV)));return attenuationL*attenuationV;}float microfacetDistribution(PBRInfo pbrInputs){float roughnessSq=pbrInputs.alphaRoughness*pbrInputs.alphaRoughness;float f=(pbrInputs.NdotH*roughnessSq-pbrInputs.NdotH)*pbrInputs.NdotH+1.0;return roughnessSq/(M_PI*f*f);}void main(){float perceptualRoughness=u_roughnessFactor;float metallic=u_metallicFactor;
#ifdef HAS_METALROUGHNESSMAP
vec4 mrSample=texture(u_metallicRoughnessTexture,v_uv);perceptualRoughness=mrSample.g*perceptualRoughness;metallic=mrSample.b*metallic;
#endif
perceptualRoughness=clamp(perceptualRoughness,c_MinRoughness,1.0);metallic=clamp(metallic,0.0,1.0);float alphaRoughness=perceptualRoughness*perceptualRoughness;
#ifdef HAS_BASECOLORMAP
vec4 baseColor=texture(u_baseColorTexture,v_uv)*u_baseColorFactor;
#else
vec4 baseColor=u_baseColorFactor;
#endif
vec3 f0=vec3(0.04);vec3 diffuseColor=baseColor.rgb*(vec3(1.0)-f0);diffuseColor*=1.0-metallic;vec3 specularColor=mix(f0,baseColor.rgb,metallic);float reflectance=max(max(specularColor.r,specularColor.g),specularColor.b);float reflectance90=clamp(reflectance*25.0,0.0,1.0);vec3 specularEnvironmentR0=specularColor.rgb;vec3 specularEnvironmentR90=vec3(1.0,1.0,1.0)*reflectance90;vec3 n=getNormal();vec3 v=normalize(-v_position);vec3 l=normalize(vec3(1.0,1.0,1.0));vec3 h=normalize(l+v);vec3 reflection=-normalize(reflect(v,n));float NdotL=clamp(dot(n,l),0.001,1.0);float NdotV=abs(dot(n,v))+0.001;float NdotH=clamp(dot(n,h),0.0,1.0);float LdotH=clamp(dot(l,h),0.0,1.0);float VdotH=clamp(dot(v,h),0.0,1.0);PBRInfo pbrInputs=PBRInfo(NdotL,NdotV,NdotH,LdotH,VdotH,perceptualRoughness,metallic,specularEnvironmentR0,specularEnvironmentR90,alphaRoughness,diffuseColor,specularColor);vec3 F=specularReflection(pbrInputs);float G=geometricOcclusion(pbrInputs);float D=microfacetDistribution(pbrInputs);vec3 diffuseContrib=(1.0-F)*diffuse(pbrInputs);vec3 specContrib=max(vec3(0.0),F*G*D/(4.0*NdotL*NdotV));vec3 color=NdotL*(diffuseContrib+specContrib);color+=getIBLContribution(pbrInputs,n,reflection);
#ifdef HAS_OCCLUSIONMAP
float ao=texture(u_occlusionTexture,v_uv).r;color=mix(color,color*ao,u_occlusionStrength);
#endif
#ifdef HAS_EMISSIVEMAP
vec3 emissive=texture(u_emissiveTexture,v_uv).rgb*u_emissiveFactor;color+=emissive;
#endif
frag_color=vec4(color,baseColor.a);}`),this.programObject={program:bt,uniformLocations:{},uniformBlockIndices:{}},this.flags&C.HAS_SKIN&&(this.programObject.uniformBlockIndices.JointMatrix=s.getUniformBlockIndex(bt,"JointMatrix")),fr=this.programObject.uniformLocations,fr.MVP=s.getUniformLocation(bt,"u_MVP"),fr.MVNormal=s.getUniformLocation(bt,"u_MVNormal"),fr.MV=s.getUniformLocation(bt,"u_MV"),fr.baseColorFactor=s.getUniformLocation(bt,"u_baseColorFactor"),fr.metallicFactor=s.getUniformLocation(bt,"u_metallicFactor"),fr.roughnessFactor=s.getUniformLocation(bt,"u_roughnessFactor"),this.flags&C.HAS_BASECOLORMAP&&(fr.baseColorTexture=s.getUniformLocation(bt,"u_baseColorTexture")),this.flags&C.HAS_NORMALMAP&&(fr.normalTexture=s.getUniformLocation(bt,"u_normalTexture"),fr.normalTextureScale=s.getUniformLocation(bt,"u_normalTextureScale")),this.flags&C.HAS_METALROUGHNESSMAP&&(fr.metallicRoughnessTexture=s.getUniformLocation(bt,"u_metallicRoughnessTexture")),this.flags&C.HAS_OCCLUSIONMAP&&(fr.occlusionTexture=s.getUniformLocation(bt,"u_occlusionTexture"),fr.occlusionStrength=s.getUniformLocation(bt,"u_occlusionStrength")),this.flags&C.HAS_EMISSIVEMAP&&(fr.emissiveTexture=s.getUniformLocation(bt,"u_emissiveTexture"),fr.emissiveFactor=s.getUniformLocation(bt,"u_emissiveFactor")),s.useProgram(null),R[this.flags]=this.programObject}};var Z=1,P=dn.create(),F=Er.create();Lg.create();var V=[];s.enable(s.CULL_FACE),s.cullFace(s.BACK),s.frontFace(s.CCW);var j=!0;s.enable(s.DEPTH_TEST),s.depthFunc(s.LEQUAL);var q=q||{},ee=null;dn.create();var Q=Er.create();Er.perspective(Q,.785,d.width/d.height,.01,100),Er.create();var ne=Er.create(),le=Er.create(),Ae=Er.create();Er.create();var Se,Ie,Be=[1,1,1,1],nt=q.drawPrimitive=function(bt,fr){if(Qr){ne=Er.clone(Qr.matrix),le=Er.clone(Qr.matrix);var un=Er.create();fr&&(Er.multiply(ne,ne,fr),Er.multiply(le,le,fr)),Er.invert(un,ne),Er.transpose(un,Ae),fr=Be;var fn=bt.shader,vr=bt.material;if(vr!==null){var la=vr.pbrMetallicRoughness;fr=la.baseColorFactor,bt.material.doubleSided===j&&((j=!bt.material.doubleSided)?s.enable(s.CULL_FACE):s.disable(s.CULL_FACE))}ee!=bt.shader.programObject&&(ee=bt.shader.programObject,s.useProgram(ee.program)),vr&&(fn.hasBaseColorMap()&&p(ee.uniformLocations.baseColorTexture,la.baseColorTexture),fn.hasNormalMap()&&(p(ee.uniformLocations.normalTexture,vr.normalTexture),s.uniform1f(ee.uniformLocations.normalTextureScale,vr.normalTexture.scale)),fn.hasMetalRoughnessMap()&&p(ee.uniformLocations.metallicRoughnessTexture,la.metallicRoughnessTexture),s.uniform1f(ee.uniformLocations.metallicFactor,la.metallicFactor),s.uniform1f(ee.uniformLocations.roughnessFactor,la.roughnessFactor),fn.hasOcclusionMap()&&(p(ee.uniformLocations.occlusionTexture,vr.occlusionTexture),s.uniform1f(ee.uniformLocations.occlusionStrength,vr.occlusionTexture.strength)),fn.hasEmissiveMap()&&(p(ee.uniformLocations.emissiveTexture,vr.emissiveTexture),s.uniform3fv(ee.uniformLocations.emissiveFactor,vr.emissiveFactor))),fn.hasSkin()&&s.uniformBlockBinding(ee.program,ee.uniformBlockIndices.JointMatrix,Se),s.activeTexture(s.TEXTURE0+29),s.bindTexture(s.TEXTURE_2D,null),s.uniform4fv(ee.uniformLocations.baseColorFactor,fr),s.uniformMatrix4fv(ee.uniformLocations.MV,!1,ne),s.uniformMatrix4fv(ee.uniformLocations.MVP,!1,le),s.uniformMatrix4fv(ee.uniformLocations.MVNormal,!1,un),s.bindVertexArray(bt.vertexArray),bt.indices!==null?s.drawElements(bt.mode,bt.indicesLength,bt.indicesComponentType,bt.indicesOffset):s.drawArrays(bt.mode,bt.drawArraysOffset,bt.drawArraysCount),s.bindVertexArray(null)}},rt=Er.create(),St=Er.create(),Pt=q.drawNode=function(bt,fr,un,fn){if(fr=un[fr],fn!==void 0?Er.mul(fr,fn,bt.matrix):Er.copy(fr,bt.matrix),bt.skin!==null){var vr=bt.skin;Se=vr.uniformBlockID;var la=bt.skin.joints;for(Er.invert(St,fr),fn=0,qi=la.length;fn<qi;fn++){var so=la[fn];Er.mul(rt,un[so.nodeID],vr.inverseBindMatrix[fn]),Er.mul(rt,St,rt),vr.jointMatrixUnidormBufferData.set(rt,16*fn)}s.bindBuffer(s.UNIFORM_BUFFER,vr.jointMatrixUniformBuffer),s.bufferSubData(s.UNIFORM_BUFFER,0,vr.jointMatrixUnidormBufferData,0,vr.jointMatrixUnidormBufferData.length)}var qi;if(bt.mesh!==null)for(vr=bt.mesh,fn=0,qi=vr.primitives.length;fn<qi;fn++)nt(vr.primitives[fn],fr);for(bt.skin!==null&&s.bindBuffer(s.UNIFORM_BUFFER,null),fn=0,qi=bt.children.length;fn<qi;fn++)Pt(bt.children[fn],bt.children[fn].nodeID,un,fr)},$t=q.drawScene=function(bt){var fr=bt.glTF;if(fr.animations){var un=fr.animations[h],fn,vr=0;for(fn=un.samplers.length;vr<fn;vr++)un.samplers[vr].getValue(wr);for(vr=0,fn=un.channels.length;vr<fn;vr++){var la=un.channels[vr],so=la.sampler,qi=fr.nodes[la.target.nodeID];switch(la.target.path){case"rotation":Fo.copy(qi.rotation,so.curValue);break;case"translation":dn.copy(qi.translation,so.curValue);break;case"scale":dn.copy(qi.scale,so.curValue)}qi.updateMatrixFromTRS()}}for(un=0,fr=bt.glTFScene.nodes.length;un<fr;un++)Pt(bt.glTFScene.nodes[un],bt.glTFScene.nodes[un].nodeID,bt.nodeMatrix,bt.rootTransform)},Xt=performance.now(),wr=0,Qr;return{setupScene:function(bt,fr){function un(Zg,ry){if(Zg!==void 0){var Kl=Zg.bufferView;return Kl.target===null?(s.bindBuffer(s.ARRAY_BUFFER,Kl.buffer),s.bufferData(s.ARRAY_BUFFER,Kl.data,s.STATIC_DRAW)):s.bindBuffer(Kl.target,Kl.buffer),Zg.prepareVertexAttrib(ry,s),!0}return!1}var fn;if(bt.animations){var vr=0;for(fn=bt.animations.length;vr<fn;vr++)_.add(bt.animations[vr].name||vr)}h=0,vr=bt.scenes[bt.defaultScene],dn.fromValues(1.2*vr.boundingBox.transform[0],0,0),dn.create(),fr?fr=V[fr.id]=new x(vr,bt,fr.id):(fr=new x(vr,bt,V.length),V.push(fr)),V.length===1&&(Er.identity(F),Z=1/Math.max(vr.boundingBox.transform[0],Math.max(vr.boundingBox.transform[5],vr.boundingBox.transform[10])),Er.getTranslation(P,vr.boundingBox.transform),dn.scale(P,P,-1),P[0]+=-.5*vr.boundingBox.transform[0],P[1]+=-.5*vr.boundingBox.transform[5],P[2]+=-.5*vr.boundingBox.transform[10],Z*=.5,F[0]=Z,F[5]=Z,F[10]=Z,Er.translate(F,F,P),dn.set(P,0,0,-1.5),Z=1);var la;for(vr=0,fn=bt.bufferViews.length;vr<fn;vr++){var so=bt.bufferViews[vr];so.createBuffer(s),so.bindData(s)}if(bt.textures)for(vr=0,fn=bt.textures.length;vr<fn;vr++){var qi=bt.textures[vr];qi.createTexture(s)}if(bt.samplers)for(vr=0,fn=bt.samplers.length;vr<fn;vr++)qi=bt.samplers[vr],qi.createSampler(s);if(bt.skins)for(vr=0,fn=bt.skins.length;vr<fn;vr++)qi=bt.skins[vr],qi.jointMatrixUniformBuffer=s.createBuffer(),s.bindBufferBase(s.UNIFORM_BUFFER,qi.uniformBlockID,qi.jointMatrixUniformBuffer),s.bindBuffer(s.UNIFORM_BUFFER,qi.jointMatrixUniformBuffer),s.bufferData(s.UNIFORM_BUFFER,qi.jointMatrixUnidormBufferData,s.DYNAMIC_DRAW),s.bufferSubData(s.UNIFORM_BUFFER,0,qi.jointMatrixUnidormBufferData),s.bindBuffer(s.UNIFORM_BUFFER,null);var G2=0;for(la=bt.meshes.length;G2<la;G2++)for(qi=bt.meshes[G2],vr=0,fn=qi.primitives.length;vr<fn;++vr){var ho=qi.primitives[vr];ho.shader=new H,ho.vertexArray=so=s.createVertexArray(),s.bindVertexArray(so),un(ho.attributes.POSITION,0),un(ho.attributes.NORMAL,1),un(ho.attributes.TEXCOORD_0,2),un(ho.attributes.JOINTS_0,3)&&un(ho.attributes.WEIGHTS_0,4)&&ho.shader.defineMacro("HAS_SKIN"),un(ho.attributes.JOINTS_1,5)&&un(ho.attributes.WEIGHTS_1,6)&&ho.shader.defineMacro("SKIN_VEC8"),ho.indices!==null&&(so=bt.accessors[ho.indices],so=so.bufferView,so.target===null?(s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,so.buffer),s.bufferData(s.ELEMENT_ARRAY_BUFFER,so.data,s.STATIC_DRAW)):s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,so.buffer)),s.bindVertexArray(null),s.bindBuffer(s.ARRAY_BUFFER,null),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,null),(so=ho.material)&&(so.pbrMetallicRoughness.baseColorTexture&&ho.shader.defineMacro("HAS_BASECOLORMAP"),so.pbrMetallicRoughness.metallicRoughnessTexture&&ho.shader.defineMacro("HAS_METALROUGHNESSMAP"),so.normalTexture&&ho.shader.defineMacro("HAS_NORMALMAP"),so.occlusionTexture&&ho.shader.defineMacro("HAS_OCCLUSIONMAP"),so.emissiveTexture&&ho.shader.defineMacro("HAS_EMISSIVEMAP")),ho.shader.compile()}return fr},render:q.render=function(bt){Qr=bt,bt=new Date().getTime();var fr,un=0;for(fr=V.length;un<fr;un++)Ie=V[un],$t(V[un]);ee=null,wr=.001*(bt-Xt)}}}function ku(d,p,s,h,_,x){if(typeof p=="string"&&typeof s=="number"&&typeof h=="number")for(p=p.split(x),x=0;x<p.length;x++)d.fillText(p[x],s,h),h+=_}function Ti(d){this.options=d=d||{},d.colors=d.colors||["rgba(0,192,73,0.99609375)","rgba(242,48,48,0.99609375)","rgba(255,159,25,0.99609375)"];var p=d.colors;this.drawTogether=!0,this.parseColors(p),this.tileSize=256,this.ratio=window.devicePixelRatio,this.cache={},d.getTileUrl&&(this.getTileUrl=d.getTileUrl),this._loadCount={}}function Ma(d){var p=d/2,s=d+p,h=new We(2*s,2*s),_=h.getContext("2d");return _.shadowBlur=p,_.shadowColor="black",_.shadowOffsetX=_.shadowOffsetY=1e4,_.beginPath(),_.arc(s-1e4,s-1e4,d,0,2*Math.PI,!0),_.closePath(),_.fill(),h}var ks=window.BMapGL||window.BMap;ks&&ks.Overlay&&(u.prototype=new ks.Overlay),u.prototype.initialize=function(d){this._map=d;var p=this.canvas=document.createElement("canvas"),s=this.ctx=this.canvas.getContext("2d");p.style.cssText="position:absolute;left:0;top:0;z-index:"+this.zIndex+";",this.adjustSize(),this.adjustRatio(s),d.getContainer().appendChild(p);var h=this;return d.addEventListener("resize",function(){h.adjustSize(),h._draw()}),this.canvas},u.prototype.adjustSize=function(){var d=this._map.getSize(),p=this.canvas;p.width=d.width,p.height=d.height,p.style.width=p.width+"px",p.style.height=p.height+"px"},u.prototype.adjustRatio=function(d){var p=(window.devicePixelRatio||1)/(d.backingStorePixelRatio||d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1),s=d.canvas.width,h=d.canvas.height;d.canvas.width=s*p,d.canvas.height=h*p,d.canvas.style.width=s+"px",d.canvas.style.height=h+"px",d.scale(p,p)},u.prototype.draw=function(){this._draw.apply(this,arguments)},u.prototype._draw=function(){this.dispatchEvent("draw"),this.options.update&&this.options.update.apply(this,arguments)},u.prototype.getContainer=function(){return this.canvas},u.prototype.show=function(){this.canvas||this._map.addOverlay(this),this.canvas.style.display="block"},u.prototype.hide=function(){this.canvas.style.display="none"},u.prototype.setZIndex=function(d){this.canvas.style.zIndex=d},u.prototype.getZIndex=function(){return this.zIndex};var Ms=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof H1<"u"?H1:typeof self<"u"?self:{},pl=M(function(d,p){p.__esModule=!0,p.default=function(s,h){if(!(s instanceof h))throw new TypeError("Cannot call a class as a function")}}),hr=m(pl),Ba=function(d){if(d==null)throw TypeError("Can't call method on  "+d);return d},Rc={}.hasOwnProperty,Ei=function(d,p){return Rc.call(d,p)},Ol={}.toString,Hs=function(d){return Ol.call(d).slice(8,-1)},Dl=Object("z").propertyIsEnumerable(0)?Object:function(d){return Hs(d)=="String"?d.split(""):Object(d)},ra=function(d){return Dl(Ba(d))},Zo=Math.ceil,Lc=Math.floor,Hu=function(d){return isNaN(d=+d)?0:(0<d?Lc:Zo)(d)},Fh=Math.min,js=function(d){return 0<d?Fh(Hu(d),9007199254740991):0},Pc=Math.max,ju=Math.min,yi=M(function(d){d=d.exports={version:"2.6.5"},typeof __e=="number"&&(__e=d)}),Un=M(function(d){d=d.exports=typeof window<"u"&&Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")(),typeof __g=="number"&&(__g=d)}),su=M(function(d){var p=Un["__core-js_shared__"]||(Un["__core-js_shared__"]={});(d.exports=function(s,h){return p[s]||(p[s]=h!==void 0?h:{})})("versions",[]).push({version:yi.version,mode:"pure",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),cs=0,Gs=Math.random(),Sa=function(d){return"Symbol(".concat(d===void 0?"":d,")_",(++cs+Gs).toString(36))},Gu=su("keys"),Ss=function(d){return Gu[d]||(Gu[d]=Sa(d))},bl=function(d){return function(p,s,h){p=ra(p);var _=js(p.length);for(h=Hu(h),h=0>h?Pc(h+_,0):ju(h,_);_>h;h++)if(h in p&&p[h]===s)return h||0;return-1}}(),Pi=Ss("IE_PROTO"),xi=function(d,p){d=ra(d);var s=0,h=[],_;for(_ in d)_!=Pi&&Ei(d,_)&&h.push(_);for(;p.length>s;)Ei(d,_=p[s++])&&(~bl(h,_)||h.push(_));return h},mi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),Po=Object.keys||function(d){return xi(d,mi)},no=function(d){if(typeof d!="function")throw TypeError(d+" is not a function!");return d},uo=function(d,p,s){if(no(d),p===void 0)return d;switch(s){case 1:return function(h){return d.call(p,h)};case 2:return function(h,_){return d.call(p,h,_)};case 3:return function(h,_,x){return d.call(p,h,_,x)}}return function(){return d.apply(p,arguments)}},Oo=function(d){return typeof d=="object"?d!==null:typeof d=="function"},ko=function(d){if(!Oo(d))throw TypeError(d+" is not an object!");return d},hs=function(d){try{return!!d()}catch{return!0}},na=!hs(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),za=Un.document,Fl=Oo(za)&&Oo(za.createElement),Nh=!na&&!hs(function(){return Object.defineProperty(Fl?za.createElement("div"):{},"a",{get:function(){return 7}}).a!=7}),Vu=function(d,p){if(!Oo(d))return d;var s,h;if(typeof(s=d.toString)=="function"&&!Oo(h=s.call(d))||typeof(s=d.valueOf)=="function"&&!Oo(h=s.call(d))||!p)return h;throw TypeError("Can't convert object to primitive value")},Vs=Object.defineProperty,Ua={f:na?Object.defineProperty:function(d,p,s){if(ko(d),p=Vu(p,!0),ko(s),Nh)try{return Vs(d,p,s)}catch{}if("get"in s||"set"in s)throw TypeError("Accessors not supported!");return"value"in s&&(d[p]=s.value),d}},ml=function(d,p){return{enumerable:!(d&1),configurable:!(d&2),writable:!(d&4),value:p}},qo=na?function(d,p,s){return Ua.f(d,p,ml(1,s))}:function(d,p,s){return d[p]=s,d},Ho=function(d,p,s){var h=d&Ho.F,_=d&Ho.G,x=d&Ho.S,S=d&Ho.P,C=d&Ho.B,R=d&Ho.W,H=_?yi:yi[p]||(yi[p]={}),Z=H.prototype;x=_?Un:x?Un[p]:(Un[p]||{}).prototype;var P;_&&(s=p);for(P in s)if(p=!h&&x&&x[P]!==void 0,!p||!Ei(H,P)){var F=p?x[P]:s[P];H[P]=_&&typeof x[P]!="function"?s[P]:C&&p?uo(F,Un):R&&x[P]==F?function(V){var j=function(q,ee,Q){if(this instanceof V){switch(arguments.length){case 0:return new V;case 1:return new V(q);case 2:return new V(q,ee)}return new V(q,ee,Q)}return V.apply(this,arguments)};return j.prototype=V.prototype,j}(F):S&&typeof F=="function"?uo(Function.call,F):F,S&&((H.virtual||(H.virtual={}))[P]=F,d&Ho.R&&Z&&!Z[P]&&qo(Z,P,F))}};Ho.F=1,Ho.G=2,Ho.S=4,Ho.P=8,Ho.B=16,Ho.W=32,Ho.U=64,Ho.R=128;var tn=Ho,Nl=function(d,p){var s=(yi.Object||{})[d]||Object[d],h={};h[d]=p(s),tn(tn.S+tn.F*hs(function(){s(1)}),"Object",h)};Nl("keys",function(){return function(d){return Po(Object(Ba(d)))}});var tp=yi.Object.keys,bf=M(function(d){d.exports={default:tp,__esModule:!0}}),Eo=m(bf),Ff=Object.getOwnPropertySymbols,Bh={}.propertyIsEnumerable,Oc=Object.assign,Sx=!Oc||hs(function(){var d={},p={},s=Symbol();return d[s]=7,"abcdefghijklmnopqrst".split("").forEach(function(h){p[h]=h}),Oc({},d)[s]!=7||Object.keys(Oc({},p)).join("")!="abcdefghijklmnopqrst"})?function(d,p){for(var s=Object(Ba(d)),h=arguments.length,_=1,x=Ff,S=Bh;h>_;)for(var C=Dl(arguments[_++]),R=x?Po(C).concat(x(C)):Po(C),H=R.length,Z=0,P;H>Z;)S.call(C,P=R[Z++])&&(s[P]=C[P]);return s}:Oc;tn(tn.S+tn.F,"Object",{assign:Sx});var Wr=yi.Object.assign,Tn=M(function(d){d.exports={default:Wr,__esModule:!0}}),Lr=m(Tn),Ko=Ss("IE_PROTO"),Do=Object.prototype,Nf=Object.getPrototypeOf||function(d){return d=Object(Ba(d)),Ei(d,Ko)?d[Ko]:typeof d.constructor=="function"&&d instanceof d.constructor?d.constructor.prototype:d instanceof Object?Do:null};Nl("getPrototypeOf",function(){return function(d){return Nf(Object(Ba(d)))}});var Bf=yi.Object.getPrototypeOf,fs=M(function(d){d.exports={default:Bf,__esModule:!0}}),Dr=m(fs);tn(tn.S+tn.F*!na,"Object",{defineProperty:Ua.f});var FC=yi.Object,G3=function(d,p,s){return FC.defineProperty(d,p,s)},Wu=M(function(d){d.exports={default:G3,__esModule:!0}}),Jo=m(Wu),Tx=M(function(d,p){p.__esModule=!0;var s=Wu&&Wu.__esModule?Wu:{default:Wu};p.default=function(){function h(_,x){for(var S=0;S<x.length;S++){var C=x[S];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),(0,s.default)(_,C.key,C)}}return function(_,x,S){return x&&h(_.prototype,x),S&&h(_,S),_}}()}),Mr=m(Tx),Ws={},zf=na?Object.defineProperties:function(d,p){ko(d);for(var s=Po(p),h=s.length,_=0,x;h>_;)Ua.f(d,x=s[_++],p[x]);return d},d0=Un.document,rp=d0&&d0.documentElement,p0=Ss("IE_PROTO"),np=function(){},Uf=function(){var d=Fl?za.createElement("iframe"):{},p=mi.length;for(d.style.display="none",rp.appendChild(d),d.src="javascript:",d=d.contentWindow.document,d.open(),d.write("<script>document.F=Object<\/script>"),d.close(),Uf=d.F;p--;)delete Uf.prototype[mi[p]];return Uf()},Xu=Object.create||function(d,p){if(d!==null){np.prototype=ko(d);var s=new np;np.prototype=null,s[p0]=d}else s=Uf();return p===void 0?s:zf(s,p)},ia=M(function(d){var p=su("wks"),s=Un.Symbol,h=typeof s=="function";(d.exports=function(_){return p[_]||(p[_]=h&&s[_]||(h?s:Sa)("Symbol."+_))}).store=p}),Io=Ua.f,Xs=ia("toStringTag"),io=function(d,p,s){d&&!Ei(d=s?d:d.prototype,Xs)&&Io(d,Xs,{configurable:!0,value:p})},qm={};qo(qm,ia("iterator"),function(){return this});var lu=function(d,p,s){d.prototype=Xu(qm,{next:ml(1,s)}),io(d,p+" Iterator")},zh=ia("iterator"),Km=!([].keys&&"next"in[].keys()),NC=function(){return this},kf=function(d,p,s,h,_,x,S){lu(s,p,h),h=function(Q){return!Km&&Q in Z?Z[Q]:function(){return new s(this,Q)}};var C=p+" Iterator",R=_=="values",H=!1,Z=d.prototype,P=Z[zh]||Z["@@iterator"]||_&&Z[_],F=P||h(_),V=_?R?h("entries"):F:void 0,j=p=="Array"&&Z.entries||P,q;if(j&&(d=Nf(j.call(new d)),d!==Object.prototype&&d.next&&io(d,C,!0)),R&&P&&P.name!=="values"&&(H=!0,F=function(){return P.call(this)}),S&&(Km||H||!Z[zh])&&qo(Z,zh,F),Ws[p]=F,Ws[C]=NC,_){var ee={values:R?F:h("values"),keys:x?F:h("keys"),entries:V};if(S)for(q in ee)q in Z||qo(Z,q,ee[q]);else tn(tn.P+tn.F*(Km||H),p,ee)}return ee},m0=function(d){return function(p,s){p=String(Ba(p)),s=Hu(s);var h=p.length,_;if(0>s||s>=h)return"";var x=p.charCodeAt(s);return 55296>x||56319<x||s+1===h||56320>(_=p.charCodeAt(s+1))||57343<_?p.charAt(s):p.slice(s,s+2)}}();kf(String,"String",function(d){this._t=String(d),this._i=0},function(){var d=this._t,p=this._i;return p>=d.length?{value:void 0,done:!0}:(d=m0(d,p),this._i+=d.length,{value:d,done:!1})});var uu=function(d,p){return{value:p,done:!!d}};kf(Array,"Array",function(d,p){this._t=ra(d),this._i=0,this._k=p},function(){var d=this._t,p=this._k,s=this._i++;return!d||s>=d.length?(this._t=void 0,uu(1)):p=="keys"?uu(0,s):p=="values"?uu(0,d[s]):uu(0,[s,d[s]])},"values"),Ws.Arguments=Ws.Array;for(var Jm=ia("toStringTag"),Qm="CSSRuleList CSSStyleDeclaration CSSValueList ClientRectList DOMRectList DOMStringList DOMTokenList DataTransferItemList FileList HTMLAllCollection HTMLCollection HTMLFormElement HTMLSelectElement MediaList MimeTypeArray NamedNodeMap NodeList PaintRequestList Plugin PluginArray SVGLengthList SVGNumberList SVGPathSegList SVGPointList SVGStringList SVGTransformList SourceBufferList StyleSheetList TextTrackCueList TextTrackList TouchList".split(" "),Hf=0;Hf<Qm.length;Hf++){var ip=Qm[Hf],Ys=Un[ip],op=Ys&&Ys.prototype;op&&!op[Jm]&&qo(op,Jm,ip),Ws[ip]=Ws.Array}var Uh={f:ia},g0=Uh.f("iterator"),Yu=M(function(d){d.exports={default:g0,__esModule:!0}});m(Yu);var jf=M(function(d){var p=Sa("meta"),s=Ua.f,h=0,_=Object.isExtensible||function(){return!0},x=!hs(function(){return _(Object.preventExtensions({}))}),S=function(R){s(R,p,{value:{i:"O"+ ++h,w:{}}})},C=d.exports={KEY:p,NEED:!1,fastKey:function(R,H){if(!Oo(R))return typeof R=="symbol"?R:(typeof R=="string"?"S":"P")+R;if(!Ei(R,p)){if(!_(R))return"F";if(!H)return"E";S(R)}return R[p].i},getWeak:function(R,H){if(!Ei(R,p)){if(!_(R))return!0;if(!H)return!1;S(R)}return R[p].w},onFreeze:function(R){return x&&C.NEED&&_(R)&&!Ei(R,p)&&S(R),R}}}),$m=Ua.f,ap=function(d){var p=yi.Symbol||(yi.Symbol={});d.charAt(0)=="_"||d in p||$m(p,d,{value:Uh.f(d)})},eg=Array.isArray||function(d){return Hs(d)=="Array"},v0=mi.concat("length","prototype"),Gf=Object.getOwnPropertyNames||function(d){return xi(d,v0)},tg=Gf,rg={}.toString,ng=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],sp=function(d){if(ng&&rg.call(d)=="[object Window]")try{var p=tg(d)}catch{p=ng.slice()}else p=tg(ra(d));return p},Ex=Object.getOwnPropertyDescriptor,cu={f:na?Ex:function(d,p){if(d=ra(d),p=Vu(p,!0),Nh)try{return Ex(d,p)}catch{}if(Ei(d,p))return ml(!Bh.call(d,p),d[p])}},ig=jf.KEY,BC=cu.f,Vf=Ua.f,zC=sp,ds=Un.Symbol,y0=Un.JSON,Dc=y0&&y0.stringify,Mi=ia("_hidden"),og=ia("toPrimitive"),UC={}.propertyIsEnumerable,kh=su("symbol-registry"),Bl=su("symbols"),bc=su("op-symbols"),zl=Object.prototype,Wf=typeof ds=="function",Xf=Un.QObject,ag=!Xf||!Xf.prototype||!Xf.prototype.findChild,x0=na&&hs(function(){return Xu(Vf({},"a",{get:function(){return Vf(this,"a",{value:7}).a}})).a!=7})?function(d,p,s){var h=BC(zl,p);h&&delete zl[p],Vf(d,p,s),h&&d!==zl&&Vf(zl,p,h)}:Vf,Ix=function(d){var p=Bl[d]=Xu(ds.prototype);return p._k=d,p},Hh=Wf&&typeof ds.iterator=="symbol"?function(d){return typeof d=="symbol"}:function(d){return d instanceof ds},Ul=function(d,p,s){return d===zl&&Ul(bc,p,s),ko(d),p=Vu(p,!0),ko(s),Ei(Bl,p)?(s.enumerable?(Ei(d,Mi)&&d[Mi][p]&&(d[Mi][p]=!1),s=Xu(s,{enumerable:ml(0,!1)})):(Ei(d,Mi)||Vf(d,Mi,ml(1,{})),d[Mi][p]=!0),x0(d,p,s)):Vf(d,p,s)},Rx=function(d,p){ko(d);var s=p=ra(p),h=Po(s),_=Ff;if(_){_=_(s);for(var x=Bh,S=0,C;_.length>S;)x.call(s,C=_[S++])&&h.push(C)}s=0,C=h.length;for(var R;C>s;)Ul(d,R=h[s++],p[R]);return d},A0=function(d){var p=UC.call(this,d=Vu(d,!0));return this===zl&&Ei(Bl,d)&&!Ei(bc,d)?!1:p||!Ei(this,d)||!Ei(Bl,d)||Ei(this,Mi)&&this[Mi][d]?p:!0},lp=function(d,p){if(d=ra(d),p=Vu(p,!0),d!==zl||!Ei(Bl,p)||Ei(bc,p)){var s=BC(d,p);return!s||!Ei(Bl,p)||Ei(d,Mi)&&d[Mi][p]||(s.enumerable=!0),s}},sg=function(d){d=zC(ra(d));for(var p=[],s=0,h;d.length>s;)Ei(Bl,h=d[s++])||h==Mi||h==ig||p.push(h);return p},Yf=function(d){var p=d===zl;d=zC(p?bc:ra(d));for(var s=[],h=0,_;d.length>h;)Ei(Bl,_=d[h++])&&(!p||Ei(zl,_))&&s.push(Bl[_]);return s};Wf||(ds=function(){if(this instanceof ds)throw TypeError("Symbol is not a constructor!");var d=Sa(0<arguments.length?arguments[0]:void 0),p=function(s){this===zl&&p.call(bc,s),Ei(this,Mi)&&Ei(this[Mi],d)&&(this[Mi][d]=!1),x0(this,d,ml(1,s))};return na&&ag&&x0(zl,d,{configurable:!0,set:p}),Ix(d)},qo(ds.prototype,"toString",function(){return this._k}),cu.f=lp,Ua.f=Ul,Gf=sp=sg,Bh=A0,Ff=Yf,Uh.f=function(d){return Ix(ia(d))}),tn(tn.G+tn.W+tn.F*!Wf,{Symbol:ds});for(var lg="hasInstance isConcatSpreadable iterator match replace search species split toPrimitive toStringTag unscopables".split(" "),up=0;lg.length>up;)ia(lg[up++]);for(var ug=Po(ia.store),cp=0;ug.length>cp;)ap(ug[cp++]);tn(tn.S+tn.F*!Wf,"Symbol",{for:function(d){return Ei(kh,d+="")?kh[d]:kh[d]=ds(d)},keyFor:function(d){if(!Hh(d))throw TypeError(d+" is not a symbol!");for(var p in kh)if(kh[p]===d)return p},useSetter:function(){ag=!0},useSimple:function(){ag=!1}}),tn(tn.S+tn.F*!Wf,"Object",{create:function(d,p){return p===void 0?Xu(d):Rx(Xu(d),p)},defineProperty:Ul,defineProperties:Rx,getOwnPropertyDescriptor:lp,getOwnPropertyNames:sg,getOwnPropertySymbols:Yf}),y0&&tn(tn.S+tn.F*(!Wf||hs(function(){var d=ds();return Dc([d])!="[null]"||Dc({a:d})!="{}"||Dc(Object(d))!="{}"})),"JSON",{stringify:function(d){for(var p=[d],s=1,h;arguments.length>s;)p.push(arguments[s++]);if(h=s=p[1],(Oo(s)||d!==void 0)&&!Hh(d))return eg(s)||(s=function(_,x){if(typeof h=="function"&&(x=h.call(this,_,x)),!Hh(x))return x}),p[1]=s,Dc.apply(y0,p)}}),ds.prototype[og]||qo(ds.prototype,og,ds.prototype.valueOf),io(ds,"Symbol"),io(Math,"Math",!0),io(Un.JSON,"JSON",!0),ap("asyncIterator"),ap("observable");var hp=yi.Symbol,Zu=M(function(d){d.exports={default:hp,__esModule:!0}}),Lx=m(Zu),Fc=M(function(d,p){p.__esModule=!0,d=Yu&&Yu.__esModule?Yu:{default:Yu};var s=Zu&&Zu.__esModule?Zu:{default:Zu},h=typeof s.default=="function"&&typeof d.default=="symbol"?function(_){return typeof _}:function(_){return _&&typeof s.default=="function"&&_.constructor===s.default&&_!==s.default.prototype?"symbol":typeof _};p.default=typeof s.default=="function"&&h(d.default)==="symbol"?function(_){return typeof _>"u"?"undefined":h(_)}:function(_){return _&&typeof s.default=="function"&&_.constructor===s.default&&_!==s.default.prototype?"symbol":typeof _>"u"?"undefined":h(_)}}),Ta=m(Fc),jh=M(function(d,p){p.__esModule=!0;var s=Fc&&Fc.__esModule?Fc:{default:Fc};p.default=function(h,_){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||(typeof _>"u"?"undefined":(0,s.default)(_))!=="object"&&typeof _!="function"?h:_}}),ln=m(jh),w0=Object.setPrototypeOf||("__proto__"in{}?function(d,p,s){try{s=uo(Function.call,cu.f(Object.prototype,"__proto__").set,2),s(d,[]),p=!(d instanceof Array)}catch{p=!0}return function(h,_){if(ko(h),!Oo(_)&&_!==null)throw TypeError(_+": can't set as prototype!");return p?h.__proto__=_:s(h,_),h}}({},!1):void 0);tn(tn.S,"Object",{setPrototypeOf:w0});var C0=yi.Object.setPrototypeOf,fp=M(function(d){d.exports={default:C0,__esModule:!0}});m(fp),tn(tn.S,"Object",{create:Xu});var dp=yi.Object,cg=function(d,p){return dp.create(d,p)},Ts=M(function(d){d.exports={default:cg,__esModule:!0}}),Zf=m(Ts),Nc=M(function(d,p){function s(S){return S&&S.__esModule?S:{default:S}}p.__esModule=!0;var h=s(fp),_=s(Ts),x=s(Fc);p.default=function(S,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof C>"u"?"undefined":(0,x.default)(C)));S.prototype=(0,_.default)(C&&C.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),C&&(h.default?(0,h.default)(S,C):S.__proto__=C)}}),sn=m(Nc),pp=ia("toStringTag"),mp=Hs(function(){return arguments}())=="Arguments",Bc=function(d){var p;if(d===void 0)var s="Undefined";else{if(d===null)var h="Null";else{e:{var _=d=Object(d);try{h=_[pp];break e}catch{}h=void 0}h=typeof(s=h)=="string"?s:mp?Hs(d):(p=Hs(d))=="Object"&&typeof d.callee=="function"?"Arguments":p}s=h}return s},gp=ia("iterator"),Zs=yi.isIterable=function(d){return d=Object(d),d[gp]!==void 0||"@@iterator"in d||Ws.hasOwnProperty(Bc(d))},qf=M(function(d){d.exports={default:Zs,__esModule:!0}});m(qf);var _0=ia("iterator"),hg=yi.getIteratorMethod=function(d){if(d!=null)return d[_0]||d["@@iterator"]||Ws[Bc(d)]},ps=yi.getIterator=function(d){var p=hg(d);if(typeof p!="function")throw TypeError(d+" is not iterable!");return ko(p.call(d))},Kf=M(function(d){d.exports={default:ps,__esModule:!0}}),Gh=m(Kf),vp=M(function(d,p){p.__esModule=!0;var s=qf&&qf.__esModule?qf:{default:qf},h=Kf&&Kf.__esModule?Kf:{default:Kf};p.default=function(){return function(_,x){if(Array.isArray(_))return _;if((0,s.default)(Object(_))){var S=[],C=!0,R=!1,H=void 0;try{for(var Z=(0,h.default)(_),P;!(C=(P=Z.next()).done)&&(S.push(P.value),!x||S.length!==x);C=!0);}catch(F){R=!0,H=F}finally{try{!C&&Z.return&&Z.return()}finally{if(R)throw H}}return S}throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()}),Xi=m(vp),yp=function(d,p,s,h){try{return h?p(ko(s)[0],s[1]):p(s)}catch(_){throw p=d.return,p!==void 0&&ko(p.call(d)),_}},M0=ia("iterator"),Jf=Array.prototype,qs=ia("iterator"),kC=!1;try{[7][qs]().return=function(){kC=!0}}catch{}var HC=function(d,p){if(!p&&!kC)return!1;var s=!1;try{p=[7];var h=p[qs]();h.next=function(){return{done:s=!0}},p[qs]=function(){return h},d(p)}catch{}return s};tn(tn.S+tn.F*!HC(function(d){}),"Array",{from:function(d){var p=Object(Ba(d)),s=typeof this=="function"?this:Array,h=arguments.length,_=1<h?arguments[1]:void 0,x=_!==void 0,S=0,C=hg(p),R;if(x&&(_=uo(_,2<h?arguments[2]:void 0,2)),C!=null&&(s!=Array||C===void 0||Ws.Array!==C&&Jf[M0]!==C))for(p=C.call(p),s=new s;!(R=p.next()).done;S++)h=s,C=S,R=x?yp(p,_,[R.value,S],!0):R.value,C in h?Ua.f(h,C,ml(0,R)):h[C]=R;else for(h=js(p.length),s=new s(h);h>S;S++){C=s,R=S;var H=x?_(p[S],S):p[S];R in C?Ua.f(C,R,ml(0,H)):C[R]=H}return s.length=S,s}});var jC=yi.Array.from,gi=M(function(d){d.exports={default:jC,__esModule:!0}}),Qa=m(gi),GC=M(function(d,p){p.__esModule=!0;var s=gi&&gi.__esModule?gi:{default:gi};p.default=function(h){if(Array.isArray(h)){for(var _=0,x=Array(h.length);_<h.length;_++)x[_]=h[_];return x}return(0,s.default)(h)}}),Yn=m(GC),VC=jf.onFreeze;Nl("freeze",function(d){return function(p){return d&&Oo(p)?d(VC(p)):p}});var fg=yi.Object.freeze,Px=M(function(d){d.exports={default:fg,__esModule:!0}}),xp=m(Px),Cn=yi.JSON||(yi.JSON={stringify:JSON.stringify}),kl=function(d){return Cn.stringify.apply(Cn,arguments)},dg=M(function(d){d.exports={default:kl,__esModule:!0}}),Qf=m(dg),jo={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},WC=cu.f;Nl("getOwnPropertyDescriptor",function(){return function(d,p){return WC(ra(d),p)}});var pg=yi.Object,mg=function(d,p){return pg.getOwnPropertyDescriptor(d,p)},Ks=M(function(d){d.exports={default:mg,__esModule:!0}}),oo=m(Ks),$a=M(function(d){var p=Array.prototype.concat,s=Array.prototype.slice,h=d.exports=function(_){for(var x=[],S=0,C=_.length;S<C;S++){var R=_[S],H=(H=R)&&typeof H!="string"?H instanceof Array||Array.isArray(H)||0<=H.length&&(H.splice instanceof Function||oo(H,H.length-1)&&H.constructor.name!=="String"):!1;H?x=p.call(x,s.call(R)):x.push(R)}return x};h.wrap=function(_){return function(){return _(h(arguments))}}}),Js=M(function(d){function p(S,C,R){return Math.min(Math.max(C,S),R)}function s(S){return S=S.toString(16).toUpperCase(),2>S.length?"0"+S:S}var h={},_;for(_ in jo)jo.hasOwnProperty(_)&&(h[jo[_]]=_);var x=d.exports={to:{},get:{}};x.get=function(S){switch(S.substring(0,3).toLowerCase()){case"hsl":S=x.get.hsl(S);var C="hsl";break;case"hwb":S=x.get.hwb(S),C="hwb";break;default:S=x.get.rgb(S),C="rgb"}return S?{model:C,value:S}:null},x.get.rgb=function(S){if(!S)return null;var C=/^#([a-f0-9]{3,4})$/i,R=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,H=/^rgba?\(\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,Z=/(\D+)/,P=[0,0,0,1],F;if(F=S.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(C=F[2],F=F[1],S=0;3>S;S++)R=2*S,P[S]=parseInt(F.slice(R,R+2),16);C&&(P[3]=Math.round(parseInt(C,16)/255*100)/100)}else if(F=S.match(C)){for(F=F[1],C=F[3],S=0;3>S;S++)P[S]=parseInt(F[S]+F[S],16);C&&(P[3]=Math.round(parseInt(C+C,16)/255*100)/100)}else if(F=S.match(R)){for(S=0;3>S;S++)P[S]=parseInt(F[S+1],0);F[4]&&(P[3]=parseFloat(F[4]))}else if(F=S.match(H)){for(S=0;3>S;S++)P[S]=Math.round(2.55*parseFloat(F[S+1]));F[4]&&(P[3]=parseFloat(F[4]))}else return(F=S.match(Z))?F[1]==="transparent"?[0,0,0,0]:(P=jo[F[1]],P?(P[3]=1,P):null):null;for(S=0;3>S;S++)P[S]=p(P[S],0,255);return P[3]=p(P[3],0,1),P},x.get.hsl=function(S){if(!S)return null;var C=S.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(C){var R=parseFloat(C[4]);S=(parseFloat(C[1])+360)%360;var H=p(parseFloat(C[2]),0,100);return C=p(parseFloat(C[3]),0,100),R=p(isNaN(R)?1:R,0,1),[S,H,C,R]}return null},x.get.hwb=function(S){if(!S)return null;var C=S.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(C){var R=parseFloat(C[4]);S=(parseFloat(C[1])%360+360)%360;var H=p(parseFloat(C[2]),0,100);return C=p(parseFloat(C[3]),0,100),R=p(isNaN(R)?1:R,0,1),[S,H,C,R]}return null},x.to.hex=function(){var S=$a(arguments);return"#"+s(S[0])+s(S[1])+s(S[2])+(1>S[3]?s(Math.round(255*S[3])):"")},x.to.rgb=function(){var S=$a(arguments);return 4>S.length||S[3]===1?"rgb("+Math.round(S[0])+", "+Math.round(S[1])+", "+Math.round(S[2])+")":"rgba("+Math.round(S[0])+", "+Math.round(S[1])+", "+Math.round(S[2])+", "+S[3]+")"},x.to.rgb.percent=function(){var S=$a(arguments),C=Math.round(S[0]/255*100),R=Math.round(S[1]/255*100),H=Math.round(S[2]/255*100);return 4>S.length||S[3]===1?"rgb("+C+"%, "+R+"%, "+H+"%)":"rgba("+C+"%, "+R+"%, "+H+"%, "+S[3]+")"},x.to.hsl=function(){var S=$a(arguments);return 4>S.length||S[3]===1?"hsl("+S[0]+", "+S[1]+"%, "+S[2]+"%)":"hsla("+S[0]+", "+S[1]+"%, "+S[2]+"%, "+S[3]+")"},x.to.hwb=function(){var S=$a(arguments),C="";return 4<=S.length&&S[3]!==1&&(C=", "+S[3]),"hwb("+S[0]+", "+S[1]+"%, "+S[2]+"%"+C+")"},x.to.keyword=function(S){return h[S.slice(0,3)]}}),ms=M(function(d){var p={};for(_ in jo)jo.hasOwnProperty(_)&&(p[jo[_]]=_);var s=d.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},h;for(h in s)if(s.hasOwnProperty(h)){if(!("channels"in s[h]))throw Error("missing channels property: "+h);if(!("labels"in s[h]))throw Error("missing channel labels property: "+h);if(s[h].labels.length!==s[h].channels)throw Error("channel and label counts mismatch: "+h);d=s[h].channels;var _=s[h].labels;delete s[h].channels,delete s[h].labels,Object.defineProperty(s[h],"channels",{value:d}),Object.defineProperty(s[h],"labels",{value:_})}s.rgb.hsl=function(x){var S=x[0]/255,C=x[1]/255,R=x[2]/255;x=Math.min(S,C,R);var H=Math.max(S,C,R),Z=H-x,P;return H===x?P=0:S===H?P=(C-R)/Z:C===H?P=2+(R-S)/Z:R===H&&(P=4+(S-C)/Z),P=Math.min(60*P,360),0>P&&(P+=360),S=(x+H)/2,[P,100*(H===x?0:.5>=S?Z/(H+x):Z/(2-H-x)),100*S]},s.rgb.hsv=function(x){var S,C=x[0]/255,R=x[1]/255,H=x[2]/255,Z=Math.max(C,R,H),P=Z-Math.min(C,R,H);if(P===0)var F=S=0;else{S=P/Z,x=(Z-C)/6/P+.5;var V=(Z-R)/6/P+.5;P=(Z-H)/6/P+.5,C===Z?F=P-V:R===Z?F=1/3+x-P:H===Z&&(F=2/3+V-x),0>F?F+=1:1<F&&--F}return[360*F,100*S,100*Z]},s.rgb.hwb=function(x){var S=x[0],C=x[1],R=x[2];x=s.rgb.hsl(x)[0];var H=1/255*Math.min(S,Math.min(C,R));return R=1-1/255*Math.max(S,Math.max(C,R)),[x,100*H,100*R]},s.rgb.cmyk=function(x){var S=x[0]/255,C=x[1]/255;x=x[2]/255;var R=Math.min(1-S,1-C,1-x);return[100*((1-S-R)/(1-R)||0),100*((1-C-R)/(1-R)||0),100*((1-x-R)/(1-R)||0),100*R]},s.rgb.keyword=function(x){var S=p[x];if(S)return S;S=1/0;var C;for(C in jo)if(jo.hasOwnProperty(C)){var R=jo[C];if(R=Math.pow(x[0]-R[0],2)+Math.pow(x[1]-R[1],2)+Math.pow(x[2]-R[2],2),R<S){S=R;var H=C}}return H},s.keyword.rgb=function(x){return jo[x]},s.rgb.xyz=function(x){var S=x[0]/255,C=x[1]/255;return x=x[2]/255,S=.04045<S?Math.pow((S+.055)/1.055,2.4):S/12.92,C=.04045<C?Math.pow((C+.055)/1.055,2.4):C/12.92,x=.04045<x?Math.pow((x+.055)/1.055,2.4):x/12.92,[100*(.4124*S+.3576*C+.1805*x),100*(.2126*S+.7152*C+.0722*x),100*(.0193*S+.1192*C+.9505*x)]},s.rgb.lab=function(x){var S=s.rgb.xyz(x);x=S[0];var C=S[1];return S=S[2],x/=95.047,C/=100,S/=108.883,x=.008856<x?Math.pow(x,1/3):7.787*x+16/116,C=.008856<C?Math.pow(C,1/3):7.787*C+16/116,S=.008856<S?Math.pow(S,1/3):7.787*S+16/116,[116*C-16,500*(x-C),200*(C-S)]},s.hsl.rgb=function(x){var S=x[0]/360,C=x[1]/100;if(x=x[2]/100,C===0){var R=255*x;return[R,R,R]}C=.5>x?x*(1+C):x+C-x*C,x=2*x-C;for(var H=[0,0,0],Z=0;3>Z;Z++)R=S+1/3*-(Z-1),0>R&&R++,1<R&&R--,R=1>6*R?x+6*(C-x)*R:1>2*R?C:2>3*R?x+(C-x)*(2/3-R)*6:x,H[Z]=255*R;return H},s.hsl.hsv=function(x){var S=x[0],C=x[1]/100;x=x[2]/100;var R=C,H=Math.max(x,.01);return x*=2,C*=1>=x?x:2-x,R*=1>=H?H:2-H,[S,100*(x===0?2*R/(H+R):2*C/(x+C)),(x+C)/2*100]},s.hsv.rgb=function(x){var S=x[0]/60,C=x[1]/100;x=x[2]/100;var R=Math.floor(S)%6,H=S-Math.floor(S);S=255*x*(1-C);var Z=255*x*(1-C*H);switch(C=255*x*(1-C*(1-H)),x*=255,R){case 0:return[x,C,S];case 1:return[Z,x,S];case 2:return[S,x,C];case 3:return[S,Z,x];case 4:return[C,S,x];case 5:return[x,S,Z]}},s.hsv.hsl=function(x){var S=x[0],C=x[1]/100;x=x[2]/100;var R=Math.max(x,.01),H=(2-C)*R;return R=C*R/(1>=H?H:2-H)||0,[S,100*R,(2-C)*x/2*100]},s.hwb.rgb=function(x){var S=x[0]/360,C=x[1]/100;x=x[2]/100;var R=C+x;switch(1<R&&(C/=R,x/=R),R=Math.floor(6*S),x=1-x,S=6*S-R,R&1&&(S=1-S),S=C+S*(x-C),R){default:case 6:case 0:R=x;var H=S;break;case 1:R=S,H=x;break;case 2:R=C,H=x,C=S;break;case 3:R=C,H=S,C=x;break;case 4:R=S,H=C,C=x;break;case 5:R=x,H=C,C=S}return[255*R,255*H,255*C]},s.cmyk.rgb=function(x){var S=x[3]/100;return[255*(1-Math.min(1,x[0]/100*(1-S)+S)),255*(1-Math.min(1,x[1]/100*(1-S)+S)),255*(1-Math.min(1,x[2]/100*(1-S)+S))]},s.xyz.rgb=function(x){var S=x[0]/100,C=x[1]/100,R=x[2]/100;x=3.2406*S+-1.5372*C+-.4986*R;var H=-.9689*S+1.8758*C+.0415*R;return S=.0557*S+-.204*C+1.057*R,x=.0031308<x?1.055*Math.pow(x,1/2.4)-.055:12.92*x,H=.0031308<H?1.055*Math.pow(H,1/2.4)-.055:12.92*H,S=.0031308<S?1.055*Math.pow(S,1/2.4)-.055:12.92*S,x=Math.min(Math.max(0,x),1),H=Math.min(Math.max(0,H),1),S=Math.min(Math.max(0,S),1),[255*x,255*H,255*S]},s.xyz.lab=function(x){var S=x[0],C=x[1];return x=x[2],S/=95.047,C/=100,x/=108.883,S=.008856<S?Math.pow(S,1/3):7.787*S+16/116,C=.008856<C?Math.pow(C,1/3):7.787*C+16/116,x=.008856<x?Math.pow(x,1/3):7.787*x+16/116,[116*C-16,500*(S-C),200*(C-x)]},s.lab.xyz=function(x){var S=x[1],C=x[2];x=(x[0]+16)/116,S=S/500+x,C=x-C/200;var R=Math.pow(x,3),H=Math.pow(S,3),Z=Math.pow(C,3);return[95.047*(.008856<H?H:(S-16/116)/7.787),100*(.008856<R?R:(x-16/116)/7.787),108.883*(.008856<Z?Z:(C-16/116)/7.787)]},s.lab.lch=function(x){var S=x[0],C=x[1];x=x[2];var R=360*Math.atan2(x,C)/2/Math.PI;return 0>R&&(R+=360),[S,Math.sqrt(C*C+x*x),R]},s.lch.lab=function(x){var S=x[0],C=x[1];return x=x[2]/360*2*Math.PI,[S,C*Math.cos(x),C*Math.sin(x)]},s.rgb.ansi16=function(x){var S=x[0],C=x[1],R=x[2],H=1 in arguments?arguments[1]:s.rgb.hsv(x)[2];return H=Math.round(H/50),H===0?30:(S=30+(Math.round(R/255)<<2|Math.round(C/255)<<1|Math.round(S/255)),H===2&&(S+=60),S)},s.hsv.ansi16=function(x){return s.rgb.ansi16(s.hsv.rgb(x),x[2])},s.rgb.ansi256=function(x){var S=x[0],C=x[1];return x=x[2],S===C&&C===x?8>S?16:248<S?231:Math.round((S-8)/247*24)+232:16+36*Math.round(S/255*5)+6*Math.round(C/255*5)+Math.round(x/255*5)},s.ansi16.rgb=function(x){var S=x%10;return S===0||S===7?(50<x&&(S+=3.5),S=S/10.5*255,[S,S,S]):(x=.5*(~~(50<x)+1),[(S&1)*x*255,(S>>1&1)*x*255,(S>>2&1)*x*255])},s.ansi256.rgb=function(x){if(232<=x){var S=10*(x-232)+8;return[S,S,S]}x-=16,S=Math.floor(x/36)/5*255;var C=Math.floor((x%=36)/6)/5*255;return[S,C,x%6/5*255]},s.rgb.hex=function(x){return x=(((Math.round(x[0])&255)<<16)+((Math.round(x[1])&255)<<8)+(Math.round(x[2])&255)).toString(16).toUpperCase(),"000000".substring(x.length)+x},s.hex.rgb=function(x){if(x=x.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i),!x)return[0,0,0];var S=x[0];return x[0].length===3&&(S=S.split("").map(function(C){return C+C}).join("")),x=parseInt(S,16),[x>>16&255,x>>8&255,x&255]},s.rgb.hcg=function(x){var S=x[0]/255,C=x[1]/255;x=x[2]/255;var R=Math.max(Math.max(S,C),x),H=Math.min(Math.min(S,C),x),Z=R-H;return[(0>=Z?0:R===S?(C-x)/Z%6:R===C?2+(x-S)/Z:(S-C)/Z+8)/6%1*360,100*Z,100*(1>Z?H/(1-Z):0)]},s.hsl.hcg=function(x){var S=x[1]/100,C=x[2]/100,R=0;return S=.5>C?2*S*C:2*S*(1-C),1>S&&(R=(C-.5*S)/(1-S)),[x[0],100*S,100*R]},s.hsv.hcg=function(x){var S=x[2]/100,C=x[1]/100*S,R=0;return 1>C&&(R=(S-C)/(1-C)),[x[0],100*C,100*R]},s.hcg.rgb=function(x){var S=x[1]/100,C=x[2]/100;if(S===0)return[255*C,255*C,255*C];var R=[0,0,0];x=x[0]/360%1*6;var H=x%1,Z=1-H;switch(Math.floor(x)){case 0:R[0]=1,R[1]=H,R[2]=0;break;case 1:R[0]=Z,R[1]=1,R[2]=0;break;case 2:R[0]=0,R[1]=1,R[2]=H;break;case 3:R[0]=0,R[1]=Z,R[2]=1;break;case 4:R[0]=H,R[1]=0,R[2]=1;break;default:R[0]=1,R[1]=0,R[2]=Z}return C*=1-S,[255*(S*R[0]+C),255*(S*R[1]+C),255*(S*R[2]+C)]},s.hcg.hsv=function(x){var S=x[1]/100,C=S+x[2]/100*(1-S),R=0;return 0<C&&(R=S/C),[x[0],100*R,100*C]},s.hcg.hsl=function(x){var S=x[1]/100,C=x[2]/100*(1-S)+.5*S,R=0;return 0<C&&.5>C?R=S/(2*C):.5<=C&&1>C&&(R=S/(2*(1-C))),[x[0],100*R,100*C]},s.hcg.hwb=function(x){var S=x[1]/100,C=S+x[2]/100*(1-S);return[x[0],100*(C-S),100*(1-C)]},s.hwb.hcg=function(x){var S=1-x[2]/100,C=S-x[1]/100,R=0;return 1>C&&(R=(S-C)/(1-C)),[x[0],100*C,100*R]},s.apple.rgb=function(x){return[x[0]/65535*255,x[1]/65535*255,x[2]/65535*255]},s.rgb.apple=function(x){return[x[0]/255*65535,x[1]/255*65535,x[2]/255*65535]},s.gray.rgb=function(x){return[x[0]/100*255,x[0]/100*255,x[0]/100*255]},s.gray.hsl=s.gray.hsv=function(x){return[0,0,x[0]]},s.gray.hwb=function(x){return[0,100,x[0]]},s.gray.cmyk=function(x){return[0,0,0,x[0]]},s.gray.lab=function(x){return[x[0],0,0]},s.gray.hex=function(x){return x=Math.round(x[0]/100*255)&255,x=((x<<16)+(x<<8)+x).toString(16).toUpperCase(),"000000".substring(x.length)+x},s.rgb.gray=function(x){return[(x[0]+x[1]+x[2])/3/255*100]}}),zc=function(d){for(var p={},s=Eo(ms),h=s.length,_=0;_<h;_++)p[s[_]]={distance:-1,parent:null};for(s=[d],p[d].distance=0;s.length;){d=s.pop(),h=Eo(ms[d]),_=h.length;for(var x=0;x<_;x++){var S=h[x],C=p[S];C.distance===-1&&(C.distance=p[d].distance+1,C.parent=d,s.unshift(S))}}for(s={},d=Eo(p),h=d.length,_=0;_<h;_++){var R=d[_];if(p[R].parent!==null){x=R,S=p,C=[S[R].parent,R];var H=ms[S[R].parent][R];for(R=S[R].parent;S[R].parent;)C.unshift(S[R].parent),H=L(ms[S[R].parent][R],H),R=S[R].parent;H.conversion=C,s[x]=H}}return s},Es={};Eo(ms).forEach(function(d){Es[d]={},Object.defineProperty(Es[d],"channels",{value:ms[d].channels}),Object.defineProperty(Es[d],"labels",{value:ms[d].labels});var p=zc(d);Eo(p).forEach(function(s){var h=p[s];Es[d][s]=U(h),Es[d][s].raw=z(h)})});var ga=Es,Hl=[].slice,Vh=["keyword","gray","hex"],po={};Eo(ga).forEach(function(d){po[Hl.call(ga[d].labels).sort().join("")]=d});var Ap={};W.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(d){var p=this.model in Js.to?this:this.rgb();return p=p.round(typeof d=="number"?d:1),d=p.valpha===1?p.color:p.color.concat(this.valpha),Js.to[p.model](d)},percentString:function(d){return d=this.rgb().round(typeof d=="number"?d:1),d=d.valpha===1?d.color:d.color.concat(this.valpha),Js.to.rgb.percent(d)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var d={},p=ga[this.model].channels,s=ga[this.model].labels,h=0;h<p;h++)d[s[h]]=this.color[h];return this.valpha!==1&&(d.alpha=this.valpha),d},unitArray:function(){var d=this.rgb().color;return d[0]/=255,d[1]/=255,d[2]/=255,this.valpha!==1&&d.push(this.valpha),d},unitObject:function(){var d=this.rgb().object();return d.r/=255,d.g/=255,d.b/=255,this.valpha!==1&&(d.alpha=this.valpha),d},round:function(d){return d=Math.max(d||0,0),new W(this.color.map(J(d)).concat(this.valpha),this.model)},alpha:function(d){return arguments.length?new W(this.color.concat(Math.max(0,Math.min(1,d))),this.model):this.valpha},red:te("rgb",0,ae(255)),green:te("rgb",1,ae(255)),blue:te("rgb",2,ae(255)),hue:te(["hsl","hsv","hsl","hwb","hcg"],0,function(d){return(d%360+360)%360}),saturationl:te("hsl",1,ae(100)),lightness:te("hsl",2,ae(100)),saturationv:te("hsv",1,ae(100)),value:te("hsv",2,ae(100)),chroma:te("hcg",1,ae(100)),gray:te("hcg",2,ae(100)),white:te("hwb",1,ae(100)),wblack:te("hwb",2,ae(100)),cyan:te("cmyk",0,ae(100)),magenta:te("cmyk",1,ae(100)),yellow:te("cmyk",2,ae(100)),black:te("cmyk",3,ae(100)),x:te("xyz",0,ae(100)),y:te("xyz",1,ae(100)),z:te("xyz",2,ae(100)),l:te("lab",0,ae(100)),a:te("lab",1),b:te("lab",2),keyword:function(d){return arguments.length?new W(d):ga[this.model].keyword(this.color)},hex:function(d){return arguments.length?new W(d):Js.to.hex(this.rgb().round().color)},rgbNumber:function(){var d=this.rgb().color;return(d[0]&255)<<16|(d[1]&255)<<8|d[2]&255},luminosity:function(){for(var d=this.rgb().color,p=[],s=0;s<d.length;s++){var h=d[s]/255;p[s]=.03928>=h?h/12.92:Math.pow((h+.055)/1.055,2.4)}return .2126*p[0]+.7152*p[1]+.0722*p[2]},contrast:function(d){var p=this.luminosity();return d=d.luminosity(),p>d?(p+.05)/(d+.05):(d+.05)/(p+.05)},level:function(d){return d=this.contrast(d),7.1<=d?"AAA":4.5<=d?"AA":""},isDark:function(){var d=this.rgb().color;return 128>(299*d[0]+587*d[1]+114*d[2])/1e3},isLight:function(){return!this.isDark()},negate:function(){for(var d=this.rgb(),p=0;3>p;p++)d.color[p]=255-d.color[p];return d},lighten:function(d){var p=this.hsl();return p.color[2]+=p.color[2]*d,p},darken:function(d){var p=this.hsl();return p.color[2]-=p.color[2]*d,p},saturate:function(d){var p=this.hsl();return p.color[1]+=p.color[1]*d,p},desaturate:function(d){var p=this.hsl();return p.color[1]-=p.color[1]*d,p},whiten:function(d){var p=this.hwb();return p.color[1]+=p.color[1]*d,p},blacken:function(d){var p=this.hwb();return p.color[2]+=p.color[2]*d,p},grayscale:function(){var d=this.rgb().color;return d=.3*d[0]+.59*d[1]+.11*d[2],W.rgb(d,d,d)},fade:function(d){return this.alpha(this.valpha-this.valpha*d)},opaquer:function(d){return this.alpha(this.valpha+this.valpha*d)},rotate:function(d){var p=this.hsl(),s=p.color[0];return s=(s+d)%360,p.color[0]=0>s?360+s:s,p},mix:function(d,p){if(!d||!d.rgb)throw Error('Argument to "mix" was not a Color instance, but rather an instance of '+(typeof d>"u"?"undefined":Ta(d)));d=d.rgb();var s=this.rgb();p=p===void 0?.5:p;var h=2*p-1,_=d.alpha()-s.alpha();return h=((h*_===-1?h:(h+_)/(1+h*_))+1)/2,_=1-h,W.rgb(h*d.red()+_*s.red(),h*d.green()+_*s.green(),h*d.blue()+_*s.blue(),d.alpha()*p+s.alpha()*(1-p))}},Eo(ga).forEach(function(d){if(Vh.indexOf(d)===-1){var p=ga[d].channels;W.prototype[d]=function(){if(this.model===d)return new W(this);if(arguments.length)return new W(arguments,d);var s=typeof arguments[p]=="number"?p:this.valpha,h=ga[this.model][d].raw(this.color);return h=Array.isArray(h)?h:[h],new W(h.concat(s),d)},W[d]=function(s){return typeof s=="number"&&(s=ve(Hl.call(arguments),p)),new W(s,d)}}}),Re(Ee.prototype,{equals:function(d){return this.lat===d.lat&&this.lng===d.lng},clone:function(){return new Ee(this.lat,this.lng)},getLngSpan:function(d){return d=Math.abs(d-this.lng),180<d&&(d=360-d),d},sub:function(d){return new Ee(this.lat-d.lat,this.lng-d.lng)},toString:function(){return"Point"}}),Re(_e,{EARTHRADIUS:637099681e-2,MCBAND:[1289059486e-2,836237787e-2,5591021,348198983e-2,167804312e-2,0],LLBAND:[75,60,45,30,15,0],MC2LL:[[1410526172116255e-23,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,173379812e-1],[-7435856389565537e-24,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1026014486e-2],[-3030883460898826e-23,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,685681737e-2],[-1981981304930552e-23,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,448277706e-2],[309191371068437e-23,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,25551644e-1],[2890871144776878e-24,8983055095805407e-21,-3068298e-14,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],LL2MC:[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]],getDistanceByMC:function(d,p){if(!d||!p||(d=this.convertMC2LL(d),!d))return 0;var s=this.toRadians(d.lng);if(d=this.toRadians(d.lat),p=this.convertMC2LL(p),!p)return 0;var h=this.toRadians(p.lng);return p=this.toRadians(p.lat),this.getDistance(s,h,d,p)},getDistanceByLL:function(d,p){if(!d||!p)return 0;d.lng=this.getLoop(d.lng,-180,180),d.lat=this.getRange(d.lat,-74,74),p.lng=this.getLoop(p.lng,-180,180),p.lat=this.getRange(p.lat,-74,74);var s=this.toRadians(d.lng),h=this.toRadians(d.lat);return d=this.toRadians(p.lng),p=this.toRadians(p.lat),this.getDistance(s,d,h,p)},convertMC2LL:function(d){if(d==null)return new Ee(0,0);if(180>d.lng&&-180<d.lng&&90>d.lat&&-90<d.lat)return d;if(window.BMAPGL_84)return new Ee(180/Math.PI*(2*Math.atan(Math.exp(d.lat/2003750834e-2*180*Math.PI/180))-Math.PI/2),d.lng/2003750834e-2*180);for(var p=new Ee(Math.abs(d.lng),Math.abs(d.lat)),s=0;s<this.MCBAND.length;s++)if(p.lat>=this.MCBAND[s]){var h=this.MC2LL[s];break}return d=this.convertor(d,h),d=new Ee(d.lng.toFixed(6),d.lat.toFixed(6))},convertLL2MC:function(d){if(d==null)return new Ee(0,0);if(180<d.lng||-180>d.lng||90<d.lat||-90>d.lat)return d;if(window.BMAPGL_84){var p=d.lat*Math.PI/180;return new Ee(d.lng*Math.PI/180*6378137,31890685e-1*Math.log((1+Math.sin(p))/(1-Math.sin(p))))}d.lng=this.getLoop(d.lng,-180,180),d.lat=this.getRange(d.lat,-74,74),p=new Ee(d.lng,d.lat);for(var s=0;s<this.LLBAND.length;s++)if(p.lat>=this.LLBAND[s]){var h=this.LL2MC[s];break}if(!h){for(s=0;s<this.LLBAND.length;s++)if(p.lat<=-this.LLBAND[s]){h=this.LL2MC[s];break}}return d=this.convertor(d,h),d=new Ee(Number(d.lng.toFixed(2)),Number(d.lat.toFixed(2)))},convertor:function(d,p){if(d&&p){var s=p[0]+p[1]*Math.abs(d.lng),h=Math.abs(d.lat)/p[9];return p=p[2]+p[3]*h+p[4]*h*h+p[5]*h*h*h+p[6]*h*h*h*h+p[7]*h*h*h*h*h+p[8]*h*h*h*h*h*h,s*=0>d.lng?-1:1,p*=0>d.lat?-1:1,new Ee(s,p)}},getDistance:function(d,p,s,h){return this.EARTHRADIUS*Math.acos(Math.sin(s)*Math.sin(h)+Math.cos(s)*Math.cos(h)*Math.cos(p-d))},toRadians:function(d){return Math.PI*d/180},toDegrees:function(d){return 180*d/Math.PI},getRange:function(d,p,s){return p!=null&&(d=Math.max(d,p)),s!=null&&(d=Math.min(d,s)),d},getLoop:function(d,p,s){for(;d>s;)d-=s-p;for(;d<p;)d+=s-p;return d}}),Re(_e.prototype,{lngLatToMercator:function(d){return _e.convertLL2MC(d)},lngLatToPoint:function(d){return d=_e.convertLL2MC(d),new De(d.lng,d.lat)},mercatorToLngLat:function(d){return _e.convertMC2LL(d)},pointToLngLat:function(d){return d=new Ee(d.x,d.y),_e.convertMC2LL(d)},pointToPixel:function(d,p,s,h,_){if(d)return d=this.lngLatToMercator(d,_),p=this.getZoomUnits(p),new De(Math.round((d.lng-s.lng)/p+h.width/2),Math.round((s.lat-d.lat)/p+h.height/2))},pixelToPoint:function(d,p,s,h,_){if(d)return p=this.getZoomUnits(p),d=new Ee(s.lng+p*(d.x-h.width/2),s.lat-p*(d.y-h.height/2)),this.mercatorToLngLat(d,_)},getZoomUnits:function(d){return Math.pow(2,18-d)}}),Xe.prototype.setMax=function(d){this.max=d||100},Xe.prototype.setMin=function(d){this.min=d||0},Xe.prototype.setMaxSize=function(d){this.maxSize=d||35},Xe.prototype.setMinSize=function(d){this.minSize=d||0},Xe.prototype.initPalette=function(){var d=this.gradient,p=this.paletteCtx=new We(256,1).getContext("2d"),s=p.createLinearGradient(0,0,256,1);Eo(d).forEach(function(h){s.addColorStop(parseFloat(h),d[h])}),p.fillStyle=s,p.fillRect(0,0,256,1),p.imageData=p.getImageData(0,0,256,1).data},Xe.prototype.getColor=function(d){return d=this.getImageData(d),"rgba("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]/256+")"},Xe.prototype.getImageData=function(d){var p=this.paletteCtx.imageData;if(d===void 0)return p;var s=this.max,h=this.min;return d>s&&(d=s),d<h&&(d=h),d=4*Math.floor((d-h)/(s-h)*255),[p[d],p[d+1],p[d+2],p[d+3]]},Xe.prototype.getSize=function(d){var p=this.max,s=this.min,h=this.maxSize,_=this.minSize;return d>p&&(d=p),d<s&&(d=s),_+(d-s)/(p-s)*(h-_)},et.prototype._initialize=function(){this.v0=this._normalizaCoord(this.options.start),this.v3=this._normalizaCoord(this.options.end),this.v1=this._getControlPoint(this.v0,this.v3,4),this.v2=this._getControlPoint(this.v3,this.v0,5),this.v0[2]||(this.v0[2]=0),this.v3[2]||(this.v3[2]=0)},et.prototype.setOptions=function(d){this.options=d||{},this._initialize()},et.prototype.getPoints=function(d){d===void 0&&(d=20);for(var p=[],s=0;s<=d;s++)p.push(this._getPoint(s/d));return p},et.prototype._normalizaCoord=function(d){return d?(d=_e.convertLL2MC({lng:Number(d[0]),lat:Number(d[1])}),[d.lng,d.lat]):[]},et.prototype._getControlPoint=function(d,p){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1;return[].concat(Yn(this._getQuarter(d,p)),[this._getDistance(d,p)/s])},et.prototype._getQuarter=function(d,p){return[(3*d[0]+p[0])/4,(3*d[1]+p[1])/4]},et.prototype._getDistance=function(d,p){return Math.sqrt(Math.pow(d[0]-p[0],2)+Math.pow(d[1]-p[1],2))},et.prototype._getPoint=function(d){var p=[],s=this.v0,h=this.v1,_=this.v2,x=this.v3;return p.push(Ye(d,s[0],h[0],_[0],x[0]),Ye(d,s[1],h[1],_[1],x[1]),Ye(d,s[2],h[2],_[2],x[2])),p},at.prototype._initialize=function(){this.points=this.options.points||this.options.point||[],this.greatCirclePoints=[];for(var d=[],p=0;p<this.points.length;p++){var s=this._normalizaCoord(this.points[p]);s&&d.push(s)}this.points=d},at.prototype.setOptions=function(d){this.options=d||{},this._initialize()},at.prototype.getPoints=function(){if(this.greatCirclePoints.length===0)for(var d=0;d<this.points.length-1;d++)this._calcGreatCirclePoints(this.points[d],this.points[d+1]);return this.greatCirclePoints},at.prototype._normalizaCoord=function(d){if(!d)return null;d instanceof Array&&(d={lng:Number(d[0]),lat:Number(d[1])});var p=_e.convertLL2MC(d);return d=_e.convertMC2LL(d),p.latLng=d,p},at.prototype._calcGreatCirclePoints=function(d,p){var s=d.latLng,h=p.latLng;if(!de(s.lng,h.lng)||!de(s.lat,h.lat)){var _=_e.getDistance(he(s.lng),he(s.lat),he(h.lng),he(h.lat));if(!(25e4>_)){_=Math.round(_/15e4);var x=this._calcAngularDistance(s,h);this.greatCirclePoints.push([d.lng,d.lat]);for(var S=0;S<_;S++){var C=this._calcMiddlePoint(s,h,S/_,x);C=_e.convertLL2MC(C);var R=ot(C,d);30037726<R&&(C.lng=C.lng<d.lng?C.lng+this.WORLD_SIZE_MC:C.lng-this.WORLD_SIZE_MC),this.greatCirclePoints.push([C.lng,C.lat]),d=C}R=ot(p,d),30037726<R&&(p.lng=p.lng<d.lng?p.lng+this.WORLD_SIZE_MC:p.lng-this.WORLD_SIZE_MC),this.greatCirclePoints.push([p.lng,p.lat])}}},at.prototype._calcAngularDistance=function(d,p){var s=he(d.lat),h=he(p.lat);return d=he(d.lng),p=he(p.lng),Math.acos(Math.sin(s)*Math.sin(h)+Math.cos(s)*Math.cos(h)*Math.cos(Math.abs(p-d)))},at.prototype._calcMiddlePoint=function(d,p,s,h){var _=p.lat,x=d.lng;p=p.lng,d=he(d.lat),_=he(_),x=he(x);var S=he(p);return p=Math.sin((1-s)*h)/Math.sin(h),h=Math.sin(s*h)/Math.sin(h),s=p*Math.cos(d)*Math.cos(x)+h*Math.cos(_)*Math.cos(S),x=p*Math.cos(d)*Math.sin(x)+h*Math.cos(_)*Math.sin(S),d=Math.atan2(p*Math.sin(d)+h*Math.sin(_),Math.sqrt(Math.pow(s,2)+Math.pow(x,2))),new Ee(oe(Math.atan2(x,s)),oe(d))};var Uc=function(){function d(){var p=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};hr(this,d),this.options=p,this._initialize()}return Mr(d,[{key:"_initialize",value:function(){this.points=this.options.points}},{key:"_normalizaCoord",value:function(p){return p?(p instanceof Array&&(p={lng:Number(p[0]),lat:Number(p[1])}),_e.convertLL2MC(p)):null}},{key:"setOptions",value:function(){this.options=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},this._initialize()}},{key:"getPoints",value:function(p){for(var s=[],h=this.points,_=0;_<h.length-1;_++){var x=this.getCurveByTwoPoints(this._normalizaCoord(h[_]),this._normalizaCoord(h[_+1]),p);x&&0<x.length&&(s=s.concat(x))}return s}},{key:"getCurveByTwoPoints",value:function(p,s){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:20;if(!p||!s)return null;var _=[],x=0;if((typeof s>"u"?"undefined":Ta(s))===void 0)typeof _>"u"||Ta(_);else{var S=parseFloat(p.lat),C=parseFloat(s.lat),R=parseFloat(p.lng),H=parseFloat(s.lng);H>R&&180<parseFloat(H-R)&&0>R&&(R=parseFloat(360+R),H=parseFloat(360+H));var Z=0;if(C===S)var P=0,F=R-H;else H===R?(P=Math.PI/2,F=S-C):(P=Math.atan((C-S)/(H-R)),F=(C-S)/Math.sin(P));for(Z===0&&(Z=P+Math.PI/5),F/=2,P=F*Math.cos(Z)+R,Z=F*Math.sin(Z)+S,F=0;F<h+1;F++){var V=R*(1-2*x+x*x)+P*(2*x-2*x*x)+H*x*x,j=s.lng;_.push([0>p.lng&&0<j?V-360:V,S*(1-2*x+x*x)+Z*(2*x-2*x*x)+C*x*x]),x+=1/h}return _}}}]),d}(),gg=[{n:"北京",g:"116.395645,39.929986|12"},{n:"上海",g:"121.487899,31.249162|12"},{n:"天津",g:"117.210813,39.14393|12"},{n:"重庆",g:"106.530635,29.544606|12"}],qu=[{n:"安徽",g:"117.216005,31.859252|8",cities:[{n:"合肥",g:"117.282699,31.866942|12"},{n:"安庆",g:"117.058739,30.537898|13"},{n:"蚌埠",g:"117.35708,32.929499|13"},{n:"亳州",g:"115.787928,33.871211|13"},{n:"巢湖",g:"117.88049,31.608733|13"},{n:"池州",g:"117.494477,30.660019|14"},{n:"滁州",g:"118.32457,32.317351|13"},{n:"阜阳",g:"115.820932,32.901211|13"},{n:"淮北",g:"116.791447,33.960023|13"},{n:"淮南",g:"117.018639,32.642812|13"},{n:"黄山",g:"118.29357,29.734435|13"},{n:"六安",g:"116.505253,31.755558|13"},{n:"马鞍山",g:"118.515882,31.688528|13"},{n:"宿州",g:"116.988692,33.636772|13"},{n:"铜陵",g:"117.819429,30.94093|14"},{n:"芜湖",g:"118.384108,31.36602|12"},{n:"宣城",g:"118.752096,30.951642|13"}]},{n:"福建",g:"117.984943,26.050118|8",cities:[{n:"福州",g:"119.330221,26.047125|12"},{n:"龙岩",g:"117.017997,25.078685|13"},{n:"南平",g:"118.181883,26.643626|13"},{n:"宁德",g:"119.542082,26.656527|14"},{n:"莆田",g:"119.077731,25.44845|13"},{n:"泉州",g:"118.600362,24.901652|12"},{n:"三明",g:"117.642194,26.270835|14"},{n:"厦门",g:"118.103886,24.489231|12"},{n:"漳州",g:"117.676205,24.517065|12"}]},{n:"甘肃",g:"102.457625,38.103267|6",cities:[{n:"兰州",g:"103.823305,36.064226|12"},{n:"白银",g:"104.171241,36.546682|13"},{n:"定西",g:"104.626638,35.586056|13"},{n:"甘南州",g:"102.917442,34.992211|14"},{n:"嘉峪关",g:"98.281635,39.802397|13"},{n:"金昌",g:"102.208126,38.516072|13"},{n:"酒泉",g:"98.508415,39.741474|13"},{n:"临夏州",g:"103.215249,35.598514|13"},{n:"陇南",g:"104.934573,33.39448|14"},{n:"平凉",g:"106.688911,35.55011|13"},{n:"庆阳",g:"107.644227,35.726801|13"},{n:"天水",g:"105.736932,34.584319|13"},{n:"武威",g:"102.640147,37.933172|13"},{n:"张掖",g:"100.459892,38.93932|13"}]},{n:"广东",g:"113.394818,23.408004|8",cities:[{n:"广州",g:"113.30765,23.120049|12"},{n:"潮州",g:"116.630076,23.661812|13"},{n:"东莞",g:"113.763434,23.043024|12"},{n:"佛山",g:"113.134026,23.035095|13"},{n:"河源",g:"114.713721,23.757251|12"},{n:"惠州",g:"114.410658,23.11354|12"},{n:"江门",g:"113.078125,22.575117|13"},{n:"揭阳",g:"116.379501,23.547999|13"},{n:"茂名",g:"110.931245,21.668226|13"},{n:"梅州",g:"116.126403,24.304571|13"},{n:"清远",g:"113.040773,23.698469|13"},{n:"汕头",g:"116.72865,23.383908|13"},{n:"汕尾",g:"115.372924,22.778731|14"},{n:"韶关",g:"113.594461,24.80296|13"},{n:"深圳",g:"114.025974,22.546054|12"},{n:"阳江",g:"111.97701,21.871517|14"},{n:"云浮",g:"112.050946,22.937976|13"},{n:"湛江",g:"110.365067,21.257463|13"},{n:"肇庆",g:"112.479653,23.078663|13"},{n:"中山",g:"113.42206,22.545178|12"},{n:"珠海",g:"113.562447,22.256915|13"}]},{n:"广西",g:"108.924274,23.552255|7",cities:[{n:"南宁",g:"108.297234,22.806493|12"},{n:"百色",g:"106.631821,23.901512|13"},{n:"北海",g:"109.122628,21.472718|13"},{n:"崇左",g:"107.357322,22.415455|14"},{n:"防城港",g:"108.351791,21.617398|15"},{n:"桂林",g:"110.26092,25.262901|12"},{n:"贵港",g:"109.613708,23.103373|13"},{n:"河池",g:"108.069948,24.699521|14"},{n:"贺州",g:"111.552594,24.411054|14"},{n:"来宾",g:"109.231817,23.741166|14"},{n:"柳州",g:"109.422402,24.329053|12"},{n:"钦州",g:"108.638798,21.97335|13"},{n:"梧州",g:"111.305472,23.485395|13"},{n:"玉林",g:"110.151676,22.643974|14"}]},{n:"贵州",g:"106.734996,26.902826|8",cities:[{n:"贵阳",g:"106.709177,26.629907|12"},{n:"安顺",g:"105.92827,26.228595|13"},{n:"毕节地区",g:"105.300492,27.302612|14"},{n:"六盘水",g:"104.852087,26.591866|13"},{n:"铜仁地区",g:"109.196161,27.726271|14"},{n:"遵义",g:"106.93126,27.699961|13"},{n:"黔西南州",g:"104.900558,25.095148|11"},{n:"黔东南州",g:"107.985353,26.583992|11"},{n:"黔南州",g:"107.523205,26.264536|11"}]},{n:"海南",g:"109.733755,19.180501|9",cities:[{n:"海口",g:"110.330802,20.022071|13"},{n:"白沙",g:"109.358586,19.216056|12"},{n:"保亭",g:"109.656113,18.597592|12"},{n:"昌江",g:"109.0113,19.222483|12"},{n:"儋州",g:"109.413973,19.571153|13"},{n:"澄迈",g:"109.996736,19.693135|13"},{n:"东方",g:"108.85101,18.998161|13"},{n:"定安",g:"110.32009,19.490991|13"},{n:"琼海",g:"110.414359,19.21483|13"},{n:"琼中",g:"109.861849,19.039771|12"},{n:"乐东",g:"109.062698,18.658614|12"},{n:"临高",g:"109.724101,19.805922|13"},{n:"陵水",g:"109.948661,18.575985|12"},{n:"三亚",g:"109.522771,18.257776|12"},{n:"屯昌",g:"110.063364,19.347749|13"},{n:"万宁",g:"110.292505,18.839886|13"},{n:"文昌",g:"110.780909,19.750947|13"},{n:"五指山",g:"109.51775,18.831306|13"}]},{n:"河北",g:"115.661434,38.61384|7",cities:[{n:"石家庄",g:"114.522082,38.048958|12"},{n:"保定",g:"115.49481,38.886565|13"},{n:"沧州",g:"116.863806,38.297615|13"},{n:"承德",g:"117.933822,40.992521|14"},{n:"邯郸",g:"114.482694,36.609308|13"},{n:"衡水",g:"115.686229,37.746929|13"},{n:"廊坊",g:"116.703602,39.518611|13"},{n:"秦皇岛",g:"119.604368,39.945462|12"},{n:"唐山",g:"118.183451,39.650531|13"},{n:"邢台",g:"114.520487,37.069531|13"},{n:"张家口",g:"114.893782,40.811188|13"}]},{n:"河南",g:"113.486804,34.157184|7",cities:[{n:"郑州",g:"113.649644,34.75661|12"},{n:"安阳",g:"114.351807,36.110267|12"},{n:"鹤壁",g:"114.29777,35.755426|13"},{n:"焦作",g:"113.211836,35.234608|13"},{n:"开封",g:"114.351642,34.801854|13"},{n:"洛阳",g:"112.447525,34.657368|12"},{n:"漯河",g:"114.046061,33.576279|13"},{n:"南阳",g:"112.542842,33.01142|13"},{n:"平顶山",g:"113.300849,33.745301|13"},{n:"濮阳",g:"115.026627,35.753298|12"},{n:"三门峡",g:"111.181262,34.78332|13"},{n:"商丘",g:"115.641886,34.438589|13"},{n:"新乡",g:"113.91269,35.307258|13"},{n:"信阳",g:"114.085491,32.128582|13"},{n:"许昌",g:"113.835312,34.02674|13"},{n:"周口",g:"114.654102,33.623741|13"},{n:"驻马店",g:"114.049154,32.983158|13"}]},{n:"黑龙江",g:"128.047414,47.356592|6",cities:[{n:"哈尔滨",g:"126.657717,45.773225|12"},{n:"大庆",g:"125.02184,46.596709|12"},{n:"大兴安岭地区",g:"124.196104,51.991789|10"},{n:"鹤岗",g:"130.292472,47.338666|13"},{n:"黑河",g:"127.50083,50.25069|14"},{n:"鸡西",g:"130.941767,45.32154|13"},{n:"佳木斯",g:"130.284735,46.81378|12"},{n:"牡丹江",g:"129.608035,44.588521|13"},{n:"七台河",g:"131.019048,45.775005|14"},{n:"齐齐哈尔",g:"123.987289,47.3477|13"},{n:"双鸭山",g:"131.171402,46.655102|13"},{n:"绥化",g:"126.989095,46.646064|13"},{n:"伊春",g:"128.910766,47.734685|14"}]},{n:"湖北",g:"112.410562,31.209316|8",cities:[{n:"武汉",g:"114.3162,30.581084|12"},{n:"鄂州",g:"114.895594,30.384439|14"},{n:"恩施",g:"109.517433,30.308978|14"},{n:"黄冈",g:"114.906618,30.446109|14"},{n:"黄石",g:"115.050683,30.216127|13"},{n:"荆门",g:"112.21733,31.042611|13"},{n:"荆州",g:"112.241866,30.332591|12"},{n:"潜江",g:"112.768768,30.343116|13"},{n:"神农架林区",g:"110.487231,31.595768|13"},{n:"十堰",g:"110.801229,32.636994|13"},{n:"随州",g:"113.379358,31.717858|13"},{n:"天门",g:"113.12623,30.649047|13"},{n:"仙桃",g:"113.387448,30.293966|13"},{n:"咸宁",g:"114.300061,29.880657|13"},{n:"襄阳",g:"112.176326,32.094934|12"},{n:"孝感",g:"113.935734,30.927955|13"},{n:"宜昌",g:"111.310981,30.732758|13"}]},{n:"湖南",g:"111.720664,27.695864|7",cities:[{n:"长沙",g:"112.979353,28.213478|12"},{n:"常德",g:"111.653718,29.012149|12"},{n:"郴州",g:"113.037704,25.782264|13"},{n:"衡阳",g:"112.583819,26.898164|13"},{n:"怀化",g:"109.986959,27.557483|13"},{n:"娄底",g:"111.996396,27.741073|13"},{n:"邵阳",g:"111.461525,27.236811|13"},{n:"湘潭",g:"112.935556,27.835095|13"},{n:"湘西州",g:"109.745746,28.317951|14"},{n:"益阳",g:"112.366547,28.588088|13"},{n:"永州",g:"111.614648,26.435972|13"},{n:"岳阳",g:"113.146196,29.378007|13"},{n:"张家界",g:"110.48162,29.124889|13"},{n:"株洲",g:"113.131695,27.827433|13"}]},{n:"江苏",g:"119.368489,33.013797|8",cities:[{n:"南京",g:"118.778074,32.057236|12"},{n:"常州",g:"119.981861,31.771397|12"},{n:"淮安",g:"119.030186,33.606513|12"},{n:"连云港",g:"119.173872,34.601549|12"},{n:"南通",g:"120.873801,32.014665|12"},{n:"苏州",g:"120.619907,31.317987|12"},{n:"宿迁",g:"118.296893,33.95205|13"},{n:"泰州",g:"119.919606,32.476053|13"},{n:"无锡",g:"120.305456,31.570037|12"},{n:"徐州",g:"117.188107,34.271553|12"},{n:"盐城",g:"120.148872,33.379862|12"},{n:"扬州",g:"119.427778,32.408505|13"},{n:"镇江",g:"119.455835,32.204409|13"}]},{n:"江西",g:"115.676082,27.757258|7",cities:[{n:"南昌",g:"115.893528,28.689578|12"},{n:"抚州",g:"116.360919,27.954545|13"},{n:"赣州",g:"114.935909,25.845296|13"},{n:"吉安",g:"114.992039,27.113848|13"},{n:"景德镇",g:"117.186523,29.303563|12"},{n:"九江",g:"115.999848,29.71964|13"},{n:"萍乡",g:"113.859917,27.639544|13"},{n:"上饶",g:"117.955464,28.457623|13"},{n:"新余",g:"114.947117,27.822322|13"},{n:"宜春",g:"114.400039,27.81113|13"},{n:"鹰潭",g:"117.03545,28.24131|13"}]},{n:"吉林",g:"126.262876,43.678846|7",cities:[{n:"长春",g:"125.313642,43.898338|12"},{n:"白城",g:"122.840777,45.621086|13"},{n:"白山",g:"126.435798,41.945859|13"},{n:"吉林",g:"126.564544,43.871988|12"},{n:"辽源",g:"125.133686,42.923303|13"},{n:"四平",g:"124.391382,43.175525|12"},{n:"松原",g:"124.832995,45.136049|13"},{n:"通化",g:"125.94265,41.736397|13"},{n:"延边",g:"129.485902,42.896414|13"}]},{n:"辽宁",g:"122.753592,41.6216|8",cities:[{n:"沈阳",g:"123.432791,41.808645|12"},{n:"鞍山",g:"123.007763,41.118744|13"},{n:"本溪",g:"123.778062,41.325838|12"},{n:"朝阳",g:"120.446163,41.571828|13"},{n:"大连",g:"121.593478,38.94871|12"},{n:"丹东",g:"124.338543,40.129023|12"},{n:"抚顺",g:"123.92982,41.877304|12"},{n:"阜新",g:"121.660822,42.01925|14"},{n:"葫芦岛",g:"120.860758,40.74303|13"},{n:"锦州",g:"121.147749,41.130879|13"},{n:"辽阳",g:"123.172451,41.273339|14"},{n:"盘锦",g:"122.073228,41.141248|13"},{n:"铁岭",g:"123.85485,42.299757|13"},{n:"营口",g:"122.233391,40.668651|13"}]},{n:"内蒙古",g:"114.415868,43.468238|5",cities:[{n:"呼和浩特",g:"111.660351,40.828319|12"},{n:"阿拉善盟",g:"105.695683,38.843075|14"},{n:"包头",g:"109.846239,40.647119|12"},{n:"巴彦淖尔",g:"107.423807,40.76918|12"},{n:"赤峰",g:"118.930761,42.297112|12"},{n:"鄂尔多斯",g:"109.993706,39.81649|12"},{n:"呼伦贝尔",g:"119.760822,49.201636|12"},{n:"通辽",g:"122.260363,43.633756|12"},{n:"乌海",g:"106.831999,39.683177|13"},{n:"乌兰察布",g:"113.112846,41.022363|12"},{n:"锡林郭勒盟",g:"116.02734,43.939705|11"},{n:"兴安盟",g:"122.048167,46.083757|11"}]},{n:"宁夏",g:"106.155481,37.321323|8",cities:[{n:"银川",g:"106.206479,38.502621|12"},{n:"固原",g:"106.285268,36.021523|13"},{n:"石嘴山",g:"106.379337,39.020223|13"},{n:"吴忠",g:"106.208254,37.993561|14"},{n:"中卫",g:"105.196754,37.521124|14"}]},{n:"青海",g:"96.202544,35.499761|7",cities:[{n:"西宁",g:"101.767921,36.640739|12"},{n:"果洛州",g:"100.223723,34.480485|11"},{n:"海东地区",g:"102.085207,36.51761|11"},{n:"海北州",g:"100.879802,36.960654|11"},{n:"海南州",g:"100.624066,36.284364|11"},{n:"海西州",g:"97.342625,37.373799|11"},{n:"黄南州",g:"102.0076,35.522852|11"},{n:"玉树州",g:"97.013316,33.00624|14"}]},{n:"山东",g:"118.527663,36.09929|8",cities:[{n:"济南",g:"117.024967,36.682785|12"},{n:"滨州",g:"117.968292,37.405314|12"},{n:"东营",g:"118.583926,37.487121|12"},{n:"德州",g:"116.328161,37.460826|12"},{n:"菏泽",g:"115.46336,35.26244|13"},{n:"济宁",g:"116.600798,35.402122|13"},{n:"莱芜",g:"117.684667,36.233654|13"},{n:"聊城",g:"115.986869,36.455829|12"},{n:"临沂",g:"118.340768,35.072409|12"},{n:"青岛",g:"120.384428,36.105215|12"},{n:"日照",g:"119.50718,35.420225|12"},{n:"泰安",g:"117.089415,36.188078|13"},{n:"威海",g:"122.093958,37.528787|13"},{n:"潍坊",g:"119.142634,36.716115|12"},{n:"烟台",g:"121.309555,37.536562|12"},{n:"枣庄",g:"117.279305,34.807883|13"},{n:"淄博",g:"118.059134,36.804685|12"}]},{n:"山西",g:"112.515496,37.866566|7",cities:[{n:"太原",g:"112.550864,37.890277|12"},{n:"长治",g:"113.120292,36.201664|12"},{n:"大同",g:"113.290509,40.113744|12"},{n:"晋城",g:"112.867333,35.499834|13"},{n:"晋中",g:"112.738514,37.693362|13"},{n:"临汾",g:"111.538788,36.099745|13"},{n:"吕梁",g:"111.143157,37.527316|14"},{n:"朔州",g:"112.479928,39.337672|13"},{n:"忻州",g:"112.727939,38.461031|12"},{n:"阳泉",g:"113.569238,37.869529|13"},{n:"运城",g:"111.006854,35.038859|13"}]},{n:"陕西",g:"109.503789,35.860026|7",cities:[{n:"西安",g:"108.953098,34.2778|12"},{n:"安康",g:"109.038045,32.70437|13"},{n:"宝鸡",g:"107.170645,34.364081|12"},{n:"汉中",g:"107.045478,33.081569|13"},{n:"商洛",g:"109.934208,33.873907|13"},{n:"铜川",g:"108.968067,34.908368|13"},{n:"渭南",g:"109.483933,34.502358|13"},{n:"咸阳",g:"108.707509,34.345373|13"},{n:"延安",g:"109.50051,36.60332|13"},{n:"榆林",g:"109.745926,38.279439|12"}]},{n:"四川",g:"102.89916,30.367481|7",cities:[{n:"成都",g:"104.067923,30.679943|12"},{n:"阿坝州",g:"102.228565,31.905763|15"},{n:"巴中",g:"106.757916,31.869189|14"},{n:"达州",g:"107.494973,31.214199|14"},{n:"德阳",g:"104.402398,31.13114|13"},{n:"甘孜州",g:"101.969232,30.055144|15"},{n:"广安",g:"106.63572,30.463984|13"},{n:"广元",g:"105.819687,32.44104|13"},{n:"乐山",g:"103.760824,29.600958|13"},{n:"凉山州",g:"102.259591,27.892393|14"},{n:"泸州",g:"105.44397,28.89593|14"},{n:"南充",g:"106.105554,30.800965|13"},{n:"眉山",g:"103.84143,30.061115|13"},{n:"绵阳",g:"104.705519,31.504701|12"},{n:"内江",g:"105.073056,29.599462|13"},{n:"攀枝花",g:"101.722423,26.587571|14"},{n:"遂宁",g:"105.564888,30.557491|12"},{n:"雅安",g:"103.009356,29.999716|13"},{n:"宜宾",g:"104.633019,28.769675|13"},{n:"资阳",g:"104.63593,30.132191|13"},{n:"自贡",g:"104.776071,29.359157|13"}]},{n:"西藏",g:"89.137982,31.367315|6",cities:[{n:"拉萨",g:"91.111891,29.662557|13"},{n:"阿里地区",g:"81.107669,30.404557|11"},{n:"昌都地区",g:"97.185582,31.140576|15"},{n:"林芝地区",g:"94.349985,29.666941|11"},{n:"那曲地区",g:"92.067018,31.48068|14"},{n:"日喀则地区",g:"88.891486,29.269023|14"},{n:"山南地区",g:"91.750644,29.229027|11"}]},{n:"新疆",g:"85.614899,42.127001|6",cities:[{n:"乌鲁木齐",g:"87.564988,43.84038|12"},{n:"阿拉尔",g:"81.291737,40.61568|13"},{n:"阿克苏地区",g:"80.269846,41.171731|12"},{n:"阿勒泰地区",g:"88.137915,47.839744|13"},{n:"巴音郭楞",g:"86.121688,41.771362|12"},{n:"博尔塔拉州",g:"82.052436,44.913651|11"},{n:"昌吉州",g:"87.296038,44.007058|13"},{n:"哈密地区",g:"93.528355,42.858596|13"},{n:"和田地区",g:"79.930239,37.116774|13"},{n:"喀什地区",g:"75.992973,39.470627|12"},{n:"克拉玛依",g:"84.88118,45.594331|13"},{n:"克孜勒苏州",g:"76.137564,39.750346|11"},{n:"石河子",g:"86.041865,44.308259|13"},{n:"塔城地区",g:"82.974881,46.758684|12"},{n:"图木舒克",g:"79.198155,39.889223|13"},{n:"吐鲁番地区",g:"89.181595,42.96047|13"},{n:"五家渠",g:"87.565449,44.368899|13"},{n:"伊犁州",g:"81.297854,43.922248|11"}]},{n:"云南",g:"101.592952,24.864213|7",cities:[{n:"昆明",g:"102.714601,25.049153|12"},{n:"保山",g:"99.177996,25.120489|13"},{n:"楚雄州",g:"101.529382,25.066356|13"},{n:"大理州",g:"100.223675,25.5969|14"},{n:"德宏州",g:"98.589434,24.44124|14"},{n:"迪庆州",g:"99.713682,27.831029|14"},{n:"红河州",g:"103.384065,23.367718|11"},{n:"丽江",g:"100.229628,26.875351|13"},{n:"临沧",g:"100.092613,23.887806|14"},{n:"怒江州",g:"98.859932,25.860677|14"},{n:"普洱",g:"100.980058,22.788778|14"},{n:"曲靖",g:"103.782539,25.520758|12"},{n:"昭通",g:"103.725021,27.340633|13"},{n:"文山",g:"104.089112,23.401781|14"},{n:"西双版纳",g:"100.803038,22.009433|13"},{n:"玉溪",g:"102.545068,24.370447|13"}]},{n:"浙江",g:"119.957202,29.159494|8",cities:[{n:"杭州",g:"120.219375,30.259244|12"},{n:"湖州",g:"120.137243,30.877925|12"},{n:"嘉兴",g:"120.760428,30.773992|13"},{n:"金华",g:"119.652576,29.102899|12"},{n:"丽水",g:"119.929576,28.4563|13"},{n:"宁波",g:"121.579006,29.885259|12"},{n:"衢州",g:"118.875842,28.95691|12"},{n:"绍兴",g:"120.592467,30.002365|13"},{n:"台州",g:"121.440613,28.668283|13"},{n:"温州",g:"120.690635,28.002838|12"},{n:"舟山",g:"122.169872,30.03601|13"}]}],vg=[{n:"香港",g:"114.186124,22.293586|11"},{n:"澳门",g:"113.557519,22.204118|13"},{n:"台湾",g:"120.961454,23.80406|8"}],Wh=void 0,kc=function(){if(Wh!==void 0)return Wh;var d=navigator.userAgent,p="Android;iPhone;SymbianOS;Windows Phone;iPad;iPod".split(";");Wh=!1;for(var s=0;s<p.length;s++)if(0<d.indexOf(p[s])){Wh=!0;break}return Wh}(),$f=void 0,yg=function(){if($f!==void 0)return $f;var d=navigator.userAgent,p=["iPhone","iPad","iPod"];$f=!1;for(var s=0;s<p.length;s++)if(0<d.indexOf(p[s])){$f=!0;break}return $f}(),xg=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),wp=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Ox=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),jl=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),hu=Array(576);Dt(hu);var Xh=Array(60);Dt(Xh);var Hc=Array(512);Dt(Hc);var ed=Array(256);Dt(ed);var Ag=Array(29);Dt(Ag);var wg=Array(30);Dt(wg);var Dx=void 0,bx=void 0,Fx=void 0,td=function(d,p){d.pending_buf[d.pending++]=p&255,d.pending_buf[d.pending++]=p>>>8&255},Is=function(d,p,s){d.bi_valid>16-s?(d.bi_buf|=p<<d.bi_valid&65535,td(d,d.bi_buf),d.bi_buf=p>>16-d.bi_valid,d.bi_valid+=s-16):(d.bi_buf|=p<<d.bi_valid&65535,d.bi_valid+=s)},fu=function(d,p,s){Is(d,s[2*p],s[2*p+1])},S0=function(d,p){var s=0;do s|=d&1,d>>>=1,s<<=1;while(0<--p);return s>>>1},Nx=function(d,p,s){var h=Array(16),_=0,x;for(x=1;15>=x;x++)h[x]=_=_+s[x-1]<<1;for(s=0;s<=p;s++)_=d[2*s+1],_!==0&&(d[2*s]=S0(h[_]++,_))},Cp=function(d){var p;for(p=0;286>p;p++)d.dyn_ltree[2*p]=0;for(p=0;30>p;p++)d.dyn_dtree[2*p]=0;for(p=0;19>p;p++)d.bl_tree[2*p]=0;d.dyn_ltree[512]=1,d.opt_len=d.static_len=0,d.last_lit=d.matches=0},Bx=function(d){8<d.bi_valid?td(d,d.bi_buf):0<d.bi_valid&&(d.pending_buf[d.pending++]=d.bi_buf),d.bi_buf=0,d.bi_valid=0},zx=function(d,p,s,h){var _=2*p,x=2*s;return d[_]<d[x]||d[_]===d[x]&&h[p]<=h[s]},T0=function(d,p,s){for(var h=d.heap[s],_=s<<1;_<=d.heap_len&&(_<d.heap_len&&zx(p,d.heap[_+1],d.heap[_],d.depth)&&_++,!zx(p,h,d.heap[_],d.depth));)d.heap[s]=d.heap[_],s=_,_<<=1;d.heap[s]=h},Ux=function(d,p,s){var h=0;if(d.last_lit!==0)do{var _=d.pending_buf[d.d_buf+2*h]<<8|d.pending_buf[d.d_buf+2*h+1],x=d.pending_buf[d.l_buf+h];if(h++,_===0)fu(d,x,p);else{var S=ed[x];fu(d,S+256+1,p);var C=xg[S];C!==0&&(x-=Ag[S],Is(d,x,C)),_--,S=256>_?Hc[_]:Hc[256+(_>>>7)],fu(d,S,s),C=wp[S],C!==0&&(_-=wg[S],Is(d,_,C))}}while(h<d.last_lit);fu(d,256,p)},ka=function(d,p){var s=p.dyn_tree,h=p.stat_desc.static_tree,_=p.stat_desc.has_stree,x=p.stat_desc.elems,S,C=-1;for(d.heap_len=0,d.heap_max=573,S=0;S<x;S++)s[2*S]!==0?(d.heap[++d.heap_len]=C=S,d.depth[S]=0):s[2*S+1]=0;for(;2>d.heap_len;){var R=d.heap[++d.heap_len]=2>C?++C:0;s[2*R]=1,d.depth[R]=0,d.opt_len--,_&&(d.static_len-=h[2*R+1])}for(p.max_code=C,S=d.heap_len>>1;1<=S;S--)T0(d,s,S);R=x;do S=d.heap[1],d.heap[1]=d.heap[d.heap_len--],T0(d,s,1),h=d.heap[1],d.heap[--d.heap_max]=S,d.heap[--d.heap_max]=h,s[2*R]=s[2*S]+s[2*h],d.depth[R]=(d.depth[S]>=d.depth[h]?d.depth[S]:d.depth[h])+1,s[2*S+1]=s[2*h+1]=R,d.heap[1]=R++,T0(d,s,1);while(2<=d.heap_len);d.heap[--d.heap_max]=d.heap[1],S=p.dyn_tree,R=p.max_code,h=p.stat_desc.static_tree,_=p.stat_desc.has_stree,x=p.stat_desc.extra_bits;var H=p.stat_desc.extra_base,Z=p.stat_desc.max_length,P,F=0;for(P=0;15>=P;P++)d.bl_count[P]=0;for(S[2*d.heap[d.heap_max]+1]=0,p=d.heap_max+1;573>p;p++){var V=d.heap[p];if(P=S[2*S[2*V+1]+1]+1,P>Z&&(P=Z,F++),S[2*V+1]=P,!(V>R)){d.bl_count[P]++;var j=0;V>=H&&(j=x[V-H]);var q=S[2*V];d.opt_len+=q*(P+j),_&&(d.static_len+=q*(h[2*V+1]+j))}}if(F!==0){do{for(P=Z-1;d.bl_count[P]===0;)P--;d.bl_count[P]--,d.bl_count[P+1]+=2,d.bl_count[Z]--,F-=2}while(0<F);for(P=Z;P!==0;P--)for(V=d.bl_count[P];V!==0;)h=d.heap[--p],h>R||(S[2*h+1]!==P&&(d.opt_len+=(P-S[2*h+1])*S[2*h],S[2*h+1]=P),V--)}Nx(s,C,d.bl_count)},kx=function(d,p,s){var h,_=-1,x=p[1],S=0,C=7,R=4;for(x===0&&(C=138,R=3),p[2*(s+1)+1]=65535,h=0;h<=s;h++){var H=x;x=p[2*(h+1)+1],++S<C&&H===x||(S<R?d.bl_tree[2*H]+=S:H!==0?(H!==_&&d.bl_tree[2*H]++,d.bl_tree[32]++):10>=S?d.bl_tree[34]++:d.bl_tree[36]++,S=0,_=H,x===0?(C=138,R=3):H===x?(C=6,R=3):(C=7,R=4))}},Hx=function(d,p,s){var h,_=-1,x=p[1],S=0,C=7,R=4;for(x===0&&(C=138,R=3),h=0;h<=s;h++){var H=x;if(x=p[2*(h+1)+1],!(++S<C&&H===x)){if(S<R)do fu(d,H,d.bl_tree);while(--S!==0);else H!==0?(H!==_&&(fu(d,H,d.bl_tree),S--),fu(d,16,d.bl_tree),Is(d,S-3,2)):10>=S?(fu(d,17,d.bl_tree),Is(d,S-3,3)):(fu(d,18,d.bl_tree),Is(d,S-11,7));S=0,_=H,x===0?(C=138,R=3):H===x?(C=6,R=3):(C=7,R=4)}}},jx=function(d){var p=4093624447,s;for(s=0;31>=s;s++,p>>>=1)if(p&1&&d.dyn_ltree[2*s]!==0)return 0;if(d.dyn_ltree[18]!==0||d.dyn_ltree[20]!==0||d.dyn_ltree[26]!==0)return 1;for(s=32;256>s;s++)if(d.dyn_ltree[2*s]!==0)return 1;return 0},Gx=!1,Vx=function(d,p,s,h){Is(d,h?1:0,3),Bx(d),td(d,s),td(d,~s),d.pending_buf.set(d.window.subarray(p,p+s),d.pending),d.pending+=s},_p=function(d,p,s,h){var _=d&65535|0;d=d>>>16&65535|0;for(var x;s!==0;){x=2e3<s?2e3:s,s-=x;do _=_+p[h++]|0,d=d+_|0;while(--x);_%=65521,d%=65521}return _|d<<16|0},Wx=new Uint32Array(function(){for(var d,p=[],s=0;256>s;s++){d=s;for(var h=0;8>h;h++)d=d&1?3988292384^d>>>1:d>>>1;p[s]=d}return p}()),Ea=function(d,p,s,h){for(s=h+s,d^=-1;h<s;h++)d=d>>>8^Wx[(d^p[h])&255];return d^-1},Yh={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},zn={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Gl=function(d,p,s){return d.pending_buf[d.d_buf+2*d.last_lit]=p>>>8&255,d.pending_buf[d.d_buf+2*d.last_lit+1]=p&255,d.pending_buf[d.l_buf+d.last_lit]=s&255,d.last_lit++,p===0?d.dyn_ltree[2*s]++:(d.matches++,p--,d.dyn_ltree[2*(ed[s]+256+1)]++,d.dyn_dtree[2*(256>p?Hc[p]:Hc[256+(p>>>7)])]++),d.last_lit===d.lit_bufsize-1},Zh=zn.Z_NO_FLUSH,Mp=zn.Z_PARTIAL_FLUSH,Cg=zn.Z_FULL_FLUSH,Vl=zn.Z_FINISH,E0=zn.Z_BLOCK,Wl=zn.Z_OK,Sp=zn.Z_STREAM_END,Qs=zn.Z_STREAM_ERROR,oa=zn.Z_DATA_ERROR,jc=zn.Z_BUF_ERROR,I0=zn.Z_DEFAULT_COMPRESSION,R0=zn.Z_FILTERED,du=zn.Z_HUFFMAN_ONLY,Xx=zn.Z_RLE,XC=zn.Z_FIXED,qh=zn.Z_DEFAULT_STRATEGY,Yx=zn.Z_UNKNOWN,es=zn.Z_DEFLATED,Gc=function(d,p){return d.msg=Yh[p],p},gl=function(d){for(var p=d.length;0<=--p;)d[p]=0},Kh=function(d,p,s){return(p<<d.hash_shift^s)&d.hash_mask},Jh=function(d){var p=d.state,s=p.pending;s>d.avail_out&&(s=d.avail_out),s!==0&&(d.output.set(p.pending_buf.subarray(p.pending_out,p.pending_out+s),d.next_out),d.next_out+=s,p.pending_out+=s,d.total_out+=s,d.avail_out-=s,p.pending-=s,p.pending===0&&(p.pending_out=0))},ts=function(d,p){var s=0<=d.block_start?d.block_start:-1,h=d.strstart-d.block_start,_=0;if(0<d.level){for(d.strm.data_type===2&&(d.strm.data_type=jx(d)),ka(d,d.l_desc),ka(d,d.d_desc),kx(d,d.dyn_ltree,d.l_desc.max_code),kx(d,d.dyn_dtree,d.d_desc.max_code),ka(d,d.bl_desc),_=18;3<=_&&d.bl_tree[2*jl[_]+1]===0;_--);d.opt_len+=3*(_+1)+14;var x=d.opt_len+3+7>>>3,S=d.static_len+3+7>>>3;S<=x&&(x=S)}else x=S=h+5;if(h+4<=x&&s!==-1)Vx(d,s,h,p);else if(d.strategy===4||S===x)Is(d,2+(p?1:0),3),Ux(d,hu,Xh);else{for(Is(d,4+(p?1:0),3),s=d.l_desc.max_code+1,h=d.d_desc.max_code+1,_+=1,Is(d,s-257,5),Is(d,h-1,5),Is(d,_-4,4),x=0;x<_;x++)Is(d,d.bl_tree[2*jl[x]+1],3);Hx(d,d.dyn_ltree,s-1),Hx(d,d.dyn_dtree,h-1),Ux(d,d.dyn_ltree,d.dyn_dtree)}Cp(d),p&&Bx(d),d.block_start=d.strstart,Jh(d.strm)},kn=function(d,p){d.pending_buf[d.pending++]=p},_g=function(d,p){d.pending_buf[d.pending++]=p>>>8&255,d.pending_buf[d.pending++]=p&255},Go=function(d,p){var s=d.max_chain_length,h=d.strstart,_=d.prev_length,x=d.nice_match,S=d.strstart>d.w_size-262?d.strstart-(d.w_size-262):0,C=d.window,R=d.w_mask,H=d.prev,Z=d.strstart+258,P=C[h+_-1],F=C[h+_];d.prev_length>=d.good_match&&(s>>=2),x>d.lookahead&&(x=d.lookahead);do{var V=p;if(C[V+_]===F&&C[V+_-1]===P&&C[V]===C[h]&&C[++V]===C[h+1]){for(h+=2,V++;C[++h]===C[++V]&&C[++h]===C[++V]&&C[++h]===C[++V]&&C[++h]===C[++V]&&C[++h]===C[++V]&&C[++h]===C[++V]&&C[++h]===C[++V]&&C[++h]===C[++V]&&h<Z;);if(V=258-(Z-h),h=Z-258,V>_){if(d.match_start=p,_=V,V>=x)break;P=C[h+_-1],F=C[h+_]}}}while((p=H[p&R])>S&&--s!==0);return _<=d.lookahead?_:d.lookahead},Ro=function(d){var p=d.w_size,s;do{var h=d.window_size-d.lookahead-d.strstart;if(d.strstart>=p+(p-262)){d.window.set(d.window.subarray(p,p+p),0),d.match_start-=p,d.strstart-=p,d.block_start-=p;var _=s=d.hash_size;do{var x=d.head[--_];d.head[_]=x>=p?x-p:0}while(--s);_=s=p;do x=d.prev[--_],d.prev[_]=x>=p?x-p:0;while(--s);h+=p}if(d.strm.avail_in===0)break;_=d.strm,s=d.window,x=d.strstart+d.lookahead;var S=_.avail_in;if(S>h&&(S=h),S===0?s=0:(_.avail_in-=S,s.set(_.input.subarray(_.next_in,_.next_in+S),x),_.state.wrap===1?_.adler=_p(_.adler,s,S,x):_.state.wrap===2&&(_.adler=Ea(_.adler,s,S,x)),_.next_in+=S,_.total_in+=S,s=S),d.lookahead+=s,3<=d.lookahead+d.insert)for(h=d.strstart-d.insert,d.ins_h=d.window[h],d.ins_h=Kh(d,d.ins_h,d.window[h+1]);d.insert&&(d.ins_h=Kh(d,d.ins_h,d.window[h+3-1]),d.prev[h&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=h,h++,d.insert--,!(3>d.lookahead+d.insert)););}while(262>d.lookahead&&d.strm.avail_in!==0)},Mg=function(d,p){for(var s;;){if(262>d.lookahead){if(Ro(d),262>d.lookahead&&p===Zh)return 1;if(d.lookahead===0)break}if(s=0,3<=d.lookahead&&(d.ins_h=Kh(d,d.ins_h,d.window[d.strstart+3-1]),s=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),s!==0&&d.strstart-s<=d.w_size-262&&(d.match_length=Go(d,s)),3<=d.match_length)if(s=Gl(d,d.strstart-d.match_start,d.match_length-3),d.lookahead-=d.match_length,d.match_length<=d.max_lazy_match&&3<=d.lookahead){d.match_length--;do d.strstart++,d.ins_h=Kh(d,d.ins_h,d.window[d.strstart+3-1]),d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart;while(--d.match_length!==0);d.strstart++}else d.strstart+=d.match_length,d.match_length=0,d.ins_h=d.window[d.strstart],d.ins_h=Kh(d,d.ins_h,d.window[d.strstart+1]);else s=Gl(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++;if(s&&(ts(d,!1),d.strm.avail_out===0))return 1}return d.insert=2>d.strstart?d.strstart:2,p===Vl?(ts(d,!0),d.strm.avail_out===0?3:4):d.last_lit&&(ts(d,!1),d.strm.avail_out===0)?1:2},Tp=function(d,p){for(var s,h;;){if(262>d.lookahead){if(Ro(d),262>d.lookahead&&p===Zh)return 1;if(d.lookahead===0)break}if(s=0,3<=d.lookahead&&(d.ins_h=Kh(d,d.ins_h,d.window[d.strstart+3-1]),s=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),d.prev_length=d.match_length,d.prev_match=d.match_start,d.match_length=2,s!==0&&d.prev_length<d.max_lazy_match&&d.strstart-s<=d.w_size-262&&(d.match_length=Go(d,s),5>=d.match_length&&(d.strategy===R0||d.match_length===3&&4096<d.strstart-d.match_start)&&(d.match_length=2)),3<=d.prev_length&&d.match_length<=d.prev_length){h=d.strstart+d.lookahead-3,s=Gl(d,d.strstart-1-d.prev_match,d.prev_length-3),d.lookahead-=d.prev_length-1,d.prev_length-=2;do++d.strstart<=h&&(d.ins_h=Kh(d,d.ins_h,d.window[d.strstart+3-1]),d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart);while(--d.prev_length!==0);if(d.match_available=0,d.match_length=2,d.strstart++,s&&(ts(d,!1),d.strm.avail_out===0))return 1}else if(d.match_available){if((s=Gl(d,0,d.window[d.strstart-1]))&&ts(d,!1),d.strstart++,d.lookahead--,d.strm.avail_out===0)return 1}else d.match_available=1,d.strstart++,d.lookahead--}return d.match_available&&(Gl(d,0,d.window[d.strstart-1]),d.match_available=0),d.insert=2>d.strstart?d.strstart:2,p===Vl?(ts(d,!0),d.strm.avail_out===0?3:4):d.last_lit&&(ts(d,!1),d.strm.avail_out===0)?1:2},rs=function(d,p){for(var s,h,_,x=d.window;;){if(258>=d.lookahead){if(Ro(d),258>=d.lookahead&&p===Zh)return 1;if(d.lookahead===0)break}if(d.match_length=0,3<=d.lookahead&&0<d.strstart&&(h=d.strstart-1,s=x[h],s===x[++h]&&s===x[++h]&&s===x[++h])){for(_=d.strstart+258;s===x[++h]&&s===x[++h]&&s===x[++h]&&s===x[++h]&&s===x[++h]&&s===x[++h]&&s===x[++h]&&s===x[++h]&&h<_;);d.match_length=258-(_-h),d.match_length>d.lookahead&&(d.match_length=d.lookahead)}if(3<=d.match_length?(s=Gl(d,1,d.match_length-3),d.lookahead-=d.match_length,d.strstart+=d.match_length,d.match_length=0):(s=Gl(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++),s&&(ts(d,!1),d.strm.avail_out===0))return 1}return d.insert=0,p===Vl?(ts(d,!0),d.strm.avail_out===0?3:4):d.last_lit&&(ts(d,!1),d.strm.avail_out===0)?1:2},YC=function(d,p){for(var s;;){if(d.lookahead===0&&(Ro(d),d.lookahead===0)){if(p===Zh)return 1;break}if(d.match_length=0,s=Gl(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++,s&&(ts(d,!1),d.strm.avail_out===0))return 1}return d.insert=0,p===Vl?(ts(d,!0),d.strm.avail_out===0?3:4):d.last_lit&&(ts(d,!1),d.strm.avail_out===0)?1:2},Vn=[new Ve(0,0,0,0,function(d,p){var s=65535;for(s>d.pending_buf_size-5&&(s=d.pending_buf_size-5);;){if(1>=d.lookahead){if(Ro(d),d.lookahead===0&&p===Zh)return 1;if(d.lookahead===0)break}d.strstart+=d.lookahead,d.lookahead=0;var h=d.block_start+s;if((d.strstart===0||d.strstart>=h)&&(d.lookahead=d.strstart-h,d.strstart=h,ts(d,!1),d.strm.avail_out===0)||d.strstart-d.block_start>=d.w_size-262&&(ts(d,!1),d.strm.avail_out===0))return 1}return d.insert=0,p===Vl?(ts(d,!0),d.strm.avail_out===0?3:4):(d.strstart>d.block_start&&ts(d,!1),1)}),new Ve(4,4,8,4,Mg),new Ve(4,5,16,8,Mg),new Ve(4,6,32,32,Mg),new Ve(4,4,16,16,Tp),new Ve(8,16,32,32,Tp),new Ve(8,16,128,128,Tp),new Ve(8,32,128,256,Tp),new Ve(32,128,258,1024,Tp),new Ve(32,258,258,4096,Tp)],Oi=function(d){if(!d||!d.state)return Gc(d,Qs);d.total_in=d.total_out=0,d.data_type=Yx;var p=d.state;if(p.pending=0,p.pending_out=0,0>p.wrap&&(p.wrap=-p.wrap),p.status=p.wrap?42:113,d.adler=p.wrap===2?0:1,p.last_flush=Zh,!Gx){var s,h,_;for(d=Array(16),_=h=0;28>_;_++)for(Ag[_]=h,s=0;s<1<<xg[_];s++)ed[h++]=_;for(ed[h-1]=_,_=h=0;16>_;_++)for(wg[_]=h,s=0;s<1<<wp[_];s++)Hc[h++]=_;for(h>>=7;30>_;_++)for(wg[_]=h<<7,s=0;s<1<<wp[_]-7;s++)Hc[256+h++]=_;for(s=0;15>=s;s++)d[s]=0;for(s=0;143>=s;)hu[2*s+1]=8,s++,d[8]++;for(;255>=s;)hu[2*s+1]=9,s++,d[9]++;for(;279>=s;)hu[2*s+1]=7,s++,d[7]++;for(;287>=s;)hu[2*s+1]=8,s++,d[8]++;for(Nx(hu,287,d),s=0;30>s;s++)Xh[2*s+1]=5,Xh[2*s]=S0(s,5);Dx=new $e(hu,xg,257,286,15),bx=new $e(Xh,wp,0,30,15),Fx=new $e([],Ox,0,19,7),Gx=!0}return p.l_desc=new tt(p.dyn_ltree,Dx),p.d_desc=new tt(p.dyn_dtree,bx),p.bl_desc=new tt(p.bl_tree,Fx),p.bi_buf=0,p.bi_valid=0,Cp(p),Wl},Qh=function(d){var p=Oi(d);return p===Wl&&(d=d.state,d.window_size=2*d.w_size,gl(d.head),d.max_lazy_match=Vn[d.level].max_lazy,d.good_match=Vn[d.level].good_length,d.nice_match=Vn[d.level].nice_length,d.max_chain_length=Vn[d.level].max_chain,d.strstart=0,d.block_start=0,d.lookahead=0,d.insert=0,d.match_length=d.prev_length=2,d.match_available=0,d.ins_h=0),p},Ia=function(d,p,s,h,_,x){if(!d)return Qs;var S=1;if(p===I0&&(p=6),0>h?(S=0,h=-h):15<h&&(S=2,h-=16),1>_||9<_||s!==es||8>h||15<h||0>p||9<p||0>x||x>XC)return Gc(d,Qs);h===8&&(h=9);var C=new gt;return d.state=C,C.strm=d,C.wrap=S,C.gzhead=null,C.w_bits=h,C.w_size=1<<C.w_bits,C.w_mask=C.w_size-1,C.hash_bits=_+7,C.hash_size=1<<C.hash_bits,C.hash_mask=C.hash_size-1,C.hash_shift=~~((C.hash_bits+3-1)/3),C.window=new Uint8Array(2*C.w_size),C.head=new Uint16Array(C.hash_size),C.prev=new Uint16Array(C.w_size),C.lit_bufsize=1<<_+6,C.pending_buf_size=4*C.lit_bufsize,C.pending_buf=new Uint8Array(C.pending_buf_size),C.d_buf=1*C.lit_bufsize,C.l_buf=3*C.lit_bufsize,C.level=p,C.strategy=x,C.method=s,Qh(d)},bo={deflateInit:function(d,p){return Ia(d,p,es,15,8,qh)},deflateInit2:Ia,deflateReset:Qh,deflateResetKeep:Oi,deflateSetHeader:function(d,p){return!d||!d.state||d.state.wrap!==2?Qs:(d.state.gzhead=p,Wl)},deflate:function(d,p){if(!d||!d.state||p>E0||0>p)return d?Gc(d,Qs):Qs;var s=d.state;if(!d.output||!d.input&&d.avail_in!==0||s.status===666&&p!==Vl)return Gc(d,d.avail_out===0?jc:Qs);s.strm=d;var h=s.last_flush;if(s.last_flush=p,s.status===42)if(s.wrap===2)d.adler=0,kn(s,31),kn(s,139),kn(s,8),s.gzhead?(kn(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),kn(s,s.gzhead.time&255),kn(s,s.gzhead.time>>8&255),kn(s,s.gzhead.time>>16&255),kn(s,s.gzhead.time>>24&255),kn(s,s.level===9?2:s.strategy>=du||2>s.level?4:0),kn(s,s.gzhead.os&255),s.gzhead.extra&&s.gzhead.extra.length&&(kn(s,s.gzhead.extra.length&255),kn(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(d.adler=Ea(d.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=69):(kn(s,0),kn(s,0),kn(s,0),kn(s,0),kn(s,0),kn(s,s.level===9?2:s.strategy>=du||2>s.level?4:0),kn(s,3),s.status=113);else{var _=es+(s.w_bits-8<<4)<<8;_|=(s.strategy>=du||2>s.level?0:6>s.level?1:s.level===6?2:3)<<6,s.strstart!==0&&(_|=32),s.status=113,_g(s,_+(31-_%31)),s.strstart!==0&&(_g(s,d.adler>>>16),_g(s,d.adler&65535)),d.adler=1}if(s.status===69)if(s.gzhead.extra){for(_=s.pending;s.gzindex<(s.gzhead.extra.length&65535)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>_&&(d.adler=Ea(d.adler,s.pending_buf,s.pending-_,_)),Jh(d),_=s.pending,s.pending!==s.pending_buf_size));)kn(s,s.gzhead.extra[s.gzindex]&255),s.gzindex++;s.gzhead.hcrc&&s.pending>_&&(d.adler=Ea(d.adler,s.pending_buf,s.pending-_,_)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=73)}else s.status=73;if(s.status===73)if(s.gzhead.name){_=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>_&&(d.adler=Ea(d.adler,s.pending_buf,s.pending-_,_)),Jh(d),_=s.pending,s.pending===s.pending_buf_size)){var x=1;break}x=s.gzindex<s.gzhead.name.length?s.gzhead.name.charCodeAt(s.gzindex++)&255:0,kn(s,x)}while(x!==0);s.gzhead.hcrc&&s.pending>_&&(d.adler=Ea(d.adler,s.pending_buf,s.pending-_,_)),x===0&&(s.gzindex=0,s.status=91)}else s.status=91;if(s.status===91)if(s.gzhead.comment){_=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>_&&(d.adler=Ea(d.adler,s.pending_buf,s.pending-_,_)),Jh(d),_=s.pending,s.pending===s.pending_buf_size)){x=1;break}x=s.gzindex<s.gzhead.comment.length?s.gzhead.comment.charCodeAt(s.gzindex++)&255:0,kn(s,x)}while(x!==0);s.gzhead.hcrc&&s.pending>_&&(d.adler=Ea(d.adler,s.pending_buf,s.pending-_,_)),x===0&&(s.status=103)}else s.status=103;if(s.status===103&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&Jh(d),s.pending+2<=s.pending_buf_size&&(kn(s,d.adler&255),kn(s,d.adler>>8&255),d.adler=0,s.status=113)):s.status=113),s.pending!==0){if(Jh(d),d.avail_out===0)return s.last_flush=-1,Wl}else if(d.avail_in===0&&(p<<1)-(4<p?9:0)<=(h<<1)-(4<h?9:0)&&p!==Vl)return Gc(d,jc);if(s.status===666&&d.avail_in!==0)return Gc(d,jc);if(d.avail_in!==0||s.lookahead!==0||p!==Zh&&s.status!==666){if(h=s.strategy===du?YC(s,p):s.strategy===Xx?rs(s,p):Vn[s.level].func(s,p),(h===3||h===4)&&(s.status=666),h===1||h===3)return d.avail_out===0&&(s.last_flush=-1),Wl;if(h===2&&(p===Mp?(Is(s,2,3),fu(s,256,hu),s.bi_valid===16?(td(s,s.bi_buf),s.bi_buf=0,s.bi_valid=0):8<=s.bi_valid&&(s.pending_buf[s.pending++]=s.bi_buf&255,s.bi_buf>>=8,s.bi_valid-=8)):p!==E0&&(Vx(s,0,0,!1),p===Cg&&(gl(s.head),s.lookahead===0&&(s.strstart=0,s.block_start=0,s.insert=0))),Jh(d),d.avail_out===0))return s.last_flush=-1,Wl}return p!==Vl?Wl:0>=s.wrap?Sp:(s.wrap===2?(kn(s,d.adler&255),kn(s,d.adler>>8&255),kn(s,d.adler>>16&255),kn(s,d.adler>>24&255),kn(s,d.total_in&255),kn(s,d.total_in>>8&255),kn(s,d.total_in>>16&255),kn(s,d.total_in>>24&255)):(_g(s,d.adler>>>16),_g(s,d.adler&65535)),Jh(d),0<s.wrap&&(s.wrap=-s.wrap),s.pending!==0?Wl:Sp)},deflateEnd:function(d){if(!d||!d.state)return Qs;var p=d.state.status;return p!==42&&p!==69&&p!==73&&p!==91&&p!==103&&p!==113&&p!==666?Gc(d,Qs):(d.state=null,p===113?Gc(d,oa):Wl)},deflateSetDictionary:function(d,p){var s=p.length;if(!d||!d.state)return Qs;var h=d.state,_=h.wrap;if(_===2||_===1&&h.status!==42||h.lookahead)return Qs;if(_===1&&(d.adler=_p(d.adler,p,s,0)),h.wrap=0,s>=h.w_size){_===0&&(gl(h.head),h.strstart=0,h.block_start=0,h.insert=0);var x=new Uint8Array(h.w_size);x.set(p.subarray(s-h.w_size,s),0),p=x,s=h.w_size}x=d.avail_in;var S=d.next_in,C=d.input;for(d.avail_in=s,d.next_in=0,d.input=p,Ro(h);3<=h.lookahead;){p=h.strstart,s=h.lookahead-2;do h.ins_h=Kh(h,h.ins_h,h.window[p+3-1]),h.prev[p&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=p,p++;while(--s);h.strstart=p,h.lookahead=2,Ro(h)}return h.strstart+=h.lookahead,h.block_start=h.strstart,h.insert=h.lookahead,h.lookahead=0,h.match_length=h.prev_length=2,h.match_available=0,d.next_in=S,d.input=C,d.avail_in=x,h.wrap=_,Wl},deflateInfo:"pako deflate (from Nodeca project)"},Ra={assign:function(d){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var s=p.shift();if(s){if((typeof s>"u"?"undefined":Ta(s))!=="object")throw new TypeError(s+"must be non-object");for(var h in s)Object.prototype.hasOwnProperty.call(s,h)&&(d[h]=s[h])}}return d},flattenChunks:function(d){for(var p=0,s=0,h=d.length;s<h;s++)p+=d[s].length;p=new Uint8Array(p),h=s=0;for(var _=d.length;s<_;s++){var x=d[s];p.set(x,h),h+=x.length}return p}},Vc=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Vc=!1}for(var ns=new Uint8Array(256),vl=0;256>vl;vl++)ns[vl]=252<=vl?6:248<=vl?5:240<=vl?4:224<=vl?3:192<=vl?2:1;ns[254]=ns[254]=1;var $h={string2buf:function(d){var p,s,h=d.length,_=0;for(p=0;p<h;p++){var x=d.charCodeAt(p);if((x&64512)===55296&&p+1<h){var S=d.charCodeAt(p+1);(S&64512)===56320&&(x=65536+(x-55296<<10)+(S-56320),p++)}_+=128>x?1:2048>x?2:65536>x?3:4}var C=new Uint8Array(_);for(p=s=0;s<_;p++)x=d.charCodeAt(p),(x&64512)===55296&&p+1<h&&(S=d.charCodeAt(p+1),(S&64512)===56320&&(x=65536+(x-55296<<10)+(S-56320),p++)),128>x?C[s++]=x:(2048>x?C[s++]=192|x>>>6:(65536>x?C[s++]=224|x>>>12:(C[s++]=240|x>>>18,C[s++]=128|x>>>12&63),C[s++]=128|x>>>6&63),C[s++]=128|x&63);return C},buf2string:function(d,p){var s,h,_=p||d.length;for(p=Array(2*_),s=h=0;s<_;){var x=d[s++];if(128>x)p[h++]=x;else{var S=ns[x];if(4<S)p[h++]=65533,s+=S-1;else{for(x&=S===2?31:S===3?15:7;1<S&&s<_;)x=x<<6|d[s++]&63,S--;1<S?p[h++]=65533:65536>x?p[h++]=x:(x-=65536,p[h++]=55296|x>>10&1023,p[h++]=56320|x&1023)}}}if(d=h,65534>d&&p.subarray&&Vc)p=String.fromCharCode.apply(null,p.length===d?p:p.subarray(0,d));else{for(s="",h=0;h<d;h++)s+=String.fromCharCode(p[h]);p=s}return p},utf8border:function(d,p){p=p||d.length,p>d.length&&(p=d.length);for(var s=p-1;0<=s&&(d[s]&192)===128;)s--;return 0>s||s===0?p:s+ns[d[s]]>p?s:p}},Zx=function(){this.input=null,this.total_in=this.avail_in=this.next_in=0,this.output=null,this.total_out=this.avail_out=this.next_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Ep=Object.prototype.toString,V3=zn.Z_NO_FLUSH,yl=zn.Z_SYNC_FLUSH,ef=zn.Z_FULL_FLUSH,Ku=zn.Z_FINISH,L0=zn.Z_OK,ao=zn.Z_STREAM_END,gs=zn.Z_DEFAULT_COMPRESSION,kr=zn.Z_DEFAULT_STRATEGY,W3=zn.Z_DEFLATED;mt.prototype.push=function(d,p){var s=this.strm,h=this.options.chunkSize;if(this.ended)return!1;for(p=p===~~p?p:p===!0?Ku:V3,typeof d=="string"?s.input=$h.string2buf(d):Ep.call(d)==="[object ArrayBuffer]"?s.input=new Uint8Array(d):s.input=d,s.next_in=0,s.avail_in=s.input.length;;)if(s.avail_out===0&&(s.output=new Uint8Array(h),s.next_out=0,s.avail_out=h),(p===yl||p===ef)&&6>=s.avail_out)this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;else{if(d=bo.deflate(s,p),d===ao)return 0<s.next_out&&this.onData(s.output.subarray(0,s.next_out)),d=bo.deflateEnd(this.strm),this.onEnd(d),this.ended=!0,d===L0;if(s.avail_out===0)this.onData(s.output);else if(0<p&&0<s.next_out)this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;else if(s.avail_in===0)break}return!0},mt.prototype.onData=function(d){this.chunks.push(d)},mt.prototype.onEnd=function(d){d===L0&&(this.result=Ra.flattenChunks(this.chunks)),this.chunks=[],this.err=d,this.msg=this.strm.msg};var rd=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),qx=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),tf=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Ju=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Sg=function(d,p,s,h,_,x,S,C){var R=C.bits,H,Z,P,F,V,j,q=0,ee=new Uint16Array(16),Q=new Uint16Array(16),ne,le=0;for(H=0;15>=H;H++)ee[H]=0;for(Z=0;Z<h;Z++)ee[p[s+Z]]++;var Ae=R;for(P=15;1<=P&&ee[P]===0;P--);if(Ae>P&&(Ae=P),P===0)return _[x++]=20971520,_[x++]=20971520,C.bits=1,0;for(R=1;R<P&&ee[R]===0;R++);for(Ae<R&&(Ae=R),H=F=1;15>=H;H++)if(F<<=1,F-=ee[H],0>F)return-1;if(0<F&&(d===0||P!==1))return-1;for(Q[1]=0,H=1;15>H;H++)Q[H+1]=Q[H]+ee[H];for(Z=0;Z<h;Z++)p[s+Z]!==0&&(S[Q[p[s+Z]]++]=Z);if(d===0)var Se=ne=S,Ie=19;else d===1?(Se=rd,q-=257,ne=qx,le-=257,Ie=256):(Se=tf,ne=Ju,Ie=-1);Z=V=0,H=R;var Be=x;h=Ae,Q=0;var nt=-1,rt=1<<Ae,St=rt-1;if(d===1&&852<rt||d===2&&592<rt)return 1;for(;;){var Pt=H-Q;if(S[Z]<Ie)var $t=0,Xt=S[Z];else S[Z]>Ie?($t=ne[le+S[Z]],Xt=Se[q+S[Z]]):($t=96,Xt=0);F=1<<H-Q,R=j=1<<h;do j-=F,_[Be+(V>>Q)+j]=Pt<<24|$t<<16|Xt|0;while(j!==0);for(F=1<<H-1;V&F;)F>>=1;if(F!==0?(V&=F-1,V+=F):V=0,Z++,--ee[H]===0){if(H===P)break;H=p[s+S[Z]]}if(H>Ae&&(V&St)!==nt){for(Q===0&&(Q=Ae),Be+=R,h=H-Q,F=1<<h;h+Q<P&&(F-=ee[h+Q],!(0>=F));)h++,F<<=1;if(rt+=1<<h,d===1&&852<rt||d===2&&592<rt)return 1;nt=V&St,_[nt]=Ae<<24|h<<16|Be-x|0}}return V!==0&&(_[Be+V]=H-Q<<24|4194304),C.bits=Ae,0},ZC=zn.Z_FINISH,Kx=zn.Z_BLOCK,P0=zn.Z_TREES,Qu=zn.Z_OK,X3=zn.Z_STREAM_END,Y3=zn.Z_NEED_DICT,vs=zn.Z_STREAM_ERROR,qC=zn.Z_DATA_ERROR,Z3=zn.Z_MEM_ERROR,O0=zn.Z_BUF_ERROR,Jx=zn.Z_DEFLATED,D0=function(d){return(d>>>24&255)+(d>>>8&65280)+((d&65280)<<8)+((d&255)<<24)},KC=function(d){if(!d||!d.state)return vs;var p=d.state;return d.total_in=d.total_out=p.total=0,d.msg="",p.wrap&&(d.adler=p.wrap&1),p.mode=1,p.last=0,p.havedict=0,p.dmax=32768,p.head=null,p.hold=0,p.bits=0,p.lencode=p.lendyn=new Int32Array(852),p.distcode=p.distdyn=new Int32Array(592),p.sane=1,p.back=-1,Qu},JC=function(d){if(!d||!d.state)return vs;var p=d.state;return p.wsize=0,p.whave=0,p.wnext=0,KC(d)},Qx=function(d,p){if(!d||!d.state)return vs;var s=d.state;if(0>p){var h=0;p=-p}else h=(p>>4)+1,48>p&&(p&=15);return p&&(8>p||15<p)?vs:(s.window!==null&&s.wbits!==p&&(s.window=null),s.wrap=h,s.wbits=p,JC(d))},Tg=function(d,p){if(!d)return vs;var s=new At;return d.state=s,s.window=null,p=Qx(d,p),p!==Qu&&(d.state=null),p},nd=!0,b0=void 0,F0=void 0,N0=function(d,p,s,h){var _=d.state;return _.window===null&&(_.wsize=1<<_.wbits,_.wnext=0,_.whave=0,_.window=new Uint8Array(_.wsize)),h>=_.wsize?(_.window.set(p.subarray(s-_.wsize,s),0),_.wnext=0,_.whave=_.wsize):(d=_.wsize-_.wnext,d>h&&(d=h),_.window.set(p.subarray(s-h,s-h+d),_.wnext),(h-=d)?(_.window.set(p.subarray(s-h,s),0),_.wnext=h,_.whave=_.wsize):(_.wnext+=d,_.wnext===_.wsize&&(_.wnext=0),_.whave<_.wsize&&(_.whave+=d))),0},Wc={inflateReset:JC,inflateReset2:Qx,inflateResetKeep:KC,inflateInit:function(d){return Tg(d,15)},inflateInit2:Tg,inflate:function(d,p){var s=new Uint8Array(4),h=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!d||!d.state||!d.output||!d.input&&d.avail_in!==0)return vs;var _=d.state;_.mode===12&&(_.mode=13);var x=d.next_out,S=d.output,C=d.avail_out,R=d.next_in,H=d.input,Z=d.avail_in,P=_.hold,F=_.bits,V=Z,j=C,q=Qu;e:for(;;)switch(_.mode){case 1:if(_.wrap===0){_.mode=13;break}for(;16>F;){if(Z===0)break e;Z--,P+=H[R++]<<F,F+=8}if(_.wrap&2&&P===35615){_.check=0,s[0]=P&255,s[1]=P>>>8&255,_.check=Ea(_.check,s,2,0),F=P=0,_.mode=2;break}if(_.flags=0,_.head&&(_.head.done=!1),!(_.wrap&1)||(((P&255)<<8)+(P>>8))%31){d.msg="incorrect header check",_.mode=30;break}if((P&15)!==Jx){d.msg="unknown compression method",_.mode=30;break}P>>>=4,F-=4;var ee=(P&15)+8;if(_.wbits===0)_.wbits=ee;else if(ee>_.wbits){d.msg="invalid window size",_.mode=30;break}_.dmax=1<<_.wbits,d.adler=_.check=1,_.mode=P&512?10:12,F=P=0;break;case 2:for(;16>F;){if(Z===0)break e;Z--,P+=H[R++]<<F,F+=8}if(_.flags=P,(_.flags&255)!==Jx){d.msg="unknown compression method",_.mode=30;break}if(_.flags&57344){d.msg="unknown header flags set",_.mode=30;break}_.head&&(_.head.text=P>>8&1),_.flags&512&&(s[0]=P&255,s[1]=P>>>8&255,_.check=Ea(_.check,s,2,0)),F=P=0,_.mode=3;case 3:for(;32>F;){if(Z===0)break e;Z--,P+=H[R++]<<F,F+=8}_.head&&(_.head.time=P),_.flags&512&&(s[0]=P&255,s[1]=P>>>8&255,s[2]=P>>>16&255,s[3]=P>>>24&255,_.check=Ea(_.check,s,4,0)),F=P=0,_.mode=4;case 4:for(;16>F;){if(Z===0)break e;Z--,P+=H[R++]<<F,F+=8}_.head&&(_.head.xflags=P&255,_.head.os=P>>8),_.flags&512&&(s[0]=P&255,s[1]=P>>>8&255,_.check=Ea(_.check,s,2,0)),F=P=0,_.mode=5;case 5:if(_.flags&1024){for(;16>F;){if(Z===0)break e;Z--,P+=H[R++]<<F,F+=8}_.length=P,_.head&&(_.head.extra_len=P),_.flags&512&&(s[0]=P&255,s[1]=P>>>8&255,_.check=Ea(_.check,s,2,0)),F=P=0}else _.head&&(_.head.extra=null);_.mode=6;case 6:if(_.flags&1024){var Q=_.length;if(Q>Z&&(Q=Z),Q&&(_.head&&(ee=_.head.extra_len-_.length,_.head.extra||(_.head.extra=new Uint8Array(_.head.extra_len)),_.head.extra.set(H.subarray(R,R+Q),ee)),_.flags&512&&(_.check=Ea(_.check,H,Q,R)),Z-=Q,R+=Q,_.length-=Q),_.length)break e}_.length=0,_.mode=7;case 7:if(_.flags&2048){if(Z===0)break e;Q=0;do ee=H[R+Q++],_.head&&ee&&65536>_.length&&(_.head.name+=String.fromCharCode(ee));while(ee&&Q<Z);if(_.flags&512&&(_.check=Ea(_.check,H,Q,R)),Z-=Q,R+=Q,ee)break e}else _.head&&(_.head.name=null);_.length=0,_.mode=8;case 8:if(_.flags&4096){if(Z===0)break e;Q=0;do ee=H[R+Q++],_.head&&ee&&65536>_.length&&(_.head.comment+=String.fromCharCode(ee));while(ee&&Q<Z);if(_.flags&512&&(_.check=Ea(_.check,H,Q,R)),Z-=Q,R+=Q,ee)break e}else _.head&&(_.head.comment=null);_.mode=9;case 9:if(_.flags&512){for(;16>F;){if(Z===0)break e;Z--,P+=H[R++]<<F,F+=8}if(P!==(_.check&65535)){d.msg="header crc mismatch",_.mode=30;break}F=P=0}_.head&&(_.head.hcrc=_.flags>>9&1,_.head.done=!0),d.adler=_.check=0,_.mode=12;break;case 10:for(;32>F;){if(Z===0)break e;Z--,P+=H[R++]<<F,F+=8}d.adler=_.check=D0(P),F=P=0,_.mode=11;case 11:if(_.havedict===0)return d.next_out=x,d.avail_out=C,d.next_in=R,d.avail_in=Z,_.hold=P,_.bits=F,Y3;d.adler=_.check=1,_.mode=12;case 12:if(p===Kx||p===P0)break e;case 13:if(_.last){P>>>=F&7,F-=F&7,_.mode=27;break}for(;3>F;){if(Z===0)break e;Z--,P+=H[R++]<<F,F+=8}switch(_.last=P&1,P>>>=1,--F,P&3){case 0:_.mode=14;break;case 1:if(Q=_,nd){for(b0=new Int32Array(512),F0=new Int32Array(32),ee=0;144>ee;)Q.lens[ee++]=8;for(;256>ee;)Q.lens[ee++]=9;for(;280>ee;)Q.lens[ee++]=7;for(;288>ee;)Q.lens[ee++]=8;for(Sg(1,Q.lens,0,288,b0,0,Q.work,{bits:9}),ee=0;32>ee;)Q.lens[ee++]=5;Sg(2,Q.lens,0,32,F0,0,Q.work,{bits:5}),nd=!1}if(Q.lencode=b0,Q.lenbits=9,Q.distcode=F0,Q.distbits=5,_.mode=20,p===P0){P>>>=2,F-=2;break e}break;case 2:_.mode=17;break;case 3:d.msg="invalid block type",_.mode=30}P>>>=2,F-=2;break;case 14:for(P>>>=F&7,F-=F&7;32>F;){if(Z===0)break e;Z--,P+=H[R++]<<F,F+=8}if((P&65535)!==(P>>>16^65535)){d.msg="invalid stored block lengths",_.mode=30;break}if(_.length=P&65535,F=P=0,_.mode=15,p===P0)break e;case 15:_.mode=16;case 16:if(Q=_.length){if(Q>Z&&(Q=Z),Q>C&&(Q=C),Q===0)break e;S.set(H.subarray(R,R+Q),x),Z-=Q,R+=Q,C-=Q,x+=Q,_.length-=Q;break}_.mode=12;break;case 17:for(;14>F;){if(Z===0)break e;Z--,P+=H[R++]<<F,F+=8}if(_.nlen=(P&31)+257,P>>>=5,F-=5,_.ndist=(P&31)+1,P>>>=5,F-=5,_.ncode=(P&15)+4,P>>>=4,F-=4,286<_.nlen||30<_.ndist){d.msg="too many length or distance symbols",_.mode=30;break}_.have=0,_.mode=18;case 18:for(;_.have<_.ncode;){for(;3>F;){if(Z===0)break e;Z--,P+=H[R++]<<F,F+=8}_.lens[h[_.have++]]=P&7,P>>>=3,F-=3}for(;19>_.have;)_.lens[h[_.have++]]=0;if(_.lencode=_.lendyn,_.lenbits=7,Q={bits:_.lenbits},q=Sg(0,_.lens,0,19,_.lencode,0,_.work,Q),_.lenbits=Q.bits,q){d.msg="invalid code lengths set",_.mode=30;break}_.have=0,_.mode=19;case 19:for(;_.have<_.nlen+_.ndist;){for(;;){var ne=_.lencode[P&(1<<_.lenbits)-1];if(Q=ne>>>24,ne&=65535,Q<=F)break;if(Z===0)break e;Z--,P+=H[R++]<<F,F+=8}if(16>ne)P>>>=Q,F-=Q,_.lens[_.have++]=ne;else{if(ne===16){for(ee=Q+2;F<ee;){if(Z===0)break e;Z--,P+=H[R++]<<F,F+=8}if(P>>>=Q,F-=Q,_.have===0){d.msg="invalid bit length repeat",_.mode=30;break}ee=_.lens[_.have-1],Q=3+(P&3),P>>>=2,F-=2}else if(ne===17){for(ee=Q+3;F<ee;){if(Z===0)break e;Z--,P+=H[R++]<<F,F+=8}P>>>=Q,F-=Q,ee=0,Q=3+(P&7),P>>>=3,F-=3}else{for(ee=Q+7;F<ee;){if(Z===0)break e;Z--,P+=H[R++]<<F,F+=8}P>>>=Q,F-=Q,ee=0,Q=11+(P&127),P>>>=7,F-=7}if(_.have+Q>_.nlen+_.ndist){d.msg="invalid bit length repeat",_.mode=30;break}for(;Q--;)_.lens[_.have++]=ee}}if(_.mode===30)break;if(_.lens[256]===0){d.msg="invalid code -- missing end-of-block",_.mode=30;break}if(_.lenbits=9,Q={bits:_.lenbits},q=Sg(1,_.lens,0,_.nlen,_.lencode,0,_.work,Q),_.lenbits=Q.bits,q){d.msg="invalid literal/lengths set",_.mode=30;break}if(_.distbits=6,_.distcode=_.distdyn,Q={bits:_.distbits},q=Sg(2,_.lens,_.nlen,_.ndist,_.distcode,0,_.work,Q),_.distbits=Q.bits,q){d.msg="invalid distances set",_.mode=30;break}if(_.mode=20,p===P0)break e;case 20:_.mode=21;case 21:if(6<=Z&&258<=C){d.next_out=x,d.avail_out=C,d.next_in=R,d.avail_in=Z,_.hold=P,_.bits=F,H=d;var le=H.state;S=H.next_in;var Ae=H.input;R=S+(H.avail_in-5),x=H.next_out;var Se=H.output;Z=x-(j-H.avail_out),C=x+(H.avail_out-257),P=le.dmax,F=le.wsize,Q=le.whave,ee=le.wnext;var Ie=le.window,Be=le.hold,nt=le.bits;ne=le.lencode;var rt=le.distcode,St=(1<<le.lenbits)-1,Pt=(1<<le.distbits)-1;t:do{15>nt&&(Be+=Ae[S++]<<nt,nt+=8,Be+=Ae[S++]<<nt,nt+=8);var $t=ne[Be&St];r:for(;;){var Xt=$t>>>24;if(Be>>>=Xt,nt-=Xt,Xt=$t>>>16&255,Xt===0)Se[x++]=$t&65535;else if(Xt&16){var wr=$t&65535;(Xt&=15)&&(nt<Xt&&(Be+=Ae[S++]<<nt,nt+=8),wr+=Be&(1<<Xt)-1,Be>>>=Xt,nt-=Xt),15>nt&&(Be+=Ae[S++]<<nt,nt+=8,Be+=Ae[S++]<<nt,nt+=8),$t=rt[Be&Pt];n:for(;;){if(Xt=$t>>>24,Be>>>=Xt,nt-=Xt,Xt=$t>>>16&255,Xt&16){if($t&=65535,Xt&=15,nt<Xt&&(Be+=Ae[S++]<<nt,nt+=8,nt<Xt&&(Be+=Ae[S++]<<nt,nt+=8)),$t+=Be&(1<<Xt)-1,$t>P){H.msg="invalid distance too far back",le.mode=30;break t}if(Be>>>=Xt,nt-=Xt,Xt=x-Z,$t>Xt){if(Xt=$t-Xt,Xt>Q&&le.sane){H.msg="invalid distance too far back",le.mode=30;break t}var Qr=0,bt=Ie;if(ee===0){if(Qr+=F-Xt,Xt<wr){wr-=Xt;do Se[x++]=Ie[Qr++];while(--Xt);Qr=x-$t,bt=Se}}else if(ee<Xt){if(Qr+=F+ee-Xt,Xt-=ee,Xt<wr){wr-=Xt;do Se[x++]=Ie[Qr++];while(--Xt);if(Qr=0,ee<wr){Xt=ee,wr-=Xt;do Se[x++]=Ie[Qr++];while(--Xt);Qr=x-$t,bt=Se}}}else if(Qr+=ee-Xt,Xt<wr){wr-=Xt;do Se[x++]=Ie[Qr++];while(--Xt);Qr=x-$t,bt=Se}for(;2<wr;)Se[x++]=bt[Qr++],Se[x++]=bt[Qr++],Se[x++]=bt[Qr++],wr-=3;wr&&(Se[x++]=bt[Qr++],1<wr&&(Se[x++]=bt[Qr++]))}else{Qr=x-$t;do Se[x++]=Se[Qr++],Se[x++]=Se[Qr++],Se[x++]=Se[Qr++],wr-=3;while(2<wr);wr&&(Se[x++]=Se[Qr++],1<wr&&(Se[x++]=Se[Qr++]))}}else if(Xt&64){H.msg="invalid distance code",le.mode=30;break t}else{$t=rt[($t&65535)+(Be&(1<<Xt)-1)];continue n}break}}else if(Xt&64){Xt&32?le.mode=12:(H.msg="invalid literal/length code",le.mode=30);break t}else{$t=ne[($t&65535)+(Be&(1<<Xt)-1)];continue r}break}}while(S<R&&x<C);wr=nt>>3,S-=wr,nt-=wr<<3,H.next_in=S,H.next_out=x,H.avail_in=S<R?5+(R-S):5-(S-R),H.avail_out=x<C?257+(C-x):257-(x-C),le.hold=Be&(1<<nt)-1,le.bits=nt,x=d.next_out,S=d.output,C=d.avail_out,R=d.next_in,H=d.input,Z=d.avail_in,P=_.hold,F=_.bits,_.mode===12&&(_.back=-1);break}for(_.back=0;ne=_.lencode[P&(1<<_.lenbits)-1],Q=ne>>>24,ee=ne>>>16&255,ne&=65535,!(Q<=F);){if(Z===0)break e;Z--,P+=H[R++]<<F,F+=8}if(ee&&!(ee&240)){for(Ie=Q,Be=ee,nt=ne;ne=_.lencode[nt+((P&(1<<Ie+Be)-1)>>Ie)],Q=ne>>>24,ee=ne>>>16&255,ne&=65535,!(Ie+Q<=F);){if(Z===0)break e;Z--,P+=H[R++]<<F,F+=8}P>>>=Ie,F-=Ie,_.back+=Ie}if(P>>>=Q,F-=Q,_.back+=Q,_.length=ne,ee===0){_.mode=26;break}if(ee&32){_.back=-1,_.mode=12;break}if(ee&64){d.msg="invalid literal/length code",_.mode=30;break}_.extra=ee&15,_.mode=22;case 22:if(_.extra){for(ee=_.extra;F<ee;){if(Z===0)break e;Z--,P+=H[R++]<<F,F+=8}_.length+=P&(1<<_.extra)-1,P>>>=_.extra,F-=_.extra,_.back+=_.extra}_.was=_.length,_.mode=23;case 23:for(;ne=_.distcode[P&(1<<_.distbits)-1],Q=ne>>>24,ee=ne>>>16&255,ne&=65535,!(Q<=F);){if(Z===0)break e;Z--,P+=H[R++]<<F,F+=8}if(!(ee&240)){for(Ie=Q,Be=ee,nt=ne;ne=_.distcode[nt+((P&(1<<Ie+Be)-1)>>Ie)],Q=ne>>>24,ee=ne>>>16&255,ne&=65535,!(Ie+Q<=F);){if(Z===0)break e;Z--,P+=H[R++]<<F,F+=8}P>>>=Ie,F-=Ie,_.back+=Ie}if(P>>>=Q,F-=Q,_.back+=Q,ee&64){d.msg="invalid distance code",_.mode=30;break}_.offset=ne,_.extra=ee&15,_.mode=24;case 24:if(_.extra){for(ee=_.extra;F<ee;){if(Z===0)break e;Z--,P+=H[R++]<<F,F+=8}_.offset+=P&(1<<_.extra)-1,P>>>=_.extra,F-=_.extra,_.back+=_.extra}if(_.offset>_.dmax){d.msg="invalid distance too far back",_.mode=30;break}_.mode=25;case 25:if(C===0)break e;if(Q=j-C,_.offset>Q){if(Q=_.offset-Q,Q>_.whave&&_.sane){d.msg="invalid distance too far back",_.mode=30;break}Q>_.wnext?(Q-=_.wnext,ee=_.wsize-Q):ee=_.wnext-Q,Q>_.length&&(Q=_.length),Ie=_.window}else Ie=S,ee=x-_.offset,Q=_.length;Q>C&&(Q=C),C-=Q,_.length-=Q;do S[x++]=Ie[ee++];while(--Q);_.length===0&&(_.mode=21);break;case 26:if(C===0)break e;S[x++]=_.length,C--,_.mode=21;break;case 27:if(_.wrap){for(;32>F;){if(Z===0)break e;Z--,P|=H[R++]<<F,F+=8}if(j-=C,d.total_out+=j,_.total+=j,j&&(d.adler=_.check=_.flags?Ea(_.check,S,j,x-j):_p(_.check,S,j,x-j)),j=C,(_.flags?P:D0(P))!==_.check){d.msg="incorrect data check",_.mode=30;break}F=P=0}_.mode=28;case 28:if(_.wrap&&_.flags){for(;32>F;){if(Z===0)break e;Z--,P+=H[R++]<<F,F+=8}if(P!==(_.total&4294967295)){d.msg="incorrect length check",_.mode=30;break}F=P=0}_.mode=29;case 29:q=X3;break e;case 30:q=qC;break e;case 31:return Z3;default:return vs}return d.next_out=x,d.avail_out=C,d.next_in=R,d.avail_in=Z,_.hold=P,_.bits=F,(_.wsize||j!==d.avail_out&&30>_.mode&&(27>_.mode||p!==ZC))&&N0(d,d.output,d.next_out,j-d.avail_out),V-=d.avail_in,j-=d.avail_out,d.total_in+=V,d.total_out+=j,_.total+=j,_.wrap&&j&&(d.adler=_.check=_.flags?Ea(_.check,S,j,d.next_out-j):_p(_.check,S,j,d.next_out-j)),d.data_type=_.bits+(_.last?64:0)+(_.mode===12?128:0)+(_.mode===20||_.mode===15?256:0),(V===0&&j===0||p===ZC)&&q===Qu&&(q=O0),q},inflateEnd:function(d){if(!d||!d.state)return vs;var p=d.state;return p.window&&(p.window=null),d.state=null,Qu},inflateGetHeader:function(d,p){return!d||!d.state||(d=d.state,!(d.wrap&2))?vs:(d.head=p,p.done=!1,Qu)},inflateSetDictionary:function(d,p){var s=p.length;if(!d||!d.state)return vs;var h=d.state;if(h.wrap!==0&&h.mode!==11)return vs;if(h.mode===11){var _=_p(1,p,s,0);if(_!==h.check)return qC}return N0(d,p,s,s),h.havedict=1,Qu},inflateInfo:"pako inflate (from Nodeca project)"},$x=function(){this.os=this.xflags=this.time=this.text=0,this.extra=null,this.extra_len=0,this.comment=this.name="",this.hcrc=0,this.done=!1},Eg=Object.prototype.toString,rf=zn.Z_NO_FLUSH,q3=zn.Z_FINISH,Ig=zn.Z_OK,B0=zn.Z_STREAM_END,Le=zn.Z_NEED_DICT,e2=zn.Z_STREAM_ERROR,Rg=zn.Z_DATA_ERROR,z0=zn.Z_MEM_ERROR;jt.prototype.push=function(d,p){var s=this.strm,h=this.options.chunkSize,_=this.options.dictionary;if(this.ended)return!1;var x=p===~~p?p:p===!0?q3:rf;for(Eg.call(d)==="[object ArrayBuffer]"?s.input=new Uint8Array(d):s.input=d,s.next_in=0,s.avail_in=s.input.length;;){for(s.avail_out===0&&(s.output=new Uint8Array(h),s.next_out=0,s.avail_out=h),p=Wc.inflate(s,x),p===Le&&_&&(p=Wc.inflateSetDictionary(s,_),p===Ig?p=Wc.inflate(s,x):p===Rg&&(p=Le));0<s.avail_in&&p===B0&&0<s.state.wrap&&d[s.next_in]!==0;)Wc.inflateReset(s),p=Wc.inflate(s,x);switch(p){case e2:case Rg:case Le:case z0:return this.onEnd(p),this.ended=!0,!1}var S=s.avail_out;if(s.next_out&&(s.avail_out===0||p===B0))if(this.options.to==="string"){var C=$h.utf8border(s.output,s.next_out),R=s.next_out-C,H=$h.buf2string(s.output,C);s.next_out=R,s.avail_out=h-R,R&&s.output.set(s.output.subarray(C,C+R),0),this.onData(H)}else this.onData(s.output.length===s.next_out?s.output:s.output.subarray(0,s.next_out));if(p!==Ig||S!==0){if(p===B0){p=Wc.inflateEnd(this.strm),this.onEnd(p),this.ended=!0;break}if(s.avail_in===0)break}}return!0},jt.prototype.onData=function(d){this.chunks.push(d)},jt.prototype.onEnd=function(d){d===Ig&&(this.result=this.options.to==="string"?this.chunks.join(""):Ra.flattenChunks(this.chunks)),this.chunks=[],this.err=d,this.msg=this.strm.msg};var t2={Deflate:mt,deflate:dt,deflateRaw:function(d,p){return p=p||{},p.raw=!0,dt(d,p)},gzip:function(d,p){return p=p||{},p.gzip=!0,dt(d,p)},Inflate:jt,inflate:ar,inflateRaw:function(d,p){return p=p||{},p.raw=!0,ar(d,p)},ungzip:ar,constants:zn},pu=M(function(d,p){Object.defineProperty(p,"__esModule",{value:!0}),p.setMatrixArrayType=function(x){p.ARRAY_TYPE=h=x},p.toRadian=function(x){return x*_},p.equals=function(x,S){return Math.abs(x-S)<=s*Math.max(1,Math.abs(x),Math.abs(S))},p.RANDOM=p.ARRAY_TYPE=p.EPSILON=void 0;var s=1e-6;p.EPSILON=s;var h=typeof Float32Array<"u"?Float32Array:Array;p.ARRAY_TYPE=h,p.RANDOM=Math.random;var _=Math.PI/180});m(pu);var QC=M(function(d,p){function s(x,S,C){var R=S[0],H=S[1],Z=S[2];S=S[3];var P=C[0],F=C[1],V=C[2];return C=C[3],x[0]=R*P+Z*F,x[1]=H*P+S*F,x[2]=R*V+Z*C,x[3]=H*V+S*C,x}function h(x,S,C){return x[0]=S[0]-C[0],x[1]=S[1]-C[1],x[2]=S[2]-C[2],x[3]=S[3]-C[3],x}Object.defineProperty(p,"__esModule",{value:!0}),p.create=function(){var x=new _.ARRAY_TYPE(4);return _.ARRAY_TYPE!=Float32Array&&(x[1]=0,x[2]=0),x[0]=1,x[3]=1,x},p.clone=function(x){var S=new _.ARRAY_TYPE(4);return S[0]=x[0],S[1]=x[1],S[2]=x[2],S[3]=x[3],S},p.copy=function(x,S){return x[0]=S[0],x[1]=S[1],x[2]=S[2],x[3]=S[3],x},p.identity=function(x){return x[0]=1,x[1]=0,x[2]=0,x[3]=1,x},p.fromValues=function(x,S,C,R){var H=new _.ARRAY_TYPE(4);return H[0]=x,H[1]=S,H[2]=C,H[3]=R,H},p.set=function(x,S,C,R,H){return x[0]=S,x[1]=C,x[2]=R,x[3]=H,x},p.transpose=function(x,S){if(x===S){var C=S[1];x[1]=S[2],x[2]=C}else x[0]=S[0],x[1]=S[2],x[2]=S[1],x[3]=S[3];return x},p.invert=function(x,S){var C=S[0],R=S[1],H=S[2];S=S[3];var Z=C*S-H*R;return Z?(Z=1/Z,x[0]=S*Z,x[1]=-R*Z,x[2]=-H*Z,x[3]=C*Z,x):null},p.adjoint=function(x,S){var C=S[0];return x[0]=S[3],x[1]=-S[1],x[2]=-S[2],x[3]=C,x},p.determinant=function(x){return x[0]*x[3]-x[2]*x[1]},p.multiply=s,p.rotate=function(x,S,C){var R=S[0],H=S[1],Z=S[2];S=S[3];var P=Math.sin(C);return C=Math.cos(C),x[0]=R*C+Z*P,x[1]=H*C+S*P,x[2]=R*-P+Z*C,x[3]=H*-P+S*C,x},p.scale=function(x,S,C){var R=S[1],H=S[2],Z=S[3],P=C[0];return C=C[1],x[0]=S[0]*P,x[1]=R*P,x[2]=H*C,x[3]=Z*C,x},p.fromRotation=function(x,S){var C=Math.sin(S);return S=Math.cos(S),x[0]=S,x[1]=C,x[2]=-C,x[3]=S,x},p.fromScaling=function(x,S){return x[0]=S[0],x[1]=0,x[2]=0,x[3]=S[1],x},p.str=function(x){return"mat2("+x[0]+", "+x[1]+", "+x[2]+", "+x[3]+")"},p.frob=function(x){return Math.sqrt(Math.pow(x[0],2)+Math.pow(x[1],2)+Math.pow(x[2],2)+Math.pow(x[3],2))},p.LDU=function(x,S,C,R){return x[2]=R[2]/R[0],C[0]=R[0],C[1]=R[1],C[3]=R[3]-x[2]*C[1],[x,S,C]},p.add=function(x,S,C){return x[0]=S[0]+C[0],x[1]=S[1]+C[1],x[2]=S[2]+C[2],x[3]=S[3]+C[3],x},p.subtract=h,p.exactEquals=function(x,S){return x[0]===S[0]&&x[1]===S[1]&&x[2]===S[2]&&x[3]===S[3]},p.equals=function(x,S){var C=x[0],R=x[1],H=x[2];x=x[3];var Z=S[0],P=S[1],F=S[2];return S=S[3],Math.abs(C-Z)<=_.EPSILON*Math.max(1,Math.abs(C),Math.abs(Z))&&Math.abs(R-P)<=_.EPSILON*Math.max(1,Math.abs(R),Math.abs(P))&&Math.abs(H-F)<=_.EPSILON*Math.max(1,Math.abs(H),Math.abs(F))&&Math.abs(x-S)<=_.EPSILON*Math.max(1,Math.abs(x),Math.abs(S))},p.multiplyScalar=function(x,S,C){return x[0]=S[0]*C,x[1]=S[1]*C,x[2]=S[2]*C,x[3]=S[3]*C,x},p.multiplyScalarAndAdd=function(x,S,C,R){return x[0]=S[0]+C[0]*R,x[1]=S[1]+C[1]*R,x[2]=S[2]+C[2]*R,x[3]=S[3]+C[3]*R,x},p.sub=p.mul=void 0;var _=function(x){if(x&&x.__esModule)return x;var S={};if(x!=null){for(var C in x)if(Object.prototype.hasOwnProperty.call(x,C)){var R=Jo&&oo?oo(x,C):{};R.get||R.set?Jo(S,C,R):S[C]=x[C]}}return S.default=x,S}(pu);p.mul=s,p.sub=h});m(QC);var Pe=M(function(d,p){function s(x,S,C){var R=S[0],H=S[1],Z=S[2],P=S[3],F=S[4];S=S[5];var V=C[0],j=C[1],q=C[2],ee=C[3],Q=C[4];return C=C[5],x[0]=R*V+Z*j,x[1]=H*V+P*j,x[2]=R*q+Z*ee,x[3]=H*q+P*ee,x[4]=R*Q+Z*C+F,x[5]=H*Q+P*C+S,x}function h(x,S,C){return x[0]=S[0]-C[0],x[1]=S[1]-C[1],x[2]=S[2]-C[2],x[3]=S[3]-C[3],x[4]=S[4]-C[4],x[5]=S[5]-C[5],x}Object.defineProperty(p,"__esModule",{value:!0}),p.create=function(){var x=new _.ARRAY_TYPE(6);return _.ARRAY_TYPE!=Float32Array&&(x[1]=0,x[2]=0,x[4]=0,x[5]=0),x[0]=1,x[3]=1,x},p.clone=function(x){var S=new _.ARRAY_TYPE(6);return S[0]=x[0],S[1]=x[1],S[2]=x[2],S[3]=x[3],S[4]=x[4],S[5]=x[5],S},p.copy=function(x,S){return x[0]=S[0],x[1]=S[1],x[2]=S[2],x[3]=S[3],x[4]=S[4],x[5]=S[5],x},p.identity=function(x){return x[0]=1,x[1]=0,x[2]=0,x[3]=1,x[4]=0,x[5]=0,x},p.fromValues=function(x,S,C,R,H,Z){var P=new _.ARRAY_TYPE(6);return P[0]=x,P[1]=S,P[2]=C,P[3]=R,P[4]=H,P[5]=Z,P},p.set=function(x,S,C,R,H,Z,P){return x[0]=S,x[1]=C,x[2]=R,x[3]=H,x[4]=Z,x[5]=P,x},p.invert=function(x,S){var C=S[0],R=S[1],H=S[2],Z=S[3],P=S[4];S=S[5];var F=C*Z-R*H;return F?(F=1/F,x[0]=Z*F,x[1]=-R*F,x[2]=-H*F,x[3]=C*F,x[4]=(H*S-Z*P)*F,x[5]=(R*P-C*S)*F,x):null},p.determinant=function(x){return x[0]*x[3]-x[1]*x[2]},p.multiply=s,p.rotate=function(x,S,C){var R=S[0],H=S[1],Z=S[2],P=S[3],F=S[4];S=S[5];var V=Math.sin(C);return C=Math.cos(C),x[0]=R*C+Z*V,x[1]=H*C+P*V,x[2]=R*-V+Z*C,x[3]=H*-V+P*C,x[4]=F,x[5]=S,x},p.scale=function(x,S,C){var R=S[1],H=S[2],Z=S[3],P=S[4],F=S[5],V=C[0];return C=C[1],x[0]=S[0]*V,x[1]=R*V,x[2]=H*C,x[3]=Z*C,x[4]=P,x[5]=F,x},p.translate=function(x,S,C){var R=S[0],H=S[1],Z=S[2],P=S[3],F=S[4];S=S[5];var V=C[0];return C=C[1],x[0]=R,x[1]=H,x[2]=Z,x[3]=P,x[4]=R*V+Z*C+F,x[5]=H*V+P*C+S,x},p.fromRotation=function(x,S){var C=Math.sin(S);return S=Math.cos(S),x[0]=S,x[1]=C,x[2]=-C,x[3]=S,x[4]=0,x[5]=0,x},p.fromScaling=function(x,S){return x[0]=S[0],x[1]=0,x[2]=0,x[3]=S[1],x[4]=0,x[5]=0,x},p.fromTranslation=function(x,S){return x[0]=1,x[1]=0,x[2]=0,x[3]=1,x[4]=S[0],x[5]=S[1],x},p.str=function(x){return"mat2d("+x[0]+", "+x[1]+", "+x[2]+", "+x[3]+", "+x[4]+", "+x[5]+")"},p.frob=function(x){return Math.sqrt(Math.pow(x[0],2)+Math.pow(x[1],2)+Math.pow(x[2],2)+Math.pow(x[3],2)+Math.pow(x[4],2)+Math.pow(x[5],2)+1)},p.add=function(x,S,C){return x[0]=S[0]+C[0],x[1]=S[1]+C[1],x[2]=S[2]+C[2],x[3]=S[3]+C[3],x[4]=S[4]+C[4],x[5]=S[5]+C[5],x},p.subtract=h,p.multiplyScalar=function(x,S,C){return x[0]=S[0]*C,x[1]=S[1]*C,x[2]=S[2]*C,x[3]=S[3]*C,x[4]=S[4]*C,x[5]=S[5]*C,x},p.multiplyScalarAndAdd=function(x,S,C,R){return x[0]=S[0]+C[0]*R,x[1]=S[1]+C[1]*R,x[2]=S[2]+C[2]*R,x[3]=S[3]+C[3]*R,x[4]=S[4]+C[4]*R,x[5]=S[5]+C[5]*R,x},p.exactEquals=function(x,S){return x[0]===S[0]&&x[1]===S[1]&&x[2]===S[2]&&x[3]===S[3]&&x[4]===S[4]&&x[5]===S[5]},p.equals=function(x,S){var C=x[0],R=x[1],H=x[2],Z=x[3],P=x[4];x=x[5];var F=S[0],V=S[1],j=S[2],q=S[3],ee=S[4];return S=S[5],Math.abs(C-F)<=_.EPSILON*Math.max(1,Math.abs(C),Math.abs(F))&&Math.abs(R-V)<=_.EPSILON*Math.max(1,Math.abs(R),Math.abs(V))&&Math.abs(H-j)<=_.EPSILON*Math.max(1,Math.abs(H),Math.abs(j))&&Math.abs(Z-q)<=_.EPSILON*Math.max(1,Math.abs(Z),Math.abs(q))&&Math.abs(P-ee)<=_.EPSILON*Math.max(1,Math.abs(P),Math.abs(ee))&&Math.abs(x-S)<=_.EPSILON*Math.max(1,Math.abs(x),Math.abs(S))},p.sub=p.mul=void 0;var _=function(x){if(x&&x.__esModule)return x;var S={};if(x!=null){for(var C in x)if(Object.prototype.hasOwnProperty.call(x,C)){var R=Jo&&oo?oo(x,C):{};R.get||R.set?Jo(S,C,R):S[C]=x[C]}}return S.default=x,S}(pu);p.mul=s,p.sub=h});m(Pe);var r2=M(function(d,p){function s(x,S,C){var R=S[0],H=S[1],Z=S[2],P=S[3],F=S[4],V=S[5],j=S[6],q=S[7];S=S[8];var ee=C[0],Q=C[1],ne=C[2],le=C[3],Ae=C[4],Se=C[5],Ie=C[6],Be=C[7];return C=C[8],x[0]=ee*R+Q*P+ne*j,x[1]=ee*H+Q*F+ne*q,x[2]=ee*Z+Q*V+ne*S,x[3]=le*R+Ae*P+Se*j,x[4]=le*H+Ae*F+Se*q,x[5]=le*Z+Ae*V+Se*S,x[6]=Ie*R+Be*P+C*j,x[7]=Ie*H+Be*F+C*q,x[8]=Ie*Z+Be*V+C*S,x}function h(x,S,C){return x[0]=S[0]-C[0],x[1]=S[1]-C[1],x[2]=S[2]-C[2],x[3]=S[3]-C[3],x[4]=S[4]-C[4],x[5]=S[5]-C[5],x[6]=S[6]-C[6],x[7]=S[7]-C[7],x[8]=S[8]-C[8],x}Object.defineProperty(p,"__esModule",{value:!0}),p.create=function(){var x=new _.ARRAY_TYPE(9);return _.ARRAY_TYPE!=Float32Array&&(x[1]=0,x[2]=0,x[3]=0,x[5]=0,x[6]=0,x[7]=0),x[0]=1,x[4]=1,x[8]=1,x},p.fromMat4=function(x,S){return x[0]=S[0],x[1]=S[1],x[2]=S[2],x[3]=S[4],x[4]=S[5],x[5]=S[6],x[6]=S[8],x[7]=S[9],x[8]=S[10],x},p.clone=function(x){var S=new _.ARRAY_TYPE(9);return S[0]=x[0],S[1]=x[1],S[2]=x[2],S[3]=x[3],S[4]=x[4],S[5]=x[5],S[6]=x[6],S[7]=x[7],S[8]=x[8],S},p.copy=function(x,S){return x[0]=S[0],x[1]=S[1],x[2]=S[2],x[3]=S[3],x[4]=S[4],x[5]=S[5],x[6]=S[6],x[7]=S[7],x[8]=S[8],x},p.fromValues=function(x,S,C,R,H,Z,P,F,V){var j=new _.ARRAY_TYPE(9);return j[0]=x,j[1]=S,j[2]=C,j[3]=R,j[4]=H,j[5]=Z,j[6]=P,j[7]=F,j[8]=V,j},p.set=function(x,S,C,R,H,Z,P,F,V,j){return x[0]=S,x[1]=C,x[2]=R,x[3]=H,x[4]=Z,x[5]=P,x[6]=F,x[7]=V,x[8]=j,x},p.identity=function(x){return x[0]=1,x[1]=0,x[2]=0,x[3]=0,x[4]=1,x[5]=0,x[6]=0,x[7]=0,x[8]=1,x},p.transpose=function(x,S){if(x===S){var C=S[1],R=S[2],H=S[5];x[1]=S[3],x[2]=S[6],x[3]=C,x[5]=S[7],x[6]=R,x[7]=H}else x[0]=S[0],x[1]=S[3],x[2]=S[6],x[3]=S[1],x[4]=S[4],x[5]=S[7],x[6]=S[2],x[7]=S[5],x[8]=S[8];return x},p.invert=function(x,S){var C=S[0],R=S[1],H=S[2],Z=S[3],P=S[4],F=S[5],V=S[6],j=S[7];S=S[8];var q=S*P-F*j,ee=-S*Z+F*V,Q=j*Z-P*V,ne=C*q+R*ee+H*Q;return ne?(ne=1/ne,x[0]=q*ne,x[1]=(-S*R+H*j)*ne,x[2]=(F*R-H*P)*ne,x[3]=ee*ne,x[4]=(S*C-H*V)*ne,x[5]=(-F*C+H*Z)*ne,x[6]=Q*ne,x[7]=(-j*C+R*V)*ne,x[8]=(P*C-R*Z)*ne,x):null},p.adjoint=function(x,S){var C=S[0],R=S[1],H=S[2],Z=S[3],P=S[4],F=S[5],V=S[6],j=S[7];return S=S[8],x[0]=P*S-F*j,x[1]=H*j-R*S,x[2]=R*F-H*P,x[3]=F*V-Z*S,x[4]=C*S-H*V,x[5]=H*Z-C*F,x[6]=Z*j-P*V,x[7]=R*V-C*j,x[8]=C*P-R*Z,x},p.determinant=function(x){var S=x[3],C=x[4],R=x[5],H=x[6],Z=x[7],P=x[8];return x[0]*(P*C-R*Z)+x[1]*(-P*S+R*H)+x[2]*(Z*S-C*H)},p.multiply=s,p.translate=function(x,S,C){var R=S[0],H=S[1],Z=S[2],P=S[3],F=S[4],V=S[5],j=S[6],q=S[7];S=S[8];var ee=C[0];return C=C[1],x[0]=R,x[1]=H,x[2]=Z,x[3]=P,x[4]=F,x[5]=V,x[6]=ee*R+C*P+j,x[7]=ee*H+C*F+q,x[8]=ee*Z+C*V+S,x},p.rotate=function(x,S,C){var R=S[0],H=S[1],Z=S[2],P=S[3],F=S[4],V=S[5],j=S[6],q=S[7];S=S[8];var ee=Math.sin(C);return C=Math.cos(C),x[0]=C*R+ee*P,x[1]=C*H+ee*F,x[2]=C*Z+ee*V,x[3]=C*P-ee*R,x[4]=C*F-ee*H,x[5]=C*V-ee*Z,x[6]=j,x[7]=q,x[8]=S,x},p.scale=function(x,S,C){var R=C[0];return C=C[1],x[0]=R*S[0],x[1]=R*S[1],x[2]=R*S[2],x[3]=C*S[3],x[4]=C*S[4],x[5]=C*S[5],x[6]=S[6],x[7]=S[7],x[8]=S[8],x},p.fromTranslation=function(x,S){return x[0]=1,x[1]=0,x[2]=0,x[3]=0,x[4]=1,x[5]=0,x[6]=S[0],x[7]=S[1],x[8]=1,x},p.fromRotation=function(x,S){var C=Math.sin(S);return S=Math.cos(S),x[0]=S,x[1]=C,x[2]=0,x[3]=-C,x[4]=S,x[5]=0,x[6]=0,x[7]=0,x[8]=1,x},p.fromScaling=function(x,S){return x[0]=S[0],x[1]=0,x[2]=0,x[3]=0,x[4]=S[1],x[5]=0,x[6]=0,x[7]=0,x[8]=1,x},p.fromMat2d=function(x,S){return x[0]=S[0],x[1]=S[1],x[2]=0,x[3]=S[2],x[4]=S[3],x[5]=0,x[6]=S[4],x[7]=S[5],x[8]=1,x},p.fromQuat=function(x,S){var C=S[0],R=S[1],H=S[2];S=S[3];var Z=C+C,P=R+R,F=H+H;C*=Z;var V=R*Z;R*=P;var j=H*Z,q=H*P;return H*=F,Z*=S,P*=S,S*=F,x[0]=1-R-H,x[3]=V-S,x[6]=j+P,x[1]=V+S,x[4]=1-C-H,x[7]=q-Z,x[2]=j-P,x[5]=q+Z,x[8]=1-C-R,x},p.normalFromMat4=function(x,S){var C=S[0],R=S[1],H=S[2],Z=S[3],P=S[4],F=S[5],V=S[6],j=S[7],q=S[8],ee=S[9],Q=S[10],ne=S[11],le=S[12],Ae=S[13],Se=S[14];S=S[15];var Ie=C*F-R*P,Be=C*V-H*P,nt=C*j-Z*P,rt=R*V-H*F,St=R*j-Z*F,Pt=H*j-Z*V,$t=q*Ae-ee*le,Xt=q*Se-Q*le;q=q*S-ne*le;var wr=ee*Se-Q*Ae;return ee=ee*S-ne*Ae,Q=Q*S-ne*Se,ne=Ie*Q-Be*ee+nt*wr+rt*q-St*Xt+Pt*$t,ne?(ne=1/ne,x[0]=(F*Q-V*ee+j*wr)*ne,x[1]=(V*q-P*Q-j*Xt)*ne,x[2]=(P*ee-F*q+j*$t)*ne,x[3]=(H*ee-R*Q-Z*wr)*ne,x[4]=(C*Q-H*q+Z*Xt)*ne,x[5]=(R*q-C*ee-Z*$t)*ne,x[6]=(Ae*Pt-Se*St+S*rt)*ne,x[7]=(Se*nt-le*Pt-S*Be)*ne,x[8]=(le*St-Ae*nt+S*Ie)*ne,x):null},p.projection=function(x,S,C){return x[0]=2/S,x[1]=0,x[2]=0,x[3]=0,x[4]=-2/C,x[5]=0,x[6]=-1,x[7]=1,x[8]=1,x},p.str=function(x){return"mat3("+x[0]+", "+x[1]+", "+x[2]+", "+x[3]+", "+x[4]+", "+x[5]+", "+x[6]+", "+x[7]+", "+x[8]+")"},p.frob=function(x){return Math.sqrt(Math.pow(x[0],2)+Math.pow(x[1],2)+Math.pow(x[2],2)+Math.pow(x[3],2)+Math.pow(x[4],2)+Math.pow(x[5],2)+Math.pow(x[6],2)+Math.pow(x[7],2)+Math.pow(x[8],2))},p.add=function(x,S,C){return x[0]=S[0]+C[0],x[1]=S[1]+C[1],x[2]=S[2]+C[2],x[3]=S[3]+C[3],x[4]=S[4]+C[4],x[5]=S[5]+C[5],x[6]=S[6]+C[6],x[7]=S[7]+C[7],x[8]=S[8]+C[8],x},p.subtract=h,p.multiplyScalar=function(x,S,C){return x[0]=S[0]*C,x[1]=S[1]*C,x[2]=S[2]*C,x[3]=S[3]*C,x[4]=S[4]*C,x[5]=S[5]*C,x[6]=S[6]*C,x[7]=S[7]*C,x[8]=S[8]*C,x},p.multiplyScalarAndAdd=function(x,S,C,R){return x[0]=S[0]+C[0]*R,x[1]=S[1]+C[1]*R,x[2]=S[2]+C[2]*R,x[3]=S[3]+C[3]*R,x[4]=S[4]+C[4]*R,x[5]=S[5]+C[5]*R,x[6]=S[6]+C[6]*R,x[7]=S[7]+C[7]*R,x[8]=S[8]+C[8]*R,x},p.exactEquals=function(x,S){return x[0]===S[0]&&x[1]===S[1]&&x[2]===S[2]&&x[3]===S[3]&&x[4]===S[4]&&x[5]===S[5]&&x[6]===S[6]&&x[7]===S[7]&&x[8]===S[8]},p.equals=function(x,S){var C=x[0],R=x[1],H=x[2],Z=x[3],P=x[4],F=x[5],V=x[6],j=x[7];x=x[8];var q=S[0],ee=S[1],Q=S[2],ne=S[3],le=S[4],Ae=S[5],Se=S[6],Ie=S[7];return S=S[8],Math.abs(C-q)<=_.EPSILON*Math.max(1,Math.abs(C),Math.abs(q))&&Math.abs(R-ee)<=_.EPSILON*Math.max(1,Math.abs(R),Math.abs(ee))&&Math.abs(H-Q)<=_.EPSILON*Math.max(1,Math.abs(H),Math.abs(Q))&&Math.abs(Z-ne)<=_.EPSILON*Math.max(1,Math.abs(Z),Math.abs(ne))&&Math.abs(P-le)<=_.EPSILON*Math.max(1,Math.abs(P),Math.abs(le))&&Math.abs(F-Ae)<=_.EPSILON*Math.max(1,Math.abs(F),Math.abs(Ae))&&Math.abs(V-Se)<=_.EPSILON*Math.max(1,Math.abs(V),Math.abs(Se))&&Math.abs(j-Ie)<=_.EPSILON*Math.max(1,Math.abs(j),Math.abs(Ie))&&Math.abs(x-S)<=_.EPSILON*Math.max(1,Math.abs(x),Math.abs(S))},p.sub=p.mul=void 0;var _=function(x){if(x&&x.__esModule)return x;var S={};if(x!=null){for(var C in x)if(Object.prototype.hasOwnProperty.call(x,C)){var R=Jo&&oo?oo(x,C):{};R.get||R.set?Jo(S,C,R):S[C]=x[C]}}return S.default=x,S}(pu);p.mul=s,p.sub=h});m(r2);var n2=M(function(d,p){function s(C){return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}function h(C,R,H){var Z=R[0],P=R[1],F=R[2],V=R[3],j=R[4],q=R[5],ee=R[6],Q=R[7],ne=R[8],le=R[9],Ae=R[10],Se=R[11],Ie=R[12],Be=R[13],nt=R[14];R=R[15];var rt=H[0],St=H[1],Pt=H[2],$t=H[3];return C[0]=rt*Z+St*j+Pt*ne+$t*Ie,C[1]=rt*P+St*q+Pt*le+$t*Be,C[2]=rt*F+St*ee+Pt*Ae+$t*nt,C[3]=rt*V+St*Q+Pt*Se+$t*R,rt=H[4],St=H[5],Pt=H[6],$t=H[7],C[4]=rt*Z+St*j+Pt*ne+$t*Ie,C[5]=rt*P+St*q+Pt*le+$t*Be,C[6]=rt*F+St*ee+Pt*Ae+$t*nt,C[7]=rt*V+St*Q+Pt*Se+$t*R,rt=H[8],St=H[9],Pt=H[10],$t=H[11],C[8]=rt*Z+St*j+Pt*ne+$t*Ie,C[9]=rt*P+St*q+Pt*le+$t*Be,C[10]=rt*F+St*ee+Pt*Ae+$t*nt,C[11]=rt*V+St*Q+Pt*Se+$t*R,rt=H[12],St=H[13],Pt=H[14],$t=H[15],C[12]=rt*Z+St*j+Pt*ne+$t*Ie,C[13]=rt*P+St*q+Pt*le+$t*Be,C[14]=rt*F+St*ee+Pt*Ae+$t*nt,C[15]=rt*V+St*Q+Pt*Se+$t*R,C}function _(C,R,H){var Z=R[0],P=R[1],F=R[2],V=R[3],j=Z+Z,q=P+P,ee=F+F;R=Z*j;var Q=Z*q;Z*=ee;var ne=P*q;return P*=ee,F*=ee,j*=V,q*=V,V*=ee,C[0]=1-(ne+F),C[1]=Q+V,C[2]=Z-q,C[3]=0,C[4]=Q-V,C[5]=1-(R+F),C[6]=P+j,C[7]=0,C[8]=Z+q,C[9]=P-j,C[10]=1-(R+ne),C[11]=0,C[12]=H[0],C[13]=H[1],C[14]=H[2],C[15]=1,C}function x(C,R,H){return C[0]=R[0]-H[0],C[1]=R[1]-H[1],C[2]=R[2]-H[2],C[3]=R[3]-H[3],C[4]=R[4]-H[4],C[5]=R[5]-H[5],C[6]=R[6]-H[6],C[7]=R[7]-H[7],C[8]=R[8]-H[8],C[9]=R[9]-H[9],C[10]=R[10]-H[10],C[11]=R[11]-H[11],C[12]=R[12]-H[12],C[13]=R[13]-H[13],C[14]=R[14]-H[14],C[15]=R[15]-H[15],C}Object.defineProperty(p,"__esModule",{value:!0}),p.create=function(){var C=new S.ARRAY_TYPE(16);return S.ARRAY_TYPE!=Float32Array&&(C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[11]=0,C[12]=0,C[13]=0,C[14]=0),C[0]=1,C[5]=1,C[10]=1,C[15]=1,C},p.clone=function(C){var R=new S.ARRAY_TYPE(16);return R[0]=C[0],R[1]=C[1],R[2]=C[2],R[3]=C[3],R[4]=C[4],R[5]=C[5],R[6]=C[6],R[7]=C[7],R[8]=C[8],R[9]=C[9],R[10]=C[10],R[11]=C[11],R[12]=C[12],R[13]=C[13],R[14]=C[14],R[15]=C[15],R},p.copy=function(C,R){return C[0]=R[0],C[1]=R[1],C[2]=R[2],C[3]=R[3],C[4]=R[4],C[5]=R[5],C[6]=R[6],C[7]=R[7],C[8]=R[8],C[9]=R[9],C[10]=R[10],C[11]=R[11],C[12]=R[12],C[13]=R[13],C[14]=R[14],C[15]=R[15],C},p.fromValues=function(C,R,H,Z,P,F,V,j,q,ee,Q,ne,le,Ae,Se,Ie){var Be=new S.ARRAY_TYPE(16);return Be[0]=C,Be[1]=R,Be[2]=H,Be[3]=Z,Be[4]=P,Be[5]=F,Be[6]=V,Be[7]=j,Be[8]=q,Be[9]=ee,Be[10]=Q,Be[11]=ne,Be[12]=le,Be[13]=Ae,Be[14]=Se,Be[15]=Ie,Be},p.set=function(C,R,H,Z,P,F,V,j,q,ee,Q,ne,le,Ae,Se,Ie,Be){return C[0]=R,C[1]=H,C[2]=Z,C[3]=P,C[4]=F,C[5]=V,C[6]=j,C[7]=q,C[8]=ee,C[9]=Q,C[10]=ne,C[11]=le,C[12]=Ae,C[13]=Se,C[14]=Ie,C[15]=Be,C},p.identity=s,p.transpose=function(C,R){if(C===R){var H=R[1],Z=R[2],P=R[3],F=R[6],V=R[7],j=R[11];C[1]=R[4],C[2]=R[8],C[3]=R[12],C[4]=H,C[6]=R[9],C[7]=R[13],C[8]=Z,C[9]=F,C[11]=R[14],C[12]=P,C[13]=V,C[14]=j}else C[0]=R[0],C[1]=R[4],C[2]=R[8],C[3]=R[12],C[4]=R[1],C[5]=R[5],C[6]=R[9],C[7]=R[13],C[8]=R[2],C[9]=R[6],C[10]=R[10],C[11]=R[14],C[12]=R[3],C[13]=R[7],C[14]=R[11],C[15]=R[15];return C},p.invert=function(C,R){var H=R[0],Z=R[1],P=R[2],F=R[3],V=R[4],j=R[5],q=R[6],ee=R[7],Q=R[8],ne=R[9],le=R[10],Ae=R[11],Se=R[12],Ie=R[13],Be=R[14];R=R[15];var nt=H*j-Z*V,rt=H*q-P*V,St=H*ee-F*V,Pt=Z*q-P*j,$t=Z*ee-F*j,Xt=P*ee-F*q,wr=Q*Ie-ne*Se,Qr=Q*Be-le*Se,bt=Q*R-Ae*Se,fr=ne*Be-le*Ie,un=ne*R-Ae*Ie,fn=le*R-Ae*Be,vr=nt*fn-rt*un+St*fr+Pt*bt-$t*Qr+Xt*wr;return vr?(vr=1/vr,C[0]=(j*fn-q*un+ee*fr)*vr,C[1]=(P*un-Z*fn-F*fr)*vr,C[2]=(Ie*Xt-Be*$t+R*Pt)*vr,C[3]=(le*$t-ne*Xt-Ae*Pt)*vr,C[4]=(q*bt-V*fn-ee*Qr)*vr,C[5]=(H*fn-P*bt+F*Qr)*vr,C[6]=(Be*St-Se*Xt-R*rt)*vr,C[7]=(Q*Xt-le*St+Ae*rt)*vr,C[8]=(V*un-j*bt+ee*wr)*vr,C[9]=(Z*bt-H*un-F*wr)*vr,C[10]=(Se*$t-Ie*St+R*nt)*vr,C[11]=(ne*St-Q*$t-Ae*nt)*vr,C[12]=(j*Qr-V*fr-q*wr)*vr,C[13]=(H*fr-Z*Qr+P*wr)*vr,C[14]=(Ie*rt-Se*Pt-Be*nt)*vr,C[15]=(Q*Pt-ne*rt+le*nt)*vr,C):null},p.adjoint=function(C,R){var H=R[0],Z=R[1],P=R[2],F=R[3],V=R[4],j=R[5],q=R[6],ee=R[7],Q=R[8],ne=R[9],le=R[10],Ae=R[11],Se=R[12],Ie=R[13],Be=R[14];return R=R[15],C[0]=j*(le*R-Ae*Be)-ne*(q*R-ee*Be)+Ie*(q*Ae-ee*le),C[1]=-(Z*(le*R-Ae*Be)-ne*(P*R-F*Be)+Ie*(P*Ae-F*le)),C[2]=Z*(q*R-ee*Be)-j*(P*R-F*Be)+Ie*(P*ee-F*q),C[3]=-(Z*(q*Ae-ee*le)-j*(P*Ae-F*le)+ne*(P*ee-F*q)),C[4]=-(V*(le*R-Ae*Be)-Q*(q*R-ee*Be)+Se*(q*Ae-ee*le)),C[5]=H*(le*R-Ae*Be)-Q*(P*R-F*Be)+Se*(P*Ae-F*le),C[6]=-(H*(q*R-ee*Be)-V*(P*R-F*Be)+Se*(P*ee-F*q)),C[7]=H*(q*Ae-ee*le)-V*(P*Ae-F*le)+Q*(P*ee-F*q),C[8]=V*(ne*R-Ae*Ie)-Q*(j*R-ee*Ie)+Se*(j*Ae-ee*ne),C[9]=-(H*(ne*R-Ae*Ie)-Q*(Z*R-F*Ie)+Se*(Z*Ae-F*ne)),C[10]=H*(j*R-ee*Ie)-V*(Z*R-F*Ie)+Se*(Z*ee-F*j),C[11]=-(H*(j*Ae-ee*ne)-V*(Z*Ae-F*ne)+Q*(Z*ee-F*j)),C[12]=-(V*(ne*Be-le*Ie)-Q*(j*Be-q*Ie)+Se*(j*le-q*ne)),C[13]=H*(ne*Be-le*Ie)-Q*(Z*Be-P*Ie)+Se*(Z*le-P*ne),C[14]=-(H*(j*Be-q*Ie)-V*(Z*Be-P*Ie)+Se*(Z*q-P*j)),C[15]=H*(j*le-q*ne)-V*(Z*le-P*ne)+Q*(Z*q-P*j),C},p.determinant=function(C){var R=C[0],H=C[1],Z=C[2],P=C[3],F=C[4],V=C[5],j=C[6],q=C[7],ee=C[8],Q=C[9],ne=C[10],le=C[11],Ae=C[12],Se=C[13],Ie=C[14];return C=C[15],(R*V-H*F)*(ne*C-le*Ie)-(R*j-Z*F)*(Q*C-le*Se)+(R*q-P*F)*(Q*Ie-ne*Se)+(H*j-Z*V)*(ee*C-le*Ae)-(H*q-P*V)*(ee*Ie-ne*Ae)+(Z*q-P*j)*(ee*Se-Q*Ae)},p.multiply=h,p.translate=function(C,R,H){var Z=H[0],P=H[1];if(H=H[2],R===C)C[12]=R[0]*Z+R[4]*P+R[8]*H+R[12],C[13]=R[1]*Z+R[5]*P+R[9]*H+R[13],C[14]=R[2]*Z+R[6]*P+R[10]*H+R[14],C[15]=R[3]*Z+R[7]*P+R[11]*H+R[15];else{var F=R[0],V=R[1],j=R[2],q=R[3],ee=R[4],Q=R[5],ne=R[6],le=R[7],Ae=R[8],Se=R[9],Ie=R[10],Be=R[11];C[0]=F,C[1]=V,C[2]=j,C[3]=q,C[4]=ee,C[5]=Q,C[6]=ne,C[7]=le,C[8]=Ae,C[9]=Se,C[10]=Ie,C[11]=Be,C[12]=F*Z+ee*P+Ae*H+R[12],C[13]=V*Z+Q*P+Se*H+R[13],C[14]=j*Z+ne*P+Ie*H+R[14],C[15]=q*Z+le*P+Be*H+R[15]}return C},p.scale=function(C,R,H){var Z=H[0],P=H[1];return H=H[2],C[0]=R[0]*Z,C[1]=R[1]*Z,C[2]=R[2]*Z,C[3]=R[3]*Z,C[4]=R[4]*P,C[5]=R[5]*P,C[6]=R[6]*P,C[7]=R[7]*P,C[8]=R[8]*H,C[9]=R[9]*H,C[10]=R[10]*H,C[11]=R[11]*H,C[12]=R[12],C[13]=R[13],C[14]=R[14],C[15]=R[15],C},p.rotate=function(C,R,H,Z){var P=Z[0],F=Z[1];Z=Z[2];var V=Math.sqrt(P*P+F*F+Z*Z);if(V<S.EPSILON)return null;V=1/V,P*=V,F*=V,Z*=V;var j=Math.sin(H),q=Math.cos(H),ee=1-q;H=R[0],V=R[1];var Q=R[2],ne=R[3],le=R[4],Ae=R[5],Se=R[6],Ie=R[7],Be=R[8],nt=R[9],rt=R[10],St=R[11],Pt=P*P*ee+q,$t=F*P*ee+Z*j,Xt=Z*P*ee-F*j,wr=P*F*ee-Z*j,Qr=F*F*ee+q,bt=Z*F*ee+P*j,fr=P*Z*ee+F*j;return P=F*Z*ee-P*j,F=Z*Z*ee+q,C[0]=H*Pt+le*$t+Be*Xt,C[1]=V*Pt+Ae*$t+nt*Xt,C[2]=Q*Pt+Se*$t+rt*Xt,C[3]=ne*Pt+Ie*$t+St*Xt,C[4]=H*wr+le*Qr+Be*bt,C[5]=V*wr+Ae*Qr+nt*bt,C[6]=Q*wr+Se*Qr+rt*bt,C[7]=ne*wr+Ie*Qr+St*bt,C[8]=H*fr+le*P+Be*F,C[9]=V*fr+Ae*P+nt*F,C[10]=Q*fr+Se*P+rt*F,C[11]=ne*fr+Ie*P+St*F,R!==C&&(C[12]=R[12],C[13]=R[13],C[14]=R[14],C[15]=R[15]),C},p.rotateX=function(C,R,H){var Z=Math.sin(H);H=Math.cos(H);var P=R[4],F=R[5],V=R[6],j=R[7],q=R[8],ee=R[9],Q=R[10],ne=R[11];return R!==C&&(C[0]=R[0],C[1]=R[1],C[2]=R[2],C[3]=R[3],C[12]=R[12],C[13]=R[13],C[14]=R[14],C[15]=R[15]),C[4]=P*H+q*Z,C[5]=F*H+ee*Z,C[6]=V*H+Q*Z,C[7]=j*H+ne*Z,C[8]=q*H-P*Z,C[9]=ee*H-F*Z,C[10]=Q*H-V*Z,C[11]=ne*H-j*Z,C},p.rotateY=function(C,R,H){var Z=Math.sin(H);H=Math.cos(H);var P=R[0],F=R[1],V=R[2],j=R[3],q=R[8],ee=R[9],Q=R[10],ne=R[11];return R!==C&&(C[4]=R[4],C[5]=R[5],C[6]=R[6],C[7]=R[7],C[12]=R[12],C[13]=R[13],C[14]=R[14],C[15]=R[15]),C[0]=P*H-q*Z,C[1]=F*H-ee*Z,C[2]=V*H-Q*Z,C[3]=j*H-ne*Z,C[8]=P*Z+q*H,C[9]=F*Z+ee*H,C[10]=V*Z+Q*H,C[11]=j*Z+ne*H,C},p.rotateZ=function(C,R,H){var Z=Math.sin(H);H=Math.cos(H);var P=R[0],F=R[1],V=R[2],j=R[3],q=R[4],ee=R[5],Q=R[6],ne=R[7];return R!==C&&(C[8]=R[8],C[9]=R[9],C[10]=R[10],C[11]=R[11],C[12]=R[12],C[13]=R[13],C[14]=R[14],C[15]=R[15]),C[0]=P*H+q*Z,C[1]=F*H+ee*Z,C[2]=V*H+Q*Z,C[3]=j*H+ne*Z,C[4]=q*H-P*Z,C[5]=ee*H-F*Z,C[6]=Q*H-V*Z,C[7]=ne*H-j*Z,C},p.fromTranslation=function(C,R){return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=R[0],C[13]=R[1],C[14]=R[2],C[15]=1,C},p.fromScaling=function(C,R){return C[0]=R[0],C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=R[1],C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=R[2],C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C},p.fromRotation=function(C,R,H){var Z=H[0],P=H[1];H=H[2];var F=Math.sqrt(Z*Z+P*P+H*H);if(F<S.EPSILON)return null;F=1/F,Z*=F,P*=F,H*=F,F=Math.sin(R),R=Math.cos(R);var V=1-R;return C[0]=Z*Z*V+R,C[1]=P*Z*V+H*F,C[2]=H*Z*V-P*F,C[3]=0,C[4]=Z*P*V-H*F,C[5]=P*P*V+R,C[6]=H*P*V+Z*F,C[7]=0,C[8]=Z*H*V+P*F,C[9]=P*H*V-Z*F,C[10]=H*H*V+R,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C},p.fromXRotation=function(C,R){var H=Math.sin(R);return R=Math.cos(R),C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=R,C[6]=H,C[7]=0,C[8]=0,C[9]=-H,C[10]=R,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C},p.fromYRotation=function(C,R){var H=Math.sin(R);return R=Math.cos(R),C[0]=R,C[1]=0,C[2]=-H,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=H,C[9]=0,C[10]=R,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C},p.fromZRotation=function(C,R){var H=Math.sin(R);return R=Math.cos(R),C[0]=R,C[1]=H,C[2]=0,C[3]=0,C[4]=-H,C[5]=R,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C},p.fromRotationTranslation=_,p.fromQuat2=function(C,R){var H=new S.ARRAY_TYPE(3),Z=-R[0],P=-R[1],F=-R[2],V=R[3],j=R[4],q=R[5],ee=R[6],Q=R[7],ne=Z*Z+P*P+F*F+V*V;return 0<ne?(H[0]=2*(j*V+Q*Z+q*F-ee*P)/ne,H[1]=2*(q*V+Q*P+ee*Z-j*F)/ne,H[2]=2*(ee*V+Q*F+j*P-q*Z)/ne):(H[0]=2*(j*V+Q*Z+q*F-ee*P),H[1]=2*(q*V+Q*P+ee*Z-j*F),H[2]=2*(ee*V+Q*F+j*P-q*Z)),_(C,R,H),C},p.getTranslation=function(C,R){return C[0]=R[12],C[1]=R[13],C[2]=R[14],C},p.getScaling=function(C,R){var H=R[0],Z=R[1],P=R[2],F=R[4],V=R[5],j=R[6],q=R[8],ee=R[9];return R=R[10],C[0]=Math.sqrt(H*H+Z*Z+P*P),C[1]=Math.sqrt(F*F+V*V+j*j),C[2]=Math.sqrt(q*q+ee*ee+R*R),C},p.getRotation=function(C,R){var H=R[0]+R[5]+R[10];return 0<H?(H=2*Math.sqrt(H+1),C[3]=.25*H,C[0]=(R[6]-R[9])/H,C[1]=(R[8]-R[2])/H,C[2]=(R[1]-R[4])/H):R[0]>R[5]&&R[0]>R[10]?(H=2*Math.sqrt(1+R[0]-R[5]-R[10]),C[3]=(R[6]-R[9])/H,C[0]=.25*H,C[1]=(R[1]+R[4])/H,C[2]=(R[8]+R[2])/H):R[5]>R[10]?(H=2*Math.sqrt(1+R[5]-R[0]-R[10]),C[3]=(R[8]-R[2])/H,C[0]=(R[1]+R[4])/H,C[1]=.25*H,C[2]=(R[6]+R[9])/H):(H=2*Math.sqrt(1+R[10]-R[0]-R[5]),C[3]=(R[1]-R[4])/H,C[0]=(R[8]+R[2])/H,C[1]=(R[6]+R[9])/H,C[2]=.25*H),C},p.fromRotationTranslationScale=function(C,R,H,Z){var P=R[0],F=R[1],V=R[2],j=R[3],q=P+P,ee=F+F,Q=V+V;R=P*q;var ne=P*ee;P*=Q;var le=F*ee;F*=Q,V*=Q,q*=j,ee*=j,j*=Q,Q=Z[0];var Ae=Z[1];return Z=Z[2],C[0]=(1-(le+V))*Q,C[1]=(ne+j)*Q,C[2]=(P-ee)*Q,C[3]=0,C[4]=(ne-j)*Ae,C[5]=(1-(R+V))*Ae,C[6]=(F+q)*Ae,C[7]=0,C[8]=(P+ee)*Z,C[9]=(F-q)*Z,C[10]=(1-(R+le))*Z,C[11]=0,C[12]=H[0],C[13]=H[1],C[14]=H[2],C[15]=1,C},p.fromRotationTranslationScaleOrigin=function(C,R,H,Z,P){var F=R[0],V=R[1],j=R[2],q=R[3],ee=F+F,Q=V+V,ne=j+j;R=F*ee;var le=F*Q,Ae=F*ne;F=V*Q,V*=ne;var Se=j*ne;j=q*ee,Q*=q;var Ie=q*ne,Be=Z[0],nt=Z[1];ne=Z[2],Z=P[0],q=P[1],P=P[2],ee=(1-(F+Se))*Be;var rt=(le+Ie)*Be;return Be*=Ae-Q,le=(le-Ie)*nt,Se=(1-(R+Se))*nt,nt*=V+j,Ae=(Ae+Q)*ne,V=(V-j)*ne,R=(1-(R+F))*ne,C[0]=ee,C[1]=rt,C[2]=Be,C[3]=0,C[4]=le,C[5]=Se,C[6]=nt,C[7]=0,C[8]=Ae,C[9]=V,C[10]=R,C[11]=0,C[12]=H[0]+Z-(ee*Z+le*q+Ae*P),C[13]=H[1]+q-(rt*Z+Se*q+V*P),C[14]=H[2]+P-(Be*Z+nt*q+R*P),C[15]=1,C},p.fromQuat=function(C,R){var H=R[0],Z=R[1],P=R[2];R=R[3];var F=H+H,V=Z+Z,j=P+P;H*=F;var q=Z*F;Z*=V;var ee=P*F,Q=P*V;return P*=j,F*=R,V*=R,R*=j,C[0]=1-Z-P,C[1]=q+R,C[2]=ee-V,C[3]=0,C[4]=q-R,C[5]=1-H-P,C[6]=Q+F,C[7]=0,C[8]=ee+V,C[9]=Q-F,C[10]=1-H-Z,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C},p.frustum=function(C,R,H,Z,P,F,V){var j=1/(H-R),q=1/(P-Z),ee=1/(F-V);return C[0]=2*F*j,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=2*F*q,C[6]=0,C[7]=0,C[8]=(H+R)*j,C[9]=(P+Z)*q,C[10]=(V+F)*ee,C[11]=-1,C[12]=0,C[13]=0,C[14]=V*F*2*ee,C[15]=0,C},p.perspective=function(C,R,H,Z,P){return R=1/Math.tan(R/2),C[0]=R/H,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=R,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[11]=-1,C[12]=0,C[13]=0,C[15]=0,P!=null&&P!==1/0?(H=1/(Z-P),C[10]=(P+Z)*H,C[14]=2*P*Z*H):(C[10]=-1,C[14]=-2*Z),C},p.perspectiveFromFieldOfView=function(C,R,H,Z){var P=Math.tan(R.upDegrees*Math.PI/180),F=Math.tan(R.downDegrees*Math.PI/180),V=Math.tan(R.leftDegrees*Math.PI/180);R=Math.tan(R.rightDegrees*Math.PI/180);var j=2/(V+R),q=2/(P+F);return C[0]=j,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=q,C[6]=0,C[7]=0,C[8]=-((V-R)*j*.5),C[9]=(P-F)*q*.5,C[10]=Z/(H-Z),C[11]=-1,C[12]=0,C[13]=0,C[14]=Z*H/(H-Z),C[15]=0,C},p.ortho=function(C,R,H,Z,P,F,V){var j=1/(R-H),q=1/(Z-P),ee=1/(F-V);return C[0]=-2*j,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=-2*q,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=2*ee,C[11]=0,C[12]=(R+H)*j,C[13]=(P+Z)*q,C[14]=(V+F)*ee,C[15]=1,C},p.lookAt=function(C,R,H,Z){var P=R[0],F=R[1];R=R[2];var V=Z[0],j=Z[1],q=Z[2],ee=H[0];Z=H[1];var Q=H[2];if(Math.abs(P-ee)<S.EPSILON&&Math.abs(F-Z)<S.EPSILON&&Math.abs(R-Q)<S.EPSILON)return s(C);H=P-ee,Z=F-Z,ee=R-Q;var ne=1/Math.sqrt(H*H+Z*Z+ee*ee);H*=ne,Z*=ne,ee*=ne,Q=j*ee-q*Z,q=q*H-V*ee,V=V*Z-j*H,(ne=Math.sqrt(Q*Q+q*q+V*V))?(ne=1/ne,Q*=ne,q*=ne,V*=ne):V=q=Q=0,j=Z*V-ee*q;var le=ee*Q-H*V,Ae=H*q-Z*Q;return(ne=Math.sqrt(j*j+le*le+Ae*Ae))?(ne=1/ne,j*=ne,le*=ne,Ae*=ne):Ae=le=j=0,C[0]=Q,C[1]=j,C[2]=H,C[3]=0,C[4]=q,C[5]=le,C[6]=Z,C[7]=0,C[8]=V,C[9]=Ae,C[10]=ee,C[11]=0,C[12]=-(Q*P+q*F+V*R),C[13]=-(j*P+le*F+Ae*R),C[14]=-(H*P+Z*F+ee*R),C[15]=1,C},p.targetTo=function(C,R,H,Z){var P=R[0],F=R[1];R=R[2];var V=Z[0],j=Z[1],q=Z[2];Z=P-H[0];var ee=F-H[1];H=R-H[2];var Q=Z*Z+ee*ee+H*H;0<Q&&(Q=1/Math.sqrt(Q),Z*=Q,ee*=Q,H*=Q);var ne=j*H-q*ee;return q=q*Z-V*H,V=V*ee-j*Z,Q=ne*ne+q*q+V*V,0<Q&&(Q=1/Math.sqrt(Q),ne*=Q,q*=Q,V*=Q),C[0]=ne,C[1]=q,C[2]=V,C[3]=0,C[4]=ee*V-H*q,C[5]=H*ne-Z*V,C[6]=Z*q-ee*ne,C[7]=0,C[8]=Z,C[9]=ee,C[10]=H,C[11]=0,C[12]=P,C[13]=F,C[14]=R,C[15]=1,C},p.str=function(C){return"mat4("+C[0]+", "+C[1]+", "+C[2]+", "+C[3]+", "+C[4]+", "+C[5]+", "+C[6]+", "+C[7]+", "+C[8]+", "+C[9]+", "+C[10]+", "+C[11]+", "+C[12]+", "+C[13]+", "+C[14]+", "+C[15]+")"},p.frob=function(C){return Math.sqrt(Math.pow(C[0],2)+Math.pow(C[1],2)+Math.pow(C[2],2)+Math.pow(C[3],2)+Math.pow(C[4],2)+Math.pow(C[5],2)+Math.pow(C[6],2)+Math.pow(C[7],2)+Math.pow(C[8],2)+Math.pow(C[9],2)+Math.pow(C[10],2)+Math.pow(C[11],2)+Math.pow(C[12],2)+Math.pow(C[13],2)+Math.pow(C[14],2)+Math.pow(C[15],2))},p.add=function(C,R,H){return C[0]=R[0]+H[0],C[1]=R[1]+H[1],C[2]=R[2]+H[2],C[3]=R[3]+H[3],C[4]=R[4]+H[4],C[5]=R[5]+H[5],C[6]=R[6]+H[6],C[7]=R[7]+H[7],C[8]=R[8]+H[8],C[9]=R[9]+H[9],C[10]=R[10]+H[10],C[11]=R[11]+H[11],C[12]=R[12]+H[12],C[13]=R[13]+H[13],C[14]=R[14]+H[14],C[15]=R[15]+H[15],C},p.subtract=x,p.multiplyScalar=function(C,R,H){return C[0]=R[0]*H,C[1]=R[1]*H,C[2]=R[2]*H,C[3]=R[3]*H,C[4]=R[4]*H,C[5]=R[5]*H,C[6]=R[6]*H,C[7]=R[7]*H,C[8]=R[8]*H,C[9]=R[9]*H,C[10]=R[10]*H,C[11]=R[11]*H,C[12]=R[12]*H,C[13]=R[13]*H,C[14]=R[14]*H,C[15]=R[15]*H,C},p.multiplyScalarAndAdd=function(C,R,H,Z){return C[0]=R[0]+H[0]*Z,C[1]=R[1]+H[1]*Z,C[2]=R[2]+H[2]*Z,C[3]=R[3]+H[3]*Z,C[4]=R[4]+H[4]*Z,C[5]=R[5]+H[5]*Z,C[6]=R[6]+H[6]*Z,C[7]=R[7]+H[7]*Z,C[8]=R[8]+H[8]*Z,C[9]=R[9]+H[9]*Z,C[10]=R[10]+H[10]*Z,C[11]=R[11]+H[11]*Z,C[12]=R[12]+H[12]*Z,C[13]=R[13]+H[13]*Z,C[14]=R[14]+H[14]*Z,C[15]=R[15]+H[15]*Z,C},p.exactEquals=function(C,R){return C[0]===R[0]&&C[1]===R[1]&&C[2]===R[2]&&C[3]===R[3]&&C[4]===R[4]&&C[5]===R[5]&&C[6]===R[6]&&C[7]===R[7]&&C[8]===R[8]&&C[9]===R[9]&&C[10]===R[10]&&C[11]===R[11]&&C[12]===R[12]&&C[13]===R[13]&&C[14]===R[14]&&C[15]===R[15]},p.equals=function(C,R){var H=C[0],Z=C[1],P=C[2],F=C[3],V=C[4],j=C[5],q=C[6],ee=C[7],Q=C[8],ne=C[9],le=C[10],Ae=C[11],Se=C[12],Ie=C[13],Be=C[14];C=C[15];var nt=R[0],rt=R[1],St=R[2],Pt=R[3],$t=R[4],Xt=R[5],wr=R[6],Qr=R[7],bt=R[8],fr=R[9],un=R[10],fn=R[11],vr=R[12],la=R[13],so=R[14];return R=R[15],Math.abs(H-nt)<=S.EPSILON*Math.max(1,Math.abs(H),Math.abs(nt))&&Math.abs(Z-rt)<=S.EPSILON*Math.max(1,Math.abs(Z),Math.abs(rt))&&Math.abs(P-St)<=S.EPSILON*Math.max(1,Math.abs(P),Math.abs(St))&&Math.abs(F-Pt)<=S.EPSILON*Math.max(1,Math.abs(F),Math.abs(Pt))&&Math.abs(V-$t)<=S.EPSILON*Math.max(1,Math.abs(V),Math.abs($t))&&Math.abs(j-Xt)<=S.EPSILON*Math.max(1,Math.abs(j),Math.abs(Xt))&&Math.abs(q-wr)<=S.EPSILON*Math.max(1,Math.abs(q),Math.abs(wr))&&Math.abs(ee-Qr)<=S.EPSILON*Math.max(1,Math.abs(ee),Math.abs(Qr))&&Math.abs(Q-bt)<=S.EPSILON*Math.max(1,Math.abs(Q),Math.abs(bt))&&Math.abs(ne-fr)<=S.EPSILON*Math.max(1,Math.abs(ne),Math.abs(fr))&&Math.abs(le-un)<=S.EPSILON*Math.max(1,Math.abs(le),Math.abs(un))&&Math.abs(Ae-fn)<=S.EPSILON*Math.max(1,Math.abs(Ae),Math.abs(fn))&&Math.abs(Se-vr)<=S.EPSILON*Math.max(1,Math.abs(Se),Math.abs(vr))&&Math.abs(Ie-la)<=S.EPSILON*Math.max(1,Math.abs(Ie),Math.abs(la))&&Math.abs(Be-so)<=S.EPSILON*Math.max(1,Math.abs(Be),Math.abs(so))&&Math.abs(C-R)<=S.EPSILON*Math.max(1,Math.abs(C),Math.abs(R))},p.sub=p.mul=void 0;var S=function(C){if(C&&C.__esModule)return C;var R={};if(C!=null){for(var H in C)if(Object.prototype.hasOwnProperty.call(C,H)){var Z=Jo&&oo?oo(C,H):{};Z.get||Z.set?Jo(R,H,Z):R[H]=C[H]}}return R.default=C,R}(pu);p.mul=h,p.sub=x});m(n2);var i2=M(function(d,p){function s(){var j=new V.ARRAY_TYPE(3);return V.ARRAY_TYPE!=Float32Array&&(j[0]=0,j[1]=0,j[2]=0),j}function h(j){var q=j[0],ee=j[1];return j=j[2],Math.sqrt(q*q+ee*ee+j*j)}function _(j,q,ee){var Q=new V.ARRAY_TYPE(3);return Q[0]=j,Q[1]=q,Q[2]=ee,Q}function x(j,q,ee){return j[0]=q[0]-ee[0],j[1]=q[1]-ee[1],j[2]=q[2]-ee[2],j}function S(j,q,ee){return j[0]=q[0]*ee[0],j[1]=q[1]*ee[1],j[2]=q[2]*ee[2],j}function C(j,q,ee){return j[0]=q[0]/ee[0],j[1]=q[1]/ee[1],j[2]=q[2]/ee[2],j}function R(j,q){var ee=q[0]-j[0],Q=q[1]-j[1];return j=q[2]-j[2],Math.sqrt(ee*ee+Q*Q+j*j)}function H(j,q){var ee=q[0]-j[0],Q=q[1]-j[1];return j=q[2]-j[2],ee*ee+Q*Q+j*j}function Z(j){var q=j[0],ee=j[1];return j=j[2],q*q+ee*ee+j*j}function P(j,q){var ee=q[0],Q=q[1],ne=q[2];return ee=ee*ee+Q*Q+ne*ne,0<ee&&(ee=1/Math.sqrt(ee)),j[0]=q[0]*ee,j[1]=q[1]*ee,j[2]=q[2]*ee,j}function F(j,q){return j[0]*q[0]+j[1]*q[1]+j[2]*q[2]}Object.defineProperty(p,"__esModule",{value:!0}),p.create=s,p.clone=function(j){var q=new V.ARRAY_TYPE(3);return q[0]=j[0],q[1]=j[1],q[2]=j[2],q},p.length=h,p.fromValues=_,p.copy=function(j,q){return j[0]=q[0],j[1]=q[1],j[2]=q[2],j},p.set=function(j,q,ee,Q){return j[0]=q,j[1]=ee,j[2]=Q,j},p.add=function(j,q,ee){return j[0]=q[0]+ee[0],j[1]=q[1]+ee[1],j[2]=q[2]+ee[2],j},p.subtract=x,p.multiply=S,p.divide=C,p.ceil=function(j,q){return j[0]=Math.ceil(q[0]),j[1]=Math.ceil(q[1]),j[2]=Math.ceil(q[2]),j},p.floor=function(j,q){return j[0]=Math.floor(q[0]),j[1]=Math.floor(q[1]),j[2]=Math.floor(q[2]),j},p.min=function(j,q,ee){return j[0]=Math.min(q[0],ee[0]),j[1]=Math.min(q[1],ee[1]),j[2]=Math.min(q[2],ee[2]),j},p.max=function(j,q,ee){return j[0]=Math.max(q[0],ee[0]),j[1]=Math.max(q[1],ee[1]),j[2]=Math.max(q[2],ee[2]),j},p.round=function(j,q){return j[0]=Math.round(q[0]),j[1]=Math.round(q[1]),j[2]=Math.round(q[2]),j},p.scale=function(j,q,ee){return j[0]=q[0]*ee,j[1]=q[1]*ee,j[2]=q[2]*ee,j},p.scaleAndAdd=function(j,q,ee,Q){return j[0]=q[0]+ee[0]*Q,j[1]=q[1]+ee[1]*Q,j[2]=q[2]+ee[2]*Q,j},p.distance=R,p.squaredDistance=H,p.squaredLength=Z,p.negate=function(j,q){return j[0]=-q[0],j[1]=-q[1],j[2]=-q[2],j},p.inverse=function(j,q){return j[0]=1/q[0],j[1]=1/q[1],j[2]=1/q[2],j},p.normalize=P,p.dot=F,p.cross=function(j,q,ee){var Q=q[0],ne=q[1];q=q[2];var le=ee[0],Ae=ee[1];return ee=ee[2],j[0]=ne*ee-q*Ae,j[1]=q*le-Q*ee,j[2]=Q*Ae-ne*le,j},p.lerp=function(j,q,ee,Q){var ne=q[0],le=q[1];return q=q[2],j[0]=ne+Q*(ee[0]-ne),j[1]=le+Q*(ee[1]-le),j[2]=q+Q*(ee[2]-q),j},p.hermite=function(j,q,ee,Q,ne,le){var Ae=le*le,Se=Ae*(2*le-3)+1,Ie=Ae*(le-2)+le,Be=Ae*(le-1);return le=Ae*(3-2*le),j[0]=q[0]*Se+ee[0]*Ie+Q[0]*Be+ne[0]*le,j[1]=q[1]*Se+ee[1]*Ie+Q[1]*Be+ne[1]*le,j[2]=q[2]*Se+ee[2]*Ie+Q[2]*Be+ne[2]*le,j},p.bezier=function(j,q,ee,Q,ne,le){var Ae=1-le,Se=Ae*Ae,Ie=le*le,Be=Se*Ae;return Se*=3*le,Ae*=3*Ie,le*=Ie,j[0]=q[0]*Be+ee[0]*Se+Q[0]*Ae+ne[0]*le,j[1]=q[1]*Be+ee[1]*Se+Q[1]*Ae+ne[1]*le,j[2]=q[2]*Be+ee[2]*Se+Q[2]*Ae+ne[2]*le,j},p.random=function(j,q){q=q||1;var ee=2*V.RANDOM()*Math.PI,Q=2*V.RANDOM()-1,ne=Math.sqrt(1-Q*Q)*q;return j[0]=Math.cos(ee)*ne,j[1]=Math.sin(ee)*ne,j[2]=Q*q,j},p.transformMat4=function(j,q,ee){var Q=q[0],ne=q[1];q=q[2];var le=ee[3]*Q+ee[7]*ne+ee[11]*q+ee[15];return le=le||1,j[0]=(ee[0]*Q+ee[4]*ne+ee[8]*q+ee[12])/le,j[1]=(ee[1]*Q+ee[5]*ne+ee[9]*q+ee[13])/le,j[2]=(ee[2]*Q+ee[6]*ne+ee[10]*q+ee[14])/le,j},p.transformMat3=function(j,q,ee){var Q=q[0],ne=q[1];return q=q[2],j[0]=Q*ee[0]+ne*ee[3]+q*ee[6],j[1]=Q*ee[1]+ne*ee[4]+q*ee[7],j[2]=Q*ee[2]+ne*ee[5]+q*ee[8],j},p.transformQuat=function(j,q,ee){var Q=ee[0],ne=ee[1],le=ee[2],Ae=q[0],Se=q[1];q=q[2];var Ie=ne*q-le*Se,Be=le*Ae-Q*q,nt=Q*Se-ne*Ae;return ee=2*ee[3],j[0]=Ae+Ie*ee+2*(ne*nt-le*Be),j[1]=Se+Be*ee+2*(le*Ie-Q*nt),j[2]=q+nt*ee+2*(Q*Be-ne*Ie),j},p.rotateX=function(j,q,ee,Q){var ne=[],le=[];return ne[0]=q[0]-ee[0],ne[1]=q[1]-ee[1],ne[2]=q[2]-ee[2],le[0]=ne[0],le[1]=ne[1]*Math.cos(Q)-ne[2]*Math.sin(Q),le[2]=ne[1]*Math.sin(Q)+ne[2]*Math.cos(Q),j[0]=le[0]+ee[0],j[1]=le[1]+ee[1],j[2]=le[2]+ee[2],j},p.rotateY=function(j,q,ee,Q){var ne=[],le=[];return ne[0]=q[0]-ee[0],ne[1]=q[1]-ee[1],ne[2]=q[2]-ee[2],le[0]=ne[2]*Math.sin(Q)+ne[0]*Math.cos(Q),le[1]=ne[1],le[2]=ne[2]*Math.cos(Q)-ne[0]*Math.sin(Q),j[0]=le[0]+ee[0],j[1]=le[1]+ee[1],j[2]=le[2]+ee[2],j},p.rotateZ=function(j,q,ee,Q){var ne=[],le=[];return ne[0]=q[0]-ee[0],ne[1]=q[1]-ee[1],ne[2]=q[2]-ee[2],le[0]=ne[0]*Math.cos(Q)-ne[1]*Math.sin(Q),le[1]=ne[0]*Math.sin(Q)+ne[1]*Math.cos(Q),le[2]=ne[2],j[0]=le[0]+ee[0],j[1]=le[1]+ee[1],j[2]=le[2]+ee[2],j},p.angle=function(j,q){return j=_(j[0],j[1],j[2]),q=_(q[0],q[1],q[2]),P(j,j),P(q,q),q=F(j,q),1<q?0:-1>q?Math.PI:Math.acos(q)},p.zero=function(j){return j[0]=0,j[1]=0,j[2]=0,j},p.str=function(j){return"vec3("+j[0]+", "+j[1]+", "+j[2]+")"},p.exactEquals=function(j,q){return j[0]===q[0]&&j[1]===q[1]&&j[2]===q[2]},p.equals=function(j,q){var ee=j[0],Q=j[1];j=j[2];var ne=q[0],le=q[1];return q=q[2],Math.abs(ee-ne)<=V.EPSILON*Math.max(1,Math.abs(ee),Math.abs(ne))&&Math.abs(Q-le)<=V.EPSILON*Math.max(1,Math.abs(Q),Math.abs(le))&&Math.abs(j-q)<=V.EPSILON*Math.max(1,Math.abs(j),Math.abs(q))},p.forEach=p.sqrLen=p.len=p.sqrDist=p.dist=p.div=p.mul=p.sub=void 0;var V=function(j){if(j&&j.__esModule)return j;var q={};if(j!=null){for(var ee in j)if(Object.prototype.hasOwnProperty.call(j,ee)){var Q=Jo&&oo?oo(j,ee):{};Q.get||Q.set?Jo(q,ee,Q):q[ee]=j[ee]}}return q.default=j,q}(pu);p.sub=x,p.mul=S,p.div=C,p.dist=R,p.sqrDist=H,p.len=h,p.sqrLen=Z,d=function(){var j=s();return function(q,ee,Q,ne,le,Ae){for(ee||(ee=3),Q||(Q=0),ne=ne?Math.min(ne*ee+Q,q.length):q.length;Q<ne;Q+=ee)j[0]=q[Q],j[1]=q[Q+1],j[2]=q[Q+2],le(j,j,Ae),q[Q]=j[0],q[Q+1]=j[1],q[Q+2]=j[2];return q}}(),p.forEach=d});m(i2);var Xl=M(function(d,p){function s(){var P=new Z.ARRAY_TYPE(4);return Z.ARRAY_TYPE!=Float32Array&&(P[0]=0,P[1]=0,P[2]=0,P[3]=0),P}function h(P,F,V){return P[0]=F[0]-V[0],P[1]=F[1]-V[1],P[2]=F[2]-V[2],P[3]=F[3]-V[3],P}function _(P,F,V){return P[0]=F[0]*V[0],P[1]=F[1]*V[1],P[2]=F[2]*V[2],P[3]=F[3]*V[3],P}function x(P,F,V){return P[0]=F[0]/V[0],P[1]=F[1]/V[1],P[2]=F[2]/V[2],P[3]=F[3]/V[3],P}function S(P,F){var V=F[0]-P[0],j=F[1]-P[1],q=F[2]-P[2];return P=F[3]-P[3],Math.sqrt(V*V+j*j+q*q+P*P)}function C(P,F){var V=F[0]-P[0],j=F[1]-P[1],q=F[2]-P[2];return P=F[3]-P[3],V*V+j*j+q*q+P*P}function R(P){var F=P[0],V=P[1],j=P[2];return P=P[3],Math.sqrt(F*F+V*V+j*j+P*P)}function H(P){var F=P[0],V=P[1],j=P[2];return P=P[3],F*F+V*V+j*j+P*P}Object.defineProperty(p,"__esModule",{value:!0}),p.create=s,p.clone=function(P){var F=new Z.ARRAY_TYPE(4);return F[0]=P[0],F[1]=P[1],F[2]=P[2],F[3]=P[3],F},p.fromValues=function(P,F,V,j){var q=new Z.ARRAY_TYPE(4);return q[0]=P,q[1]=F,q[2]=V,q[3]=j,q},p.copy=function(P,F){return P[0]=F[0],P[1]=F[1],P[2]=F[2],P[3]=F[3],P},p.set=function(P,F,V,j,q){return P[0]=F,P[1]=V,P[2]=j,P[3]=q,P},p.add=function(P,F,V){return P[0]=F[0]+V[0],P[1]=F[1]+V[1],P[2]=F[2]+V[2],P[3]=F[3]+V[3],P},p.subtract=h,p.multiply=_,p.divide=x,p.ceil=function(P,F){return P[0]=Math.ceil(F[0]),P[1]=Math.ceil(F[1]),P[2]=Math.ceil(F[2]),P[3]=Math.ceil(F[3]),P},p.floor=function(P,F){return P[0]=Math.floor(F[0]),P[1]=Math.floor(F[1]),P[2]=Math.floor(F[2]),P[3]=Math.floor(F[3]),P},p.min=function(P,F,V){return P[0]=Math.min(F[0],V[0]),P[1]=Math.min(F[1],V[1]),P[2]=Math.min(F[2],V[2]),P[3]=Math.min(F[3],V[3]),P},p.max=function(P,F,V){return P[0]=Math.max(F[0],V[0]),P[1]=Math.max(F[1],V[1]),P[2]=Math.max(F[2],V[2]),P[3]=Math.max(F[3],V[3]),P},p.round=function(P,F){return P[0]=Math.round(F[0]),P[1]=Math.round(F[1]),P[2]=Math.round(F[2]),P[3]=Math.round(F[3]),P},p.scale=function(P,F,V){return P[0]=F[0]*V,P[1]=F[1]*V,P[2]=F[2]*V,P[3]=F[3]*V,P},p.scaleAndAdd=function(P,F,V,j){return P[0]=F[0]+V[0]*j,P[1]=F[1]+V[1]*j,P[2]=F[2]+V[2]*j,P[3]=F[3]+V[3]*j,P},p.distance=S,p.squaredDistance=C,p.length=R,p.squaredLength=H,p.negate=function(P,F){return P[0]=-F[0],P[1]=-F[1],P[2]=-F[2],P[3]=-F[3],P},p.inverse=function(P,F){return P[0]=1/F[0],P[1]=1/F[1],P[2]=1/F[2],P[3]=1/F[3],P},p.normalize=function(P,F){var V=F[0],j=F[1],q=F[2];F=F[3];var ee=V*V+j*j+q*q+F*F;return 0<ee&&(ee=1/Math.sqrt(ee)),P[0]=V*ee,P[1]=j*ee,P[2]=q*ee,P[3]=F*ee,P},p.dot=function(P,F){return P[0]*F[0]+P[1]*F[1]+P[2]*F[2]+P[3]*F[3]},p.cross=function(P,F,V,j){var q=V[0]*j[1]-V[1]*j[0],ee=V[0]*j[2]-V[2]*j[0],Q=V[0]*j[3]-V[3]*j[0],ne=V[1]*j[2]-V[2]*j[1],le=V[1]*j[3]-V[3]*j[1];V=V[2]*j[3]-V[3]*j[2],j=F[0];var Ae=F[1],Se=F[2];return F=F[3],P[0]=Ae*V-Se*le+F*ne,P[1]=-(j*V)+Se*Q-F*ee,P[2]=j*le-Ae*Q+F*q,P[3]=-(j*ne)+Ae*ee-Se*q,P},p.lerp=function(P,F,V,j){var q=F[0],ee=F[1],Q=F[2];return F=F[3],P[0]=q+j*(V[0]-q),P[1]=ee+j*(V[1]-ee),P[2]=Q+j*(V[2]-Q),P[3]=F+j*(V[3]-F),P},p.random=function(P,F){F=F||1;do var V=2*Z.RANDOM()-1,j=2*Z.RANDOM()-1,q=V*V+j*j;while(1<=q);do var ee=2*Z.RANDOM()-1,Q=2*Z.RANDOM()-1,ne=ee*ee+Q*Q;while(1<=ne);return q=Math.sqrt((1-q)/ne),P[0]=F*V,P[1]=F*j,P[2]=F*ee*q,P[3]=F*Q*q,P},p.transformMat4=function(P,F,V){var j=F[0],q=F[1],ee=F[2];return F=F[3],P[0]=V[0]*j+V[4]*q+V[8]*ee+V[12]*F,P[1]=V[1]*j+V[5]*q+V[9]*ee+V[13]*F,P[2]=V[2]*j+V[6]*q+V[10]*ee+V[14]*F,P[3]=V[3]*j+V[7]*q+V[11]*ee+V[15]*F,P},p.transformQuat=function(P,F,V){var j=F[0],q=F[1],ee=F[2],Q=V[0],ne=V[1],le=V[2];V=V[3];var Ae=V*j+ne*ee-le*q,Se=V*q+le*j-Q*ee,Ie=V*ee+Q*q-ne*j;return j=-Q*j-ne*q-le*ee,P[0]=Ae*V+j*-Q+Se*-le-Ie*-ne,P[1]=Se*V+j*-ne+Ie*-Q-Ae*-le,P[2]=Ie*V+j*-le+Ae*-ne-Se*-Q,P[3]=F[3],P},p.zero=function(P){return P[0]=0,P[1]=0,P[2]=0,P[3]=0,P},p.str=function(P){return"vec4("+P[0]+", "+P[1]+", "+P[2]+", "+P[3]+")"},p.exactEquals=function(P,F){return P[0]===F[0]&&P[1]===F[1]&&P[2]===F[2]&&P[3]===F[3]},p.equals=function(P,F){var V=P[0],j=P[1],q=P[2];P=P[3];var ee=F[0],Q=F[1],ne=F[2];return F=F[3],Math.abs(V-ee)<=Z.EPSILON*Math.max(1,Math.abs(V),Math.abs(ee))&&Math.abs(j-Q)<=Z.EPSILON*Math.max(1,Math.abs(j),Math.abs(Q))&&Math.abs(q-ne)<=Z.EPSILON*Math.max(1,Math.abs(q),Math.abs(ne))&&Math.abs(P-F)<=Z.EPSILON*Math.max(1,Math.abs(P),Math.abs(F))},p.forEach=p.sqrLen=p.len=p.sqrDist=p.dist=p.div=p.mul=p.sub=void 0;var Z=function(P){if(P&&P.__esModule)return P;var F={};if(P!=null){for(var V in P)if(Object.prototype.hasOwnProperty.call(P,V)){var j=Jo&&oo?oo(P,V):{};j.get||j.set?Jo(F,V,j):F[V]=P[V]}}return F.default=P,F}(pu);p.sub=h,p.mul=_,p.div=x,p.dist=S,p.sqrDist=C,p.len=R,p.sqrLen=H,d=function(){var P=s();return function(F,V,j,q,ee,Q){for(V||(V=4),j||(j=0),q=q?Math.min(q*V+j,F.length):F.length;j<q;j+=V)P[0]=F[j],P[1]=F[j+1],P[2]=F[j+2],P[3]=F[j+3],ee(P,P,Q),F[j]=P[0],F[j+1]=P[1],F[j+2]=P[2],F[j+3]=P[3];return F}}(),p.forEach=d});m(Xl);var aa=M(function(d,p){function s(V){if(V&&V.__esModule)return V;var j={};if(V!=null){for(var q in V)if(Object.prototype.hasOwnProperty.call(V,q)){var ee=Jo&&oo?oo(V,q):{};ee.get||ee.set?Jo(j,q,ee):j[q]=V[q]}}return j.default=V,j}function h(){var V=new R.ARRAY_TYPE(4);return R.ARRAY_TYPE!=Float32Array&&(V[0]=0,V[1]=0,V[2]=0),V[3]=1,V}function _(V,j,q){q*=.5;var ee=Math.sin(q);return V[0]=ee*j[0],V[1]=ee*j[1],V[2]=ee*j[2],V[3]=Math.cos(q),V}function x(V,j,q){var ee=j[0],Q=j[1],ne=j[2];j=j[3];var le=q[0],Ae=q[1],Se=q[2];return q=q[3],V[0]=ee*q+j*le+Q*Se-ne*Ae,V[1]=Q*q+j*Ae+ne*le-ee*Se,V[2]=ne*q+j*Se+ee*Ae-Q*le,V[3]=j*q-ee*le-Q*Ae-ne*Se,V}function S(V,j,q,ee){var Q=j[0],ne=j[1],le=j[2];j=j[3];var Ae=q[0],Se=q[1],Ie=q[2];q=q[3];var Be=Q*Ae+ne*Se+le*Ie+j*q;if(0>Be&&(Be=-Be,Ae=-Ae,Se=-Se,Ie=-Ie,q=-q),1-Be>R.EPSILON){var nt=Math.acos(Be),rt=Math.sin(nt);Be=Math.sin((1-ee)*nt)/rt,ee=Math.sin(ee*nt)/rt}else Be=1-ee;return V[0]=Be*Q+ee*Ae,V[1]=Be*ne+ee*Se,V[2]=Be*le+ee*Ie,V[3]=Be*j+ee*q,V}function C(V,j){var q=j[0]+j[4]+j[8];if(0<q)q=Math.sqrt(q+1),V[3]=.5*q,q=.5/q,V[0]=(j[5]-j[7])*q,V[1]=(j[6]-j[2])*q,V[2]=(j[1]-j[3])*q;else{var ee=0;j[4]>j[0]&&(ee=1),j[8]>j[3*ee+ee]&&(ee=2);var Q=(ee+1)%3,ne=(ee+2)%3;q=Math.sqrt(j[3*ee+ee]-j[3*Q+Q]-j[3*ne+ne]+1),V[ee]=.5*q,q=.5/q,V[3]=(j[3*Q+ne]-j[3*ne+Q])*q,V[Q]=(j[3*Q+ee]+j[3*ee+Q])*q,V[ne]=(j[3*ne+ee]+j[3*ee+ne])*q}return V}Object.defineProperty(p,"__esModule",{value:!0}),p.create=h,p.identity=function(V){return V[0]=0,V[1]=0,V[2]=0,V[3]=1,V},p.setAxisAngle=_,p.getAxisAngle=function(V,j){var q=2*Math.acos(j[3]),ee=Math.sin(q/2);return ee>R.EPSILON?(V[0]=j[0]/ee,V[1]=j[1]/ee,V[2]=j[2]/ee):(V[0]=1,V[1]=0,V[2]=0),q},p.multiply=x,p.rotateX=function(V,j,q){q*=.5;var ee=j[0],Q=j[1],ne=j[2];j=j[3];var le=Math.sin(q);return q=Math.cos(q),V[0]=ee*q+j*le,V[1]=Q*q+ne*le,V[2]=ne*q-Q*le,V[3]=j*q-ee*le,V},p.rotateY=function(V,j,q){q*=.5;var ee=j[0],Q=j[1],ne=j[2];j=j[3];var le=Math.sin(q);return q=Math.cos(q),V[0]=ee*q-ne*le,V[1]=Q*q+j*le,V[2]=ne*q+ee*le,V[3]=j*q-Q*le,V},p.rotateZ=function(V,j,q){q*=.5;var ee=j[0],Q=j[1],ne=j[2];j=j[3];var le=Math.sin(q);return q=Math.cos(q),V[0]=ee*q+Q*le,V[1]=Q*q-ee*le,V[2]=ne*q+j*le,V[3]=j*q-ne*le,V},p.calculateW=function(V,j){var q=j[0],ee=j[1];return j=j[2],V[0]=q,V[1]=ee,V[2]=j,V[3]=Math.sqrt(Math.abs(1-q*q-ee*ee-j*j)),V},p.slerp=S,p.random=function(V){var j=R.RANDOM(),q=R.RANDOM(),ee=R.RANDOM(),Q=Math.sqrt(1-j);return j=Math.sqrt(j),V[0]=Q*Math.sin(2*Math.PI*q),V[1]=Q*Math.cos(2*Math.PI*q),V[2]=j*Math.sin(2*Math.PI*ee),V[3]=j*Math.cos(2*Math.PI*ee),V},p.invert=function(V,j){var q=j[0],ee=j[1],Q=j[2];j=j[3];var ne=q*q+ee*ee+Q*Q+j*j;return ne=ne?1/ne:0,V[0]=-q*ne,V[1]=-ee*ne,V[2]=-Q*ne,V[3]=j*ne,V},p.conjugate=function(V,j){return V[0]=-j[0],V[1]=-j[1],V[2]=-j[2],V[3]=j[3],V},p.fromMat3=C,p.fromEuler=function(V,j,q,ee){var Q=.5*Math.PI/180;j*=Q,q*=Q,ee*=Q,Q=Math.sin(j),j=Math.cos(j);var ne=Math.sin(q);q=Math.cos(q);var le=Math.sin(ee);return ee=Math.cos(ee),V[0]=Q*q*ee-j*ne*le,V[1]=j*ne*ee+Q*q*le,V[2]=j*q*le-Q*ne*ee,V[3]=j*q*ee+Q*ne*le,V},p.str=function(V){return"quat("+V[0]+", "+V[1]+", "+V[2]+", "+V[3]+")"},p.setAxes=p.sqlerp=p.rotationTo=p.equals=p.exactEquals=p.normalize=p.sqrLen=p.squaredLength=p.len=p.length=p.lerp=p.dot=p.scale=p.mul=p.add=p.set=p.copy=p.fromValues=p.clone=void 0;var R=s(pu),H=s(r2),Z=s(i2);d=s(Xl),p.clone=d.clone,p.fromValues=d.fromValues,p.copy=d.copy,p.set=d.set,p.add=d.add,p.mul=x,p.scale=d.scale,p.dot=d.dot,p.lerp=d.lerp;var P=d.length;p.length=P,p.len=P,P=d.squaredLength,p.squaredLength=P,p.sqrLen=P;var F=d.normalize;p.normalize=F,p.exactEquals=d.exactEquals,p.equals=d.equals,d=function(){var V=Z.create(),j=Z.fromValues(1,0,0),q=Z.fromValues(0,1,0);return function(ee,Q,ne){var le=Z.dot(Q,ne);return-.999999>le?(Z.cross(V,j,Q),1e-6>Z.len(V)&&Z.cross(V,q,Q),Z.normalize(V,V),_(ee,V,Math.PI),ee):.999999<le?(ee[0]=0,ee[1]=0,ee[2]=0,ee[3]=1,ee):(Z.cross(V,Q,ne),ee[0]=V[0],ee[1]=V[1],ee[2]=V[2],ee[3]=1+le,F(ee,ee))}}(),p.rotationTo=d,d=function(){var V=h(),j=h();return function(q,ee,Q,ne,le,Ae){return S(V,ee,le,Ae),S(j,Q,ne,Ae),S(q,V,j,2*Ae*(1-Ae)),q}}(),p.sqlerp=d,d=function(){var V=H.create();return function(j,q,ee,Q){return V[0]=ee[0],V[3]=ee[1],V[6]=ee[2],V[1]=Q[0],V[4]=Q[1],V[7]=Q[2],V[2]=-q[0],V[5]=-q[1],V[8]=-q[2],F(j,C(j,V))}}(),p.setAxes=d});m(aa);var $C=M(function(d,p){function s(P){if(P&&P.__esModule)return P;var F={};if(P!=null){for(var V in P)if(Object.prototype.hasOwnProperty.call(P,V)){var j=Jo&&oo?oo(P,V):{};j.get||j.set?Jo(F,V,j):F[V]=P[V]}}return F.default=P,F}function h(P,F,V){var j=.5*V[0],q=.5*V[1];V=.5*V[2];var ee=F[0],Q=F[1],ne=F[2];return F=F[3],P[0]=ee,P[1]=Q,P[2]=ne,P[3]=F,P[4]=j*F+q*ne-V*Q,P[5]=q*F+V*ee-j*ne,P[6]=V*F+j*Q-q*ee,P[7]=-j*ee-q*Q-V*ne,P}function _(P,F){return P[0]=F[0],P[1]=F[1],P[2]=F[2],P[3]=F[3],P[4]=F[4],P[5]=F[5],P[6]=F[6],P[7]=F[7],P}function x(P,F,V){var j=F[0],q=F[1],ee=F[2],Q=F[3],ne=V[4],le=V[5],Ae=V[6],Se=V[7],Ie=F[4],Be=F[5],nt=F[6];F=F[7];var rt=V[0],St=V[1],Pt=V[2];return V=V[3],P[0]=j*V+Q*rt+q*Pt-ee*St,P[1]=q*V+Q*St+ee*rt-j*Pt,P[2]=ee*V+Q*Pt+j*St-q*rt,P[3]=Q*V-j*rt-q*St-ee*Pt,P[4]=j*Se+Q*ne+q*Ae-ee*le+Ie*V+F*rt+Be*Pt-nt*St,P[5]=q*Se+Q*le+ee*ne-j*Ae+Be*V+F*St+nt*rt-Ie*Pt,P[6]=ee*Se+Q*Ae+j*le-q*ne+nt*V+F*Pt+Ie*St-Be*rt,P[7]=Q*Se-j*ne-q*le-ee*Ae+F*V-Ie*rt-Be*St-nt*Pt,P}Object.defineProperty(p,"__esModule",{value:!0}),p.create=function(){var P=new S.ARRAY_TYPE(8);return S.ARRAY_TYPE!=Float32Array&&(P[0]=0,P[1]=0,P[2]=0,P[4]=0,P[5]=0,P[6]=0,P[7]=0),P[3]=1,P},p.clone=function(P){var F=new S.ARRAY_TYPE(8);return F[0]=P[0],F[1]=P[1],F[2]=P[2],F[3]=P[3],F[4]=P[4],F[5]=P[5],F[6]=P[6],F[7]=P[7],F},p.fromValues=function(P,F,V,j,q,ee,Q,ne){var le=new S.ARRAY_TYPE(8);return le[0]=P,le[1]=F,le[2]=V,le[3]=j,le[4]=q,le[5]=ee,le[6]=Q,le[7]=ne,le},p.fromRotationTranslationValues=function(P,F,V,j,q,ee,Q){var ne=new S.ARRAY_TYPE(8);return ne[0]=P,ne[1]=F,ne[2]=V,ne[3]=j,q*=.5,ee*=.5,Q*=.5,ne[4]=q*j+ee*V-Q*F,ne[5]=ee*j+Q*P-q*V,ne[6]=Q*j+q*F-ee*P,ne[7]=-q*P-ee*F-Q*V,ne},p.fromRotationTranslation=h,p.fromTranslation=function(P,F){return P[0]=0,P[1]=0,P[2]=0,P[3]=1,P[4]=.5*F[0],P[5]=.5*F[1],P[6]=.5*F[2],P[7]=0,P},p.fromRotation=function(P,F){return P[0]=F[0],P[1]=F[1],P[2]=F[2],P[3]=F[3],P[4]=0,P[5]=0,P[6]=0,P[7]=0,P},p.fromMat4=function(P,F){var V=C.create();R.getRotation(V,F);var j=new S.ARRAY_TYPE(3);return R.getTranslation(j,F),h(P,V,j),P},p.copy=_,p.identity=function(P){return P[0]=0,P[1]=0,P[2]=0,P[3]=1,P[4]=0,P[5]=0,P[6]=0,P[7]=0,P},p.set=function(P,F,V,j,q,ee,Q,ne,le){return P[0]=F,P[1]=V,P[2]=j,P[3]=q,P[4]=ee,P[5]=Q,P[6]=ne,P[7]=le,P},p.getDual=function(P,F){return P[0]=F[4],P[1]=F[5],P[2]=F[6],P[3]=F[7],P},p.setDual=function(P,F){return P[4]=F[0],P[5]=F[1],P[6]=F[2],P[7]=F[3],P},p.getTranslation=function(P,F){var V=F[4],j=F[5],q=F[6],ee=F[7],Q=-F[0],ne=-F[1],le=-F[2];return F=F[3],P[0]=2*(V*F+ee*Q+j*le-q*ne),P[1]=2*(j*F+ee*ne+q*Q-V*le),P[2]=2*(q*F+ee*le+V*ne-j*Q),P},p.translate=function(P,F,V){var j=F[0],q=F[1],ee=F[2],Q=F[3],ne=.5*V[0],le=.5*V[1];V=.5*V[2];var Ae=F[4],Se=F[5],Ie=F[6];return F=F[7],P[0]=j,P[1]=q,P[2]=ee,P[3]=Q,P[4]=Q*ne+q*V-ee*le+Ae,P[5]=Q*le+ee*ne-j*V+Se,P[6]=Q*V+j*le-q*ne+Ie,P[7]=-j*ne-q*le-ee*V+F,P},p.rotateX=function(P,F,V){var j=-F[0],q=-F[1],ee=-F[2],Q=F[3],ne=F[4],le=F[5],Ae=F[6],Se=F[7],Ie=ne*Q+Se*j+le*ee-Ae*q,Be=le*Q+Se*q+Ae*j-ne*ee,nt=Ae*Q+Se*ee+ne*q-le*j;return ne=Se*Q-ne*j-le*q-Ae*ee,C.rotateX(P,F,V),j=P[0],q=P[1],ee=P[2],Q=P[3],P[4]=Ie*Q+ne*j+Be*ee-nt*q,P[5]=Be*Q+ne*q+nt*j-Ie*ee,P[6]=nt*Q+ne*ee+Ie*q-Be*j,P[7]=ne*Q-Ie*j-Be*q-nt*ee,P},p.rotateY=function(P,F,V){var j=-F[0],q=-F[1],ee=-F[2],Q=F[3],ne=F[4],le=F[5],Ae=F[6],Se=F[7],Ie=ne*Q+Se*j+le*ee-Ae*q,Be=le*Q+Se*q+Ae*j-ne*ee,nt=Ae*Q+Se*ee+ne*q-le*j;return ne=Se*Q-ne*j-le*q-Ae*ee,C.rotateY(P,F,V),j=P[0],q=P[1],ee=P[2],Q=P[3],P[4]=Ie*Q+ne*j+Be*ee-nt*q,P[5]=Be*Q+ne*q+nt*j-Ie*ee,P[6]=nt*Q+ne*ee+Ie*q-Be*j,P[7]=ne*Q-Ie*j-Be*q-nt*ee,P},p.rotateZ=function(P,F,V){var j=-F[0],q=-F[1],ee=-F[2],Q=F[3],ne=F[4],le=F[5],Ae=F[6],Se=F[7],Ie=ne*Q+Se*j+le*ee-Ae*q,Be=le*Q+Se*q+Ae*j-ne*ee,nt=Ae*Q+Se*ee+ne*q-le*j;return ne=Se*Q-ne*j-le*q-Ae*ee,C.rotateZ(P,F,V),j=P[0],q=P[1],ee=P[2],Q=P[3],P[4]=Ie*Q+ne*j+Be*ee-nt*q,P[5]=Be*Q+ne*q+nt*j-Ie*ee,P[6]=nt*Q+ne*ee+Ie*q-Be*j,P[7]=ne*Q-Ie*j-Be*q-nt*ee,P},p.rotateByQuatAppend=function(P,F,V){var j=V[0],q=V[1],ee=V[2];V=V[3];var Q=F[0],ne=F[1],le=F[2],Ae=F[3];return P[0]=Q*V+Ae*j+ne*ee-le*q,P[1]=ne*V+Ae*q+le*j-Q*ee,P[2]=le*V+Ae*ee+Q*q-ne*j,P[3]=Ae*V-Q*j-ne*q-le*ee,Q=F[4],ne=F[5],le=F[6],Ae=F[7],P[4]=Q*V+Ae*j+ne*ee-le*q,P[5]=ne*V+Ae*q+le*j-Q*ee,P[6]=le*V+Ae*ee+Q*q-ne*j,P[7]=Ae*V-Q*j-ne*q-le*ee,P},p.rotateByQuatPrepend=function(P,F,V){var j=F[0],q=F[1],ee=F[2];F=F[3];var Q=V[0],ne=V[1],le=V[2],Ae=V[3];return P[0]=j*Ae+F*Q+q*le-ee*ne,P[1]=q*Ae+F*ne+ee*Q-j*le,P[2]=ee*Ae+F*le+j*ne-q*Q,P[3]=F*Ae-j*Q-q*ne-ee*le,Q=V[4],ne=V[5],le=V[6],Ae=V[7],P[4]=j*Ae+F*Q+q*le-ee*ne,P[5]=q*Ae+F*ne+ee*Q-j*le,P[6]=ee*Ae+F*le+j*ne-q*Q,P[7]=F*Ae-j*Q-q*ne-ee*le,P},p.rotateAroundAxis=function(P,F,V,j){if(Math.abs(j)<S.EPSILON)return _(P,F);var q=Math.sqrt(V[0]*V[0]+V[1]*V[1]+V[2]*V[2]);j*=.5;var ee=Math.sin(j),Q=ee*V[0]/q,ne=ee*V[1]/q;V=ee*V[2]/q,j=Math.cos(j),q=F[0],ee=F[1];var le=F[2],Ae=F[3];return P[0]=q*j+Ae*Q+ee*V-le*ne,P[1]=ee*j+Ae*ne+le*Q-q*V,P[2]=le*j+Ae*V+q*ne-ee*Q,P[3]=Ae*j-q*Q-ee*ne-le*V,q=F[4],ee=F[5],le=F[6],F=F[7],P[4]=q*j+F*Q+ee*V-le*ne,P[5]=ee*j+F*ne+le*Q-q*V,P[6]=le*j+F*V+q*ne-ee*Q,P[7]=F*j-q*Q-ee*ne-le*V,P},p.add=function(P,F,V){return P[0]=F[0]+V[0],P[1]=F[1]+V[1],P[2]=F[2]+V[2],P[3]=F[3]+V[3],P[4]=F[4]+V[4],P[5]=F[5]+V[5],P[6]=F[6]+V[6],P[7]=F[7]+V[7],P},p.multiply=x,p.scale=function(P,F,V){return P[0]=F[0]*V,P[1]=F[1]*V,P[2]=F[2]*V,P[3]=F[3]*V,P[4]=F[4]*V,P[5]=F[5]*V,P[6]=F[6]*V,P[7]=F[7]*V,P},p.lerp=function(P,F,V,j){var q=1-j;return 0>H(F,V)&&(j=-j),P[0]=F[0]*q+V[0]*j,P[1]=F[1]*q+V[1]*j,P[2]=F[2]*q+V[2]*j,P[3]=F[3]*q+V[3]*j,P[4]=F[4]*q+V[4]*j,P[5]=F[5]*q+V[5]*j,P[6]=F[6]*q+V[6]*j,P[7]=F[7]*q+V[7]*j,P},p.invert=function(P,F){var V=Z(F);return P[0]=-F[0]/V,P[1]=-F[1]/V,P[2]=-F[2]/V,P[3]=F[3]/V,P[4]=-F[4]/V,P[5]=-F[5]/V,P[6]=-F[6]/V,P[7]=F[7]/V,P},p.conjugate=function(P,F){return P[0]=-F[0],P[1]=-F[1],P[2]=-F[2],P[3]=F[3],P[4]=-F[4],P[5]=-F[5],P[6]=-F[6],P[7]=F[7],P},p.normalize=function(P,F){var V=Z(F);if(0<V){V=Math.sqrt(V);var j=F[0]/V,q=F[1]/V,ee=F[2]/V,Q=F[3]/V,ne=F[4],le=F[5],Ae=F[6];F=F[7];var Se=j*ne+q*le+ee*Ae+Q*F;P[0]=j,P[1]=q,P[2]=ee,P[3]=Q,P[4]=(ne-j*Se)/V,P[5]=(le-q*Se)/V,P[6]=(Ae-ee*Se)/V,P[7]=(F-Q*Se)/V}return P},p.str=function(P){return"quat2("+P[0]+", "+P[1]+", "+P[2]+", "+P[3]+", "+P[4]+", "+P[5]+", "+P[6]+", "+P[7]+")"},p.exactEquals=function(P,F){return P[0]===F[0]&&P[1]===F[1]&&P[2]===F[2]&&P[3]===F[3]&&P[4]===F[4]&&P[5]===F[5]&&P[6]===F[6]&&P[7]===F[7]},p.equals=function(P,F){var V=P[0],j=P[1],q=P[2],ee=P[3],Q=P[4],ne=P[5],le=P[6];P=P[7];var Ae=F[0],Se=F[1],Ie=F[2],Be=F[3],nt=F[4],rt=F[5],St=F[6];return F=F[7],Math.abs(V-Ae)<=S.EPSILON*Math.max(1,Math.abs(V),Math.abs(Ae))&&Math.abs(j-Se)<=S.EPSILON*Math.max(1,Math.abs(j),Math.abs(Se))&&Math.abs(q-Ie)<=S.EPSILON*Math.max(1,Math.abs(q),Math.abs(Ie))&&Math.abs(ee-Be)<=S.EPSILON*Math.max(1,Math.abs(ee),Math.abs(Be))&&Math.abs(Q-nt)<=S.EPSILON*Math.max(1,Math.abs(Q),Math.abs(nt))&&Math.abs(ne-rt)<=S.EPSILON*Math.max(1,Math.abs(ne),Math.abs(rt))&&Math.abs(le-St)<=S.EPSILON*Math.max(1,Math.abs(le),Math.abs(St))&&Math.abs(P-F)<=S.EPSILON*Math.max(1,Math.abs(P),Math.abs(F))},p.sqrLen=p.squaredLength=p.len=p.length=p.dot=p.mul=p.setReal=p.getReal=void 0;var S=s(pu),C=s(aa),R=s(n2);p.getReal=C.copy,p.setReal=C.copy,p.mul=x;var H=C.dot;p.dot=H,d=C.length,p.length=d,p.len=d;var Z=C.squaredLength;p.squaredLength=Z,p.sqrLen=Z});m($C);var o2=M(function(d,p){function s(){var P=new Z.ARRAY_TYPE(2);return Z.ARRAY_TYPE!=Float32Array&&(P[0]=0,P[1]=0),P}function h(P,F,V){return P[0]=F[0]-V[0],P[1]=F[1]-V[1],P}function _(P,F,V){return P[0]=F[0]*V[0],P[1]=F[1]*V[1],P}function x(P,F,V){return P[0]=F[0]/V[0],P[1]=F[1]/V[1],P}function S(P,F){var V=F[0]-P[0];return P=F[1]-P[1],Math.sqrt(V*V+P*P)}function C(P,F){var V=F[0]-P[0];return P=F[1]-P[1],V*V+P*P}function R(P){var F=P[0];return P=P[1],Math.sqrt(F*F+P*P)}function H(P){var F=P[0];return P=P[1],F*F+P*P}Object.defineProperty(p,"__esModule",{value:!0}),p.create=s,p.clone=function(P){var F=new Z.ARRAY_TYPE(2);return F[0]=P[0],F[1]=P[1],F},p.fromValues=function(P,F){var V=new Z.ARRAY_TYPE(2);return V[0]=P,V[1]=F,V},p.copy=function(P,F){return P[0]=F[0],P[1]=F[1],P},p.set=function(P,F,V){return P[0]=F,P[1]=V,P},p.add=function(P,F,V){return P[0]=F[0]+V[0],P[1]=F[1]+V[1],P},p.subtract=h,p.multiply=_,p.divide=x,p.ceil=function(P,F){return P[0]=Math.ceil(F[0]),P[1]=Math.ceil(F[1]),P},p.floor=function(P,F){return P[0]=Math.floor(F[0]),P[1]=Math.floor(F[1]),P},p.min=function(P,F,V){return P[0]=Math.min(F[0],V[0]),P[1]=Math.min(F[1],V[1]),P},p.max=function(P,F,V){return P[0]=Math.max(F[0],V[0]),P[1]=Math.max(F[1],V[1]),P},p.round=function(P,F){return P[0]=Math.round(F[0]),P[1]=Math.round(F[1]),P},p.scale=function(P,F,V){return P[0]=F[0]*V,P[1]=F[1]*V,P},p.scaleAndAdd=function(P,F,V,j){return P[0]=F[0]+V[0]*j,P[1]=F[1]+V[1]*j,P},p.distance=S,p.squaredDistance=C,p.length=R,p.squaredLength=H,p.negate=function(P,F){return P[0]=-F[0],P[1]=-F[1],P},p.inverse=function(P,F){return P[0]=1/F[0],P[1]=1/F[1],P},p.normalize=function(P,F){var V=F[0],j=F[1];return V=V*V+j*j,0<V&&(V=1/Math.sqrt(V)),P[0]=F[0]*V,P[1]=F[1]*V,P},p.dot=function(P,F){return P[0]*F[0]+P[1]*F[1]},p.cross=function(P,F,V){return F=F[0]*V[1]-F[1]*V[0],P[0]=P[1]=0,P[2]=F,P},p.lerp=function(P,F,V,j){var q=F[0];return F=F[1],P[0]=q+j*(V[0]-q),P[1]=F+j*(V[1]-F),P},p.random=function(P,F){F=F||1;var V=2*Z.RANDOM()*Math.PI;return P[0]=Math.cos(V)*F,P[1]=Math.sin(V)*F,P},p.transformMat2=function(P,F,V){var j=F[0];return F=F[1],P[0]=V[0]*j+V[2]*F,P[1]=V[1]*j+V[3]*F,P},p.transformMat2d=function(P,F,V){var j=F[0];return F=F[1],P[0]=V[0]*j+V[2]*F+V[4],P[1]=V[1]*j+V[3]*F+V[5],P},p.transformMat3=function(P,F,V){var j=F[0];return F=F[1],P[0]=V[0]*j+V[3]*F+V[6],P[1]=V[1]*j+V[4]*F+V[7],P},p.transformMat4=function(P,F,V){var j=F[0];return F=F[1],P[0]=V[0]*j+V[4]*F+V[12],P[1]=V[1]*j+V[5]*F+V[13],P},p.rotate=function(P,F,V,j){var q=F[0]-V[0];F=F[1]-V[1];var ee=Math.sin(j);return j=Math.cos(j),P[0]=q*j-F*ee+V[0],P[1]=q*ee+F*j+V[1],P},p.angle=function(P,F){var V=P[0];P=P[1];var j=F[0];F=F[1];var q=V*V+P*P;0<q&&(q=1/Math.sqrt(q));var ee=j*j+F*F;return 0<ee&&(ee=1/Math.sqrt(ee)),V=(V*j+P*F)*q*ee,1<V?0:-1>V?Math.PI:Math.acos(V)},p.zero=function(P){return P[0]=0,P[1]=0,P},p.str=function(P){return"vec2("+P[0]+", "+P[1]+")"},p.exactEquals=function(P,F){return P[0]===F[0]&&P[1]===F[1]},p.equals=function(P,F){var V=P[0];P=P[1];var j=F[0];return F=F[1],Math.abs(V-j)<=Z.EPSILON*Math.max(1,Math.abs(V),Math.abs(j))&&Math.abs(P-F)<=Z.EPSILON*Math.max(1,Math.abs(P),Math.abs(F))},p.forEach=p.sqrLen=p.sqrDist=p.dist=p.div=p.mul=p.sub=p.len=void 0;var Z=function(P){if(P&&P.__esModule)return P;var F={};if(P!=null){for(var V in P)if(Object.prototype.hasOwnProperty.call(P,V)){var j=Jo&&oo?oo(P,V):{};j.get||j.set?Jo(F,V,j):F[V]=P[V]}}return F.default=P,F}(pu);p.len=R,p.sub=h,p.mul=_,p.div=x,p.dist=S,p.sqrDist=C,p.sqrLen=H,d=function(){var P=s();return function(F,V,j,q,ee,Q){for(V||(V=2),j||(j=0),q=q?Math.min(q*V+j,F.length):F.length;j<q;j+=V)P[0]=F[j],P[1]=F[j+1],ee(P,P,Q),F[j]=P[0],F[j+1]=P[1];return F}}(),p.forEach=d});m(o2);var Ha=M(function(d,p){function s(h){if(h&&h.__esModule)return h;var _={};if(h!=null){for(var x in h)if(Object.prototype.hasOwnProperty.call(h,x)){var S=Jo&&oo?oo(h,x):{};S.get||S.set?Jo(_,x,S):_[x]=h[x]}}return _.default=h,_}Object.defineProperty(p,"__esModule",{value:!0}),p.vec4=p.vec3=p.vec2=p.quat2=p.quat=p.mat4=p.mat3=p.mat2d=p.mat2=p.glMatrix=void 0,d=s(pu),p.glMatrix=d,d=s(QC),p.mat2=d,d=s(Pe),p.mat2d=d,d=s(r2),p.mat3=d,d=s(n2),p.mat4=d,d=s(aa),p.quat=d,d=s($C),p.quat2=d,d=s(o2),p.vec2=d,d=s(i2),p.vec3=d,d=s(Xl),p.vec4=d});m(Ha);var Fo=Ha.vec4,dn=Ha.vec3,Qn=Ha.vec2,K3=Ha.quat2,Lg=Ha.quat,Er=Ha.mat4,a2=Ha.mat3,J3=Ha.mat2d,s2=Ha.mat2,Q3=Ha.glMatrix,Jn=function(){function d(p,s,h){hr(this,d),this.options=s,this.gl=p,h&&(this.map=h.map),h=this.getVertexShader(s.vertexShader);var _=this.getFragmentShader(s.fragmentShader);s=p.createShader(p.VERTEX_SHADER),p.shaderSource(s,h),p.compileShader(s),p.getShaderParameter(s,p.COMPILE_STATUS)?(h=p.createShader(p.FRAGMENT_SHADER),p.shaderSource(h,_),p.compileShader(h),p.getShaderParameter(h,p.COMPILE_STATUS)?(_=p.createProgram(),p.attachShader(_,s),p.attachShader(_,h),p.deleteShader(s),p.deleteShader(h),p.linkProgram(_),p.getProgramParameter(_,p.LINK_STATUS)?s=_:(s="Shader program failed to link.  The error log is:"+p.getProgramInfoLog(_),console.error(s),s=-1)):(s="Fragment shader failed to compile.  The error log is:"+p.getShaderInfoLog(h),console.error(s),s=-1)):(s="Vertex shader failed to compile.  The error log is:"+p.getShaderInfoLog(s),console.error(s),s=-1),s=this.program=s,h={},_=p.getProgramParameter(s,p.ACTIVE_ATTRIBUTES);for(var x=0;x<_;x++){var S=p.getActiveAttrib(s,x);h[S.name]=p.getAttribLocation(s,S.name)}x={},S={};for(var C=p.getProgramParameter(s,p.ACTIVE_UNIFORMS),R=0;R<C;R++){var H=p.getActiveUniform(s,R);x[H.name]=p.getUniformLocation(s,H.name),S[H.name]=H.type}this.parameter=p={attributes:h,numAttributes:_,uniformsType:S,uniforms:x},this.attributes=p.attributes,this.uniforms=p.uniforms,this.parameter=p}return Mr(d,[{key:"getVertexShader",value:function(p){var s="";return this.map&&this.map.type==="cesium"&&(s=`#define LOG_DEPTH
`),s+=`#ifdef LOG_DEPTH
uniform float currentFrustumX;varying float v_depthFromNearPlusOne;
#endif
uniform vec2 MAPV_resolution;
#if defined(PICK)
uniform bool uIsPickRender;attribute vec3 aPickColor;uniform vec3 uPickedColor;varying vec4 vPickColor;uniform bool uEnablePicked;bool mapvIsPicked(){return uEnablePicked&&aPickColor==uPickedColor;}
#endif
void afterMain(){
#if defined(LOG_DEPTH)
v_depthFromNearPlusOne=(gl_Position.w-currentFrustumX)+1.0;gl_Position.z=clamp(gl_Position.z/gl_Position.w,-1.0,1.0)*gl_Position.w;
#endif
#if defined(PICK)
vPickColor=vec4(aPickColor,0.0);if(mapvIsPicked()){vPickColor.a=1.0;}
#endif
}`,p=this.getDefines()+s+p,p=p.replace("void main","void originMain"),p+"void main() {originMain(); afterMain();}"}},{key:"getFragmentShader",value:function(p){var s="";return this.map&&this.map.type==="cesium"&&(s=`#define LOG_DEPTH
`),s+=`#if defined(LOG_DEPTH)
#extension GL_EXT_frag_depth : enable
#endif
precision highp float;uniform vec2 MAPV_resolution;uniform bool uIsPickRender;
#if defined(PICK)
varying vec4 vPickColor;bool mapvIsPicked(){return vPickColor.a==1.0;}
#endif
#if defined(LOG_DEPTH)
uniform float oneOverLog2FarDepthFromNearPlusOne;uniform float farDepthFromNearPlusOne;varying float v_depthFromNearPlusOne;void writeLogDepth(float depth){if(depth<=0.9999999||depth>farDepthFromNearPlusOne){discard;}gl_FragDepthEXT=log2(depth)*oneOverLog2FarDepthFromNearPlusOne;}
#endif
void afterMain(){
#if defined(PICK)
if(uIsPickRender){gl_FragColor=vec4(vPickColor.rgb,1.0);return;}
#endif
#if defined(LOG_DEPTH)
writeLogDepth(v_depthFromNearPlusOne);
#endif
}`,p=this.getDefines()+s+p,p=p.replace("void main","void originMain"),p+"void main() {originMain(); afterMain();}"}},{key:"getDefines",value:function(){var p="",s=this.options.defines;if(s)for(var h=0;h<s.length;h++)p+="#define "+s[h]+`
`;return p}},{key:"use",value:function(p,s){this.gl=p,p.useProgram(this.program),this.map&&this.map.type==="cesium"&&this.setUniforms({currentFrustumX:this.map.map.scene.camera.frustum.near,oneOverLog2FarDepthFromNearPlusOne:this.map.map.scene.context.uniformState.oneOverLog2FarDepthFromNearPlusOne,farDepthFromNearPlusOne:this.map.map.scene.context.uniformState.farDepthFromNearPlusOne}),this.uniforms.MAPV_resolution&&this.setUniforms({MAPV_resolution:[p.canvas.width,p.canvas.height]})}},{key:"setUniform",value:function(p,s){var h=this.gl,_=this.uniforms[p];if(_)switch(this.parameter.uniformsType[p]){case h.FLOAT:h.uniform1f(_,s);break;case h.FLOAT_VEC2:h.uniform2f(_,s[0],s[1]);break;case h.FLOAT_VEC3:h.uniform3f(_,s[0],s[1],s[2]);break;case h.FLOAT_VEC4:h.uniform4f(_,s[0],s[1],s[2],s[3]);break;case h.SAMPLER_2D:case h.SAMPLER_CUBE:h.activeTexture(h["TEXTURE"+this.textureIndex]),h.uniform1i(_,this.textureIndex),h.bindTexture(h.TEXTURE_2D,s),this.textureIndex++;break;case h.INT:case h.BOOL:h.uniform1i(_,s);break;case h.INT_VEC2:case h.BOOL_VEC2:h.uniform2i(_,s[0],s[1]);break;case h.INT_VEC3:case h.BOOL_VEC3:h.uniform3i(_,s[0],s[1],s[2]);break;case h.INT_VEC4:case h.BOOL_VEC4:h.uniform4i(_,s[0],s[1],s[2],s[3]);break;case h.FLOAT_MAT2:h.uniformMatrix2fv(_,!1,s);break;case h.FLOAT_MAT3:h.uniformMatrix3fv(_,!1,s);break;case h.FLOAT_MAT4:h.uniformMatrix4fv(_,!1,s);break;default:console.error("Unrecognized uniform type: "+p)}else console.warn("Unrecognized uniform type: "+p)}},{key:"setUniforms",value:function(p){this.textureIndex=0;for(var s in p)this.setUniform(s,p[s])}}]),d}(),$u=function(d,p,s,h){var _=void 0;if(_!==void 0)return!!_;if(d===p)return!0;if((typeof d>"u"?"undefined":Ta(d))!=="object"||!d||(typeof p>"u"?"undefined":Ta(p))!=="object"||!p)return!1;var x=Eo(d),S=Eo(p);if(x.length!==S.length)return!1;S=Object.prototype.hasOwnProperty.bind(p);for(var C=0;C<x.length;C++){if(_=x[C],!S(_))return!1;var R=d[_],H=p[_];if(_=void 0,_===!1||_===void 0&&R!==H)return!1}return!0},l2=function(){function d(p){hr(this,d),this.options=p,this.gl=p.gl,this.savedState=[],this.currentState=this.getDefaultState()}return Mr(d,[{key:"setDefaultState",value:function(){this.setState()}},{key:"getDefaultState",value:function(){var p=this.gl;return{blend:!1,blendEquation:p.FUNC_ADD,blendFunc:[p.ONE,p.ZERO],depthMask:!0,depthTest:!0,depthFunc:p.LEQUAL,polygonOffset:[0,0],cullFace:!1,stencilTest:!1}}},{key:"getRealState",value:function(){var p=this.gl;return{blend:p.getParameter(p.BLEND),blendEquation:p.getParameter(p.BLEND_EQUATION),depthMask:p.getParameter(p.DEPTH_WRITEMASK),depthTest:p.getParameter(p.DEPTH_TEST),depthFunc:p.getParameter(p.DEPTH_FUNC),polygonOffset:[p.getParameter(p.POLYGON_OFFSET_FACTOR),p.getParameter(p.POLYGON_OFFSET_UNITS)],cullFace:p.getParameter(p.CULL_FACE),stencilTest:p.getParameter(p.STENCIL_TEST)}}},{key:"getCurrentState",value:function(){return this.currentState}},{key:"save",value:function(){this.savedState.push(this.getCurrentState())}},{key:"restore",value:function(){var p=this.savedState.pop();this.setState(p,{force:!0})}},{key:"setState",value:function(p){var s=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};p=Lr(this.getDefaultState(),p),this.setBlend(p,s),this.setDepth(p,s),this.setCullFace(p,s),this.setPolygonOffset(p,s),this.setStencil(p,s),this.currentState=p}},{key:"setBlend",value:function(p,s){var h=this.gl,_=this.getCurrentState();((s=s.force)||!$u(p.blend,_.blend))&&(p.blend?h.enable(h.BLEND):h.disable(h.BLEND)),!s&&$u(p.blendEquation,_.blendEquation)||h.blendEquation(p.blendEquation),(s||!$u(p.blendFunc,_.blendFunc))&&(p.blendFunc.length===2?h.blendFunc(p.blendFunc[0],p.blendFunc[1]):p.blendFunc.length===4&&h.blendFuncSeparate(p.blendFunc[0],p.blendFunc[1],p.blendFunc[2],p.blendFunc[3]))}},{key:"setDepth",value:function(p,s){var h=this.gl,_=this.getCurrentState();((s=s.force)||!$u(p.depthTest,_.depthTest))&&(p.depthTest?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST)),(s||!$u(p.depthMask,_.depthMask))&&(p.depthMask?h.depthMask(!0):h.depthMask(!1)),!s&&$u(p.depthFunc,_.depthFunc)||h.depthFunc(p.depthFunc)}},{key:"setPolygonOffset",value:function(p,s){var h=this.gl,_=this.getCurrentState();(s.force||!$u(p.polygonOffset,_.polygonOffset))&&(p.polygonOffset[0]!==0&&p.polygonOffset[1]!==0?h.enable(h.POLYGON_OFFSET_FILL):h.disable(h.POLYGON_OFFSET_FILL),h.polygonOffset(p.polygonOffset[0],p.polygonOffset[1]))}},{key:"setCullFace",value:function(p,s){var h=this.gl,_=this.getCurrentState();(s.force||!$u(p.cullFace,_.cullFace))&&(p.cullFace?(h.enable(h.CULL_FACE),h.cullFace(h.BACK)):h.disable(h.CULL_FACE))}},{key:"setStencil",value:function(p,s){var h=this.gl,_=this.getCurrentState();(s.force||!$u(p.stencilTest,_.stencilTest))&&(p.stencilTest?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST))}}]),d}(),Br=function(){function d(p){hr(this,d),this.options=p,this.gl=p.gl,this.buffer=this.gl.createBuffer(),p.data&&this.updateData(p.data)}return Mr(d,[{key:"updateData",value:function(p){var s=this.options,h=this.gl;this.bind(),h.bufferData(h[s.target],p,h[s.usage])}},{key:"bind",value:function(p){p=p||this.gl,p.bindBuffer(p[this.options.target],this.buffer)}},{key:"unBind",value:function(p){p=p||this.gl,p.bindBuffer(p[this.options.target],null)}},{key:"destroy",value:function(){this.buffer=null}}]),d}(),$3={BYTE:1,UNSIGNED_BYTE:1,SHORT:2,UNSIGNED_SHORT:2,FLOAT:4},Yi=function(){function d(p){for(hr(this,d),this.options=p,this.attributes=p.attributes,this.gl=p.gl,this.program=p.program,p=this.stride=0;p<this.attributes.length;p++)this.stride+=$3[this.attributes[p].type]*this.attributes[p].size}return Mr(d,[{key:"setVertexAttribPointers",value:function(){for(var p=this.gl,s=this.program,h=0;h<this.attributes.length;h++){var _=this.attributes[h],x=s.attributes[_.name];x!==void 0&&(_.buffer.bind(p),p.vertexAttribPointer(x,_.size,p[_.type],_.normalize||!1,_.stride!==void 0?_.stride:this.stride,_.offset),p.enableVertexAttribArray(x))}}},{key:"bind",value:function(){this.setVertexAttribPointers()}},{key:"destroy",value:function(){}}]),d}(),La=function d(p,s,h){hr(this,d),s=s||p.canvas.width,h=h||p.canvas.height;var _=p.createFramebuffer(),x=p.createTexture();p.bindTexture(p.TEXTURE_2D,x),p.texImage2D(p.TEXTURE_2D,0,p.RGBA,s,h,0,p.RGBA,p.UNSIGNED_BYTE,null),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),_.texture=x;var S=p.createRenderbuffer();p.bindRenderbuffer(p.RENDERBUFFER,S),p.renderbufferStorage(p.RENDERBUFFER,p.DEPTH_STENCIL,s,h),_.depthBuffer=S,p.bindFramebuffer(p.FRAMEBUFFER,_),p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,x,0),p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_STENCIL_ATTACHMENT,p.RENDERBUFFER,S),s=p.checkFramebufferStatus(p.FRAMEBUFFER),p.FRAMEBUFFER_COMPLETE===s&&(p.bindFramebuffer(p.FRAMEBUFFER,null),p.bindTexture(p.TEXTURE_2D,null),p.bindRenderbuffer(p.RENDERBUFFER,null),this.framebuffer=_)},nf=function(){function d(p){hr(this,d),this.options={},Lr(this.options,p),this.vertex=[-1,1,0,-1,-1,0,1,1,0,1,1,0,-1,-1,0,1,-1,0],this.sampleCoord=[0,1,0,0,1,1,1,1,0,0,1,0]}return Mr(d,[{key:"getOptions",value:function(){return this.options}},{key:"onResize",value:function(p){}},{key:"render",value:function(p){var s=p.gl;p=p.texture;var h=this.programSample;s.useProgram(h.program);var _=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,_);var x=[-1,-1,0,-1,1,0,1,1,0,1,1,0,-1,-1,0,1,-1,0];s.bufferData(s.ARRAY_BUFFER,new Float32Array(x),s.STATIC_DRAW),s.enableVertexAttribArray(h.attributes.aPos),s.vertexAttribPointer(h.attributes.aPos,3,s.FLOAT,!1,0,0),_=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,_),s.bufferData(s.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,1,1,1,0,0,1,0]),s.STATIC_DRAW),s.enableVertexAttribArray(h.attributes.aTextureCoord),s.vertexAttribPointer(h.attributes.aTextureCoord,2,s.FLOAT,!1,0,0),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,p),s.uniform1i(h.uniforms.uSampler,0),s.drawArrays(s.TRIANGLES,0,x.length/3)}}]),d}(),u2=function(d){function p(s){return hr(this,p),ln(this,(p.__proto__||Dr(p)).call(this,s))}return sn(p,d),Mr(p,[{key:"getProgram",value:function(s){return this.programSample||(this.programSample=new Jn(s,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(void){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision highp float;uniform sampler2D uSampler;uniform vec2 canvasSize;varying vec2 vTextureCoord;vec4 fxaa_2_0(sampler2D tex,vec2 fragCoord,vec2 resolution,vec2 v_rgbNW,vec2 v_rgbNE,vec2 v_rgbSW,vec2 v_rgbSE,vec2 v_rgbM){vec4 color;mediump vec2 inverseVP=vec2(1.0/resolution.x,1.0/resolution.y);vec3 rgbNW=texture2D(tex,v_rgbNW).xyz;vec3 rgbNE=texture2D(tex,v_rgbNE).xyz;vec3 rgbSW=texture2D(tex,v_rgbSW).xyz;vec3 rgbSE=texture2D(tex,v_rgbSE).xyz;vec4 texColor=texture2D(tex,v_rgbM);vec3 rgbM=texColor.xyz;vec3 luma=vec3(0.299,0.587,0.114);float lumaNW=dot(rgbNW,luma);float lumaNE=dot(rgbNE,luma);float lumaSW=dot(rgbSW,luma);float lumaSE=dot(rgbSE,luma);float lumaM=dot(rgbM,luma);float lumaMin=min(lumaM,min(min(lumaNW,lumaNE),min(lumaSW,lumaSE)));float lumaMax=max(lumaM,max(max(lumaNW,lumaNE),max(lumaSW,lumaSE)));mediump vec2 dir;dir.x=-((lumaNW+lumaNE)-(lumaSW+lumaSE));dir.y=((lumaNW+lumaSW)-(lumaNE+lumaSE));float dirReduce=max((lumaNW+lumaNE+lumaSW+lumaSE)*(0.25*1.0/8.0),1.0/128.0);float rcpDirMin=1.0/(min(abs(dir.x),abs(dir.y))+dirReduce);dir=min(vec2(8.0,8.0),max(vec2(-8.0,-8.0),dir*rcpDirMin))*inverseVP;vec3 rgbA=0.5*(texture2D(tex,fragCoord*inverseVP+dir*(1.0/3.0-0.5)).xyz+texture2D(tex,fragCoord*inverseVP+dir*(2.0/3.0-0.5)).xyz);vec3 rgbB=rgbA*0.5+0.25*(texture2D(tex,fragCoord*inverseVP+dir*-0.5).xyz+texture2D(tex,fragCoord*inverseVP+dir*0.5).xyz);float lumaB=dot(rgbB,luma);if((lumaB<lumaMin)||(lumaB>lumaMax)){color=vec4(rgbA,texColor.a);}else{color=vec4(rgbB,texColor.a);}return color;}void texcoords_3_1(vec2 fragCoord,vec2 resolution,out vec2 v_rgbNW,out vec2 v_rgbNE,out vec2 v_rgbSW,out vec2 v_rgbSE,out vec2 v_rgbM){vec2 inverseVP=1.0/resolution.xy;v_rgbNW=(fragCoord+vec2(-1.0,-1.0))*inverseVP;v_rgbNE=(fragCoord+vec2(1.0,-1.0))*inverseVP;v_rgbSW=(fragCoord+vec2(-1.0,1.0))*inverseVP;v_rgbSE=(fragCoord+vec2(1.0,1.0))*inverseVP;v_rgbM=vec2(fragCoord*inverseVP);}vec4 apply_1_2(sampler2D tex,vec2 fragCoord,vec2 resolution){mediump vec2 v_rgbNW;mediump vec2 v_rgbNE;mediump vec2 v_rgbSW;mediump vec2 v_rgbSE;mediump vec2 v_rgbM;texcoords_3_1(fragCoord,resolution,v_rgbNW,v_rgbNE,v_rgbSW,v_rgbSE,v_rgbM);return fxaa_2_0(tex,fragCoord,resolution,v_rgbNW,v_rgbNE,v_rgbSW,v_rgbSE,v_rgbM);}void main(void){vec2 fragCoord=vTextureCoord*canvasSize;gl_FragColor=apply_1_2(uSampler,fragCoord,canvasSize);}"})),this.programSample}},{key:"render",value:function(s){var h=s.gl;s=s.texture,this.getOptions(),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT);var _=this.getProgram(h);h.useProgram(_.program);var x=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,x),h.bufferData(h.ARRAY_BUFFER,new Float32Array(this.vertex),h.STATIC_DRAW),h.enableVertexAttribArray(_.attributes.aPos),h.vertexAttribPointer(_.attributes.aPos,3,h.FLOAT,!1,0,0),x=h.createBuffer(),h.bindBuffer(h.ARRAY_BUFFER,x),h.bufferData(h.ARRAY_BUFFER,new Float32Array(this.sampleCoord),h.STATIC_DRAW),h.enableVertexAttribArray(_.attributes.aTextureCoord),h.vertexAttribPointer(_.attributes.aTextureCoord,2,h.FLOAT,!1,0,0),h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,s),h.uniform1i(_.uniforms.uSampler,1),h.uniform2fv(_.uniforms.canvasSize,[h.canvas.width,h.canvas.height]),h.drawArrays(h.TRIANGLES,0,this.vertex.length/3),h.bindBuffer(h.ARRAY_BUFFER,null),h.useProgram(null)}}]),p}(nf),e_=function(d){function p(s){return hr(this,p),ln(this,(p.__proto__||Dr(p)).call(this,s))}return sn(p,d),Mr(p,[{key:"getProgram",value:function(s){if(this.program1||(this.program1=new Jn(s,{vertexShader:"attribute vec3 position;attribute vec2 uv;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];void SMAAEdgeDetectionVS(vec2 texcoord){vOffset[0]=texcoord.xyxy+resolution.xyxy*vec4(-1.0,0.0,0.0,1.0);vOffset[1]=texcoord.xyxy+resolution.xyxy*vec4(1.0,0.0,0.0,-1.0);vOffset[2]=texcoord.xyxy+resolution.xyxy*vec4(-2.0,0.0,0.0,2.0);}void main(){vUv=uv;SMAAEdgeDetectionVS(vUv);gl_Position=vec4(position,1.0);}",fragmentShader:`precision highp float;
#define SMAA_THRESHOLD 0.1
uniform sampler2D tDiffuse;varying vec2 vUv;varying vec4 vOffset[3];vec4 SMAAColorEdgeDetectionPS(vec2 texcoord,vec4 offset[3],sampler2D colorTex){vec2 threshold=vec2(SMAA_THRESHOLD,SMAA_THRESHOLD);vec4 delta;vec3 C=texture2D(colorTex,texcoord).rgb;vec3 Cleft=texture2D(colorTex,offset[0].xy).rgb;vec3 t=abs(C-Cleft);delta.x=max(max(t.r,t.g),t.b);vec3 Ctop=texture2D(colorTex,offset[0].zw).rgb;t=abs(C-Ctop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0,1.0))==0.0)discard;vec3 Cright=texture2D(colorTex,offset[1].xy).rgb;t=abs(C-Cright);delta.z=max(max(t.r,t.g),t.b);vec3 Cbottom=texture2D(colorTex,offset[1].zw).rgb;t=abs(C-Cbottom);delta.w=max(max(t.r,t.g),t.b);float maxDelta=max(max(max(delta.x,delta.y),delta.z),delta.w);vec3 Cleftleft=texture2D(colorTex,offset[2].xy).rgb;t=abs(C-Cleftleft);delta.z=max(max(t.r,t.g),t.b);vec3 Ctoptop=texture2D(colorTex,offset[2].zw).rgb;t=abs(C-Ctoptop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(max(maxDelta,delta.z),delta.w);edges.xy*=step(0.5*maxDelta,delta.xy);return vec4(edges,0.0,0.0);}void main(){gl_FragColor=SMAAColorEdgeDetectionPS(vUv,vOffset,tDiffuse);}`})),this.program2||(this.program2=new Jn(s,{vertexShader:`precision highp float;
#define SMAA_MAX_SEARCH_STEPS 8
#define SMAA_AREATEX_MAX_DISTANCE 16
#define SMAA_AREATEX_PIXEL_SIZE ( 1.0 / vec2( 160.0, 560.0 ) )
#define SMAA_AREATEX_SUBTEX_SIZE ( 1.0 / 7.0 )
attribute vec3 position;attribute vec2 uv;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixcoord;void SMAABlendingWeightCalculationVS(vec2 texcoord){vPixcoord=texcoord/resolution;vOffset[0]=texcoord.xyxy+resolution.xyxy*vec4(-0.25,0.125,1.25,0.125);vOffset[1]=texcoord.xyxy+resolution.xyxy*vec4(-0.125,0.25,-0.125,-1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*resolution.xxyy*float(SMAA_MAX_SEARCH_STEPS);}void main(){vUv=uv;SMAABlendingWeightCalculationVS(vUv);gl_Position=vec4(position,1.0);}`,fragmentShader:`precision highp float;
#define SMAA_MAX_SEARCH_STEPS 8
#define SMAA_AREATEX_MAX_DISTANCE 16
#define SMAA_AREATEX_PIXEL_SIZE ( 1.0 / vec2( 160.0, 560.0 ) )
#define SMAA_AREATEX_SUBTEX_SIZE ( 1.0 / 7.0 )
#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * resolution, 0.0 )
uniform sampler2D tDiffuse;uniform sampler2D tArea;uniform sampler2D tSearch;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixcoord;vec2 round(vec2 x){return sign(x)*floor(abs(x)+0.5);}float SMAASearchLength(sampler2D searchTex,vec2 e,float bias,float scale){e.r=bias+e.r*scale;return 255.0*texture2D(searchTex,e,0.0).r;}float SMAASearchXLeft(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){/***@PSEUDO_GATHER4*This texcoord has been offset by(-0.25,-0.125)in the vertex shader to*sample between edge,thus fetching four edges in a row.*Sampling with different offsets in each direction allows to disambiguate*which edges are active from the four fetched ones.*/vec2 e=vec2(0.0,1.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord-=vec2(2.0,0.0)*resolution;if(!(texcoord.x>end&&e.g>0.8281&&e.r==0.0))break;}texcoord.x+=0.25*resolution.x;texcoord.x+=resolution.x;texcoord.x+=2.0*resolution.x;texcoord.x-=resolution.x*SMAASearchLength(searchTex,e,0.0,0.5);return texcoord.x;}float SMAASearchXRight(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord+=vec2(2.0,0.0)*resolution;if(!(texcoord.x<end&&e.g>0.8281&&e.r==0.0))break;}texcoord.x-=0.25*resolution.x;texcoord.x-=resolution.x;texcoord.x-=2.0*resolution.x;texcoord.x+=resolution.x*SMAASearchLength(searchTex,e,0.5,0.5);return texcoord.x;}float SMAASearchYUp(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord+=vec2(0.0,2.0)*resolution;if(!(texcoord.y>end&&e.r>0.8281&&e.g==0.0))break;}texcoord.y-=0.25*resolution.y;texcoord.y-=resolution.y;texcoord.y-=2.0*resolution.y;texcoord.y+=resolution.y*SMAASearchLength(searchTex,e.gr,0.0,0.5);return texcoord.y;}float SMAASearchYDown(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord-=vec2(0.0,2.0)*resolution;if(!(texcoord.y<end&&e.r>0.8281&&e.g==0.0))break;}texcoord.y+=0.25*resolution.y;texcoord.y+=resolution.y;texcoord.y+=2.0*resolution.y;texcoord.y-=resolution.y*SMAASearchLength(searchTex,e.gr,0.5,0.5);return texcoord.y;}vec2 SMAAArea(sampler2D areaTex,vec2 dist,float e1,float e2,float offset){vec2 texcoord=float(SMAA_AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texcoord=SMAA_AREATEX_PIXEL_SIZE*texcoord+(0.5*SMAA_AREATEX_PIXEL_SIZE);texcoord.y+=SMAA_AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTex,texcoord,0.0).rg;}vec4 SMAABlendingWeightCalculationPS(vec2 texcoord,vec2 pixcoord,vec4 offset[3],sampler2D edgesTex,sampler2D areaTex,sampler2D searchTex,ivec4 subsampleIndices){vec4 weights=vec4(0.0,0.0,0.0,0.0);vec2 e=texture2D(edgesTex,texcoord).rg;if(e.g>0.0){vec2 d;vec2 coords;coords.x=SMAASearchXLeft(edgesTex,searchTex,offset[0].xy,offset[2].x);coords.y=offset[1].y;d.x=coords.x;float e1=texture2D(edgesTex,coords,0.0).r;coords.x=SMAASearchXRight(edgesTex,searchTex,offset[0].zw,offset[2].y);d.y=coords.x;d=d/resolution.x-pixcoord.x;vec2 sqrt_d=sqrt(abs(d));coords.y-=1.0*resolution.y;float e2=SMAASampleLevelZeroOffset(edgesTex,coords,ivec2(1,0)).r;weights.rg=SMAAArea(areaTex,sqrt_d,e1,e2,float(subsampleIndices.y));}if(e.r>0.0){vec2 d;vec2 coords;coords.y=SMAASearchYUp(edgesTex,searchTex,offset[1].xy,offset[2].z);coords.x=offset[0].x;d.x=coords.y;float e1=texture2D(edgesTex,coords,0.0).g;coords.y=SMAASearchYDown(edgesTex,searchTex,offset[1].zw,offset[2].w);d.y=coords.y;d=d/resolution.y-pixcoord.y;vec2 sqrt_d=sqrt(abs(d));coords.y-=1.0*resolution.y;float e2=SMAASampleLevelZeroOffset(edgesTex,coords,ivec2(0,1)).g;weights.ba=SMAAArea(areaTex,sqrt_d,e1,e2,float(subsampleIndices.x));}return weights;}void main(){gl_FragColor=SMAABlendingWeightCalculationPS(vUv,vPixcoord,vOffset,tDiffuse,tArea,tSearch,ivec4(0.0));}`})),this.program3||(this.program3=new Jn(s,{vertexShader:"precision highp float;uniform vec2 resolution;attribute vec3 position;attribute vec2 uv;varying vec2 vUv;varying vec4 vOffset[2];void SMAANeighborhoodBlendingVS(vec2 texcoord){vOffset[0]=texcoord.xyxy+resolution.xyxy*vec4(-1.0,0.0,0.0,1.0);vOffset[1]=texcoord.xyxy+resolution.xyxy*vec4(1.0,0.0,0.0,-1.0);}void main(){vUv=uv;SMAANeighborhoodBlendingVS(vUv);gl_Position=vec4(position,1.0);}",fragmentShader:"precision highp float;uniform sampler2D tDiffuse;uniform sampler2D tColor;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[2];vec4 SMAANeighborhoodBlendingPS(vec2 texcoord,vec4 offset[2],sampler2D colorTex,sampler2D blendTex){vec4 a;a.xz=texture2D(blendTex,texcoord).xz;a.y=texture2D(blendTex,offset[1].zw).g;a.w=texture2D(blendTex,offset[1].xy).a;if(dot(a,vec4(1.0,1.0,1.0,1.0))<1e-5){return texture2D(colorTex,texcoord,0.0);}else{vec2 offset;offset.x=a.a>a.b ? a.a :-a.b;offset.y=a.g>a.r ?-a.g : a.r;if(abs(offset.x)>abs(offset.y)){offset.y=0.0;}else{offset.x=0.0;}vec4 C=texture2D(colorTex,texcoord,0.0);texcoord+=sign(offset)*resolution;vec4 Cop=texture2D(colorTex,texcoord,0.0);float s=abs(offset.x)>abs(offset.y)? abs(offset.x): abs(offset.y);C.xyz=pow(C.xyz,vec3(2.2));Cop.xyz=pow(Cop.xyz,vec3(2.2));vec4 mixed=mix(C,Cop,s);mixed.xyz=pow(mixed.xyz,vec3(1.0/2.2));return mixed;}}void main(){gl_FragColor=SMAANeighborhoodBlendingPS(vUv,vOffset,tColor,tDiffuse);}"})),!this.vertexBuffer||!this.sampleBuffer){this.vertexBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.sampleBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.vertexBuffer.updateData(new Float32Array(this.vertex)),this.sampleBuffer.updateData(new Float32Array(this.sampleCoord));var h=[{stride:12,name:"position",buffer:this.vertexBuffer,size:3,type:"FLOAT",offset:0},{stride:8,name:"uv",buffer:this.sampleBuffer,size:2,type:"FLOAT",offset:0}];this.vertexArray1=new Yi({gl:s,program:this.program1,attributes:h}),this.vertexArray2=new Yi({gl:s,program:this.program2,attributes:h}),this.vertexArray3=new Yi({gl:s,program:this.program3,attributes:h})}return{program1:this.program1,program2:this.program2,program3:this.program3}}},{key:"onResize",value:function(s){this.collectBrightBuffer=new La(s),this.bloomBuffer=new La(s)}},{key:"getExtraFbo",value:function(s){return this.collectBrightBuffer||(this.collectBrightBuffer=new La(s)),this.bloomBuffer||(this.bloomBuffer=new La(s)),{collectBrightBuffer:this.collectBrightBuffer.framebuffer,bloomBuffer:this.bloomBuffer.framebuffer}}},{key:"render",value:function(s){var h=s.gl,_=s.texture;s=s.fbo,this.getOptions(),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT);var x=this.getProgram(h),S=x.program1,C=x.program2;x=x.program3;var R=this.getExtraFbo(h),H=R.collectBrightBuffer;R=R.bloomBuffer;var Z=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,Z),h.bufferData(h.ARRAY_BUFFER,new Float32Array(this.vertex),h.STATIC_DRAW),h.enableVertexAttribArray(S.attributes.position),h.vertexAttribPointer(S.attributes.position,3,h.FLOAT,!1,0,0),h.enableVertexAttribArray(C.attributes.position),h.vertexAttribPointer(C.attributes.position,3,h.FLOAT,!1,0,0),h.enableVertexAttribArray(x.attributes.position),h.vertexAttribPointer(x.attributes.position,3,h.FLOAT,!1,0,0),Z=h.createBuffer(),h.bindBuffer(h.ARRAY_BUFFER,Z),h.bufferData(h.ARRAY_BUFFER,new Float32Array(this.sampleCoord),h.STATIC_DRAW),h.enableVertexAttribArray(S.attributes.uv),h.vertexAttribPointer(S.attributes.uv,2,h.FLOAT,!1,0,0),h.enableVertexAttribArray(C.attributes.uv),h.vertexAttribPointer(C.attributes.uv,2,h.FLOAT,!1,0,0),h.enableVertexAttribArray(x.attributes.uv),h.vertexAttribPointer(x.attributes.uv,2,h.FLOAT,!1,0,0),h.useProgram(S.program),h.bindFramebuffer(h.FRAMEBUFFER,H),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),h.activeTexture(h.TEXTURE2),h.bindTexture(h.TEXTURE_2D,_),h.uniform1i(S.uniforms.tDiffuse,2),h.uniform2fv(S.uniforms.resolution,[h.canvas.width,h.canvas.height]),h.drawArrays(h.TRIANGLES,0,this.vertex.length/3),h.useProgram(C.program),h.bindFramebuffer(h.FRAMEBUFFER,R),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),h.activeTexture(h.TEXTURE2),h.bindTexture(h.TEXTURE_2D,H.texture),h.uniform1i(C.uniforms.uSampler,2),h.uniform2fv(C.uniforms.resolution,[h.canvas.width,h.canvas.height]),h.drawArrays(h.TRIANGLES,0,this.vertex.length/3),h.useProgram(x.program),h.bindFramebuffer(h.FRAMEBUFFER,s),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),h.activeTexture(h.TEXTURE2),h.bindTexture(h.TEXTURE_2D,_),h.uniform1i(x.uniforms.tDiffuse,2),h.activeTexture(h.TEXTURE3),h.bindTexture(h.TEXTURE_2D,R.texture),h.uniform1i(x.uniforms.tColor,3),h.uniform2fv(x.uniforms.resolution,[h.canvas.width,h.canvas.height]),h.drawArrays(h.TRIANGLES,0,this.vertex.length/3),h.bindBuffer(h.ARRAY_BUFFER,null),h.useProgram(null)}},{key:"getAreaTexture",value:function(){return"data:image/png;base64,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"}},{key:"getSearchTexture",value:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAIAAADiVupLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFZJREFUeNrs00EKgAAIRNEZ739mTQoiwmhRi4L/FiKiu9ERISkzbXdTVV3H4WhfOG6ehl1rNR7qDSF8hwkVcJXt+3A//I0Nv0GoCBUAAAAAAMA/LAIMAB+Dcg2OE2zsAAAAAElFTkSuQmCC"}}]),p}(nf),t_=function(d){function p(s){return hr(this,p),ln(this,(p.__proto__||Dr(p)).call(this,s))}return sn(p,d),Mr(p,[{key:"getProgram",value:function(s){return this.programSample||(this.programSample=new Jn(s,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;varying vec2 vTextureCoord;void main(){float fStep=1.0/512.0;vec4 sample11=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample12=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t+1.0*fStep));vec4 sample13=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample21=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t));vec4 sample22=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t));vec4 sample23=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t));vec4 sample31=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 sample32=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t-1.0*fStep));vec4 sample33=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 blurSample=(sample11+sample12+sample13+sample21+2.0*sample22+sample23+sample31+sample32+sample33)/10.0;gl_FragColor=blurSample;}"}),this.vertexBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.sampleBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.vertexBuffer.updateData(new Float32Array(this.vertex)),this.sampleBuffer.updateData(new Float32Array(this.sampleCoord)),this.vertexArray=new Yi({gl:s,program:this.programSample,attributes:[{stride:12,name:"aPos",buffer:this.vertexBuffer,size:3,type:"FLOAT",offset:0},{stride:8,name:"aTextureCoord",buffer:this.sampleBuffer,size:2,type:"FLOAT",offset:0}]})),this.programSample}},{key:"render",value:function(s){var h=s.gl;s=s.texture,h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT);var _=this.getProgram(h);_.use(h),this.vertexArray.bind(),h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,s),h.uniform1i(_.uniforms.uSampler,1),h.drawArrays(h.TRIANGLES,0,this.vertex.length/3)}}]),p}(nf),eI=function(d){function p(s){return hr(this,p),ln(this,(p.__proto__||Dr(p)).call(this,s))}return sn(p,d),Mr(p,[{key:"getProgram",value:function(s){return this.programBright||(this.programBright=new Jn(s,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform float threshold;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(uSampler,vTextureCoord);vec4 lightColor=max(vec4(0.0),(color-(1.0-threshold)/5.0));float brightness=dot(color.rgb,vec3(0.2126,0.7152,0.0722));if(brightness>threshold){color=lightColor;}else{color=vec4(0.0);}gl_FragColor=color;}"})),this.programBloom||(this.programBloom=new Jn(s,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform bool isVertical;uniform vec2 canvasSize;uniform float blurSize;uniform float devicePixelRatio;varying vec2 vTextureCoord;void main(){float weight[10];weight[0]=0.2270270270;weight[1]=0.1945945946;weight[2]=0.1216216216;weight[3]=0.1135135135;weight[4]=0.0972972973;weight[5]=0.0608108108;weight[6]=0.0540540541;weight[7]=0.0270270270;weight[8]=0.0162162162;weight[9]=0.0081081081;vec2 offset=vec2(blurSize/canvasSize.x,blurSize/canvasSize.y)*devicePixelRatio;vec4 result=texture2D(uSampler,vTextureCoord)*weight[0];if(isVertical){for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(0.0,offset.y*float(i)))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(0.0,offset.y*float(i)))*weight[i];}}else{for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(offset.x*float(i),0.0))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(offset.x*float(i),0.0))*weight[i];}}gl_FragColor=result;}"})),this.programResult||(this.programResult=new Jn(s,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D originalTexture;uniform sampler2D bloomTexture;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(originalTexture,vTextureCoord);vec4 bloomColor=texture2D(bloomTexture,vTextureCoord);color+=bloomColor;gl_FragColor=color;}"})),{programBright:this.programBright,programBloom:this.programBloom,programResult:this.programResult}}},{key:"onResize",value:function(s){this.collectBrightBuffer=new La(s),this.bloomBuffer=new La(s)}},{key:"getExtraFbo",value:function(s){return this.collectBrightBuffer||(this.collectBrightBuffer=new La(s)),this.bloomBuffer||(this.bloomBuffer=new La(s)),{collectBrightBuffer:this.collectBrightBuffer.framebuffer,bloomBuffer:this.bloomBuffer.framebuffer}}},{key:"render",value:function(s){var h=s.gl,_=s.texture;s=s.fbo;var x=this.getOptions();h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT);var S=this.getProgram(h),C=S.programBright,R=S.programBloom;S=S.programResult;var H=this.getExtraFbo(h),Z=H.collectBrightBuffer;H=H.bloomBuffer;var P=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,P),h.bufferData(h.ARRAY_BUFFER,new Float32Array(this.vertex),h.STATIC_DRAW),h.enableVertexAttribArray(C.attributes.aPos),h.vertexAttribPointer(C.attributes.aPos,3,h.FLOAT,!1,0,0),h.enableVertexAttribArray(R.attributes.aPos),h.vertexAttribPointer(R.attributes.aPos,3,h.FLOAT,!1,0,0),h.enableVertexAttribArray(S.attributes.aPos),h.vertexAttribPointer(S.attributes.aPos,3,h.FLOAT,!1,0,0),P=h.createBuffer(),h.bindBuffer(h.ARRAY_BUFFER,P),h.bufferData(h.ARRAY_BUFFER,new Float32Array(this.sampleCoord),h.STATIC_DRAW),h.enableVertexAttribArray(C.attributes.aTextureCoord),h.vertexAttribPointer(C.attributes.aTextureCoord,2,h.FLOAT,!1,0,0),h.enableVertexAttribArray(R.attributes.aTextureCoord),h.vertexAttribPointer(R.attributes.aTextureCoord,2,h.FLOAT,!1,0,0),h.enableVertexAttribArray(S.attributes.aTextureCoord),h.vertexAttribPointer(S.attributes.aTextureCoord,2,h.FLOAT,!1,0,0),h.useProgram(C.program),h.bindFramebuffer(h.FRAMEBUFFER,Z),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,_),h.uniform1i(C.uniforms.uSampler,1),h.uniform1f(C.uniforms.threshold,x.threshold||0),h.drawArrays(h.TRIANGLES,0,this.vertex.length/3),h.useProgram(R.program),h.bindFramebuffer(h.FRAMEBUFFER,H),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,Z.texture),h.uniform1i(R.uniforms.uSampler,1),h.uniform1i(R.uniforms.isVertical,!0),h.uniform1f(R.uniforms.blurSize,x.blurSize||2),h.uniform1f(R.uniforms.devicePixelRatio,window.devicePixelRatio),h.uniform2fv(R.uniforms.canvasSize,[h.canvas.width,h.canvas.height]),h.drawArrays(h.TRIANGLES,0,this.vertex.length/3),h.useProgram(R.program),h.bindFramebuffer(h.FRAMEBUFFER,Z),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,H.texture),h.uniform1i(R.uniforms.uSampler,1),h.uniform1i(R.uniforms.isVertical,!1),h.uniform1f(R.uniforms.blurSize,x.blurSize||2),h.uniform1f(R.uniforms.devicePixelRatio,window.devicePixelRatio),h.uniform2fv(R.uniforms.canvasSize,[h.canvas.width,h.canvas.height]),h.drawArrays(h.TRIANGLES,0,this.vertex.length/3),h.useProgram(S.program),h.bindFramebuffer(h.FRAMEBUFFER,s),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,_),h.uniform1i(S.uniforms.originalTexture,1),h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,Z.texture),h.uniform1i(S.uniforms.bloomTexture,0),h.drawArrays(h.TRIANGLES,0,this.vertex.length/3),h.bindBuffer(h.ARRAY_BUFFER,null),h.useProgram(null)}}]),p}(nf),Pg=function(d){function p(s){return hr(this,p),ln(this,(p.__proto__||Dr(p)).call(this,s))}return sn(p,d),Mr(p,[{key:"getProgram",value:function(s){return this.programBright||(this.programBright=new Jn(s,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform float threshold;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(uSampler,vTextureCoord);vec4 lightColor=max(vec4(0.0),(color-threshold));gl_FragColor=lightColor;}"})),this.programBloom||(this.programBloom=new Jn(s,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform bool isVertical;uniform vec2 canvasSize;uniform float blurSize;uniform float devicePixelRatio;varying vec2 vTextureCoord;void main(){float weight[10];weight[0]=0.2270270270;weight[1]=0.1945945946;weight[2]=0.1216216216;weight[3]=0.1135135135;weight[4]=0.0972972973;weight[5]=0.0608108108;weight[6]=0.0540540541;weight[7]=0.0270270270;weight[8]=0.0162162162;weight[9]=0.0081081081;vec2 offset=vec2(blurSize/canvasSize.x,blurSize/canvasSize.y)*devicePixelRatio;vec4 result=texture2D(uSampler,vTextureCoord)*weight[0];if(isVertical){for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(0.0,offset.y*float(i)))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(0.0,offset.y*float(i)))*weight[i];}}else{for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(offset.x*float(i),0.0))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(offset.x*float(i),0.0))*weight[i];}}gl_FragColor=result;}"})),this.programResult||(this.programResult=new Jn(s,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D originalTexture;uniform sampler2D bloomTexture;uniform float toneScale;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(originalTexture,vTextureCoord)*toneScale;vec4 bloomColor=texture2D(bloomTexture,vTextureCoord);color+=bloomColor;gl_FragColor=color;}"})),{programBright:this.programBright,programBloom:this.programBloom,programResult:this.programResult}}},{key:"onResize",value:function(s){this.collectBrightBuffer=new La(s),this.bloomBuffer=new La(s)}},{key:"getExtraFbo",value:function(s){return this.collectBrightBuffer||(this.collectBrightBuffer=new La(s)),this.bloomBuffer||(this.bloomBuffer=new La(s)),{collectBrightBuffer:this.collectBrightBuffer.framebuffer,bloomBuffer:this.bloomBuffer.framebuffer}}},{key:"render",value:function(s){var h=s.gl,_=s.texture;s=s.fbo;var x=this.getOptions(),S="clarity"in x?x.clarity:1;S=Math.max(0,S),S=Math.min(1,S),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT);var C=this.getProgram(h),R=C.programBright,H=C.programBloom;C=C.programResult;var Z=this.getExtraFbo(h),P=Z.collectBrightBuffer;Z=Z.bloomBuffer;var F=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,F),h.bufferData(h.ARRAY_BUFFER,new Float32Array(this.vertex),h.STATIC_DRAW),h.enableVertexAttribArray(R.attributes.aPos),h.vertexAttribPointer(R.attributes.aPos,3,h.FLOAT,!1,0,0),h.enableVertexAttribArray(H.attributes.aPos),h.vertexAttribPointer(H.attributes.aPos,3,h.FLOAT,!1,0,0),h.enableVertexAttribArray(C.attributes.aPos),h.vertexAttribPointer(C.attributes.aPos,3,h.FLOAT,!1,0,0),F=h.createBuffer(),h.bindBuffer(h.ARRAY_BUFFER,F),h.bufferData(h.ARRAY_BUFFER,new Float32Array(this.sampleCoord),h.STATIC_DRAW),h.enableVertexAttribArray(R.attributes.aTextureCoord),h.vertexAttribPointer(R.attributes.aTextureCoord,2,h.FLOAT,!1,0,0),h.enableVertexAttribArray(H.attributes.aTextureCoord),h.vertexAttribPointer(H.attributes.aTextureCoord,2,h.FLOAT,!1,0,0),h.enableVertexAttribArray(C.attributes.aTextureCoord),h.vertexAttribPointer(C.attributes.aTextureCoord,2,h.FLOAT,!1,0,0),h.useProgram(R.program),h.bindFramebuffer(h.FRAMEBUFFER,P),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,_),h.uniform1i(R.uniforms.uSampler,1),h.uniform1f(R.uniforms.threshold,x.threshold||0),h.drawArrays(h.TRIANGLES,0,this.vertex.length/3),h.useProgram(H.program),h.bindFramebuffer(h.FRAMEBUFFER,Z),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,P.texture),h.uniform1i(H.uniforms.uSampler,1),h.uniform1i(H.uniforms.isVertical,!0),h.uniform1f(H.uniforms.blurSize,x.blurSize||2),h.uniform1f(H.uniforms.devicePixelRatio,window.devicePixelRatio),h.uniform2fv(H.uniforms.canvasSize,[h.canvas.width,h.canvas.height]),h.drawArrays(h.TRIANGLES,0,this.vertex.length/3),h.useProgram(H.program),h.bindFramebuffer(h.FRAMEBUFFER,P),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,Z.texture),h.uniform1i(H.uniforms.uSampler,1),h.uniform1i(H.uniforms.isVertical,!1),h.uniform1f(H.uniforms.blurSize,x.blurSize||2),h.uniform1f(H.uniforms.devicePixelRatio,window.devicePixelRatio),h.uniform2fv(H.uniforms.canvasSize,[h.canvas.width,h.canvas.height]),h.drawArrays(h.TRIANGLES,0,this.vertex.length/3),h.useProgram(C.program),h.bindFramebuffer(h.FRAMEBUFFER,s),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,_),h.uniform1i(C.uniforms.originalTexture,1),h.uniform1f(C.uniforms.toneScale,S),h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,P.texture),h.uniform1i(C.uniforms.bloomTexture,0),h.drawArrays(h.TRIANGLES,0,this.vertex.length/3),h.bindBuffer(h.ARRAY_BUFFER,null),h.useProgram(null)}}]),p}(nf),U0=function(d){function p(s){return hr(this,p),ln(this,(p.__proto__||Dr(p)).call(this,s))}return sn(p,d),Mr(p,[{key:"getProgram",value:function(s){return this.programSample||(this.programSample=new Jn(s,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform vec2 canvasSize;varying vec2 vTextureCoord;void main(){float fStep=1.0/312.0;vec4 sample11=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample12=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t+1.0*fStep));vec4 sample13=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample21=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t));vec4 sample22=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t));vec4 sample23=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t));vec4 sample31=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 sample32=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t-1.0*fStep));vec4 sample33=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 blurSample=(sample11+sample12+sample13+sample21+2.0*sample22+sample23+sample31+sample32+sample33)/10.0;float desX=abs((gl_FragCoord.x-canvasSize.x/2.0)/(canvasSize.x/2.0));float desY=abs((gl_FragCoord.y-canvasSize.y/2.0)/(canvasSize.y/2.0));float factor=max(desX,desY);gl_FragColor=(sample22*(1.0-factor)+blurSample*factor);}"})),this.programSample}},{key:"render",value:function(s){var h=s.gl;s=s.texture;var _=this.getProgram(h);h.useProgram(_.program);var x=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,x),h.bufferData(h.ARRAY_BUFFER,new Float32Array(this.vertex),h.STATIC_DRAW),h.enableVertexAttribArray(_.attributes.aPos),h.vertexAttribPointer(_.attributes.aPos,3,h.FLOAT,!1,0,0),x=h.createBuffer(),h.bindBuffer(h.ARRAY_BUFFER,x),h.bufferData(h.ARRAY_BUFFER,new Float32Array(this.sampleCoord),h.STATIC_DRAW),h.enableVertexAttribArray(_.attributes.aTextureCoord),h.vertexAttribPointer(_.attributes.aTextureCoord,2,h.FLOAT,!1,0,0),h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,s),h.uniform1i(_.uniforms.uSampler,1),h.uniform2fv(_.uniforms.canvasSize,[h.canvas.width,h.canvas.height]),h.drawArrays(h.TRIANGLES,0,this.vertex.length/3)}}]),p}(nf),Xc=function(){function d(p){hr(this,d),this.gl=p,this.effects=[],this.initFbo()}return Mr(d,[{key:"addEffect",value:function(p){this.effects.push(p)}},{key:"removeEffect",value:function(p){}},{key:"setEffects",value:function(p){this.effects=p}},{key:"onResize",value:function(){this.initFbo();var p=this.gl,s=this.effects;if(s&&1<s.length)for(var h=1;h<s.length;h++){var _=s[h];_.onResize&&_.onResize(p)}}},{key:"initFbo",value:function(){var p=this.gl;p&&(this.fbo=[new La(p),new La(p)])}},{key:"destroy",value:function(){this.effects=[],this.fbo=[],this.gl=null}},{key:"render",value:function(){var p=this.gl,s=this.effects;if(s&&0<s.length)for(var h={},_=0;_<s.length;_++){var x=this.fbo[_%2].framebuffer;_===s.length-1&&(x=null),p.bindFramebuffer(p.FRAMEBUFFER,x);var S=[0,0,0,0];p.clearColor(S[0],S[1],S[2],S[3]),p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT),s[_].render({isPickRender:!1,gl:p,texture:h.texture,fbo:x}),h=x}}}]),d}(),Ip=function(){function d(p,s){hr(this,d),this.map=p,this.options=s||{},this.eventMap={}}return Mr(d,[{key:"onResize",value:function(p){}},{key:"onUpdate",value:function(p){throw"未实现onUpdate方法"}},{key:"getContainer",value:function(){throw"未实现getContainer方法"}},{key:"getSize",value:function(){throw"未实现getSize方法"}},{key:"getTilt",value:function(){throw"未实现getTilt方法"}},{key:"getHeading",value:function(){throw"未实现getHeading方法"}},{key:"getZoomUnits",value:function(){throw"未实现getZoomUnits方法"}},{key:"getCenter",value:function(){throw"未实现getCenter方法"}},{key:"getMapType",value:function(){throw"未实现getMapType方法"}},{key:"lnglatToMercator",value:function(p,s){return this.options.coordinateSystem==="gcj02"?(s=s*Math.PI/180,s=31890685e-1*Math.log((1+Math.sin(s))/(1-Math.sin(s))),[parseFloat((p*Math.PI/180*6378137).toFixed(2)),parseFloat(s.toFixed(2))]):(p=_e.convertLL2MC({lng:p,lat:s}),[p.lng,p.lat])}}]),d}(),r_=function(d){function p(s){hr(this,p);var h=ln(this,(p.__proto__||Dr(p)).call(this,s));return s._printLog&&s._printLog("mapvgl"),h.eventMap={},h}return sn(p,d),Mr(p,[{key:"onResize",value:function(s){this.map.addEventListener("resize",s),this.eventMap.resize=s}},{key:"onMousemove",value:function(s){s=this.extendCallback(s),this.map.addEventListener("mousemove",s),this.eventMap.mousemove=s}},{key:"onClick",value:function(s){s=this.extendCallback(s),this.map.addEventListener("click",s),this.eventMap.click=s}},{key:"onDblClick",value:function(s){s=this.extendCallback(s),this.map.addEventListener("dblclick",s),this.eventMap.dblclick=s}},{key:"onRightClick",value:function(s){s=this.extendCallback(s),this.map.addEventListener("rightclick",s),this.eventMap.rightclick=s}},{key:"onUpdate",value:function(s){this.map.addEventListener("update",s),this.map.addEventListener("onearthstatuschange",s),this.eventMap.update=s,this.eventMap.onearthstatuschange=s}},{key:"extendCallback",value:function(s){return function(h){s(Lr(h,{x:h.x,y:h.y}))}}},{key:"unbind",value:function(s){var h=this;this.eventMap[s]?(this.map.removeEventListener(s,this.eventMap[s]),delete this.eventMap[s]):(Eo(this.eventMap).forEach(function(_){h.map.removeEventListener(_,h.eventMap[_])}),this.eventMap={})}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getSize",value:function(){return this.map.getSize()}},{key:"getBounds",value:function(){return this.map.getBounds()}},{key:"getTilt",value:function(){return this.map.getTilt()}},{key:"getHeading",value:function(){return this.map.getHeading()}},{key:"getZoomUnits",value:function(){return this.map.getZoomUnits()}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"getCenter",value:function(){var s=this.map.getCenter();return-180<=s.lng&&180>=s.lng&&(s=this.map.lnglatToMercator(s.lng,s.lat),s={lng:s[0],lat:s[1]}),s}},{key:"getMapType",value:function(){return this.map.getMapType()}},{key:"lnglatToMercator",value:function(s,h){return this.map.lnglatToMercator(s,h)}},{key:"mercatorToLnglat",value:function(s,h){return this.map.mercatorToLnglat(s,h)}},{key:"pixelToPointIn",value:function(s){return s=this.map.pixelToPointIn(s),this.mercatorToLnglat(s.lng,s.lat)}}]),p}(Ip),c2=function(d){function p(s){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s)),s.div=document.createElement("div"),s.div.style.position="absolute",s.div.style.userSelect="none",s.map.getPanes().mapPane.appendChild(s.div),s.eventMap={},s}return sn(p,d),Mr(p,[{key:"onResize",value:function(s){this.map.addEventListener("resize",s),this.eventMap.resize=s}},{key:"onMousemove",value:function(s){s=this.extendCallback(s),this.map.addEventListener("mousemove",s),this.eventMap.mousemove=s}},{key:"onClick",value:function(s){s=this.extendCallback(s),kc?(this.map.addEventListener("touchend",s),this.eventMap.touchend=s):(this.map.addEventListener("click",s),this.eventMap.click=s)}},{key:"onDblClick",value:function(s){s=this.extendCallback(s),this.map.addEventListener("dblclick",s),this.eventMap.dblclick=s}},{key:"onRightClick",value:function(s){s=this.extendCallback(s),this.map.addEventListener("rightclick",s),this.eventMap.rightclick=s}},{key:"changeCanvas",value:function(){var s=this.map,h=s.getSize(),_=s.getCenter();s=s.pointToOverlayPixel(_),this.div.style.left=s.x-h.width/2+"px",this.div.style.top=s.y-h.height/2+"px"}},{key:"onUpdate",value:function(s){var h=this,_=function(){h.changeCanvas(),s()};this.map.addEventListener("moveend",_),this.map.addEventListener("moving",_),this.map.addEventListener("zoomend",_),this.eventMap.moveend=_,this.eventMap.moving=_,this.eventMap.zoomend=_}},{key:"extendCallback",value:function(s){return function(h){s(Lr(h,{x:h.pixel.x,y:h.pixel.y}))}}},{key:"unbind",value:function(){var s=this;Eo(this.eventMap).forEach(function(h){s.map.removeEventListener(h,s.eventMap[h])}),this.eventMap={}}},{key:"getContainer",value:function(){return this.div}},{key:"getSize",value:function(){return this.map.getSize()}},{key:"getBounds",value:function(){return this.map.getBounds()}},{key:"getTilt",value:function(){return 0}},{key:"getHeading",value:function(){return 0}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"getZoomUnits",value:function(){var s=this.getZoom();return this.map.getMapType().getZoomUnits?this.map.getMapType().getZoomUnits(s):Math.pow(2,18-s)}},{key:"getCenter",value:function(){var s=this.map.getMapType().getProjection().lngLatToPoint(this.map.getCenter());return{lng:s.x,lat:s.y}}},{key:"lnglatToMercator",value:function(s,h){return s=this.map.getMapType().getProjection().lngLatToPoint({lng:s,lat:h}),[s.x,s.y]}},{key:"mercatorToLnglat",value:function(s,h){return s=this.map.getMapType().getProjection().pointToLngLat({lng:s,lat:h}),[s.lng,s.lat]}}]),p}(Ip),h2=function(d){function p(s){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s)),s.eventMap={},s}return sn(p,d),Mr(p,[{key:"onResize",value:function(s){window.addEventListener("resize",s),this.eventMap.resize=s}},{key:"onUpdate",value:function(s){}},{key:"unbind",value:function(){var s=this;Eo(this.eventMap).forEach(function(h){window.removeEventListener(h,s.eventMap[h])}),this.eventMap={}}},{key:"getContainer",value:function(){return this.map.container.getElementsByClassName("cesium-widget")[0]}},{key:"getSize",value:function(){var s=this.map;return{width:s.canvas.clientWidth,height:s.canvas.clientHeight}}},{key:"getTilt",value:function(){return 180*this.map.camera.pitch/Math.PI+90}},{key:"getHeading",value:function(){return 360-180*this.map.camera.heading/Math.PI}},{key:"getZoomUnits",value:function(){var s=this.map;return 6.8*s.scene.globe.ellipsoid.cartesianToCartographic(s.camera.position).height/6500}},{key:"getZoom",value:function(){return 10}},{key:"getCenter",value:function(){var s=this.map;return s=s.camera.pickEllipsoid(new Cesium.Cartesian2(s.canvas.clientWidth/2,s.canvas.clientHeight/2)),s=Cesium.Ellipsoid.WGS84.cartesianToCartographic(s),s=this.getMercator([180*s.longitude/Math.PI,180*s.latitude/Math.PI]),{lng:s[0],lat:s[1]}}},{key:"getMercator",value:function(s){var h=[];return h[0]=s[0]*Math.PI/180*6378137,s=s[1]*Math.PI/180,h[1]=31890685e-1*Math.log((1+Math.sin(s))/(1-Math.sin(s))),h}}]),p}(Ip),n_=function(d){function p(s){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s)),s.eventMap={},s}return sn(p,d),Mr(p,[{key:"onResize",value:function(s){window.addEventListener("resize",s),this.eventMap.resize=s}},{key:"onUpdate",value:function(s){}},{key:"unbind",value:function(){var s=this;Eo(this.eventMap).forEach(function(h){window.removeEventListener(h,s.eventMap[h])}),this.eventMap={}}},{key:"getContainer",value:function(){return this.map.container}},{key:"getSize",value:function(){return{width:this.map.container.clientWidth,height:this.map.container.clientHeight}}},{key:"getTilt",value:function(){return this.map.tilt}},{key:"getHeading",value:function(){return this.map.heading}},{key:"getZoomUnits",value:function(){return this.map.zoomUnits}},{key:"getZoom",value:function(){return this.map.zoom}},{key:"getCenter",value:function(){return this.map.center}}]),p}(Ip),f2=function(d){function p(s,h){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s,h)),s.eventMap={},s}return sn(p,d),Mr(p,[{key:"onResize",value:function(s){window.addEventListener("resize",s),this.eventMap.resize=s}},{key:"onUpdate",value:function(s){}},{key:"unbind",value:function(){var s=this;Eo(this.eventMap).forEach(function(h){window.removeEventListener(h,s.eventMap[h])}),this.eventMap={}}},{key:"getContainer",value:function(){return this.map.container}},{key:"getSize",value:function(){return{width:this.map.container.clientWidth,height:this.map.container.clientHeight}}},{key:"getTilt",value:function(){return this.map.tilt}},{key:"getHeading",value:function(){return this.map.heading}},{key:"getZoomUnits",value:function(){return this.map.zoomUnits}},{key:"getCenter",value:function(){return this.map.center}}]),p}(Ip),Rp=function(){function d(p,s){var h=this;hr(this,d),s=s||{},s.mapType==="bmap"?this.map=new c2(p,s):s.mapType==="blank"?this.map=new n_(p,s):s.mapType==="cesium"?this.map=new h2(p,s):s.mapType==="three"?this.map=new f2(p,s):(s.mapType="bmapgl",this.map=new r_(p,s)),this.map.type=s.mapType,this._dpr=window.devicePixelRatio,s.mapType==="bmapgl"&&(this._dpr=this.map.map.config.ratio),this.options=s||{},this.renderArr=[],(p=s.canvas)||(p=document.createElement("canvas")),this.canvas=p,this.gl=s.gl?s.gl:Ht(p,s),["OES_texture_float","OES_element_index_uint","WEBGL_color_buffer_float","EXT_float_blend"].forEach(function(_){h.gl.getExtension(_)}),this.changeSize(),this.projectionMatrix=Er.create(Float64Array),this.orthoMatrix=Er.create(Float64Array),this.matrix=Er.create(Float64Array),this.viewMatrix=Er.create(Float64Array),this.pointToPixelMatrix=Er.create(Float64Array),this.pixelToViewMatrix=Er.create(Float64Array),this.fovy=35,this.fps=Math.min(s.fps,60)||60,this.renderTime=new Date().valueOf(),this._animation=this.animation.bind(this),this._update=this.update.bind(this),this.onInitialize(this.options.onInitialize),this.options.onRender&&this.renderArr.push(this.options.onRender),this.stateManager=new l2({gl:this.gl}),this.pickFBO=new La(this.gl),this.transferOptions={},this.bind()}return Mr(d,[{key:"bind",value:function(){var p=this,s=this.map;s.onResize(function(){p.changeSize(),p.render()}),s.onUpdate(this._update),s.onClick&&s.onClick(function(h){p.onClick&&p.onClick(h)}),s.onDblClick&&s.onDblClick(function(h){p.onDblClick&&p.onDblClick(h)}),s.onRightClick&&s.onRightClick(function(h){p.onRightClick&&p.onRightClick(h)}),s.onMousemove&&s.onMousemove(function(h){p.onMousemove&&p.onMousemove(h)}),this.options.canvas||s.getContainer().appendChild(this.canvas)}},{key:"unbind",value:function(){var p=this.map;p.unbind&&p.unbind()}},{key:"setOptions",value:function(p){this.options=p}},{key:"onInitialize",value:function(p){p&&(this.transferOptions=p.bind(this)(this.gl)||{})}},{key:"bindFramebuffer",value:function(p){var s=this.gl;p?s.bindFramebuffer(s.FRAMEBUFFER,p.framebuffer):s.bindFramebuffer(s.FRAMEBUFFER,null)}},{key:"saveFramebuffer",value:function(){var p=this.gl;this.preFramebuffer=p.getParameter(p.FRAMEBUFFER_BINDING)}},{key:"restoreFramebuffer",value:function(){var p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,this.preFramebuffer)}},{key:"onRender",value:function(p){this.renderArr.push(p)}},{key:"changeSize",value:function(){var p=this.canvas,s=this.options;if(p){var h=p.style,_=this.map.getSize(),x=this._dpr;p.width=_.width*x,p.height=_.height*x,h.cssText="position: absolute;left:0;top:0;width:"+_.width+"px;height:"+_.height+"px;z-index:2;",s.mapType!=="cesium"||s.canvas||(h.pointerEvents="none"),this.gl.viewport(0,0,p.width,p.height),this.pickFBO=new La(this.gl)}}},{key:"update",value:function(){this.options.autoUpdate===!1||this.isAnimation&&60<=this.fps||this.render()}},{key:"pixelToPointIn",value:function(p){return this.map.pixelToPointIn(p)}},{key:"render",value:function(){if(this.map&&this.gl){var p=this.options,s=this.projectionMatrix,h=this.viewMatrix;if(p.mapType==="three")h=this.map.map.camera,s=h.projectionMatrix.elements,h=h.matrixWorldInverse.elements;else if(p.mapType==="cesium"){h=this.map.map;var _=h.camera.frustum.projectionMatrix;s=new Float32Array([_[0],_[1],_[2],_[3],_[4],_[5],_[6],_[7],_[8],_[9],_[10],_[11],_[12],_[13],_[14],_[15]]),_=h.camera.viewMatrix,h=new Float32Array([_[0],_[1],_[2],_[3],_[4],_[5],_[6],_[7],_[8],_[9],_[10],_[11],_[12],_[13],_[14],_[15]])}else this.map.map.mapType==="B_EARTH_MAP"?(s=this.map.map.getEarth().scene._camera.getProjectionMatrix(),h=this.map.map.getEarth().scene._camera.getModelViewMatrix()):(this.updateProjectionMatrix(),this.updateModelViewMatrix());for(_=Er.multiply(this.matrix,s,h),Lr(this.transferOptions,{gl:this.gl,matrix:_,pointToPixelMatrix:this.pointToPixelMatrix,pixelToViewMatrix:this.pixelToViewMatrix,projectionMatrix:s,orthoMatrix:this.orthoMatrix,viewMatrix:h,stateManager:this.stateManager}),p.mapType!=="three"&&p.mapType!=="cesium"&&p.autoUpdate!==!1&&this.clear(),p=0;p<this.renderArr.length;p++)this.renderArr[p]&&this.renderArr[p].bind(this)(this.transferOptions)}}},{key:"clear",value:function(p){var s=this.gl,h=this.options.clearColor||[0,0,0,0];s.clearColor(h[0],h[1],h[2],h[3]),p&&(p instanceof Array||(p=W(p).unitArray()),s.clearColor(p[0],p[1],p[2],p[3])),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT)}},{key:"updateProjectionMatrix",value:function(){var p=this.gl.canvas.width/this.gl.canvas.height,s=this.options.cameraNear||1,h=this.options.cameraFar||4e3;Er.perspective(this.projectionMatrix,he(this.fovy),p,s,h),p=this.map.getSize(),Er.ortho(this.orthoMatrix,-p.width/2,p.width/2,-p.height/2,p.height/2,s,h)}},{key:"updateModelViewMatrix",value:function(){var p=this.map,s=this.viewMatrix,h=this.pointToPixelMatrix,_=this.pixelToViewMatrix;Er.identity(s),Er.identity(h),Er.identity(_);var x=p.getSize();x=Math.round(-x.height/(2*Math.tan(he(this.fovy)/2))),Er.translate(_,_,[0,0,x]),Er.rotate(_,_,he(p.getTilt()),[-1,0,0]),Er.rotate(_,_,he(p.getHeading()),[0,0,-1]),x=p.getCenter();var S=this.options.pointOffset||[0,0];p=p.getZoomUnits(),Er.translate(h,h,[(S[0]-x.lng)/p,(S[1]-x.lat)/p,0]),p=1/p,Er.scale(h,h,[p,p,p]),Er.multiply(s,_,h)}},{key:"destroy",value:function(){this.stopAnimation(),this.unbind();var p=this.gl.getExtension("WEBGL_lose_context");p&&p.loseContext(),this.canvas.remove(),this.gl=this.canvas=null}},{key:"animation",value:function(){if(this.isAnimation){if(60<=this.fps)this.render();else{var p=new Date().valueOf(),s=Math.floor(1e3/this.fps),h=p-this.renderTime;h>s&&(this.render(),this.renderTime=p-h%s)}window.requestAnimationFrame(this._animation)}}},{key:"startAnimation",value:function(){this.isAnimation||(this.isAnimation=!0,window.requestAnimationFrame(this._animation))}},{key:"stopAnimation",value:function(){this.isAnimation=!1}}]),d}(),of=function(){function d(p){hr(this,d),this.layers=[],this.options=p,this.webglLayer=p.webglLayer}return Mr(d,[{key:"addLayer",value:function(p){for(var s=!1,h=0;h<this.layers.length;h++)if(this.layers[h]===p){s=!0;break}s||(p.map=this.webglLayer.map,p.layerType==="threeLayer"?(p.setWebglLayer(this.webglLayer),s=p.getThreeLayer(),this.addLayer(s),p.initialize&&p.initialize(s)):(p.setWebglLayer(this.webglLayer),p.commonInitialize&&p.commonInitialize(this.webglLayer.gl),p.initialize&&p.initialize(this.webglLayer.gl),p.onOptionsChanged(p.getOptions(),{}),p.onDataChanged(p.getData()),p.onChanged(p.getOptions(),p.getData())),this.putInLayer(p)),this.options.autoUpdate&&(this.isRequestAnimation()?this.webglLayer.startAnimation():this.webglLayer.stopAnimation()),this.webglLayer.render()}},{key:"putInLayer",value:function(p){p.options.renderOrder===void 0&&(p.options.renderOrder=this.layers.length),this.layers.push(p),this.layers=this.layers.sort(function(s,h){return s.options.renderOrder-h.options.renderOrder})}},{key:"removeLayer",value:function(p){for(var s=0;s<this.layers.length;s++)this.layers[s]===p&&this.layers.splice(s,1);this.options.autoUpdate&&(this.isRequestAnimation()?this.webglLayer.startAnimation():this.webglLayer.stopAnimation()),this.webglLayer.render()}},{key:"showLayer",value:function(p){for(var s=0;s<this.layers.length;s++)this.layers[s]===p&&p.show();this.options.autoUpdate&&(this.isRequestAnimation()?this.webglLayer.startAnimation():this.webglLayer.stopAnimation()),this.webglLayer.render()}},{key:"hideLayer",value:function(p){for(var s=0;s<this.layers.length;s++)this.layers[s]===p&&p.hide();this.options.autoUpdate&&(this.isRequestAnimation()?this.webglLayer.startAnimation():this.webglLayer.stopAnimation()),this.webglLayer.render()}},{key:"removeAllLayers",value:function(){this.layers=[],this.webglLayer.stopAnimation(),this.webglLayer.render()}},{key:"destroyAllLayers",value:function(){for(var p=0;p<this.layers.length;p++){var s=this.layers[p];s.destroy&&s.destroy()}}},{key:"getAllLayers",value:function(){return this.layers}},{key:"getAllThreeLayers",value:function(){for(var p=[],s=0;s<this.layers.length;s++){var h=this.layers[s];h.layerType==="ThreeLayer"&&p.push(h)}return p}},{key:"isRequestAnimation",value:function(){for(var p=!1,s=0;s<this.layers.length;s++)if(this.layers[s].isRequestAnimation()){p=!0;break}return p}},{key:"beforeRender",value:function(p){p.gl&&this.webglLayer.stateManager.setDefaultState()}},{key:"afterRender",value:function(p){(p=p.gl)&&(p.bindBuffer(p.ARRAY_BUFFER,null),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,null),p.useProgram(null))}},{key:"renderGLLayers",value:function(p){this.webglLayer.stateManager.save();for(var s=0;s<this.layers.length;s++){var h=this.layers[s];if(h._visible===!0&&h.layerType!=="threeLayer"&&h.layerType!=="ThreeLayer"){var _=h.map.getZoom(),x=h.getOptions().zoomThreshold;x&&(_<x[0]||_>=x[1])||(this.beforeRender(p),h.render(p),this.afterRender(p))}}this.webglLayer.stateManager.restore()}},{key:"renderThreeLayer",value:function(p){this.webglLayer.stateManager.save(),this.webglLayer.stateManager.setState({blendFunc:[p.gl.SRC_ALPHA,p.gl.ONE],depthMask:!1,depthTest:!0,depthFunc:p.gl.LESS,cullFace:!1});for(var s=0;s<this.layers.length;s++){var h=this.layers[s];if(h._visible===!0&&h.layerType==="ThreeLayer"){var _=h.map.getZoom(),x=h.getOptions().zoomThreshold;x&&(_<x[0]||_>=x[1])||h.render(p)}}this.webglLayer.stateManager.restore()}},{key:"renderThreeLayers",value:function(p){this.webglLayer.stateManager.save(),this.webglLayer.stateManager.setState({blendFunc:[p.gl.SRC_ALPHA,p.gl.ONE],depthMask:!1,depthTest:!0,depthFunc:p.gl.LESS,cullFace:!1});for(var s=0;s<this.layers.length;s++){var h=this.layers[s];if(h._visible===!0&&h.layerType==="threeLayer"){var _=h.map.getZoom(),x=h.getOptions().zoomThreshold;x&&(_<x[0]||_>=x[1])||h.render(p)}}this.webglLayer.stateManager.restore()}},{key:"onClick",value:function(p){for(var s=this.layers.length-1;0<=s;s--){var h=this.layers[s];if(h._visible===!0&&h.layerType!=="threeLayer"&&h.layerType!=="ThreeLayer"){var _=h.map.getZoom(),x=h.getOptions().zoomThreshold;if((!x||!(_<=x[0]||_>=x[1]))&&h.options.enablePicked&&h.options.onClick&&h.pick&&(_=h.pick(p.x,p.y,"onClick"),h.options.onClick(_,p),h.options.autoSelect&&this.webglLayer.render(),p.cancelBubble===!0))break}}}},{key:"onDblClick",value:function(p){for(var s=this.layers.length-1;0<=s;s--){var h=this.layers[s];if(h._visible===!0&&h.layerType!=="threeLayer"&&h.layerType!=="ThreeLayer"){var _=h.map.getZoom(),x=h.getOptions().zoomThreshold;if((!x||!(_<=x[0]||_>=x[1]))&&h.options.enablePicked&&h.options.onDblClick&&h.pick&&(_=h.pick(p.x,p.y,"onDblClick"),h.options.onDblClick(_,p),h.options.autoSelect&&this.webglLayer.render(),p.cancelBubble===!0))break}}}},{key:"onRightClick",value:function(p){for(var s=this.layers.length-1;0<=s;s--){var h=this.layers[s];if(h._visible===!0&&h.layerType!=="threeLayer"&&h.layerType!=="ThreeLayer"){var _=h.map.getZoom(),x=h.getOptions().zoomThreshold;if((!x||!(_<=x[0]||_>=x[1]))&&h.options.enablePicked&&h.options.onRightClick&&h.pick&&(_=h.pick(p.x,p.y,"onRightClick"),h.options.onRightClick(_,p),h.options.autoSelect&&this.webglLayer.render(),p.cancelBubble===!0))break}}}},{key:"onMousemove",value:function(p){for(var s=!1,h=!1,_=this.layers.length-1;0<=_;_--){var x=this.layers[_];if(x._visible===!0&&x.layerType!=="threeLayer"&&x.layerType!=="ThreeLayer"){var S=x.map.getZoom(),C=x.getOptions().zoomThreshold;if((!C||!(S<=C[0]||S>=C[1]))&&x.options.enablePicked&&x.pick&&(x.options.onMousemove||x.options.autoSelect)&&(S=x.pick(p.x,p.y,"onMousemove"),!h&&(this.webglLayer.map.map.platform.style.cursor="default",h=S.dataIndex!==-1)&&(this.webglLayer.map.map.platform.style.cursor="pointer"),x.options.onMousemove&&x.options.onMousemove(S,p),x.options.autoSelect&&(s=!0),p.cancelBubble===!0))break}}s&&(this.webglLayer.isAnimation||this.webglLayer.render())}},{key:"destroy",value:function(){this.destroyAllLayers(),this.removeAllLayers()}}]),d}(),d2=function(){function d(p){var s=this;hr(this,d),this.options={autoUpdate:!0},this._visible=!0,Lr(this.options,p);var h=p.pointOffset;this.webglLayer=p.webglLayer||new Rp(p.map,this.options),this.layerManager=new of({autoUpdate:this.options.autoUpdate,webglLayer:this.webglLayer}),this.effectManager=new Xc(this.webglLayer.gl),this.webglRender={render:function(){}},this.options.effects&&this.effectManager.setEffects([this.webglRender].concat(this.options.effects)),this.webglLayer.onRender(function(_){s._render(_)}),this.webglLayer.onClick=function(_){s._visible&&s.layerManager.onClick(_)},this.webglLayer.onDblClick=function(_){s._visible&&s.layerManager.onDblClick(_)},this.webglLayer.onRightClick=function(_){s._visible&&s.layerManager.onRightClick(_)},this.webglLayer.onMousemove=function(_){s._visible&&s.layerManager.onMousemove(_)},h||this.webglLayer.options.mapType==="cesium"||(h=this.webglLayer.map.getCenter(),this.webglLayer.options.pointOffset=[h.lng,h.lat]),this.webglLayer.map.onResize(function(){s.effectManager.onResize()}),(this.postProcessing=p.postProcessing)&&(this.postProcessing.setWebglLayer(this.webglLayer),p=this.postProcessing.getThreeLayer(),this.addLayer(p),this.postProcessing.initialize(p),p.postProcessing=this.postProcessing)}return Mr(d,[{key:"renderCanvas",value:function(p){var s=this;this.postProcessing?this.postProcessing.addRender(function(){s.layerManager.renderGLLayers(p)}):this.layerManager.renderGLLayers(p),this.layerManager.renderThreeLayers(p),this.layerManager.renderThreeLayer(p)}},{key:"render",value:function(){this.webglLayer&&this.webglLayer.render()}},{key:"_render",value:function(p){var s=this;if(this._visible){var h=this.options.effects;h&&0<h.length?(this.webglRender.render=function(){s.renderCanvas(p)},this.effectManager.render()):(this.webglLayer.saveFramebuffer(),this.renderCanvas(p),this.webglLayer.restoreFramebuffer())}}},{key:"onRender",value:function(p){this.webglLayer.onRender(p)}},{key:"destroy",value:function(){this.stopAnimation(),this.layerManager.destroy(),this.effectManager.destroy(),this.webglLayer.destroy()}},{key:"isRequestAnimation",value:function(){return this.layerManager.isRequestAnimation()}},{key:"startAnimation",value:function(){this.webglLayer.startAnimation()}},{key:"stopAnimation",value:function(){this.webglLayer.stopAnimation()}},{key:"show",value:function(){this._visible!==!0&&(this._visible=!0,this.webglLayer.render(),this.isRequestAnimation()&&this.startAnimation())}},{key:"hide",value:function(){this._visible!==!1&&(this._visible=!1,this.stopAnimation(),this.webglLayer.clear())}},{key:"showLayer",value:function(p){this.layerManager.showLayer(p)}},{key:"hideLayer",value:function(p){this.layerManager.hideLayer(p)}},{key:"add",value:function(p){this.addLayer(p)}},{key:"remove",value:function(p){this.removeLayer(p)}},{key:"addLayer",value:function(p){this.layerManager.addLayer(p)}},{key:"removeLayer",value:function(p){this.layerManager.removeLayer(p)}},{key:"removeAllLayers",value:function(){this.layerManager.removeAllLayers()}},{key:"getAllLayers",value:function(){return this.layerManager.getAllLayers()}},{key:"getAllThreeLayers",value:function(){return this.layerManager.getAllThreeLayers()}}]),d}(),k0=function(){function d(p){hr(this,d),this._visible=!0,this.options=this.getCommonDefaultOptions(),this.options=Lr(this.options,this.getDefaultOptions()),this.autoUpdate=!1,this.options=Lr(this.options,p),this.options.data&&(this.data=this.options.data,delete this.options.data)}return Mr(d,[{key:"getCommonDefaultOptions",value:function(){return{}}},{key:"getDefaultOptions",value:function(){return{}}},{key:"initialize",value:function(p){}},{key:"destroy",value:function(){this.onDestroy&&this.onDestroy()}},{key:"show",value:function(){this._visible=!0}},{key:"hide",value:function(){this._visible=!1}},{key:"render",value:function(){}},{key:"clear",value:function(){this.setData([])}},{key:"setData",value:function(p,s){s=s||{},this.data=p,this.onDataChanged&&this.onDataChanged(this.getData()),this.onChanged&&this.onChanged(this.getOptions(),this.getData(),s),s.autoRender!==!1&&this.webglLayer&&this.webglLayer.render()}},{key:"getData",value:function(){return this.data||[]}},{key:"setOptions",value:function(p,s){p=p||{},s=s||{};var h=Lr({},this.getOptions());Lr(this.options,p),this.onOptionsChanged&&this.onOptionsChanged(this.getOptions(),h),this.onChanged&&this.onChanged(this.getOptions(),this.getData(),s),p.data?(this.setData(p.data,s),delete p.data):s.autoRender!==!1&&this.webglLayer&&this.webglLayer.render()}},{key:"getOptions",value:function(){return this.options||{}}},{key:"onOptionsChanged",value:function(p,s){}},{key:"onDataChanged",value:function(p){}},{key:"onChanged",value:function(p,s){}},{key:"onDestroy",value:function(){}},{key:"lnglatToMercator",value:function(p,s){}},{key:"setWebglLayer",value:function(p){this.webglLayer=p}},{key:"getWebglLayer",value:function(){return this.webglLayer}},{key:"isRequestAnimation",value:function(){return this.autoUpdate}}]),d}(),ki=function(d){function p(s){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s)),s.pickedColor=[-1,-1,-1],s}return sn(p,d),Mr(p,[{key:"getCommonDefaultOptions",value:function(){return{pickWidth:1,pickHeight:1,blend:"default",zIndex:0,zoomThreshold:[0,30],repeat:!1,enablePicked:!1,autoSelect:!1,selectedIndex:-1,selectedColor:"rgba(20, 20, 200, 1.0)"}}},{key:"commonInitialize",value:function(s){var h=this.getOptions();this.gl=s,h.enablePicked&&(this.pickBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}))}},{key:"getCommonAttributes",value:function(){var s=[];return this.getOptions().enablePicked&&s.push({name:"aPickColor",buffer:this.pickBuffer,size:3,type:"FLOAT",stride:12,offset:0}),s}},{key:"getProperty",value:function(s,h,_){return Object.prototype.toString.call(h)==="[object Function]"?h(_):(h=_[s]||h,"properties"in _&&s in _.properties&&(h=_.properties[s]),h)}},{key:"normizedColor",value:function(s){var h=s;return s instanceof Array||(h=W(s).unitArray()),h[3]===void 0&&(h[3]=1),h}},{key:"normizedPoint",value:function(s){var h=this.getPointOffset();if(!s||s[0]===void 0||s[1]===void 0)return[h[0],h[1],0];var _=Number(s[0]),x=Number(s[1]);-180<=_&&180>=_&&-90<=x&&90>=x&&(x=this.webglLayer.map.lnglatToMercator(_,x),_=x[0],x=x[1]);var S=Number(s[2])||0;return this.webglLayer&&this.webglLayer.options.mapType==="cesium"&&window.Cesium?(_=this.convertLngLat([_,x]),S=window.Cesium.Cartesian3.fromDegrees(_[0],_[1],S),_=S.x,x=S.y,S=S.z):this.webglLayer&&this.webglLayer.options.mapType==="bmapgl"&&this.webglLayer.map.map.mapType==="B_EARTH_MAP"&&(_=this.convertLngLat([_,x]),S=this.webglLayer.map.map.getEarth().scene.fromLatLngToXYZ({lng:_[0],lat:_[1]}),_=S.x,x=S.y,S=S.z),3<s.length?[_-h[0],x-h[1],S].concat(Yn(s.slice(3))):[_-h[0],x-h[1],S]}},{key:"convertLngLat",value:function(s){return[s[0]/2003750834e-2*180,180/Math.PI*(2*Math.atan(Math.exp(s[1]/2003750834e-2*180*Math.PI/180))-Math.PI/2)]}},{key:"getPointOffset",value:function(){var s=[0,0],h=this.getOptions();return this.webglLayer&&this.webglLayer.options.pointOffset?s=this.webglLayer.options.pointOffset:h.pointOffset&&(s=h.pointOffset),s}},{key:"indexToRgb",value:function(s){s++;var h=Math.floor(s/65536);s-=65536*h;var _=Math.floor(s/256);return[s-256*_,_,h]}},{key:"rgbToIndex",value:function(s){for(var h=s.length/4,_=Math.floor(h/2),x=function(Z){return s[Z]+256*s[Z+1]+65536*s[Z+2]-1},S=0;;S++){var C=_+S,R=_-S;if(C===R){if(C=x(4*C),-1<C)return C}else{if(C<h){var H=x(4*C);if(-1<H)return H}if(0<=R&&(H=x(4*R),-1<H))return H;if(C>=h&&0>R)break}}return-1}},{key:"getCommonUniforms",value:function(s){s=s.isPickRender;var h=this.getOptions(),_={};if(h.enablePicked){var x=0<=h.selectedIndex?h.selectedIndex:-1;x=h.autoSelect?this.pickedColor:this.indexToRgb(x),_=Lr(_,{uSelectedColor:this.normizedColor(h.selectedColor),uEnablePicked:h.enablePicked,uPickedColor:x.map(function(S){return S/255}),uIsPickRender:!!s})}return _}},{key:"pick",value:function(s,h,_){var x=this.getOptions(),S=this.gl,C=this.webglLayer._dpr;this.webglLayer.saveFramebuffer(),this.webglLayer.bindFramebuffer(this.webglLayer.pickFBO),this.webglLayer.clear(),this.render({gl:S,isPickRender:!0,matrix:this.webglLayer.matrix,projectionMatrix:this.webglLayer.projectionMatrix,viewMatrix:this.webglLayer.viewMatrix,orthoMatrix:this.webglLayer.orthoMatrix});var R=new Uint8Array(4*x.pickWidth*x.pickHeight);return S.readPixels(s*C-Math.floor(x.pickWidth/2),S.canvas.height-h*C-Math.floor(x.pickHeight/2),x.pickWidth,x.pickHeight,S.RGBA,S.UNSIGNED_BYTE,R),s=this.rgbToIndex(R),this.pickAfter&&(s=this.pickAfter(R,s+1)),this.setPickedIndex&&this.setPickedIndex(s,_),_=this.getData(),this.pickedColor=[R[0],R[1],R[2]],this.webglLayer.restoreFramebuffer(),{dataIndex:s,dataItem:_[s]}}},{key:"setGLState",value:function(s){this.webglLayer.stateManager.setState(s,this.options)}},{key:"addMultipleCoords",value:function(s,h,_){if(!this.options.repeat||!this.webglLayer||this.webglLayer.options.mapType!=="bmapgl"||this.webglLayer.map.map.mapType==="B_EARTH_MAP")return[s];var x=this.webglLayer.map.map;h=h||x.getZoom();var S=_?x.worldSize(h):4007545274461451e-8;if(h=function(V){return[[V[0]-S,V[1],V[2]||0],[V[0]+S,V[1],V[2]||0]]},s instanceof Array&&!(s[0]instanceof Array))return h=h(s),h=Xi(h,2),[s,h[0],h[1]];if(s instanceof Array&&s[0]instanceof Array&&!(s[0][0]instanceof Array)){_=[],x=[];for(var C=0;C<s.length;C++){var R=h(s[C]);R=Xi(R,2);var H=R[1];_.push(R[0]),x.push(H)}return[s,_,x]}for(_=[],x=[],C=0;C<s.length;C++){R=[],H=[];for(var Z=0;Z<s[C].length;Z++){var P=h(s[C][Z]);P=Xi(P,2);var F=P[1];R.push(P[0]),H.push(F)}_.push(R),x.push(H)}return[s,_,x]}}]),p}(k0),i_=function(d){function p(s){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s)),s.name="CircleLayer",s.bufferData=[],s.initializeTime=new Date,s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{depthWrite:!0,depthTest:!0,size:10,unit:"px",color:"blue",borderWidth:0,borderColor:"#000000",antialias:!0}}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions();this.program=new Jn(this.gl,{vertexShader:`attribute vec3 aPos;attribute float aSize;attribute float aIndex;attribute vec4 aColor;attribute float aBorderWidth;attribute vec4 aBorderColor;varying vec4 vColor;varying vec3 vPosition;varying vec3 vFragPosition;varying float vSize;varying float vBorderWidth;varying vec4 vBorderColor;uniform mat4 uMatrix;uniform float uZoomUnits;uniform vec4 uSelectedColor;void main(){vColor=aColor;vBorderWidth=aBorderWidth*uZoomUnits;vBorderColor=aBorderColor;float x=aPos.x;float y=aPos.y;float z=aPos.z*uZoomUnits;vSize=aSize*uZoomUnits+vBorderWidth;if(aIndex==1.0){x+=vSize;y-=vSize;}else if(aIndex==2.0){x-=vSize;y+=vSize;}else if(aIndex==3.0){x+=vSize;y+=vSize;}else{x-=vSize;y-=vSize;}vPosition=aPos;vFragPosition=vec3(x,y,z);gl_Position=uMatrix*vec4(vFragPosition,1.0);
#if defined(PICK)
if(mapvIsPicked()){vColor=uSelectedColor;}
#endif
}`,fragmentShader:"varying vec3 vPosition;varying float vSize;varying vec3 vFragPosition;varying vec4 vColor;varying float vBorderWidth;varying vec4 vBorderColor;uniform mat4 uMatrix;uniform float uTime;uniform float duration;uniform float trail;uniform float lineWidth;uniform float uAntiAliasing;void main(){float d=distance(vFragPosition.xy,vPosition.xy);if(d>vSize){discard;}vec4 color=vColor;float r=vSize-vBorderWidth;if(vBorderWidth>0.0){if(d>r){color=vBorderColor;}else if(uAntiAliasing==1.0&&d>0.95*r){color=vBorderColor;float st=1.0-smoothstep(0.95*r,r,d);color.r+=(vColor.r-vBorderColor.r)*st;color.g+=(vColor.g-vBorderColor.g)*st;color.b+=(vColor.b-vBorderColor.b)*st;color.a+=(vColor.a-vBorderColor.a)*st;}}if(uAntiAliasing==1.0&&d>0.95*vSize&&d<=vSize){color.a*=1.0-smoothstep(0.95*vSize,vSize,d);}gl_FragColor=color;}",defines:h.enablePicked?["PICK"]:[]},this),this.buffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Br({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),h=Float32Array.BYTES_PER_ELEMENT;var _=14*h;h=[{stride:_,name:"aPos",buffer:this.buffer,size:3,type:"FLOAT",offset:0},{stride:_,name:"aSize",buffer:this.buffer,size:1,type:"FLOAT",offset:3*h},{stride:_,name:"aIndex",buffer:this.buffer,size:1,type:"FLOAT",offset:4*h},{stride:_,name:"aColor",buffer:this.buffer,size:4,type:"FLOAT",offset:5*h},{stride:_,name:"aBorderWidth",buffer:this.buffer,size:1,type:"FLOAT",offset:9*h},{stride:_,name:"aBorderColor",buffer:this.buffer,size:4,type:"FLOAT",offset:10*h}],h=h.concat(this.getCommonAttributes()),this.vertexArray=new Yi({gl:s,program:this.program,attributes:h})}},{key:"onChanged",value:function(s,h){this.gl&&h&&(this.uniforms={},this.data=h,this.processData(),s.enablePicked&&this.parsePickData(h))}},{key:"processData",value:function(){var s=this,h=[],_=[];this.data.forEach(function(x,S){var C=x.properties||{},R=function(j){return x[j]||C[j]||s.options[j]},H=R("color"),Z=R("size"),P=R("borderWidth");R=R("borderColor"),H=s.normizedColor(H),R=s.normizedColor(R);for(var F=s.normizedPoint(x.geometry.coordinates),V=0;4>V;V++)h.push(F[0],F[1],F[2]||0,Z,V),h.push(H[0],H[1],H[2],H[3]),h.push(P,R[0],R[1],R[2],R[3]);H=4*S,0<S&&_.push(H-1,H),_.push(H,H+1,H+2,H+3)}),this.bufferData=h,this.indexData=_,this.buffer.updateData(new Float32Array(h)),this.indexBuffer.updateData(new Uint32Array(_))}},{key:"parsePickData",value:function(s){var h=[];if(this.getOptions().enablePicked){for(var _=0;_<s.length;_++){var x=this.indexToRgb(_);h.push(x[0]/255,x[1]/255,x[2]/255),h.push(x[0]/255,x[1]/255,x[2]/255),h.push(x[0]/255,x[1]/255,x[2]/255),h.push(x[0]/255,x[1]/255,x[2]/255)}this.pickBuffer.updateData(new Float32Array(h))}}},{key:"render",value:function(s){var h=this.getOptions(),_=this.program,x=s.gl,S=s.matrix;this.setGLState({blend:!0,blendEquation:x.FUNC_ADD,blendFunc:Cr(x,h.blend||"lighter"),depthTest:h.depthTest,depthMask:h.depthWrite}),_.use(x),this.vertexArray.bind(),this.indexBuffer.bind(),h=this.map.getZoomUnits(),Lr(this.uniforms,this.getCommonUniforms(s),{uZoomUnits:this.options.unit==="px"?h:1,uMatrix:S,uAntiAliasing:this.options.antialias?1:0}),_.setUniforms(this.uniforms),x.drawElements(x.TRIANGLE_STRIP,this.indexData.length,x.UNSIGNED_INT,0)}}]),p}(ki),H0={wave:"varying vec4 vPosition;varying float vSize;varying vec4 vFragPosition;varying vec4 vColor;varying float vStartTime;varying float vRadius;uniform mat4 uMatrix;uniform float uTime;uniform float duration;uniform float trail;uniform float uAntiAliasing;varying float vWidth;void main(){float d=distance(vFragPosition.xy,vPosition.xy);if(d>=vRadius){discard;}vec4 color=vColor;float R=vRadius;float center=vSize;float time=vStartTime+uTime;float alpha=sin((R-d)/R*trail*2.0*3.14+time/duration);if(d<=center){if(uAntiAliasing==1.0&&d>0.9*center&&d<=center){if(alpha>=0.5){color.a=0.9;}else{color.a=1.0-smoothstep(0.9*center,center,d);}}}else{if(alpha>=0.5){color.a=0.9;if(uAntiAliasing==1.0){if(alpha>=0.5&&alpha<=0.6){color.a*=smoothstep(0.0,0.1,alpha-0.5);}if(d>=0.98*R&&d<=R){color.a*=1.0-smoothstep(0.98,1.0,d/R);}}}else{color.a=0.0;}}gl_FragColor=color;}",bubble:"varying vec4 vPosition;varying float vSize;varying vec4 vFragPosition;varying vec4 vColor;varying float vStartTime;varying float vRadius;uniform mat4 uMatrix;uniform float uTime;uniform float duration;uniform float trail;uniform float uAntiAliasing;varying float vWidth;void main(){float d=distance(vFragPosition.xy,vPosition.xy);if(d>=vRadius){discard;}float time=vStartTime+uTime;float range=mod(time,(duration+trail));float percent=0.0;if(range<=duration){percent=range/duration;}else{percent=1.0;}float center=vSize;float R=vRadius;float r=R*percent;vec4 color=vColor;if(d<=center){if(uAntiAliasing==1.0&&d>0.9*center&&d<=center){color.a=1.0-smoothstep(0.9*center,center,d);}}else{if(d<r){color.a=smoothstep(0.1,0.9,pow(d/r,2.0)*0.9);if(uAntiAliasing==1.0&&d>=0.9*r&&d<=r){color.a*=1.0-smoothstep(0.9,1.0,d/r);}if(range>duration){color.a*=1.0-(range-duration)/trail;}}else{color.a=0.0;}}gl_FragColor=color;}",breath:"varying vec4 vPosition;varying vec4 vFragPosition;varying vec4 vColor;varying float vStartTime;varying float vRadius;uniform float uTime;uniform float duration;uniform float trail;uniform float uAntiAliasing;void main(){float d=distance(vFragPosition.xy,vPosition.xy);if(d>=vRadius){discard;}vec4 color=vColor;if(uAntiAliasing==1.0&&d>0.9*vRadius&&d<=vRadius){color.a=1.0-smoothstep(0.9*vRadius,vRadius,d);}float time=vStartTime+uTime;float range=mod(time,(duration+trail));float percent=0.0;if(range<=duration){percent=range/duration;}else{percent=1.0;}color.a*=abs(1.0-percent*2.0)+0.2;gl_FragColor=color;}",radar:"varying vec4 vPosition;varying float vSize;varying vec4 vFragPosition;varying vec4 vColor;varying float vStartTime;varying float vRadius;uniform mat4 uMatrix;uniform float uTime;uniform float duration;uniform float trail;uniform float uAntiAliasing;varying float vWidth;void main(){float d=distance(vFragPosition.xy,vPosition.xy);if(d>=vRadius){discard;}float time=vStartTime+uTime;float range=mod(time,duration);float percent=range/duration;float center=vSize;float startDeg=360.0*percent;vec4 color=vColor;float deltaX=vFragPosition.x-vPosition.x;float deltaY=vFragPosition.y-vPosition.y;float currDeg=degrees(atan(deltaX/deltaY));if(deltaX>=0.0&&deltaY<=0.0){currDeg=180.0+currDeg;}if(deltaX<=0.0&&deltaY<=0.0){currDeg=180.0+currDeg;}if(deltaX<=0.0&&deltaY>=0.0){currDeg=360.0+currDeg;}float maxDeg=trail;if(trail<0.0){currDeg=-currDeg;maxDeg=-trail;}float modDeg=mod((currDeg-startDeg),360.0);if(modDeg<maxDeg){color.a=modDeg/maxDeg;}else{color.a=0.0;}if(uAntiAliasing==1.0&&d>0.95*vRadius&&d<=vRadius){color.a=color.a-smoothstep(0.95*vRadius,vRadius,d);}gl_FragColor=color;}"},o_=function(d){function p(s){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s)),s.name="RippleCircleLayer",s.autoUpdate=!0,s.bufferData=[],s.initializeTime=new Date,s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){var s=1;return this.options.type==="radar"&&(s=120),{depthWrite:!1,depthTest:!0,type:"bubble",size:10,duration:1,trail:s,unit:"px",random:!0,color:"blue",antialias:!0,radius:function(h){return 2*h}}}},{key:"initialize",value:function(s){this.gl=s,this.program=new Jn(this.gl,{vertexShader:`attribute vec3 aPos;attribute float aSize;attribute float aIndex;attribute vec4 aColor;attribute float aStartTime;attribute float aRadius;varying vec4 vColor;varying vec4 vPosition;varying vec4 vFragPosition;varying float vSize;varying float vWidth;varying float vStartTime;varying float vRadius;uniform mat4 uMatrix;uniform float uZoomUnits;uniform vec4 uSelectedColor;void main(){vColor=aColor;vStartTime=aStartTime;vSize=aSize*uZoomUnits;vRadius=aRadius*uZoomUnits;float x=aPos.x;float y=aPos.y;float z=aPos.z*uZoomUnits;float R=vRadius;if(aIndex==1.0){x+=R;y-=R;}else if(aIndex==2.0){x-=R;y+=R;}else if(aIndex==3.0){x+=R;y+=R;}else{x-=R;y-=R;}vPosition=vec4(aPos.xy,z,1.0);vFragPosition=vec4(x,y,z,1.0);gl_Position=uMatrix*vFragPosition;
#if defined(PICK)
if(mapvIsPicked()){vColor=uSelectedColor;}
#endif
}`,fragmentShader:H0[this.options.type]||"bubble",defines:this.options.enablePicked?["PICK"]:[]},this),this.buffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Br({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"});var h=[{stride:44,name:"aPos",buffer:this.buffer,size:3,type:"FLOAT",offset:0},{stride:44,name:"aSize",buffer:this.buffer,size:1,type:"FLOAT",offset:12},{stride:44,name:"aIndex",buffer:this.buffer,size:1,type:"FLOAT",offset:16},{stride:44,name:"aColor",buffer:this.buffer,size:4,type:"FLOAT",offset:20},{stride:44,name:"aRadius",buffer:this.buffer,size:1,type:"FLOAT",offset:36},{stride:44,name:"aStartTime",buffer:this.buffer,size:1,type:"FLOAT",offset:40}];h=h.concat(this.getCommonAttributes()),this.vertexArray=new Yi({gl:s,program:this.program,attributes:h})}},{key:"onChanged",value:function(s,h){this.gl&&h&&(this.uniforms={duration:s.duration,trail:s.trail},this.data=h,this.processData(),s.enablePicked&&this.parsePickData(h))}},{key:"processData",value:function(){var s=this,h=[],_=[];this.data.forEach(function(x,S){var C=x.size||s.options.size,R=x.radius||s.options.radius||1.618*C;typeof R=="function"&&(R=R(C));var H=x.color||s.options.color;H=s.normizedColor(H),x=s.normizedPoint(x.geometry.coordinates);for(var Z=s.options.random?Math.random()*s.data.length*9999:0,P=0;4>P;P++)h.push(x[0],x[1],x[2]||0,C,P),h.push(H[0],H[1],H[2],H[3]),h.push(R),h.push(Z);C=4*S,0<S&&_.push(C-1,C),_.push(C,C+1,C+2,C+3)}),this.bufferData=h,this.indexData=_,this.buffer.updateData(new Float32Array(h)),this.indexBuffer.updateData(new Uint32Array(_))}},{key:"parsePickData",value:function(s){var h=[];if(this.getOptions().enablePicked){for(var _=0;_<s.length;_++){var x=this.indexToRgb(_);h.push(x[0]/255,x[1]/255,x[2]/255),h.push(x[0]/255,x[1]/255,x[2]/255),h.push(x[0]/255,x[1]/255,x[2]/255),h.push(x[0]/255,x[1]/255,x[2]/255)}this.pickBuffer.updateData(new Float32Array(h))}}},{key:"render",value:function(s){var h=this.getOptions(),_=this.program,x=s.gl,S=s.matrix;_.use(x);var C=this.map.getZoomUnits();Lr(this.uniforms,this.getCommonUniforms(s),{uTime:(new Date-this.initializeTime)/1e3,uZoomUnits:h.unit==="m"?1:C,uMatrix:S,uAntiAliasing:h.antialias?1:0}),_.setUniforms(this.uniforms),this.setGLState({blend:!0,blendEquation:x.FUNC_ADD,blendFunc:Cr(x,h.blend||"lighter"),depthTest:h.depthTest,depthMask:h.depthWrite}),0<this.indexData.length&&(this.vertexArray.bind(),this.indexBuffer.bind(),x.drawElements(x.TRIANGLE_STRIP,this.indexData.length,x.UNSIGNED_INT,0))}}]),p}(ki),a_=Eo(H0),p2=M(function(d,p){p.__esModule=!0;var s=fs&&fs.__esModule?fs:{default:fs},h=Ks&&Ks.__esModule?Ks:{default:Ks};p.default=function _(x,S,C){x===null&&(x=Function.prototype);var R=(0,h.default)(x,S);if(R===void 0){if(x=(0,s.default)(x),x!==null)return _(x,S,C)}else return"value"in R?R.value:(S=R.get,S===void 0?void 0:S.call(C))}}),Yl=m(p2);Ut.deviation=function(d,p,s,h){var _=p&&p.length,x=Math.abs(Kn(d,0,_?p[0]*s:d.length,s));if(_){_=0;for(var S=p.length;_<S;_++)x-=Math.abs(Kn(d,p[_]*s,_<S-1?p[_+1]*s:d.length,s))}for(_=p=0;_<h.length;_+=3){S=h[_]*s;var C=h[_+1]*s,R=h[_+2]*s;p+=Math.abs((d[S]-d[R])*(d[C+1]-d[S+1])-(d[S]-d[C])*(d[R+1]-d[S+1]))}return x===0&&p===0?0:Math.abs((p-x)/x)},Ut.flatten=function(d){for(var p=d[0][0].length,s={vertices:[],holes:[],dimensions:p},h=0,_=0;_<d.length;_++){for(var x=0;x<d[_].length;x++)for(var S=0;S<p;S++)s.vertices.push(d[_][x][S]);0<_&&(h+=d[_-1].length,s.holes.push(h))}return s},Ut.default=Ut;var Lp=typeof Lx>"u"?"__target":Lx(),Og=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,Dg=window.URL||window.webkitURL,ec=window.Worker;if(ec){var m2=$i("self.onmessage = function () {}"),g2=new Uint8Array(1);try{if(/(?:Trident|Edge)\/(?:[567]|12)/i.test(navigator.userAgent))throw Error("Not available");var bg=new ec(m2);bg.postMessage(g2,[g2.buffer])}catch{ec=null}finally{Dg.revokeObjectURL(m2),bg&&bg.terminate()}}var s_=new function(d,p){return function(s){var h=this;if(p){if(ec&&!s)return s=(""+p).replace(/^function.+?{/,"").slice(0,-1),s=$i(s),this[Lp]=new ec(s),Dg.revokeObjectURL(s),this[Lp];var _={postMessage:function(x){h.onmessage&&setTimeout(function(){return h.onmessage({data:x,target:_})})}};p.call(_),this.postMessage=function(x){setTimeout(function(){return _.onmessage({data:x,target:h})})},this.isThisThread=!0}else return new ec(d)}}("./worker.js",function(d,p){}),j0={window:1,windowAnimation:2,gradual:3,ripple:4,water:6,repeat:7},Pp=function(d){function p(s,h){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s,h)),s.name="ShapeLayer",s._isShow=!0,h=s.getOptions(),(h.style==="windowAnimation"||h.style==="ripple"||0<h.riseTime)&&(s.autoUpdate=!0),s.selectedColor=[-1,-1,-1],s.textureCache={},s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{color:"rgba(50, 50, 230, 1.0)",opacity:1,height:0,isTextureFull:!1,topColor:"rgba(76, 76, 76, 0.8)",textureRotate:0,textureScale:1,useLight:!0,useTopColor:!1,riseTime:0,polygonOffset:[0,0],depthTest:!0,depthFunc:"LEQUAL",zIndex:0,zFightFactor:0}}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions();this.dataMgr=new ji(this,this.gl),this.texture=null,this.isUseTexture=!1;var _=[];h.enablePicked&&_.push("PICK"),h.texture&&_.push("USE_TEXTURE"),this.program=new Jn(this.gl,{vertexShader:`precision highp float;uniform vec4 uSelectedColor;attribute vec4 a_pos;attribute vec3 a_normal;attribute vec4 a_color;attribute vec4 a_pre_color;attribute float a_height;attribute float a_pre_height;attribute float a_block_index;
#if defined(USE_TEXTURE)
attribute vec2 a_texture_coord;
#endif
uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;uniform mat4 u_normal_matrix;uniform vec3 u_side_light_dir;uniform bool u_use_lighting;uniform bool u_use_texture;uniform vec3 u_ripple_center;uniform float u_radius;uniform float style;uniform float alpha;uniform float time;uniform float dataTime;uniform float riseTime;uniform vec2 uMapCenter;uniform float uMapZoom;uniform float u_zIndex;uniform float u_zFightFactor;varying float v_height;varying vec4 v_color;varying vec3 v_position;varying vec2 v_texture_coord;const vec3 point_color=vec3(0.06,0.06,0.06);const vec3 light_color=vec3(0.53,0.53,0.53);const vec3 light_color_2=vec3(0.4,0.4,0.4);const vec3 uAmbientColor=vec3(0.8,0.8,0.8);const vec3 uLightingDirection=vec3(0.0,1.0,1.0);const vec3 uDirectionalColor=vec3(1.0,1.0,1.0);float getTransitionValue(float pre_value,float to_value,float dataTime,float riseTime){float result=0.0;if(pre_value==to_value){result=to_value;}else{if(riseTime>0.0&&dataTime<riseTime){result=(pre_value+(to_value-pre_value)*(dataTime/riseTime));}else{result=to_value;}}return result;}void main(){vec4 pos=a_pos;pos.z=pos.z+pos.w*getTransitionValue(a_pre_height,a_height,dataTime,riseTime);v_position=pos.xyz;v_height=a_height;
#if defined(USE_TEXTURE)
if(u_use_texture){v_texture_coord=a_texture_coord;}
#endif
pos.z+=u_zIndex;vec4 position=u_proj_matrix*u_mv_matrix*vec4(pos.xyz,1.0);gl_Position=position;if(u_zFightFactor>0.){float v_z_offset=-a_block_index/u_zFightFactor;gl_Position.z=gl_Position.z+v_z_offset;}vec4 icolor=a_color;
#if defined(PICK)
if(mapvIsPicked()){icolor=uSelectedColor;}
#endif
if(u_use_lighting){vec3 N=normalize(vec3(u_normal_matrix*vec4(a_normal,1.0)));vec4 point_dir=u_mv_matrix*vec4(0,1,0,0);vec3 L_point=normalize(point_dir.xyz);float lambert_point=max(0.0,dot(N,-L_point));vec4 light_dir=u_mv_matrix*vec4(u_side_light_dir,0);vec3 L=normalize(light_dir.xyz);float lambert=max(0.0,dot(N,-L));if(pos.z<5.0){float deepGradientColor=(5.0-pos.z)/8.0;lambert=lambert-deepGradientColor;}vec4 light_dir_2=u_mv_matrix*vec4(0,0,-1,0);vec3 L2=normalize(light_dir_2.xyz);float lambert_2=max(0.0,dot(N,-L2));if(a_pre_color.r==a_color.r&&a_pre_color.g==a_color.g&&a_pre_color.b==a_color.b){}else{if(riseTime>0.0&&dataTime<riseTime){icolor.r=a_pre_color.r+(a_color.r-a_pre_color.r)*(dataTime/riseTime);icolor.g=a_pre_color.g+(a_color.g-a_pre_color.g)*(dataTime/riseTime);icolor.b=a_pre_color.b+(a_color.b-a_pre_color.b)*(dataTime/riseTime);}}v_color.rgb=icolor.rgb+icolor.rgb*light_color*lambert+icolor.rgb*light_color_2*lambert_2+icolor.rgb*point_color*lambert_point;v_color.a=icolor.a;if(u_use_texture){mat3 normalMatrix=mat3(u_normal_matrix);vec3 transformedNormal=normalMatrix*a_normal;vec3 dir=uLightingDirection;dir=vec3(normalMatrix*vec3(0.0,-1.0,2.0));float directionalLightWeighting=max(dot(normalize(transformedNormal),normalize(dir)),0.0);vec4 vLightWeighting;vLightWeighting=vec4(uAmbientColor+uDirectionalColor*directionalLightWeighting,1.0);v_color=vLightWeighting;}}else{v_color=icolor;}}`,fragmentShader:"precision highp float;varying vec4 v_color;varying vec3 v_position;varying float v_height;varying vec2 v_texture_coord;uniform vec3 u_ripple_center;uniform vec4 top_color;uniform float u_zoom_units;uniform float u_radius;uniform float style;uniform float alpha;uniform float time;uniform sampler2D u_sampler;uniform bool u_use_lighting;uniform bool u_use_texture;uniform bool u_use_top_color;void main(){vec4 color=vec4(v_color);vec4 textureColor=vec4(1.0,1.0,1.0,1.0);if(u_use_texture){if(style==6.0){float x=v_texture_coord.s;float y=v_texture_coord.t;vec2 cPos=-1.0+2.0*gl_FragCoord.xy/MAPV_resolution;float cLength=length(cPos);vec2 uv=gl_FragCoord.xy/MAPV_resolution+(cPos/cLength)*cos(cLength*12.0-time/1000.0*4.0)*0.03;textureColor=texture2D(u_sampler,uv/2.0+vec2(x,y));}else if(style==7.0){float tWidth=1.*u_zoom_units;float deltaX=mod(v_texture_coord.x,tWidth);float deltaY=mod(v_texture_coord.y,tWidth);if(deltaX>=0.&&deltaX<=tWidth){vec2 uv=vec2(deltaX,deltaY)/tWidth;vec4 texture=texture2D(u_sampler,uv);textureColor=texture.a>=0.1 ? texture : vec4(0.,0.,0.,0.);}}else{textureColor=texture2D(u_sampler,vec2(v_texture_coord.s,v_texture_coord.t));}if(u_use_lighting){color=vec4(textureColor*v_color*1.1);}else{color=textureColor;}}if(u_use_top_color&&v_position.z>=v_height){color=top_color;}if(style==1.0||style==2.0){float t=time/1000.0;float diffDistance=5.0;float modX=mod(v_position.x,diffDistance*2.0);float modZ=mod(v_position.z,diffDistance*2.0);if(modX<diffDistance&&modZ<diffDistance&&v_position.z<v_height){color*=1.05;if(time>0.0&&style==2.0){float iX=ceil(v_position.x/diffDistance);float iZ=ceil(v_position.z/diffDistance);float timeDistance=8.0;t+=tan(sin(iZ));color*=(1.0+mod(t,timeDistance)/timeDistance);}}}else if(style==5.0){float t=time/1000.0;float diffDistance=10.0;float modZ=mod(v_position.z-t*40.0,diffDistance*2.0);color.a=1.0-pow(v_position.z/v_height,0.5);if(v_position.z/v_height<0.3){color.r+=0.2;color.g+=0.2;color.b+=0.2;}if(modZ<diffDistance*2.0-4.0){discard;}}else if(style==3.0){float diffDistance=10.0;float modX=mod(v_position.x,diffDistance*2.0);color.a=1.0-pow(v_position.z/v_height,0.3);}else if(style==4.0){float dis=distance(u_ripple_center,v_position);float rSize=400.0;if(v_position.z>=v_height){color=top_color;}if(dis>u_radius-rSize&&dis<u_radius+rSize){color*=(1.0-abs(dis-u_radius)/rSize)*2.0+1.0;}}else if(style==6.0){}color.a*=alpha;gl_FragColor=color;}",defines:_},this),this.vertexBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.colorBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.heightBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.textureBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Br({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),_=[{name:"a_pos",buffer:this.vertexBuffer,stride:28,size:4,type:"FLOAT",offset:0},{name:"a_normal",buffer:this.vertexBuffer,size:3,stride:28,type:"FLOAT",offset:16},{name:"a_color",buffer:this.colorBuffer,size:4,stride:32,type:"FLOAT",offset:0},{name:"a_pre_color",buffer:this.colorBuffer,size:4,stride:32,type:"FLOAT",offset:16},{name:"a_height",buffer:this.heightBuffer,size:1,stride:12,type:"FLOAT",offset:0},{name:"a_pre_height",buffer:this.heightBuffer,size:1,stride:12,type:"FLOAT",offset:4},{name:"a_block_index",buffer:this.heightBuffer,size:1,stride:12,type:"FLOAT",offset:8}],h.texture&&_.push({name:"a_texture_coord",buffer:this.textureBuffer,size:2,stride:8,type:"FLOAT",offset:0}),_=_.concat(this.getCommonAttributes()),this.vertexArray=new Yi({gl:s,program:this.program,attributes:_}),this.initializeTime=new Date,this.normalMatrix=Er.create()}},{key:"onDestroy",value:function(){}},{key:"onChanged",value:function(s,h){var _=this;this.gl&&(this.loadTextureTime&&clearTimeout(this.loadTextureTime),this.loadTextureTime=setTimeout(function(){_.loadTexture(function(){_.dataMgr.parseData(h),_.dataTime=new Date,_.webglLayer.render()})},0))}},{key:"render",value:function(s){var h=s.gl,_=s.projectionMatrix,x=s.viewMatrix;if(this._isShow){var S=this.getData();if(S&&!(0>=S.length)){S=this.getOptions();var C=this.program;if(C.use(h),!S.texture||this.texture){var R=0;S.style&&j0[S.style]&&(R=j0[S.style]);var H=[h.ONE,h.ZERO];S.blend?H=Cr(h,S.blend):(S.height===0||S.style==="gradual")&&(H=[h.ONE,h.ONE_MINUS_SRC_ALPHA]);var Z=h.LEQUAL;S.depthFunc&&(Z=h[S.depthFunc.toUpperCase()]),this.setGLState({cullFace:!1,blend:!0,blendEquation:h.FUNC_ADD,blendFunc:H,polygonOffset:S.polygonOffset,depthTest:S.depthTest,depthMask:S.style!=="gradual",depthFunc:Z}),H=this.normizedColor(S.topColor),S.style==="ripple"&&S.rippleLayer&&S.rippleLayer.data&&S.rippleLayer.data[0]&&(Z=this.normizedPoint(S.rippleLayer.data[0].geometry.coordinates),C.setUniforms({u_ripple_center:[Z[0],Z[1],0],u_radius:S.rippleLayer.options.size*S.rippleLayer.currentScale})),Z=dn.fromValues(0,-1,2),S.lightDir&&(Z=dn.fromValues(S.lightDir[0],S.lightDir[1],S.lightDir[2]));var P=this.normalMatrix;Er.invert(P,x),Er.transpose(P,P),C.setUniforms(Lr(this.getCommonUniforms(s),{u_normal_matrix:P,u_sampler:this.texture,u_proj_matrix:_,u_mv_matrix:x,u_zoom_units:this.map.getZoomUnits(),style:R,u_use_top_color:S.useTopColor,top_color:H,u_use_lighting:S.useLight,u_use_texture:this.isUseTexture,alpha:parseFloat(S.opacity),time:new Date-this.initializeTime,dataTime:new Date-this.dataTime,riseTime:S.riseTime,u_side_light_dir:Z,u_zIndex:S.zIndex,u_zFightFactor:S.zFightFactor})),s=this.dataMgr.getData(),0<s.vertex.length&&(this.vertexArray.bind(),this.indexBuffer.bind(),h.drawElements(h.TRIANGLES,s.index.length,h.UNSIGNED_INT,0))}}}else this.webglLayer.clear()}},{key:"loadTexture",value:function(s){var h=this,_=this.getOptions();_.texture?(this.isUseTexture=!0,pr(this.gl,_.texture,function(x,S){h.image=S,h.texture=x,s&&s(),h.webglLayer.render()})):(this.isUseTexture=!1,this.image=this.texture=null,s&&s())}}]),p}(ki);ji.prototype.initData=function(){this.outBuilding3d={pickColorVertex:[],vertex:[],texture:[],color:[],height:[],index:[]}},ji.prototype.getData=function(){return this.outBuilding3d},ji.prototype.initWorker=function(){this.worker=new s_,this.worker.onmessage=function(d){}},ji.prototype.parseData=function(d){var p=this;this.initData();for(var s=this.shapeLayer.getOptions(),h=0;h<d.length;h++){var _=d[h],x=_.height||s.height;"properties"in _&&"height"in _.properties&&(x=_.properties.height),x*=1;var S=_.color||s.color;"properties"in _&&"color"in _.properties&&(S=_.properties.color),"properties"in _&&"fillColor"in _.properties&&(S=_.properties.fillColor),Object.prototype.toString.call(S)==="[object Function]"&&(S=S(_)),S=this.shapeLayer.normizedColor(S);var C=this.shapeLayer.getProperty("angle",s.textureRotate,_),R=void 0;s.enablePicked&&(R=this.shapeLayer.indexToRgb(h));var H=void 0,Z=void 0;if(s.riseTime&&(Z=_.preColor,"properties"in _&&"preColor"in _.properties&&(Z=_.properties.preColor),H=_.preHeight,"properties"in _&&"preHeight"in _.properties&&(H=_.properties.preHeight),H===void 0&&(H=0)),_.geometry.coordinates){if(_.geometry.type==="LineString"){var P=_.geometry.coordinates.map(function(Q){return p.shapeLayer.normizedPoint(Q)}),F=Ut.flatten([P]);P=F.vertices,F=F.holes;for(var V=[],j=[],q=0;q<P.length;q+=3)V.push(P[q+0],P[q+1]),j.push(P[q+2]);this.parseBuilding3d(this.outBuilding3d,V,j,H,x,Z,S,R,C,F,h)}if(_.geometry.type==="MultiPolygon"){for(P=_.geometry.coordinates,_=[],F=0;F<P.length;F++)_.push(P[F].map(function(Q){return Q.map(function(ne){return p.shapeLayer.normizedPoint(ne)})}));for(P=0;P<_.length;P++){F=[],V=[],q=Ut.flatten(_[P]),j=q.vertices,q=q.holes;for(var ee=0;ee<j.length;ee+=3)F.push(j[ee+0],j[ee+1]),V.push(j[ee+2]);this.parseBuilding3d(this.outBuilding3d,F,V,H,x,Z,S,R,C,q,h)}}else{for(P=[],F=0;F<_.geometry.coordinates.length;F++)P.push(_.geometry.coordinates[F].map(function(Q){return p.shapeLayer.normizedPoint(Q)}));for(P=Ut.flatten(P),_=P.vertices,P=P.holes,F=[],V=[],j=0;j<_.length;j+=3)F.push(_[j+0],_[j+1]),V.push(_[j+2]);this.parseBuilding3d(this.outBuilding3d,F,V,H,x,Z,S,R,C,P,h)}}}this.shapeLayer.vertexBuffer.updateData(new Float32Array(this.outBuilding3d.vertex)),this.shapeLayer.colorBuffer.updateData(new Float32Array(this.outBuilding3d.color)),this.shapeLayer.heightBuffer.updateData(new Float32Array(this.outBuilding3d.height)),this.shapeLayer.textureBuffer.updateData(new Float32Array(this.outBuilding3d.texture)),this.shapeLayer.indexBuffer.updateData(new Uint32Array(this.outBuilding3d.index)),s.enablePicked&&this.shapeLayer.pickBuffer.updateData(new Float32Array(this.outBuilding3d.pickColorVertex))},ji.prototype.getBounds=function(d,p){for(var s=d[0],h=d[1],_=d[0],x=d[1],S=0;S<d.length;S+=2)s=Math.min(d[S],s),h=Math.min(d[S+1],h),_=Math.max(d[S],_),x=Math.max(d[S+1],x);if(S=[(_-s)/2+s,(x-h)/2+h],p===0||!p)return{minX:s,minY:h,maxX:_,maxY:x,width:_-s,height:x-h,center:S};for(s=d.slice(0),h=0;h<s.length;h+=2)_=_a(d[h],d[h+1],S,p),s[h]=_[0],s[h+1]=_[1];return this.getBounds(s,0)},ji.prototype.parseBuilding3d=function(d,p,s,h,_,x,S,C,R,H,Z){h===void 0&&(h=_);var P=this.shapeLayer.options,F=d.vertex,V=d.texture,j=d.color,q=d.height,ee=d.pickColorVertex;d=d.index,x===void 0&&(x=S);var Q=0,ne=0;if(this.shapeLayer.image&&(Q=this.shapeLayer.image.width*P.textureScale,ne=this.shapeLayer.image.height*P.textureScale),P.style!=="gradual"){H=H&&H.length?Ut(p,H,2):Ut(p);var le=H[0],Ae=H[1],Se=H[2];le=[p[2*le],p[2*le+1],1],Ae=[p[2*Ae],p[2*Ae+1],1];var Ie=[p[2*Se],p[2*Se+1],1];Se=[],dn.cross(Se,[Ie[0]-Ae[0],Ie[1]-Ae[1],Ie[2]-Ae[2]],[le[0]-Ae[0],le[1]-Ae[1],le[2]-Ae[2]]),Ae=F.length/7;var Be;P.texture&&(Be=this.getBounds(p,R)),le=P.isTextureFull,Ie=0;for(var nt=p.length;Ie<nt;Ie+=2){if(F.push(p[Ie],p[Ie+1],s[Ie/2],1,Se[0],Se[1],Se[2]),j.push(S[0],S[1],S[2],S[3],x[0],x[1],x[2],x[3]),q.push(_,h,Z),P.texture){var rt=_a(p[Ie],p[Ie+1],Be.center,R),St=Xi(rt,2);rt=St[0],St=St[1],le?(rt=(rt-Be.minX)/Be.width,St=(St-Be.minY)/Be.height):(rt=(rt-Be.minX)/Q,St=(St-Be.minY)/ne),V.push(rt,St)}C&&ee.push(C[0]/255,C[1]/255,C[2]/255)}for(R=0,Be=H.length;R<Be;R++)d.push(H[R]+Ae)}if(!(_===h&&0>=_))for(R=0,H=p.length;R<H;R+=2)Be=F.length/7,nt=p[R],rt=p[R+1],Se=[nt,rt,s[R/2],0],Ae=[nt,rt,s[R/2],1],Ie=R+2,St=R+3,R===H-2&&(Ie=0,St=1),Ie=p[Ie],St=p[St],nt=Math.sqrt(Math.pow(Ie-nt,2),Math.pow(St-rt,2)),rt=[Ie,St,s[R/2],0],Ie=[Ie,St,s[R/2],1],St=[],dn.cross(St,[rt[0]-Se[0],rt[1]-Se[1],rt[2]-Se[2]],[Ae[0]-Se[0],Ae[1]-Se[1],Ae[2]-Se[2]]),F.push(Se[0],Se[1],Se[2],Se[3]),F.push(St[0],St[1],St[2]),F.push(Ae[0],Ae[1],Ae[2],Ae[3]),F.push(St[0],St[1],St[2]),F.push(rt[0],rt[1],rt[2],rt[3]),F.push(St[0],St[1],St[2]),F.push(Ie[0],Ie[1],Ie[2],Ie[3]),F.push(St[0],St[1],St[2]),j.push(S[0],S[1],S[2],S[3]),j.push(x[0],x[1],x[2],x[3]),j.push(S[0],S[1],S[2],S[3]),j.push(x[0],x[1],x[2],x[3]),j.push(S[0],S[1],S[2],S[3]),j.push(x[0],x[1],x[2],x[3]),j.push(S[0],S[1],S[2],S[3]),j.push(x[0],x[1],x[2],x[3]),q.push(_),q.push(h),q.push(Z),q.push(_),q.push(h),q.push(Z),q.push(_),q.push(h),q.push(Z),q.push(_),q.push(h),q.push(Z),P.texture&&(le?(V.push(0,0),V.push(0,1),V.push(1,0),V.push(1,1)):(V.push(0,0),V.push(0,_/ne),V.push(nt/Q,0),V.push(nt/Q,_/ne))),C&&(ee.push(C[0]/255,C[1]/255,C[2]/255),ee.push(C[0]/255,C[1]/255,C[2]/255),ee.push(C[0]/255,C[1]/255,C[2]/255),ee.push(C[0]/255,C[1]/255,C[2]/255)),d.push(Be,Be+2,Be+3,Be,Be+3,Be+1)};var id=M(function(d,p){(function(s,h){d.exports=h()})(Ms,function(){function s(Q,ne,le,Ae,Se){for(;Ae>le;){if(600<Ae-le){var Ie=Ae-le+1,Be=ne-le+1,nt=Math.log(Ie),rt=.5*Math.exp(2*nt/3);nt=.5*Math.sqrt(nt*rt*(Ie-rt)/Ie)*(0>Be-Ie/2?-1:1),s(Q,ne,Math.max(le,Math.floor(ne-Be*rt/Ie+nt)),Math.min(Ae,Math.floor(ne+(Ie-Be)*rt/Ie+nt)),Se)}for(Ie=Q[ne],Be=le,rt=Ae,h(Q,le,ne),0<Se(Q[Ae],Ie)&&h(Q,le,Ae);Be<rt;){for(h(Q,Be,rt),Be++,rt--;0>Se(Q[Be],Ie);)Be++;for(;0<Se(Q[rt],Ie);)rt--}Se(Q[le],Ie)===0?h(Q,le,rt):(rt++,h(Q,rt,Ae)),rt<=ne&&(le=rt+1),ne<=rt&&(Ae=rt-1)}}function h(Q,ne,le){var Ae=Q[ne];Q[ne]=Q[le],Q[le]=Ae}function _(Q,ne){return Q<ne?-1:Q>ne?1:0}function x(Q,ne){S(Q,0,Q.children.length,ne,Q)}function S(Q,ne,le,Ae,Se){for(Se||(Se=j(null)),Se.minX=1/0,Se.minY=1/0,Se.maxX=-1/0,Se.maxY=-1/0;ne<le;ne++){var Ie=Q.children[ne];C(Se,Q.leaf?Ae(Ie):Ie)}return Se}function C(Q,ne){return Q.minX=Math.min(Q.minX,ne.minX),Q.minY=Math.min(Q.minY,ne.minY),Q.maxX=Math.max(Q.maxX,ne.maxX),Q.maxY=Math.max(Q.maxY,ne.maxY),Q}function R(Q,ne){return Q.minX-ne.minX}function H(Q,ne){return Q.minY-ne.minY}function Z(Q){return(Q.maxX-Q.minX)*(Q.maxY-Q.minY)}function P(Q){return Q.maxX-Q.minX+(Q.maxY-Q.minY)}function F(Q,ne){return Q.minX<=ne.minX&&Q.minY<=ne.minY&&ne.maxX<=Q.maxX&&ne.maxY<=Q.maxY}function V(Q,ne){return ne.minX<=Q.maxX&&ne.minY<=Q.maxY&&ne.maxX>=Q.minX&&ne.maxY>=Q.minY}function j(Q){return{children:Q,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function q(Q,ne,le,Ae,Se){for(var Ie=[ne,le];Ie.length;)if(le=Ie.pop(),ne=Ie.pop(),!(le-ne<=Ae)){var Be=ne+Math.ceil((le-ne)/Ae/2)*Ae;s(Q,Be,ne||0,le||Q.length-1,Se||_),Ie.push(ne,Be,Be,le)}}var ee=function(Q){Q===void 0&&(Q=9),this._maxEntries=Math.max(4,Q),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};return ee.prototype.all=function(){return this._all(this.data,[])},ee.prototype.search=function(Q){var ne=this.data,le=[];if(!V(Q,ne))return le;for(var Ae=this.toBBox,Se=[];ne;){for(var Ie=0;Ie<ne.children.length;Ie++){var Be=ne.children[Ie],nt=ne.leaf?Ae(Be):Be;V(Q,nt)&&(ne.leaf?le.push(Be):F(Q,nt)?this._all(Be,le):Se.push(Be))}ne=Se.pop()}return le},ee.prototype.collides=function(Q){var ne=this.data;if(!V(Q,ne))return!1;for(var le=[];ne;){for(var Ae=0;Ae<ne.children.length;Ae++){var Se=ne.children[Ae],Ie=ne.leaf?this.toBBox(Se):Se;if(V(Q,Ie)){if(ne.leaf||F(Q,Ie))return!0;le.push(Se)}}ne=le.pop()}return!1},ee.prototype.load=function(Q){if(!Q||!Q.length)return this;if(Q.length<this._minEntries){for(var ne=0;ne<Q.length;ne++)this.insert(Q[ne]);return this}return Q=this._build(Q.slice(),0,Q.length-1,0),this.data.children.length?this.data.height===Q.height?this._splitRoot(this.data,Q):(this.data.height<Q.height&&(ne=this.data,this.data=Q,Q=ne),this._insert(Q,this.data.height-Q.height-1,!0)):this.data=Q,this},ee.prototype.insert=function(Q){return Q&&this._insert(Q,this.data.height-1),this},ee.prototype.clear=function(){return this.data=j([]),this},ee.prototype.remove=function(Q,ne){if(!Q)return this;for(var le=this.data,Ae=this.toBBox(Q),Se=[],Ie=[],Be,nt,rt;le||Se.length;){if(le||(le=Se.pop(),nt=Se[Se.length-1],Be=Ie.pop(),rt=!0),le.leaf){e:{var St=Q,Pt=le.children,$t=ne;if($t){for(var Xt=0;Xt<Pt.length;Xt++)if($t(St,Pt[Xt])){St=Xt;break e}St=-1}else St=Pt.indexOf(St)}if(St!==-1){le.children.splice(St,1),Se.push(le),this._condense(Se);break}}rt||le.leaf||!F(le,Ae)?nt?(Be++,le=nt.children[Be],rt=!1):le=null:(Se.push(le),Ie.push(Be),Be=0,nt=le,le=le.children[0])}return this},ee.prototype.toBBox=function(Q){return Q},ee.prototype.compareMinX=function(Q,ne){return Q.minX-ne.minX},ee.prototype.compareMinY=function(Q,ne){return Q.minY-ne.minY},ee.prototype.toJSON=function(){return this.data},ee.prototype.fromJSON=function(Q){return this.data=Q,this},ee.prototype._all=function(Q,ne){for(var le=[];Q;)Q.leaf?ne.push.apply(ne,Q.children):le.push.apply(le,Q.children),Q=le.pop();return ne},ee.prototype._build=function(Q,ne,le,Ae){var Se=le-ne+1,Ie=this._maxEntries;if(Se<=Ie){var Be=j(Q.slice(ne,le+1));return x(Be,this.toBBox),Be}for(Ae||(Ae=Math.ceil(Math.log(Se)/Math.log(Ie)),Ie=Math.ceil(Se/Math.pow(Ie,Ae-1))),Be=j([]),Be.leaf=!1,Be.height=Ae,Se=Math.ceil(Se/Ie),Ie=Se*Math.ceil(Math.sqrt(Ie)),q(Q,ne,le,Ie,this.compareMinX);ne<=le;ne+=Ie){var nt=Math.min(ne+Ie-1,le);q(Q,ne,nt,Se,this.compareMinY);for(var rt=ne;rt<=nt;rt+=Se)Be.children.push(this._build(Q,rt,Math.min(rt+Se-1,nt),Ae-1))}return x(Be,this.toBBox),Be},ee.prototype._chooseSubtree=function(Q,ne,le,Ae){for(;Ae.push(ne),!(ne.leaf||Ae.length-1===le);){for(var Se=1/0,Ie=1/0,Be=void 0,nt=0;nt<ne.children.length;nt++){var rt=ne.children[nt],St=Z(rt),Pt=(Math.max(rt.maxX,Q.maxX)-Math.min(rt.minX,Q.minX))*(Math.max(rt.maxY,Q.maxY)-Math.min(rt.minY,Q.minY))-St;Pt<Ie?(Ie=Pt,Se=St<Se?St:Se,Be=rt):Pt===Ie&&St<Se&&(Se=St,Be=rt)}ne=Be||ne.children[0]}return ne},ee.prototype._insert=function(Q,ne,le){le=le?Q:this.toBBox(Q);var Ae=[],Se=this._chooseSubtree(le,this.data,ne,Ae);for(Se.children.push(Q),C(Se,le);0<=ne&&Ae[ne].children.length>this._maxEntries;)this._split(Ae,ne),ne--;this._adjustParentBBoxes(le,Ae,ne)},ee.prototype._split=function(Q,ne){var le=Q[ne],Ae=le.children.length,Se=this._minEntries;this._chooseSplitAxis(le,Se,Ae),Ae=this._chooseSplitIndex(le,Se,Ae),Ae=j(le.children.splice(Ae,le.children.length-Ae)),Ae.height=le.height,Ae.leaf=le.leaf,x(le,this.toBBox),x(Ae,this.toBBox),ne?Q[ne-1].children.push(Ae):this._splitRoot(le,Ae)},ee.prototype._splitRoot=function(Q,ne){this.data=j([Q,ne]),this.data.height=Q.height+1,this.data.leaf=!1,x(this.data,this.toBBox)},ee.prototype._chooseSplitIndex=function(Q,ne,le){for(var Ae,Se=1/0,Ie=1/0,Be=ne;Be<=le-ne;Be++){var nt=S(Q,0,Be,this.toBBox),rt=S(Q,Be,le,this.toBBox),St=Math.max(0,Math.min(nt.maxX,rt.maxX)-Math.max(nt.minX,rt.minX))*Math.max(0,Math.min(nt.maxY,rt.maxY)-Math.max(nt.minY,rt.minY));nt=Z(nt)+Z(rt),St<Se?(Se=St,Ae=Be,Ie=nt<Ie?nt:Ie):St===Se&&nt<Ie&&(Ie=nt,Ae=Be)}return Ae||le-ne},ee.prototype._chooseSplitAxis=function(Q,ne,le){var Ae=Q.leaf?this.compareMinX:R,Se=Q.leaf?this.compareMinY:H,Ie=this._allDistMargin(Q,ne,le,Ae);ne=this._allDistMargin(Q,ne,le,Se),Ie<ne&&Q.children.sort(Ae)},ee.prototype._allDistMargin=function(Q,ne,le,Ae){Q.children.sort(Ae),Ae=this.toBBox;for(var Se=S(Q,0,ne,Ae),Ie=S(Q,le-ne,le,Ae),Be=P(Se)+P(Ie),nt=ne;nt<le-ne;nt++){var rt=Q.children[nt];C(Se,Q.leaf?Ae(rt):rt),Be+=P(Se)}for(le=le-ne-1;le>=ne;le--)Se=Q.children[le],C(Ie,Q.leaf?Ae(Se):Se),Be+=P(Ie);return Be},ee.prototype._adjustParentBBoxes=function(Q,ne,le){for(;0<=le;le--)C(ne[le],Q)},ee.prototype._condense=function(Q){for(var ne=Q.length-1,le;0<=ne;ne--)Q[ne].children.length===0?0<ne?(le=Q[ne-1].children,le.splice(le.indexOf(Q[ne]),1)):this.clear():x(Q[ne],this.toBBox)},ee})}),Yc=function(d){function p(s){hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s)),s.name="TextLayer",s.dataChanged=!1,s.currentZoom;var h=s.canvas=document.createElement("canvas");return h=s.ctx=h.getContext("2d"),h.textAlign="start",h.textBaseline="top",s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{depthWrite:!1,depthTest:!0,color:"#fff",fontFamily:"Microsoft Yahei",fontSize:14,lineWidth:2,lineHeight:20,textAlign:"center",flat:!1,collides:!0,textMaxWidth:0,textMaxHeight:0,unit:"px",angle:0,offset:[0,0],padding:[2,2],margin:[0,0],polygonOffset:[0,0],shadow:{},stroke:{color:""}}}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions();this.texture=null,this.lastUpdateTime=0,this.program=new Jn(this.gl,{vertexShader:"precision highp float;uniform mat4 matrix;uniform bool uFlat;uniform bool uUnitPx;uniform float zoomUnits;uniform float devicePixelRatio;uniform float zIndex;uniform vec2 offset;attribute vec3 position;attribute float corner;attribute float scale;attribute float rotation;attribute vec2 size;attribute vec2 aTextCoord;varying vec2 vTextCoord;/***点A(x,y)，绕原点顺时针旋转角度a新坐标的计算公式*x1=x*cos(a)+y*sin(a)*y1=y*cos(a)-x*sin(a)*/vec3 transformCoord(vec3 coord,vec2 size,float corner){float x=coord.x;float y=coord.y;if(corner==1.0){x+=-size.x*cos(rotation)+size.y*sin(rotation);y+=size.y*cos(rotation)+size.x*sin(rotation);}else if(corner==2.0){x+=size.x*cos(rotation)+size.y*sin(rotation);y+=size.y*cos(rotation)-size.x*sin(rotation);}else if(corner==3.0){x+=size.x*cos(rotation)-size.y*sin(rotation);y+=-size.y*cos(rotation)-size.x*sin(rotation);}else{x+=-size.x*cos(rotation)-size.y*sin(rotation);y+=-size.y*cos(rotation)+size.x*sin(rotation);}return vec3(x,y,coord.z);}void main(){vTextCoord=aTextCoord;if(uFlat){vec2 pixelOffset=offset;vec2 halfSize=size/2.0*scale;if(uUnitPx){halfSize*=zoomUnits;pixelOffset*=zoomUnits;}vec3 current=transformCoord(position,halfSize,corner);current.z+=zIndex;gl_Position=matrix*vec4(current.x+pixelOffset[0],current.y-pixelOffset[1],current.z,1.0);}else{vec4 pos=matrix*vec4(position,1.0);vec3 screen=pos.xyz/pos.w;vec2 halfSize=size/MAPV_resolution*devicePixelRatio*scale;vec2 positionOffset=offset*2./MAPV_resolution*devicePixelRatio;if(!uUnitPx){halfSize/=zoomUnits;positionOffset/=zoomUnits;}vec3 current=transformCoord(screen,halfSize,corner);current.xy=current.xy-positionOffset;current.z+=zIndex;gl_Position=vec4(current,1.0);}}",fragmentShader:`precision highp float;uniform sampler2D textureImage;uniform vec4 uSelectedColor;varying vec2 vTextCoord;void main(){gl_FragColor=texture2D(textureImage,vec2(vTextCoord.x,1.0-vTextCoord.y));
#if defined(PICK)
if(mapvIsPicked()){gl_FragColor=vec4(uSelectedColor.rgb,gl_FragColor.a);}
#endif
}`,defines:h.enablePicked?["PICK"]:[]},this),this.vertexBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.uvBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Br({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),h=[{name:"position",buffer:this.vertexBuffer,size:3,stride:32,type:"FLOAT",offset:0},{name:"corner",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:12},{name:"size",buffer:this.vertexBuffer,size:2,stride:32,type:"FLOAT",offset:16},{name:"scale",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:24},{name:"rotation",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:28},{name:"aTextCoord",buffer:this.uvBuffer,size:2,stride:8,type:"FLOAT",offset:0}],h=h.concat(this.getCommonAttributes()),this.vertexArray=new Yi({gl:s,program:this.program,attributes:h})}},{key:"onDestroy",value:function(){}},{key:"onChanged",value:function(s,h){this.gl&&this.processCache(s,h)}},{key:"processCache",value:function(s,h){this.cachedData=[],this.dataChanged=!0;for(var _=0;_<h.length;_++){var x=this.normizedPoint(h[_].geometry.coordinates),S=h[_].text;"properties"in h[_]&&"text"in h[_].properties&&(S=h[_].properties.text);var C=this.getProperty("angle",s.angle,h[_]),R=this.getProperty("color",s.color,h[_]);x&&S!==void 0&&this.cachedData.push({point:x,text:S,angle:C,color:R,index:_})}}},{key:"render",value:function(s){if(this.cachedData&&this.cachedData.length&&this.map){var h=s.gl,_=s.matrix,x=this.getOptions(),S=this.program;S.use(h);var C=this.map.getZoomUnits();(this.dataChanged||this.currentZoom!==C||!s.isPickRender)&&(this.throttleUpdate(s),this.currentZoom=C),this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA],polygonOffset:x.polygonOffset,depthTest:x.depthTest,depthMask:x.depthWrite}),S.setUniforms(Lr(this.getCommonUniforms(s),{matrix:_,devicePixelRatio:1<(window.BMAPGL_FORCE_RATIO||window.devicePixelRatio)?2:1,textureImage:this.texture,uFlat:x.flat,offset:x.offset,zoomUnits:C,zIndex:x.zIndex,uUnitPx:x.unit==="px"})),0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),h.drawElements(h.TRIANGLES,this.index.length,h.UNSIGNED_INT,0)),this.dataChanged=!1}}},{key:"throttleUpdate",value:function(s){this.updateText(s)}},{key:"updateText",value:function(s){var h=s.gl,_=s.matrix,x=this.getOptions(),S=x.fontSize,C=x.fontFamily,R=x.padding,H=x.margin,Z=x.collides;s=x.enablePicked;var P=x.shadow,F=x.textMaxWidth,V=x.textMaxHeight,j=h.canvas.width/window.devicePixelRatio,q=h.canvas.height/window.devicePixelRatio;x=this.canvas,h=this.ctx,h.fillStyle="#6c0",h.save(),h.scale(window.devicePixelRatio,window.devicePixelRatio),h.textBaseline="top",h.font="20px "+C;for(var ee=new id,Q=[],ne=void 0,le=0;le<this.cachedData.length;le++){var Ae=this.cachedData[le],Se=Ae.point,Ie=Ae.text,Be=Ae.angle,nt=Ae.color;Ae=Ae.index;var rt=Xi(Se,3),St=Fo.clone([rt[0],rt[1],rt[2],1]);Fo.transformMat4(St,St,_),Fo.scale(St,St,1/St[3]);var Pt=this.map.getHeading()%360;rt=(St[0]+1)/2*j,St=(-St[1]+1)/2*q;var $t=rt*Math.cos(Pt*Math.PI/180)-St*Math.sin(Pt*Math.PI/180),Xt=rt*Math.sin(Pt*Math.PI/180)+St*Math.cos(Pt*Math.PI/180),wr=h.measureText(Ie),Qr=wr.width+2*R[0];Pt=20,wr.actualBoundingBoxAscent&&wr.actualBoundingBoxDescent&&(Pt=wr.actualBoundingBoxDescent-wr.actualBoundingBoxAscent),Pt+=2*R[1],wr=Qr+H[0];var bt=Pt+H[1];$t-=wr/2,Xt-=bt/2;var fr=$t+wr,un=Xt+bt;if(!(0>rt+wr/2||0>St+bt/2||rt-wr/2>j||St-bt/2>q)){if(Z){if(rt={minX:$t,maxX:fr,minY:Xt,maxY:un},ee.collides(rt))continue;ee.insert(rt)}rt=ne=F||Qr,Q.push({w:rt,h:V||Pt,point:Se,text:Ie,angle:Be,color:nt,dataIndex:Ae})}}h.restore(),H=ro(Q),_=H.w,H=H.h,0>=_&&(_=1),0>=H&&(H=1),x.width=2*_,x.height=2*H,h.save(),h.scale(2,2),h.textBaseline="top",h.font="20px "+C,h.shadowColor=P&&P.color,h.shadowOffsetX=P&&P.offsetX,h.shadowOffsetY=P&&P.offsetY,h.shadowBlur=P&&P.blur,P=this.buildVertex(h,Q,_,H,{padding:R,fontSize:S,defaultFontSize:20,enablePicked:s,cWidth:ne}),S=P.vertex,C=P.textureCoord,R=P.indices,P=P.pick,h.restore(),this.loadTexture(),this.index=R,this.vertexBuffer.updateData(new Float32Array(S)),this.uvBuffer.updateData(new Float32Array(C)),this.indexBuffer.updateData(new Uint32Array(R)),s&&this.pickBuffer.updateData(new Float32Array(P))}},{key:"wrapText",value:function(s,h,_,x,S,C,R){if(h&&typeof h=="string"){var H=this.getOptions().stroke;h=h.split("");for(var Z="",P=0;P<h.length;P++){var F=Z+h[P];s.measureText(F).width>S&&0<P?(R==="left"?(H.color&&s.strokeText(Z,_,x),s.fillText(Z,_,x)):(H.color&&s.strokeText(Z,_+(S-s.measureText(Z).width)/2,x),s.fillText(Z,_+(S-s.measureText(Z).width)/2,x)),Z=h[P],x+=C):Z=F}R==="left"?(H.color&&s.strokeText(Z,_,x),s.fillText(Z,_,x)):(H.color&&s.strokeText(Z,_+(S-s.measureText(Z).width)/2,x),s.fillText(Z,_+(S-s.measureText(Z).width)/2,x))}}},{key:"buildVertex",value:function(s,h,_,x,S){var C=this.getOptions(),R=C.stroke,H=C.lineWidth,Z=C.lineHeight,P=C.textMaxWidth;C=C.textAlign;var F=[],V=[],j=[],q=[];R.color&&(s.lineWidth=H,s.strokeStyle=R.color),H=0;for(var ee=h.length;H<ee;++H){var Q=h[H],ne=Q.x+S.padding[0],le=Q.y+S.padding[1];s.fillStyle=Q.color,P?this.wrapText(s,Q.text,ne,le,S.cWidth,Z,C):(R.color&&s.strokeText(Q.text,ne,le),s.fillText(Q.text,ne,le));var Ae=Xi(Q.point,3);ne=Ae[0],le=Ae[1],Ae=Ae[2];for(var Se=0;4>Se;Se++)F.push(ne,le,Ae),F.push(Se),F.push(Q.w,Q.h),F.push(S.fontSize/S.defaultFontSize,Q.angle*Math.PI/180);ne=Q.x/_,le=(Q.x+Q.w)/_,Ae=(Q.y+Q.h)/x,Se=Q.y/x,V.push(ne,Ae,ne,Se,le,Se,le,Ae),ne=4*H,j.push(ne,ne+2,ne+1,ne,ne+3,ne+2),S.enablePicked&&(Q=this.indexToRgb(Q.dataIndex),q.push(Q[0]/255,Q[1]/255,Q[2]/255),q.push(Q[0]/255,Q[1]/255,Q[2]/255),q.push(Q[0]/255,Q[1]/255,Q[2]/255),q.push(Q[0]/255,Q[1]/255,Q[2]/255))}return{vertex:F,textureCoord:V,indices:j,pick:q}}},{key:"loadTexture",value:function(){var s=this;this.canvas?pr(this.gl,this.canvas,function(h){s.texture=h},{TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"}):this.texture=null}}]),p}(ki),xl=function(d){function p(s){return hr(this,p),ln(this,(p.__proto__||Dr(p)).call(this,s))}return sn(p,d),Mr(p,[{key:"initialize",value:function(s){var h=this;this.children&&this.children.forEach(function(_){_.map=h.map,_.setWebglLayer(h.getWebglLayer()),_.commonInitialize&&_.commonInitialize(s),_.initialize&&_.initialize(s),_.onOptionsChanged(_.getOptions()),_.onDataChanged(_.getData()),_.onChanged(_.getOptions(),_.getData())})}},{key:"isRequestAnimation",value:function(){if(this.autoUpdate!==void 0)return Yl(p.prototype.__proto__||Dr(p.prototype),"isRequestAnimation",this).call(this);for(var s=!1,h=0;h<this.children.length;h++)if(this.children[h].isRequestAnimation()){s=!0;break}return s}},{key:"render",value:function(s){this.children&&this.children.forEach(function(h){h.render(s)})}},{key:"onDestroy",value:function(s){this.children&&this.children.forEach(function(h){h.onDestroy(s)})}}]),p}(k0),l_=function(d){function p(s){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s)),s.preHeightMapper={},s.preColorMapper={},s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return Lr(Yl(p.prototype.__proto__||Dr(p.prototype),"getDefaultOptions",this).call(this),{style:"grid",gridSize:500,gridGap:5,height:function(){return 1e3},color:function(){return"rgb(200, 200, 20)"}})}},{key:"generateGrid",value:function(s,h){var _=h.gridSize,x=[],S={};h=s.length;for(var C=this.getPointOffset(),R=0;R<h;R++){var H=this.normizedPoint(s[R].geometry.coordinates);H=~~((H[0]+C[0])/_)+"_"+~~((H[1]+C[1])/_),S[H]===void 0&&(S[H]=0);var Z=~~s[R].count||1;"properties"in s[R]&&"count"in s[R].properties&&(Z=~~s[R].properties.count),S[H]+=Z}return Eo(S).forEach(function(P){var F=P.split("_");x.push([F[0]*_+_/2,F[1]*_+_/2,S[P]])}),x}},{key:"onChanged",value:function(s,h){h=this.processData(h),Yl(p.prototype.__proto__||Dr(p.prototype),"onChanged",this).call(this,s,h)}},{key:"getGridDataRange",value:function(){var s=this.gridData,h=void 0,_=void 0;s[0]&&(h=s[0][2],_=s[0][2]);for(var x=s.length,S=0;S<x;S++){var C=s[S];h=Math.max(C[2],h),_=Math.min(C[2],_)}return{max:h/2,min:_}}},{key:"processData",value:function(s){var h=this.getOptions(),_=h.gridSize,x=[];if(h.style==="normal")for(var S=this.getPointOffset(),C=0;C<s.length;C++){var R=this.normizedPoint(s[C].geometry.coordinates),H=R[0]+S[0];R=R[1]+S[1];var Z=~~s[C].count||1;"properties"in s[C]&&"count"in s[C].properties&&(Z=~~s[C].properties.count);var P=s[C].color;"properties"in s[C]&&"color"in s[C].properties&&(P=~~s[C].properties.color),x.push([H,R,Z,P])}else x=this.generateGrid(s,h);for(s=[],this._preHeightMapper={},this._preColorMapper={},S=0;S<x.length;S++)C=x[S],C[0]=C[0],C[1]=C[1],H=C[2],h.height&&(H=typeof h.height=="function"?h.height({count:C[2],coordinates:[C[0],C[1]]}):h.height),R=_/2-h.gridGap,Z=C[3],h.color&&(Z=typeof h.color=="function"?h.color({count:C[2],color:C[3]}):W(Z||h.color).unitArray()),P="p"+C[0]+C[1],s.push({geometry:{type:"Polygon",coordinates:[[[C[0]-R,C[1]-R],[C[0]-R,C[1]+R],[C[0]+R,C[1]+R],[C[0]+R,C[1]-R]]]},color:Z,origin:C,count:C[2],preHeight:this.preHeightMapper[P],preColor:this.preColorMapper[P],height:H}),this._preHeightMapper[P]=H,this._preColorMapper[P]=Z;return this.preHeightMapper=this._preHeightMapper,this.preColorMapper=this._preColorMapper,this.gridData=s}}]),p}(Pp),u_=function(d){function p(s){hr(this,p);var h=ln(this,(p.__proto__||Dr(p)).call(this,s));return h.gridLayer=new l_(s),h.options.textOptions=Lr({show:!1,flat:!0,unit:"m",fontSize:100,collides:!1},s.textOptions||{}),h.textLayer=new Yc(h.options.textOptions),h.children=[h.gridLayer,h.textLayer],h}return sn(p,d),Mr(p,[{key:"pick",value:function(s,h){return this.gridLayer.pick(s,h)}},{key:"setData",value:function(s){this.gridLayer.setData(s),this.options.textOptions.show&&this.setTextData()}},{key:"setTextData",value:function(){var s=this.gridLayer.gridData.map(function(h){return{geometry:{type:"Point",coordinates:[h.origin[0],h.origin[1],h.height+5]},properties:{text:h.count}}});this.textLayer.setData(s)}},{key:"setOptions",value:function(){var s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},h=this.options.textOptions;Lr(this.options,s),this.gridLayer.setOptions(this.options),s.textOptions&&(this.options.textOptions.show&&this.setTextData(),this.options.textOptions=Lr(h||{},s.textOptions),this.textLayer.setOptions(this.options.textOptions))}},{key:"getData",value:function(){return this.gridLayer.getData()}},{key:"render",value:function(s){this.gridLayer.render(s),this.options.textOptions.show&&this.textLayer.render(s)}}]),p}(xl),v2=function(d){function p(s){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s)),s.gridLayer=new u_(s.getGridOptions()),s.children=[s.gridLayer],s.options.riseTime&&(s.autoUpdate=!0),s}return sn(p,d),Mr(p,[{key:"pick",value:function(s,h){return this.gridLayer.pick(s,h)}},{key:"onDataChanged",value:function(s){this.gridLayer.setData(s)}},{key:"getGridOptions",value:function(){var s=this.getOptions(),h=s.max,_=s.min;h===void 0&&(_=this.gridLayer.getGridDataRange(),h=_.max,_=_.min);var x=new Xe({max:h,min:_,gradient:s.gradient,maxSize:s.maxHeight,minSize:s.minHeight});return s.height=function(S){var C=x.getSize(S.count);return"properties"in S&&"count"in S.properties&&(C=x.getSize(S.properties.count)),C},s.color=function(S){var C=x.getImageData(S.count);return"properties"in S&&"count"in S.properties&&(C=x.getImageData(S.properties.count)),[C[0]/255,C[1]/255,C[2]/255,C[3]/255]},s}},{key:"onOptionsChanged",value:function(s){this.gridLayer.setOptions(this.getGridOptions())}},{key:"getDefaultOptions",value:function(){return{enablePicked:!1,selectedIndex:-1,selectedColor:"#ff0000",autoSelect:!0,style:"grid",gridSize:500,maxHeight:8e3,minHeight:200,gradient:{0:"rgb(50, 50, 256)","0.1":"rgb(50, 250, 56)","0.5":"rgb(250, 250, 56)",1:"rgb(250, 50, 56)"}}}}]),p}(xl),Fg=function(d){function p(s,h){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s,h)),s.name="SimpleLineLayer",s.bufferData=[],s}return sn(p,d),Mr(p,[{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions();this.program=new Jn(this.gl,{vertexShader:`uniform mat4 u_matrix;attribute vec3 aPos;attribute vec4 aColor;varying vec4 vColor;
#if defined(DASH)
varying vec3 vPos;
#endif
void main(){if(aColor.w>=0.0&&aColor.w<=1.0){vColor=aColor;}else{vColor=vec4(aColor.xyz,1.0);}gl_Position=u_matrix*vec4(aPos,1.0);
#if defined(DASH)
vPos=aPos;
#endif
}`,fragmentShader:`precision highp float;varying vec4 vColor;varying vec3 vPos;void main(){
#if defined(DASH)
if(mod(vPos.x,3.0)<1.5){discard;}
#endif
gl_FragColor=vColor;}`,defines:h.useDash?["DASH"]:""},this),this.buffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.vertexArray=new Yi({gl:s,program:this.program,attributes:[{stride:28,name:"aPos",buffer:this.buffer,size:3,type:"FLOAT",offset:0},{stride:28,name:"aColor",buffer:this.buffer,size:4,type:"FLOAT",offset:12}]})}},{key:"onDestroy",value:function(){this.bufferData=[]}},{key:"onChanged",value:function(s,h){var _=this;if(this.gl){var x=[],S=function(P,F){if(P)for(var V=0;V<P.length-1;V++){var j=_.normizedPoint(P[V]);x.push(j[0]),x.push(j[1]),x.push(j[2]),x.push(F[0],F[1],F[2],F[3]),j=_.normizedPoint(P[V+1]),x.push(j[0]),x.push(j[1]),x.push(j[2]),x.push(F[0],F[1],F[2],F[3])}};s=s.color;for(var C=0;C<h.length;C++){var R=this.getProperty("color",s,h[C]);R=this.normizedColor(R);var H=h[C].geometry,Z=H.coordinates;if(H.type==="MultiPolygon"){if(Z)for(H=0;H<Z.length;H++)S(Z[H][0],R)}else if(H.type==="Polygon")Z&&S(Z[0],R);else if(H.type==="MultiLineString"){if(Z)for(H=0;H<Z.length;H++)S(Z[H],R)}else S(Z,R)}this.bufferData=x,this.buffer.updateData(new Float32Array(x))}}},{key:"render",value:function(s){var h=s.gl;if(s=s.matrix,this.bufferData&&!(0>=this.bufferData.length)){var _=this.program;_.use(h),this.vertexArray.bind(),_.setUniforms({u_matrix:s}),s=this.getOptions(),this.setGLState({blend:!0,blendFunc:s.blend==="lighter"?[h.SRC_ALPHA,h.ONE]:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA],blendEquation:h.FUNC_ADD}),h.drawArrays(h.LINES,0,this.bufferData.length/7)}}}]),p}(ki),c_=Uh.f("species"),h_=M(function(d){d.exports={default:c_,__esModule:!0}});m(h_);var G0={normal:null,road:To()},f_=function(d){function p(s,h){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s,h)),s.name="LineLayer3D",s.initData(),s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{color:"rgba(25, 25, 250, 1)",offset:0,blend:"normal",width:4,unit:"px",flat:!1,antialias:!1,style:"normal",dashArray:[0,0],dashOffset:0,polygonOffset:[0,0]}}},{key:"initData",value:function(){this.dataMgr={position:[],prev:[],next:[],direction:[],color:[],index:[],counter:[],uv:[]}}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions(),_=[];h.enablePicked&&_.push("PICK"),G0[h.style]&&(this.isUseTexture=!0,_.push("USE_TEXTURE")),this.program=new Jn(this.gl,{vertexShader:`precision highp float;uniform vec4 uSelectedColor;uniform mat4 uMatrix;uniform bool uFlat;uniform bool uUnitPx;uniform vec2 uDashArray;uniform float thickness;uniform float zoomUnits;uniform float devicePixelRatio;uniform float uOffset;attribute vec3 position;attribute vec3 next;attribute vec3 previous;attribute float direction;attribute vec4 aColor;attribute float aDistance;attribute float aTotalDistance;
#if defined(USE_TEXTURE)
attribute vec2 uv;
#endif
varying vec4 vColor;varying vec2 vNormal;varying vec2 vUV;varying vec2 vDashArray;varying float vTotalDistance;varying float vCounter;vec2 project(vec4 coord){vec3 screen=coord.xyz/coord.w;vec2 clip=(screen.xy+1.0)/2.0;return clip*MAPV_resolution;}vec4 unproject(vec2 projected,float z,float w){vec2 clip=projected/MAPV_resolution;vec2 screen=clip*2.0-1.0;return vec4(screen*w,z,w);}vec3 getNormalAndWidth(vec2 currentScreen,vec2 previousScreen,vec2 nextScreen,float thickness){vec2 dir=vec2(0.0);if(currentScreen==previousScreen){dir=normalize(nextScreen-currentScreen);}else if(currentScreen==nextScreen){dir=normalize(currentScreen-previousScreen);}else{vec2 dirA=normalize((currentScreen-previousScreen));vec2 dirB=normalize((nextScreen-currentScreen));vec2 tangent=normalize(dirA+dirB);vec2 perp=vec2(-dirA.y,dirA.x);vec2 miter=vec2(-tangent.y,tangent.x);dir=tangent;float angle=40.0;if(dot(dirA,dirB)>cos(radians(angle))){thickness=thickness/dot(miter,perp);}}vec2 normal=vec2(-dir.y,dir.x);return vec3(normal,thickness);}void main(){vColor=aColor;vCounter=aDistance/aTotalDistance;vDashArray=uDashArray/aTotalDistance;if(uUnitPx){vDashArray*=zoomUnits;}vTotalDistance=aTotalDistance;
#if defined(USE_TEXTURE)
vUV=uv;
#endif
#if defined(PICK)
if(mapvIsPicked()){vColor=uSelectedColor;}
#endif
if(uFlat){float width=thickness;if(uUnitPx){width*=zoomUnits;}vec3 nw=getNormalAndWidth(position.xy,previous.xy,next.xy,width);width=nw.z;vec2 normal=nw.xy;vNormal=normal*direction;normal*=width/2.0;float offsetXy=uOffset;float offsetHeight=uOffset/100.0;if(uUnitPx){offsetXy/=zoomUnits;offsetHeight*=zoomUnits;}gl_Position=uMatrix*vec4(position.xy+normal*(direction+offsetXy),position.z+offsetHeight,1.0);}else{vec4 previousProjected=uMatrix*vec4(previous,1.0);vec4 currentProjected=uMatrix*vec4(position,1.0);vec4 nextProjected=uMatrix*vec4(next,1.0);vec2 currentScreen=project(currentProjected);vec2 previousScreen=project(previousProjected);vec2 nextScreen=project(nextProjected);float width=thickness*devicePixelRatio;if(!uUnitPx){width/=zoomUnits;}vec3 nw=getNormalAndWidth(currentScreen,previousScreen,nextScreen,width);width=nw.z;vec2 normal=nw.xy;vNormal=normal*direction;normal*=width/2.0;vec2 pos=currentScreen+normal*direction;vec4 finalPos=unproject(pos,currentProjected.z,currentProjected.w);gl_Position=finalPos;}}`,fragmentShader:`precision highp float;varying vec4 vColor;varying vec2 vNormal;varying vec2 vUV;varying vec2 vDashArray;varying float vCounter;varying float vTotalDistance;uniform bool uAntialias;uniform float uDashOffset;uniform float zoomUnits;uniform float thickness;
#if defined(USE_TEXTURE)
uniform float uTextureMargin;uniform sampler2D textureImage;
#endif
void main(){vec4 color=vColor;if(uAntialias){float blur=1.0;blur=1.0-smoothstep(0.8,1.0,length(vNormal));color.a*=blur;}
#if defined(USE_TEXTURE)
float segLen=uTextureMargin*zoomUnits;float textureLen=thickness*zoomUnits;float deltaX=mod(vUV.x,segLen);float middle=segLen/2.0;if(deltaX>=middle&&deltaX<=middle+textureLen){float uvx=(deltaX-middle)/textureLen;vec4 texture=texture2D(textureImage,vec2(uvx,vUV.y));color=texture.a>=0.5 ? texture : color;}
#endif
if(vDashArray.y>0.0){float offset=uDashOffset*zoomUnits/vTotalDistance;color.a*=(1.0-step(vDashArray.x,mod(vCounter+offset,vDashArray.x+vDashArray.y)));}gl_FragColor=color;}`,defines:_},this),this.prevBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.currentBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.nextBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.directionBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.colorBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.counterBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.uvBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Br({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),_=[{stride:12,name:"previous",buffer:this.prevBuffer,size:3,type:"FLOAT",offset:0},{stride:12,name:"position",buffer:this.currentBuffer,size:3,type:"FLOAT",offset:0},{stride:12,name:"next",buffer:this.nextBuffer,size:3,type:"FLOAT",offset:0},{stride:4,name:"direction",buffer:this.directionBuffer,size:1,type:"FLOAT",offset:0},{stride:16,name:"aColor",buffer:this.colorBuffer,size:4,type:"FLOAT",offset:0},{stride:8,name:"aDistance",buffer:this.counterBuffer,size:1,type:"FLOAT",offset:0},{stride:8,name:"aTotalDistance",buffer:this.counterBuffer,size:1,type:"FLOAT",offset:4}],_=_.concat(this.getCommonAttributes()),G0[h.style]&&(_.push({stride:8,name:"uv",buffer:this.uvBuffer,size:2,type:"FLOAT",offset:0}),this.setOptions({texture:G0[h.style]}),this.loadTexture()),this.vertexArray=new Yi({gl:s,program:this.program,attributes:_})}},{key:"onDestroy",value:function(){}},{key:"onChanged",value:function(s,h){var _=this;if(this.gl){this.initData();for(var x=s.color,S=[],C=0;C<h.length;C++){var R=[],H=h[C].geometry.coordinates;H&&0<H.length&&(R=h[C].geometry.type==="MultiPolygon"?H.reduce(function(F,V){return F.concat(V)})[0].map(function(F){return _.normizedPoint(F)}):h[C].geometry.type==="Polygon"||h[C].geometry.type==="MultiLineString"?H[0].map(function(F){return _.normizedPoint(F)}):H.map(function(F){return _.normizedPoint(F)})),H=this.getProperty("color",x,h[C]),H=this.getProperty("lineColor",x,h[C]),H=this.normizedColor(H);for(var Z=this.addMultipleCoords(R),P=0;P<Z.length;P++)this.processData(this.dataMgr,Z[P],H);if(s.enablePicked)for(H=this.indexToRgb(C),Z=0;Z<R.length;Z++)S.push(H[0]/255,H[1]/255,H[2]/255),S.push(H[0]/255,H[1]/255,H[2]/255),s.repeat&&(S.push(H[0]/255,H[1]/255,H[2]/255),S.push(H[0]/255,H[1]/255,H[2]/255),S.push(H[0]/255,H[1]/255,H[2]/255),S.push(H[0]/255,H[1]/255,H[2]/255))}this.counterBuffer.updateData(new Float32Array(this.dataMgr.counter)),this.currentBuffer.updateData(new Float32Array(this.dataMgr.position)),this.prevBuffer.updateData(new Float32Array(this.dataMgr.prev)),this.nextBuffer.updateData(new Float32Array(this.dataMgr.next)),this.directionBuffer.updateData(new Float32Array(this.dataMgr.direction)),this.colorBuffer.updateData(new Float32Array(this.dataMgr.color)),this.indexBuffer.updateData(new Uint32Array(this.dataMgr.index)),this.isUseTexture&&this.uvBuffer.updateData(new Float32Array(this.dataMgr.uv)),s.enablePicked&&this.pickBuffer.updateData(new Float32Array(S))}}},{key:"processData",value:function(s,h,_){var x,S,C,R,H,Z,P,F,V=h.length,j=s.position.length/6,q=Vi(h),ee=q.arr,Q=q.total;q=bi(ee.map(function(Ie){return[Ie,Q]})),ee=ee.map(function(Ie){return[Ie,0,Ie,1]});var ne=bi(h.map(function(Ie){return-1}),!0),le=bi(h),Ae=bi(h.map(Ao(-1))),Se=bi(h.map(Ao(1)));h=bi(h.map(function(Ie){return _})),V=us(V,j),(x=s.uv).push.apply(x,Yn(Gi(ee))),(S=s.counter).push.apply(S,Yn(Gi(q))),(C=s.position).push.apply(C,Yn(Gi(le))),(R=s.prev).push.apply(R,Yn(Gi(Ae))),(H=s.next).push.apply(H,Yn(Gi(Se))),(Z=s.direction).push.apply(Z,Yn(ne)),(P=s.color).push.apply(P,Yn(Gi(h))),(F=s.index).push.apply(F,Yn(V))}},{key:"render",value:function(s){var h=s.gl,_=s.matrix,x=this.dataMgr;if(x&&!(0>=x.index.length)&&this.map){var S=this.getOptions(),C=this.program;C.use(h),s=Lr(this.getCommonUniforms(s),{uMatrix:_,uFlat:S.flat,uUnitPx:S.unit==="px",zoomUnits:this.map.getZoomUnits(),devicePixelRatio:window.devicePixelRatio,thickness:S.width,uDashArray:S.dashArray,uDashOffset:S.dashOffset,uAntialias:S.antialias,uOffset:S.offset}),this.isUseTexture&&(s=Lr(s,{uTextureMargin:140,textureImage:this.texture})),C.setUniforms(s),this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:S.blend==="lighter"?[h.SRC_ALPHA,h.ONE]:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA],polygonOffset:S.polygonOffset}),this.indexBuffer.bind(),this.vertexArray.bind(),h.drawElements(h.TRIANGLES,x.index.length,h.UNSIGNED_INT,0)}}},{key:"loadTexture",value:function(s){var h=this,_=this.getOptions();_.texture?pr(this.gl,_.texture,function(x,S){h.image=S,h.texture=x,s&&s(),h.webglLayer.render()}):(this.image=this.texture=null,s&&s())}}]),p}(ki),Op=function(){function d(p){hr(this,d),this.join=p.join||"miter",this.cap=p.cap||"butt",this.thickness=p.thickness||4,this.miterLimit=p.miterLimit||2*this.thickness,this.dash=p.dash||!1,this.complex={positions:[],indices:[],normals:[],colors:[],uvs:[],startIndex:0,maxDistance:0},this._lastFlip=-1,this._started=!1,this._normal=null,this._totalDistance=0,this._colorFlag=!1,this._count=0}return Mr(d,[{key:"extrude",value:function(p,s,h,_){var x=this.complex;if(1>=p.length)return x;this._lastFlip=-1,this._started=!1,this._normal=null,this._totalDistance=0;for(var S=p.length,C=x.startIndex,R=null,H=1;H<S;H++){var Z=R||p[H-1],P=p[H],F=H<S-1?p[H+1]:null;F&&P[0]===F[0]&&P[1]===F[1]&&P[2]===F[2]?R=Z:(Z=this._segment(x,C,Z,P,F,s,h,_),Z!==-1&&(C+=Z,R=null))}return this.dash&&(x.maxDistance=Math.max(this._totalDistance,x.maxDistance)),x.startIndex=x.positions.length/7,x}},{key:"_segment",value:function(p,s,h,_,x,S,C,R){R[0]instanceof Array&&(this._colorFlag=!0);var H=0,Z=Qn.create(),P=Qn.create(),F=Qn.create(),V=Qn.create(),j=p.indices,q=p.positions,ee=p.normals,Q=p.colors;p=p.uvs;var ne=this.cap==="square",le=this.cap==="round",Ae=this.join==="bevel",Se=this.join==="round",Ie=[_[0],_[1]],Be=[h[0],h[1]];_i(P,Ie,Be);var nt=0;if(this.dash&&(nt=this._calcDistance(Ie,Be),this._totalDistance+=nt),this._normal||(this._normal=Qn.create(),wo(this._normal,P)),!this._started)if(this._started=!0,ne){Be=Qn.create();var rt=Qn.create();Qn.add(Be,this._normal,P),Qn.sub(rt,this._normal,P),ee.push(rt[0],rt[1],0),ee.push(Be[0],Be[1],0),q.push(h[0],h[1],h[2],this._totalDistance-nt,S,C,0),q.push(h[0],h[1],h[2],this._totalDistance-nt,-S,C,0),p.push(this._totalDistance-nt,0,this._totalDistance-nt,1),this._colorFlag?(Q.push(R[0][0],R[0][1],R[0][2],R[0][3]),Q.push(R[0][0],R[0][1],R[0][2],R[0][3])):(Q.push(R[0],R[1],R[2],R[3]),Q.push(R[0],R[1],R[2],R[3]))}else if(le){Be=Qn.fromValues(-P[0],-P[1]),rt=Qn.create(),Qn.sub(rt,this._normal,P),Qn.normalize(rt,rt);var St=Qn.create();Qn.add(St,this._normal,P),Qn.normalize(St,St);var Pt=Qn.fromValues(this._normal[0],this._normal[1]),$t=Qn.fromValues(-this._normal[0],-this._normal[1]);for(ee.push(Be[0],Be[1],0),ee.push(rt[0],rt[1],0),ee.push(-St[0],-St[1],0),ee.push(Pt[0],Pt[1],0),ee.push($t[0],$t[1],0),Be=0;5>Be;Be++)q.push(h[0],h[1],h[2],this._totalDistance-nt,S,C,0),p.push(this._totalDistance-nt,0),this._colorFlag?Q.push(R[0][0],R[0][1],R[0][2],R[0][3]):Q.push(R[0],R[1],R[2],R[3]);j.push(s+0,s+2,s+1,s+1,s+2,s+3,s+3,s+2,s+4),H+=3,s+=3}else this._extrusions(q,ee,p,Q,h,this._normal,S,this._totalDistance-nt,C,R,0);if(j.push.apply(j,Yn(this._lastFlip===-1?[s+0,s+1,s+2]:[s+1,s+0,s+2])),x)_i(F,[x[0],x[1]],Ie),this._count++,Qn.create(),Qn.add(V,P,F),Qn.normalize(V,V),le=Qn.fromValues(-V[1],V[0]),P=Qn.fromValues(-P[1],P[0]),P=[S/Qn.dot(le,P),le],P=Xi(P,2),le=P[0],P=P[1],V=0<Qn.dot(V,this._normal)?-1:1,Ae||this.join!=="miter"||Math.abs(le)>this.miterLimit&&(Ae=!0),Ae?(Se=Math.min(2*S,Math.abs(le)),ee.push(this._normal[0],this._normal[1],0),ee.push(P[0],P[1],0),q.push(_[0],_[1],_[2],this._totalDistance,S*V,C,0),q.push(_[0],_[1],_[2],this._totalDistance,-Se*V,C,0),j.push.apply(j,Yn(this._lastFlip===-V?[s+2,s+1,s+3]:[s+0,s+2,s+3])),wo(Z,F),Qn.copy(this._normal,Z),ee.push(this._normal[0],this._normal[1],0),q.push(_[0],_[1],_[2],this._totalDistance,S*V,C,0),j.push.apply(j,Yn(V===1?[s+2,s+3,s+4]:[s+3,s+2,s+4])),this._flipedUV(p,this._totalDistance,V,!0),this._colorFlag?(Q.push(R[this._count][0],R[this._count][1],R[this._count][2],R[this._count][3]),Q.push(R[this._count][0],R[this._count][1],R[this._count][2],R[this._count][3]),Q.push(R[this._count][0],R[this._count][1],R[this._count][2],R[this._count][3])):(Q.push(R[0],R[1],R[2],R[3]),Q.push(R[0],R[1],R[2],R[3]),Q.push(R[0],R[1],R[2],R[3])),H+=3):Se?(Se=Math.min(2*S,Math.abs(le)),ee.push(this._normal[0],this._normal[1],0),ee.push(P[0],P[1],0),ee.push(P[0],P[1],0),q.push(_[0],_[1],_[2],this._totalDistance,S*V,C,0),q.push(_[0],_[1],_[2],this._totalDistance,S*V,C,0),q.push(_[0],_[1],_[2],this._totalDistance,-Se*V,C,0),j.push.apply(j,Yn(this._lastFlip===-V?[s+2,s+1,s+4,s+2,s+4,s+3]:[s+0,s+2,s+4,s+2,s+3,s+4])),wo(Z,F),Qn.copy(this._normal,Z),ee.push(this._normal[0],this._normal[1],0),q.push(_[0],_[1],_[2],this._totalDistance,S*V,C,0),j.push.apply(j,Yn(V===1?[s+4,s+3,s+5]:[s+3,s+4,s+5])),this._flipedUV(p,this._totalDistance,V,!1),this._colorFlag?(Q.push(R[this._count][0],R[this._count][1],R[this._count][2],R[this._count][3]),Q.push(R[this._count][0],R[this._count][1],R[this._count][2],R[this._count][3]),Q.push(R[this._count][0],R[this._count][1],R[this._count][2],R[this._count][3]),Q.push(R[this._count][0],R[this._count][1],R[this._count][2],R[this._count][3])):(Q.push(R[0],R[1],R[2],R[3]),Q.push(R[0],R[1],R[2],R[3]),Q.push(R[0],R[1],R[2],R[3]),Q.push(R[0],R[1],R[2],R[3])),H+=4):(this._extrusions(q,ee,p,Q,_,P,le,this._totalDistance,C,R,this._count),j.push.apply(j,Yn(this._lastFlip===-1?[s+2,s+1,s+3]:[s+2,s+0,s+3])),V=-1,Qn.copy(this._normal,P),H+=2),this._lastFlip=V;else if(wo(this._normal,P),Z=R.length-1,ne?(F=Qn.create(),Se=Qn.create(),Qn.add(F,P,this._normal),Qn.sub(Se,P,this._normal),ee.push(F[0],F[1],0),ee.push(Se[0],Se[1],0),q.push(_[0],_[1],_[2],this._totalDistance,S,C,0),q.push(_[0],_[1],_[2],this._totalDistance,S,C,0),p.push(this._totalDistance,0,this._totalDistance,1),this._colorFlag?(Q.push(R[Z][0],R[Z][1],R[Z][2],R[Z][3]),Q.push(R[Z][0],R[Z][1],R[Z][2],R[Z][3])):(Q.push(R[0],R[1],R[2],R[3]),Q.push(R[0],R[1],R[2],R[3]))):this._extrusions(q,ee,p,Q,_,this._normal,S,this._totalDistance,C,R,Z),j.push.apply(j,Yn(this._lastFlip===-1?[s+2,s+1,s+3]:[s+2,s+0,s+3])),H+=2,le){for(F=Qn.create(),Qn.add(F,P,this._normal),Qn.normalize(F,F),Se=Qn.create(),Qn.sub(Se,P,this._normal),Qn.normalize(Se,Se),P=Qn.fromValues(P[0],P[1]),ee.push(F[0],F[1],0),ee.push(Se[0],Se[1],0),ee.push(P[0],P[1],0),ee=0;3>ee;ee++)q.push(_[0],_[1],_[2],this._totalDistance,S,C,0),p.push(this._totalDistance,0),this._colorFlag?Q.push(R[Z][0],R[Z][1],R[Z][2],R[Z][3]):Q.push(R[0],R[1],R[2],R[3]);j.push(s+2,s+3,s+4,s+4,s+3,s+5,s+4,s+5,s+6),H+=3}return H}},{key:"_extrusions",value:function(p,s,h,_,x,S,C,R,H,Z,P){s.push(S[0],S[1],0),s.push(S[0],S[1],0),p.push(x[0],x[1],x[2],R,C,H,0),p.push(x[0],x[1],x[2],R,-C,H,0),h.push(R,0,R,1),this._colorFlag?(_.push(Z[P][0],Z[P][1],Z[P][2],Z[P][3]),_.push(Z[P][0],Z[P][1],Z[P][2],Z[P][3])):(_.push(Z[0],Z[1],Z[2],Z[3]),_.push(Z[0],Z[1],Z[2],Z[3]))}},{key:"_calcDistance",value:function(p,s){return Math.sqrt(Math.pow(p[0]-s[0],2)+Math.pow(p[1]-s[1],2))}},{key:"_flipedUV",value:function(p,s,h,_){_?h===-1?p.push(s,0,s,1,s,0):p.push(s,1,s,0,s,1):h===-1?p.push(s,0,s,0,s,1,s,0):p.push(s,1,s,1,s,0,s,1)}}]),d}(),V0={normal:null,road:To,arrow:function(){var d=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},p=d.width;d=d.color;var s=zi(),h=s.canvas;return s=s.ctx,s.save(),s.moveTo(5,0),s.lineTo(32,16),s.lineTo(5,32),s.strokeStyle=d||"#fff",s.lineWidth=p||8,s.stroke(),s.restore(),h}},y2=function(d){function p(s,h){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s,h)),s.name="LineLayer",s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{style:"normal",styleOptions:{},color:"rgba(25, 25, 250, 1)",blend:"default",lineJoin:"miter",lineCap:"butt",unit:"px",width:4,offset:0,antialias:!1,dashArray:[0,0],dashOffset:0,animation:!1,interval:.1,duration:2,trailLength:.5,minZoom:2,maxZoom:25,polygonOffset:[0,0],depthTest:!0,depthWrite:!0,depthFunc:"lequal"}}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions(),_=[];h.enablePicked&&_.push("PICK"),V0[h.style]&&(this.isUseTexture=!0,this.prevStyle=h.style,this.prevStyleOptions=h.styleOptions,_.push("USE_TEXTURE")),h.animation===!0&&(this.isAnimateLine=!0,this.date=new Date,this.autoUpdate=!0,_.push("USE_LINE_ANIMATION")),h.useDash===!0&&_.push("USE_SIMPLE_DASH"),this.program=new Jn(this.gl,{vertexShader:`precision highp float;uniform vec4 uSelectedColor;uniform mat4 u_matrix;uniform vec2 u_dash_array;uniform float u_zoom_units;uniform float u_zIndex;uniform bool u_unit_px;attribute vec4 a_color;attribute vec3 a_position;attribute vec3 a_normal;attribute float a_distance;attribute float a_total_distance;attribute float a_width;attribute float a_offset;
#if defined(USE_TEXTURE)
attribute vec2 uv;
#endif
varying vec4 v_color;varying vec2 v_normal;varying vec2 v_uv;varying vec2 v_dash_array;varying float v_total_distance;varying float v_counter;varying float v_width;
#if defined(USE_SIMPLE_DASH)
varying vec3 v_position;
#endif
void main(){v_width=a_width;v_color=a_color;v_counter=a_distance/a_total_distance;v_dash_array=u_dash_array/a_total_distance;if(u_unit_px){v_dash_array*=u_zoom_units;}v_total_distance=a_total_distance;v_normal=vec2(normalize(a_normal.xy)*sign(a_width));
#if defined(USE_TEXTURE)
v_uv=uv;
#endif
#if defined(PICK)
if(mapvIsPicked()){v_color=uSelectedColor;}
#endif
vec2 extrude=a_normal.xy*a_width/2.0;if(u_unit_px){extrude*=u_zoom_units;}vec2 offsetXY=a_normal.xy*-a_offset;float offsetZ=a_offset/100.0+u_zIndex;if(u_unit_px){offsetXY*=u_zoom_units;offsetZ*=u_zoom_units;}
#if defined(USE_SIMPLE_DASH)
v_position=a_position;
#endif
gl_Position=u_matrix*vec4(a_position.xy+extrude+offsetXY,a_position.z+offsetZ,1.0);}`,fragmentShader:`precision highp float;varying vec4 v_color;varying vec2 v_normal;varying vec2 v_uv;varying vec2 v_dash_array;varying float v_counter;varying float v_total_distance;varying float v_width;
#if defined(USE_SIMPLE_DASH)
varying vec3 v_position;
#endif
uniform bool u_antialias;uniform float u_dash_offset;uniform float u_zoom_units;
#if defined(USE_LINE_ANIMATION)
uniform bool u_animate;uniform float u_time;uniform float u_duration;uniform float u_interval;uniform float u_trail_length;
#endif
#if defined(USE_TEXTURE)
uniform float u_texture_width;uniform float u_texture_margin;uniform sampler2D u_sampler;
#endif
void main(){vec4 color=v_color;
#if defined(USE_SIMPLE_DASH)
if(mod(v_position.x,5.0)<3.0){discard;}
#endif
if(u_antialias){float blur=1.0;blur=1.0-smoothstep(0.8,1.0,length(v_normal));color.a*=blur;}
#if defined(USE_LINE_ANIMATION)
if(u_animate){float alpha=1.0-fract(mod(1.0-v_counter,u_interval)*(1.0/u_interval)+u_time/u_duration);alpha=(alpha+u_trail_length-1.0)/u_trail_length;color.a*=alpha;gl_FragColor=color;return;}
#endif
#if defined(USE_TEXTURE)
float margin_width=u_texture_margin*u_zoom_units;float margin_width_half=margin_width/2.0;float texture_width=u_texture_width*u_zoom_units;float delta=mod(v_uv.x,texture_width+margin_width);if(delta>=margin_width_half&&delta<=margin_width_half+texture_width){float uvx=(delta-margin_width_half)/texture_width;vec4 texture=texture2D(u_sampler,vec2(uvx,v_uv.y));color=texture.a>=0.5 ? texture : color;}
#endif
if(v_dash_array.y>0.0){float offset=u_dash_offset*u_zoom_units/v_total_distance;color.a*=(1.0-step(v_dash_array.x,mod(v_counter+offset,v_dash_array.x+v_dash_array.y)));}gl_FragColor=color;}`,defines:_},this),this.positionBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.colorBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.normalBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Br({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),_=[{stride:28,name:"a_position",buffer:this.positionBuffer,size:3,type:"FLOAT",offset:0},{stride:28,name:"a_distance",buffer:this.positionBuffer,size:1,type:"FLOAT",offset:12},{stride:28,name:"a_width",buffer:this.positionBuffer,size:1,type:"FLOAT",offset:16},{stride:28,name:"a_offset",buffer:this.positionBuffer,size:1,type:"FLOAT",offset:20},{stride:28,name:"a_total_distance",buffer:this.positionBuffer,size:1,type:"FLOAT",offset:24},{stride:12,name:"a_normal",buffer:this.normalBuffer,size:3,type:"FLOAT",offset:0},{stride:16,name:"a_color",buffer:this.colorBuffer,size:4,type:"FLOAT",offset:0}],_=_.concat(this.getCommonAttributes()),this.isUseTexture&&(this.uvBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),_.push({stride:8,name:"uv",buffer:this.uvBuffer,size:2,type:"FLOAT",offset:0}),h=(0,V0[h.style])(h.styleOptions),this.setOptions({texture:h}),this.loadTexture()),this.vertexArray=new Yi({gl:s,program:this.program,attributes:_})}},{key:"onDestroy",value:function(){}},{key:"onChanged",value:function(s,h){var _=this,x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};if(this.gl)if(!this.isUseTexture||this.prevStyle===s.style&&Qf(this.prevStyleOptions)===Qf(s.styleOptions))this.parseData(s,h,x);else{this.prevStyle=s.style,this.prevStyleOptions=s.styleOptions;var S=(0,V0[s.style])(s.styleOptions);this.setOptions({texture:S}),this.loadTextureTime&&clearTimeout(this.loadTextureTime),this.loadTextureTime=setTimeout(function(){_.loadTexture(function(){_.parseData(s,h,x)})},0)}}},{key:"onParseProperties",value:function(s){return this.normizedColor(s)}},{key:"parseData",value:function(s,h,_){var x=this,S=s.dashArray,C=s.width,R=s.color,H=s.offset;S=!!this.isUseTexture||!!S[1]||!!this.isAnimateLine;for(var Z=new Op({dash:S,cap:s.lineCap,join:s.lineJoin,miterLimit:s.miterLimit,thickness:C}),P=[],F=function(j){var q=h[j].geometry.coordinates;q&&0<q.length&&(h[j].geometry.type==="MultiPolygon"?q=q.reduce(function(Se,Ie){return Se.concat(Ie)}):h[j].geometry.type==="LineString"&&(q=[q]),q=q.map(function(Se){return Se=Se.map(function(Ie){return x.normizedPoint(Ie)}),_.closePath===!0&&Se[0].toString()!==Se[Se.length-1].toString()&&Se.push(Se[0]),Se}));var ee=x.getProperty("color",R,h[j]);ee=x.getProperty("lineColor",ee,h[j]),ee=x.onParseProperties(ee,h[0].geometry.coordinates.length);var Q=x.getProperty("width",C,h[j]);Q=Number(Q);var ne=x.getProperty("offset",H,h[j]);ne=Number(ne);var le=Z.complex.startIndex;q=x.addMultipleCoords(q);for(var Ae=0;Ae<q.length;Ae++)q[Ae].forEach(function(Se){Z.extrude(Se,Q,ne,ee)});if(s.enablePicked)for(j=x.indexToRgb(j),q=Z.complex.startIndex;le<q;le++)P.push(j[0]/255,j[1]/255,j[2]/255),s.repeat&&(P.push(j[0]/255,j[1]/255,j[2]/255),P.push(j[0]/255,j[1]/255,j[2]/255))},V=0;V<h.length;V++)F(V);if(F=Z.complex,S)for(V=0;V<F.positions.length/7;V++)F.positions[7*V+6]=F.maxDistance;this.lineData=F,this.positionBuffer.updateData(new Float32Array(F.positions)),this.normalBuffer.updateData(new Float32Array(F.normals)),this.colorBuffer.updateData(new Float32Array(F.colors)),this.indexBuffer.updateData(new Uint32Array(F.indices)),this.isUseTexture&&this.uvBuffer.updateData(new Float32Array(F.uvs)),s.enablePicked&&this.pickBuffer.updateData(new Float32Array(P))}},{key:"render",value:function(s){var h=s.gl,_=s.matrix,x=this.lineData;if(x&&!(0>=x.indices.length)&&this.map){var S=this.getOptions(),C=this.program;C.use(h),s=Lr(this.getCommonUniforms(s),{u_matrix:_,u_zoom_units:this.map.getZoomUnits(),u_dash_array:S.dashArray,u_dash_offset:S.dashOffset,u_antialias:S.antialias,u_unit_px:S.unit==="px",u_zIndex:S.zIndex}),this.isUseTexture&&(s=Lr(s,{u_texture_width:S.width,u_texture_margin:140,u_sampler:this.texture})),this.isAnimateLine&&(_=this.map.getZoom(),s=Lr(s,{u_time:(new Date-this.date)/1e3,u_animate:!!(_>=S.minZoom&&_<=S.maxZoom&&this.autoUpdate),u_duration:S.duration,u_interval:S.interval,u_trail_length:S.trailLength})),C.setUniforms(s),C=h.LEQUAL,S.depthFunc&&(C=h[S.depthFunc.toUpperCase()]),this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:Cr(h,S.blend),polygonOffset:S.polygonOffset,depthTest:S.depthTest,depthMask:S.depthWrite,depthFunc:C}),this.indexBuffer.bind(),this.vertexArray.bind(),h.drawElements(h.TRIANGLES,x.indices.length,h.UNSIGNED_INT,0)}}},{key:"loadTexture",value:function(s){var h=this,_=this.getOptions();_.texture?pr(this.gl,_.texture,function(x,S){h.image=S,h.texture=x,s&&s(),h.webglLayer.render()}):(this.image=this.texture=null,s&&s())}}]),p}(ki),tc=function(d){function p(s,h){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s,h)),s.name="LineRainbowLayer",s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{style:"normal",styleOptions:{},color:"rgba(25, 25, 250, 1)",blend:"normal",lineJoin:"miter",lineCap:"butt",unit:"px",width:4,offset:0,antialias:!1,dashArray:[0,0],dashOffset:0,animation:!1,interval:.1,duration:2,trailLength:.5,minZoom:2,maxZoom:25,polygonOffset:[0,0],depthTest:!0,depthWrite:!0}}},{key:"onDestroy",value:function(){this.options&&this.options.enablePicked&&(this.pickBuffer=null),this.options=this.data=this.indexBuffer=this.normalBuffer=this.colorBuffer=this.positionBuffer=this.program=this.vertexArray=null}},{key:"onParseProperties",value:function(s,h){var _=s.length;if(s instanceof Array){var x=[];if(_<h){var S=Math.floor(h/_);h%=_;for(var C=0,R=0;C<_;C++,R++)for(var H=R<h?S+1:S,Z=0;Z<H;Z++)x.push(s[C]);s=x}for(_=[],S=0;S<s.length;S++)_.push(this.normizedColor(s[S]))}else _=this.normizedColor(s);return _}}]),p}(y2),Ng=function(){function d(p,s){hr(this,d),this.layer=p,this.gl=s,this.initData()}return Mr(d,[{key:"initData",value:function(){this.outWall3d={vertex:[],vertexBuffer:[],index:[],indexBuffer:[]},this.maxLength=0}},{key:"getData",value:function(){return this.outWall3d}},{key:"getMaxDataLength",value:function(){return this.maxLength}},{key:"onLayerChange",value:function(p,s){this.initData();var h=p.color,_=p.height,x=p.gradient;p=this.gl;for(var S=0;S<s.length;S++){var C=s[S].geometry.coordinates,R=C.length;this.maxLength=R>this.maxLength?R:this.maxLength;for(var H=[],Z=0;Z<R;Z++){var P=this.layer.normizedPoint(C[Z]);H.push(P)}R=s[S].color||h,"properties"in s[S]&&"color"in s[S].properties&&(R=s[S].properties.color),x||Object.prototype.toString.call(R)!=="[object Function]"||(R=R(s[S])),C=this.layer.normizedColor(x?x[0]:R),R=this.layer.normizedColor(x?x[1]:R),Z=s[S].height||_,"properties"in s[S]&&"height"in s[S].properties&&(Z=s[S].properties.height),Object.prototype.toString.call(Z)==="[object Function]"&&(Z=Z(s[S])),this.processData(this.outWall3d,H,C,R,Z)}for(s=0;s<this.outWall3d.vertex.length;s++){for(h=[],_=this.outWall3d.vertex[s].length,x=0;x<_;x++)h.push.apply(h,Yn(this.outWall3d.vertex[s][x]));_=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,_),p.bufferData(p.ARRAY_BUFFER,new Float32Array(h),p.STATIC_DRAW),this.outWall3d.vertexBuffer[s]=_,p.bindBuffer(p.ARRAY_BUFFER,null),_=p.createBuffer(),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,_),p.bufferData(p.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.outWall3d.index[s]),p.STATIC_DRAW),this.outWall3d.indexBuffer[s]=_,p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,null)}}},{key:"processData",value:function(p,s,h,_,x){var S=p.vertex[p.vertex.length-1],C=p.index[p.index.length-1],R=s.length;(!C||65536<=C.length+2*R+2)&&(S=[],C=[],p.vertex.push(S),p.index.push(C)),(p=S.length)&&C.push(p-1,p);for(var H=p=0;H<R;H++){var Z=[],P=[],F=s[H];Z.push(F[0],F[1]),Z.push(F[2]?Number(F[2])+x:x),Z.push(F[3]?Number(F[3]):H),Z.push(p),Z.push(h[0],h[1],h[2],h[3]),P.push(F[0],F[1]),P.push(F[2]?Number(F[2]):0),P.push(F[3]?Number(F[3]):H),P.push(p),P.push(_[0],_[1],_[2],_[3]),F=S.length,S.push(Z,P),C.push(F,F+1),H<R-1&&(p+=this.getDistance(s[H],s[H+1]))}}},{key:"getDistance",value:function(p,s){return Math.sqrt(Math.pow(Math.abs(p[0]-s[0]),2)+Math.pow(Math.abs(p[1]-s[1]),2))}}]),d}(),W0=function(d){function p(s,h){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s,h)),s.startTime=s.options.startTime||0,s.endTime=s.options.endTime,s.time=s.startTime,s.autoUpdate=!0,s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{height:100,color:[1,1,1,1],trailLength:3,step:.1}}},{key:"initialize",value:function(s){this.gl=s,this.dataMgr=new Ng(this,this.gl),this.program=new Jn(this.gl,{vertexShader:"uniform mat4 u_matrix;uniform float currentTime;uniform float trailLength;attribute vec4 aPos;attribute float aDistance;attribute vec4 aColor;varying vec4 vColor;varying float vHeight;varying float vTime;varying float vDistance;void main(){vTime=1.0-((currentTime-aPos.w)/trailLength);vHeight=aPos.z;vColor=aColor;vDistance=aDistance;gl_Position=u_matrix*vec4(aPos.xyz,1.0);}",fragmentShader:"precision highp float;varying vec4 vColor;varying float vTime;varying float vDistance;varying float vHeight;uniform float currentTime;void main(){if(vTime>1.0||vTime<0.0){}float radius=2.5;float distance=vDistance+currentTime*20.0;float modDistance=mod(distance,9.0);float alpha=1.0;if(modDistance>radius*2.0){discard;}else{float x=abs(modDistance-radius);float y=abs(vHeight-radius);float dis=sqrt(pow(x,2.0)+pow(y,2.0));if(dis>radius){discard;}alpha=dis/radius;}gl_FragColor=vec4(vColor.rgb,1.0-alpha);}"})}},{key:"onChanged",value:function(s,h){this.gl&&(this.dataMgr.onLayerChange(s,h),s.endTime===void 0&&(this.endTime=this.dataMgr.getMaxDataLength()))}},{key:"render",value:function(s){var h=s.gl,_=s.matrix;if((s=this.dataMgr.getData())&&!(0>=s.vertex.length)){var x=this.getOptions(),S=this.program;for(h.useProgram(S.program),this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA]}),h.enableVertexAttribArray(S.attributes.aPos),h.enableVertexAttribArray(S.attributes.aDistance),h.enableVertexAttribArray(S.attributes.aColor),h.uniformMatrix4fv(S.uniforms.u_matrix,!1,_),h.uniform1f(S.uniforms.currentTime,this.time),h.uniform1f(S.uniforms.trailLength,x.trailLength),_=0;_<s.vertex.length;_++)if(!(0>=s.vertex[_].length)){var C=s.vertex[_],R=new Float32Array(C[0]).BYTES_PER_ELEMENT;C=R*C[0].length,h.bindBuffer(h.ARRAY_BUFFER,s.vertexBuffer[_]),h.vertexAttribPointer(S.attributes.aPos,4,h.FLOAT,!1,C,0),h.vertexAttribPointer(S.attributes.aDistance,1,h.FLOAT,!1,C,4*R),h.vertexAttribPointer(S.attributes.aColor,4,h.FLOAT,!1,C,5*R),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,s.indexBuffer[_]),h.drawElements(h.TRIANGLE_STRIP,s.index[_].length,h.UNSIGNED_SHORT,0),h.bindBuffer(h.ARRAY_BUFFER,null),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,null)}this.time+=x.step,this.time>this.endTime&&(this.time=this.startTime)}}}]),p}(ki),Bg=function(d,p,s,h){if(!(d instanceof p)||h!==void 0&&h in d)throw TypeError(s+": incorrect invocation!");return d},mu=M(function(d){var p={},s={};d=d.exports=function(h,_,x,S,C){C=C?function(){return h}:hg(h),x=uo(x,S,_?2:1),S=0;var R,H;if(typeof C!="function")throw TypeError(h+" is not iterable!");if(C===void 0||Ws.Array!==C&&Jf[M0]!==C){for(S=C.call(h);!(H=S.next()).done;)if(C=yp(S,x,H.value,_),C===p||C===s)return C}else for(R=js(h.length);R>S;S++)if(C=_?x(ko(H=h[S])[0],H[1]):x(h[S]),C===p||C===s)return C},d.BREAK=p,d.RETURN=s}),X0=ia("species"),x2=function(d,p){d=ko(d).constructor;var s;return d===void 0||(s=ko(d)[X0])==null?p:no(s)},A2=function(d,p,s){switch(p.length){case 0:return d();case 1:return d(p[0]);case 2:return d(p[0],p[1]);case 3:return d(p[0],p[1],p[2]);case 4:return d(p[0],p[1],p[2],p[3])}return d.apply(s,p)},d_=Un.process,w2=Un.setImmediate,od=Un.clearImmediate,Y0=Un.MessageChannel,zg=Un.Dispatch,C2=0,Dp={},Ug=function(){var d=+this;if(Dp.hasOwnProperty(d)){var p=Dp[d];delete Dp[d],p()}},p_=function(d){Ug.call(d.data)};if(!w2||!od)if(w2=function(d){for(var p=[],s=1;arguments.length>s;)p.push(arguments[s++]);return Dp[++C2]=function(){A2(typeof d=="function"?d:Function(d),p)},vi(C2),C2},od=function(d){delete Dp[d]},Hs(d_)=="process")var vi=function(d){d_.nextTick(uo(Ug,d,1))};else if(zg&&zg.now)vi=function(d){zg.now(uo(Ug,d,1))};else if(Y0){var af=new Y0,kg=af.port2;af.port1.onmessage=p_,vi=uo(kg.postMessage,kg,1)}else Un.addEventListener&&typeof postMessage=="function"&&!Un.importScripts?(vi=function(d){Un.postMessage(d+"","*")},Un.addEventListener("message",p_,!1)):vi="onreadystatechange"in(Fl?za.createElement("script"):{})?function(d){rp.appendChild(Fl?za.createElement("script"):{}).onreadystatechange=function(){rp.removeChild(this),Ug.call(d)}}:function(d){setTimeout(uo(Ug,d,1),0)};var _2=w2,m_=Un.MutationObserver||Un.WebKitMutationObserver,M2=Un.process,rc=Un.Promise,Z0=Hs(M2)=="process",q0={f:function(d){return new ti(d)}},sf=function(d){try{return{e:!1,v:d()}}catch(p){return{e:!0,v:p}}},g_=Un.navigator,S2=g_&&g_.userAgent||"",Hg=function(d,p){if(ko(d),Oo(p)&&p.constructor===d)return p;d=q0.f(d);var s=d.resolve;return s(p),d.promise},T2=function(d,p,s){for(var h in p)qo(d,h,p[h]);return d},E2=ia("species"),I2=function(d){d=typeof yi[d]=="function"?yi[d]:Un[d],na&&d&&!d[E2]&&Ua.f(d,E2,{configurable:!0,get:function(){return this}})},v_=function(){var d,p,s=function(){var C;for(Z0&&(C=M2.domain)&&C.exit();d;){var R=d.fn;d=d.next;try{R()}catch(H){throw d?h():p=void 0,H}}p=void 0,C&&C.enter()};if(Z0)var h=function(){M2.nextTick(s)};else if(!m_||Un.navigator&&Un.navigator.standalone)if(rc&&rc.resolve){var _=rc.resolve(void 0);h=function(){_.then(s)}}else h=function(){_2.call(Un,s)};else{var x=!0,S=document.createTextNode("");new m_(s).observe(S,{characterData:!0}),h=function(){S.data=x=!x}}return function(C){C={fn:C,next:void 0},p&&(p.next=C),d||(d=C,h()),p=C}}(),R2=Un.TypeError,ad=Un.process,L2=ad&&ad.versions,K0=L2&&L2.v8||"",nc=Un.Promise,bp=Bc(ad)=="process",ic=function(){},P2,ja=P2=q0.f,sd=!!function(){try{var d=nc.resolve(1),p=(d.constructor={})[ia("species")]=function(s){s(ic,ic)};return(bp||typeof PromiseRejectionEvent=="function")&&d.then(ic)instanceof p&&K0.indexOf("6.6")!==0&&S2.indexOf("Chrome/66")===-1}catch{}}(),jg=function(d){var p;return Oo(d)&&typeof(p=d.then)=="function"?p:!1},ys=function(d,p){if(!d._n){d._n=!0;var s=d._c;v_(function(){for(var h=d._v,_=d._s==1,x=0;s.length>x;){var S=void 0,C=void 0,R=void 0,H=s[x++],Z=_?H.ok:H.fail,P=H.resolve,F=H.reject,V=H.domain;try{Z?(_||(d._h==2&&tI(d),d._h=1),Z===!0?R=h:(V&&V.enter(),R=Z(h),V&&(V.exit(),S=!0)),R===H.promise?F(R2("Promise-chain cycle")):(C=jg(R))?C.call(R,P,F):P(R)):F(h)}catch(j){V&&!S&&V.exit(),F(j)}}d._c=[],d._n=!1,p&&!d._h&&y_(d)})}},y_=function(d){_2.call(Un,function(){var p=d._v,s=d._h!==1&&(d._a||d._c).length===0,h,_;if(s){var x=sf(function(){bp?ad.emit("unhandledRejection",p,d):(h=Un.onunhandledrejection)?h({promise:d,reason:p}):(_=Un.console)&&_.error&&_.error("Unhandled promise rejection",p)});d._h=bp||d._h!==1&&(d._a||d._c).length===0?2:1}if(d._a=void 0,s&&x.e)throw x.v})},tI=function(d){_2.call(Un,function(){var p;bp?ad.emit("rejectionHandled",d):(p=Un.onrejectionhandled)&&p({promise:d,reason:d._v})})},oc=function(d){var p=this;p._d||(p._d=!0,p=p._w||p,p._v=d,p._s=2,p._a||(p._a=p._c.slice()),ys(p,!0))},gu=function(d){var p=this,s;if(!p._d){p._d=!0,p=p._w||p;try{if(p===d)throw R2("Promise can't be resolved itself");(s=jg(d))?v_(function(){var h={_w:p,_d:!1};try{s.call(d,uo(gu,h,1),uo(oc,h,1))}catch(_){oc.call(h,_)}}):(p._v=d,p._s=1,ys(p,!1))}catch(h){oc.call({_w:p,_d:!1},h)}}};if(!sd){nc=function(d){Bg(this,nc,"Promise","_h"),no(d),ld.call(this);try{d(uo(gu,this,1),uo(oc,this,1))}catch(p){oc.call(this,p)}};var ld=function(d){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1};ld.prototype=T2(nc.prototype,{then:function(d,p){var s=ja(x2(this,nc));return s.ok=typeof d=="function"?d:!0,s.fail=typeof p=="function"&&p,s.domain=bp?ad.domain:void 0,this._c.push(s),this._a&&this._a.push(s),this._s&&ys(this,!1),s.promise},catch:function(d){return this.then(void 0,d)}});var vu=function(){var d=new ld;this.promise=d,this.resolve=uo(gu,d,1),this.reject=uo(oc,d,1)};q0.f=ja=function(d){return d===nc||d===ud?new vu(d):P2(d)}}tn(tn.G+tn.W+tn.F*!sd,{Promise:nc}),io(nc,"Promise"),I2("Promise");var ud=yi.Promise;tn(tn.S+tn.F*!sd,"Promise",{reject:function(d){var p=ja(this),s=p.reject;return s(d),p.promise}}),tn(tn.S+1*tn.F,"Promise",{resolve:function(d){return Hg(this===ud?nc:this,d)}}),tn(tn.S+tn.F*!(sd&&HC(function(d){nc.all(d).catch(ic)})),"Promise",{all:function(d){var p=this,s=ja(p),h=s.resolve,_=s.reject,x=sf(function(){var S=[],C=0,R=1;mu(d,!1,function(H){var Z=C++,P=!1;S.push(void 0),R++,p.resolve(H).then(function(F){P||(P=!0,S[Z]=F,--R||h(S))},_)}),--R||h(S)});return x.e&&_(x.v),s.promise},race:function(d){var p=this,s=ja(p),h=s.reject,_=sf(function(){mu(d,!1,function(x){p.resolve(x).then(s.resolve,h)})});return _.e&&h(_.v),s.promise}}),tn(tn.P+tn.R,"Promise",{finally:function(d){var p=x2(this,yi.Promise||Un.Promise),s=typeof d=="function";return this.then(s?function(h){return Hg(p,d()).then(function(){return h})}:d,s?function(h){return Hg(p,d()).then(function(){throw h})}:d)}}),tn(tn.S,"Promise",{try:function(d){var p=q0.f(this);return d=sf(d),(d.e?p.reject:p.resolve)(d.v),p.promise}});var O2=yi.Promise,D2=M(function(d){d.exports={default:O2,__esModule:!0}}),ac=m(D2),Zc=function(d,p){if(!Oo(d)||d._t!==p)throw TypeError("Incompatible receiver, "+p+" required!");return d},b2=Ua.f,Gg=jf.fastKey,Fp=na?"_s":"size",J0=function(d,p){var s=Gg(p);if(s!=="F")return d._i[s];for(d=d._f;d;d=d.n)if(d.k==p)return d},Q0={getConstructor:function(d,p,s,h){var _=d(function(x,S){Bg(x,_,p,"_i"),x._t=p,x._i=Xu(null),x._f=void 0,x._l=void 0,x[Fp]=0,S!=null&&mu(S,s,x[h],x)});return T2(_.prototype,{clear:function(){for(var x=Zc(this,p),S=x._i,C=x._f;C;C=C.n)C.r=!0,C.p&&(C.p=C.p.n=void 0),delete S[C.i];x._f=x._l=void 0,x[Fp]=0},delete:function(x){var S=Zc(this,p);if(x=J0(S,x)){var C=x.n,R=x.p;delete S._i[x.i],x.r=!0,R&&(R.n=C),C&&(C.p=R),S._f==x&&(S._f=C),S._l==x&&(S._l=R),S[Fp]--}return!!x},forEach:function(x){Zc(this,p);for(var S=uo(x,1<arguments.length?arguments[1]:void 0,3),C;C=C?C.n:this._f;)for(S(C.v,C.k,this);C&&C.r;)C=C.p},has:function(x){return!!J0(Zc(this,p),x)}}),na&&b2(_.prototype,"size",{get:function(){return Zc(this,p)[Fp]}}),_},def:function(d,p,s){var h=J0(d,p),_;return h?h.v=s:(d._l=h={i:_=Gg(p,!0),k:p,v:s,p:p=d._l,n:void 0,r:!1},d._f||(d._f=h),p&&(p.n=h),d[Fp]++,_!=="F"&&(d._i[_]=h)),d},getEntry:J0,setStrong:function(d,p,s){kf(d,p,function(h,_){this._t=Zc(h,p),this._k=_,this._l=void 0},function(){for(var h=this._k,_=this._l;_&&_.r;)_=_.p;return this._t&&(this._l=_=_?_.n:this._t._f)?h=="keys"?uu(0,_.k):h=="values"?uu(0,_.v):uu(0,[_.k,_.v]):(this._t=void 0,uu(1))},s?"entries":"values",!s,!0),I2(p)}};ia("species");var x_=Ua.f,A_=function(d,p){return function(s,h,_){var x=Object(Ba(s)),S=Dl(x);h=uo(h,_,3),_=js(S.length);var C=0;s=void 0;for(var R,H;_>C;C++)C in S&&(R=S[C],H=h(R,C,x));return s}}(0);(function(d,p,s,h,_,x){var S=Un[d],C=S,R="set",H=C&&C.prototype,Z={};return na&&typeof C=="function"&&H.forEach&&!hs(function(){new C().entries().next()})?(C=p(function(P,F){Bg(P,C,d,"_c"),P._c=new S,F!=null&&mu(F,_,P[R],P)}),A_("add clear delete forEach get has set keys values entries toJSON".split(" "),function(P){var F=P=="add"||P=="set";P in H&&!x&&qo(C.prototype,P,function(V,j){return Bg(this,C,P),!F&&x&&!Oo(V)?P=="get"?void 0:!1:(V=this._c[P](V===0?0:V,j),F?this:V)})}),x_(C.prototype,"size",{get:function(){return this._c.size}})):(C=h.getConstructor(p,d,_,R),T2(C.prototype,s),jf.NEED=!0),io(C,d),Z[d]=C,tn(tn.G+tn.W+tn.F,Z),h.setStrong(C,d,_),C})("Map",function(d){return function(){return d(this,0<arguments.length?arguments[0]:void 0)}},{get:function(d){return(d=Q0.getEntry(Zc(this,"Map"),d))&&d.v},set:function(d,p){return Q0.def(Zc(this,"Map"),d===0?0:d,p)}},Q0,!0),tn(tn.P+tn.R,"Map",{toJSON:function(d){return function(){if(Bc(this)!=d)throw TypeError(d+"#toJSON isn't generic");var p=[];return mu(this,!1,p.push,p,void 0),p}}("Map")}),function(d){tn(tn.S,d,{of:function(){for(var p=arguments.length,s=Array(p);p--;)s[p]=arguments[p];return new this(s)}})}("Map"),function(d){tn(tn.S,d,{from:function(p,s,h){var _;if(no(this),(_=s!==void 0)&&no(s),p==null)return new this;var x=[];if(_){var S=0,C=uo(s,h,2);mu(p,!1,function(R){x.push(C(R,S++))})}else mu(p,!1,x.push,x);return new this(x)}})}("Map");var w_=yi.Map,C_=M(function(d){d.exports={default:w_,__esModule:!0}}),qc=m(C_),__=M(function(d,p){p.__esModule=!0;var s=Wu&&Wu.__esModule?Wu:{default:Wu};p.default=function(h,_,x){return _ in h?(0,s.default)(h,_,{value:x,enumerable:!0,configurable:!0,writable:!0}):h[_]=x,h}}),Np=m(__),Kc,sc,Jc=(Kc={},Np(Kc,1,1),Np(Kc,2,1),Np(Kc,3,1),Kc),Al=(sc={},Np(sc,1,1),Np(sc,2,1),Np(sc,3,1),sc),cd=function(d){function p(s,h){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s,h)),s.vertCount=0,s.bufferMap={},s.bufferData=[],s.autoUpdate=!0,h=s.canvas=document.createElement("canvas"),s.ctx=h.getContext("2d"),s.iconHash=new qc,s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{color:[1,1,1,.8],speed:1,size:5,pointFade:!0,pointFadeBuffer:1,minLineLength:2,animationType:2,shapeType:2,depthTest:!1,delay:0,unit:"px",padding:0}}},{key:"initialize",value:function(s){this.gl=s,this.texture=null,this.isUseTexture=!1;var h=this.getOptions();this.updateUniformsFromOptions(h),this.program=new Jn(this.gl,{vertexShader:"precision highp float;attribute vec3 aPos;attribute vec3 aNextPos;attribute vec4 aColor;attribute float aIndex;attribute float aNextIndex;attribute float aLength;attribute float aSpeed;attribute float aDelay;attribute vec3 aUV;uniform float uSize;uniform mat4 u_matrix;uniform float uOriginSpeed;uniform float uElapsedSteps;uniform int uAnimationType;uniform int uPointFade;uniform float uPointFadeBuffer;uniform float uZoomUnits;varying float vAddOpacity;varying vec3 vUV;varying vec4 vColor;void main(){vColor=aColor;if(uAnimationType==1){if(abs(aIndex-mod(uElapsedSteps,aLength))>.1){gl_Position=vec4(-2.,-2.,0,1.0);return;}gl_Position=u_matrix*vec4(aPos.xyz,1.0);vAddOpacity=1.;}else if(uAnimationType==2){float lineLength=aLength-1.;float cIndex=mod(uElapsedSteps,lineLength);float rest=cIndex-aIndex;if(rest<1.&&rest>=0.){if(uPointFade==1){if(cIndex<uPointFadeBuffer){vAddOpacity=cIndex/uPointFadeBuffer;}else if(cIndex>lineLength-uPointFadeBuffer){vAddOpacity=(lineLength-cIndex)/uPointFadeBuffer;}else{vAddOpacity=1.;}}else{vAddOpacity=1.;}gl_Position=u_matrix*vec4(aPos.x+(aNextPos.x-aPos.x)*rest,aPos.y+(aNextPos.y-aPos.y)*rest,aPos.z+(aNextPos.z-aPos.z)*rest,1.0);}else{gl_Position=vec4(-2.,-2.,0,1.0);return;}}else if(uAnimationType==3){float speedRatio=aSpeed/uOriginSpeed;float percent=mod(mod(uElapsedSteps*aSpeed,aLength)/aLength-aDelay,1.0);if(percent<=aNextIndex&&percent>=aIndex){if(uPointFade==1){float fadePercent=uPointFadeBuffer*1000./aLength;if(percent<fadePercent){vAddOpacity=percent/fadePercent;}else if(percent>1.-fadePercent){vAddOpacity=(1.-percent)/fadePercent;}else{vAddOpacity=1.;}}else{vAddOpacity=1.;}float rest=(percent-aIndex)/(aNextIndex-aIndex);gl_Position=u_matrix*vec4(aPos.x+(aNextPos.x-aPos.x)*rest,aPos.y+(aNextPos.y-aPos.y)*rest,aPos.z+(aNextPos.z-aPos.z)*rest,1.0);}else{gl_Position=vec4(-2.,-2.,0,1.0);return;}}vUV=aUV;gl_PointSize=uSize/uZoomUnits;}",fragmentShader:"precision highp float;uniform int ushapeType;uniform bool uUseTexture;uniform sampler2D uSampler;varying float vAddOpacity;varying vec4 vColor;varying vec3 vUV;void main(){if(ushapeType==2){float d=distance(gl_PointCoord,vec2(0.5,0.5));if(d>0.5){discard;}gl_FragColor=vec4(vColor.rgb,vColor.a*vAddOpacity);}else if(ushapeType==3){float d=distance(gl_PointCoord,vec2(0.5,0.5));if(d>0.5){discard;}gl_FragColor=vec4(vColor.rgb,vColor.a*smoothstep(1.0,0.0,d*2.)*vAddOpacity);}else{gl_FragColor=vec4(vColor.rgb,vColor.a*vAddOpacity);}if(uUseTexture){float ratio=vUV.z;vec2 uv=vUV.xy;gl_FragColor=texture2D(uSampler,vec2(gl_PointCoord.x*ratio+uv.x,1.0-(uv.y+gl_PointCoord.y*ratio)));}}"}),this.buffer=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,this.buffer)}},{key:"bindAttributeBufferData",value:function(s,h,_,x){var S=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,S),_=new Float32Array(_),s.bufferData(s.ARRAY_BUFFER,_,s.STATIC_DRAW),this.bufferMap[h]={buffer:S,data:_,elementSize:x}}},{key:"onChanged",value:function(s,h){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};this.gl&&(Array.isArray(h)||(h=[]),this.processCache(s,h,_))}},{key:"processCache",value:function(s,h,_){var x=this;this.cachedData=[];for(var S=s.icon,C=s.speed,R=s.color,H=0;H<h.length;H++){var Z=h[H].geometry.coordinates,P=this.getProperty("color",R,h[H]);P=this.normizedColor(P);var F=this.getProperty("icon",S,h[H]),V=this.getProperty("speed",C,h[H]),j=this.getProperty("delay",0,h[H]);Z&&(this.cachedData.push({coordinates:Z,color:P,icon:F,speed:V,delay:j}),this.iconHash.get(F)||this.iconHash.set(F,F))}h=Qa(this.iconHash.entries()).filter(function(q){return typeof q[1]=="string"}).map(function(q){var ee=Xi(q,2)[0];return new ac(function(Q,ne){x.url2canvas(ee,function(le){x.iconHash.set(ee,le),Q()})})}),ac.all(h).then(function(q){x.buildSprite(s),_.autoRender!==!1&&x.webglLayer&&x.webglLayer.render()})}},{key:"buildSprite",value:function(s){var h=s.padding,_=this.canvas,x=this.ctx,S=0,C=[],R=new qc;if(s.icon){S=!0;var H=!1,Z=void 0;try{for(var P=Gh(this.iconHash),F;!(S=(F=P.next()).done);S=!0){var V=Xi(F.value,2),j=V[1];if(typeof j!="string"){var q=j.width,ee=q+h;C.push({w:ee,h:ee,width:q,key:V[0],icon:j})}}}catch(Q){H=!0,Z=Q}finally{try{!S&&P.return&&P.return()}finally{if(H)throw Z}}for(P=ro(C),F=0;F<C.length;F++)V=C[F],R.get(V.key)||R.set(V.key,V);for(S=Math.max(me(P.w),me(P.h)),_.width=S||1,_.height=S||1,x.save(),_=0;_<C.length;_++)P=C[_],x.drawImage(P.icon,P.x+h,P.y+h,P.width,P.width);x.restore()}this.loadTexture(),this.buildVertex(s,R,S)}},{key:"buildVertex",value:function(s,h,_){var x=this.gl;this.updateUniformsFromOptions(s);for(var S=[],C=[],R=[],H=[],Z=[],P=[],F=[],V=[],j=[],q=s.minLineLength,ee=0;ee<this.cachedData.length;ee++){var Q=this.cachedData[ee],ne=Q.coordinates,le=Q.icon,Ae=Q.speed,Se=Q.delay;Q=Q.color;var Ie=ne.length,Be=[];if(!(Ie<q)){for(s.icon&&(Be=(Be=h.get(le))?[Be.x/_,Be.y/_,Be.w/_]:[0,0,0]),le=0;le<Ie;++le){var nt=this.normizedPoint(ne[le]);S.push(nt[0]),S.push(nt[1]),S.push(nt[2]||0),C.push.apply(C,Yn(Q)),j.push.apply(j,Yn(Be)),this.animationType!==3&&(R.push(le),Z.push(Ie))}if(this.animationType!==1){for(Be=S.length-3*Ie+3,Ie=S.length,ne=Be;ne<Ie;++ne)P.push(S[ne]);if(S.splice(Ie-3,3),j.splice(Ie-3,2),C.splice(Ie-3,4),this.animationType===2)R.pop(),Z.pop();else if(this.animationType===3){for(Be-=3,Ie=S.length-3,ne=0,Q=[],le=Be;le<=Ie;le+=3)Be=Math.sqrt(Math.pow(P[le]-S[le],2)+Math.pow(P[le+1]-S[le+1],2)+Math.pow(P[le+2]-S[le+2],2)),ne+=Be,Q.push(Be);for(R.push(0),F.push(Ae),Se/=ne/Ae,V.push(Se),le=Ie=0,nt=Q.length-1;le<nt;++le)Ie+=Q[le],Be=Ie/ne,R.push(Be),H.push(Be),Z.push(ne),F.push(Ae),V.push(Se);H.push(1),Z.push(ne)}}}}this.bindAttributeBufferData(x,"aPos",S,3),this.bindAttributeBufferData(x,"aIndex",R,1),this.bindAttributeBufferData(x,"aLength",Z,1),this.bindAttributeBufferData(x,"aColor",C,4),this.animationType!==1&&(this.bindAttributeBufferData(x,"aNextPos",P,3),this.animationType===3&&(this.bindAttributeBufferData(x,"aNextIndex",H,1),this.bindAttributeBufferData(x,"aSpeed",F,1),this.bindAttributeBufferData(x,"aDelay",V,1))),s.icon&&this.bindAttributeBufferData(x,"aUV",j,3),this.vertCount=S.length/3}},{key:"updateUniformsFromOptions",value:function(s){this.startTime=new Date().getTime(),Jc[s.animationType]||(s.animationType=2),Al[s.shapeType]||(s.shapeType=2),(isNaN(s.minLineLength)||2>s.minLineLength)&&(s.minLineLength=2),this.animationType=s.animationType}},{key:"renderAttributeArr",value:function(s,h,_){if(h.attributes[_]!==void 0){var x=this.bufferMap[_];x&&(s.bindBuffer(s.ARRAY_BUFFER,x.buffer),s.enableVertexAttribArray(h.attributes[_]),s.vertexAttribPointer(h.attributes[_],x.elementSize,s.FLOAT,!1,x.data.BYTES_PER_ELEMENT*x.elementSize,0))}}},{key:"render",value:function(s){var h=s.gl;if(s=s.matrix,!(0>=this.vertCount)){var _=this.getOptions(),x=this.program;h.useProgram(x.program),this.renderAttributeArr(h,x,"aPos"),this.renderAttributeArr(h,x,"aIndex"),this.renderAttributeArr(h,x,"aLength"),this.renderAttributeArr(h,x,"aColor"),this.animationType!==1&&(this.renderAttributeArr(h,x,"aNextPos"),this.animationType===3&&(this.renderAttributeArr(h,x,"aNextIndex"),this.renderAttributeArr(h,x,"aSpeed"),this.renderAttributeArr(h,x,"aDelay"))),_.icon&&this.texture&&(this.renderAttributeArr(h,x,"aUV"),h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,this.texture),h.uniform1i(x.uniforms.uSampler,0)),h.uniform1i(x.uniforms.uUseTexture,this.isUseTexture);var S=new Date().getTime()-this.startTime;S<this.options.delay?S=0:(S-=this.options.delay,S=this.animationType===1?Math.round(S/1e3*this.options.speed*20):this.animationType===3?S/1e3*this.options.speed*1e3:S/1e3*this.options.speed);var C=this.options.size;if(Array.isArray(C)){var R=this.map.map.getMaxZoom(),H=this.map.map.getMinZoom();C=C[0]+(this.map.getZoom()-H)/(R-H)*(C[1]-C[0])}h.uniformMatrix4fv(x.uniforms.u_matrix,!1,s),h.uniform1f(x.uniforms.uSize,C),h.uniform1f(x.uniforms.uElapsedSteps,S),h.uniform1f(x.uniforms.uOriginSpeed,this.options.speed),h.uniform1i(x.uniforms.uAnimationType,this.animationType),h.uniform1i(x.uniforms.ushapeType,this.options.shapeType),h.uniform1i(x.uniforms.uPointFade,this.options.pointFade?1:0),h.uniform1f(x.uniforms.uPointFadeBuffer,this.options.pointFadeBuffer),h.uniform1f(x.uniforms.uZoomUnits,this.options.unit==="m"?this.map.getZoomUnits():1),this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:_.blend==="lighter"?[h.SRC_ALPHA,h.ONE]:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA],depthTest:!!_.depthTest}),h.drawArrays(h.POINTS,0,this.vertCount)}}},{key:"url2canvas",value:function(s,h){if((typeof s>"u"?"undefined":Ta(s))==="object")h(s);else{var _=new Image;_.crossOrigin="anonymous",_.onload=function(){var x=document.createElement("canvas");x.width=128,x.height=128,x.getContext("2d").drawImage(_,0,0,128,128),h(x)},_.src=s}}},{key:"loadTexture",value:function(){var s=this;this.canvas&&this.getOptions().icon?pr(this.gl,this.canvas,function(h){s.isUseTexture=!0,s.texture=h}):(this.isUseTexture=!1,this.texture=null)}}]),p}(ki);cd.ANIMATION_TYPE_LEAP=1,cd.ANIMATION_TYPE_SMOOTH=2,cd.ANIMATION_TYPE_UNIFORM_SPEED=3,cd.SHAPE_TYPE_SQUARE=1,cd.SHAPE_TYPE_CIRCLE=2,cd.SHAPE_TYPE_CIRCLE_GRADIENT=3;var M_=function(){function d(p,s){hr(this,d),this.layer=p,this.gl=s,this.initData()}return Mr(d,[{key:"initData",value:function(){this.outWall3d={vertex:[],vertexBuffer:[],index:[],indexBuffer:[]}}},{key:"getData",value:function(){return this.outWall3d}},{key:"onLayerChange",value:function(p,s){this.initData();for(var h=p.color,_=p.height,x=p.gradient,S=p.enablePreciseMap,C=p.repeatMap,R=p.closePath,H=this.gl,Z=0;Z<s.length;Z++){var P=s[Z],F=P.color||h;"properties"in P&&"color"in P.properties&&(F=P.properties.color),x||Object.prototype.toString.call(F)!=="[object Function]"||(F=F(P));var V=this.layer.normizedColor(x?x[0]:F);F=this.layer.normizedColor(x?x[1]:F);var j=P.height||_;if("properties"in P&&"height"in P.properties&&(j=P.properties.height),Object.prototype.toString.call(j)==="[object Function]"&&(j=j(P)),P.geometry.type==="MultiLineString"||P.geometry.type==="Polygon")for(var q=0;q<P.geometry.coordinates.length;q++){var ee=P.geometry.coordinates[q];R&&!ce(ee)&&ee.push(ee[0]);for(var Q=[],ne=[],le=0,Ae=0;Ae<ee.length;Ae++){var Se=this.layer.normizedPoint(ee[Ae]);if(0<Ae&&(S||C)){var Ie=this.layer.normizedPoint(ee[Ae-1]);le+=Math.sqrt(Math.pow(Se[0]-Ie[0],2)+Math.pow(Se[1]-Ie[1],2))}Q.push(Se),ne.push(le)}this.processData(this.outWall3d,p,Q,ne,V,F,j)}else{for(P=P.geometry.coordinates,R&&!ce(P)&&P.push(P[0]),q=[],ee=[],ne=Q=0;ne<P.length;ne++)le=this.layer.normizedPoint(P[ne]),0<ne&&(S||C)&&(Ae=this.layer.normizedPoint(P[ne-1]),Q+=Math.sqrt(Math.pow(le[0]-Ae[0],2)+Math.pow(le[1]-Ae[1],2))),q.push(le),ee.push(Q);this.processData(this.outWall3d,p,q,ee,V,F,j)}}for(p=0;p<this.outWall3d.vertex.length;p++){for(s=[],h=this.outWall3d.vertex[p].length,_=0;_<h;_++)s.push.apply(s,Yn(this.outWall3d.vertex[p][_]));h=H.createBuffer(),H.bindBuffer(H.ARRAY_BUFFER,h),H.bufferData(H.ARRAY_BUFFER,new Float32Array(s),H.STATIC_DRAW),this.outWall3d.vertexBuffer[p]=h,H.bindBuffer(H.ARRAY_BUFFER,null),h=H.createBuffer(),H.bindBuffer(H.ELEMENT_ARRAY_BUFFER,h),H.bufferData(H.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.outWall3d.index[p]),H.STATIC_DRAW),this.outWall3d.indexBuffer[p]=h,H.bindBuffer(H.ELEMENT_ARRAY_BUFFER,null)}}},{key:"processData",value:function(p,s,h,_,x,S,C){var R=_[_.length-1],H=p.vertex[p.vertex.length-1],Z=p.index[p.index.length-1],P=h.length;for((!Z||65536<=Z.length+2*P+2)&&(H=[],Z=[],p.vertex.push(H),p.index.push(Z)),(p=H.length)&&Z.push(p-1,p),p=0;p<P;p++){var F=[],V=[],j=h[p];F.push(j[0],j[1],j[2]+C),F.push(x[0],x[1],x[2],x[3]),V.push(j[0],j[1],j[2]),V.push(S[0],S[1],S[2],S[3]),s.texture&&(j=_[p],s.enablePreciseMap||s.repeatMap?(F.push(j,1,R),V.push(j,0,R)):(F.push(p,1,P-1),V.push(p,0,P-1))),j=H.length,H.push(F,V),Z.push(j,j+1)}}}]),d}(),Vg=function(d){function p(s,h){return hr(this,p),ln(this,(p.__proto__||Dr(p)).call(this,s,h))}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{texture:null,enablePreciseMap:!1,repeatMap:0,height:100,closePath:!1,color:[1,1,1,1]}}},{key:"initialize",value:function(s){this.gl=s,this.dataMgr=new M_(this,this.gl),this.texture=null,this.isUseTexture=!1,this.vertexLength=10,this.program=new Jn(this.gl,{vertexShader:"uniform mat4 u_matrix;uniform bool uUseTexture;attribute vec3 aPos;attribute vec4 aColor;attribute vec2 aTextureCoords;attribute float aTotalDistance;varying vec2 vTextureCoords;varying float vTotalDistance;varying vec4 vColor;void main(){if(aColor.w>=0.0&&aColor.w<=1.0){vColor=aColor;}else{vColor=vec4(aColor.xyz,1.0);}if(uUseTexture){vTextureCoords=aTextureCoords;vTotalDistance=aTotalDistance;}gl_Position=u_matrix*vec4(aPos,1.0);}",fragmentShader:"precision highp float;uniform bool uUseTexture;uniform float uDistance;uniform sampler2D uSampler;varying vec2 vTextureCoords;varying float vTotalDistance;varying vec4 vColor;void main(){if(uUseTexture){float uvx=vTextureCoords.x/vTotalDistance;if(uDistance>0.0){uvx=mod(vTextureCoords.x,uDistance)/uDistance;}gl_FragColor=vec4(1.0,1.0,1.0,1.0)*texture2D(uSampler,vec2(uvx,vTextureCoords.y));}else{gl_FragColor=vColor;}}"}),this.loadTexture()}},{key:"onChanged",value:function(s,h){var _=this;this.gl&&(this.loadTextureTime&&clearTimeout(this.loadTextureTime),this.loadTextureTime=setTimeout(function(){_.loadTexture(function(){_.dataMgr.onLayerChange(s,h),_.webglLayer.render()})},0))}},{key:"render",value:function(s){var h=s.gl,_=s.matrix;if((s=this.dataMgr.getData())&&!(0>=s.vertex.length)){var x=this.getOptions(),S=this.program;if(h.useProgram(S.program),x.texture){if(!this.texture)return;h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,this.texture),h.uniform1i(S.uniforms.uSampler,0)}for(this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA],depthMask:!!x.texture,depthFunc:x.texture?h.LESS:h.LEQUAL}),x.texture?h.enableVertexAttribArray(S.attributes.aTextureCoords):h.disableVertexAttribArray(S.attributes.aTextureCoords),h.enableVertexAttribArray(S.attributes.aPos),h.enableVertexAttribArray(S.attributes.aColor),h.uniformMatrix4fv(S.uniforms.u_matrix,!1,_),h.uniform1i(S.uniforms.uUseTexture,this.isUseTexture),h.uniform1f(S.uniforms.uDistance,x.repeatMap),_=0;_<s.vertex.length;_++)if(!(0>=s.vertex[_].length)){var C=s.vertex[_],R=new Float32Array(C[0]).BYTES_PER_ELEMENT;C=R*C[0].length,h.bindBuffer(h.ARRAY_BUFFER,s.vertexBuffer[_]),h.vertexAttribPointer(S.attributes.aPos,3,h.FLOAT,!1,C,0),h.vertexAttribPointer(S.attributes.aColor,4,h.FLOAT,!1,C,3*R),x.texture&&(h.vertexAttribPointer(S.attributes.aTextureCoords,2,h.FLOAT,!1,C,7*R),h.vertexAttribPointer(S.attributes.aTotalDistance,1,h.FLOAT,!1,C,9*R)),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,s.indexBuffer[_]),h.drawElements(h.TRIANGLE_STRIP,s.index[_].length,h.UNSIGNED_SHORT,0),h.bindBuffer(h.ARRAY_BUFFER,null),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,null)}}}},{key:"loadTexture",value:function(s){var h=this,_=this.getOptions();_.texture?(this.isUseTexture=!0,pr(this.gl,_.texture,function(x,S){h.image=S,h.texture=x,s&&s(),h.webglLayer.render()})):(this.isUseTexture=!1,this.image=this.texture=null,s&&s())}}]),p}(ki),$0=function(){function d(p,s){hr(this,d),this.layer=p,this.gl=s,this.initData()}return Mr(d,[{key:"initData",value:function(){this.outWall3d={vertex:[],vertexBuffer:[],index:[],indexBuffer:[]},this.maxLength=0}},{key:"getData",value:function(){return this.outWall3d}},{key:"getMaxDataLength",value:function(){return this.maxLength}},{key:"onLayerChange",value:function(p,s){this.initData();var h=p.color,_=p.height,x=p.gradient;p=this.gl;for(var S=0;S<s.length;S++){var C=s[S].geometry.coordinates,R=C.length;this.maxLength=R>this.maxLength?R:this.maxLength;for(var H=[],Z=0;Z<R;Z++){var P=this.layer.normizedPoint(C[Z]);H.push(P)}R=s[S].color||h,"properties"in s[S]&&"color"in s[S].properties&&(R=s[S].properties.color),x||Object.prototype.toString.call(R)!=="[object Function]"||(R=R(s[S])),C=this.layer.normizedColor(x?x[0]:R),R=this.layer.normizedColor(x?x[1]:R),Z=s[S].height||_,"properties"in s[S]&&"height"in s[S].properties&&(Z=s[S].properties.height),Object.prototype.toString.call(Z)==="[object Function]"&&(Z=Z(s[S])),this.processData(this.outWall3d,H,C,R,Z)}for(s=0;s<this.outWall3d.vertex.length;s++){for(h=[],_=this.outWall3d.vertex[s].length,x=0;x<_;x++)h.push.apply(h,Yn(this.outWall3d.vertex[s][x]));_=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,_),p.bufferData(p.ARRAY_BUFFER,new Float32Array(h),p.STATIC_DRAW),this.outWall3d.vertexBuffer[s]=_,p.bindBuffer(p.ARRAY_BUFFER,null),_=p.createBuffer(),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,_),p.bufferData(p.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.outWall3d.index[s]),p.STATIC_DRAW),this.outWall3d.indexBuffer[s]=_,p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,null)}}},{key:"processData",value:function(p,s,h,_,x){var S=p.vertex[p.vertex.length-1],C=p.index[p.index.length-1],R=s.length;for((!C||65536<=C.length+2*R+2)&&(S=[],C=[],p.vertex.push(S),p.index.push(C)),(p=S.length)&&C.push(p-1,p),p=0;p<R;p++){var H=[],Z=[],P=s[p];H.push(P[0],P[1]),H.push(P[2]?Number(P[2])+x:x),H.push(P[3]?Number(P[3]):p),H.push(h[0],h[1],h[2],h[3]),Z.push(P[0],P[1]),Z.push(P[2]?Number(P[2]):0),Z.push(P[3]?Number(P[3]):p),Z.push(_[0],_[1],_[2],_[3]),P=S.length,S.push(H,Z),C.push(P,P+1)}}}]),d}(),F2=function(d){function p(s,h){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s,h)),s.startTime=s.options.startTime||0,s.endTime=s.options.endTime,s.time=s.startTime,s.autoUpdate=!0,s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{height:100,color:[1,1,1,1],trailLength:3,step:.1}}},{key:"initialize",value:function(s){this.gl=s,this.dataMgr=new $0(this,this.gl),this.program=new Jn(this.gl,{vertexShader:"uniform mat4 u_matrix;uniform float currentTime;uniform float trailLength;attribute vec4 aPos;attribute vec4 aColor;varying vec4 vColor;varying float vTime;void main(){vTime=1.0-((currentTime-aPos.w)/trailLength);vColor=aColor;gl_Position=u_matrix*vec4(aPos.xyz,1.0);}",fragmentShader:"precision highp float;varying vec4 vColor;varying float vTime;void main(){if(vTime>1.0||vTime<0.0){discard;}gl_FragColor=vec4(vColor.rgb,1.0*vTime);}"})}},{key:"onChanged",value:function(s,h){this.gl&&(this.dataMgr.onLayerChange(s,h),s.endTime===void 0&&(this.endTime=this.dataMgr.getMaxDataLength()))}},{key:"render",value:function(s){var h=s.gl,_=s.matrix;if((s=this.dataMgr.getData())&&!(0>=s.vertex.length)){var x=this.getOptions(),S=this.program;for(h.useProgram(S.program),this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA]}),h.enableVertexAttribArray(S.attributes.aPos),h.enableVertexAttribArray(S.attributes.aColor),h.uniformMatrix4fv(S.uniforms.u_matrix,!1,_),h.uniform1f(S.uniforms.currentTime,this.time),h.uniform1f(S.uniforms.trailLength,x.trailLength),_=0;_<s.vertex.length;_++)if(!(0>=s.vertex[_].length)){var C=s.vertex[_],R=new Float32Array(C[0]).BYTES_PER_ELEMENT;C=R*C[0].length,h.bindBuffer(h.ARRAY_BUFFER,s.vertexBuffer[_]),h.vertexAttribPointer(S.attributes.aPos,4,h.FLOAT,!1,C,0),h.vertexAttribPointer(S.attributes.aColor,4,h.FLOAT,!1,C,4*R),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,s.indexBuffer[_]),h.drawElements(h.TRIANGLE_STRIP,s.index[_].length,h.UNSIGNED_SHORT,0),h.bindBuffer(h.ARRAY_BUFFER,null),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,null)}this.time+=x.step,this.time>this.endTime&&(this.time=this.startTime)}}}]),p}(ki),rI=function(d){function p(s,h){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s,h)),s.simpleLineLayer=new Fg(s.getHeatOptions()),s.children=[s.simpleLineLayer],s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{blend:"normal",gradient:{0:"rgb(50, 50, 256)","0.1":"rgb(50, 250, 56)","0.5":"rgb(250, 250, 56)",1:"rgb(250, 50, 56)"}}}},{key:"onDataChanged",value:function(s){this.simpleLineLayer.setData(s)}},{key:"onOptionsChanged",value:function(s){this.simpleLineLayer.setOptions(this.getHeatOptions())}},{key:"getHeatOptions",value:function(){var s=this.getOptions(),h=s.max,_=s.min;h===void 0&&(_=this.getDataRange(),h=_.max,_=_.min);var x=new Xe({max:h,min:_,gradient:s.gradient});return s.color=function(S){var C=~~S.count||1;return"properties"in S&&"count"in S.properties&&(C=~~S.properties.count),S=x.getImageData(C),[S[0]/255,S[1]/255,S[2]/255,S[3]/255]},s}},{key:"getDataRange",value:function(){var s=this.getData(),h=0,_=0;s[0]&&(h=~~s[0].count||1,_=~~s[0].count||1),"properties"in s[0]&&"count"in s[0].properties&&(h=~~s[0].properties.count,_=~~s[0].properties.count);for(var x=s.length,S=0;S<x;S++){var C=~~s[S].count||1;"properties"in s[S]&&"count"in s[S].properties&&(C=~~s[S].properties.count),h=Math.max(C,h),_=Math.min(C,_)}return{max:h/2,min:_}}}]),p}(xl),N2=M(function(d,p){(function(s,h){d.exports=h()})(Ms,function(){function s(ne,le,Ae,Se,Ie,Be){if(!(Ie-Se<=Ae)){var nt=Se+Ie>>1;h(ne,le,nt,Se,Ie,Be%2),s(ne,le,Ae,Se,nt-1,Be+1),s(ne,le,Ae,nt+1,Ie,Be+1)}}function h(ne,le,Ae,Se,Ie,Be){for(;Ie>Se;){if(600<Ie-Se){var nt=Ie-Se+1,rt=Ae-Se+1,St=Math.log(nt),Pt=.5*Math.exp(2*St/3);St=.5*Math.sqrt(St*Pt*(nt-Pt)/nt)*(0>rt-nt/2?-1:1),h(ne,le,Ae,Math.max(Se,Math.floor(Ae-rt*Pt/nt+St)),Math.min(Ie,Math.floor(Ae+(nt-rt)*Pt/nt+St)),Be)}for(nt=le[2*Ae+Be],rt=Se,Pt=Ie,_(ne,le,Se,Ae),le[2*Ie+Be]>nt&&_(ne,le,Se,Ie);rt<Pt;){for(_(ne,le,rt,Pt),rt++,Pt--;le[2*rt+Be]<nt;)rt++;for(;le[2*Pt+Be]>nt;)Pt--}le[2*Se+Be]===nt?_(ne,le,Se,Pt):(Pt++,_(ne,le,Pt,Ie)),Pt<=Ae&&(Se=Pt+1),Ae<=Pt&&(Ie=Pt-1)}}function _(ne,le,Ae,Se){x(ne,Ae,Se),x(le,2*Ae,2*Se),x(le,2*Ae+1,2*Se+1)}function x(ne,le,Ae){var Se=ne[le];ne[le]=ne[Ae],ne[Ae]=Se}function S(ne,le){return ne=ne.geometry.coordinates,{x:ne[0]/360+.5,y:H(ne[1]),zoom:1/0,index:le,parentId:-1}}function C(ne){var le=ne.id,Ae=R(ne);return{type:"Feature",id:le,properties:Ae,geometry:{type:"Point",coordinates:[360*(ne.x-.5),360*Math.atan(Math.exp((180-360*ne.y)*Math.PI/180))/Math.PI-90]}}}function R(ne){var le=ne.numPoints,Ae=1e4<=le?Math.round(le/1e3)+"k":1e3<=le?Math.round(le/100)/10+"k":le;return Z(Z({},ne.properties),{cluster:!0,cluster_id:ne.id,point_count:le,point_count_abbreviated:Ae})}function H(ne){return ne=Math.sin(ne*Math.PI/180),ne=.5-.25*Math.log((1+ne)/(1-ne))/Math.PI,0>ne?0:1<ne?1:ne}function Z(ne,le){for(var Ae in le)ne[Ae]=le[Ae];return ne}function P(ne){return ne.x}function F(ne){return ne.y}var V=function(ne){return ne[0]},j=function(ne){return ne[1]},q=function(ne,le,Ae,Se,Ie){le===void 0&&(le=V),Ae===void 0&&(Ae=j),Se===void 0&&(Se=64),Ie===void 0&&(Ie=Float64Array),this.nodeSize=Se,this.points=ne;var Be=this.ids=new(65536>ne.length?Uint16Array:Uint32Array)(ne.length);Ie=this.coords=new Ie(2*ne.length);for(var nt=0;nt<ne.length;nt++)Be[nt]=nt,Ie[2*nt]=le(ne[nt]),Ie[2*nt+1]=Ae(ne[nt]);s(Be,Ie,Se,0,Be.length-1,0)};q.prototype.range=function(ne,le,Ae,Se){for(var Ie=this.ids,Be=this.coords,nt=this.nodeSize,rt=[0,Ie.length-1,0],St=[],Pt,$t;rt.length;){var Xt=rt.pop(),wr=rt.pop(),Qr=rt.pop();if(wr-Qr<=nt)for(Xt=Qr;Xt<=wr;Xt++)Pt=Be[2*Xt],$t=Be[2*Xt+1],Pt>=ne&&Pt<=Ae&&$t>=le&&$t<=Se&&St.push(Ie[Xt]);else{var bt=Math.floor((Qr+wr)/2);Pt=Be[2*bt],$t=Be[2*bt+1],Pt>=ne&&Pt<=Ae&&$t>=le&&$t<=Se&&St.push(Ie[bt]);var fr=(Xt+1)%2;(Xt===0?ne<=Pt:le<=$t)&&(rt.push(Qr),rt.push(bt-1),rt.push(fr)),(Xt===0?Ae>=Pt:Se>=$t)&&(rt.push(bt+1),rt.push(wr),rt.push(fr))}}return St},q.prototype.within=function(ne,le,Ae){for(var Se=this.ids,Ie=this.coords,Be=this.nodeSize,nt=[0,Se.length-1,0],rt=[],St=Ae*Ae;nt.length;){var Pt=nt.pop(),$t=nt.pop(),Xt=nt.pop();if($t-Xt<=Be)for(Pt=Xt;Pt<=$t;Pt++){Xt=Ie[2*Pt]-ne;var wr=Ie[2*Pt+1]-le;Xt*Xt+wr*wr<=St&&rt.push(Se[Pt])}else{wr=Math.floor((Xt+$t)/2);var Qr=Ie[2*wr],bt=Ie[2*wr+1],fr=Qr-ne,un=bt-le;fr*fr+un*un<=St&&rt.push(Se[wr]),fr=(Pt+1)%2,(Pt===0?ne-Ae<=Qr:le-Ae<=bt)&&(nt.push(Xt),nt.push(wr-1),nt.push(fr)),(Pt===0?ne+Ae>=Qr:le+Ae>=bt)&&(nt.push(wr+1),nt.push($t),nt.push(fr))}}return rt};var ee={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(ne){return ne}},Q=function(ne){this.options=Z(Zf(ee),ne),this.trees=Array(this.options.maxZoom+1)};return Q.prototype.load=function(ne){var le=this.options,Ae=le.minZoom,Se=le.maxZoom;le=le.nodeSize,this.points=ne;for(var Ie=[],Be=0;Be<ne.length;Be++)ne[Be].geometry&&Ie.push(S(ne[Be],Be));for(this.trees[Se+1]=new q(Ie,P,F,le,Float32Array),ne=Se;ne>=Ae;ne--)Ie=this._cluster(Ie,ne),this.trees[ne]=new q(Ie,P,F,le,Float32Array);return this},Q.prototype.getClusters=function(ne,le){var Ae=((ne[0]+180)%360+360)%360-180,Se=Math.max(-90,Math.min(90,ne[1])),Ie=ne[2]===180?180:((ne[2]+180)%360+360)%360-180,Be=Math.max(-90,Math.min(90,ne[3]));if(360<=ne[2]-ne[0])Ae=-180,Ie=180;else if(Ae>Ie)return Ae=this.getClusters([Ae,Se,180,Be],le),Se=this.getClusters([-180,Se,Ie,Be],le),Ae.concat(Se);le=this.trees[this._limitZoom(le)],ne=[];var nt=0;for(Se=le.range(Ae/360+.5,H(Be),Ie/360+.5,H(Se));nt<Se.length;nt+=1)Ie=le.points[Se[nt]],ne.push(Ie.numPoints?C(Ie):this.points[Ie.index]);return ne},Q.prototype.getChildren=function(ne){var le=this._getOriginId(ne),Ae=this._getOriginZoom(ne),Se=this.trees[Ae];if(!Se)throw Error("No cluster with the specified id.");var Ie=Se.points[le];if(!Ie)throw Error("No cluster with the specified id.");le=[];var Be=0;for(Ae=Se.within(Ie.x,Ie.y,this.options.radius/(this.options.extent*Math.pow(2,Ae-1)));Be<Ae.length;Be+=1)Ie=Se.points[Ae[Be]],Ie.parentId===ne&&le.push(Ie.numPoints?C(Ie):this.points[Ie.index]);if(le.length===0)throw Error("No cluster with the specified id.");return le},Q.prototype.getLeaves=function(ne,le,Ae){var Se=[];return this._appendLeaves(Se,ne,le||10,Ae||0,0),Se},Q.prototype.getTile=function(ne,le,Ae){var Se=this.trees[this._limitZoom(ne)];ne=Math.pow(2,ne);var Ie=this.options;Ie=Ie.radius/Ie.extent;var Be=(Ae-Ie)/ne,nt=(Ae+1+Ie)/ne,rt={features:[]};return this._addTileFeatures(Se.range((le-Ie)/ne,Be,(le+1+Ie)/ne,nt),Se.points,le,Ae,ne,rt),le===0&&this._addTileFeatures(Se.range(1-Ie/ne,Be,1,nt),Se.points,ne,Ae,ne,rt),le===ne-1&&this._addTileFeatures(Se.range(0,Be,Ie/ne,nt),Se.points,-1,Ae,ne,rt),rt.features.length?rt:null},Q.prototype.getClusterExpansionZoom=function(ne){for(var le=this._getOriginZoom(ne)-1;le<=this.options.maxZoom&&(ne=this.getChildren(ne),le++,ne.length===1);)ne=ne[0].properties.cluster_id;return le},Q.prototype._appendLeaves=function(ne,le,Ae,Se,Ie){var Be=0;for(le=this.getChildren(le);Be<le.length;Be+=1){var nt=le[Be],rt=nt.properties;if(rt&&rt.cluster?Ie=Ie+rt.point_count<=Se?Ie+rt.point_count:this._appendLeaves(ne,rt.cluster_id,Ae,Se,Ie):Ie<Se?Ie++:ne.push(nt),ne.length===Ae)break}return Ie},Q.prototype._addTileFeatures=function(ne,le,Ae,Se,Ie,Be){for(var nt=0;nt<ne.length;nt+=1){var rt=le[ne[nt]],St=rt.numPoints,Pt={type:1,geometry:[[Math.round(this.options.extent*(rt.x*Ie-Ae)),Math.round(this.options.extent*(rt.y*Ie-Se))]],tags:St?R(rt):this.points[rt.index].properties},$t=void 0;St?$t=rt.id:this.options.generateId?$t=rt.index:this.points[rt.index].id&&($t=this.points[rt.index].id),$t!==void 0&&(Pt.id=$t),Be.features.push(Pt)}},Q.prototype._limitZoom=function(ne){return Math.max(this.options.minZoom,Math.min(+ne,this.options.maxZoom+1))},Q.prototype._cluster=function(ne,le){var Ae=[],Se=this.options,Ie=Se.reduce,Be=Se.minPoints;Se=Se.radius/(Se.extent*Math.pow(2,le));for(var nt=0;nt<ne.length;nt++){var rt=ne[nt];if(!(rt.zoom<=le)){rt.zoom=le;for(var St=this.trees[le+1],Pt=St.within(rt.x,rt.y,Se),$t=rt.numPoints||1,Xt=$t,wr=0,Qr=Pt;wr<Qr.length;wr+=1){var bt=St.points[Qr[wr]];bt.zoom>le&&(Xt+=bt.numPoints||1)}if(Xt>=Be){wr=rt.x*$t,Qr=rt.y*$t,$t=Ie&&1<$t?this._map(rt,!0):null,bt=(nt<<5)+(le+1)+this.points.length;for(var fr=0;fr<Pt.length;fr+=1){var un=St.points[Pt[fr]];if(!(un.zoom<=le)){un.zoom=le;var fn=un.numPoints||1;wr+=un.x*fn,Qr+=un.y*fn,un.parentId=bt,Ie&&($t||($t=this._map(rt,!0)),Ie($t,this._map(un)))}}rt.parentId=bt,Ae.push({x:wr/Xt,y:Qr/Xt,zoom:1/0,id:bt,parentId:-1,numPoints:Xt,properties:$t})}else if(Ae.push(rt),1<Xt)for(rt=0,Xt=Pt;rt<Xt.length;rt+=1)Pt=St.points[Xt[rt]],Pt.zoom<=le||(Pt.zoom=le,Ae.push(Pt))}}return Ae},Q.prototype._getOriginId=function(ne){return ne-this.points.length>>5},Q.prototype._getOriginZoom=function(ne){return(ne-this.points.length)%32},Q.prototype._map=function(ne,le){if(ne.numPoints)return le?Z({},ne.properties):ne.properties;ne=this.points[ne.index].properties;var Ae=this.options.map(ne);return le&&Ae===ne?Z({},Ae):Ae},Q})}),ey=function(d){function p(s){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s)),s.shapeLayer=new Pp(s.options),s.textLayer=new Yc(s.options.textOptions),s.children=[s.shapeLayer,s.textLayer],s.max=[],s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{size:50,height:0,maxZoom:19,minZoom:5,gradient:{0:"rgb(50, 50, 256)","0.1":"rgb(50, 250, 56)","0.5":"rgb(250, 250, 56)",1:"rgb(250, 50, 56)"},enableCluster:!1,showText:!0,textOptions:{fontSize:13,color:"white"}}}},{key:"onOptionsChanged",value:function(s){this.textLayer.setOptions(s.textOptions)}},{key:"setOptions",value:function(){var s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},h=this.options.textOptions;s.textOptions&&Lr(h,s.textOptions);var _=s.minZoom,x=s.maxZoom,S=s.size;_=x&&x!==this.options.maxZoom||_&&_!==this.options.minZoom||S&&S!==this.options.size,Lr(this.options,s,{textOptions:h}),_?this.onChanged(this.options,this.data):this.refreshLayer(),this.onOptionsChanged(this.getOptions())}},{key:"onChanged",value:function(s,h){if(h&&h.length){this.zoom=Math.floor(this.map.getZoom());var _=s.maxZoom,x=s.minZoom,S=s.enableCluster;s=s.size,this.zoom>_?this.zoom=_:this.zoom<x&&(this.zoom=x),S&&(this.supercluster=new N2({maxZoom:_,minZoom:x,radius:s/2}),this.supercluster.load(h)),this.refreshLayer()}}},{key:"refreshLayer",value:function(){var s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this.options,h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:this.data,_=this.map,x=this.zoom;if(s.enableCluster&&this.supercluster&&(h=this.getClusterData(s)),h&&h.length){var S=s.gradient,C=s.showText,R=s.textOptions,H=s.height,Z=s.size;Z*=Math.pow(2,18-x),h=Ui(h,Z,function(V){var j=Xi(V,2),q=j[0];return j=j[1],-180<=q&&180>=q&&-90<=j&&90>=j&&(j=_.lnglatToMercator(q,j),q=j[0],j=j[1]),V[0]=q,V[1]=j,V}),this.max[x]=Math.max(this.max[x]||0,h.max);var P=new Xe({max:this.max[x],min:0,maxSize:H*Math.pow(2,18-x),minSize:0,gradient:S});if(S=[],C){var F=R&&R.format;F=typeof F=="function"?F:null,S=h.map(function(V){return{geometry:{coordinates:[V.center.x,V.center.y,P.getSize(V.count)+R.fontSize/2*Math.pow(2,18-x)]},text:F?F(V.count):V.count}})}this.textLayer.setData(S),C=h.map(function(V){for(var j=V.center,q=h.r,ee=[],Q=0;6>Q;Q++)ee.push(wn({x:j.x,y:j.y},q,Q));return{geometry:{type:"Polygon",coordinates:[ee]},properties:{height:P.getSize(V.count),color:P.getColor(V.count)}}}),this.shapeLayer.setData(C),s.enablePicked&&s.autoSelect&&this.pick(-1,-1)}}},{key:"getClusterData",value:function(){var s=this.map,h=s.getBounds(),_=this.ne=h.getNorthEast();h=this.sw=h.getSouthWest();var x=_,S=x.lng;x=x.lat;var C=[];return-180<=S&&180>=S&&-90<=x&&90>=x?C=[h.lng,h.lat,_.lng,_.lat]:(_=s.mercatorToLnglat(this.ne.lng,this.ne.lat),h=s.mercatorToLnglat(this.sw.lng,this.sw.lat),C=h.concat(_)),this.supercluster.getClusters(C,this.zoom).map(function(R){var H=0;return R.properties&&R.properties.point_count&&(H=R.properties.point_count),{geometry:R.geometry,count:H}})}},{key:"pick",value:function(s,h){return this.shapeLayer.pick(s,h)}},{key:"shouldUpdate",value:function(){if(!this.data)return!1;var s=this.map,h=Math.floor(s.getZoom()),_=this.options,x=_.maxZoom;if(_=_.minZoom,h>x?h=x:h<_&&(h=_),this.zoom!==h)return this.zoom=h,!0;if(!this.options.enableCluster||(h=s.getBounds(),s=h.ne,h=h.sw,!(s&&h&&this.ne&&this.sw)))return!1;if(this.ne.lng!==s.lng||this.ne.lat!==s.lat||this.sw.lng!==h.lng||this.sw.lat!==h.lat)return!0}},{key:"render",value:function(s){this.shouldUpdate()?this.refreshLayer():Yl(p.prototype.__proto__||Dr(p.prototype),"render",this).call(this,s)}}]),p}(xl),Wg=function(d){function p(s){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s)),s.name="PointLayer",s.bufferData=[],s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{color:[.1,.1,.9,1],blend:"default",shape:"circle",size:5,unit:"px",borderWidth:0,borderColor:[1,1,1,.9],polygonOffset:[0,0],depthTest:!0}}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions(),_=[];h.enablePicked&&_.push("PICK"),h.shape&&h.shape==="circle"&&_.push("SHAPE_CIRCLE"),this.program=new Jn(this.gl,{vertexShader:`attribute vec3 aPos;attribute vec4 aColor;attribute float aSize;attribute float aBorderWidth;attribute vec4 aBorderColor;uniform mat4 uMatrix;uniform vec4 uSelectedColor;uniform bool uUnitPx;uniform float zoomUnits;uniform float devicePixelRatio;varying vec4 vColor;varying float vSize;varying float vBorderWidth;varying vec4 vBorderColor;void main(void){if(aColor.w>=0.0&&aColor.w<=1.0){vColor=aColor;}else{vColor=vec4(aColor.xyz,1.0);}float size=aSize*devicePixelRatio;float borderWidth=aBorderWidth*devicePixelRatio;gl_Position=uMatrix*vec4(aPos.xyz,1.0);gl_PointSize=uUnitPx ? size : size/zoomUnits;vSize=size;vBorderWidth=borderWidth;vBorderColor=aBorderColor;
#if defined(PICK)
if(mapvIsPicked()){vColor=uSelectedColor;}
#endif
}`,fragmentShader:`varying vec4 vColor;varying float vSize;varying float vBorderWidth;varying vec4 vBorderColor;void main(void){vec4 color=vColor;
#if defined(SHAPE_CIRCLE)
float d=distance(gl_PointCoord,vec2(0.5,0.5));float ratio=1.0-vBorderWidth/vSize*2.0;if(d>0.5){discard;}if(d>ratio*0.5){color=vBorderColor;}float blur=1.0;blur=1.0-smoothstep(0.49,0.5,d);color.a*=blur;
#else
float ratio=vBorderWidth/vSize;if(gl_PointCoord.x<ratio||gl_PointCoord.x>1.0-ratio||gl_PointCoord.y<ratio||gl_PointCoord.y>1.0-ratio){color=vBorderColor;}
#endif
gl_FragColor=color;}`,defines:_},this),this.buffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),h=[{stride:52,name:"aPos",buffer:this.buffer,size:3,type:"FLOAT",offset:0},{stride:52,name:"aColor",buffer:this.buffer,size:4,type:"FLOAT",offset:12},{stride:52,name:"aSize",buffer:this.buffer,size:1,type:"FLOAT",offset:28},{stride:52,name:"aBorderWidth",buffer:this.buffer,size:1,type:"FLOAT",offset:32},{stride:52,name:"aBorderColor",buffer:this.buffer,size:4,type:"FLOAT",offset:36}],h=h.concat(this.getCommonAttributes()),this.vertexArray=new Yi({gl:s,program:this.program,attributes:h})}},{key:"onDestroy",value:function(){this.bufferData=[]}},{key:"onChanged",value:function(s,h){if(this.gl){for(var _=[],x=s.color,S=s.size,C=s.borderWidth,R=s.borderColor,H=0;H<h.length;H++){var Z=this.normizedPoint(h[H].geometry.coordinates),P=this.getProperty("color",x,h[H]);P=this.normizedColor(P);var F=this.getProperty("size",S,h[H]);F=Number(F);var V=this.getProperty("borderWidth",C,h[H]);V=Number(V);var j=this.getProperty("borderColor",R,h[H]);j=this.normizedColor(j),Z=this.addMultipleCoords(Z);for(var q=0;q<Z.length;q++){var ee=Z[q];_.push(ee[0],ee[1],Number(ee[2]||0)),_.push(P[0],P[1],P[2],P[3]),_.push(F),_.push(V,j[0],j[1],j[2],j[3])}}this.bufferData=_,this.buffer.updateData(new Float32Array(_)),s.enablePicked&&this.parsePickData(h)}}},{key:"parsePickData",value:function(s){var h=this.getOptions(),_=[];if(h.enablePicked)for(var x=0;x<s.length;x++){var S=this.indexToRgb(x);_.push(S[0]/255,S[1]/255,S[2]/255),h.repeat&&(_.push(S[0]/255,S[1]/255,S[2]/255),_.push(S[0]/255,S[1]/255,S[2]/255))}h.enablePicked&&this.pickBuffer.updateData(new Float32Array(_))}},{key:"render",value:function(s){var h=s.gl,_=s.matrix,x=s.isPickRender;if(!(0>=this.bufferData.length)){var S=this.getOptions(),C=this.program;C.use(h),s=this.getCommonUniforms(s),s=Lr(s,{uMatrix:_,uUnitPx:S.unit==="px",zoomUnits:this.map.getZoomUnits(),devicePixelRatio:window.devicePixelRatio}),C.setUniforms(s),this.setGLState({blend:!x,blendFunc:Cr(h,S.blend),blendEquation:h.FUNC_ADD,polygonOffset:S.polygonOffset,depthTest:S.depthTest}),this.vertexArray.bind(),h.drawArrays(h.POINTS,0,this.bufferData.length/13)}}}]),p}(ki),nI=function(d){function p(s,h){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s,h)),s.name="GroundRippleLayer",s.bufferDataArr=[],s.indexDataArr=[],s.vertexBuffer=[],s.indexBuffer=[],s.position=[],s.opacity=1,s.currentScale=1,s.autoUpdate=!0,s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{color:[.1,.1,.9,1],size:5,segs:32,scale:2,unit:"m",step:.1}}},{key:"initialize",value:function(s){this.gl=s,this.program=new Jn(this.gl,{vertexShader:"uniform mat4 u_projectionMatrix;uniform mat4 u_modelViewMatrix;uniform mat4 u_modelMatrix;uniform float u_opacity;attribute vec4 aPos;attribute vec4 aColor;varying vec4 vColor;void main(){vColor=aColor;vColor.a=u_opacity;gl_Position=u_projectionMatrix*u_modelViewMatrix*u_modelMatrix*vec4(aPos.xyz,1.0);}",fragmentShader:"precision highp float;varying vec4 vColor;void main(){if(vColor.a==0.0){discard;}gl_FragColor=vColor;}"})}},{key:"onDestroy",value:function(){this.bufferDataArr=[],this.indexDataArr=[],this.vertexBuffer=[],this.indexBuffer=[]}},{key:"onChanged",value:function(s,h){var _=this.gl;if(_&&(this.currentScale=this.opacity=1,(this.data=h)&&h.length)){var x=s.color,S=s.segs;s=s.size;for(var C=360/S,R=0;R<h.length;R++){var H=[],Z=[],P=this.normizedPoint(h[R].geometry.coordinates),F=x;Object.prototype.toString.call(F)==="[object Function]"?F=F(h[R]):(F=h[R].color||x,"properties"in h[R]&&"color"in h[R].properties&&(F=h[R].properties.color)),F=this.normizedColor(F);var V=Object.prototype.toString.call(s)==="[object Function]"?s(h[R]):Number(s),j=P[0],q=P[1];H.push(0,0,-.5),H.push(F[0],F[1],F[2],0);for(var ee=1,Q=0;ee<=S;ee++,Q+=C)H.push(P[0]-j+Math.cos(Math.PI/180*Q)*V,P[1]-q+Math.sin(Math.PI/180*Q)*V,-.5),H.push(F[0],F[1],F[2],this.opacity),ee===S?Z.push(0,0+ee,1):Z.push(0,0+ee,0+ee+1);F=_.createBuffer(),_.bindBuffer(_.ARRAY_BUFFER,F),_.bufferData(_.ARRAY_BUFFER,new Float32Array(H),_.STATIC_DRAW),this.vertexBuffer[R]=F,this.bufferDataArr[R]=H,_.bindBuffer(_.ARRAY_BUFFER,null),H=_.createBuffer(),_.bindBuffer(_.ELEMENT_ARRAY_BUFFER,H),_.bufferData(_.ELEMENT_ARRAY_BUFFER,new Uint16Array(Z),_.STATIC_DRAW),this.indexBuffer[R]=H,this.indexDataArr[R]=Z,_.bindBuffer(_.ELEMENT_ARRAY_BUFFER,null),this.position[R]=[P[0],P[1]]}this.webglLayer&&this.webglLayer.render()}}},{key:"render",value:function(s){var h=s.gl,_=s.projectionMatrix,x=s.viewMatrix;for(s=this.program,h.useProgram(s.program),h.uniformMatrix4fv(s.uniforms.u_projectionMatrix,!1,_),h.uniformMatrix4fv(s.uniforms.u_modelViewMatrix,!1,x),_=this.opacity,this.options.opacity!==void 0&&(_=this.options.opacity),h.uniform1f(s.uniforms.u_opacity,_),this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:[h.SRC_ALPHA,h.DST_ALPHA]}),h.enableVertexAttribArray(s.attributes.aPos),h.enableVertexAttribArray(s.attributes.aColor),_=0;_<this.bufferDataArr.length;_++)if(!(0>=this.bufferDataArr[_].length)){x=new Float32Array(this.bufferDataArr[_]).BYTES_PER_ELEMENT,h.bindBuffer(h.ARRAY_BUFFER,this.vertexBuffer[_]),h.vertexAttribPointer(s.attributes.aColor,4,h.FLOAT,!1,7*x,3*x),h.vertexAttribPointer(s.attributes.aPos,3,h.FLOAT,!1,7*x,0),x=this.position[_];var S=Er.create(),C=[this.currentScale,this.currentScale,this.currentScale];this.options.unit==="px"&&this.map&&(C=this.map.getZoomUnits(),C=[this.currentScale*C,this.currentScale*C,this.currentScale]),Er.identity(S),Er.translate(S,S,[x[0],x[1],0]),Er.scale(S,S,C),h.uniformMatrix4fv(s.uniforms.u_modelMatrix,!1,S),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,this.indexBuffer[_]),h.drawElements(h.TRIANGLES,this.indexDataArr[_].length,h.UNSIGNED_SHORT,0),h.bindBuffer(h.ARRAY_BUFFER,null),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,null)}s=this.getOptions(),h=s.scale,s=s.step,this.opacity-=s/10,this.currentScale+=h*s,0>this.opacity&&(this.currentScale=this.opacity=1)}}]),p}(ki),S_=function(d){function p(s){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s)),s.name="RippleLayer",s.bufferData=[],s.date=new Date,s.autoUpdate=!0,s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{depthTest:!0,polygonOffset:[0,0],color:[.1,.1,.9,1],blend:"normal",size:20,unit:"px",duration:2}}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions();this.program=new Jn(this.gl,{vertexShader:`attribute vec3 aPos;attribute vec4 aColor;attribute float aSize;uniform mat4 uMatrix;uniform vec4 uSelectedColor;uniform float uTime;uniform float duration;uniform float zoomUnits;varying vec4 vColor;void main(void){if(aColor.w>=0.0&&aColor.w<=1.0){vColor=aColor;}else{vColor=vec4(aColor.xyz,1.0);}float percent=mod(uTime,duration)/duration;vColor.a=1.-percent;gl_Position=uMatrix*vec4(aPos.xyz,1.0);gl_PointSize=aSize/zoomUnits*percent;
#if defined(PICK)
if(mapvIsPicked()){vColor=uSelectedColor;}
#endif
}`,fragmentShader:"varying vec4 vColor;void main(void){vec4 color=vColor;float d=distance(gl_PointCoord,vec2(0.5,0.5));if(d>0.5){discard;}float blur=1.0;blur=1.0-smoothstep(0.49,0.5,d);color.a*=blur;gl_FragColor=color;}",defines:h.enablePicked?["PICK"]:[]},this),this.buffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),h=[{stride:32,name:"aPos",buffer:this.buffer,size:3,type:"FLOAT",offset:0},{stride:32,name:"aColor",buffer:this.buffer,size:4,type:"FLOAT",offset:12},{stride:32,name:"aSize",buffer:this.buffer,size:1,type:"FLOAT",offset:28}],h=h.concat(this.getCommonAttributes()),this.vertexArray=new Yi({gl:s,program:this.program,attributes:h})}},{key:"onDestroy",value:function(){this.bufferData=[]}},{key:"onChanged",value:function(s,h){if(this.gl){for(var _=[],x=s.color,S=s.size,C=0;C<h.length;C++){var R=h[C].geometry.coordinates,H=x;Object.prototype.toString.call(H)==="[object Function]"?H=H(h[C]):(H=h[C].color||x,"properties"in h[C]&&"color"in h[C].properties&&(H=h[C].properties.color)),H=this.normizedColor(H),R=this.normizedPoint(R);var Z=h[C].size||S;"properties"in h[C]&&"size"in h[C].properties&&(Z=h[C].properties.size),Z=Object.prototype.toString.call(Z)==="[object Function]"?Z(h[C]):Number(Z),_.push(R[0],R[1],Number(R[2]||0)),_.push(H[0],H[1],H[2],H[3]),_.push(Z*window.devicePixelRatio)}this.bufferData=_,this.buffer.updateData(new Float32Array(_)),s.enablePicked&&this.parsePickData(h)}}},{key:"parsePickData",value:function(s){var h=this.getOptions(),_=[];if(h.enablePicked)for(var x=0;x<s.length;x++){var S=this.indexToRgb(x);_.push(S[0]/255,S[1]/255,S[2]/255)}h.enablePicked&&this.pickBuffer.updateData(new Float32Array(_))}},{key:"render",value:function(s){var h=s.gl,_=s.matrix,x=s.isPickRender;if(!(0>=this.bufferData.length)){var S=this.getOptions(),C=this.program;C.use(h),this.vertexArray.bind(),s=this.getCommonUniforms(s);var R=1;S.unit==="m"&&this.map&&(R=this.map.getZoomUnits()),s=Lr(s,{zoomUnits:R,uTime:(new Date-this.date)/1e3,duration:S.duration,uMatrix:_}),C.setUniforms(s),this.setGLState({blend:!x,blendFunc:S.blend==="lighter"?[h.SRC_ALPHA,h.ONE]:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA],blendEquation:h.FUNC_ADD,polygonOffset:S.polygonOffset,depthTest:S.depthTest}),h.drawArrays(h.POINTS,0,this.bufferData.length/8)}}}]),p}(ki),T_=function(d){function p(s,h){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s,h)),s.name="SparkLayer",s.bufferData=[],s.startTime=Number(s.options.startTime)||0,s.endTime=Number(s.options.endTime),s.time=s.startTime,s.segs=Number(s.options.segs)||10,s.autoUpdate=!0,s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{color:[.9,.1,.1,1],trailLength:3,height:100,step:.1,segs:10,polygonOffset:[0,0]}}},{key:"setTime",value:function(s){this.time=s}},{key:"initialize",value:function(s){this.gl=s,this.program=new Jn(this.gl,{vertexShader:"precision mediump float;attribute vec4 aPos;uniform mat4 u_matrix;uniform float currentTime;uniform float trailLength;varying float vTime;void main(){gl_Position=u_matrix*vec4(aPos.xyz,1.0);vTime=1.0-((currentTime-aPos.w)/trailLength);}",fragmentShader:"precision mediump float;uniform vec3 uFragColor;varying float vTime;void main(){if(vTime>1.0||vTime<0.0){discard;}gl_FragColor=vec4(uFragColor,1.0*vTime);}"}),this.buffer=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,this.buffer)}},{key:"onDestroy",value:function(){this.bufferData=[]}},{key:"onChanged",value:function(s,h){var _=this.gl;if(_){this.buffer=_.createBuffer(),_.bindBuffer(_.ARRAY_BUFFER,this.buffer);for(var x=[],S=s.height,C=0;C<h.length;C++)for(var R=h[C].geometry.coordinates,H=Object.prototype.toString.call(S)==="[object Function]"?S(h[C]):Number(S),Z=0,P=0;P<this.segs;P++){var F=this.normizedPoint(R);x.push(F[0],F[1],Z),R[2]===void 0?x.push(P):x.push(Number(R[2])),Z+=H/this.segs,x.push(F[0],F[1],Z),R[2]===void 0?x.push(P+1):x.push(Number(R[2]))}s.endTime===void 0&&(this.endTime=this.segs),this.bufferData=x,_.bufferData(_.ARRAY_BUFFER,new Float32Array(x),_.STATIC_DRAW),this.webglLayer&&this.webglLayer.render()}}},{key:"render",value:function(s){var h=s.gl,_=s.matrix;s=this.program,h.useProgram(s.program),h.uniformMatrix4fv(s.uniforms.u_matrix,!1,_),h.bindBuffer(h.ARRAY_BUFFER,this.buffer),h.enableVertexAttribArray(s.attributes.aPos),h.vertexAttribPointer(s.attributes.aPos,4,h.FLOAT,!1,0,0),_=this.normizedColor(this.options.color),h.uniform3f(s.uniforms.uFragColor,_[0],_[1],_[2]),h.uniform1f(s.uniforms.currentTime,this.time),h.uniform1f(s.uniforms.trailLength,this.options.trailLength),this.setGLState({blend:!0,blendFunc:[h.SRC_ALPHA,h.ONE],blendEquation:h.FUNC_ADD,polygonOffset:this.options.polygonOffset}),h.drawArrays(h.LINES,0,this.bufferData.length/4),this.time+=Number(this.options.step),this.time>1.5*this.endTime&&(this.time=this.startTime)}}]),p}(ki),ty=function(d){function p(s,h){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s,h)),s.name="IconLayer",s.index=[],h=s.canvas=document.createElement("canvas"),s.ctx=h.getContext("2d"),s.iconHash=new qc,s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{depthWrite:!0,depthTest:!0,depthFunc:"lequal",blend:"default",flat:!1,unit:"px",scale:1,angle:0,opacity:1,offset:[0,0],padding:[0,0],polygonOffset:[0,0]}}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions();this.texture=null,this.program=new Jn(this.gl,{vertexShader:"precision highp float;attribute vec3 a_pos;attribute float a_corner;attribute float a_rotation;attribute vec2 a_size;attribute vec2 a_offset;attribute vec2 a_texture_coord;uniform mat4 u_matrix;uniform vec2 u_size;uniform float devicePixelRatio;uniform float u_zoom_units;uniform float u_zIndex;uniform float u_scale;uniform bool u_unit_px;uniform bool u_flat;varying vec2 v_texture_coord;/***点A(x,y)，绕原点顺时针旋转角度a新坐标的计算公式*x1=x*cos(a)+y*sin(a)*y1=y*cos(a)-x*sin(a)*/vec3 transformCoord(vec3 coord,vec2 size,float corner){float x=coord.x;float y=coord.y;if(corner==1.0){x+=-size.x*cos(a_rotation)+size.y*sin(a_rotation);y+=size.y*cos(a_rotation)+size.x*sin(a_rotation);}else if(corner==2.0){x+=size.x*cos(a_rotation)+size.y*sin(a_rotation);y+=size.y*cos(a_rotation)-size.x*sin(a_rotation);}else if(corner==3.0){x+=size.x*cos(a_rotation)-size.y*sin(a_rotation);y+=-size.y*cos(a_rotation)-size.x*sin(a_rotation);}else{x+=-size.x*cos(a_rotation)-size.y*sin(a_rotation);y+=-size.y*cos(a_rotation)+size.x*sin(a_rotation);}return vec3(x,y,coord.z);}void main(){v_texture_coord=a_texture_coord;if(u_flat){vec2 offset=a_offset;vec2 halfSize=a_size/2.0*u_scale;if(u_unit_px){halfSize*=u_zoom_units;offset*=u_zoom_units;}vec3 current=transformCoord(a_pos,halfSize,a_corner);current.z+=u_zIndex;gl_Position=u_matrix*vec4(current.x+offset[0],current.y-offset[1],current.z,1.0);}else{vec4 position=u_matrix*vec4(a_pos,1.0);vec3 screen=position.xyz/position.w;vec2 halfSize=a_size/MAPV_resolution*devicePixelRatio*u_scale;vec2 offset=a_offset*2./MAPV_resolution*devicePixelRatio;if(!u_unit_px){halfSize/=u_zoom_units;offset/=u_zoom_units;}vec3 current=transformCoord(screen,halfSize,a_corner);current.xy=current.xy-offset;current.z+=u_zIndex;gl_Position=vec4(current,1.0);}}",fragmentShader:`precision highp float;varying vec2 v_texture_coord;uniform sampler2D u_icon;uniform float u_opacity;uniform vec4 uSelectedColor;void main(){vec4 textureColor=texture2D(u_icon,vec2(v_texture_coord.x,1.0-v_texture_coord.y));if(textureColor.a==0.0&&uIsPickRender==false){discard;}textureColor.a*=u_opacity;gl_FragColor=textureColor;
#if defined(PICK)
if(mapvIsPicked()){gl_FragColor=vec4(uSelectedColor.rgb,gl_FragColor.a);}
#endif
}`,defines:h.enablePicked?["PICK"]:[]},this),this.vertexBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.uvBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Br({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),h=[{name:"a_pos",buffer:this.vertexBuffer,size:3,stride:36,type:"FLOAT",offset:0},{name:"a_corner",buffer:this.vertexBuffer,size:1,stride:36,type:"FLOAT",offset:12},{name:"a_size",buffer:this.vertexBuffer,size:2,stride:36,type:"FLOAT",offset:16},{name:"a_offset",buffer:this.vertexBuffer,size:2,stride:36,type:"FLOAT",offset:24},{name:"a_rotation",buffer:this.vertexBuffer,size:1,stride:36,type:"FLOAT",offset:32},{name:"a_texture_coord",buffer:this.uvBuffer,size:2,stride:8,type:"FLOAT",offset:0}],h=h.concat(this.getCommonAttributes()),this.vertexArray=new Yi({gl:s,program:this.program,attributes:h})}},{key:"onDestroy",value:function(){}},{key:"onChanged",value:function(s,h){this.gl&&this.processCache(s,h,2<arguments.length&&arguments[2]!==void 0?arguments[2]:{})}},{key:"processCache",value:function(s,h,_){var x=this;this.cachedData=[];for(var S=s.icon,C=s.width,R=s.height,H=s.offset,Z=s.angle,P=0;P<h.length;P++){var F=this.normizedPoint(h[P].geometry.coordinates),V=this.getProperty("icon",S,h[P]),j=this.getProperty("width",C,h[P]),q=this.getProperty("height",R,h[P]),ee=this.getProperty("offset",H,h[P]),Q=this.getProperty("angle",Z,h[P]);F&&V&&(this.cachedData.push({point:F,icon:V,width:j,height:q,offset:ee,angle:Q,index:P}),this.iconHash.get(V)||this.iconHash.set(V,V))}h=Qa(this.iconHash.entries()).filter(function(ne){return typeof ne[1]=="string"}).map(function(ne){var le=Xi(ne,2)[0];return new ac(function(Ae,Se){x.url2canvas(le,function(Ie){x.iconHash.set(le,Ie),Ae()})})}),ac.all(h).then(function(ne){x.buildSprite(s),_.autoRender!==!1&&x.webglLayer&&x.webglLayer.render()})}},{key:"buildSprite",value:function(s){var h=s.padding,_=this.canvas,x=this.ctx,S=[],C=new qc,R=!0,H=!1,Z=void 0;try{for(var P=Gh(this.iconHash),F;!(R=(F=P.next()).done);R=!0){var V=Xi(F.value,2),j=V[1];if(typeof j!="string"){var q=j.width,ee=j.height;S.push({w:q+h[0],h:ee+h[0],width:q,height:ee,key:V[0],icon:j})}}}catch(Q){H=!0,Z=Q}finally{try{!R&&P.return&&P.return()}finally{if(H)throw Z}}for(H=ro(S),R=0;R<S.length;R++)Z=S[R],C.get(Z.key)||C.set(Z.key,Z);for(R=me(H.w),H=me(H.h),_.width=R||1,_.height=H||1,x.save(),_=0;_<S.length;_++)Z=S[_],x.drawImage(Z.icon,Z.x+h[0],Z.y+h[1],Z.width,Z.height);x.restore(),this.loadTexture(),this.buildVertex(s,C,R,H)}},{key:"buildVertex",value:function(s,h,_,x){s=s.enablePicked;for(var S=[],C=[],R=[],H=[],Z=0;Z<this.cachedData.length;Z++){var P=this.cachedData[Z],F=P.point,V=P.width,j=P.height,q=P.offset,ee=P.angle,Q=P.index;if(P=h.get(P.icon)){V=V||P.icon.width,j=j||P.icon.height;var ne=Xi(F,3);F=ne[0];var le=ne[1];ne=ne[2];for(var Ae=0;4>Ae;Ae++)S.push(F,le,ne),S.push(Ae),S.push(V,j),S.push.apply(S,Yn(q)),S.push(ee*Math.PI/180);V=P.x/_,j=(P.x+P.w)/_,q=(P.y+P.h)/x,P=P.y/x,C.push(V,q,V,P,j,P,j,q),P=4*Z,R.push(P,P+2,P+1,P,P+3,P+2),s&&(Q=this.indexToRgb(Q),H.push(Q[0]/255,Q[1]/255,Q[2]/255),H.push(Q[0]/255,Q[1]/255,Q[2]/255),H.push(Q[0]/255,Q[1]/255,Q[2]/255),H.push(Q[0]/255,Q[1]/255,Q[2]/255))}}this.index=R,this.vertexBuffer.updateData(new Float32Array(S)),this.uvBuffer.updateData(new Float32Array(C)),this.indexBuffer.updateData(new Uint32Array(R)),s&&this.pickBuffer.updateData(new Float32Array(H))}},{key:"render",value:function(s){if(this.cachedData&&this.cachedData.length&&this.iconHash&&this.texture){var h=s.gl,_=s.matrix,x=this.getOptions(),S=this.program;S.use(h);var C=s.isPickRender?Cr(h,null):Cr(h,x.blend),R=h.LEQUAL;x.depthFunc&&(R=h[x.depthFunc.toUpperCase()]),this.setGLState({blend:!0,blendFunc:C,polygonOffset:x.polygonOffset,depthTest:x.depthTest,depthMask:x.depthWrite,depthFunc:R}),S.setUniforms(Lr(this.getCommonUniforms(s),{u_icon:this.texture,u_matrix:_,u_flat:x.flat,u_unit_px:x.unit==="px",u_zoom_units:this.map.getZoomUnits(),u_scale:x.scale,u_opacity:x.opacity,u_zIndex:x.zIndex,devicePixelRatio:1<(window.BMAPGL_FORCE_RATIO||window.devicePixelRatio)?2:1})),0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),h.drawElements(h.TRIANGLES,this.index.length,h.UNSIGNED_INT,0))}}},{key:"url2canvas",value:function(s,h){if((typeof s>"u"?"undefined":Ta(s))==="object")h(s);else{var _=new Image;_.crossOrigin="anonymous",_.onload=function(){var x=_.width,S=_.height,C=document.createElement("canvas");C.width=x,C.height=S,C.getContext("2d").drawImage(_,0,0,x,S),h(C)},_.onerror=function(){var x=document.createElement("canvas");x.width=20,x.height=40;var S=x.getContext("2d");S.fillStyle="red",S.beginPath(),S.lineTo(0,0),S.lineTo(20,0),S.lineTo(10,40),S.closePath(),S.fill(),h(x)},_.src=s}}},{key:"loadTexture",value:function(){var s=this;this.canvas?pr(this.gl,this.canvas,function(h){s.texture=h}):this.texture=null}}]),p}(ki),iI=function(d){function p(s){hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s));var h=Lr({blend:"default"},s.options);return s.pointLayer=new Wg(h),s.options.textOptions=Lr({depthTest:!1,collides:!1},s.options.textOptions),s.textLayer=new Yc(s.options.textOptions),h=Lr({},s.options,s.options.iconOptions),s.iconLayer=new ty(h),s.children=[s.pointLayer,s.textLayer,s.iconLayer],s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{minSize:25,maxSize:40,clusterRadius:200,minPoints:2,extent:400,showText:!0,maxZoom:19,minZoom:4,gradient:{0:"rgb(50, 50, 256)","0.1":"rgb(50, 250, 56)","0.5":"rgb(250, 250, 56)",1:"rgb(250, 50, 56)"},textOptions:{fontSize:12,color:"white"},iconOptions:{}}}},{key:"onOptionsChanged",value:function(s){this.textLayer.setOptions(s.textOptions)}},{key:"setOptions",value:function(){var s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},h=this.options.textOptions;s.textOptions&&Lr(h,s.textOptions);var _=s.minZoom,x=s.maxZoom,S=s.clusterRadius;_=x&&x!==this.options.maxZoom||_&&_!==this.options.minZoom||S&&S!==this.options.clusterRadius,Lr(this.options,s,{textOptions:h}),_?this.onChanged(this.options,this.data):this.refreshCluster(),this.onOptionsChanged(this.getOptions())}},{key:"onChanged",value:function(s,h){var _=this;h&&h.length?(h.forEach(function(x){var S=Xi(x.geometry.coordinates,2),C=S[0];S=S[1],-180<=C&&180>=C&&-90<=S&&90>=S||(C=_.map.mercatorToLnglat(C,S),x.geometry.coordinates[0]=C[0],x.geometry.coordinates[1]=C[1])}),this.supercluster=new N2({maxZoom:s.maxZoom,minZoom:s.minZoom,radius:s.clusterRadius,minPoints:s.minPoints,extent:s.extent}),this.supercluster.load(h),this.supercluster.trees.forEach(function(x){var S=0,C=1/0;x.points.forEach(function(R){S=Math.max(R.numPoints||0,S),C=Math.min(R.numPoints||1/0,C)}),x.max=S,x.min=C}),this.refreshCluster()):(this.supercluster=null,this.pointLayer.setData([]),this.iconLayer.setData([]),this.textLayer.setData([]))}},{key:"refreshCluster",value:function(){var s=this,h=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this.options;if(this.supercluster){var _=this.getClusterData(h);if(_&&_.length)if(typeof h.beforeRender=="function"&&h.beforeRender(_)===!1)this.pointLayer.setData([]),this.iconLayer.setData([]),this.textLayer.setData([]);else{var x=[],S=[],C=[];_.forEach(function(R){R.properties.cluster?(x.push(R),C.push({geometry:R.geometry,properties:{text:R.properties.text}})):R.properties.icon||s.options.iconOptions.icon?S.push(R):x.push(R)}),this.pointLayer.setData(x),this.iconLayer.setData(S),this.textLayer.setData(h.showText?C:[]),h.enablePicked&&h.autoSelect&&this.pick(-1,-1)}}}},{key:"getClusterData",value:function(){var s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this.options,h=this.map.getBounds(),_=this.ne=h.getNorthEast();h=this.sw=h.getSouthWest();var x=_,S=x.lng;return x=x.lat,-180<=S&&180>=S&&-90<=x&&90>=x?h=[h.lng,h.lat,_.lng,_.lat]:(_=this.map.mercatorToLnglat(this.ne.lng,this.ne.lat),h=this.map.mercatorToLnglat(this.sw.lng,this.sw.lat),h=h.concat(_)),_=Math.floor(this.map.getZoom()),h=this.supercluster.getClusters(h,_),this.zoom!==_&&0<h.length&&(this.zoom=_,x=this.supercluster.trees,S=x[_]&&x[_].max||this.max,_=x[_]&&x[_].min||this.min,S!==_&&(this.max=S,this.min=_)),this.processData(h,s)}},{key:"processData",value:function(s,h){var _=h.defaultColor,x=h.defaultSize,S=h.gradient,C=h.minSize,R=h.textOptions,H=new Xe({max:this.max,min:~~this.min||1,minSize:C||8,maxSize:h.maxSize||30,gradient:S});_=_||S[0]||"black",x=x||.5*C||5;var Z=R&&R.format;return Z=typeof Z=="function"?Z:null,s.map(function(P){var F=x,V=_,j="";return P.properties&&P.properties.point_count&&(j=P.properties.point_count,F=H.getSize(j)||F,V=H.getColor(j),j=Z?Z(j):j),F=Lr({},P.properties,{text:j,size:F,color:V}),Lr({},P,{properties:F,children:P.id})})}},{key:"pick",value:function(s,h){var _=this.pointLayer.pick(s,h);return 0>_.dataIndex&&(_=this.iconLayer.pick(s,h)),(s=_.dataItem)&&typeof s.children=="number"&&(s.children=this.getClusterPoints(s.children)),_}},{key:"getClusterPoints",value:function(s){var h=this;return s?this.supercluster.getChildren(s).map(function(_){return _.type==="Feature"?h.getClusterPoints(_.id):_}).flat():[]}},{key:"shouldUpdate",value:function(){if(!this.data||!this.supercluster)return!1;if(this.zoom!==Math.floor(this.map.getZoom()))return!0;var s=this.map.getBounds(),h=s.getNorthEast();if(s=s.getSouthWest(),this.ne.lng!==h.lng||this.ne.lat!==h.lat||this.sw.lng!==s.lng||this.sw.lat!==s.lat)return!0}},{key:"render",value:function(s){this.shouldUpdate()?this.refreshCluster():Yl(p.prototype.__proto__||Dr(p.prototype),"render",this).call(this,s)}}]),p}(xl),oI=function(d){function p(s){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s)),s.options.textOptions=Lr({collides:!1,depthWrite:!0},s.options.textOptions),s.textLayer=new Yc(s.options.textOptions),s.options.iconOptions=Lr({},s.options,s.options.iconOptions),s.iconLayer=new ty(s.options.iconOptions),s.children=[s.iconLayer,s.textLayer],s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{clusterRadius:200,minPoints:2,showText:!0,maxZoom:19,minZoom:4,extent:400,textOptions:{fontSize:12,color:"white"},iconOptions:{}}}},{key:"setOptions",value:function(){var s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},h=this.options.textOptions,_=this.options.iconOptions;s.textOptions&&Lr(h,s.textOptions),s.iconOptions&&Lr(_,s.textOptions),_=s.minZoom;var x=s.maxZoom,S=s.clusterRadius;_=x&&x!==this.options.maxZoom||_&&_!==this.options.minZoom||S&&S!==this.options.clusterRadius,Lr(this.options,s,{textOptions:h}),_?this.onChanged(this.options,this.data):this.refreshCluster(),this.onOptionsChanged(this.getOptions())}},{key:"onChanged",value:function(s,h){var _=this;h&&h.length?(h.forEach(function(x){var S=Xi(x.geometry.coordinates,2),C=S[0];S=S[1],-180<=C&&180>=C&&-90<=S&&90>=S||(C=_.map.mercatorToLngLat(C,S),x.geometry.coordinates[0]=C[0],x.geometry.coordinates[1]=C[1])}),this.supercluster=new N2({maxZoom:s.maxZoom,minZoom:s.minZoom,minPoints:s.minPoints,radius:s.clusterRadius,extent:s.extent}),this.supercluster.load(h),this.supercluster.trees.forEach(function(x){var S=0,C=1/0;x.points.forEach(function(R){S=Math.max(R.numPoints||0,S),C=Math.min(R.numPoints||1/0,C)}),x.max=S,x.min=C}),this.refreshCluster()):(this.supercluster=null,this.textLayer.setData([]),this.iconLayer.setData([]))}},{key:"refreshCluster",value:function(){var s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this.options;if(this.supercluster){var h=this.getClusterData(s);if(h&&h.length)if(typeof s.beforeRender=="function"&&s.beforeRender(h)===!1)this.textLayer.setData([]),this.iconLayer.setData([]);else{var _=[],x=[];h.forEach(function(S){S.properties.cluster&&_.push({geometry:S.geometry,properties:{text:S.properties.text}}),x.push(S)}),this.textLayer.setData(s.showText?_:[]),this.iconLayer.setData(x),s.enablePicked&&s.autoSelect&&this.pick(-1,-1)}}}},{key:"getClusterData",value:function(s){var h=this.map.getBounds(),_=this.ne=h.getNorthEast();h=this.sw=h.getSouthWest();var x=_,S=x.lng;return x=x.lat,-180<=S&&180>=S&&-90<=x&&90>=x?h=[h.lng,h.lat,_.lng,_.lat]:(_=this.map.mercatorToLnglat(this.ne.lng,this.ne.lat),h=this.map.mercatorToLnglat(this.sw.lng,this.sw.lat),h=h.concat(_)),_=Math.floor(this.map.getZoom()),h=this.supercluster.getClusters(h,_),this.zoom!==_&&0<h.length&&(this.zoom=_,x=this.supercluster.trees,S=x[_]&&x[_].max||this.max,_=x[_]&&x[_].min||this.min,S!==_&&(this.max=S,this.min=_)),this.processData(h,s)}},{key:"processData",value:function(s,h){var _=this,x=(h=h.textOptions)&&h.format;return x=typeof x=="function"?x:null,s.map(function(S){var C=S.properties||{};if(S.properties&&S.properties.point_count){C=S.properties.point_count;var R=_.getClusterIcon(C);C=x&&x(C),C=Lr({},S.properties,{text:C,icon:R})}return Lr({},S,{properties:C,children:S.id})})}},{key:"getClusterIcon",value:function(s){var h=this.options.iconExtent,_=Eo(h).map(function(H){return+H}),x=_.length;if(x!==0){for(var S=1,C=void 0,R=_[0];S<x;){if(C=R,R=_[S],C<=s&&R>s)return h[C];S++}if(s>R)return h[R]}}},{key:"pick",value:function(s,h){return s=this.iconLayer.pick(s,h),(h=s.dataItem)&&typeof h.children=="number"&&(h.children=this.getClusterPoints(h.children)),s}},{key:"getClusterPoints",value:function(s){var h=this;return s?this.supercluster.getChildren(s).map(function(_){return _.type==="Feature"?h.getClusterPoints(_.id):_}).flat():[]}},{key:"shouldUpdate",value:function(){if(!this.data||!this.supercluster)return!1;if(this.zoom!==Math.floor(this.map.getZoom()))return!0;var s=this.map.getBounds(),h=s.getNorthEast();if(s=s.getSouthWest(),this.ne.lng!==h.lng||this.ne.lat!==h.lat||this.sw.lng!==s.lng||this.sw.lat!==s.lat)return!0}},{key:"render",value:function(s){this.shouldUpdate()?this.refreshCluster():Yl(p.prototype.__proto__||Dr(p.prototype),"render",this).call(this,s)}}]),p}(xl),B2=function(d){function p(s,h){return hr(this,p),ln(this,(p.__proto__||Dr(p)).call(this,s,h))}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return Lr(Yl(p.prototype.__proto__||Dr(p.prototype),"getDefaultOptions",this).call(this),{style:"grid",gridSize:500,gradient:{0:"rgb(50, 50, 256)","0.1":"rgb(50, 250, 56)","0.5":"rgb(250, 250, 56)",1:"rgb(250, 50, 56)"}})}},{key:"onChanged",value:function(s,h){this.gl&&(h=this.processData(h,s),Yl(p.prototype.__proto__||Dr(p.prototype),"onChanged",this).call(this,s,h))}},{key:"generateGrid",value:function(s,h){var _=h.gridSize,x=[],S={};h=s.length;for(var C=this.getPointOffset(),R=0;R<h;R++){var H=this.normizedPoint(s[R].geometry.coordinates),Z=H[2];H=~~((H[0]+C[0])/_)+"_"+~~((H[1]+C[1])/_),S[H]===void 0&&(S[H]={count:0,num:0,z:0});var P=~~s[R].count||1;"properties"in s[R]&&"count"in s[R].properties&&(P=~~s[R].properties.count),S[H].count+=P,S[H].num+=1,S[H].z+=Z}return Eo(S).forEach(function(F){var V=F.split("_");x.push([V[0]*_+_/2,V[1]*_+_/2,S[F].z/S[F].num,S[F].count])}),x}},{key:"processData",value:function(s,h){var _=[];if(h.style==="normal")for(var x=this.getPointOffset(),S=0;S<s.length;S++){var C=this.normizedPoint(s[S].geometry.coordinates),R=C[0]+x[0],H=C[1]+x[1];C=C[2];var Z=~~s[S].count||1;"properties"in s[S]&&"count"in s[S].properties&&(Z=~~s[S].properties.count),_.push([R,H,C,Z])}else _=this.generateGrid(s,h);if(x=s=0,h.max!==void 0&&h.min!==void 0)s=h.max,x=h.min;else{for(_[0]&&(s=_[0][3],x=_[0][3]),S=_.length,R=0;R<S;R++)H=_[R],s=Math.max(H[3],s),x=Math.min(H[3],x);s/=2}for(h=new Xe({max:~~s,min:x,gradient:h.gradient}),s=[],x=0;x<_.length;x++)S=_[x],S[0]=S[0],S[1]=S[1],R=h.getImageData(S[3]),s.push({geometry:{type:"Point",coordinates:[S[0],S[1],S[2]]},color:[R[0]/255,R[1]/255,R[2]/255,R[3]/255]});return s}}]),p}(Wg),aI=function(d){function p(s,h){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s,h)),s.bufferData=[],s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{color:[1,.05,.05,1]}}},{key:"onChanged",value:function(s,h){var _=this;if(s=this.gl){this.buffer=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,this.buffer);for(var x=[],S=function(R){var H=5*R;for(R=0;R<h.length;R++)h[R].geometry.coordinates.forEach(function(Z){for(var P=0;P<Z.length-1;P++){var F=_.normizedPoint(Z[P]);x.push(F[0]),x.push(F[1]),x.push(Number(H)),F=_.normizedPoint(Z[P+1]),x.push(F[0]),x.push(F[1]),x.push(Number(H))}})},C=0;20>C;C++)S(C);s.bufferData(s.ARRAY_BUFFER,new Float32Array(x),s.STATIC_DRAW),this.bufferData=x,s.bindBuffer(s.ARRAY_BUFFER,null)}}},{key:"initialize",value:function(s){this.gl=s,this.program=new Jn(s,{vertexShader:"uniform mat4 uMatrix;attribute vec3 aPos;void main(){gl_PointSize=10.0;gl_Position=uMatrix*vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform vec4 uFragColor;void main(){gl_FragColor=uFragColor;}"}),this.buffer=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,this.buffer)}},{key:"render",value:function(s){var h=s.gl;s=s.matrix;var _=this.program;h.useProgram(_.program);var x=this.normizedColor(this.options.color);h.uniform4f(_.uniforms.uFragColor,x[0],x[1],x[2],x[3]),h.uniformMatrix4fv(_.uniforms.uMatrix,!1,s),h.bindBuffer(h.ARRAY_BUFFER,this.buffer),h.enableVertexAttribArray(_.attributes.aPos),h.vertexAttribPointer(_.attributes.aPos,3,h.FLOAT,!1,0,0),this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:[h.ONE,h.ONE]}),h.drawArrays(h.LINES,0,this.bufferData.length/3)}}]),p}(ki),E_={circle:1,square:2},Qc=function(d){function p(s,h){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s,h)),s.bufferData=[],s.startTime=s.options.startTime||0,s.endTime=s.options.endTime,s.time=s.startTime,s.autoUpdate=!0,s}return sn(p,d),Mr(p,[{key:"initialize",value:function(s){this.gl=s,this.program=new Jn(this.gl,{vertexShader:"attribute vec4 aPos;attribute vec4 aColor;attribute float aSize;uniform mat4 u_matrix;varying vec4 vColor;uniform float currentTime;uniform float trailLength;varying float vTime;void main(void){if(aColor.w>=0.0&&aColor.w<=1.0){vColor=aColor;}else{vColor=vec4(aColor.xyz,1.0);}gl_Position=u_matrix*vec4(aPos.xyz,1.0);gl_PointSize=aSize;vTime=1.0-((currentTime-aPos.w)/trailLength);}",fragmentShader:"precision highp float;varying vec4 vColor;uniform int uShape;varying float vTime;void main(void){if(vTime>1.0||vTime<0.0){discard;}if(uShape==1){float d=distance(gl_PointCoord,vec2(0.5,0.5));if(d<0.5){gl_FragColor=vColor;}else{discard;}}else{gl_FragColor=vec4(vColor.rgb,vColor.a*vTime);}}"}),this.f32BufferData=new Float32Array,this.buffer=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,this.buffer)}},{key:"onChanged",value:function(s,h){var _=this.gl;if(_){this.buffer=_.createBuffer(),_.bindBuffer(_.ARRAY_BUFFER,this.buffer);for(var x=[],S=s.color||[.1,.1,.9,1],C=s.size||5,R=0;R<h.length;R++){var H=h[R].geometry.coordinates,Z=S;Object.prototype.toString.call(Z)==="[object Function]"?Z=Z(h[R]):(Z=h[R].color||S,"properties"in h[R]&&"color"in h[R].properties&&(Z=h[R].properties.color)),Z=this.normizedColor(Z);var P=this.normizedPoint(H),F=C;F=Object.prototype.toString.call(F)==="[object Function]"?F(h[R]):Number(F);var V=h[R].time||R;"properties"in h[R]&&"time"in h[R].properties&&(V=h[R].properties.time),x.push(P[0],P[1],Number(H[2]||0),V),x.push(Z[0],Z[1],Z[2],Z[3]),x.push(F*window.devicePixelRatio)}s.endTime===void 0&&(this.endTime=h.length),this.bufferData=x,this.f32BufferData=new Float32Array(x),_.bufferData(_.ARRAY_BUFFER,this.f32BufferData,_.STATIC_DRAW)}}},{key:"render",value:function(s){var h=s.gl,_=s.matrix;0>=this.bufferData.length||(s=this.program,h.useProgram(s.program),h.uniformMatrix4fv(s.uniforms.u_matrix,!1,_),h.bindBuffer(h.ARRAY_BUFFER,this.buffer),_=this.f32BufferData.BYTES_PER_ELEMENT,h.enableVertexAttribArray(s.attributes.aPos),h.vertexAttribPointer(s.attributes.aPos,4,h.FLOAT,!1,9*_,0),h.enableVertexAttribArray(s.attributes.aColor),h.vertexAttribPointer(s.attributes.aColor,4,h.FLOAT,!1,9*_,4*_),h.enableVertexAttribArray(s.attributes.aSize),h.vertexAttribPointer(s.attributes.aSize,1,h.FLOAT,!1,9*_,8*_),h.uniform1f(s.uniforms.currentTime,this.time),h.uniform1f(s.uniforms.trailLength,this.options.trailLength||3),_=1,this.options.shape&&E_[this.options.shape]&&(_=E_[this.options.shape]),h.uniform1i(s.uniforms.uShape,_),this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:this.options.blend==="lighter"?[h.SRC_ALPHA,h.ONE]:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA]}),h.drawArrays(h.POINTS,0,this.bufferData.length/9),this.time+=this.options.step||.1,this.time>this.endTime&&(this.time=this.startTime))}}]),p}(ki),va=function(d){function p(s,h){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s,h)),s.bufferData=[],s.startTime=s.options.startTime||0,s.endTime=s.options.endTime,s.time=s.startTime,s.autoUpdate=!0,s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{color:[1,.05,.05,1],trailLength:3,step:.1,polygonOffset:[0,0]}}},{key:"initialize",value:function(s){this.gl=s,this.program=new Jn(this.gl,{vertexShader:"precision highp float;attribute vec4 aPos;attribute vec4 aColor;uniform mat4 u_matrix;uniform float currentTime;uniform float trailLength;varying float vTime;varying vec4 vColor;void main(){gl_Position=u_matrix*vec4(aPos.xyz,1.0);vColor=aColor;vTime=1.0-((currentTime-aPos.w)/trailLength);}",fragmentShader:"precision highp float;uniform vec3 uFragColor;varying vec4 vColor;varying float vTime;void main(){if(vTime>1.0||vTime<0.0){discard;}gl_FragColor=vec4(vColor.rgb,1.0*vTime);}"},this),this.buffer=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,this.buffer)}},{key:"setTime",value:function(s){this.time=s}},{key:"onChanged",value:function(s,h){var _=this.gl;if(_){this.buffer=_.createBuffer(),_.bindBuffer(_.ARRAY_BUFFER,this.buffer);for(var x=[],S=0,C=this.options.color,R=0;R<h.length;R++){var H=h[R].geometry.coordinates;h[R].color&&(C=h[R].color),"properties"in h[R]&&"color"in h[R].properties&&(C=h[R].properties.color),Object.prototype.toString.call(C)==="[object Function]"&&(C=C(h[R])),C=this.normizedColor(C),H.length>S&&(S=H.length);for(var Z=0;Z<H.length-1;Z++){var P=this.normizedPoint(H[Z]);x.push(P[0]),x.push(P[1]),x.push(P[2]),H[Z][3]===void 0?x.push(Z):x.push(Number(H[Z][3])),x.push(C[0]),x.push(C[1]),x.push(C[2]),x.push(C[3]),P=this.normizedPoint(H[Z+1]),x.push(P[0]),x.push(P[1]),x.push(P[2]),H[Z+1][3]===void 0?x.push(Z+1):x.push(Number(H[Z+1][3])),x.push(C[0]),x.push(C[1]),x.push(C[2]),x.push(C[3])}}s.endTime===void 0&&(this.endTime=S),this.bufferData=x,this.f32BufferData=new Float32Array(x),_.bufferData(_.ARRAY_BUFFER,this.f32BufferData,_.STATIC_DRAW)}}},{key:"render",value:function(s){var h=s.gl,_=s.matrix;s=this.getOptions();var x=this.program;x.use(h),h.uniformMatrix4fv(x.uniforms.u_matrix,!1,_),h.bindBuffer(h.ARRAY_BUFFER,this.buffer),_=this.f32BufferData.BYTES_PER_ELEMENT,h.enableVertexAttribArray(x.attributes.aPos),h.vertexAttribPointer(x.attributes.aPos,4,h.FLOAT,!1,8*_,0),h.enableVertexAttribArray(x.attributes.aColor),h.vertexAttribPointer(x.attributes.aColor,4,h.FLOAT,!1,8*_,4*_),_=this.normizedColor(s.color),h.uniform3f(x.uniforms.uFragColor,_[0],_[1],_[2]),h.uniform1f(x.uniforms.currentTime,this.time),h.uniform1f(x.uniforms.trailLength,s.trailLength),this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:s.blend==="lighter"?[h.ONE,h.ONE]:[h.SRC_ALPHA,h.ONE],polygonOffset:s.polygonOffset,depthMask:!1}),h.drawArrays(h.LINES,0,this.bufferData.length/8),this.time+=s.step,this.time>this.endTime&&(this.time=this.startTime)}}]),p}(ki),sI=function(d){function p(s,h){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s,h)),s.name="IconCollidesLayer",s.index=[],h=s.canvas=document.createElement("canvas"),s.ctx=h.getContext("2d"),s.iconHash=new qc,s.boxHash=new qc,s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{flat:!1,unit:"px",scale:1,angle:0,offset:[0,0],padding:[0,0]}}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions();this.texture=null,this.lastUpdateTime=0,this.program=new Jn(this.gl,{vertexShader:"precision highp float;attribute vec3 a_pos;attribute float a_corner;attribute float a_rotation;attribute vec2 a_size;attribute vec2 a_offset;attribute vec2 a_texture_coord;uniform mat4 u_matrix;uniform vec2 u_size;uniform float devicePixelRatio;uniform float u_zoom_units;uniform float u_zIndex;uniform float u_scale;uniform bool u_unit_px;uniform bool u_flat;varying vec2 v_texture_coord;/***点A(x,y)，绕原点顺时针旋转角度a新坐标的计算公式*x1=x*cos(a)+y*sin(a)*y1=y*cos(a)-x*sin(a)*/vec3 transformCoord(vec3 coord,vec2 size,float corner){float x=coord.x;float y=coord.y;if(corner==1.0){x+=-size.x*cos(a_rotation)+size.y*sin(a_rotation);y+=size.y*cos(a_rotation)+size.x*sin(a_rotation);}else if(corner==2.0){x+=size.x*cos(a_rotation)+size.y*sin(a_rotation);y+=size.y*cos(a_rotation)-size.x*sin(a_rotation);}else if(corner==3.0){x+=size.x*cos(a_rotation)-size.y*sin(a_rotation);y+=-size.y*cos(a_rotation)-size.x*sin(a_rotation);}else{x+=-size.x*cos(a_rotation)-size.y*sin(a_rotation);y+=-size.y*cos(a_rotation)+size.x*sin(a_rotation);}return vec3(x,y,coord.z);}void main(){v_texture_coord=a_texture_coord;if(u_flat){vec2 offset=a_offset;vec2 halfSize=a_size/2.0*u_scale;if(u_unit_px){halfSize*=u_zoom_units;offset*=u_zoom_units;}vec3 current=transformCoord(a_pos,halfSize,a_corner);current.z+=u_zIndex;gl_Position=u_matrix*vec4(current.x+offset[0],current.y-offset[1],current.z,1.0);}else{vec4 position=u_matrix*vec4(a_pos,1.0);vec3 screen=position.xyz/position.w;vec2 halfSize=a_size/MAPV_resolution*devicePixelRatio*u_scale;vec2 offset=a_offset*2./MAPV_resolution*devicePixelRatio;if(!u_unit_px){halfSize/=u_zoom_units;offset/=u_zoom_units;}vec3 current=transformCoord(screen,halfSize,a_corner);current.xy=current.xy-offset;current.z+=u_zIndex;gl_Position=vec4(current,1.0);}}",fragmentShader:`precision highp float;varying vec2 v_texture_coord;uniform sampler2D u_icon;uniform vec4 uSelectedColor;void main(){vec4 textureColor=texture2D(u_icon,vec2(v_texture_coord.x,1.0-v_texture_coord.y));if(textureColor.a==0.0&&uIsPickRender==false){discard;}gl_FragColor=textureColor;
#if defined(PICK)
if(mapvIsPicked()){gl_FragColor=vec4(uSelectedColor.rgb,gl_FragColor.a);}
#endif
}`,defines:h.enablePicked?["PICK"]:[]},this),this.vertexBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.uvBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Br({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),h=[{name:"a_pos",buffer:this.vertexBuffer,size:3,stride:36,type:"FLOAT",offset:0},{name:"a_corner",buffer:this.vertexBuffer,size:1,stride:36,type:"FLOAT",offset:12},{name:"a_size",buffer:this.vertexBuffer,size:2,stride:36,type:"FLOAT",offset:16},{name:"a_offset",buffer:this.vertexBuffer,size:2,stride:36,type:"FLOAT",offset:24},{name:"a_rotation",buffer:this.vertexBuffer,size:1,stride:36,type:"FLOAT",offset:32},{name:"a_texture_coord",buffer:this.uvBuffer,size:2,stride:8,type:"FLOAT",offset:0}],h=h.concat(this.getCommonAttributes()),this.vertexArray=new Yi({gl:s,program:this.program,attributes:h})}},{key:"onDestroy",value:function(){}},{key:"onChanged",value:function(s,h){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};this.gl&&(this.cachedData=[],this.boxHash.clear(),this.processCache(s,h,_))}},{key:"processCache",value:function(s,h,_){for(var x=this,S=s.icon,C=s.width,R=s.height,H=s.offset,Z=s.angle,P=0;P<h.length;P++){var F=this.normizedPoint(h[P].geometry.coordinates),V=this.getProperty("icon",S,h[P]),j=this.getProperty("width",C,h[P]),q=this.getProperty("height",R,h[P]),ee=this.getProperty("offset",H,h[P]),Q=this.getProperty("angle",Z,h[P]);F&&V&&(this.cachedData.push({point:F,icon:V,width:j,height:q,offset:ee,angle:Q,dataIndex:P}),this.iconHash.get(V)||this.iconHash.set(V,V))}h=Qa(this.iconHash.entries()).filter(function(ne){return typeof ne[1]=="string"}).map(function(ne){var le=Xi(ne,2)[0];return new ac(function(Ae,Se){x.url2canvas(le,function(Ie){x.iconHash.set(le,Ie),Ae()})})}),ac.all(h).then(function(ne){x.buildSprite(s),_.autoRender!==!1&&x.webglLayer&&x.webglLayer.render()})}},{key:"buildSprite",value:function(s){s=s.padding;var h=this.canvas,_=this.ctx,x=[],S=!0,C=!1,R=void 0;try{for(var H=Gh(this.iconHash),Z;!(S=(Z=H.next()).done);S=!0){var P=Xi(Z.value,2),F=P[1];if(typeof F!="string"){var V=F.width,j=F.height;x.push({w:V+s[0],h:j+s[0],width:V,height:j,key:P[0],icon:F})}}}catch(q){C=!0,R=q}finally{try{!S&&H.return&&H.return()}finally{if(C)throw R}}for(H=ro(x),Z=0;Z<x.length;Z++)P=x[Z],this.boxHash.get(P.key)||this.boxHash.set(P.key,P);for(Z=me(H.w)||1,H=me(H.h)||1,h.width=Z,h.height=H,_.save(),h=0;h<x.length;h++)H=x[h],_.drawImage(H.icon,H.x+s[0],H.y+s[1],H.width,H.height);_.restore(),this.loadTexture()}},{key:"render",value:function(s){if(this.cachedData&&this.cachedData.length&&this.texture){var h=s.gl,_=s.matrix,x=this.getOptions(),S=this.program;S.use(h),this.throttleUpdate(s),this.setGLState({blend:!0,blendFunc:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA]}),S.setUniforms(Lr(this.getCommonUniforms(s),{u_icon:this.texture,u_matrix:_,u_flat:x.flat,u_unit_px:x.unit==="px",u_zoom_units:this.map.getZoomUnits(),u_scale:x.scale,u_zIndex:x.zIndex,devicePixelRatio:1<(window.BMAPGL_FORCE_RATIO||window.devicePixelRatio)?2:1})),0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),h.drawElements(h.TRIANGLES,this.index.length,h.UNSIGNED_INT,0))}}},{key:"throttleUpdate",value:function(s){this.updateIcon(s)}},{key:"updateIcon",value:function(s){if(this.iconHash.size&&this.boxHash.size){var h=this.getOptions(),_=s.gl;s=s.matrix,h=h.enablePicked;var x=[],S=[],C=[],R=[],H=this.canvas.width,Z=this.canvas.height,P=_.canvas.width/window.devicePixelRatio;_=_.canvas.height/window.devicePixelRatio;for(var F=new id,V=0,j=0;j<this.cachedData.length;j++){var q=this.cachedData[j],ee=q.point,Q=q.width,ne=q.height,le=q.offset,Ae=q.angle,Se=q.dataIndex;if(q=this.boxHash.get(q.icon)){Q=Q||q.icon.width,ne=ne||q.icon.height;var Ie=Xi(ee,3);ee=Ie[0];var Be=Ie[1];Ie=Ie[2];var nt=Fo.clone([ee,Be,Ie,1]);Fo.transformMat4(nt,nt,s),Fo.scale(nt,nt,1/nt[3]);var rt=(nt[0]+1)/2*P-Q/2;nt=(-nt[1]+1)/2*_-ne/2;var St=rt+Q,Pt=nt+ne;if(!(0>St||0>Pt||rt>P||nt>_||(rt={minX:rt,maxX:St,minY:nt,maxY:Pt},F.collides(rt)))){for(F.insert(rt),rt=0;4>rt;rt++)x.push(ee,Be,Ie),x.push(rt),x.push(Q,ne),x.push.apply(x,Yn(le)),x.push(Ae*Math.PI/180);Q=q.x/H,ne=(q.x+q.w)/H,le=(q.y+q.h)/Z,q=q.y/Z,S.push(Q,le,Q,q,ne,q,ne,le),q=4*V,C.push(q,q+2,q+1,q,q+3,q+2),h&&(Se=this.indexToRgb(Se),R.push(Se[0]/255,Se[1]/255,Se[2]/255),R.push(Se[0]/255,Se[1]/255,Se[2]/255),R.push(Se[0]/255,Se[1]/255,Se[2]/255),R.push(Se[0]/255,Se[1]/255,Se[2]/255)),V+=1}}}this.index=C,this.vertexBuffer.updateData(new Float32Array(x)),this.uvBuffer.updateData(new Float32Array(S)),this.indexBuffer.updateData(new Uint32Array(C)),h&&this.pickBuffer.updateData(new Float32Array(R))}}},{key:"url2canvas",value:function(s,h){if((typeof s>"u"?"undefined":Ta(s))==="object")h(s);else{var _=new Image;_.crossOrigin="anonymous",_.onload=function(){var x=_.width,S=_.height,C=document.createElement("canvas");C.width=x,C.height=S,C.getContext("2d").drawImage(_,0,0,x,S),h(C)},_.onerror=function(){var x=document.createElement("canvas");x.width=20,x.height=40;var S=x.getContext("2d");S.fillStyle="red",S.beginPath(),S.lineTo(0,0),S.lineTo(20,0),S.lineTo(10,40),S.closePath(),S.fill(),h(x)},_.src=s}}},{key:"loadTexture",value:function(){var s=this;this.canvas?pr(this.gl,this.canvas,function(h){s.texture=h}):this.texture=null}}]),p}(ki),Zi=function(d){function p(s,h){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s,h)),s.name="LineFlowLayer",s.initData(),s.date=new Date,s.autoUpdate=!0,s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{color:"rgba(25, 25, 250, 1)",blend:"normal",width:2,antialias:!1,interval:.1,duration:2,trailLength:.5,minZoom:2,maxZoom:25,polygonOffset:[0,0]}}},{key:"initData",value:function(){this.dataMgr={position:[],prev:[],next:[],direction:[],color:[],index:[],counter:[]}}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions();this.program=new Jn(this.gl,{vertexShader:`uniform mat4 u_matrix;uniform float thickness;uniform vec4 uSelectedColor;attribute vec3 position;attribute vec3 next;attribute vec3 previous;attribute float direction;attribute vec4 aColor;attribute float aCounter;attribute vec2 uv;varying vec4 vColor;varying vec2 vNormal;varying float vCounter;vec2 project(vec4 coord){vec3 screen=coord.xyz/coord.w;vec2 clip=(screen.xy+1.0)/2.0;return clip*MAPV_resolution;}vec4 unproject(vec2 projected,float z,float w){vec2 clip=projected/MAPV_resolution;vec2 screen=clip*2.0-1.0;return vec4(screen*w,z,w);}void main(){vColor=aColor;vCounter=aCounter;
#if defined(PICK)
if(mapvIsPicked()){vColor=uSelectedColor;}
#endif
vec4 previousProjected=u_matrix*vec4(previous,1.0);vec4 currentProjected=u_matrix*vec4(position,1.0);vec4 nextProjected=u_matrix*vec4(next,1.0);vec2 currentScreen=project(currentProjected);vec2 previousScreen=project(previousProjected);vec2 nextScreen=project(nextProjected);float len=thickness;float orientation=direction;vec2 dir=vec2(0.0);if(currentScreen==previousScreen){dir=normalize(nextScreen-currentScreen);}else if(currentScreen==nextScreen){dir=normalize(currentScreen-previousScreen);}else{vec2 dirA=normalize((currentScreen-previousScreen));vec2 dirB=normalize((nextScreen-currentScreen));vec2 tangent=normalize(dirA+dirB);vec2 perp=vec2(-dirA.y,dirA.x);vec2 miter=vec2(-tangent.y,tangent.x);dir=tangent;float angle=40.0;if(dot(dirA,dirB)>cos(radians(angle))){len=thickness/dot(miter,perp);}}vec2 normal=vec2(-dir.y,dir.x);vNormal=normal*orientation;normal*=len/2.0;vec2 pos=currentScreen+normal*orientation;vec4 finalPos=unproject(pos,currentProjected.z,currentProjected.w);gl_Position=finalPos;}`,fragmentShader:"precision highp float;uniform bool uAntialias;uniform bool uAnimate;uniform float uTime;uniform float duration;uniform float interval;uniform float trailLength;varying vec4 vColor;varying vec2 vNormal;varying float vCounter;void main(){vec4 color=vColor;if(uAntialias){float blur=1.0;blur=1.0-smoothstep(0.98,1.0,length(vNormal));color.a*=blur;}if(uAnimate){float alpha=1.0-fract(mod(1.0-vCounter,interval)*(1.0/interval)+uTime/duration);alpha=(alpha+trailLength-1.0)/trailLength;color.a*=alpha;}gl_FragColor=color;}",defines:h.enablePicked?["PICK"]:[]},this),this.prevBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.currentBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.nextBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.directionBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.colorBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.counterBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Br({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),h=[{stride:12,name:"previous",buffer:this.prevBuffer,size:3,type:"FLOAT",offset:0},{stride:12,name:"position",buffer:this.currentBuffer,size:3,type:"FLOAT",offset:0},{stride:12,name:"next",buffer:this.nextBuffer,size:3,type:"FLOAT",offset:0},{stride:4,name:"direction",buffer:this.directionBuffer,size:1,type:"FLOAT",offset:0},{stride:16,name:"aColor",buffer:this.colorBuffer,size:4,type:"FLOAT",offset:0},{stride:4,name:"aCounter",buffer:this.counterBuffer,size:1,type:"FLOAT",offset:0}],h=h.concat(this.getCommonAttributes()),this.vertexArray=new Yi({gl:s,program:this.program,attributes:h})}},{key:"onDestroy",value:function(){}},{key:"onChanged",value:function(s,h){var _=this;if(this.gl){this.initData();for(var x=1,S=[],C=0;C<h.length;C++){var R=[],H=h[C].geometry.coordinates;H&&0<H.length&&(R=h[C].geometry.type==="Polygon"?H[0].map(function(j){return _.normizedPoint(j)}):H.map(function(j){return _.normizedPoint(j)})),R=Vi(R),H=R.total,S[C]=R.arr,x=Math.max(H,x)}for(C=[],R=s.color,H=0;H<h.length;H++){var Z=[],P=h[H].geometry.coordinates;P&&0<P.length&&(Z=h[H].geometry.type==="Polygon"?P[0].map(function(j){return _.normizedPoint(j)}):P.map(function(j){return _.normizedPoint(j)})),P=R,Object.prototype.toString.call(P)==="[object Function]"?P=P(h[H]):(P=h[H].color||R,"properties"in h[H]&&"color"in h[H].properties&&(P=h[H].properties.color)),P=this.normizedColor(P);for(var F=this.addMultipleCoords(Z),V=0;V<F.length;V++)this.processData(this.dataMgr,F[V],S[H],x,P);if(s.enablePicked)for(P=this.indexToRgb(H),F=0;F<Z.length;F++)C.push(P[0]/255,P[1]/255,P[2]/255),C.push(P[0]/255,P[1]/255,P[2]/255),s.repeat&&(C.push(P[0]/255,P[1]/255,P[2]/255),C.push(P[0]/255,P[1]/255,P[2]/255),C.push(P[0]/255,P[1]/255,P[2]/255),C.push(P[0]/255,P[1]/255,P[2]/255))}this.counterBuffer.updateData(new Float32Array(this.dataMgr.counter)),this.currentBuffer.updateData(new Float32Array(this.dataMgr.position)),this.prevBuffer.updateData(new Float32Array(this.dataMgr.prev)),this.nextBuffer.updateData(new Float32Array(this.dataMgr.next)),this.directionBuffer.updateData(new Float32Array(this.dataMgr.direction)),this.colorBuffer.updateData(new Float32Array(this.dataMgr.color)),this.indexBuffer.updateData(new Uint32Array(this.dataMgr.index)),s.enablePicked&&this.pickBuffer.updateData(new Float32Array(C))}}},{key:"processData",value:function(s,h,_,x,S){var C,R,H,Z,P,F,V,j=h.length,q=s.position.length/6;_=bi(_.map(function(Ae){return Ae/x}));var ee=bi(h.map(function(Ae){return-1}),!0),Q=bi(h),ne=bi(h.map(Ao(-1))),le=bi(h.map(Ao(1)));h=bi(h.map(function(Ae){return S})),j=us(j,q),(C=s.counter).push.apply(C,Yn(_)),(R=s.position).push.apply(R,Yn(Gi(Q))),(H=s.prev).push.apply(H,Yn(Gi(ne))),(Z=s.next).push.apply(Z,Yn(Gi(le))),(P=s.direction).push.apply(P,Yn(ee)),(F=s.color).push.apply(F,Yn(Gi(h))),(V=s.index).push.apply(V,Yn(j))}},{key:"render",value:function(s){var h=s.gl,_=s.matrix,x=this.dataMgr;if(x&&!(0>=x.index.length)){var S=this.getOptions(),C=this.program;if(C.use(h),this.map){var R=this.map.getZoom();R=!!(R>=S.minZoom&&R<=S.maxZoom&&this.autoUpdate)}else R=!0;C.setUniforms(Lr(this.getCommonUniforms(s),{u_matrix:_,thickness:S.width,uAntialias:S.antialias,uTime:(new Date-this.date)/1e3,uAnimate:R,duration:S.duration,interval:S.interval,trailLength:S.trailLength})),this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:S.blend==="lighter"?[h.SRC_ALPHA,h.ONE]:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA],polygonOffset:S.polygonOffset}),this.indexBuffer.bind(),this.vertexArray.bind(),h.drawElements(h.TRIANGLES,x.index.length,h.UNSIGNED_INT,0)}}}]),p}(ki),z2=function(d){function p(s,h){return hr(this,p),ln(this,(p.__proto__||Dr(p)).call(this,s,h))}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{}}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions();this.texture=null,this.program=new Jn(this.gl,{vertexShader:`precision highp float;attribute vec3 a_pos;attribute vec2 a_texture_coord;uniform sampler2D uTerrain;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;varying vec2 v_texture_coord;void main(){v_texture_coord=a_texture_coord;vec3 pos=a_pos.xyz;
#if defined(TERRAIN)
vec4 terrainColor=texture2D(uTerrain,vec2(v_texture_coord.s,v_texture_coord.t));vec3 rgb=terrainColor.rgb*256.0;pos.z=-10000.0+((rgb.r*256.0*256.0+rgb.g*256.0+rgb.b)*0.1);pos.z=pos.z-60.0;
#endif
vec4 position=u_proj_matrix*u_mv_matrix*vec4(pos,1.0);gl_Position=position;}`,fragmentShader:"precision highp float;varying vec2 v_texture_coord;uniform sampler2D uTile;uniform bool uUseFilter;uniform vec4 uFilterColor;void main(){vec4 textureColor=texture2D(uTile,vec2(v_texture_coord.s,v_texture_coord.t));if(uUseFilter){textureColor=textureColor*uFilterColor;}gl_FragColor=textureColor;}",defines:h.terrain?["TERRAIN"]:""},this),this.vertexBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Br({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.vertexArray=new Yi({gl:s,program:this.program,attributes:[{name:"a_pos",buffer:this.vertexBuffer,stride:20,size:3,type:"FLOAT",offset:0},{name:"a_texture_coord",buffer:this.vertexBuffer,size:2,stride:20,type:"FLOAT",offset:12}]})}},{key:"onChanged",value:function(s,h){var _=this;this.gl&&(this.loadTextureTime&&clearTimeout(this.loadTextureTime),this.loadTextureTime=setTimeout(function(){_.loadTexture(function(){_.parseData(h),_.dataTime=new Date,_.webglLayer.render()})},0))}},{key:"render",value:function(s){var h=s.gl,_=s.projectionMatrix;s=s.viewMatrix;var x=this.getOptions(),S=this.program,C=S.uniforms;S.use(h),this.texture&&(h.activeTexture(h.TEXTURE0),h.uniform1i(C.uTile,0),h.bindTexture(h.TEXTURE_2D,this.texture),h.activeTexture(h.TEXTURE1),h.uniform1i(C.uTerrain,1),h.bindTexture(h.TEXTURE_2D,this.terrainSampler),this.setGLState({cullFace:!1}),S.setUniforms({u_proj_matrix:_,uUseFilter:!!x.filterColor,uFilterColor:this.normizedColor(x.filterColor||"rgba(0, 0, 100, 1.0)"),u_mv_matrix:s}),0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),h.drawElements(h.TRIANGLES,this.index.length,h.UNSIGNED_INT,0)))}},{key:"loadTexture",value:function(s){var h=this,_=this.getOptions();_.tile?_.terrain?pr(this.gl,_.terrain,function(x,S){h.terrainSampler=x,pr(h.gl,_.tile,function(C,R){h.texture=C,s&&s(),h.webglLayer.render()})},{TEXTURE_WRAP_S:"MIRRORED_REPEAT",TEXTURE_WRAP_T:"MIRRORED_REPEAT"}):pr(this.gl,_.tile,function(x,S){h.texture=x,s&&s(),h.webglLayer.render()}):(this.texture=null,s&&s())}},{key:"parseData",value:function(s){var h=this,_=[],x=[];if(s&&s[0]){var S=s[0].geometry.coordinates[0];S=S.map(function(j){return h.normizedPoint(j)}),s=S[0][0];var C=S[0][1],R=S[0][2],H=(S[2][0]-s)/16;S=(S[2][1]-C)/16;for(var Z=0;16>=Z;Z++)for(var P=0;16>=P;P++)if(_.push(s+H*P,C+S*Z,R),_.push(P/16,Z/16),16>P&&16>Z){var F=17*Z+P,V=17*(Z+1)+P;x.push(F,V+1,F+1),x.push(F,V,V+1)}}this.index=x,this.vertexBuffer.updateData(new Float32Array(_)),this.indexBuffer.updateData(new Uint32Array(x))}}]),p}(ki),lI=function(d){function p(s,h){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s,h)),s.name="BoardLayer",s.index=[],h=s.canvas=document.createElement("canvas"),s.ctx=h.getContext("2d"),s.iconHash=new qc,s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{unit:"px",scale:1,angle:0,offsetZ:0,padding:[0,0],polygonOffset:[0,0],enableColorMix:!1,mixColor:"#fff",mixAmount:.5}}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions();this.texture=null,this.vertexBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.uvBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Br({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"});var _=[{name:"a_pos",buffer:this.vertexBuffer,size:3,stride:32,type:"FLOAT",offset:0},{name:"a_corner",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:12},{name:"a_size",buffer:this.vertexBuffer,size:2,stride:32,type:"FLOAT",offset:16},{name:"a_offsetZ",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:24},{name:"a_rotation",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:28},{name:"a_texture_coord",buffer:this.uvBuffer,size:2,stride:8,type:"FLOAT",offset:0}];_=_.concat(this.getCommonAttributes());var x=[];h.enablePicked&&x.push("PICK"),this.options.enableColorMix&&(this.colorBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),_.push({stride:16,name:"a_color",buffer:this.colorBuffer,size:4,type:"FLOAT",offset:0}),x.push("USE_COLOR_MIX")),this.program=new Jn(this.gl,{vertexShader:`precision highp float;attribute vec3 a_pos;attribute float a_corner;attribute float a_rotation;attribute float a_offsetZ;attribute vec2 a_size;attribute vec2 a_texture_coord;
#if defined(USE_COLOR_MIX)
attribute vec4 a_color;
#endif
uniform mat4 u_matrix;uniform vec2 u_size;uniform float u_zoom_units;uniform float u_scale;uniform bool u_unit_px;varying vec2 v_texture_coord;varying vec4 v_color;/***三维空间内，绕Z轴旋转的矩阵，右手坐标系下*[x'][cos0-sin0  0  0]*[y']=[sin0 cos0   0  0]*[z'][0     0     1  0]*[1][0     0     0  1]*/mat3 rotateZ(float angle){float cos0=cos(angle);float sin0=sin(angle);return mat3(cos0,sin0,0.,-sin0,cos0,0.,0.,0.,1.);}vec3 transformCoord(vec3 coord,vec2 size,float corner){float x=coord.x;float y=coord.y;float z=coord.z;mat3 mat=rotateZ(a_rotation);vec3 rotated=vec3(size[0],0.0,size[1]);if(corner==1.0){rotated=mat*vec3(-size[0],0.0,size[1]);}else if(corner==2.0){rotated=mat*vec3(size[0],0.0,size[1]);}else if(corner==3.0){rotated=mat*vec3(size[0],0.0,-size[1]);}else{rotated=mat*vec3(-size[0],0.0,-size[1]);}x+=rotated.x;y+=rotated.y;z+=rotated.z;return vec3(x,y,z);}void main(){
#if defined(USE_COLOR_MIX)
v_color=a_color;
#endif
v_texture_coord=a_texture_coord;vec2 halfSize=a_size/2.0*u_scale;if(u_unit_px){halfSize*=u_zoom_units;}vec3 current=transformCoord(a_pos,halfSize,a_corner);current.z+=a_offsetZ;gl_Position=u_matrix*vec4(current,1.0);}`,fragmentShader:`precision highp float;varying vec2 v_texture_coord;varying vec4 v_color;uniform sampler2D u_icon;uniform vec4 uSelectedColor;
#if defined(USE_COLOR_MIX)
uniform float u_mix_amount;
#endif
void main(){vec4 textureColor=texture2D(u_icon,vec2(v_texture_coord.x,1.0-v_texture_coord.y));if(textureColor.a==0.0&&uIsPickRender==false){discard;}gl_FragColor=textureColor;
#if defined(USE_COLOR_MIX)
gl_FragColor=mix(gl_FragColor,v_color,u_mix_amount);
#endif
#if defined(PICK)
if(mapvIsPicked()){gl_FragColor=vec4(uSelectedColor.rgb,gl_FragColor.a);}
#endif
}`,defines:x},this),this.vertexArray=new Yi({gl:s,program:this.program,attributes:_})}},{key:"onDestroy",value:function(){}},{key:"onChanged",value:function(s,h){this.gl&&this.processCache(s,h)}},{key:"forceUpdate",value:function(){this.gl&&this.processCache(this.options,this.data)}},{key:"processCache",value:function(s,h){var _=this;this.cachedData=[];for(var x=s.icon,S=s.width,C=s.height,R=s.offsetZ,H=s.angle,Z=s.mixColor,P=0;P<h.length;P++){var F=this.normizedPoint(h[P].geometry.coordinates),V=this.getProperty("icon",x,h[P]),j=this.getProperty("width",S,h[P]),q=this.getProperty("height",C,h[P]),ee=this.getProperty("angle",H,h[P]),Q=this.getProperty("offsetZ",R,h[P]),ne=this.normizedColor(this.getProperty("mixColor",Z,h[P]));F&&V&&(this.cachedData.push({point:F,icon:V,width:j,height:q,offsetZ:Q,angle:ee,mixColor:ne,index:P}),this.iconHash.get(V)||this.iconHash.set(V,V))}h=Qa(this.iconHash.entries()).filter(function(le){return typeof le[1]=="string"}).map(function(le){var Ae=Xi(le,2)[0];return new ac(function(Se,Ie){_.url2canvas(Ae,function(Be){_.iconHash.set(Ae,Be),Se()})})}),ac.all(h).then(function(le){_.buildSprite(s),_.webglLayer.render()})}},{key:"buildSprite",value:function(s){var h=s.padding,_=this.canvas,x=this.ctx,S=[],C=new qc,R=!0,H=!1,Z=void 0;try{for(var P=Gh(this.iconHash),F;!(R=(F=P.next()).done);R=!0){var V=Xi(F.value,2),j=V[1];if(typeof j!="string"){var q=j.width,ee=j.height;S.push({w:q+h[0],h:ee+h[0],width:q,height:ee,key:V[0],icon:j})}}}catch(Q){H=!0,Z=Q}finally{try{!R&&P.return&&P.return()}finally{if(H)throw Z}}for(H=ro(S),R=0;R<S.length;R++)Z=S[R],C.get(Z.key)||C.set(Z.key,Z);for(R=me(H.w),H=me(H.h),_.width=R||1,_.height=H||1,x.save(),_=0;_<S.length;_++)Z=S[_],x.drawImage(Z.icon,Z.x+h[0],Z.y+h[1],Z.width,Z.height);x.restore(),this.loadTexture(),this.buildVertex(s,C,R,H)}},{key:"buildVertex",value:function(s,h,_,x){var S=s.enablePicked;s=s.enableColorMix;for(var C=[],R=[],H=[],Z=[],P=[],F=0;F<this.cachedData.length;F++){var V=this.cachedData[F],j=V.point,q=V.width,ee=V.height,Q=V.offsetZ,ne=V.angle,le=V.mixColor,Ae=V.index;if(V=h.get(V.icon)){q=q||V.icon.width,ee=ee||V.icon.height;var Se=Xi(j,3);j=Se[0];var Ie=Se[1];Se=Se[2];for(var Be=0;4>Be;Be++)C.push(j,Ie,Se),C.push(Be),C.push(q,ee),C.push(Q),C.push(ne*Math.PI/180);q=V.x/_,ee=(V.x+V.w)/_,Q=(V.y+V.h)/x,V=V.y/x,R.push(q,Q,q,V,ee,V,ee,Q),V=4*F,H.push(V,V+2,V+1,V,V+3,V+2),S&&(Ae=this.indexToRgb(Ae),Z.push(Ae[0]/255,Ae[1]/255,Ae[2]/255),Z.push(Ae[0]/255,Ae[1]/255,Ae[2]/255),Z.push(Ae[0]/255,Ae[1]/255,Ae[2]/255),Z.push(Ae[0]/255,Ae[1]/255,Ae[2]/255)),s&&(P.push.apply(P,Yn(le)),P.push.apply(P,Yn(le)),P.push.apply(P,Yn(le)),P.push.apply(P,Yn(le)))}}this.index=H,this.vertexBuffer.updateData(new Float32Array(C)),this.uvBuffer.updateData(new Float32Array(R)),this.indexBuffer.updateData(new Uint32Array(H)),S&&this.pickBuffer.updateData(new Float32Array(Z)),s&&this.colorBuffer.updateData(new Float32Array(P))}},{key:"render",value:function(s){if(this.cachedData&&this.cachedData.length&&this.iconHash&&this.texture){var h=s.gl,_=s.matrix,x=this.getOptions(),S=this.program;S.use(h),this.setGLState({blend:!0,blendFunc:Cr(h,x.blend),polygonOffset:x.polygonOffset}),s=Lr(this.getCommonUniforms(s),{u_icon:this.texture,u_matrix:_,u_unit_px:x.unit==="px",u_zoom_units:this.map.getZoomUnits(),u_scale:x.scale}),x.enableColorMix&&(s=Lr(s,{u_mix_amount:x.mixAmount})),S.setUniforms(s),0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),h.drawElements(h.TRIANGLES,this.index.length,h.UNSIGNED_INT,0))}}},{key:"url2canvas",value:function(s,h){if((typeof s>"u"?"undefined":Ta(s))==="object")h(s);else{var _=new Image;_.crossOrigin="anonymous",_.onload=function(){var x=_.width,S=_.height,C=document.createElement("canvas");C.width=x,C.height=S,C.getContext("2d").drawImage(_,0,0,x,S),h(C)},_.onerror=function(){var x=document.createElement("canvas");x.width=20,x.height=40;var S=x.getContext("2d");S.fillStyle="red",S.beginPath(),S.lineTo(0,0),S.lineTo(20,0),S.lineTo(10,40),S.closePath(),S.fill(),h(x)},_.src=s}}},{key:"loadTexture",value:function(){var s=this;this.canvas?pr(this.gl,this.canvas,function(h){s.texture=h}):this.texture=null}}]),p}(ki),uI=function(d){function p(s){hr(this,p);var h=ln(this,(p.__proto__||Dr(p)).call(this,s));return s=h.getOptions(),h.shapeLayer=new Pp({enablePicked:s.enablePicked}),h.lineLayer=new y2,h.children=[h.shapeLayer,h.lineLayer],h}return sn(p,d),Mr(p,[{key:"pick",value:function(s,h){return this.shapeLayer.pick(s,h)}},{key:"onOptionsChanged",value:function(s){this.shapeLayer.setOptions({onClick:function(h){s.onClick&&s.onClick(h)},selectedIndex:s.selectedIndex,selectedColor:s.selectedColor,height:0,polygonOffset:[2,2],depthTest:s.depthTest,depthWrite:s.depthWrite,depthFunc:s.depthFunc,autoSelect:s.autoSelect,color:s.fillColor,opacity:s.fillOpacity,topColor:s.fillColor,useLight:!1,blend:s.blend}),this.lineLayer.setOptions({depthTest:s.depthTest,depthWrite:s.depthWrite,depthFunc:s.depthFunc,dashArray:s.dashArray,color:s.lineColor,width:s.lineWidth,lineJoin:s.lineJoin,blend:s.blend})}},{key:"onDataChanged",value:function(s){this.shapeLayer.setData(s),this.lineLayer.setData(s,{closePath:!0})}},{key:"getDefaultOptions",value:function(){return{enablePicked:!1,selectedIndex:-1,selectedColor:"#ff0000",autoSelect:!0,dashArray:[0,0],lineColor:"rgba(250, 250, 25, 1)",depthTest:!0,depthWrite:!0,depthFunc:"lequal",lineWidth:2,lineJoin:"miter",fillColor:"rgba(25, 25, 250, 1)",fillOpacity:1,blend:"default"}}}]),p}(xl),No=No||{},Xg=0,Zl=null,U2=No.Scene=function(d,p){this.name=p.name!==void 0?p.name:null,this.nodes=Array(p.nodes.length);for(var s=0,h=p.nodes.length;s<h;s++)this.nodes[s]=d.nodes[p.nodes[s]];this.extensions=p.extensions!==void 0?p.extensions:null,this.extras=p.extras!==void 0?p.extras:null,this.boundingBox=null},ql=No.BoundingBox=function(d,p,s){d=d||dn.fromValues(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),p=p||dn.fromValues(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),s===void 0||s===!0?(this.min=dn.clone(d),this.max=dn.clone(p)):(this.min=d,this.max=p),this.transform=Er.create()};ql.prototype.updateBoundingBox=function(d){dn.min(this.min,this.min,d.min),dn.max(this.max,this.max,d.max)},ql.prototype.calculateTransform=function(){this.transform[0]=this.max[0]-this.min[0],this.transform[5]=this.max[1]-this.min[1],this.transform[10]=this.max[2]-this.min[2],this.transform[12]=this.min[0],this.transform[13]=this.min[1],this.transform[14]=this.min[2]},ql.getAABBFromOBB=function(){var d=dn.create(),p=dn.create(),s=dn.create(),h=dn.create(),_=dn.create();return function(x,S){dn.set(d,S[0],S[1],S[2]),dn.set(p,S[4],S[5],S[6]),dn.set(s,S[8],S[9],S[10]),S=dn.fromValues(S[12],S[13],S[14]);var C=dn.clone(S);return dn.scale(h,d,x.min[0]),dn.scale(_,d,x.max[0]),dn.min(d,h,_),dn.add(S,S,d),dn.max(d,h,_),dn.add(C,C,d),dn.scale(h,p,x.min[1]),dn.scale(_,p,x.max[1]),dn.min(p,h,_),dn.add(S,S,p),dn.max(p,h,_),dn.add(C,C,p),dn.scale(h,s,x.min[2]),dn.scale(_,s,x.max[2]),dn.min(s,h,_),dn.add(S,S,s),dn.max(s,h,_),dn.add(C,C,s),x=new ql(S,C,!1),x.calculateTransform(),x}}();var I_=No.Accessor=function(d,p){this.bufferView=p,this.componentType=d.componentType,this.byteOffset=d.byteOffset!==void 0?d.byteOffset:0,this.byteStride=p.byteStride,this.normalized=d.normalized!==void 0?d.normalized:!1,this.count=d.count,this.type=d.type,this.size=j2[this.type],this.min=d.min,this.max=d.max,this.extensions=d.extensions!==void 0?d.extensions:null,this.extras=d.extras!==void 0?d.extras:null};I_.prototype.prepareVertexAttrib=function(d,p){p.vertexAttribPointer(d,this.size,this.componentType,this.normalized,this.byteStride,this.byteOffset),p.enableVertexAttribArray(d)};var k2=No.BufferView=function(d,p){p&&(this.byteLength=d.byteLength,this.byteOffset=d.byteOffset!==void 0?d.byteOffset:0,this.byteStride=d.byteStride!==void 0?d.byteStride:0,this.target=d.target!==void 0?d.target:null,this.data=p.slice(this.byteOffset,this.byteOffset+this.byteLength),this.extensions=d.extensions!==void 0?d.extensions:null,this.extras=d.extras!==void 0?d.extras:null,this.buffer=null)};k2.prototype.createBuffer=function(d){this.buffer=d.createBuffer()},k2.prototype.bindData=function(d){return this.target?(d.bindBuffer(this.target,this.buffer),d.bufferData(this.target,this.data,d.STATIC_DRAW),d.bindBuffer(this.target,null),!0):!1};var co=No.Camera=function(d){this.name=d.name!==void 0?d.name:null,this.type=d.type,this.othographic=d.othographic===void 0?null:d.othographic,this.perspective=d.perspective===void 0?null:{yfov:d.perspective.yfov,znear:d.perspective.znear,zfar:d.perspective.zfar!==void 0?d.perspective.zfar:null,aspectRatio:d.perspective.aspectRatio!==void 0?d.perspective.aspectRatio:null},this.extensions=d.extensions!==void 0?d.extensions:null,this.extras=d.extras!==void 0?d.extras:null},Bp=No.Node=function(d,p){if(this.name=d.name!==void 0?d.name:null,this.nodeID=p,this.camera=d.camera!==void 0?d.camera:null,this.matrix=Er.create(),d.hasOwnProperty("matrix")){for(p=0;16>p;++p)this.matrix[p]=d.matrix[p];this.translation=dn.create(),Er.getTranslation(this.translation,this.matrix),this.rotation=Lg.create(),Er.getRotation(this.rotation,this.matrix),this.scale=dn.create(),Er.getScaling(this.scale,this.matrix)}else this.getTransformMatrixFromTRS(d.translation,d.rotation,d.scale);this.children=d.children||[],this.mesh=d.mesh!==void 0?Zl.glTF.meshes[d.mesh]:null,this.skin=d.skin!==void 0?d.skin:null,d.extensions!==void 0&&d.extensions.gl_avatar!==void 0&&Zl.enableGLAvatar===!0&&(this.skin=new dI(Zl.glTF,Zl.skeletonGltf.skins[Zl.skeletonGltf.json.extensions.gl_avatar.skins[d.extensions.gl_avatar.skin.name]],d.extensions.gl_avatar.skin.inverseBindMatrices)),this.weights=d.weights!==void 0?d.weights:null,this.extensions=d.extensions!==void 0?d.extensions:null,this.extras=d.extras!==void 0?d.extras:null,this.aabb=null,this.bvh=new ql};Bp.prototype.traverse=function(d,p){p(this,d),d=0;for(var s=this.children.length;d<s;d++)this.children[d].traverse(this,p)},Bp.prototype.traversePostOrder=function(d,p){for(var s=0,h=this.children.length;s<h;s++)this.children[s].traversePostOrder(this,p);p(this,d)},Bp.prototype.traverseTwoExecFun=function(d,p,s){p(this,d);for(var h=0,_=this.children.length;h<_;h++)this.children[h].traverseTwoExecFun(this,p,s);s(this,d)};var R_=Er.create();Bp.prototype.getTransformMatrixFromTRS=function(d,p,s){this.translation=d!==void 0?dn.fromValues(d[0],d[1],d[2]):dn.fromValues(0,0,0),this.rotation=p!==void 0?Fo.fromValues(p[0],p[1],p[2],p[3]):Fo.fromValues(0,0,0,1),this.scale=s!==void 0?dn.fromValues(s[0],s[1],s[2]):dn.fromValues(1,1,1),this.updateMatrixFromTRS()},Bp.prototype.updateMatrixFromTRS=function(){Er.fromRotationTranslation(R_,this.rotation,this.translation),Er.scale(this.matrix,R_,this.scale)};var Pa=No.Mesh=function(d,p){this.meshID=p,this.name=d.name!==void 0?d.name:null,this.primitives=[],this.boundingBox=null,p=0;for(var s=d.primitives.length;p<s;++p){var h=d.primitives[p];h=new cI(Zl.glTF,h),this.primitives.push(h),h.boundingBox&&(this.boundingBox||(this.boundingBox=new ql),this.boundingBox.updateBoundingBox(h.boundingBox))}this.boundingBox&&this.boundingBox.calculateTransform(),this.weights=d.weights!==void 0?d.weights:null,this.extensions=d.extensions!==void 0?d.extensions:null,this.extras=d.extras!==void 0?d.extras:null},cI=No.Primitive=function(d,p){this.attributes=p.attributes,this.indices=p.indices!==void 0?p.indices:null;var s;if(p.extensions!==void 0&&p.extensions.gl_avatar!==void 0&&Zl.enableGLAvatar===!0&&p.extensions.gl_avatar.attributes)for(s in p.extensions.gl_avatar.attributes)this.attributes[s]=p.extensions.gl_avatar.attributes[s];this.indices!==null?(this.indicesComponentType=d.json.accessors[this.indices].componentType,this.indicesLength=d.json.accessors[this.indices].count,this.indicesOffset=d.json.accessors[this.indices].byteOffset||0):(this.drawArraysCount=d.json.accessors[this.attributes.POSITION].count,this.drawArraysOffset=d.json.accessors[this.attributes.POSITION].byteOffset||0);for(s in this.attributes)this.attributes[s]=d.accessors[this.attributes[s]];this.material=p.material!==void 0?d.materials[p.material]:null,this.mode=p.mode!==void 0?p.mode:4,this.targets=p.targets,this.extensions=p.extensions!==void 0?p.extensions:null,this.extras=p.extras!==void 0?p.extras:null,this.boundingBox=this.shader=this.indexBuffer=this.vertexBuffer=this.vertexArray=null,this.attributes.POSITION!==void 0&&(d=this.attributes.POSITION,d.max&&d.type==="VEC3"&&(this.boundingBox=new ql(dn.fromValues(d.min[0],d.min[1],d.min[2]),dn.fromValues(d.max[0],d.max[1],d.max[2]),!1),this.boundingBox.calculateTransform()))},Fi=No.Texture=function(d){this.name=d.name!==void 0?d.name:null,this.sampler=d.sampler!==void 0?Zl.glTF.samplers[d.sampler]:null,this.source=d.source!==void 0?Zl.glTF.images[d.source]:null,this.extensions=d.extensions!==void 0?d.extensions:null,this.extras=d.extras!==void 0?d.extras:null,this.texture=null};Fi.prototype.createTexture=function(d){this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,this.source),d.generateMipmap(d.TEXTURE_2D),d.bindTexture(d.TEXTURE_2D,null)};var L_=No.Sampler=function(d){this.name=d.name!==void 0?d.name:null,this.magFilter=d.magFilter!==void 0?d.magFilter:null,this.minFilter=d.minFilter!==void 0?d.minFilter:null,this.wrapS=d.wrapS!==void 0?d.wrapS:10497,this.wrapT=d.wrapT!==void 0?d.wrapT:10497,this.extensions=d.extensions!==void 0?d.extensions:null,this.extras=d.extras!==void 0?d.extras:null,this.sampler=null};L_.prototype.createSampler=function(d){this.sampler=d.createSampler(),this.minFilter?d.samplerParameteri(this.sampler,d.TEXTURE_MIN_FILTER,this.minFilter):d.samplerParameteri(this.sampler,d.TEXTURE_MIN_FILTER,d.NEAREST_MIPMAP_LINEAR),this.magFilter?d.samplerParameteri(this.sampler,d.TEXTURE_MAG_FILTER,this.magFilter):d.samplerParameteri(this.sampler,d.TEXTURE_MAG_FILTER,d.LINEAR),d.samplerParameteri(this.sampler,d.TEXTURE_WRAP_S,this.wrapS),d.samplerParameteri(this.sampler,d.TEXTURE_WRAP_T,this.wrapT)};var sa=No.TextureInfo=function(d){this.index=d.index,this.texCoord=d.texCoord!==void 0?d.texCoord:0,this.extensions=d.extensions!==void 0?d.extensions:null,this.extras=d.extras!==void 0?d.extras:null},P_=No.PbrMetallicRoughness=function(d){this.baseColorFactor=d.baseColorFactor!==void 0?d.baseColorFactor:[1,1,1,1],this.baseColorTexture=d.baseColorTexture!==void 0?new sa(d.baseColorTexture):null,this.metallicFactor=d.metallicFactor!==void 0?d.metallicFactor:1,this.roughnessFactor=d.roughnessFactor!==void 0?d.roughnessFactor:1,this.metallicRoughnessTexture=d.metallicRoughnessTexture!==void 0?new sa(d.metallicRoughnessTexture):null,this.extensions=d.extensions!==void 0?d.extensions:null,this.extras=d.extras!==void 0?d.extras:null},hI=No.NormalTextureInfo=function(d){this.index=d.index,this.texCoord=d.texCoord!==void 0?d.texCoord:0,this.scale=d.scale!==void 0?d.scale:1,this.extensions=d.extensions!==void 0?d.extensions:null,this.extras=d.extras!==void 0?d.extras:null},O_=No.OcclusionTextureInfo=function(d){this.index=d.index,this.texCoord=d.texCoord!==void 0?d.texCoord:0,this.strength=d.strength!==void 0?d.strength:1,this.extensions=d.extensions!==void 0?d.extensions:null,this.extras=d.extras!==void 0?d.extras:null},fI=No.Material=function(d){this.name=d.name!==void 0?d.name:null,this.pbrMetallicRoughness=d.pbrMetallicRoughness!==void 0?new P_(d.pbrMetallicRoughness):new P_({baseColorFactor:[1,1,1,1],metallicFactor:1,metallicRoughnessTexture:1}),this.normalTexture=d.normalTexture!==void 0?new hI(d.normalTexture):null,this.occlusionTexture=d.occlusionTexture!==void 0?new O_(d.occlusionTexture):null,this.emissiveTexture=d.emissiveTexture!==void 0?new sa(d.emissiveTexture):null,this.emissiveFactor=d.emissiveFactor!==void 0?d.emissiveFactor:[0,0,0],this.alphaMode=d.alphaMode!==void 0?d.alphaMode:"OPAQUE",this.alphaCutoff=d.alphaCutoff!==void 0?d.alphaCutoff:.5,this.doubleSided=d.doubleSided||!1,this.extensions=d.extensions!==void 0?d.extensions:null,this.extras=d.extras!==void 0?d.extras:null},Oa=No.Skin=function(d,p,s){this.name=p.name!==void 0?p.name:null,this.skinID=s,this.joints=Array(p.joints.length);var h;for(s=0,h=this.joints.length;s<h;s++)this.joints[s]=d.nodes[p.joints[s]];if(this.skeleton=p.skeleton!==void 0?d.nodes[p.skeleton]:null,this.inverseBindMatrices=p.inverseBindMatrices!==void 0?d.accessors[p.inverseBindMatrices]:null,this.extensions=p.extensions!==void 0?p.extensions:null,this.extras=p.extras!==void 0?p.extras:null,this.uniformBlockID=Xg++,this.inverseBindMatrices)for(this.inverseBindMatricesData=nn(this.inverseBindMatrices),this.inverseBindMatrix=[],this.jointMatrixUniformBuffer=null,this.jointMatrixUnidormBufferData=new Float32Array(1040),s=0,h=this.inverseBindMatricesData.length;s<h;s+=16)this.inverseBindMatrix.push(Er.fromValues(this.inverseBindMatricesData[s],this.inverseBindMatricesData[s+1],this.inverseBindMatricesData[s+2],this.inverseBindMatricesData[s+3],this.inverseBindMatricesData[s+4],this.inverseBindMatricesData[s+5],this.inverseBindMatricesData[s+6],this.inverseBindMatricesData[s+7],this.inverseBindMatricesData[s+8],this.inverseBindMatricesData[s+9],this.inverseBindMatricesData[s+10],this.inverseBindMatricesData[s+11],this.inverseBindMatricesData[s+12],this.inverseBindMatricesData[s+13],this.inverseBindMatricesData[s+14],this.inverseBindMatricesData[s+15]))},dI=No.SkinLink=function(d,p,s){if(this.isLink=!0,d.skins||(d.skins=[]),d.skins.push(this),this.name=p.name,this.skinID=d.skins.length-1,this.joints=p.joints,this.skeleton=p.skeleton,this.inverseBindMatrices=s!==void 0?d.accessors[s]:null,this.uniformBlockID=Xg++,this.inverseBindMatrices)for(this.inverseBindMatricesData=nn(this.inverseBindMatrices),this.inverseBindMatrix=[],this.jointMatrixUniformBuffer=null,this.jointMatrixUnidormBufferData=new Float32Array(1040),d=0,p=this.inverseBindMatricesData.length;d<p;d+=16)this.inverseBindMatrix.push(Er.fromValues(this.inverseBindMatricesData[d],this.inverseBindMatricesData[d+1],this.inverseBindMatricesData[d+2],this.inverseBindMatricesData[d+3],this.inverseBindMatricesData[d+4],this.inverseBindMatricesData[d+5],this.inverseBindMatricesData[d+6],this.inverseBindMatricesData[d+7],this.inverseBindMatricesData[d+8],this.inverseBindMatricesData[d+9],this.inverseBindMatricesData[d+10],this.inverseBindMatricesData[d+11],this.inverseBindMatricesData[d+12],this.inverseBindMatricesData[d+13],this.inverseBindMatricesData[d+14],this.inverseBindMatricesData[d+15]))},pI=No.Target=function(d){this.nodeID=d.node!==void 0?d.node:null,this.path=d.path,this.extensions=d.extensions!==void 0?d.extensions:null,this.extras=d.extras!==void 0?d.extras:null},Hi=No.Channel=function(d,p){this.sampler=p.samplers[d.sampler],this.target=new pI(d.target),this.extensions=d.extensions!==void 0?d.extensions:null,this.extras=d.extras!==void 0?d.extras:null},H2=No.AnimationSampler=function(d,p){this.input=d.accessors[p.input],this.output=d.accessors[p.output],this.inputTypedArray=nn(this.input),this.outputTypedArray=nn(this.output),this.interpolation=p.interpolation!==void 0?p.interpolation:"LINEAR",this.extensions=p.extensions!==void 0?p.extensions:null,this.extras=p.extras!==void 0?p.extras:null,this.curIdx=0,this.curValue=Fo.create(),this.endT=this.inputTypedArray[this.inputTypedArray.length-1],this.inputMax=this.endT-this.inputTypedArray[0]},D_=Fo.create(),b_=Fo.create();H2.prototype.getValue=function(d){d>this.endT&&(d-=this.inputMax*Math.ceil((d-this.endT)/this.inputMax),this.curIdx=0);for(var p=this.inputTypedArray.length;this.curIdx<=p-2&&d>=this.inputTypedArray[this.curIdx+1];)this.curIdx++;this.curIdx>=p-1&&(d-=this.inputMax,this.curIdx=0),p=j2[this.output.type];var s=p===4?Lg.slerp:Fo.lerp,h=this.curIdx,_=h*p,x=_+p;for(d=Math.max(0,d-this.inputTypedArray[h])/(this.inputTypedArray[h+1]-this.inputTypedArray[h]),h=0;h<p;h++)D_[h]=this.outputTypedArray[_+h],b_[h]=this.outputTypedArray[x+h];switch(this.interpolation){case"LINEAR":s(this.curValue,D_,b_,d)}};var yu=No.Animation=function(d,p){this.name=p.name!==void 0?p.name:null;var s;this.samplers=[];var h=0;for(s=p.samplers.length;h<s;h++)this.samplers[h]=new H2(d,p.samplers[h]);for(this.channels=[],h=0,s=p.channels.length;h<s;h++)this.channels[h]=new Hi(p.channels[h],this);this.extensions=p.extensions!==void 0?p.extensions:null,this.extras=p.extras!==void 0?p.extras:null},mI=No.glTFModel=function(d){this.json=d,this.defaultScene=d.scene!==void 0?d.scene:0,this.version=Number(d.asset.version),d.accessors&&(this.accessors=Array(d.accessors.length)),d.bufferViews&&(this.bufferViews=Array(d.bufferViews.length)),d.scenes&&(this.scenes=Array(d.scenes.length)),d.nodes&&(this.nodes=Array(d.nodes.length)),d.meshes&&(this.meshes=Array(d.meshes.length)),d.materials&&(this.materials=Array(d.materials.length)),d.textures&&(this.textures=Array(d.textures.length)),d.samplers&&(this.samplers=Array(d.samplers.length)),d.images&&(this.images=Array(d.images.length)),d.skins&&(this.skins=Array(d.skins.length)),d.animations&&(this.animations=Array(d.animations.length)),d.cameras&&(this.cameras=Array(d.cameras.length)),this.extensions=d.extensions!==void 0?d.extensions:null,this.extras=d.extras!==void 0?d.extras:null},zp=No.glTFLoader=function(d){this._init(),this.glTF=null,this.enableGLAvatar=!1,this.linkSkeletonGltf=null};zp.prototype._init=function(){this._loadDone=!1,this._bufferLoaded=this._bufferRequested=0,this._buffers=[],this._bufferTasks={},this._finishedPendingTasks=this._pendingTasks=this._imageLoaded=this._imageRequested=this._shaderLoaded=this._shaderRequested=0,this.onload=null,Zl=this},zp.prototype._checkComplete=function(){this._bufferRequested==this._bufferLoaded&&this._imageRequested==this._imageLoaded&&(this._loadDone=!0),this._loadDone&&this._pendingTasks==this._finishedPendingTasks&&(this._postprocess(),this.onload(this.glTF))},zp.prototype.loadGLTF_GL_Avatar_Skin=function(d,p,s){this.enableGLAvatar=!0,this.skeletonGltf=p,this.loadGLTF(d,s)},zp.prototype.loadGLTF=function(d,p){this._init(),this.onload=p||function(h){},this.baseUri=Gn(d);var s=this;Wi(d,function(h){h=JSON.parse(h),s.glTF=new mI(h);var _=function(R,H){if(s._buffers[H]=R,s._bufferLoaded++,s._bufferTasks[H]){var Z,P=0;for(Z=s._bufferTasks[H].length;P<Z;++P)s._bufferTasks[H][P](R)}s._checkComplete()};if(h.buffers)for(var x in h.buffers){s._bufferRequested++;var S=h.buffers[x].uri;S.indexOf("base64")===-1&&(S=s.baseUri+S),Co(S,_,x)}x=function(R,H){s._imageLoaded++,s.glTF.images[H]=R,s._checkComplete()};var C;if(h.images)for(C in h.images)s._imageRequested++,Ja(s.baseUri+h.images[C].uri,C,x);s._checkComplete()})},zp.prototype._postprocess=function(){function d(Z,P){var F=R[Z.nodeID];P!==null?Er.mul(F,R[P.nodeID],Z.matrix):Er.copy(F,Z.matrix)}function p(Z,P){var F=R[Z.nodeID];P=P!==null?P.bvh:H.boundingBox,Z.mesh&&(_=Z.mesh,_.boundingBox&&(Z.aabb=ql.getAABBFromOBB(_.boundingBox,F),Z.children.length===0&&(dn.copy(Z.bvh.min,Z.aabb.min),dn.copy(Z.bvh.max,Z.aabb.max)))),dn.min(P.min,P.min,Z.bvh.min),dn.max(P.max,P.max,Z.bvh.max)}Zl=this;var s,h,_;if(this.glTF.cameras){var x=0;for(s=this.glTF.cameras.length;x<s;x++)this.glTF.cameras[x]=new co(this.glTF.json.cameras[x])}if(this.glTF.bufferViews)for(x=0,s=this.glTF.bufferViews.length;x<s;x++)this.glTF.bufferViews[x]=new k2(this.glTF.json.bufferViews[x],this._buffers[this.glTF.json.bufferViews[x].buffer]);if(this.glTF.accessors)for(x=0,s=this.glTF.accessors.length;x<s;x++)this.glTF.accessors[x]=new I_(this.glTF.json.accessors[x],this.glTF.bufferViews[this.glTF.json.accessors[x].bufferView]);if(this.glTF.materials)for(x=0,s=this.glTF.materials.length;x<s;x++)this.glTF.materials[x]=new fI(this.glTF.json.materials[x]);if(this.glTF.samplers)for(x=0,s=this.glTF.samplers.length;x<s;x++)this.glTF.samplers[x]=new L_(this.glTF.json.samplers[x]);if(this.glTF.textures)for(x=0,s=this.glTF.textures.length;x<s;x++)this.glTF.textures[x]=new Fi(this.glTF.json.textures[x]);for(x=0,s=this.glTF.meshes.length;x<s;x++)this.glTF.meshes[x]=new Pa(this.glTF.json.meshes[x],x);for(x=0,s=this.glTF.nodes.length;x<s;x++)this.glTF.nodes[x]=new Bp(this.glTF.json.nodes[x],x);for(x=0,s=this.glTF.nodes.length;x<s;x++){var S=this.glTF.nodes[x],C=0;for(h=S.children.length;C<h;C++)S.children[C]=this.glTF.nodes[S.children[C]]}var R=Array(this.glTF.nodes.length);for(x=0,s=R.length;x<s;x++)R[x]=Er.create();for(x=0,s=this.glTF.scenes.length;x<s;x++){var H=this.glTF.scenes[x]=new U2(this.glTF,this.glTF.json.scenes[x]);for(H.boundingBox=new ql,C=0,h=H.nodes.length;C<h;C++)S=H.nodes[C],S.traverseTwoExecFun(null,d,p);H.boundingBox.calculateTransform()}for(C=0,h=this.glTF.nodes.length;C<h;C++)S=this.glTF.nodes[C],S.bvh!==null&&S.bvh.calculateTransform();if(this.glTF.animations)for(x=0,s=this.glTF.animations.length;x<s;x++)this.glTF.animations[x]=new yu(this.glTF,this.glTF.json.animations[x]);if(this.glTF.json.skins)for(x=0,s=this.glTF.skins.length;x<s;x++)for(this.glTF.skins[x]=new Oa(this.glTF,this.glTF.json.skins[x],x),S=this.glTF.skins[x].joints,C=0,h=S.length;C<h;C++)S[C].jointID=C;for(x=0,s=this.glTF.nodes.length;x<s;x++)S=this.glTF.nodes[x],S.skin!==null&&typeof S.skin=="number"&&(S.skin=this.glTF.skins[S.skin])};var j2={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Rn=function(d){function p(s,h){return hr(this,p),ln(this,(p.__proto__||Dr(p)).call(this,s,h))}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{scale:1}}},{key:"initialize",value:function(s){var h=this;this.gl=s;var _=this.getOptions();this.gltfObj=ma({gl:s,options:_}),new zp().loadGLTF(_.url,function(x){h.gltfObj.setupScene(x),h.webglLayer.render()})}},{key:"onChanged",value:function(s,h){}},{key:"render",value:function(s){var h=s.gl;s=s.matrix;var _=this.getData(),x=this.getOptions(),S=x.scale,C=[S,S,S];for(x.unit==="px"&&this.map&&(C=this.map.getZoomUnits(),C=[S*C,S*C,S*C]),S=0;S<_.length;S++){var R=_[S].geometry.coordinates;x=Er.create();var H=Er.create();R=this.normizedPoint(R),Er.identity(x),Er.translate(x,x,[R[0],R[1],R[2]]),Er.rotateX(x,x,Math.PI/2),Er.rotateY(x,x,(_[S].angle||0)*Math.PI/180),Er.scale(x,x,C),Er.mul(H,s,x),this.gltfObj.render({gl:h,matrix:H})}}}]),p}(ki),Up=Up||{};(function(){function d(s,h,_){return _=s.createShader(_),s.shaderSource(_,h),s.compileShader(_),_}Up.getShaderSource=function(s){return document.getElementById(s).textContent.replace(/^\s+|\s+$/g,"")},Up.createProgram=function(s,h,_){var x=s.createProgram();return h=d(s,h,s.VERTEX_SHADER),_=d(s,_,s.FRAGMENT_SHADER),s.attachShader(x,h),s.deleteShader(h),s.attachShader(x,_),s.deleteShader(_),s.linkProgram(x),s.getProgramInfoLog(x),s.getShaderInfoLog(h),s.getShaderInfoLog(_),x};var p=Up.loadImage=function(s,h){var _=new Image;return _.crossOrigin="Anonymous",_.src=s,_.onload=h,_};Up.loadImages=function(s,h){function _(){0>=--S&&h(x)}for(var x=[],S=s.length,C=0;C<S;++C)x.push(p(s[C],_))}})();var gI=function(d){function p(s){hr(this,p);var h=ln(this,(p.__proto__||Dr(p)).call(this,s));return s=h.getOptions(),h.gltfLayer=new Rn({url:s.url,scale:s.scale}),h.children=[h.gltfLayer],h.autoUpdate=!0,h.index=[],h.newData=[],h.isStarted=s.autoPlay!==!1,h}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{url:"https://mapv-website.bj.bcebos.com/gl/examples/model/car.gltf",scale:1,step:1,defaultAngle:90}}},{key:"onOptionsChanged",value:function(s){this.gltfLayer.setOptions({})}},{key:"onDataChanged",value:function(s){var h=this;this.index=[],this.newData=[];for(var _=0;_<s.length;_++){this.index.push(0);var x=s[_].geometry.coordinates;s[_].geometry.type==="LineString"?this.newData.push(this._addPath(x)):x.forEach(function(S){h.newData.push(h._addPath(S))})}this.updatePoints()}},{key:"lnglatToMercator",value:function(s,h){return h=h*Math.PI/180,h=31890685e-1*Math.log((1+Math.sin(h))/(1-Math.sin(h))),[parseFloat((s*Math.PI/180*6378137).toFixed(2)),parseFloat(h.toFixed(2))]}},{key:"getDeg",value:function(s,h){-180<s[0]&&180>s[0]&&(s=this.lnglatToMercator(s[0],s[1]),h=this.lnglatToMercator(h[0],h[1]));var _=180*Math.atan((h[1]-s[1])/(h[0]-s[0]))/Math.PI;return h[0]>s[0]&&(_-=180),_}},{key:"getPoint",value:function(s,h,_){return[s[0]+(h[0]-s[0])*_,s[1]+(h[1]-s[1])*_,s[2]&&h[2]?s[2]+(h[2]-s[2])*_:0]}},{key:"updatePoints",value:function(){for(var s=this.getOptions(),h=this.newData,_=[],x=0;x<h.length;x++){for(var S=h[x],C=Math.floor(this.index[x]),R=C+1;S[R]&&S[R][0]===S[C][0]&&S[R][1]===S[C][1];)R++;R>=S.length-1&&(R=--C),R=this.getDeg(S[C],S[R]),_.push({geometry:{type:"Point",coordinates:this.getPoint(S[C],S[C+1],this.index[x]%1)},angle:R-s.defaultAngle})}this.pointData=_,this.gltfLayer.setData(_,{autoRender:!1})}},{key:"getCurrentPoint",value:function(){return this.pointData}},{key:"getDistance",value:function(s,h){var _=s[1]*Math.PI/180,x=h[1]*Math.PI/180;return s=2*Math.asin(Math.sqrt(Math.pow(Math.sin((_-x)/2),2)+Math.cos(_)*Math.cos(x)*Math.pow(Math.sin((s[0]*Math.PI/180-h[0]*Math.PI/180)/2),2))),s=Math.round(6378137e4*s)/1e4}},{key:"_addPath",value:function(s){for(var h=s.length,_=0,x=[],S=[],C=1;C<h;C++){var R=this.getDistance(s[C-1],s[C]);x.push(R),_+=R}for(R=[0],C=1;C<h;C++){var H=(x[C-1]/_).toFixed(2);R[C]=R[C-1]+parseFloat(H,10),S=S.concat(this._getPath(s[C-1],s[C],1e3*H))}return this._pathPercents=R,S}},{key:"_getPath",value:function(s,h,_){if(_===0)return[s];for(var x=[],S=0;S<=_;S++)x.push([(h[0]-s[0])/_*S+s[0],(h[1]-s[1])/_*S+s[1],h[2]&&s[2]?(h[2]-s[2])/_*S+s[2]:0]);return x}},{key:"start",value:function(){this.isStarted=!0}},{key:"stop",value:function(){this.isStarted=!1}},{key:"render",value:function(s){if(Yl(p.prototype.__proto__||Dr(p.prototype),"render",this).call(this,s),s=this.getOptions(),this.isStarted)for(var h=this.newData,_=0;_<this.index.length;_++)this.index[_]+=s.step,this.index[_]>h[_].length-2&&(this.index[_]=0);this.updatePoints()}}]),p}(xl),lf=function(d){function p(s,h){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s,h)),s.name="BoardTextLayer",h=s.canvas=document.createElement("canvas"),h=s.ctx=h.getContext("2d"),h.textAlign="start",h.textBaseline="top",s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{depthWrite:!1,depthTest:!0,color:"#fff",fontFamily:"Microsoft Yahei",fontSize:14,collides:!0,unit:"px",angle:0,translateX:0,offset:[0,0],padding:[2,2],margin:[0,0],polygonOffset:[0,0],shadow:{},maxHeightLine:20,lineBreak:`
`}}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions();this.texture=null,this.lastUpdateTime=0,this.program=new Jn(this.gl,{vertexShader:"precision highp float;uniform mat4 matrix;uniform bool uUnitPx;uniform float zoomUnits;uniform float zIndex;uniform vec2 offset;attribute vec3 position;attribute float corner;attribute float scale;attribute float rotation;attribute vec2 size;attribute vec2 aTextCoord;varying vec2 vTextCoord;/***点A(x,y)，绕原点顺时针旋转角度a新坐标的计算公式*x1=x*cos(a)+y*sin(a)*y1=y*cos(a)-x*sin(a)*/mat3 rotateZ(float angle){float cos0=cos(angle);float sin0=sin(angle);return mat3(cos0,sin0,0.,-sin0,cos0,0.,0.,0.,1.);}vec3 transformCoord(vec3 coord,vec2 size,float corner){float x=coord.x;float y=coord.y;float z=coord.z;mat3 mat=rotateZ(rotation);vec3 rotated=vec3(size[0],0.0,size[1]);if(corner==1.0){rotated=mat*vec3(-size[0],0.0,size[1]);}else if(corner==2.0){rotated=mat*vec3(size[0],0.0,size[1]);}else if(corner==3.0){rotated=mat*vec3(size[0],0.0,-size[1]);}else{rotated=mat*vec3(-size[0],0.0,-size[1]);}x+=rotated.x;y+=rotated.y;z+=rotated.z;return vec3(x,y,z);}void main(){vTextCoord=aTextCoord;vec2 pixelOffset=offset;vec2 halfSize=size/2.0*scale;if(uUnitPx){halfSize*=zoomUnits;pixelOffset*=zoomUnits;}vec3 current=transformCoord(position,halfSize,corner);current.z+=zIndex;gl_Position=matrix*vec4(current.x+pixelOffset[0],current.y-pixelOffset[1],current.z,1.0);}",fragmentShader:`precision highp float;uniform sampler2D textureImage;uniform vec4 uSelectedColor;varying vec2 vTextCoord;void main(){vec4 textureColor=texture2D(textureImage,vec2(vTextCoord.x,1.0-vTextCoord.y));if(textureColor.a<=0.1&&uIsPickRender==false){discard;}gl_FragColor=textureColor;
#if defined(PICK)
if(mapvIsPicked()){gl_FragColor=vec4(uSelectedColor.rgb,gl_FragColor.a);}
#endif
}`,defines:h.enablePicked?["PICK"]:[]},this),this.vertexBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.uvBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Br({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),h=[{name:"position",buffer:this.vertexBuffer,size:3,stride:32,type:"FLOAT",offset:0},{name:"corner",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:12},{name:"size",buffer:this.vertexBuffer,size:2,stride:32,type:"FLOAT",offset:16},{name:"scale",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:24},{name:"rotation",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:28},{name:"aTextCoord",buffer:this.uvBuffer,size:2,stride:8,type:"FLOAT",offset:0}],h=h.concat(this.getCommonAttributes()),this.vertexArray=new Yi({gl:s,program:this.program,attributes:h})}},{key:"onDestroy",value:function(){}},{key:"onChanged",value:function(s,h){this.gl&&this.processCache(s,h)}},{key:"processCache",value:function(s,h){this.cachedData=[];for(var _=0;_<h.length;_++){var x=this.normizedPoint(h[_].geometry.coordinates),S=h[_].text;"properties"in h[_]&&"text"in h[_].properties&&(S=h[_].properties.text);var C=this.getProperty("angle",s.angle,h[_]),R=this.getProperty("color",s.color,h[_]),H=this.getProperty("maxHeightLine",s.maxHeightLine,h[_]);x&&S!==void 0&&this.cachedData.push({point:x,text:S,angle:C,color:R,maxHeightLine:H,index:_})}}},{key:"render",value:function(s){if(this.cachedData&&this.cachedData.length&&this.map){var h=s.gl,_=s.matrix,x=this.getOptions(),S=this.program;S.use(h),this.throttleUpdate(s),this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:Cr(h,x.blend),polygonOffset:x.polygonOffset,depthTest:x.depthTest,depthMask:x.depthWrite});var C=this.map.getZoomUnits();S.setUniforms(Lr(this.getCommonUniforms(s),{matrix:_,textureImage:this.texture,offset:x.offset,zoomUnits:C,zIndex:x.zIndex,uUnitPx:x.unit==="px"})),0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),h.drawElements(h.TRIANGLES,this.index.length,h.UNSIGNED_INT,0))}}},{key:"throttleUpdate",value:function(s){this.updateText(s)}},{key:"updateText",value:function(s){var h=s.gl,_=s.matrix,x=this.getOptions();s=x.fontSize;var S=x.fontFamily,C=x.translateX,R=x.padding,H=x.margin,Z=x.collides,P=x.enablePicked,F=x.shadow;x=x.lineBreak;var V=h.canvas.width/window.devicePixelRatio,j=h.canvas.height/window.devicePixelRatio,q=this.canvas,ee=this.ctx;ee.save(),ee.scale(window.devicePixelRatio,window.devicePixelRatio),ee.textBaseline="top",ee.font="normal bold 20px "+S;var Q=new id;h=[];for(var ne=0;ne<this.cachedData.length;ne++){var le=this.cachedData[ne],Ae=le.point,Se=le.text,Ie=le.angle,Be=le.index,nt=le.color;le=le.maxHeightLine;var rt=Xi(Ae,3),St=Fo.clone([rt[0],rt[1],rt[2],1]);Fo.transformMat4(St,St,_),Fo.scale(St,St,1/St[3]),rt=(St[0]+1)/2*V,St=(-St[1]+1)/2*j;var Pt=ee.measureText(Se),$t=Se.split(x),Xt=$t.map(function(bt){return ee.measureText(bt).width});Xt=Math.max.apply(Math,Yn(Xt));for(var wr=20,Qr=0;Qr<$t.length-1;Qr++)wr+=le;if($t=wr,Pt=Math.min(Pt.width,Xt)+1,Pt+=2*R[0]+C,$t+=2*R[1],wr=Pt+H[0],Xt=$t+H[1],rt-=wr/2,St-=Xt/2,wr=rt+wr,Xt=St+Xt,!(0>wr||0>Xt||rt>V||St>j)){if(Z){if(rt={minX:rt,maxX:wr,minY:St,maxY:Xt},Q.collides(rt))continue;Q.insert(rt)}h.push({w:Pt,h:$t,point:Ae,text:Se,color:nt,angle:Ie,maxHeightLine:le,dataIndex:Be})}}for(ee.restore(),_=[],H=[],Z=[],V=[],Q=ro(h),j=Q.w,Q=Q.h,0>=j&&(j=1),0>=Q&&(Q=1),q.width=j*window.devicePixelRatio,q.height=Q*window.devicePixelRatio,ee.save(),ee.scale(window.devicePixelRatio,window.devicePixelRatio),ee.textBaseline="top",ee.font="normal bold 20px "+S,ee.shadowColor=F&&F.color,ee.shadowOffsetX=F&&F.offsetX,ee.shadowOffsetY=F&&F.offsetY,ee.shadowBlur=F&&F.blur,S=0,F=h.length;S<F;++S){for(q=h[S],ee.fillStyle=q.color,ku(ee,q.text,q.x+R[0]+C,q.y+R[1],q.maxHeightLine,x),Se=Xi(q.point,3),ne=Se[0],Ae=Se[1],Se=Se[2],Ie=0;4>Ie;Ie++)_.push(ne,Ae,Se),_.push(Ie),_.push(q.w,q.h),_.push(s/20,q.angle*Math.PI/180);ne=q.x/j,Ae=(q.x+q.w)/j,Se=(q.y+q.h)/Q,Ie=q.y/Q,H.push(ne,Se,ne,Ie,Ae,Ie,Ae,Se),ne=4*S,Z.push(ne,ne+2,ne+1,ne,ne+3,ne+2),P&&(q=this.indexToRgb(q.dataIndex),V.push(q[0]/255,q[1]/255,q[2]/255),V.push(q[0]/255,q[1]/255,q[2]/255),V.push(q[0]/255,q[1]/255,q[2]/255),V.push(q[0]/255,q[1]/255,q[2]/255))}ee.restore(),this.loadTexture(),this.index=Z,this.vertexBuffer.updateData(new Float32Array(_)),this.uvBuffer.updateData(new Float32Array(H)),this.indexBuffer.updateData(new Uint32Array(Z)),P&&this.pickBuffer.updateData(new Float32Array(V))}},{key:"loadTexture",value:function(){var s=this;this.canvas?pr(this.gl,this.canvas,function(h){s.texture=h},{TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"}):this.texture=null}}]),p}(ki);typeof CanvasRenderingContext2D.prototype.roundRect!="function"&&(CanvasRenderingContext2D.prototype.roundRect=function(d,p,s,h,_){return s<2*_&&(_=s/2),h<2*_&&(_=h/2),this.beginPath(),this.moveTo(d+_,p),this.arcTo(d+s,p,d+s,p+h,_),this.arcTo(d+s,p+h,d,p+h,_),this.arcTo(d,p+h,d,p,_),this.arcTo(d,p,d+s,p,_),this.closePath(),this});var vI=function(d){function p(s){hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s)),s.name="LabelLayer",s.pickedIndex=null;var h=s.canvas=document.createElement("canvas");return s.ctx=h.getContext("2d"),s.arrowHeight=8,s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{depthWrite:!1,depthTest:!0,textColor:"#0f0",borderColor:"#f00",backgroundColor:"#fff",fontFamily:"Microsoft Yahei",fontSize:14,lineHeight:20,textAlign:"left",collides:!1,offset:[0,0],padding:[2,2],polygonOffset:[0,0],borderRadius:5,borderWidth:1,stroke:{color:"#fff",width:0}}}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions();this.texture=null,this.lastUpdateTime=0,this.program=new Jn(this.gl,{vertexShader:"precision highp float;uniform mat4 matrix;uniform float zoomUnits;uniform float devicePixelRatio;uniform float zIndex;uniform vec2 offset;attribute vec3 position;attribute float corner;attribute vec2 size;attribute vec2 aTextCoord;varying vec2 vTextCoord;/***点A(x,y)，绕原点顺时针旋转角度a新坐标的计算公式*x1=x*cos(a)+y*sin(a)*y1=y*cos(a)-x*sin(a)*/vec3 transformCoord(vec3 coord,vec2 size,float corner){float x=coord.x;float y=coord.y;if(corner==1.0){x+=-size.x;y+=size.y;}else if(corner==2.0){x+=size.x;y+=size.y;}else if(corner==3.0){x+=size.x;y+=-size.y;}else{x+=-size.x;y+=-size.y;}return vec3(x,y+size.y,coord.z);}void main(){vTextCoord=aTextCoord;vec2 pixelOffset=offset*zoomUnits;vec4 projection=matrix*vec4(position.x+pixelOffset[0],position.y-pixelOffset[1],position.z+zIndex,1.0);vec3 screen=projection.xyz/projection.w;vec2 halfSize=size/MAPV_resolution*devicePixelRatio;vec3 current=transformCoord(screen,halfSize,corner);gl_Position=vec4(current,1.0);}",fragmentShader:"precision highp float;uniform sampler2D textureImage;varying vec2 vTextCoord;void main(){gl_FragColor=texture2D(textureImage,vec2(vTextCoord.x,1.0-vTextCoord.y));}",defines:h.enablePicked?["PICK"]:[]},this),this.vertexBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.uvBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Br({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),h=[{name:"position",buffer:this.vertexBuffer,size:3,stride:24,type:"FLOAT",offset:0},{name:"corner",buffer:this.vertexBuffer,size:1,stride:24,type:"FLOAT",offset:12},{name:"size",buffer:this.vertexBuffer,size:2,stride:24,type:"FLOAT",offset:16},{name:"aTextCoord",buffer:this.uvBuffer,size:2,stride:8,type:"FLOAT",offset:0}],h=h.concat(this.getCommonAttributes()),this.vertexArray=new Yi({gl:s,program:this.program,attributes:h})}},{key:"onDestroy",value:function(){}},{key:"onChanged",value:function(s,h){this.gl&&this.processCache(s,h)}},{key:"processCache",value:function(s,h){for(this.cachedData=[],this.pickedIndex=null,s=0;s<h.length;s++){var _=h[s],x=this.normizedPoint(_.geometry.coordinates);x&&this.cachedData.push({point:x,item:_,index:s})}}},{key:"setPickedIndex",value:function(s,h){var _=this;h!=="onMousemove"?0<=s&&(this.pickedIndex=s,setTimeout(function(){_.webglLayer.render()})):this.pickedIndex=s}},{key:"render",value:function(s){if(this.cachedData&&this.cachedData.length&&this.map){var h=s.gl,_=s.matrix,x=this.getOptions(),S=this.program;S.use(h),this.updateText(s),this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA],polygonOffset:x.polygonOffset,depthTest:x.depthTest,depthMask:x.depthWrite});var C=this.map.getZoomUnits();s=Lr(this.getCommonUniforms(s),{matrix:_,devicePixelRatio:window.devicePixelRatio,textureImage:this.texture,offset:x.offset,zoomUnits:C,zIndex:x.zIndex}),delete s.uSelectedColor,S.setUniforms(s),0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),h.drawElements(h.TRIANGLES,this.index.length,h.UNSIGNED_INT,0))}}},{key:"updateText",value:function(s){var h=this,_=s.gl,x=s.matrix,S=this.getOptions().enablePicked;s=this.canvas;var C=this.ctx;_=this.createMapbox(C,_,x),x=ro(_);var R=x.w,H=x.h;0>=R&&(R=1),0>=H&&(H=1),s.width=R*window.devicePixelRatio,s.height=H*window.devicePixelRatio;var Z=[],P=[],F=[],V=[];_.forEach(function(j,q){h.drawItem(C,j);var ee=Xi(j.point,3),Q=ee[0],ne=ee[1];ee=ee[2];for(var le=0;4>le;le++)Z.push(Q,ne,ee),Z.push(le),Z.push(j.w,j.h);Q=j.x/R,ne=(j.x+j.w)/R,ee=(j.y+j.h)/H,le=j.y/H,P.push(Q,ee,Q,le,ne,le,ne,ee),q*=4,F.push(q,q+2,q+1,q,q+3,q+2),S&&(j=h.indexToRgb(j.dataIndex),V.push(j[0]/255,j[1]/255,j[2]/255),V.push(j[0]/255,j[1]/255,j[2]/255),V.push(j[0]/255,j[1]/255,j[2]/255),V.push(j[0]/255,j[1]/255,j[2]/255))}),this.loadTexture(),this.index=F,this.vertexBuffer.updateData(new Float32Array(Z)),this.uvBuffer.updateData(new Float32Array(P)),this.indexBuffer.updateData(new Uint32Array(F)),S&&this.pickBuffer.updateData(new Float32Array(V))}},{key:"createMapbox",value:function(s,h,_){function x(q){var ee=q.point,Q=q.item;q=q.index;var ne=Xi(ee,3);ne=Fo.clone([ne[0],ne[1],ne[2],1]),Fo.transformMat4(ne,ne,_),Fo.scale(ne,ne,1/ne[3]);var le=(ne[0]+1)/2*P,Ae=(-ne[1]+1)/2*F;ne=this.computeTextWH(Q,s,R,Z);var Se=Xi(ne,2);ne=Se[0],Se=Se[1],le-=ne/2,Ae-=Se/2;var Ie=le+ne,Be=Ae+Se;if(!(0>Ie||0>Be||le>P||Ae>F)){if(H){if(le={minX:le,maxX:Ie,minY:Ae,maxY:Be},V.collides(le))return;V.insert(le)}j.push({w:ne,h:Se,point:ee,item:Q,dataIndex:q})}}var S=this,C=this.getOptions(),R=C.padding,H=C.collides,Z=C.fontSize,P=h.canvas.width/window.devicePixelRatio,F=h.canvas.height/window.devicePixelRatio,V=new id,j=[];return this.cachedData[this.pickedIndex]&&x.bind(this)(this.cachedData[this.pickedIndex]),this.cachedData.forEach(function(q){S.pickedIndex!==q.index&&x.bind(S)(q)}),j}},{key:"computeTextWH",value:function(s,h){var _=this.getOptions(),x=_.padding,S=_.fontSize,C=_.fontFamily,R=_.lineHeight;return _=_.borderWidth,h.save(),h.scale(window.devicePixelRatio,window.devicePixelRatio),h.font=S+"px "+C,s=s.properties.text.split(`
`),S=s.reduce(function(H,Z){return Z=h.measureText(Z),H<Z.width?Z.width:H},0),h.restore(),[S+2*x[1]+2*_,2*x[0]+2*_+R*s.length+this.arrowHeight+_]}},{key:"drawItem",value:function(s,h){var _=this.getOptions(),x=_.padding,S=_.backgroundColor,C=_.textColor,R=_.fontSize,H=_.borderColor,Z=_.borderRadius,P=_.fontFamily,F=_.lineHeight,V=_.textAlign,j=_.pickedTextColor,q=_.pickedBorderColor,ee=_.pickedBackgroundColor,Q=_.shadow,ne=_.stroke,le=_.borderWidth,Ae=h.x,Se=h.y;_=h.w;var Ie=h.h,Be=h.item;h=h.dataIndex;var nt="";Ta(Be.properties)==="object"&&(Be=Be.properties,nt=Be.text||"",Q=Be.shadow||Q,ne=Be.stroke||ne,R=Be.fontSize||R,V=Be.textAlign||V,F=Be.lineHeight||F,C=Be.textColor||C,P=Be.fontFamily||P,H=Be.borderColor||H,S=Be.backgroundColor||S),this.pickedIndex===h&&(C=j||C,H=q||H,S=ee||S),j=nt.split(`
`),q=Ie-this.arrowHeight-le,s.save(),s.beginPath(),s.scale(window.devicePixelRatio,window.devicePixelRatio),s.textBaseline="top",s.font=R+"px "+P,s.translate(Ae,Se),s.fillStyle=S,s.strokeStyle=H,s.lineWidth=le,P=le/2,s.roundRect(P,P+.5,_-le,q,Z),s.closePath(),s.fill(),0<le&&s.stroke(),s.beginPath(),Z=this.arrowHeight+le,Ae=_/2,Se=Z/2,s.moveTo(Ae-Se,q+P),s.lineTo(Ae+Se,q+P),s.lineTo(Ae,q+P+.8*Z),s.closePath(),s.fillStyle=0<le?H:S,s.fill(),s.beginPath(),s.fillStyle=C,Q&&(s.shadowColor=Q.color,s.shadowOffsetX=Q.offsetX,s.shadowOffsetY=Q.offsetY,s.shadowBlur=Q.blur);var rt=V==="center"?Ae:V==="right"?_-P-x[1]:P+x[1];s.textAlign=V,j.forEach(function(St,Pt){Pt=le+x[0]+(Pt+.5)*F-.5*R,0<ne.width&&(s.lineWidth=ne.width,s.strokeStyle=ne.color,s.strokeText(St,rt,Pt)),s.fillText(St,rt,Pt)}),s.restore()}},{key:"loadTexture",value:function(){var s=this;this.canvas?pr(this.gl,this.canvas,function(h){s.texture=h},{TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"}):this.texture=null}}]),p}(ki);Ti.prototype.parseColors=function(d){this.arrFeatureStyles=[[2,d[0]||"rgba(79,210,125,1)",2,2,0,[],0,0],[2,d[0]||"rgba(79,210,125,1)",3,2,0,[],0,0],[2,d[0]||"rgba(79,210,125,1)",3,2,0,[],0,0],[2,d[0]||"rgba(79,210,125,1)",5,2,0,[],0,0],[2,d[0]||"rgba(79,210,125,1)",6,2,0,[],0,0],[2,d[2]||"rgba(255,208,69,1)",2,2,0,[],0,0],[2,d[2]||"rgba(255,208,69,1)",3,2,0,[],0,0],[2,d[2]||"rgba(255,208,69,1)",3,2,0,[],0,0],[2,d[2]||"rgba(255,208,69,1)",5,2,0,[],0,0],[2,d[2]||"rgba(255,208,69,1)",6,2,0,[],0,0],[2,d[1]||"rgba(232,14,14,1)",2,2,0,[],0,0],[2,d[1]||"rgba(232,14,14,1)",3,2,0,[],0,0],[2,d[1]||"rgba(232,14,14,1)",3,2,0,[],0,0],[2,d[1]||"rgba(232,14,14,1)",5,2,0,[],0,0],[2,d[1]||"rgba(232,14,14,1)",6,2,0,[],0,0],[2,d[3]||"rgba(181,0,0,1)",2,2,0,[],0,0],[2,d[3]||"rgba(181,0,0,1)",3,2,0,[],0,0],[2,d[3]||"rgba(181,0,0,1)",3,2,0,[],0,0],[2,d[3]||"rgba(181,0,0,1)",5,2,0,[],0,0],[2,d[3]||"rgba(181,0,0,1)",6,2,0,[],0,0],[2,"rgba(255,255,255,1)",4,0,0,[],0,0],[2,"rgba(255,255,255,1)",5.5,0,0,[],0,0],[2,"rgba(255,255,255,1)",7,0,0,[],0,0],[2,"rgba(255,255,255,1)",8.5,0,0,[],0,0],[2,"rgba(255,255,255,1)",10,0,0,[],0,0]]},Ti.prototype.setColors=function(d){this.parseColors(d)},Ti.prototype.initialize=function(d){this._initialize||(this._initialize=!0)},Ti.prototype.clearCache=function(d){this.cache={}},Ti.prototype.setMap=function(d){d?(this.map=d,this._initialize?this.canvaslayer.show():this.initialize(d)):this.canvaslayer.hide()},Ti.prototype.draw=function(d){d=d||{},d.clearCache&&this.clearCache(),this.canvaslayer.draw()},Ti.prototype.clear=function(){},Ti.prototype.update=function(){var d=this.map,p=this.getDataZoom(),s=Math.pow(2,18-p),h=256*s,_=_e.convertLL2MC(d.getCenter()),x=Math.ceil(_.lng/h),S=Math.ceil(_.lat/h),C=this.tileSize,R=p-Math.round(d.getZoom());for(0<R&&(C/=Math.pow(2,R)),h=[x,S,(_.lng-x*h)/h*C,(_.lat-S*h)/h*C],x=d.getBounds(),_=x.getNorthEast(),x=x.getSouthWest(),d.getSize(),d.getSize(),d=(_.lng-x.lng)/s,s=(_.lat-x.lat)/s,_=h[1]-Math.ceil((s/2-h[3])/C),x=h[0]+Math.ceil((d/2+h[2])/C),S=h[1]+Math.ceil((s/2+h[3])/C),s=[],C=h[0]-Math.ceil((d/2-h[2])/C);C<x;C++)for(h=_;h<S;h++)s.push([C,h,p]);for(this.tilesOrder=s,this._loadCount={},C=0;C<s.length;C++)h=s[C][0],d=s[C][1],this._loadCount[h+"_"+d+"_"+s[C][2]]=!1;for(C=0;C<s.length;C++)h=s[C][0],d=s[C][1],this.showTile(h,d,p)},Ti.prototype.showTile=function(d,p,s){this._parseDataAndDraw(d,p,s)},Ti.prototype.drawCurrentData=function(){this.clear();for(var d=[],p=0;p<this.tilesOrder.length;p++){var s=this.tilesOrder[p][0],h=this.tilesOrder[p][1],_=this.tilesOrder[p][2],x=this.cache[this.getCacheKey(s,h,_)];if(x)for(s=this._drawFeatures(x,s,h,_),h=0;h<s.length;h++)d.push(s[h])}this.lineLayer.setData(d)},Ti.prototype.isAllLoaded=function(){var d=!0,p;for(p in this._loadCount)if(!this._loadCount[p]){d=!1;break}return d},Ti.prototype.getCacheKey=function(d,p,s){return d+"_"+p+"_"+s},Ti.prototype.getDataZoom=function(){var d=Math.round(this.map.getZoom());return 19<d&&(d=19),d},Ti.prototype._parseDataAndDraw=function(d,p,s){var h=this,_=h.map,x=_.getCenter(),S=Math.round(_.getZoom()),C=this.getCacheKey(d,p,s),R="_cbk"+(1e5*Math.random()).toFixed(0),H=this.getTileUrl(d,p,s,"BMapGL."+R);BMapGL[R]=function(Z){h._loadCount[d+"_"+p+"_"+s]=!0;var P=_.getCenter(),F=Math.round(_.getZoom());P.equals(x)&&F===S?(P=Z.content&&Z.content.tf,Z.data&&(P=Z.data),h.cache[C]=P?{traffic:P,precision:Z.precision}:null,h.drawTogether&&h.isAllLoaded()&&h.drawCurrentData()):F!==S&&h.clear(),delete BMapGL[R]},h.cache[C]!==void 0?(h._loadCount[d+"_"+p+"_"+s]=!0,h.drawTogether&&h.isAllLoaded()&&h.drawCurrentData()):this.request(H)},Ti.prototype.getTileUrl=function(d,p,s,h){return"https://sp3.baidu.com/7_AZsjOpB1gCo2Kml5_Y_DAcsMJiwa/traffic/?qt=vtraffic&x="+d+"&y="+p+"&z="+s+"&fn="+h+"&t="+new Date().getTime()},Ti.prototype._drawFeatures=function(d,p,s,h){var _=10;h=Math.pow(2,18-h),this.map.getCenter();var x=this.tileSize;if(p=[p*x*h,(s+1)*x*h],s=[],d&&d.traffic){_*=d.precision,d=d.traffic,x=0;for(var S=d.length;x<S;x++){var C=d[x],R=C[1];C=this.arrFeatureStyles[C[3]];var H=R[0]/_,Z=-R[1]/_,P=[];P.push([p[0]+H*h,p[1]+Z*h,1]);for(var F=2,V=R.length;F<V;F+=2)H+=R[F]/_,Z-=R[F+1]/_,P.push([p[0]+H*h,p[1]+Z*h,1]);s.push({color:C[1],geometry:{type:"LineString",coordinates:P}})}}return s},Ti.prototype.request=function(d,p){if(p){var s=(1e5*Math.random()).toFixed(0);BMapGL._rd["_cbk"+s]=function(_){p&&p(_),delete BMapGL._rd["_cbk"+s]},d+="&callback=BMapGL._rd._cbk"+s}var h=document.createElement("script");h.type="text/javascript",h.charset="utf-8",h.src=d,h.addEventListener?h.addEventListener("load",function(_){_=_.target,_.parentNode.removeChild(_)},!1):h.attachEvent&&h.attachEvent("onreadystatechange",function(_){_=window.event.srcElement,!_||_.readyState!=="loaded"&&_.readyState!=="complete"||_.parentNode.removeChild(_)}),setTimeout(function(){document.getElementsByTagName("head")[0].appendChild(h),h=null},1)},Ti.prototype.getRGBA=function(d){return d>>>=0,"rgba("+(d>>24&255)+","+(d>>16&255)+","+(d>>8&255)+","+(d&255)/256+")"},Ti.prototype.getLineCap=function(d){return["butt","square","round"][d]},Ti.prototype.getLineJoin=function(d){return["miter","bevel","round"][d]};var yI=function(d){function p(s){hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s)),s.autoUpdate=!0,s.getOptions();var h=new Zi({color:"rgba(257, 254, 47, 0.9)",minZoom:18,duration:.8,interval:.2,trailLength:.4});return s.lineLayer=h,s.children=[h],s}return sn(p,d),Mr(p,[{key:"initialize",value:function(s){Yl(p.prototype.__proto__||Dr(p.prototype),"initialize",this).call(this,s),s=this.map.map;var h=new Ti({});h.lineLayer=this.lineLayer,this.trafficTileManager=h,h.setMap(s),h.update(),s.addEventListener("moveend",function(){h.update()}),s.addEventListener("zoomend",function(){h.update()}),s.addEventListener("ondraw",function(){})}},{key:"onOptionsChanged",value:function(s){}},{key:"onDataChanged",value:function(s){}},{key:"getDefaultOptions",value:function(){return{}}}]),p}(xl),xI=function(d){function p(s,h){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s,h)),s.name="HeatmapLayer",s.bufferData=[],s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{size:13,unit:"px",height:0,max:100,min:0,opacity:1,minOpacity:0,maxOpacity:1,blend:"normal"}}},{key:"initialize",value:function(s){var h=this;this.gl=s;var _=this.getOptions();this.inverseMatrix=Er.create(Float64Array),this.frameBuffer=new La(s),this.webglLayer.map.onResize(function(){h.frameBuffer=new La(s)}),this.circle=Ma(64),this.circleTexture=Rt(s,this.circle,{TEXTURE_MAG_FILTER:"LINEAR",TEXTURE_MIN_FILTER:"LINEAR",TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"}).texture,this.intensity=new Xe({gradient:_.gradient}),this.paletteTexture=Rt(s,this.intensity.paletteCtx.canvas,{TEXTURE_MAG_FILTER:"LINEAR",TEXTURE_MIN_FILTER:"LINEAR",TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"}).texture,this.offlineProgram=new Jn(this.gl,{vertexShader:"uniform mat4 u_matrix;uniform mat4 pointToPixelMatrix;uniform mat4 pixelToViewMatrix;uniform mat4 projectionMatrix;uniform int unit;uniform float size;uniform float max;uniform float min;attribute vec3 aPos;attribute vec2 aOffset;attribute float aCount;varying vec2 vOffset;varying float vCount;varying vec3 vPosition;void main(){vOffset=aOffset;vCount=(aCount-min)/(max-min);if(unit==1){vec2 pos=(pointToPixelMatrix*vec4(aPos.xy,0.0,1.0)).xy+aOffset.xy*size/2.0;gl_Position=projectionMatrix*pixelToViewMatrix*vec4(pos,0.0,1.0);}else{vec2 pos=aPos.xy+aOffset.xy*size;gl_Position=u_matrix*vec4(pos,0.0,1.0);}vPosition=vec3(gl_Position.z/gl_Position.w);}",fragmentShader:"varying vec2 vOffset;varying float vCount;varying vec3 vPosition;uniform sampler2D uCircle;void main(){vec4 circle=texture2D(uCircle,(vOffset+1.0)/2.0);float intensity=circle.a*vCount;if(intensity<=0.0){discard;}gl_FragColor=vec4(vPosition,intensity);}"},this),this.offlineBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.offlineIndexBuffer=new Br({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.offlineVertexArray=new Yi({gl:s,program:this.offlineProgram,attributes:[{stride:24,name:"aPos",buffer:this.offlineBuffer,size:3,type:"FLOAT",offset:0},{stride:24,name:"aOffset",buffer:this.offlineBuffer,size:2,type:"FLOAT",offset:12},{stride:24,name:"aCount",buffer:this.offlineBuffer,size:1,type:"FLOAT",offset:20}]}),this.indexBuffer=new Br({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.program=new Jn(this.gl,{vertexShader:"attribute vec2 aPos;varying vec2 vPos;uniform float uHeight;uniform mat4 pixelToViewMatrix;uniform mat4 projectionMatrix;uniform sampler2D u_sampler;uniform mat4 inverseMatrix;void main(){vPos=aPos;if(uHeight<=0.0){gl_Position=vec4(aPos,0.0,1.0);}else{vec4 gray=texture2D(u_sampler,(aPos+1.0)/2.0);vec4 m0=inverseMatrix*vec4(aPos.xy,0.0,1.0);vec4 m1=inverseMatrix*vec4(aPos.xy,1.0,1.0);m0/=m0.w;m1/=m1.w;vec4 pixel=m0+(-m0.z/(m1.z-m0.z))*(m1-m0);pixel.z=uHeight*gray.a;gl_Position=projectionMatrix*pixelToViewMatrix*vec4(pixel.xyz,1.0);}}",fragmentShader:"uniform sampler2D u_sampler;uniform sampler2D u_samplerPalette;uniform float uHeight;uniform float opacity;uniform float minOpacity;uniform float maxOpacity;uniform bool u_strict;varying vec2 vPos;void main(){vec4 gray=texture2D(u_sampler,(vPos+1.0)/2.0);float grayAlpha=gray.a;if(grayAlpha<=0.0){discard;}gl_FragColor=texture2D(u_samplerPalette,vec2(grayAlpha,1.0));float addAlpha=1.0;if(gray.a<0.3){addAlpha=gray.a*3.3;}gl_FragColor.a*=addAlpha;gl_FragColor.a=max(gl_FragColor.a,minOpacity);gl_FragColor.a=min(gl_FragColor.a,maxOpacity);gl_FragColor.a*=opacity;}"},this),this.buffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.vertexArray=new Yi({gl:s,program:this.program,attributes:[{stride:8,name:"aPos",buffer:this.buffer,size:2,type:"FLOAT",offset:0}]}),_=[];for(var x=[],S=Math.floor(s.canvas.width/4),C=Math.floor(s.canvas.height/4),R=S+1,H=0;H<=C;H++)for(var Z=0;Z<=S;Z++)if(_.push(2*Z/S-1,2*H/C-1),Z<S&&H<C){var P=R*H+Z,F=R*(H+1)+Z;x.push(P,P+1,F+1),x.push(P,F+1,F)}this.bufferData=_,this.buffer.updateData(new Float32Array(_)),this.indexData=x,this.indexBuffer.updateData(new Uint32Array(x))}},{key:"onDestroy",value:function(){this.bufferData=[]}},{key:"onOptionsChanged",value:function(s,h){var _=this.gl;_&&s.gradient!==h.gradient&&(this.intensity=new Xe({gradient:s.gradient}),this.paletteTexture=Rt(_,this.intensity.paletteCtx.canvas,{TEXTURE_MAG_FILTER:"LINEAR",TEXTURE_MIN_FILTER:"LINEAR",TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"}).texture)}},{key:"onDataChanged",value:function(s){if(this.gl){var h=[],_=[];this.getOptions();for(var x=0;x<s.length;x++){var S=s[x],C=this.normizedPoint(s[x].geometry.coordinates),R=S.count===void 0?1:S.count;"properties"in S&&"count"in S.properties&&(R=S.properties.count),h.push(C[0],C[1],C[2]),h.push(-1,-1),h.push(R),h.push(C[0],C[1],C[2]),h.push(-1,1),h.push(R),h.push(C[0],C[1],C[2]),h.push(1,1),h.push(R),h.push(C[0],C[1],C[2]),h.push(1,-1),h.push(R),S=4*x,_.push(S+0,S+2,S+1),_.push(S+0,S+3,S+2)}this.offlineBufferData=h,this.offlineIndexData=_,this.offlineBuffer.updateData(new Float32Array(h)),this.offlineIndexBuffer.updateData(new Uint32Array(_))}}},{key:"render",value:function(s){var h=s.gl,_=s.matrix,x=s.pointToPixelMatrix,S=s.pixelToViewMatrix;if(s=s.projectionMatrix,this.offlineBufferData&&!(0>=this.offlineBufferData.length)){var C=this.getOptions();this.setGLState({blend:!0,blendFunc:[h.ONE,h.ONE],depthTest:!1}),h.bindFramebuffer(h.FRAMEBUFFER,this.frameBuffer.framebuffer),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT),this.offlineProgram.use(h),this.offlineProgram.setUniforms({u_matrix:_,uCircle:this.circleTexture,pointToPixelMatrix:x,pixelToViewMatrix:S,projectionMatrix:s,unit:C.unit==="px"?1:0,size:C.size,max:C.max,min:C.min}),this.offlineVertexArray.bind(),this.offlineIndexBuffer.bind(),h.drawElements(h.TRIANGLES,this.offlineIndexData.length,h.UNSIGNED_INT,0),h.bindFramebuffer(h.FRAMEBUFFER,null),this.program.use(h),this.vertexArray.bind(),_=this.inverseMatrix,Er.identity(_),Er.multiply(_,s,S),Er.invert(_,_),this.setGLState({blend:!0,blendFunc:Cr(h,C.blend),depthTest:!!C.height}),this.program.setUniforms({u_sampler:this.frameBuffer.framebuffer.texture,u_samplerPalette:this.paletteTexture,uHeight:C.height,opacity:C.opacity,minOpacity:C.minOpacity,maxOpacity:C.maxOpacity,pixelToViewMatrix:S,inverseMatrix:_,projectionMatrix:s}),this.indexBuffer.bind(),h.drawElements(h.TRIANGLES,this.indexData.length,h.UNSIGNED_INT,0)}}}]),p}(ki),kp=function(d){function p(s,h){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s,h)),s.name="BarLayer",s.selectedColor=[-1,-1,-1],s.textureCache={},s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{color:"rgba(0, 180, 0, 1.0)",edgeCount:4,unit:"m",height:1e5,type:"normal",size:5e4}}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions(),_={normal:[`attribute vec3 aPos;attribute vec4 aColor;attribute float aSize;attribute float aEdgeIndex;attribute float aPointIndex;attribute float aEdgeCount;varying vec4 vColor;varying vec4 vPosition;varying vec4 vFragPosition;varying float vSize;varying float vEdgeIndex;varying float vPointIndex;varying float vEdgeCount;uniform mat4 uMatrix;uniform float uZoomUnits;uniform vec4 uSelectedColor;void main(){vColor=aColor;vEdgeIndex=aEdgeIndex;vEdgeCount=aEdgeCount;vPointIndex=aPointIndex;float z=aPos.z*uZoomUnits;float x=aPos.x;float y=aPos.y;vSize=aSize*uZoomUnits;float a=radians(360.0/aEdgeCount);float b=a/2.0;float r=vSize/cos(b);if(aEdgeIndex<0.0){float index=aPointIndex;float angle=0.0;if(mod(index,2.0)==0.0){angle=a*(index/2.0)-b;}else{angle=-a*((index-1.0)/2.0)-b;}y=y+r*sin(angle);x=x+r*cos(angle);}else{float i=aEdgeIndex-1.0;float j=aPointIndex;float angle=a*i+b;y=y+r*sin(angle);x=x+r*cos(angle);}vPosition=vec4(aPos,1.0);vFragPosition=vec4(x,y,z,1.0);gl_Position=uMatrix*vFragPosition;if(aEdgeIndex==1.0&&aPointIndex==1.0){gl_PointSize=20.0;}else{gl_PointSize=10.0;}
#if defined(PICK)
if(mapvIsPicked()){vColor=uSelectedColor;}
#endif
}`,"varying vec4 vColor;varying float vEdgeIndex;varying float vPointIndex;varying float vEdgeCount;varying vec4 vPosition;varying vec4 vFragPosition;uniform mat4 uMatrix;void main(){vec4 color=vColor;if(vEdgeIndex<0.0){color.r+=0.2;color.g+=0.2;color.b+=0.2;}else{float i=ceil(vEdgeIndex);;float d=i/vEdgeCount*0.5;if(i<=vEdgeCount/2.0){d=0.2*(i/vEdgeCount*0.5)-0.1;}else{d=0.2*(vEdgeCount-i)/vEdgeCount*0.5-0.1;}color.r+=d;color.g+=d;color.b+=d;}gl_FragColor=color;}"],light:[`attribute vec3 aPos;attribute vec4 aColor;attribute float aSize;attribute float aEdgeIndex;attribute float aPointIndex;attribute float aEdgeCount;varying vec4 vColor;varying vec4 vPosition;varying vec4 vFragPosition;varying float vSize;varying float vEdgeIndex;varying float vPointIndex;varying float vEdgeCount;uniform mat4 uMatrix;uniform float uZoomUnits;uniform vec4 uSelectedColor;void main(){vColor=aColor;vEdgeIndex=aEdgeIndex;vEdgeCount=aEdgeCount;vPointIndex=aPointIndex;float z=aPos.z*uZoomUnits;float x=aPos.x;float y=aPos.y;vSize=aSize*uZoomUnits;float a=radians(360.0/aEdgeCount);float b=a/2.0;float i=aEdgeIndex;float j=aPointIndex;float angle=a*(i-1.0)+b;float r=vSize/cos(b);y=y+r*sin(angle);x=x+r*cos(angle);if(j==1.0){z=0.0;}vPosition=vec4(aPos.xyz,1.0);vFragPosition=vec4(x,y,z,1.0);gl_Position=uMatrix*vFragPosition;
#if defined(PICK)
if(mapvIsPicked()){vColor=uSelectedColor;}
#endif
}`,"varying vec4 vColor;varying float vEdgeIndex;varying float vPointIndex;varying float vEdgeCount;varying vec4 vPosition;varying vec4 vFragPosition;uniform mat4 uMatrix;void main(){vec4 color=vColor;color.a=1.0-vFragPosition.z/vPosition.z;gl_FragColor=color;}"]};_=_[h.type]||_.normal,this.program=new Jn(this.gl,{vertexShader:_[0],fragmentShader:_[1],defines:h.enablePicked?["PICK"]:[]},this),this.buffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Br({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),h=[{stride:44,name:"aPos",buffer:this.buffer,size:3,type:"FLOAT",offset:0},{stride:44,name:"aSize",buffer:this.buffer,size:1,type:"FLOAT",offset:12},{stride:44,name:"aEdgeIndex",buffer:this.buffer,size:1,type:"FLOAT",offset:16},{stride:44,name:"aPointIndex",buffer:this.buffer,size:1,type:"FLOAT",offset:20},{stride:44,name:"aEdgeCount",buffer:this.buffer,size:1,type:"FLOAT",offset:24},{stride:44,name:"aColor",buffer:this.buffer,size:4,type:"FLOAT",offset:28}],h=h.concat(this.getCommonAttributes()),this.vertexArray=new Yi({gl:s,program:this.program,attributes:h})}},{key:"onChanged",value:function(s,h){this.gl&&h&&(this.uniforms={},this.data=h,this.options=s,this.processData(),s.enablePicked&&this.parsePickData(h))}},{key:"processData",value:function(){var s=[],h=[];this.options.type==="light"?this.createLightBuffer(this.data,s,h):this.createNormalBuffer(this.data,s,h),this.bufferData=s,this.indexData=h,this.buffer.updateData(new Float32Array(s)),this.indexBuffer.updateData(new Uint32Array(h))}},{key:"createNormalBuffer",value:function(s,h,_){var x=this,S=parseInt(this.options.edgeCount,10)||4;s.forEach(function(C,R){var H=C.color||x.options.color,Z=C.size||x.options.size,P=Array.isArray(C.value)?C.value:typeof C.value=="number"?[C.value]:[1],F=x.normizedPoint(C.geometry.coordinates),V=C.height||x.options.height,j=P.reduce(function(Q,ne){return Number(Q)+Number(ne)}),q=0,ee="blue";for(P.forEach(function(Q,ne){ee=x.normizedColor(typeof H=="function"?H(Q,ne,P):Array.isArray(H)?H[ne]:H),Q=typeof V=="function"?V(Q,ne,P):Array.isArray(V)?V[ne]:V/j*Q;var le=_[_.length-1],Ae=h.length/11;for(0<Ae&&(S%2===1&&ne===0?_.push(le,le,Ae):_.push(le,Ae)),ne=1;ne<=2*S;ne++)ne%2===0?h.push.apply(h,[F[0],F[1],q,Z,ne/2,2,S].concat(Yn(ee))):h.push.apply(h,[F[0],F[1],q+Q,Z,(ne+1)/2,1,S].concat(Yn(ee))),_.push(Ae+ne-1),ne===2*S&&(h.push.apply(h,[F[0],F[1],q+Q,Z,ne/2+1,1,S].concat(Yn(ee))),h.push.apply(h,[F[0],F[1],q,Z,ne/2+1,2,S].concat(Yn(ee))),_.push(Ae+ne,Ae+ne+1));q+=Q}),R=_[_.length-1],C=h.length/11,0<C&&_.push(R,C),R=1;R<=S;R++)h.push.apply(h,[F[0],F[1],q,Z,-1,R,S].concat(Yn(ee))),_.push(C+R-1)})}},{key:"createLightBuffer",value:function(s,h,_){var x=this,S=parseInt(this.options.edgeCount,10)||4;s.forEach(function(C,R){R=C.color||x.options.color,R=x.normizedColor(typeof R=="function"?R(C.value):typeof R=="string"?R:"blue");var H=C.size||x.options.size,Z=x.normizedPoint(C.geometry.coordinates),P=C.height||x.options.height;for(P=typeof P=="function"?P(C.value):P,C=1;C<=S;C++){var F=_[_.length-1],V=h.length/11;for(0<V&&_.push(F,V),F=1;F<=2*S;F++)F%2===0?h.push.apply(h,[Z[0],Z[1],P,H,F/2,1,S].concat(Yn(R))):h.push.apply(h,[Z[0],Z[1],P,H,(F+1)/2,2,S].concat(Yn(R))),_.push(V+F-1),F===2*S&&_.push(V,V+1)}})}},{key:"render",value:function(s){var h=this.program,_=s.gl,x=s.matrix;this.setGLState({cullFace:this.options.type==="normal"}),h.use(_),this.vertexArray.bind(),this.indexBuffer.bind();var S=this.map.getZoomUnits();Lr(this.uniforms,this.getCommonUniforms(s),{uZoomUnits:this.options.unit==="px"?S:1,uMatrix:x}),h.setUniforms(this.uniforms),_.drawElements(_.TRIANGLE_STRIP,this.indexData.length,_.UNSIGNED_INT,0)}}]),p}(ki),AI=function(d){function p(s){hr(this,p);var h=ln(this,(p.__proto__||Dr(p)).call(this,s));return s=h.getOptions(),h.fillPoint=new Wg({enablePicked:s.enablePicked,autoSelect:s.autoSelect}),h.shadowPoint=new Wg,h.textPoint=new Yc,h.children=[h.shadowPoint,h.fillPoint,h.textPoint],h}return sn(p,d),Mr(p,[{key:"pick",value:function(s,h){return this.fillPoint.pick(s,h)}},{key:"onOptionsChanged",value:function(s){this.shadowPoint.setOptions({depthTest:!1,polygonOffset:[1,1],color:s.shadowColor,size:s.shadowSize,borderWidth:s.shadowBorderWidth,borderColor:s.shadowBorderColor}),this.fillPoint.setOptions({onClick:function(h){s.onClick&&s.onClick(h)},selectedIndex:s.selectedIndex,selectedColor:s.selectedColor,depthTest:!1,color:s.fillColor,size:s.fillSize,borderWidth:s.fillBorderWidth,borderColor:s.fillBorderColor}),this.textPoint.setOptions({collides:!1,polygonOffset:[-1,-1],color:s.fontColor,fontFamily:s.fontFamily,fontSize:s.fontSize})}},{key:"onDataChanged",value:function(s){var h=this,_=this.getOptions(),x=JSON.parse(Qf(s)).map(function(C){return C.properties.size=h.getProperty("shadowSize",_.shadowSize,C),C.properties.color=h.getProperty("shadowColor",_.shadowColor,C),C.properties.borderColor=h.getProperty("shadowBorderColor",_.shadowBorderColor,C),C.properties.borderWidth=h.getProperty("shadowBorderWidth",_.shadowBorderWidth,C),C}),S=JSON.parse(Qf(s)).map(function(C){return C.properties.size=h.getProperty("fillSize",_.fillSize,C),C.properties.color=h.getProperty("fillColor",_.fillColor,C),C.properties.borderColor=h.getProperty("fillBorderColor",_.fillBorderColor,C),C.properties.borderWidth=h.getProperty("fillBorderWidth",_.fillBorderWidth,C),C});this.shadowPoint.setData(x),this.fillPoint.setData(S),this.textPoint.setData(s)}},{key:"getProperty",value:function(s,h,_){return Object.prototype.toString.call(h)==="[object Function]"?h(_):(h=_[s]||h,"properties"in _&&s in _.properties&&(h=_.properties[s]),h)}},{key:"getDefaultOptions",value:function(){return{enablePicked:!1,selectedIndex:-1,selectedColor:"#ffff00",autoSelect:!0,fillColor:"rgba(255, 50, 10, 1)",fillSize:20,fillBorderColor:"#ffffff",fillBorderWidth:1.2,shadowColor:"rgba(255, 80, 110, 0.7)",shadowSize:40,shadowBorderColor:"rgba(255, 80, 110, 1)",shadowBorderWidth:1.2,fontSize:12,fontFamily:"Microsoft Yahei",fontColor:"#ffffff"}}}]),p}(xl),wI=function(d){function p(s,h){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s,h)),s.name="MaskLayer",s.bufferData=[],s.indices=[],s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{blend:"deeper",color:"rgba(100, 100, 100, 0.6)",height:0,polygonOffset:[0,0],depthTest:!1,depthWrite:!1}}},{key:"initialize",value:function(s){this.gl=s,this.program=new Jn(this.gl,{vertexShader:"precision highp float;attribute vec2 a_position;uniform mat4 u_matrix;uniform float u_height;void main(){vec4 position=u_matrix*vec4(a_position.xy,u_height,1.0);gl_Position=position;}",fragmentShader:"precision highp float;uniform vec4 u_color;void main(){gl_FragColor=u_color;}",defines:[]},this),this.vertexBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Br({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"});var h=[{stride:8,name:"a_position",buffer:this.vertexBuffer,size:2,type:"FLOAT",offset:0}];h=h.concat(this.getCommonAttributes()),this.vertexArray=new Yi({gl:s,program:this.program,attributes:h})}},{key:"onDestroy",value:function(){this.bufferData=[],this.index=[]}},{key:"onChanged",value:function(s,h){var _=this;if(this.gl){s=[];for(var x=[],S=[],C=[[this.normizedPoint([-180,-90]),this.normizedPoint([180,-90]),this.normizedPoint([180,90]),this.normizedPoint([-180,90])]],R=0;R<h.length;R++)if(h[R].geometry.coordinates)if(h[R].geometry.type==="LineString"&&S.push(h[R].geometry.coordinates.map(function(P){return _.normizedPoint(P)})),h[R].geometry.type==="MultiPolygon")for(var H=h[R].geometry.coordinates,Z=0;Z<H.length;Z++)S=S.concat(H[Z].map(function(P){return P.map(function(F){return _.normizedPoint(F)})}));else for(H=0;H<h[R].geometry.coordinates.length;H++)S.push(h[R].geometry.coordinates[H].map(function(P){return _.normizedPoint(P)}));if(0<h.length){for(S=Ut.flatten(C.concat(S)),h=S.vertices,S=S.holes,C=[],R=0;R<h.length;R+=3)C.push(h[R+0],h[R+1]);this.parseBufferData(s,x,C,S)}this.bufferData=s,this.index=x,this.vertexBuffer.updateData(new Float32Array(s)),this.indexBuffer.updateData(new Uint32Array(x))}}},{key:"parseBufferData",value:function(s,h,_,x){var S=s.length/2;for(x=x&&x.length?Ut(_,x,2):Ut(_),s.push.apply(s,Yn(_)),s=0;s<x.length;s++)h.push(x[s]+S)}},{key:"render",value:function(s){if(this.index&&this.index.length){var h=s.gl,_=s.matrix,x=this.getOptions(),S=this.program;S.use(h),s=Lr(this.getCommonUniforms(s),{u_matrix:_,u_height:x.height,u_color:this.normizedColor(x.color)}),S.setUniforms(s),this.setGLState({blend:!0,blendFunc:Cr(h,x.blend),polygonOffset:x.polygonOffset,depthTest:x.depthTest,depthMask:x.depthWrite}),this.indexBuffer.bind(),this.vertexArray.bind(),h.drawElements(h.TRIANGLES,this.index.length,h.UNSIGNED_INT,0)}}}]),p}(ki),Bo=function(d){function p(){return hr(this,p),ln(this,(p.__proto__||Dr(p)).apply(this,arguments))}return sn(p,d),Mr(p,[{key:"toBBox",value:function(s){var h=Xi(s.item.geometry.coordinates,2);return s=h[0],h=h[1],{minX:s,minY:h,maxX:s,maxY:h}}},{key:"compareMinX",value:function(s,h){return s.item.geometry.coordinates[0]-h.item.geometry.coordinates[0]}},{key:"compareMinY",value:function(s,h){return s.item.geometry.coordinates[1]-h.item.geometry.coordinates[1]}}]),p}(id),is=function(d){function p(s,h){return hr(this,p),s=ln(this,(p.__proto__||Dr(p)).call(this,s,h)),s.name="PointCanvasCustomLayer",h=s.canvas=document.createElement("canvas"),s.ctx=h.getContext("2d"),s.geoRBush=new Bo,s}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{depthWrite:!1,depthTest:!0,color:"#fff",fontFamily:"Microsoft Yahei",fontSize:14,flat:!1,collides:!0,unit:"px",angle:0,offset:[0,0],padding:[2,2],margin:[0,0],polygonOffset:[0,0],itemDimension:[20,20],renderItem:this.defaultOptionRenderItem}}},{key:"defaultOptionRenderItem",value:function(s,h,_){_.fillStyle="red",_.fillRect(h.x,h.y,h.w,h.h)}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions();this.texture=null,this.lastUpdateTime=0,this.program=new Jn(this.gl,{vertexShader:"precision highp float;uniform mat4 matrix;uniform bool uFlat;uniform bool uUnitPx;uniform float zoomUnits;uniform float devicePixelRatio;uniform float zIndex;uniform vec2 offset;attribute vec3 position;attribute float corner;attribute float scale;attribute float rotation;attribute vec2 size;attribute vec2 aTextCoord;varying vec2 vTextCoord;/***点A(x,y)，绕原点顺时针旋转角度a新坐标的计算公式*x1=x*cos(a)+y*sin(a)*y1=y*cos(a)-x*sin(a)*/vec3 transformCoord(vec3 coord,vec2 size,float corner){float x=coord.x;float y=coord.y;if(corner==1.0){x+=-size.x*cos(rotation)+size.y*sin(rotation);y+=size.y*cos(rotation)+size.x*sin(rotation);}else if(corner==2.0){x+=size.x*cos(rotation)+size.y*sin(rotation);y+=size.y*cos(rotation)-size.x*sin(rotation);}else if(corner==3.0){x+=size.x*cos(rotation)-size.y*sin(rotation);y+=-size.y*cos(rotation)-size.x*sin(rotation);}else{x+=-size.x*cos(rotation)-size.y*sin(rotation);y+=-size.y*cos(rotation)+size.x*sin(rotation);}return vec3(x,y,coord.z);}void main(){vTextCoord=aTextCoord;if(uFlat){vec2 pixelOffset=offset;vec2 halfSize=size/2.0*scale;if(uUnitPx){halfSize*=zoomUnits;pixelOffset*=zoomUnits;}vec3 current=transformCoord(position,halfSize,corner);current.z+=zIndex;gl_Position=matrix*vec4(current.x+pixelOffset[0],current.y-pixelOffset[1],current.z,1.0);}else{vec2 pixelOffset=offset*zoomUnits;vec4 projection=matrix*vec4(position.x+pixelOffset[0],position.y-pixelOffset[1],position.z,1.0);vec3 screen=projection.xyz/projection.w;vec2 halfSize=size/MAPV_resolution*devicePixelRatio*scale;vec3 current=transformCoord(screen,halfSize,corner);current.z+=zIndex;gl_Position=vec4(current,1.0);}}",fragmentShader:`precision highp float;uniform sampler2D textureImage;uniform vec4 uSelectedColor;varying vec2 vTextCoord;void main(){gl_FragColor=texture2D(textureImage,vec2(vTextCoord.x,1.0-vTextCoord.y));
#if defined(PICK)
if(mapvIsPicked()){gl_FragColor=vec4(uSelectedColor.rgb,gl_FragColor.a);}
#endif
}`,defines:h.enablePicked?["PICK"]:[]},this),this.vertexBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.uvBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Br({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),h=[{name:"position",buffer:this.vertexBuffer,size:3,stride:32,type:"FLOAT",offset:0},{name:"corner",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:12},{name:"size",buffer:this.vertexBuffer,size:2,stride:32,type:"FLOAT",offset:16},{name:"scale",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:24},{name:"rotation",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:28},{name:"aTextCoord",buffer:this.uvBuffer,size:2,stride:8,type:"FLOAT",offset:0}],h=h.concat(this.getCommonAttributes()),this.vertexArray=new Yi({gl:s,program:this.program,attributes:h})}},{key:"onDestroy",value:function(){}},{key:"onChanged",value:function(s,h){this.gl&&this.processCache(s,h)}},{key:"processCache",value:function(s,h){for(this.cachedData=[],this.geoRBush.clear(),s=0;s<h.length;s++){var _=h[s],x=this.normizedPoint(_.geometry.coordinates);x&&this.cachedData.push({point:x,item:_,extra:{},index:s})}this.geoRBush.load(this.cachedData)}},{key:"render",value:function(s){if(this.cachedData&&this.cachedData.length&&this.map){var h=s.gl,_=s.matrix,x=this.getOptions(),S=this.program;S.use(h),this.throttleUpdate(s),this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA],polygonOffset:x.polygonOffset,depthTest:x.depthTest,depthMask:x.depthWrite});var C=this.map.getZoomUnits();S.setUniforms(Lr(this.getCommonUniforms(s),{matrix:_,devicePixelRatio:window.devicePixelRatio,textureImage:this.texture,uFlat:x.flat,offset:x.offset,zoomUnits:C,zIndex:x.zIndex,uUnitPx:x.unit==="px"})),0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),h.drawElements(h.TRIANGLES,this.index.length,h.UNSIGNED_INT,0))}}},{key:"throttleUpdate",value:function(s){this.updateText(s)}},{key:"updateText",value:function(s){var h=s.gl,_=s.matrix,x=this.getOptions(),S=x.padding,C=x.margin,R=x.collides;s=x.enablePicked;var H=x.itemDimension,Z=x.beforeRenderAll,P=x.beforeComputeDimension;x=x.renderItem;var F=this.map.getBounds(),V=h.canvas.width/window.devicePixelRatio,j=h.canvas.height/window.devicePixelRatio,q=this.canvas;h=this.ctx,h.save(),h.scale(window.devicePixelRatio,window.devicePixelRatio),P&&P(h),P=F.getNorthEast(),F=F.getSouthWest();var ee=P.lng,Q=F.lng;for(ee<Q&&(ee+=360),F=this.geoRBush.search({minX:Q,minY:F.lat,maxX:ee,maxY:P.lat}),ee=new id,P=[],Q=0;Q<F.length;Q++){var ne=F[Q],le=ne.point,Ae=ne.item,Se=ne.extra;ne=ne.index;var Ie=Xi(le,3);Ie=Fo.clone([Ie[0],Ie[1],Ie[2],1]),Fo.transformMat4(Ie,Ie,_),Fo.scale(Ie,Ie,1/Ie[3]);var Be=(Ie[0]+1)/2*V,nt=(-Ie[1]+1)/2*j,rt=Array.isArray(H)?H:H(Ae,h,Se);Ie=rt[0]+2*S[0],rt=rt[1]+2*S[1];var St=Ie+C[0],Pt=rt+C[1];if(Be-=St/2,nt-=Pt/2,St=Be+St,Pt=nt+Pt,!(0>St||0>Pt||Be>V||nt>j)){if(R){if(Pt={minX:Be,maxX:St,minY:nt,maxY:Pt},ee.collides(Pt))continue;ee.insert(Pt)}P.push({w:Ie,h:rt,point:le,item:Ae,extra:Se,dataIndex:ne})}}for(h.restore(),S=ro(P),_=S.w,S=S.h,0>=_&&(_=1),0>=S&&(S=1),q.width=_*window.devicePixelRatio,q.height=S*window.devicePixelRatio,h.save(),h.scale(window.devicePixelRatio,window.devicePixelRatio),Z&&Z(h),Z=[],q=[],C=[],R=[],H=0,V=P.length;H<V;++H){for(j=P[H],x(j.item,j,h,j.extra),Q=Xi(j.point,3),F=Q[0],ee=Q[1],Q=Q[2],le=0;4>le;le++)Z.push(F,ee,Q),Z.push(le),Z.push(j.w,j.h),Z.push(1,0);F=j.x/_,ee=(j.x+j.w)/_,Q=(j.y+j.h)/S,le=j.y/S,q.push(F,Q,F,le,ee,le,ee,Q),F=4*H,C.push(F,F+2,F+1,F,F+3,F+2),s&&(j=this.indexToRgb(j.dataIndex),R.push(j[0]/255,j[1]/255,j[2]/255),R.push(j[0]/255,j[1]/255,j[2]/255),R.push(j[0]/255,j[1]/255,j[2]/255),R.push(j[0]/255,j[1]/255,j[2]/255))}h.restore(),this.loadTexture(),this.index=C,this.vertexBuffer.updateData(new Float32Array(Z)),this.uvBuffer.updateData(new Float32Array(q)),this.indexBuffer.updateData(new Uint32Array(C)),s&&this.pickBuffer.updateData(new Float32Array(R))}},{key:"loadTexture",value:function(){var s=this;this.canvas?pr(this.gl,this.canvas,function(h){s.texture=h},{TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"}):this.texture=null}}]),p}(ki),Yg=function(){function d(p,s){hr(this,d),this.name="Mask",this.webglLayer=p,this.options=s||{},this.bufferData=[],this.indices=[]}return Mr(d,[{key:"initialize",value:function(p){return this.gl=p,this.program=new Jn(this.gl,{vertexShader:"precision highp float;attribute vec2 a_position;uniform mat4 u_matrix;uniform float u_height;void main(){vec4 position=u_matrix*vec4(a_position.xy,u_height,1.0);gl_Position=position;}",fragmentShader:"precision highp float;uniform vec4 u_color;void main(){gl_FragColor=u_color;}",defines:[]},this),this.vertexBuffer=new Br({gl:p,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Br({gl:p,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.vertexArray=new Yi({gl:p,program:this.program,attributes:[{stride:8,name:"a_position",buffer:this.vertexBuffer,size:2,type:"FLOAT",offset:0}]}),this}},{key:"onDestroy",value:function(){this.bufferData=[],this.index=[]}},{key:"setData",value:function(p){var s=this;if(this.gl){for(var h=[],_=[],x=0;x<p.length;x++)if(p[x].geometry.coordinates){var S=[];if(p[x].geometry.type==="LineString"&&(S=[p[x].geometry.coordinates.map(function(Z){return s.normizedPoint(Z)})]),p[x].geometry.type==="MultiPolygon")for(var C=p[x].geometry.coordinates,R=0;R<C.length;R++)S=S.concat(C[R].map(function(Z){return Z.map(function(P){return s.normizedPoint(P)})}));else for(C=0;C<p[x].geometry.coordinates.length;C++)S.push(p[x].geometry.coordinates[C].map(function(Z){return s.normizedPoint(Z)}));C=Ut.flatten(S),S=C.vertices,C=C.holes,R=[];for(var H=0;H<S.length;H+=3)R.push(S[H+0],S[H+1]);this.parseBufferData(h,_,R,C)}return this.bufferData=h,this.index=_,this.vertexBuffer.updateData(new Float32Array(h)),this.indexBuffer.updateData(new Uint32Array(_)),this}}},{key:"parseBufferData",value:function(p,s,h,_){var x=p.length/2;for(_=_&&_.length?Ut(h,_,2):Ut(h),p.push.apply(p,Yn(h)),p=0;p<_.length;p++)s.push(_[p]+x)}},{key:"render",value:function(p){if(this.index&&this.index.length){var s=p.gl,h=p.matrix,_=this.options;p=this.program,p.use(s),h={u_matrix:h,u_height:_.height||0,u_color:this.normizedColor(_.color)},p.setUniforms(h),this.indexBuffer.bind(),this.vertexArray.bind(),s.drawElements(s.TRIANGLES,this.index.length,s.UNSIGNED_INT,0)}}},{key:"normizedColor",value:function(p){var s=p;return p instanceof Array||(s=W(p).unitArray()),s[3]===void 0&&(s[3]=1),s}},{key:"normizedPoint",value:function(p){var s=this.getPointOffset();if(!p||!p[0]||!p[1])return[s[0],s[1],0];var h=Number(p[0]),_=Number(p[1]);-180<=h&&180>=h&&-90<=_&&90>=_&&(_=this.webglLayer.map.lnglatToMercator(h,_),h=_[0],_=_[1]);var x=Number(p[2])||0;return this.webglLayer&&this.webglLayer.options.mapType==="cesium"&&window.Cesium?(h=this.convertLngLat([h,_]),x=window.Cesium.Cartesian3.fromDegrees(h[0],h[1],x),h=x.x,_=x.y,x=x.z):this.webglLayer&&this.webglLayer.options.mapType==="bmapgl"&&this.webglLayer.map.map.mapType==="B_EARTH_MAP"&&(h=this.convertLngLat([h,_]),x=this.webglLayer.map.map.getEarth().scene.fromLatLngToXYZ({lng:h[0],lat:h[1]}),h=x.x,_=x.y,x=x.z),3<p.length?[h-s[0],_-s[1],x].concat(Yn(p.slice(3))):[h-s[0],_-s[1],x]}},{key:"convertLngLat",value:function(p){return[p[0]/2003750834e-2*180,180/Math.PI*(2*Math.atan(Math.exp(p[1]/2003750834e-2*180*Math.PI/180))-Math.PI/2)]}},{key:"getPointOffset",value:function(){var p=[0,0],s=this.options;return this.webglLayer&&this.webglLayer.options.pointOffset?p=this.webglLayer.options.pointOffset:s.pointOffset&&(p=s.pointOffset),p}}]),d}(),ai=function(d){function p(s,h){return hr(this,p),ln(this,(p.__proto__||Dr(p)).call(this,s,h))}return sn(p,d),Mr(p,[{key:"getDefaultOptions",value:function(){return{}}},{key:"initialize",value:function(s){var h=this.getOptions();if(h.source&&h.source.image&&h.domain&&(typeof h.source.image=="string"||h.source.width&&h.source.height)){var _=h.refColors,x=h.refImage;if((_||x)&&(!_||_.colors&&_.positions)&&(!x||typeof x.url=="string")){this.gl=s;var S=[];_?this.imageData=Ir(_.colors,_.positions,_.clamp,_.color,_.height):(this.imageData={data:x.url},S.push("USE_IMAGE_TEXTURE"),this.imageTexture=!0),h.isTerrain&&(this.isTerrain=h.isTerrain,S.push("USE_TERRAIN"),this.gridRowMax=1600,h.gridRowMax&&(this.gridRowMax=h.gridRowMax),this.gridColMax=1600,h.gridColMax&&(this.gridColMax=h.gridColMax)),this.texture=null,_=`
        float generateValue(vec4 rgba){
            return rgba.r;
        }`,h.fomularC&&(_=h.fomularC),h=`precision highp float;attribute vec3 a_pos;attribute vec2 a_texture_coord;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;uniform sampler2D uTile;uniform float u_baseLine;uniform float u_elevationScale;varying vec2 v_texture_coord;void main(){v_texture_coord=a_texture_coord;vec3 pos=a_pos.xyz;
#if defined(USE_TERRAIN)
vec4 terrainColor=texture2D(uTile,vec2(a_texture_coord.s,a_texture_coord.t));float value=generateValue(terrainColor);float h=(value-u_baseLine)*u_elevationScale;pos.z=max(0.,h);
#endif
vec4 position=u_proj_matrix*u_mv_matrix*vec4(pos,1.0);gl_Position=position;}`.replace("void main()",_+`
void main()`),_=`precision highp float;varying vec2 v_texture_coord;uniform sampler2D uTile;uniform sampler2D uColorRamp;uniform bool uUseFilter;uniform vec4 uFilterColor;uniform float u_opacity;uniform float u_noData;uniform vec3 u_noTextureData;uniform vec2 u_clamp;uniform vec2 u_domain;uniform vec3 u_linearOpacity;uniform bool u_isOneBand;uniform float u_brightness;uniform float u_contrast;uniform float u_exposure;uniform float u_saturation;vec4 indexToRgba(float value){float index=value;float b=floor(index/65536.);index-=b*65536.;float g=floor(index/256.);index-=g*256.;float r=index;return vec4(r,g,b,255.);}vec3 adjustBrightness(vec3 color,float value){return color+value;}vec3 adjustContrast(vec3 color,float value){return 0.5+(1.0+value)*(color-0.5);}vec3 adjustExposure(vec3 color,float value){return color*(1.0+value);}vec3 adjustSaturation(vec3 color,float value){const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);vec3 grayscale=vec3(dot(color,luminosityFactor));return mix(grayscale,color,1.0+value);}void main(){vec4 data=texture2D(uTile,vec2(v_texture_coord.s,v_texture_coord.t));float value=generateValue(data);vec4 textureColor=vec4(0,0,0,0);if(value>=u_clamp.s&&value<=u_clamp.t){float normalisedValue=(value-u_domain.s)/(u_domain.t-u_domain.s);
#if defined(USE_IMAGE_TEXTURE)
vec4 color=texture2D(uColorRamp,vec2(v_texture_coord.s,v_texture_coord.t));if(vec3(color.rgb)==u_noTextureData){color=vec4(0,0,0,0);}
#else
vec4 color=texture2D(uColorRamp,vec2(normalisedValue,0));
#endif
color.a=smoothstep(u_linearOpacity.s,u_linearOpacity.t,color.a*normalisedValue)+u_linearOpacity.p;textureColor=color;textureColor.a=textureColor.a*u_opacity;vec3 mixColor=adjustBrightness(textureColor.rgb,u_brightness);mixColor=adjustContrast(mixColor,u_contrast);mixColor=adjustExposure(mixColor,u_exposure);mixColor=adjustSaturation(mixColor,u_saturation);textureColor=vec4(mixColor,textureColor.a);if(uIsPickRender&&u_isOneBand){textureColor=indexToRgba(value)/255.;}if(uIsPickRender&&!u_isOneBand){textureColor=data;}}if(value==u_noData){textureColor=vec4(0,0,0,0);}if(uUseFilter){textureColor=textureColor*uFilterColor;}gl_FragColor=textureColor;}`.replace("void main()",_+`
void main()`),this.program=new Jn(this.gl,{vertexShader:h,fragmentShader:_,defines:S},this),this.vertexBuffer=new Br({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Br({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.vertexArray=new Yi({gl:s,program:this.program,attributes:[{name:"a_pos",buffer:this.vertexBuffer,stride:20,size:3,type:"FLOAT",offset:0},{name:"a_texture_coord",buffer:this.vertexBuffer,size:2,stride:20,type:"FLOAT",offset:12}]})}}}},{key:"onChanged",value:function(s,h){var _=this;this.gl&&(this.loadDataTexture&&clearTimeout(this.loadDataTexture),this.loadDataTexture=setTimeout(function(){_.loadTexture(function(){_.parseData(h),_.webglLayer.render()})},0))}},{key:"drawMask",value:function(s){var h=s.gl,_=s.matrix,x=s.projectionMatrix,S=s.viewMatrix;if(s=s.polygons){var C=new Yg(this.webglLayer,{color:"rgba(19, 14, 7, 0.8)"});this.setGLState({stencilTest:!0,depthTest:!1,depthMask:!1}),h.clear(h.STENCIL_BUFFER_BIT),h.stencilFunc(h.ALWAYS,1,255),h.stencilOp(h.KEEP,h.KEEP,h.REPLACE),h.colorMask(!1,!1,!1,!1),C.initialize(h).setData(s).render({gl:h,matrix:_,projectionMatrix:x,viewMatrix:S})}}},{key:"onOptionsChanged",value:function(s,h){this.gl&&(this.initialize(this.gl),this.loadTexture(),this.webglLayer.render())}},{key:"render",value:function(s){var h=s.gl,_=s.matrix,x=s.projectionMatrix,S=s.viewMatrix,C=s.isPickRender;s=this.getOptions();var R=this.program;(R||this.texture)&&(s.stencilData&&this.drawMask({gl:h,matrix:_,projectionMatrix:x,viewMatrix:S,polygons:s.stencilData}),this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA],stencilTest:!!s.stencilData,depthTest:s.depthTest,depthMask:s.depthMask}),R.use(h),s.stencilData&&(h.stencilFunc(h.EQUAL,1,1),h.stencilOp(h.KEEP,h.KEEP,h.KEEP),h.colorMask(!0,!0,!0,!0)),this.colorRamp&&this.texture&&(_=[0,0,0],s.linearOpacity&&this.formaLinear(s.linearOpacity,_),x={uColorRamp:this.colorRamp,uTile:this.texture,u_proj_matrix:x,uUseFilter:!!s.filterColor,uFilterColor:this.normizedColor(s.filterColor||"rgba(0, 0, 100, 1.0)"),u_mv_matrix:S,uIsPickRender:!!C,u_noData:s.noData||-99999,u_domain:s.domain,u_clamp:s.clamp?s.clamp:s.domain,u_linearOpacity:_,u_opacity:s.opacity||1,u_isOneBand:!!this.isOneBand,u_brightness:s.brightness||0,u_contrast:s.contrast||0,u_exposure:s.exposure||0,u_saturation:s.saturation||0},this.isTerrain&&(x.u_baseLine=s.baseLine||0,x.u_elevationScale=s.elevationScale||1),this.imageTexture&&(x.u_noTextureData=s.baseLine||0),R.setUniforms(x),this.index&&0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),h.drawElements(h.TRIANGLES,this.index.length,h.UNSIGNED_INT,0)),s.stencilData&&!s.stencilAfter&&(h.clear(h.STENCIL_BUFFER_BIT),h.stencilMask(255),h.stencilFunc(h.ALWAYS,1,255))))}},{key:"onDestroy",value:function(){this.texturePixels=this.texture=this.colorRamp=this.indexBuffer=this.vertexBuffer=this.index=this.program=null}},{key:"pickAfter",value:function(s,h){var _,x;return this.isOneBand?(h=_=x=h,s=1):(h=s[0],_=s[1],x=s[2],s=s[3]),this.getOptions().fomularJS?this.getOptions().fomularJS({r:h,g:_,b:x,a:s}):h}},{key:"formaLinear",value:function(s,h){s.start&&(h[0]=s.start||0),s.end&&(h[1]=s.end||0),s.base&&(h[2]=s.base||0)}},{key:"loadTexture",value:function(s){var h=this,_=this.getOptions();_.source.image&&this.imageData?pr(this.gl,this.imageData.data,function(x,S){h.colorRamp=x,Ta(_.source.image)==="object"?(h.isOneBand=!0,pr(h.gl,_.source.image,function(C,R,H){h.texture=C,h.texturePixels=H,h.textureWidth=H.width,h.textureHeight=H.height,s&&s(),h.webglLayer.render()},{TEXTURE_MIN_FILTER:"NEAREST",TEXTURE_MAG_FILTER:"NEAREST",TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"},{width:_.source.width,height:_.source.height,format:"LUMINANCE",type:"FLOAT"})):(h.isOneBand=!1,pr(h.gl,_.source.image,function(C,R,H){h.texture=C,h.texturePixels=H,h.textureWidth=H.width,h.textureHeight=H.height,s&&s(),h.webglLayer.render()},{TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"}))},{TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"},{width:this.imageData.width,height:this.imageData.height,flipY:!0,format:"RGBA",type:"UNSIGNED_BYTE"}):(this.texture=null,s&&s())}},{key:"parseData",value:function(s){var h=this;if(this.vertexBuffer){var _=[],x=[];if(s&&s[0]){var S=s[0].geometry.coordinates[0];S=S.map(function(ee){return h.normizedPoint(ee)}),s=S[0][0];var C=S[0][1],R=S[2][0],H=S[2][1];this.bound=[s,C,R,H],this.gridRowMax>this.textureHeight&&(this.gridRowMax=this.textureHeight),this.gridColMax>this.textureWidth&&(this.gridColMax=this.textureWidth),S=this.isTerrain?this.gridColMax:1;var Z=this.isTerrain?this.gridRowMax:1,P=S+1;R=(R-s)/S,H=(H-C)/Z;for(var F=0;F<=Z;F++)for(var V=0;V<=S;V++)if(_.push(s+R*V,C+H*F,0),_.push(V/S,F/Z),V<S&&F<Z){var j=P*F+V,q=P*(F+1)+V;x.push(j,q+1,j+1),x.push(j,q,q+1)}}this.index=x,this.vertexBuffer.updateData(new Float32Array(_)),this.indexBuffer.updateData(new Uint32Array(x))}}},{key:"getValue",value:function(s,h){return this.isTerrain&&s&&this.bound&&(s=this.normizedPoint(s),this.containsPoint(s,this.bound)&&(s=this.uvPoint(s,this.bound),h=this.pixelByUV(s,h,this.getOptions().fomularJS),h.result))?h:0}},{key:"containsPoint",value:function(s,h){if(s)return s[0]>=h[0]&&s[0]<=h[2]&&s[1]>=h[1]&&s[1]<=h[3]}},{key:"uvPoint",value:function(s,h){if(s)return[(s[0]-h[0])/(h[2]-h[0]),(h[3]-s[1])/(h[3]-h[1])]}},{key:"pixelByUV",value:function(s,h,_){if(this.texturePixels){var x=this.texturePixels,S=x.width,C=x.height,R=x.data,H=Math.floor(s[0]*(S-1));s=Math.floor(s[1]*(C-1));var Z=1;return x.type==="RGBA"&&(Z=4),this._getPixelBound(H,s,h,S,C,R,Z,_)}return null}},{key:"_getPixelBound",value:function(s,h,_,x,S,C,R,H){var Z=s-_;0>Z&&(Z=0),s+=_,s>x-1&&(s=x-1);var P=h-_;0>P&&(P=0),h+=_,h>S-1&&(h=S-1),_=S=0;for(var F=[0,0,0,1],V=Z;V<=s;V++)for(var j=P;j<=h;j++){var q=(j*x+V)*R,ee=C[q],Q=C[q+this.min(0,R-3)],ne=C[q+this.min(0,R-2)];q=R===4?C[q+3]:1;var le=H?H({r:ee,g:Q,b:ne,a:q}):ee;le>S&&(S=le,F=[ee,Q,ne,q]),_+=le}return{result:_/((s-Z+1)*(h-P+1)),pixel:F,max:S}}},{key:"min",value:function(s,h){return h<s?s:h}}]),p}(ki);window._hmt_private||(window._hmt=window._hmt||[],function(){var d=document.createElement("script");d.src="https://hm.baidu.com/hm.js?e8002ef3d9e0d8274b5b74cc4a027d08";var p=document.getElementsByTagName("script")[0];p.parentNode.insertBefore(d,p)}()),a.version="1.0.0-beta.191",a.View=d2,a.CanvasLayer=u,a.CircleLayer=function d(){var p=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return hr(this,d),a_.includes(p.type)?new o_(p):new i_(p)},a.GridLayer=u_,a.HeatGridLayer=v2,a.ShapeLayer=Pp,a.SimpleLineLayer=Fg,a.LineLayer3D=f_,a.LineLayer=y2,a.LineRainbowLayer=tc,a.WallSpriteLayer=W0,a.LinePointLayer=cd,a.WallLayer=Vg,a.WallTripLayer=F2,a.HeatLineLayer=rI,a.HoneycombLayer=ey,a.WebglLayer=Rp,a.PointLayer=Wg,a.GroundRippleLayer=nI,a.RippleLayer=S_,a.SparkLayer=T_,a.ClusterLayer=iI,a.IconClusterLayer=oI,a.HeatPointLayer=B2,a.ShapeLineLayer=aI,a.PointTripLayer=Qc,a.LineTripLayer=va,a.IconCollidesLayer=sI,a.LineFlowLayer=Zi,a.TileLayer=z2,a.IconLayer=ty,a.BoardLayer=lI,a.PolygonLayer=uI,a.CarLineLayer=gI,a.Layer=ki,a.TextLayer=Yc,a.BoardTextLayer=lf,a.LabelLayer=vI,a.TrafficLayer=yI,a.GltfLayer=Rn,a.HeatmapLayer=xI,a.BarLayer=kp,a.MarkerListLayer=AI,a.MaskLayer=wI,a.PointCanvasCustomLayer=is,a.PixelLayer=ai,a.FXAA=u2,a.SMAA=e_,a.BlurEffect=t_,a.BloomEffect=eI,a.BrightEffect=Pg,a.DepthEffect=U0,a.EffectManager=Xc,a.getContext=Ht,a.createTexture=Rt,a.loadTextureImage=pr,a.getBlend=Cr,a.FrameBufferObject=La,a.Program=Jn,a.StateManager=l2,a.Buffer=Br,a.VertexArray=Yi,a.CommonLayer=k0,a.MercatorProjection=_e,a.Canvas=We,a.Intensity=Xe,a.BezierCurve=et,a.GeodesicCurve=at,a.OdCurve=Uc,a.utilCity={getProvinceNameByCityName:function(d){for(var p=0;p<qu.length;p++)for(var s=qu[p].n,h=qu[p].cities,_=0;_<h.length;_++)if(h[_].n==d)return s;return null},getCenterByCityName:function(d){d=d.replace("市","");for(var p=0;p<gg.length;p++)if(gg[p].n==d)return ct(gg[p].g);for(p=0;p<vg.length;p++)if(vg[p].n==d)return ct(vg[p].g);for(p=0;p<qu.length;p++){if(qu[p].n==d)return ct(qu[p].g);for(var s=qu[p].cities,h=0;h<s.length;h++)if(s[h].n==d)return ct(s[h].g)}return null}},a.isMobile=kc,a.isIOSMobile=yg,a.Encryptor={encode:function(d){d=t2.deflateRaw(d);for(var p=[],s=0;s<d.length;s++)p.push(d[s]^23);return new Uint8Array(p)},decode:function(d){d=new Uint8Array(d);for(var p=[],s=0;s<d.length;s++)p.push(d[s]^23);d=new Uint8Array(p);try{var h=window.flate.deflate_decode_raw(d);return new TextDecoder("utf-8").decode(h)}catch{return console.warn("inflate by pako!"),t2.inflateRaw(d,{to:"string"})}},download:function(d,p){var s=new Blob([d],{type:"application/octet-binary"});d=document.createElement("a"),s=window.URL.createObjectURL(s),d.href=s,d.download=p||"mapvgl_download",d.click()}},a.createFusionView=function(d,p){var s=void 0,h=!1;d.addEventListener("glmoduleloaded",function(_){h||(h=!0,setTimeout(function(){s=new d2({cameraNear:10,cameraFar:4e3,gl:d._webglPainter.gl,canvas:d._webglPainter.gl.canvas,autoUpdate:!1,map:d}),s.webglLayer.canvas.style.zIndex=1;var x=s.webglLayer.stateManager;d.insertRender=function(){x.setState({blend:!0,depthTest:!1}),s.render()},p&&p(s)},3e3))}),setTimeout(function(){if(!h&&d._webglMapScene&&d._webglPainter&&d._webglPainter.gl&&d._webglPainter.gl.canvas){h=!0,s=new d2({cameraNear:10,cameraFar:4e3,gl:d._webglPainter.gl,canvas:d._webglPainter.gl.canvas,autoUpdate:!1,map:d}),s.webglLayer.canvas.style.zIndex=1;var _=s.webglLayer.stateManager;d.insertRender=function(){_.setState({blend:!0,depthTest:!1}),s.render()},p&&p(s)}},4e3)},a.toRadian=he,a.toAngle=oe,a.ceilPowerOfTwo=me,a.floorPowerOfTwo=ge,a.approximatelyEqual=de,a.isClosed=ce,a.generateColorRamp=Ir,a.__moduleExports=Ha,a.vec4=Fo,a.vec3=dn,a.vec2=Qn,a.quat2=K3,a.quat=Lg,a.mat4=Er,a.mat3=a2,a.mat2d=J3,a.mat2=s2,a.glMatrix=Q3,Object.defineProperty(a,"__esModule",{value:!0})})})(M4,M4.exports);var B3=M4.exports;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ViewContext=void 0;var i=xo,a=B3,u=i.__importStar(ie),m=dl,M=Uu;t.ViewContext=u.default.createContext({view:void 0});var L=function(z){i.__extends(U,z);function U(W){return z.call(this,W)||this}return U.prototype.componentDidMount=function(){this.initialize(),this.forceUpdate()},U.prototype.componentWillUnmount=function(){this.view&&(this.view.destroy(),this.view=null)},U.prototype.componentDidUpdate=function(W){(!this.map||!this.view)&&this.initialize()},U.prototype.initialize=function(){var W=this.map=this.getMap();if(!(!W||this.view)&&!this.view){var J=[],te=this.props.effects,ae=this.props.preserveDrawingBuffer;te&&te.length&&te.forEach(function(ve){ve==="bloom"?J.push(new a.BloomEffect):ve==="bright"?J.push(new a.BrightEffect):ve==="blur"&&J.push(new a.BlurEffect)}),this.view=new a.View({effects:J,preserveDrawingBuffer:ae,map:W})}},U.prototype.renderChildren=function(W){var J=this;if(!(!W||!this.map||!this.view))return u.default.Children.map(W,function(te){if(te)return typeof te.type=="string"?te:u.default.cloneElement(te,{map:J.map,view:J.view})})},U.prototype.render=function(){return u.default.createElement(u.Fragment,null,u.default.createElement(t.ViewContext.Provider,{value:{map:this.map,view:this.view}},this.renderChildren(this.props.children)))},U.contextType=M.MapContext,U}(m.Component);t.default=L})(UD);var kD={},vT={exports:{}},r8;function xse(){return r8||(r8=1,function(t,i){(function(a,u){u(i)})(H1,function(a){function u(){throw Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function m(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function M(e,n){return n={exports:{}},e(n,n.exports),n.exports}function L(e){var n,o;this.promise=new e(function(c,v){if(n!==void 0||o!==void 0)throw TypeError("Bad Promise constructor");n=c,o=v}),this.resolve=Qh(n),this.reject=Qh(o)}function z(){}function U(e,n){this.x=e||0,this.y=n||0}function W(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function J(e,n,o,c,v,g,A,y,T,D){Object.defineProperty(this,"id",{value:s++}),this.uuid=ai.generateUUID(),this.name="",this.image=e!==void 0?e:J.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=n!==void 0?n:J.DEFAULT_MAPPING,this.wrapS=o!==void 0?o:1001,this.wrapT=c!==void 0?c:1001,this.magFilter=v!==void 0?v:1006,this.minFilter=g!==void 0?g:1008,this.anisotropy=T!==void 0?T:1,this.format=A!==void 0?A:1023,this.internalFormat=null,this.type=y!==void 0?y:1009,this.offset=new U(0,0),this.repeat=new U(1,1),this.center=new U(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new W,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=D!==void 0?D:3e3,this.version=0,this.onUpdate=null}function te(e,n,o,c){this.x=e||0,this.y=n||0,this.z=o||0,this.w=c!==void 0?c:1}function ae(e,n,o){this.width=e,this.height=n,this.scissor=new te(0,0,e,n),this.scissorTest=!1,this.viewport=new te(0,0,e,n),o=o||{},this.texture=new J(void 0,o.mapping,o.wrapS,o.wrapT,o.magFilter,o.minFilter,o.format,o.type,o.anisotropy,o.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=n,this.texture.generateMipmaps=o.generateMipmaps!==void 0?o.generateMipmaps:!1,this.texture.minFilter=o.minFilter!==void 0?o.minFilter:1006,this.depthBuffer=o.depthBuffer!==void 0?o.depthBuffer:!0,this.stencilBuffer=o.stencilBuffer!==void 0?o.stencilBuffer:!0,this.depthTexture=o.depthTexture!==void 0?o.depthTexture:null}function ve(e,n,o){ae.call(this,e,n,o),this.samples=4}function he(e,n,o,c){this._x=e||0,this._y=n||0,this._z=o||0,this._w=c!==void 0?c:1}function oe(e,n,o){this.x=e||0,this.y=n||0,this.z=o||0}function me(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function ge(e,n,o,c){this._x=e||0,this._y=n||0,this._z=o||0,this._order=c||ge.DefaultOrder}function de(){this.mask=1}function ce(){Object.defineProperty(this,"id",{value:j++}),this.uuid=ai.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ce.DefaultUp.clone();var e=new oe,n=new ge,o=new he,c=new oe(1,1,1);n._onChange(function(){o.setFromEuler(n,!1)}),o._onChange(function(){n.setFromQuaternion(o,void 0,!1)}),Rn(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:o},scale:{configurable:!0,enumerable:!0,value:c},modelViewMatrix:{value:new me},normalMatrix:{value:new W}}),this.matrix=new me,this.matrixWorld=new me,this.matrixAutoUpdate=ce.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new de,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function _e(){ce.call(this),this.type="Scene",this.overrideMaterial=this.fog=this.environment=this.background=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Re(e,n){this.min=e!==void 0?e:new oe(1/0,1/0,1/0),this.max=n!==void 0?n:new oe(-1/0,-1/0,-1/0)}function Ee(e,n,o,c,v){var g,A=0;for(g=e.length-3;A<=g;A+=3){qi.fromArray(e,A);var y=v.x*Math.abs(qi.x)+v.y*Math.abs(qi.y)+v.z*Math.abs(qi.z),T=n.dot(qi),D=o.dot(qi),X=c.dot(qi);if(Math.max(-Math.max(T,D,X),Math.min(T,D,X))>y)return!1}return!0}function De(e,n){this.center=e!==void 0?e:new oe,this.radius=n!==void 0?n:-1}function We(e,n){this.origin=e!==void 0?e:new oe,this.direction=n!==void 0?n:new oe(0,0,-1)}function Xe(e,n){this.normal=e!==void 0?e:new oe(1,0,0),this.constant=n!==void 0?n:0}function et(e,n,o){this.a=e!==void 0?e:new oe,this.b=n!==void 0?n:new oe,this.c=o!==void 0?o:new oe}function Ye(e,n,o){return n===void 0&&o===void 0?this.set(e):this.setRGB(e,n,o)}function at(e,n,o){return 0>o&&(o+=1),1<o&&--o,o<1/6?e+6*(n-e)*o:.5>o?n:o<2/3?e+6*(n-e)*(2/3-o):e}function ot(e){return .04045>e?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function ct(e){return .0031308>e?12.92*e:1.055*Math.pow(e,.41666)-.055}function Dt(e,n,o,c,v,g){this.a=e,this.b=n,this.c=o,this.normal=c&&c.isVector3?c:new oe,this.vertexNormals=Array.isArray(c)?c:[],this.color=v&&v.isColor?v:new Ye,this.vertexColors=Array.isArray(v)?v:[],this.materialIndex=g!==void 0?g:0}function $e(){Object.defineProperty(this,"id",{value:gG++}),this.uuid=ai.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=this.flatShading=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null,this.depthFunc=3,this.depthWrite=this.depthTest=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilZPass=this.stencilZFail=this.stencilFail=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipShadows=this.clipIntersection=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.toneMapped=this.visible=!0,this.userData={},this.version=0}function tt(e){$e.call(this),this.type="MeshBasicMaterial",this.color=new Ye(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphTargets=this.skinning=!1,this.setValues(e)}function Ve(e,n,o){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=o===!0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}function gt(e,n,o){Ve.call(this,new Int8Array(e),n,o)}function mt(e,n,o){Ve.call(this,new Uint8Array(e),n,o)}function dt(e,n,o){Ve.call(this,new Uint8ClampedArray(e),n,o)}function At(e,n,o){Ve.call(this,new Int16Array(e),n,o)}function jt(e,n,o){Ve.call(this,new Uint16Array(e),n,o)}function ar(e,n,o){Ve.call(this,new Int32Array(e),n,o)}function Ht(e,n,o){Ve.call(this,new Uint32Array(e),n,o)}function Rt(e,n,o){Ve.call(this,new Float32Array(e),n,o)}function pr(e,n,o){Ve.call(this,new Float64Array(e),n,o)}function Cr(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function Ir(e){if(e.length===0)return-1/0;for(var n=e[0],o=1,c=e.length;o<c;++o)e[o]>n&&(n=e[o]);return n}function Ut(){Object.defineProperty(this,"id",{value:vG+=2}),this.uuid=ai.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingSphere=this.boundingBox=null,this.drawRange={start:0,count:1/0},this.userData={}}function _r(e,n){ce.call(this),this.type="Mesh",this.geometry=e!==void 0?e:new Ut,this.material=n!==void 0?n:new tt,this.updateMorphTargets()}function Bn(e,n,o,c,v,g,A,y){return(n.side===1?c.intersectTriangle(A,g,v,!0,y):c.intersectTriangle(v,g,A,n.side!==2,y))===null?null:(k_.copy(y),k_.applyMatrix4(e.matrixWorld),n=o.ray.origin.distanceTo(k_),n<o.near||n>o.far?null:{distance:n,point:k_.clone(),object:e})}function bn(e,n,o,c,v,g,A,y,T,D,X,I){if(Hp.fromBufferAttribute(v,D),jp.fromBufferAttribute(v,X),Gp.fromBufferAttribute(v,I),v=e.morphTargetInfluences,n.morphTargets&&g&&v){B_.set(0,0,0),z_.set(0,0,0),U_.set(0,0,0);for(var b=0,N=g.length;b<N;b++){var k=v[b],G=g[b];k!==0&&(PI.fromBufferAttribute(G,D),OI.fromBufferAttribute(G,X),DI.fromBufferAttribute(G,I),A?(B_.addScaledVector(PI,k),z_.addScaledVector(OI,k),U_.addScaledVector(DI,k)):(B_.addScaledVector(PI.sub(Hp),k),z_.addScaledVector(OI.sub(jp),k),U_.addScaledVector(DI.sub(Gp),k)))}Hp.add(B_),jp.add(z_),Gp.add(U_)}return e.isSkinnedMesh&&(e.boneTransform(D,Hp),e.boneTransform(X,jp),e.boneTransform(I,Gp)),(e=Bn(e,n,o,c,Hp,jp,Gp,W2))&&(y&&(ay.fromBufferAttribute(y,D),sy.fromBufferAttribute(y,X),ly.fromBufferAttribute(y,I),e.uv=et.getUV(W2,Hp,jp,Gp,ay,sy,ly,new U)),T&&(ay.fromBufferAttribute(T,D),sy.fromBufferAttribute(T,X),ly.fromBufferAttribute(T,I),e.uv2=et.getUV(W2,Hp,jp,Gp,ay,sy,ly,new U)),y=new Dt(D,X,I),et.getNormal(Hp,jp,Gp,y.normal),e.face=y),e}function ur(){Object.defineProperty(this,"id",{value:yG+=2}),this.uuid=ai.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function jn(e){var n={},o;for(o in e){n[o]={};for(var c in e[o]){var v=e[o][c];v&&(v.isColor||v.isMatrix3||v.isMatrix4||v.isVector2||v.isVector3||v.isVector4||v.isTexture)?n[o][c]=v.clone():Array.isArray(v)?n[o][c]=v.slice():n[o][c]=v}}return n}function An(e){for(var n={},o=0;o<e.length;o++){var c=jn(e[o]),v;for(v in c)n[v]=c[v]}return n}function en(e){$e.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,this.fragmentShader=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function Fn(){ce.call(this),this.type="Camera",this.matrixWorldInverse=new me,this.projectionMatrix=new me,this.projectionMatrixInverse=new me}function lr(e,n,o,c){Fn.call(this),this.type="PerspectiveCamera",this.fov=e!==void 0?e:50,this.zoom=1,this.near=o!==void 0?o:.1,this.far=c!==void 0?c:2e3,this.focus=10,this.aspect=n!==void 0?n:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function er(e,n,o){if(ce.call(this),this.type="CubeCamera",o.isWebGLCubeRenderTarget!==!0)console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");else{this.renderTarget=o;var c=new lr(90,1,e,n);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new oe(1,0,0)),this.add(c);var v=new lr(90,1,e,n);v.layers=this.layers,v.up.set(0,-1,0),v.lookAt(new oe(-1,0,0)),this.add(v);var g=new lr(90,1,e,n);g.layers=this.layers,g.up.set(0,0,1),g.lookAt(new oe(0,1,0)),this.add(g);var A=new lr(90,1,e,n);A.layers=this.layers,A.up.set(0,0,-1),A.lookAt(new oe(0,-1,0)),this.add(A);var y=new lr(90,1,e,n);y.layers=this.layers,y.up.set(0,-1,0),y.lookAt(new oe(0,0,1)),this.add(y);var T=new lr(90,1,e,n);T.layers=this.layers,T.up.set(0,-1,0),T.lookAt(new oe(0,0,-1)),this.add(T),this.update=function(D,X){this.parent===null&&this.updateMatrixWorld();var I=D.xr.enabled,b=D.getRenderTarget();D.xr.enabled=!1;var N=o.texture.generateMipmaps;o.texture.generateMipmaps=!1,D.setRenderTarget(o,0),D.render(X,c),D.setRenderTarget(o,1),D.render(X,v),D.setRenderTarget(o,2),D.render(X,g),D.setRenderTarget(o,3),D.render(X,A),D.setRenderTarget(o,4),D.render(X,y),o.texture.generateMipmaps=N,D.setRenderTarget(o,5),D.render(X,T),D.setRenderTarget(b),D.xr.enabled=I},this.clear=function(D,X,I,b){for(var N=D.getRenderTarget(),k=0;6>k;k++)D.setRenderTarget(o,k),D.clear(X,I,b);D.setRenderTarget(N)}}}function cn(e,n,o){kp(n)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),n=o),ae.call(this,e,e,n)}function oi(e,n,o,c,v,g,A,y,T,D,X,I){J.call(this,null,g,A,y,T,D,c,v,X,I),this.image={data:e||null,width:n||1,height:o||1},this.magFilter=T!==void 0?T:1003,this.minFilter=D!==void 0?D:1003,this.flipY=this.generateMipmaps=!1,this.unpackAlignment=1,this.needsUpdate=!0}function xn(e,n,o,c,v,g){this.planes=[e!==void 0?e:new Xe,n!==void 0?n:new Xe,o!==void 0?o:new Xe,c!==void 0?c:new Xe,v!==void 0?v:new Xe,g!==void 0?g:new Xe]}function qn(){function e(v,g){o!==!1&&(c(v,g),n.requestAnimationFrame(e))}var n=null,o=!1,c=null;return{start:function(){o!==!0&&c!==null&&(n.requestAnimationFrame(e),o=!0)},stop:function(){o=!1},setAnimationLoop:function(v){c=v},setContext:function(v){n=v}}}function Dn(e,n){function o(g,A){var y=g.array,T=g.usage,D=e.createBuffer();return e.bindBuffer(A,D),e.bufferData(A,y,T),g.onUploadCallback(),A=5126,y instanceof Float32Array?A=5126:y instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):y instanceof Uint16Array?A=5123:y instanceof Int16Array?A=5122:y instanceof Uint32Array?A=5125:y instanceof Int32Array?A=5124:y instanceof Int8Array?A=5120:y instanceof Uint8Array&&(A=5121),{buffer:D,type:A,bytesPerElement:y.BYTES_PER_ELEMENT,version:g.version}}var c=n.isWebGL2,v=new co;return{get:function(g){return g.isInterleavedBufferAttribute&&(g=g.data),v.get(g)},remove:function(g){g.isInterleavedBufferAttribute&&(g=g.data);var A=v.get(g);A&&(e.deleteBuffer(A.buffer),v.delete(g))},update:function(g,A){g.isInterleavedBufferAttribute&&(g=g.data);var y=v.get(g);if(y===void 0)v.set(g,o(g,A));else if(y.version<g.version){var T=g.array,D=g.updateRange;e.bindBuffer(A,y.buffer),D.count===-1?e.bufferSubData(A,0,T):(c?e.bufferSubData(A,D.offset*T.BYTES_PER_ELEMENT,T,D.offset,D.count):e.bufferSubData(A,D.offset*T.BYTES_PER_ELEMENT,T.subarray(D.offset,D.offset+D.count)),D.count=-1),y.version=g.version}}}}function mn(e,n,o,c){ur.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:o,heightSegments:c},this.fromBufferGeometry(new pi(e,n,o,c)),this.mergeVertices()}function pi(e,n,o,c){Ut.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:n,widthSegments:o,heightSegments:c},e=e||1,n=n||1;var v=e/2,g=n/2;o=Math.floor(o)||1,c=Math.floor(c)||1;var A=o+1,y=c+1,T=e/o,D=n/c,X=[],I=[],b=[],N=[];for(e=0;e<y;e++){var k=e*D-g;for(n=0;n<A;n++)I.push(n*T-v,-k,0),b.push(0,0,1),N.push(n/o),N.push(1-e/c)}for(e=0;e<c;e++)for(n=0;n<o;n++)v=n+A*(e+1),g=n+1+A*(e+1),y=n+1+A*e,X.push(n+A*e,v,y),X.push(v,g,y);this.setIndex(X),this.setAttribute("position",new Rt(I,3)),this.setAttribute("normal",new Rt(b,3)),this.setAttribute("uv",new Rt(N,2))}function ui(e,n,o,c){function v(b,N){n.buffers.color.setClear(b.r,b.g,b.b,N,c)}var g=new Ye(0),A=0,y,T,D=null,X=0,I=null;return{getClearColor:function(){return g},setClearColor:function(b,N){g.set(b),A=N!==void 0?N:1,v(g,A)},getClearAlpha:function(){return A},setClearAlpha:function(b){A=b,v(g,A)},render:function(b,N,k,G){N=N.background,k=e.xr,(k=k.getSession&&k.getSession())&&k.environmentBlendMode==="additive"&&(N=null),N===null?v(g,A):N&&N.isColor&&(v(N,1),G=!0),(e.autoClear||G)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),N&&(N.isCubeTexture||N.isWebGLCubeRenderTarget||N.mapping===306)?(T===void 0&&(T=new _r(new j_(1,1,1),new en({type:"BackgroundCubeMaterial",uniforms:jn(dd.cube.uniforms),vertexShader:dd.cube.vertexShader,fragmentShader:dd.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),T.geometry.deleteAttribute("normal"),T.geometry.deleteAttribute("uv"),T.onBeforeRender=function(re,se,ue){this.matrixWorld.copyPosition(ue.matrixWorld)},Object.defineProperty(T.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(T)),G=N.isWebGLCubeRenderTarget?N.texture:N,T.material.uniforms.envMap.value=G,T.material.uniforms.flipEnvMap.value=G.isCubeTexture?-1:1,(D!==N||X!==G.version||I!==e.toneMapping)&&(T.material.needsUpdate=!0,D=N,X=G.version,I=e.toneMapping),b.unshift(T,T.geometry,T.material,0,0,null)):N&&N.isTexture&&(y===void 0&&(y=new _r(new pi(2,2),new en({type:"BackgroundMaterial",uniforms:jn(dd.background.uniforms),vertexShader:dd.background.vertexShader,fragmentShader:dd.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),y.geometry.deleteAttribute("normal"),Object.defineProperty(y.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(y)),y.material.uniforms.t2D.value=N,N.matrixAutoUpdate===!0&&N.updateMatrix(),y.material.uniforms.uvTransform.value.copy(N.matrix),(D!==N||X!==N.version||I!==e.toneMapping)&&(y.material.needsUpdate=!0,D=N,X=N.version,I=e.toneMapping),b.unshift(y,y.geometry,y.material,0,0,null))}}}function hn(e,n,o,c){var v=c.isWebGL2,g;this.setMode=function(A){g=A},this.render=function(A,y){e.drawArrays(g,A,y),o.update(y,g)},this.renderInstances=function(A,y,T,D){if(D!==0){if(v){A=e;var X="drawArraysInstanced"}else if(A=n.get("ANGLE_instanced_arrays"),X="drawArraysInstancedANGLE",A===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}A[X](g,y,T,D),o.update(T,g,D)}}}function Kn(e,n,o){function c(we){if(we==="highp"){if(0<e.getShaderPrecisionFormat(35633,36338).precision&&0<e.getShaderPrecisionFormat(35632,36338).precision)return"highp";we="mediump"}return we==="mediump"&&0<e.getShaderPrecisionFormat(35633,36337).precision&&0<e.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var v,g=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&e instanceof WebGL2ComputeRenderingContext,A=o.precision!==void 0?o.precision:"highp",y=c(A);y!==A&&(console.warn("THREE.WebGLRenderer:",A,"not supported, using",y,"instead."),A=y),o=o.logarithmicDepthBuffer===!0,y=e.getParameter(34930);var T=e.getParameter(35660),D=e.getParameter(3379),X=e.getParameter(34076),I=e.getParameter(34921),b=e.getParameter(36347),N=e.getParameter(36348),k=e.getParameter(36349),G=0<T,re=g||!!n.get("OES_texture_float"),se=G&&re,ue=g?e.getParameter(36183):0;return{isWebGL2:g,getMaxAnisotropy:function(){if(v!==void 0)return v;var we=n.get("EXT_texture_filter_anisotropic");return v=we!==null?e.getParameter(we.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:c,precision:A,logarithmicDepthBuffer:o,maxTextures:y,maxVertexTextures:T,maxTextureSize:D,maxCubemapSize:X,maxAttributes:I,maxVertexUniforms:b,maxVaryings:N,maxFragmentUniforms:k,vertexTextures:G,floatFragmentTextures:re,floatVertexTextures:se,maxSamples:ue}}function $i(){function e(){D.value!==c&&(D.value=c,D.needsUpdate=0<v),o.numPlanes=v,o.numIntersection=0}function n(X,I,b,N){var k=X!==null?X.length:0,G=null;if(k!==0){if(G=D.value,N!==!0||G===null)for(N=b+4*k,I=I.matrixWorldInverse,T.getNormalMatrix(I),(G===null||G.length<N)&&(G=new Float32Array(N)),N=0;N!==k;++N,b+=4)y.copy(X[N]).applyMatrix4(I,T),y.normal.toArray(G,b),G[b+3]=y.constant;D.value=G,D.needsUpdate=!0}return o.numPlanes=k,o.numIntersection=0,G}var o=this,c=null,v=0,g=!1,A=!1,y=new Xe,T=new W,D={value:null,needsUpdate:!1};this.uniform=D,this.numIntersection=this.numPlanes=0,this.init=function(X,I,b){var N=X.length!==0||I||v!==0||g;return g=I,c=n(X,b,0),v=X.length,N},this.beginShadows=function(){A=!0,n(null)},this.endShadows=function(){A=!1,e()},this.setState=function(X,I,b,N,k,G){if(!g||X===null||X.length===0||A&&!b)A?n(null):e();else{b=A?0:v;var re=4*b,se=k.clippingState||null;for(D.value=se,se=n(X,N,re,G),X=0;X!==re;++X)se[X]=c[X];k.clippingState=se,this.numIntersection=I?this.numPlanes:0,this.numPlanes+=b}}}function ji(e){var n={};return{get:function(o){if(n[o]!==void 0)return n[o];switch(o){case"WEBGL_depth_texture":var c=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":c=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":c=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":c=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:c=e.getExtension(o)}return c===null&&console.warn("THREE.WebGLRenderer: "+o+" extension not supported."),n[o]=c}}}function _a(e,n,o){function c(y){var T=y.target;y=g.get(T),y.index!==null&&n.remove(y.index);for(var D in y.attributes)n.remove(y.attributes[D]);T.removeEventListener("dispose",c),g.delete(T),(D=A.get(y))&&(n.remove(D),A.delete(y)),o.memory.geometries--}function v(y){var T=[],D=y.index,X=y.attributes.position;if(D!==null){var I=D.array;D=D.version,X=0;for(var b=I.length;X<b;X+=3){var N=I[X+0],k=I[X+1],G=I[X+2];T.push(N,k,k,G,G,N)}}else for(I=X.array,D=X.version,X=0,b=I.length/3-1;X<b;X+=3)N=X+0,k=X+1,G=X+2,T.push(N,k,k,G,G,N);T=new(65535<Ir(T)?Ht:jt)(T,1),T.version=D,n.update(T,34963),(I=A.get(y))&&n.remove(I),A.set(y,T)}var g=new co,A=new co;return{get:function(y,T){var D=g.get(T);return D||(T.addEventListener("dispose",c),T.isBufferGeometry?D=T:T.isGeometry&&(T._bufferGeometry===void 0&&(T._bufferGeometry=new Ut().setFromObject(y)),D=T._bufferGeometry),g.set(T,D),o.memory.geometries++,D)},update:function(y){var T=y.index,D=y.attributes;T!==null&&n.update(T,34963);for(var X in D)n.update(D[X],34962);y=y.morphAttributes;for(X in y){T=y[X],D=0;for(var I=T.length;D<I;D++)n.update(T[D],34962)}},getWireframeAttribute:function(y){var T=A.get(y);if(T){var D=y.index;D!==null&&T.version<D.version&&v(y)}else v(y);return A.get(y)}}}function ro(e,n,o,c){var v=c.isWebGL2,g,A,y;this.setMode=function(T){g=T},this.setIndex=function(T){A=T.type,y=T.bytesPerElement},this.render=function(T,D){e.drawElements(g,D,A,T*y),o.update(D,g)},this.renderInstances=function(T,D,X,I){if(I!==0){if(v){T=e;var b="drawElementsInstanced"}else if(T=n.get("ANGLE_instanced_arrays"),b="drawElementsInstancedANGLE",T===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}T[b](g,X,A,D*y,I),o.update(X,g,I)}}}function bi(e){var n={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:n,programs:null,autoReset:!0,reset:function(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0},update:function(o,c,v){switch(v=v||1,n.calls++,c){case 4:n.triangles+=o/3*v;break;case 1:n.lines+=o/2*v;break;case 3:n.lines+=v*(o-1);break;case 2:n.lines+=v*o;break;case 0:n.points+=v*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",c)}}}}function us(e,n){return Math.abs(n[1])-Math.abs(e[1])}function Ao(e){var n={},o=new Float32Array(8);return{update:function(c,v,g,A){var y=c.morphTargetInfluences,T=y===void 0?0:y.length;if(c=n[v.id],c===void 0){c=[];for(var D=0;D<T;D++)c[D]=[D,0];n[v.id]=c}var X=g.morphTargets&&v.morphAttributes.position;for(g=g.morphNormals&&v.morphAttributes.normal,D=0;D<T;D++){var I=c[D];I[1]!==0&&(X&&v.deleteAttribute("morphTarget"+D),g&&v.deleteAttribute("morphNormal"+D))}for(D=0;D<T;D++)I=c[D],I[0]=D,I[1]=y[D];for(c.sort(us),D=y=0;8>D;D++){if((I=c[D])&&(T=I[0],I=I[1])){X&&v.setAttribute("morphTarget"+D,X[T]),g&&v.setAttribute("morphNormal"+D,g[T]),o[D]=I,y+=I;continue}o[D]=0}v=v.morphTargetsRelative?1:1-y,A.getUniforms().setValue(e,"morphTargetBaseInfluence",v),A.getUniforms().setValue(e,"morphTargetInfluences",o)}}}function Gi(e,n,o,c){var v=new co;return{update:function(g){var A=c.render.frame,y=g.geometry,T=n.get(g,y);return v.get(T)!==A&&(y.isGeometry&&T.updateFromObject(g),n.update(T),v.set(T,A)),g.isInstancedMesh&&o.update(g.instanceMatrix,34962),T},dispose:function(){v=new co}}}function Vi(e,n,o,c,v,g,A,y,T,D){e=e!==void 0?e:[],J.call(this,e,n!==void 0?n:301,o,c,v,g,A!==void 0?A:1022,y,T,D),this.flipY=!1}function zi(e,n,o,c){J.call(this,null),this.image={data:e||null,width:n||1,height:o||1,depth:c||1},this.minFilter=this.magFilter=1003,this.wrapR=1001,this.flipY=this.generateMipmaps=!1,this.needsUpdate=!0}function To(e,n,o,c){J.call(this,null),this.image={data:e||null,width:n||1,height:o||1,depth:c||1},this.minFilter=this.magFilter=1003,this.wrapR=1001,this.flipY=this.generateMipmaps=!1,this.needsUpdate=!0}function wo(e,n,o){var c=e[0];if(0>=c||0<c)return e;var v=n*o,g=sb[v];if(g===void 0&&(g=new Float32Array(v),sb[v]=g),n!==0)for(c.toArray(g,0),c=1,v=0;c!==n;++c)v+=o,e[c].toArray(g,v);return g}function _i(e,n){if(e.length!==n.length)return!1;for(var o=0,c=e.length;o<c;o++)if(e[o]!==n[o])return!1;return!0}function ti(e,n){for(var o=0,c=n.length;o<c;o++)e[o]=n[o]}function wn(e,n){var o=lb[n];o===void 0&&(o=new Int32Array(n),lb[n]=o);for(var c=0;c!==n;++c)o[c]=e.allocateTextureUnit();return o}function Ui(e,n){var o=this.cache;o[0]!==n&&(e.uniform1f(this.addr,n),o[0]=n)}function Nn(e,n){var o=this.cache;n.x!==void 0?(o[0]!==n.x||o[1]!==n.y)&&(e.uniform2f(this.addr,n.x,n.y),o[0]=n.x,o[1]=n.y):_i(o,n)||(e.uniform2fv(this.addr,n),ti(o,n))}function nn(e,n){var o=this.cache;n.x!==void 0?(o[0]!==n.x||o[1]!==n.y||o[2]!==n.z)&&(e.uniform3f(this.addr,n.x,n.y,n.z),o[0]=n.x,o[1]=n.y,o[2]=n.z):n.r!==void 0?(o[0]!==n.r||o[1]!==n.g||o[2]!==n.b)&&(e.uniform3f(this.addr,n.r,n.g,n.b),o[0]=n.r,o[1]=n.g,o[2]=n.b):_i(o,n)||(e.uniform3fv(this.addr,n),ti(o,n))}function Gn(e,n){var o=this.cache;n.x!==void 0?(o[0]!==n.x||o[1]!==n.y||o[2]!==n.z||o[3]!==n.w)&&(e.uniform4f(this.addr,n.x,n.y,n.z,n.w),o[0]=n.x,o[1]=n.y,o[2]=n.z,o[3]=n.w):_i(o,n)||(e.uniform4fv(this.addr,n),ti(o,n))}function Wi(e,n){var o=this.cache,c=n.elements;c===void 0?_i(o,n)||(e.uniformMatrix2fv(this.addr,!1,n),ti(o,n)):_i(o,c)||(hb.set(c),e.uniformMatrix2fv(this.addr,!1,hb),ti(o,c))}function Co(e,n){var o=this.cache,c=n.elements;c===void 0?_i(o,n)||(e.uniformMatrix3fv(this.addr,!1,n),ti(o,n)):_i(o,c)||(cb.set(c),e.uniformMatrix3fv(this.addr,!1,cb),ti(o,c))}function Ja(e,n){var o=this.cache,c=n.elements;c===void 0?_i(o,n)||(e.uniformMatrix4fv(this.addr,!1,n),ti(o,n)):_i(o,c)||(ub.set(c),e.uniformMatrix4fv(this.addr,!1,ub),ti(o,c))}function ma(e,n,o){var c=this.cache,v=o.allocateTextureUnit();c[0]!==v&&(e.uniform1i(this.addr,v),c[0]=v),o.safeSetTexture2D(n||ob,v)}function ku(e,n,o){var c=this.cache,v=o.allocateTextureUnit();c[0]!==v&&(e.uniform1i(this.addr,v),c[0]=v),o.setTexture2DArray(n||AG,v)}function Ti(e,n,o){var c=this.cache,v=o.allocateTextureUnit();c[0]!==v&&(e.uniform1i(this.addr,v),c[0]=v),o.setTexture3D(n||wG,v)}function Ma(e,n,o){var c=this.cache,v=o.allocateTextureUnit();c[0]!==v&&(e.uniform1i(this.addr,v),c[0]=v),o.safeSetTextureCube(n||ab,v)}function ks(e,n){var o=this.cache;o[0]!==n&&(e.uniform1i(this.addr,n),o[0]=n)}function Ms(e,n){var o=this.cache;_i(o,n)||(e.uniform2iv(this.addr,n),ti(o,n))}function pl(e,n){var o=this.cache;_i(o,n)||(e.uniform3iv(this.addr,n),ti(o,n))}function hr(e,n){var o=this.cache;_i(o,n)||(e.uniform4iv(this.addr,n),ti(o,n))}function Ba(e,n){var o=this.cache;o[0]!==n&&(e.uniform1ui(this.addr,n),o[0]=n)}function Rc(e){switch(e){case 5126:return Ui;case 35664:return Nn;case 35665:return nn;case 35666:return Gn;case 35674:return Wi;case 35675:return Co;case 35676:return Ja;case 5124:case 35670:return ks;case 35667:case 35671:return Ms;case 35668:case 35672:return pl;case 35669:case 35673:return hr;case 5125:return Ba;case 35678:case 36198:case 36298:case 36306:case 35682:return ma;case 35679:case 36299:case 36307:return Ti;case 35680:case 36300:case 36308:case 36293:return Ma;case 36289:case 36303:case 36311:case 36292:return ku}}function Ei(e,n){e.uniform1fv(this.addr,n)}function Ol(e,n){e.uniform1iv(this.addr,n)}function Hs(e,n){e.uniform2iv(this.addr,n)}function Dl(e,n){e.uniform3iv(this.addr,n)}function ra(e,n){e.uniform4iv(this.addr,n)}function Zo(e,n){n=wo(n,this.size,2),e.uniform2fv(this.addr,n)}function Lc(e,n){n=wo(n,this.size,3),e.uniform3fv(this.addr,n)}function Hu(e,n){n=wo(n,this.size,4),e.uniform4fv(this.addr,n)}function Fh(e,n){n=wo(n,this.size,4),e.uniformMatrix2fv(this.addr,!1,n)}function js(e,n){n=wo(n,this.size,9),e.uniformMatrix3fv(this.addr,!1,n)}function Pc(e,n){n=wo(n,this.size,16),e.uniformMatrix4fv(this.addr,!1,n)}function ju(e,n,o){var c=n.length,v=wn(o,c);for(e.uniform1iv(this.addr,v),e=0;e!==c;++e)o.safeSetTexture2D(n[e]||ob,v[e])}function yi(e,n,o){var c=n.length,v=wn(o,c);for(e.uniform1iv(this.addr,v),e=0;e!==c;++e)o.safeSetTextureCube(n[e]||ab,v[e])}function Un(e){switch(e){case 5126:return Ei;case 35664:return Zo;case 35665:return Lc;case 35666:return Hu;case 35674:return Fh;case 35675:return js;case 35676:return Pc;case 5124:case 35670:return Ol;case 35667:case 35671:return Hs;case 35668:case 35672:return Dl;case 35669:case 35673:return ra;case 35678:case 36198:case 36298:case 36306:case 35682:return ju;case 35680:case 36300:case 36308:case 36293:return yi}}function su(e,n,o){this.id=e,this.addr=o,this.cache=[],this.setValue=Rc(n.type)}function cs(e,n,o){this.id=e,this.addr=o,this.cache=[],this.size=n.size,this.setValue=Un(n.type)}function Gs(e){this.id=e,this.seq=[],this.map={}}function Sa(e,n){this.seq=[],this.map={};for(var o=e.getProgramParameter(n,35718),c=0;c<o;++c){var v=e.getActiveUniform(n,c),g=e.getUniformLocation(n,v.name),A=this,y=v.name,T=y.length;for(FI.lastIndex=0;;){var D=FI.exec(y),X=FI.lastIndex,I=D[1],b=D[3];if(D[2]==="]"&&(I|=0),b===void 0||b==="["&&X+2===T){y=A,v=b===void 0?new su(I,v,g):new cs(I,v,g),y.seq.push(v),y.map[v.id]=v;break}else b=A.map[I],b===void 0&&(b=new Gs(I),I=A,A=b,I.seq.push(A),I.map[A.id]=A),A=b}}}function Gu(e,n,o){return n=e.createShader(n),e.shaderSource(n,o),e.compileShader(n),n}function Ss(e){switch(e){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:throw Error("unsupported encoding: "+e)}}function bl(e,n,o){var c=e.getShaderParameter(n,35713),v=e.getShaderInfoLog(n).trim();if(c&&v==="")return"";for(e=e.getShaderSource(n).split(`
`),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e=e.join(`
`),"THREE.WebGLShader: gl.getShaderInfoLog() "+o+`
`+v+e}function Pi(e,n){return n=Ss(n),"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function xi(e,n){return n=Ss(n),"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function mi(e,n){switch(n){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="Uncharted2";break;case 4:n="OptimizedCineon";break;case 5:n="ACESFilmic";break;default:throw Error("unsupported toneMapping: "+n)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Po(e){var n=[],o;for(o in e){var c=e[o];c!==!1&&n.push("#define "+o+" "+c)}return n.join(`
`)}function no(e){return e!==""}function uo(e,n){return e.replace(/NUM_DIR_LIGHTS/g,n.numDirLights).replace(/NUM_SPOT_LIGHTS/g,n.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,n.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,n.numPointLights).replace(/NUM_HEMI_LIGHTS/g,n.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,n.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,n.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,n.numPointLightShadows)}function Oo(e,n){return e.replace(/NUM_CLIPPING_PLANES/g,n.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,n.numClippingPlanes-n.numClipIntersection)}function ko(e,n){if(e=Ii[n],e===void 0)throw Error("Can not resolve #include <"+n+">");return e.replace(NI,ko)}function hs(e,n,o,c){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),na(e,n,o,c)}function na(e,n,o,c){for(e="",n=parseInt(n);n<parseInt(o);n++)e+=c.replace(/\[ i \]/g,"[ "+n+" ]").replace(/UNROLLED_LOOP_INDEX/g,n);return e}function za(e){var n="precision "+e.precision+` float;
precision `+e.precision+" int;";return e.precision==="highp"?n+=`
#define HIGH_PRECISION`:e.precision==="mediump"?n+=`
#define MEDIUM_PRECISION`:e.precision==="lowp"&&(n+=`
#define LOW_PRECISION`),n}function Fl(e){var n="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===1?n="SHADOWMAP_TYPE_PCF":e.shadowMapType===2?n="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===3&&(n="SHADOWMAP_TYPE_VSM"),n}function Nh(e){var n="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case 301:case 302:n="ENVMAP_TYPE_CUBE";break;case 306:case 307:n="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:n="ENVMAP_TYPE_EQUIREC";break;case 305:n="ENVMAP_TYPE_SPHERE"}return n}function Vu(e){var n="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case 302:case 304:n="ENVMAP_MODE_REFRACTION"}return n}function Vs(e){var n="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:n="ENVMAP_BLENDING_MULTIPLY";break;case 1:n="ENVMAP_BLENDING_MIX";break;case 2:n="ENVMAP_BLENDING_ADD"}return n}function Ua(e,n,o){var c=e.getContext(),v=o.defines,g=o.vertexShader,A=o.fragmentShader,y=Fl(o),T=Nh(o),D=Vu(o),X=Vs(o),I=0<e.gammaFactor?e.gammaFactor:1,b=o.isWebGL2?"":[o.extensionDerivatives||o.envMapCubeUV||o.bumpMap||o.tangentSpaceNormalMap||o.clearcoatNormalMap||o.flatShading||o.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(o.extensionFragDepth||o.logarithmicDepthBuffer)&&o.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",o.extensionDrawBuffers&&o.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(o.extensionShaderTextureLOD||o.envMap)&&o.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(no).join(`
`),N=Po(v),k=c.createProgram();o.isRawShaderMaterial?(v=[N].filter(no).join(`
`),0<v.length&&(v+=`
`),y=[b,N].filter(no).join(`
`),0<y.length&&(y+=`
`)):(v=[za(o),"#define SHADER_NAME "+o.shaderName,N,o.instancing?"#define USE_INSTANCING":"",o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+I,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp2?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+D:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.normalMap&&o.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",o.clearcoatMap?"#define USE_CLEARCOATMAP":"",o.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",o.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.vertexUvs?"#define USE_UV":"",o.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&o.flatShading===!1?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+y:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&o.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(no).join(`
`),y=[b,za(o),"#define SHADER_NAME "+o.shaderName,N,o.alphaTest?"#define ALPHATEST "+o.alphaTest+(o.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+I,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp2?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.matcap?"#define USE_MATCAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+T:"",o.envMap?"#define "+D:"",o.envMap?"#define "+X:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.normalMap&&o.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",o.clearcoatMap?"#define USE_CLEARCOATMAP":"",o.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",o.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.sheen?"#define USE_SHEEN":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.vertexUvs?"#define USE_UV":"",o.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+y:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&o.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(o.extensionShaderTextureLOD||o.envMap)&&o.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",o.toneMapping!==0?"#define TONE_MAPPING":"",o.toneMapping!==0?Ii.tonemapping_pars_fragment:"",o.toneMapping!==0?mi("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.matcapEncoding||o.envMapEncoding||o.emissiveMapEncoding||o.lightMapEncoding?Ii.encodings_pars_fragment:"",o.mapEncoding?Pi("mapTexelToLinear",o.mapEncoding):"",o.matcapEncoding?Pi("matcapTexelToLinear",o.matcapEncoding):"",o.envMapEncoding?Pi("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?Pi("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.lightMapEncoding?Pi("lightMapTexelToLinear",o.lightMapEncoding):"",o.outputEncoding?xi("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+o.depthPacking:"",`
`].filter(no).join(`
`)),g=g.replace(NI,ko),g=uo(g,o),g=Oo(g,o),A=A.replace(NI,ko),A=uo(A,o),A=Oo(A,o),g=g.replace(db,na).replace(fb,hs),A=A.replace(db,na).replace(fb,hs),o.isWebGL2&&!o.isRawShaderMaterial&&(T=!1,D=/^\s*#version\s+300\s+es\s*\n/,o.isShaderMaterial&&g.match(D)!==null&&A.match(D)!==null&&(T=!0,g=g.replace(D,""),A=A.replace(D,"")),v=`#version 300 es

#define attribute in
#define varying out
#define texture2D texture
`+v,y=[`#version 300 es

#define varying in`,T?"":"out highp vec4 pc_fragColor;",T?"":"#define gl_FragColor pc_fragColor",`#define gl_FragDepthEXT gl_FragDepth
#define texture2D texture
#define textureCube texture
#define texture2DProj textureProj
#define texture2DLodEXT textureLod
#define texture2DProjLodEXT textureProjLod
#define textureCubeLodEXT textureLod
#define texture2DGradEXT textureGrad
#define texture2DProjGradEXT textureProjGrad
#define textureCubeGradEXT textureGrad`].join(`
`)+`
`+y),A=y+A,g=Gu(c,35633,v+g),A=Gu(c,35632,A),c.attachShader(k,g),c.attachShader(k,A),o.index0AttributeName!==void 0?c.bindAttribLocation(k,0,o.index0AttributeName):o.morphTargets===!0&&c.bindAttribLocation(k,0,"position"),c.linkProgram(k),e.debug.checkShaderErrors&&(e=c.getProgramInfoLog(k).trim(),T=c.getShaderInfoLog(g).trim(),D=c.getShaderInfoLog(A).trim(),I=X=!0,c.getProgramParameter(k,35714)===!1?(X=!1,b=bl(c,g,"vertex"),N=bl(c,A,"fragment"),console.error("THREE.WebGLProgram: shader error: ",c.getError(),"35715",c.getProgramParameter(k,35715),"gl.getProgramInfoLog",e,b,N)):e!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",e):(T===""||D==="")&&(I=!1),I&&(this.diagnostics={runnable:X,programLog:e,vertexShader:{log:T,prefix:v},fragmentShader:{log:D,prefix:y}})),c.deleteShader(g),c.deleteShader(A);var G;this.getUniforms=function(){return G===void 0&&(G=new Sa(c,k)),G};var re;return this.getAttributes=function(){if(re===void 0){for(var se={},ue=c.getProgramParameter(k,35721),we=0;we<ue;we++){var Te=c.getActiveAttrib(k,we).name;se[Te]=c.getAttribLocation(k,Te)}re=se}return re},this.destroy=function(){c.deleteProgram(k),this.program=void 0},this.name=o.shaderName,this.id=CG++,this.cacheKey=n,this.usedTimes=1,this.program=k,this.vertexShader=g,this.fragmentShader=A,this}function ml(e,n,o){function c(N){if(N)N.isTexture?k=N.encoding:N.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),k=N.texture.encoding);else var k=3e3;return k}var v=[],g=o.isWebGL2,A=o.logarithmicDepthBuffer,y=o.floatVertexTextures,T=o.precision,D=o.maxVertexUniforms,X=o.vertexTextures,I={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},b="precision isWebGL2 supportsVertexTextures outputEncoding instancing map mapEncoding matcap matcapEncoding envMap envMapMode envMapEncoding envMapCubeUV lightMap lightMapEncoding aoMap emissiveMap emissiveMapEncoding bumpMap normalMap objectSpaceNormalMap tangentSpaceNormalMap clearcoatMap clearcoatRoughnessMap clearcoatNormalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors vertexTangents vertexUvs uvsVertexOnly fog useFog fogExp2 flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights numDirLightShadows numPointLightShadows numSpotLightShadows shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering sheen".split(" ");this.getParameters=function(N,k,G,re,se,ue,we){var Te=re.fog;re=N.isMeshStandardMaterial?re.environment:null,re=N.envMap||re;var je=I[N.type];if(we.isSkinnedMesh){var Ge=we.skeleton.bones;if(y)Ge=1024;else{var He=Math.min(Math.floor((D-20)/4),Ge.length);He<Ge.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Ge.length+" bones. This GPU supports "+He+"."),Ge=0):Ge=He}}else Ge=0;N.precision!==null&&(T=o.getMaxPrecision(N.precision),T!==N.precision&&console.warn("THREE.WebGLProgram.getParameters:",N.precision,"not supported, using",T,"instead.")),je?(He=dd[je],He={name:N.type,uniforms:Kg.clone(He.uniforms),vertexShader:He.vertexShader,fragmentShader:He.fragmentShader}):He={name:N.type,uniforms:N.uniforms,vertexShader:N.vertexShader,fragmentShader:N.fragmentShader},N.onBeforeCompile(He,e);var lt=e.getRenderTarget();return{isWebGL2:g,shaderID:je,shaderName:He.name,uniforms:He.uniforms,vertexShader:He.vertexShader,fragmentShader:He.fragmentShader,defines:N.defines,isRawShaderMaterial:N.isRawShaderMaterial,isShaderMaterial:N.isShaderMaterial,precision:T,instancing:we.isInstancedMesh===!0,supportsVertexTextures:X,outputEncoding:lt!==null?c(lt.texture):e.outputEncoding,map:!!N.map,mapEncoding:c(N.map),matcap:!!N.matcap,matcapEncoding:c(N.matcap),envMap:!!re,envMapMode:re&&re.mapping,envMapEncoding:c(re),envMapCubeUV:!!re&&(re.mapping===306||re.mapping===307),lightMap:!!N.lightMap,lightMapEncoding:c(N.lightMap),aoMap:!!N.aoMap,emissiveMap:!!N.emissiveMap,emissiveMapEncoding:c(N.emissiveMap),bumpMap:!!N.bumpMap,normalMap:!!N.normalMap,objectSpaceNormalMap:N.normalMapType===1,tangentSpaceNormalMap:N.normalMapType===0,clearcoatMap:!!N.clearcoatMap,clearcoatRoughnessMap:!!N.clearcoatRoughnessMap,clearcoatNormalMap:!!N.clearcoatNormalMap,displacementMap:!!N.displacementMap,roughnessMap:!!N.roughnessMap,metalnessMap:!!N.metalnessMap,specularMap:!!N.specularMap,alphaMap:!!N.alphaMap,gradientMap:!!N.gradientMap,sheen:!!N.sheen,combine:N.combine,vertexTangents:N.normalMap&&N.vertexTangents,vertexColors:N.vertexColors,vertexUvs:!!N.map||!!N.bumpMap||!!N.normalMap||!!N.specularMap||!!N.alphaMap||!!N.emissiveMap||!!N.roughnessMap||!!N.metalnessMap||!!N.clearcoatMap||!!N.clearcoatRoughnessMap||!!N.clearcoatNormalMap||!!N.displacementMap,uvsVertexOnly:!(N.map||N.bumpMap||N.normalMap||N.specularMap||N.alphaMap||N.emissiveMap||N.roughnessMap||N.metalnessMap||N.clearcoatNormalMap)&&!!N.displacementMap,fog:!!Te,useFog:N.fog,fogExp2:Te&&Te.isFogExp2,flatShading:N.flatShading,sizeAttenuation:N.sizeAttenuation,logarithmicDepthBuffer:A,skinning:N.skinning&&0<Ge,maxBones:Ge,useVertexTexture:y,morphTargets:N.morphTargets,morphNormals:N.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:k.directional.length,numPointLights:k.point.length,numSpotLights:k.spot.length,numRectAreaLights:k.rectArea.length,numHemiLights:k.hemi.length,numDirLightShadows:k.directionalShadowMap.length,numPointLightShadows:k.pointShadowMap.length,numSpotLightShadows:k.spotShadowMap.length,numClippingPlanes:se,numClipIntersection:ue,dithering:N.dithering,shadowMapEnabled:e.shadowMap.enabled&&0<G.length,shadowMapType:e.shadowMap.type,toneMapping:N.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:N.premultipliedAlpha,alphaTest:N.alphaTest,doubleSided:N.side===2,flipSided:N.side===1,depthPacking:N.depthPacking!==void 0?N.depthPacking:!1,index0AttributeName:N.index0AttributeName,extensionDerivatives:N.extensions&&N.extensions.derivatives,extensionFragDepth:N.extensions&&N.extensions.fragDepth,extensionDrawBuffers:N.extensions&&N.extensions.drawBuffers,extensionShaderTextureLOD:N.extensions&&N.extensions.shaderTextureLOD,rendererExtensionFragDepth:g||n.get("EXT_frag_depth")!==null,rendererExtensionDrawBuffers:g||n.get("WEBGL_draw_buffers")!==null,rendererExtensionShaderTextureLod:g||n.get("EXT_shader_texture_lod")!==null,onBeforeCompile:N.onBeforeCompile}},this.getProgramCacheKey=function(N){var k=[];if(N.shaderID?k.push(N.shaderID):(k.push(N.fragmentShader),k.push(N.vertexShader)),N.defines!==void 0)for(var G in N.defines)k.push(G),k.push(N.defines[G]);if(N.isRawShaderMaterial===void 0){for(G=0;G<b.length;G++)k.push(N[b[G]]);k.push(e.outputEncoding),k.push(e.gammaFactor)}return k.push(N.onBeforeCompile.toString()),k.join()},this.acquireProgram=function(N,k){for(var G,re=0,se=v.length;re<se;re++){var ue=v[re];if(ue.cacheKey===k){G=ue,++G.usedTimes;break}}return G===void 0&&(G=new Ua(e,k,N),v.push(G)),G},this.releaseProgram=function(N){if(--N.usedTimes===0){var k=v.indexOf(N);v[k]=v[v.length-1],v.pop(),N.destroy()}},this.programs=v}function qo(){var e=new co;return{get:function(n){var o=e.get(n);return o===void 0&&(o={},e.set(n,o)),o},remove:function(n){e.delete(n)},update:function(n,o,c){e.get(n)[o]=c},dispose:function(){e=new co}}}function Ho(e,n){return e.groupOrder!==n.groupOrder?e.groupOrder-n.groupOrder:e.renderOrder!==n.renderOrder?e.renderOrder-n.renderOrder:e.program!==n.program?e.program.id-n.program.id:e.material.id!==n.material.id?e.material.id-n.material.id:e.z!==n.z?e.z-n.z:e.id-n.id}function tn(e,n){return e.groupOrder!==n.groupOrder?e.groupOrder-n.groupOrder:e.renderOrder!==n.renderOrder?e.renderOrder-n.renderOrder:e.z!==n.z?n.z-e.z:e.id-n.id}function Nl(){function e(A,y,T,D,X,I){var b=n[o];return b===void 0?(b={id:A.id,object:A,geometry:y,material:T,program:T.program||g,groupOrder:D,renderOrder:A.renderOrder,z:X,group:I},n[o]=b):(b.id=A.id,b.object=A,b.geometry=y,b.material=T,b.program=T.program||g,b.groupOrder=D,b.renderOrder=A.renderOrder,b.z=X,b.group=I),o++,b}var n=[],o=0,c=[],v=[],g={id:-1};return{opaque:c,transparent:v,init:function(){o=0,c.length=0,v.length=0},push:function(A,y,T,D,X,I){A=e(A,y,T,D,X,I),(T.transparent===!0?v:c).push(A)},unshift:function(A,y,T,D,X,I){A=e(A,y,T,D,X,I),(T.transparent===!0?v:c).unshift(A)},finish:function(){for(var A=o,y=n.length;A<y;A++){var T=n[A];if(T.id===null)break;T.id=null,T.object=null,T.geometry=null,T.material=null,T.program=null,T.group=null}},sort:function(A,y){1<c.length&&c.sort(A||Ho),1<v.length&&v.sort(y||tn)}}}function tp(){function e(o){o=o.target,o.removeEventListener("dispose",e),n.delete(o)}var n=new co;return{get:function(o,c){var v=n.get(o);if(v===void 0){var g=new Nl;n.set(o,new co),n.get(o).set(c,g),o.addEventListener("dispose",e)}else g=v.get(c),g===void 0&&(g=new Nl,v.set(c,g));return g},dispose:function(){n=new co}}}function bf(){var e={};return{get:function(n){if(e[n.id]!==void 0)return e[n.id];switch(n.type){case"DirectionalLight":var o={direction:new oe,color:new Ye};break;case"SpotLight":o={position:new oe,direction:new oe,color:new Ye,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":o={position:new oe,color:new Ye,distance:0,decay:0};break;case"HemisphereLight":o={direction:new oe,skyColor:new Ye,groundColor:new Ye};break;case"RectAreaLight":o={color:new Ye,position:new oe,halfWidth:new oe,halfHeight:new oe}}return e[n.id]=o}}}function Eo(){var e={};return{get:function(n){if(e[n.id]!==void 0)return e[n.id];switch(n.type){case"DirectionalLight":var o={shadowBias:0,shadowRadius:1,shadowMapSize:new U};break;case"SpotLight":o={shadowBias:0,shadowRadius:1,shadowMapSize:new U};break;case"PointLight":o={shadowBias:0,shadowRadius:1,shadowMapSize:new U,shadowCameraNear:1,shadowCameraFar:1e3}}return e[n.id]=o}}}function Ff(e,n){return(n.castShadow?1:0)-(e.castShadow?1:0)}function Bh(){for(var e=new bf,n=Eo(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},c=0;9>c;c++)o.probe.push(new oe);var v=new oe,g=new me,A=new me;return{setup:function(y,T,D){for(var X=0,I=0,b=0,N=0;9>N;N++)o.probe[N].set(0,0,0);var k=T=0,G=0,re=0,se=0,ue=0,we=0,Te=0;D=D.matrixWorldInverse,y.sort(Ff),N=0;for(var je=y.length;N<je;N++){var Ge=y[N],He=Ge.color,lt=Ge.intensity,ht=Ge.distance,It=Ge.shadow&&Ge.shadow.map?Ge.shadow.map.texture:null;if(Ge.isAmbientLight)X+=He.r*lt,I+=He.g*lt,b+=He.b*lt;else if(Ge.isLightProbe)for(It=0;9>It;It++)o.probe[It].addScaledVector(Ge.sh.coefficients[It],lt);else if(Ge.isDirectionalLight){var vt=e.get(Ge);vt.color.copy(Ge.color).multiplyScalar(Ge.intensity),vt.direction.setFromMatrixPosition(Ge.matrixWorld),v.setFromMatrixPosition(Ge.target.matrixWorld),vt.direction.sub(v),vt.direction.transformDirection(D),Ge.castShadow&&(lt=Ge.shadow,He=n.get(Ge),He.shadowBias=lt.bias,He.shadowRadius=lt.radius,He.shadowMapSize=lt.mapSize,o.directionalShadow[T]=He,o.directionalShadowMap[T]=It,o.directionalShadowMatrix[T]=Ge.shadow.matrix,ue++),o.directional[T]=vt,T++}else Ge.isSpotLight?(vt=e.get(Ge),vt.position.setFromMatrixPosition(Ge.matrixWorld),vt.position.applyMatrix4(D),vt.color.copy(He).multiplyScalar(lt),vt.distance=ht,vt.direction.setFromMatrixPosition(Ge.matrixWorld),v.setFromMatrixPosition(Ge.target.matrixWorld),vt.direction.sub(v),vt.direction.transformDirection(D),vt.coneCos=Math.cos(Ge.angle),vt.penumbraCos=Math.cos(Ge.angle*(1-Ge.penumbra)),vt.decay=Ge.decay,Ge.castShadow&&(lt=Ge.shadow,He=n.get(Ge),He.shadowBias=lt.bias,He.shadowRadius=lt.radius,He.shadowMapSize=lt.mapSize,o.spotShadow[G]=He,o.spotShadowMap[G]=It,o.spotShadowMatrix[G]=Ge.shadow.matrix,Te++),o.spot[G]=vt,G++):Ge.isRectAreaLight?(vt=e.get(Ge),vt.color.copy(He).multiplyScalar(lt),vt.position.setFromMatrixPosition(Ge.matrixWorld),vt.position.applyMatrix4(D),A.identity(),g.copy(Ge.matrixWorld),g.premultiply(D),A.extractRotation(g),vt.halfWidth.set(.5*Ge.width,0,0),vt.halfHeight.set(0,.5*Ge.height,0),vt.halfWidth.applyMatrix4(A),vt.halfHeight.applyMatrix4(A),o.rectArea[re]=vt,re++):Ge.isPointLight?(vt=e.get(Ge),vt.position.setFromMatrixPosition(Ge.matrixWorld),vt.position.applyMatrix4(D),vt.color.copy(Ge.color).multiplyScalar(Ge.intensity),vt.distance=Ge.distance,vt.decay=Ge.decay,Ge.castShadow&&(lt=Ge.shadow,He=n.get(Ge),He.shadowBias=lt.bias,He.shadowRadius=lt.radius,He.shadowMapSize=lt.mapSize,He.shadowCameraNear=lt.camera.near,He.shadowCameraFar=lt.camera.far,o.pointShadow[k]=He,o.pointShadowMap[k]=It,o.pointShadowMatrix[k]=Ge.shadow.matrix,we++),o.point[k]=vt,k++):Ge.isHemisphereLight&&(vt=e.get(Ge),vt.direction.setFromMatrixPosition(Ge.matrixWorld),vt.direction.transformDirection(D),vt.direction.normalize(),vt.skyColor.copy(Ge.color).multiplyScalar(lt),vt.groundColor.copy(Ge.groundColor).multiplyScalar(lt),o.hemi[se]=vt,se++)}o.ambient[0]=X,o.ambient[1]=I,o.ambient[2]=b,y=o.hash,(y.directionalLength!==T||y.pointLength!==k||y.spotLength!==G||y.rectAreaLength!==re||y.hemiLength!==se||y.numDirectionalShadows!==ue||y.numPointShadows!==we||y.numSpotShadows!==Te)&&(o.directional.length=T,o.spot.length=G,o.rectArea.length=re,o.point.length=k,o.hemi.length=se,o.directionalShadow.length=ue,o.directionalShadowMap.length=ue,o.pointShadow.length=we,o.pointShadowMap.length=we,o.spotShadow.length=Te,o.spotShadowMap.length=Te,o.directionalShadowMatrix.length=ue,o.pointShadowMatrix.length=we,o.spotShadowMatrix.length=Te,y.directionalLength=T,y.pointLength=k,y.spotLength=G,y.rectAreaLength=re,y.hemiLength=se,y.numDirectionalShadows=ue,y.numPointShadows=we,y.numSpotShadows=Te,o.version=_G++)},state:o}}function Oc(){var e=new Bh,n=[],o=[];return{init:function(){n.length=0,o.length=0},state:{lightsArray:n,shadowsArray:o,lights:e},setupLights:function(c){e.setup(n,o,c)},pushLight:function(c){n.push(c)},pushShadow:function(c){o.push(c)}}}function Sx(){function e(o){o=o.target,o.removeEventListener("dispose",e),n.delete(o)}var n=new co;return{get:function(o,c){if(n.has(o)===!1){var v=new Oc;n.set(o,new co),n.get(o).set(c,v),o.addEventListener("dispose",e)}else n.get(o).has(c)===!1?(v=new Oc,n.get(o).set(c,v)):v=n.get(o).get(c);return v},dispose:function(){n=new co}}}function Wr(e){$e.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}function Tn(e){$e.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new oe,this.nearDistance=1,this.farDistance=1e3,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}function Lr(e,n,o){function c(Te,je,Ge){Ge=Te<<0|je<<1|Ge<<2;var He=I[Ge];return He===void 0&&(He=new Wr({depthPacking:3201,morphTargets:Te,skinning:je}),I[Ge]=He),He}function v(Te,je,Ge){Ge=Te<<0|je<<1|Ge<<2;var He=b[Ge];return He===void 0&&(He=new Tn({morphTargets:Te,skinning:je}),b[Ge]=He),He}function g(Te,je,Ge,He,lt,ht,It){var vt=c,Et=Te.customDepthMaterial;return He.isPointLight===!0&&(vt=v,Et=Te.customDistanceMaterial),Et===void 0?(Et=!1,Ge.morphTargets===!0&&(Et=je.morphAttributes&&je.morphAttributes.position&&0<je.morphAttributes.position.length),je=!1,Te.isSkinnedMesh===!0&&(Ge.skinning===!0?je=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",Te)),Te=vt(Et,je,Te.isInstancedMesh===!0)):Te=Et,e.localClippingEnabled&&Ge.clipShadows===!0&&Ge.clippingPlanes.length!==0&&(Et=Te.uuid,vt=Ge.uuid,je=N[Et],je===void 0&&(je={},N[Et]=je),Et=je[vt],Et===void 0&&(Et=Te.clone(),je[vt]=Et),Te=Et),Te.visible=Ge.visible,Te.wireframe=Ge.wireframe,Te.side=It===3?Ge.shadowSide!==null?Ge.shadowSide:Ge.side:Ge.shadowSide!==null?Ge.shadowSide:k[Ge.side],Te.clipShadows=Ge.clipShadows,Te.clippingPlanes=Ge.clippingPlanes,Te.clipIntersection=Ge.clipIntersection,Te.wireframeLinewidth=Ge.wireframeLinewidth,Te.linewidth=Ge.linewidth,He.isPointLight===!0&&Te.isMeshDistanceMaterial===!0&&(Te.referencePosition.setFromMatrixPosition(He.matrixWorld),Te.nearDistance=lt,Te.farDistance=ht),Te}function A(Te,je,Ge,He,lt){if(Te.visible!==!1){if(Te.layers.test(je.layers)&&(Te.isMesh||Te.isLine||Te.isPoints)&&(Te.castShadow||Te.receiveShadow&&lt===3)&&(!Te.frustumCulled||y.intersectsObject(Te))){Te.modelViewMatrix.multiplyMatrices(Ge.matrixWorldInverse,Te.matrixWorld);var ht=n.update(Te),It=Te.material;if(Array.isArray(It))for(var vt=ht.groups,Et=0,xr=vt.length;Et<xr;Et++){var Nt=vt[Et],Pr=It[Nt.materialIndex];Pr&&Pr.visible&&(Pr=g(Te,ht,Pr,He,Ge.near,Ge.far,lt),e.renderBufferDirect(Ge,null,ht,Pr,Te,Nt))}else It.visible&&(Pr=g(Te,ht,It,He,Ge.near,Ge.far,lt),e.renderBufferDirect(Ge,null,ht,Pr,Te,null))}for(Te=Te.children,ht=0,It=Te.length;ht<It;ht++)A(Te[ht],je,Ge,He,lt)}}var y=new xn,T=new U,D=new U,X=new te,I=[],b=[],N={},k={0:1,1:0,2:2},G=new en({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:.125},uniforms:{shadow_pass:{value:null},resolution:{value:new U},radius:{value:4}},vertexShader:`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragmentShader:`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
  float mean = 0.0;
  float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );
  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
    #ifdef HORIZONAL_PASS
      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
      mean += distribution.x;
      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
    #else
      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );
      mean += depth;
      squared_mean += depth * depth;
    #endif
  }
  mean = mean * HALF_SAMPLE_RATE;
  squared_mean = squared_mean * HALF_SAMPLE_RATE;
  float std_dev = sqrt( squared_mean - mean * mean );
  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`}),re=G.clone();re.defines.HORIZONAL_PASS=1;var se=new Ut;se.setAttribute("position",new Ve(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var ue=new _r(se,G),we=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(Te,je,Ge){if(we.enabled!==!1&&(we.autoUpdate!==!1||we.needsUpdate!==!1)&&Te.length!==0){var He=e.getRenderTarget(),lt=e.getActiveCubeFace(),ht=e.getActiveMipmapLevel(),It=e.state;It.setBlending(0),It.buffers.color.setClear(1,1,1,1),It.buffers.depth.setTest(!0),It.setScissorTest(!1);for(var vt=0,Et=Te.length;vt<Et;vt++){var xr=Te[vt],Nt=xr.shadow;if(Nt===void 0)console.warn("THREE.WebGLShadowMap:",xr,"has no shadow.");else{T.copy(Nt.mapSize);var Pr=Nt.getFrameExtents();T.multiply(Pr),D.copy(Nt.mapSize),(T.x>o||T.y>o)&&(T.x>o&&(D.x=Math.floor(o/Pr.x),T.x=D.x*Pr.x,Nt.mapSize.x=D.x),T.y>o&&(D.y=Math.floor(o/Pr.y),T.y=D.y*Pr.y,Nt.mapSize.y=D.y)),Nt.map!==null||Nt.isPointLightShadow||this.type!==3||(Pr={minFilter:1006,magFilter:1006,format:1023},Nt.map=new ae(T.x,T.y,Pr),Nt.map.texture.name=xr.name+".shadowMap",Nt.mapPass=new ae(T.x,T.y,Pr),Nt.camera.updateProjectionMatrix()),Nt.map===null&&(Pr={minFilter:1003,magFilter:1003,format:1023},Nt.map=new ae(T.x,T.y,Pr),Nt.map.texture.name=xr.name+".shadowMap",Nt.camera.updateProjectionMatrix()),e.setRenderTarget(Nt.map),e.clear(),Pr=Nt.getViewportCount();for(var qr=0;qr<Pr;qr++){var Fr=Nt.getViewport(qr);X.set(D.x*Fr.x,D.y*Fr.y,D.x*Fr.z,D.y*Fr.w),It.viewport(X),Nt.updateMatrices(xr,qr),y=Nt.getFrustum(),A(je,Ge,Nt.camera,xr,this.type)}Nt.isPointLightShadow||this.type!==3||(xr=Nt,Nt=Ge,Pr=n.update(ue),G.uniforms.shadow_pass.value=xr.map.texture,G.uniforms.resolution.value=xr.mapSize,G.uniforms.radius.value=xr.radius,e.setRenderTarget(xr.mapPass),e.clear(),e.renderBufferDirect(Nt,null,Pr,G,ue,null),re.uniforms.shadow_pass.value=xr.mapPass.texture,re.uniforms.resolution.value=xr.mapSize,re.uniforms.radius.value=xr.radius,e.setRenderTarget(xr.map),e.clear(),e.renderBufferDirect(Nt,null,Pr,re,ue,null))}}we.needsUpdate=!1,e.setRenderTarget(He,lt,ht)}}}function Ko(e,n,o){function c(Ne,Gt,Yt){var kt=new Uint8Array(4),Ot=e.createTexture();for(e.bindTexture(Ne,Ot),e.texParameteri(Ne,10241,9728),e.texParameteri(Ne,10240,9728),Ne=0;Ne<Yt;Ne++)e.texImage2D(Gt+Ne,0,6408,1,1,0,6408,5121,kt);return Ot}function v(Ne,Gt){ue[Ne]=1,we[Ne]===0&&(e.enableVertexAttribArray(Ne),we[Ne]=1),Te[Ne]!==Gt&&((k?e:n.get("ANGLE_instanced_arrays"))[k?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Ne,Gt),Te[Ne]=Gt)}function g(Ne){je[Ne]!==!0&&(e.enable(Ne),je[Ne]=!0)}function A(Ne){je[Ne]!==!1&&(e.disable(Ne),je[Ne]=!1)}function y(Ne,Gt,Yt,kt,Ot,Jt,Kr,gn){if(Ne===0)He&&(A(3042),He=!1);else if(He||(g(3042),He=!0),Ne!==5){if(Ne!==lt||gn!==Pr){if((ht!==100||Et!==100)&&(e.blendEquation(32774),Et=ht=100),gn)switch(Ne){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,0,769,771);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ne)}else switch(Ne){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFunc(0,769);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ne)}Nt=xr=vt=It=null,lt=Ne,Pr=gn}}else Ot=Ot||Gt,Jt=Jt||Yt,Kr=Kr||kt,(Gt!==ht||Ot!==Et)&&(e.blendEquationSeparate(ft[Gt],ft[Ot]),ht=Gt,Et=Ot),(Yt!==It||kt!==vt||Jt!==xr||Kr!==Nt)&&(e.blendFuncSeparate(Mt[Yt],Mt[kt],Mt[Jt],Mt[Kr]),It=Yt,vt=kt,xr=Jt,Nt=Kr),lt=Ne,Pr=null}function T(Ne){qr!==Ne&&(Ne?e.frontFace(2304):e.frontFace(2305),qr=Ne)}function D(Ne){Ne!==0?(g(2884),Ne!==Fr&&(Ne===1?e.cullFace(1029):Ne===2?e.cullFace(1028):e.cullFace(1032))):A(2884),Fr=Ne}function X(Ne,Gt,Yt){Ne?(g(32823),(Gr!==Gt||ze!==Yt)&&(e.polygonOffset(Gt,Yt),Gr=Gt,ze=Yt)):A(32823)}function I(Ne){Ne===void 0&&(Ne=33984+Ue-1),Je!==Ne&&(e.activeTexture(Ne),Je=Ne)}var b,N,k=o.isWebGL2,G=new function(){var Ne=!1,Gt=new te,Yt=null,kt=new te(0,0,0,0);return{setMask:function(Ot){Yt===Ot||Ne||(e.colorMask(Ot,Ot,Ot,Ot),Yt=Ot)},setLocked:function(Ot){Ne=Ot},setClear:function(Ot,Jt,Kr,gn,Zt){Zt===!0&&(Ot*=gn,Jt*=gn,Kr*=gn),Gt.set(Ot,Jt,Kr,gn),kt.equals(Gt)===!1&&(e.clearColor(Ot,Jt,Kr,gn),kt.copy(Gt))},reset:function(){Ne=!1,Yt=null,kt.set(-1,0,0,0)}}},re=new function(){var Ne=!1,Gt=null,Yt=null,kt=null;return{setTest:function(Ot){Ot?g(2929):A(2929)},setMask:function(Ot){Gt===Ot||Ne||(e.depthMask(Ot),Gt=Ot)},setFunc:function(Ot){if(Yt!==Ot){if(Ot)switch(Ot){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);Yt=Ot}},setLocked:function(Ot){Ne=Ot},setClear:function(Ot){kt!==Ot&&(e.clearDepth(Ot),kt=Ot)},reset:function(){Ne=!1,kt=Yt=Gt=null}}},se=new function(){var Ne=!1,Gt=null,Yt=null,kt=null,Ot=null,Jt=null,Kr=null,gn=null,Zt=null;return{setTest:function(Nr){Ne||(Nr?g(2960):A(2960))},setMask:function(Nr){Gt===Nr||Ne||(e.stencilMask(Nr),Gt=Nr)},setFunc:function(Nr,Ln,Tr){(Yt!==Nr||kt!==Ln||Ot!==Tr)&&(e.stencilFunc(Nr,Ln,Tr),Yt=Nr,kt=Ln,Ot=Tr)},setOp:function(Nr,Ln,Tr){(Jt!==Nr||Kr!==Ln||gn!==Tr)&&(e.stencilOp(Nr,Ln,Tr),Jt=Nr,Kr=Ln,gn=Tr)},setLocked:function(Nr){Ne=Nr},setClear:function(Nr){Zt!==Nr&&(e.clearStencil(Nr),Zt=Nr)},reset:function(){Ne=!1,Zt=gn=Kr=Jt=Ot=kt=Yt=Gt=null}}};o=e.getParameter(34921);var ue=new Uint8Array(o),we=new Uint8Array(o),Te=new Uint8Array(o),je={},Ge=null,He=null,lt=null,ht=null,It=null,vt=null,Et=null,xr=null,Nt=null,Pr=!1,qr=null,Fr=null,$n=null,Gr=null,ze=null,Ue=e.getParameter(35661),ke=!1;o=0,o=e.getParameter(7938),o.indexOf("WebGL")!==-1?(o=parseFloat(/^WebGL ([0-9])/.exec(o)[1]),ke=1<=o):o.indexOf("OpenGL ES")!==-1&&(o=parseFloat(/^OpenGL ES ([0-9])/.exec(o)[1]),ke=2<=o);var Je=null,Ce={},be=new te,Fe=new te,Qe={};Qe[3553]=c(3553,3553,1),Qe[34067]=c(34067,34069,6),G.setClear(0,0,0,1),re.setClear(1),se.setClear(0),g(2929),re.setFunc(3),T(!1),D(1),g(2884),y(0);var ft=(b={},Zi(b,100,32774),Zi(b,101,32778),Zi(b,102,32779),b);k?(ft[103]=32775,ft[104]=32776):(b=n.get("EXT_blend_minmax"),b!==null&&(ft[103]=b.MIN_EXT,ft[104]=b.MAX_EXT));var Mt=(N={},Zi(N,200,0),Zi(N,201,1),Zi(N,202,768),Zi(N,204,770),Zi(N,210,776),Zi(N,208,774),Zi(N,206,772),Zi(N,203,769),Zi(N,205,771),Zi(N,209,775),Zi(N,207,773),N);return{buffers:{color:G,depth:re,stencil:se},initAttributes:function(){for(var Ne=0,Gt=ue.length;Ne<Gt;Ne++)ue[Ne]=0},enableAttribute:function(Ne){v(Ne,0)},enableAttributeAndDivisor:v,disableUnusedAttributes:function(){for(var Ne=0,Gt=we.length;Ne!==Gt;++Ne)we[Ne]!==ue[Ne]&&(e.disableVertexAttribArray(Ne),we[Ne]=0)},vertexAttribPointer:function(Ne,Gt,Yt,kt,Ot,Jt){k!==!0||Yt!==5124&&Yt!==5125?e.vertexAttribPointer(Ne,Gt,Yt,kt,Ot,Jt):e.vertexAttribIPointer(Ne,Gt,Yt,kt,Ot,Jt)},enable:g,disable:A,useProgram:function(Ne){return Ge!==Ne?(e.useProgram(Ne),Ge=Ne,!0):!1},setBlending:y,setMaterial:function(Ne,Gt){Ne.side===2?A(2884):g(2884);var Yt=Ne.side===1;Gt&&(Yt=!Yt),T(Yt),Ne.blending===1&&Ne.transparent===!1?y(0):y(Ne.blending,Ne.blendEquation,Ne.blendSrc,Ne.blendDst,Ne.blendEquationAlpha,Ne.blendSrcAlpha,Ne.blendDstAlpha,Ne.premultipliedAlpha),re.setFunc(Ne.depthFunc),re.setTest(Ne.depthTest),re.setMask(Ne.depthWrite),G.setMask(Ne.colorWrite),Gt=Ne.stencilWrite,se.setTest(Gt),Gt&&(se.setMask(Ne.stencilWriteMask),se.setFunc(Ne.stencilFunc,Ne.stencilRef,Ne.stencilFuncMask),se.setOp(Ne.stencilFail,Ne.stencilZFail,Ne.stencilZPass)),X(Ne.polygonOffset,Ne.polygonOffsetFactor,Ne.polygonOffsetUnits)},setFlipSided:T,setCullFace:D,setLineWidth:function(Ne){Ne!==$n&&(ke&&e.lineWidth(Ne),$n=Ne)},setPolygonOffset:X,setScissorTest:function(Ne){Ne?g(3089):A(3089)},activeTexture:I,bindTexture:function(Ne,Gt){Je===null&&I();var Yt=Ce[Je];Yt===void 0&&(Yt={type:void 0,texture:void 0},Ce[Je]=Yt),(Yt.type!==Ne||Yt.texture!==Gt)&&(e.bindTexture(Ne,Gt||Qe[Ne]),Yt.type=Ne,Yt.texture=Gt)},unbindTexture:function(){var Ne=Ce[Je];Ne!==void 0&&Ne.type!==void 0&&(e.bindTexture(Ne.type,null),Ne.type=void 0,Ne.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(Ne){console.error("THREE.WebGLState:",Ne)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(Ne){console.error("THREE.WebGLState:",Ne)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(Ne){console.error("THREE.WebGLState:",Ne)}},scissor:function(Ne){be.equals(Ne)===!1&&(e.scissor(Ne.x,Ne.y,Ne.z,Ne.w),be.copy(Ne))},viewport:function(Ne){Fe.equals(Ne)===!1&&(e.viewport(Ne.x,Ne.y,Ne.z,Ne.w),Fe.copy(Ne))},reset:function(){for(var Ne=0;Ne<we.length;Ne++)we[Ne]===1&&(e.disableVertexAttribArray(Ne),we[Ne]=0);je={},Je=null,Ce={},Fr=qr=lt=Ge=null,G.reset(),re.reset(),se.reset()}}}function Do(e,n,o,c,v,g,A){function y(Ce,be){return $n?new OffscreenCanvas(Ce,be):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function T(Ce,be,Fe,Qe){var ft=1;if((Ce.width>Qe||Ce.height>Qe)&&(ft=Qe/Math.max(Ce.width,Ce.height)),1>ft||be===!0){if(typeof HTMLImageElement<"u"&&Ce instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Ce instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Ce instanceof ImageBitmap)return Qe=be?ai.floorPowerOfTwo:Math.floor,be=Qe(ft*Ce.width),ft=Qe(ft*Ce.height),Fr===void 0&&(Fr=y(be,ft)),Fe=Fe?y(be,ft):Fr,Fe.width=be,Fe.height=ft,Fe.getContext("2d").drawImage(Ce,0,0,be,ft),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ce.width+"x"+Ce.height+") to ("+be+"x"+ft+")."),Fe;"data"in Ce&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ce.width+"x"+Ce.height+").")}return Ce}function D(Ce){return ai.isPowerOfTwo(Ce.width)&&ai.isPowerOfTwo(Ce.height)}function X(Ce,be){return Ce.generateMipmaps&&be&&Ce.minFilter!==1003&&Ce.minFilter!==1006}function I(Ce,be,Fe,Qe){e.generateMipmap(Ce),c.get(be).__maxMipLevel=Math.log(Math.max(Fe,Qe))*Math.LOG2E}function b(Ce,be,Fe){if(vt===!1)return be;if(Ce!==null){if(e[Ce]!==void 0)return e[Ce];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Ce+"'")}return Ce=be,be===6403&&(Fe===5126&&(Ce=33326),Fe===5131&&(Ce=33325),Fe===5121&&(Ce=33321)),be===6407&&(Fe===5126&&(Ce=34837),Fe===5131&&(Ce=34843),Fe===5121&&(Ce=32849)),be===6408&&(Fe===5126&&(Ce=34836),Fe===5131&&(Ce=34842),Fe===5121&&(Ce=32856)),Ce!==33325&&Ce!==33326&&Ce!==34842&&Ce!==34836||n.get("EXT_color_buffer_float"),Ce}function N(Ce){return Ce===1003||Ce===1004||Ce===1005?9728:9729}function k(Ce){Ce=Ce.target,Ce.removeEventListener("dispose",k);var be=c.get(Ce);be.__webglInit!==void 0&&(e.deleteTexture(be.__webglTexture),c.remove(Ce)),Ce.isVideoTexture&&qr.delete(Ce),A.memory.textures--}function G(Ce){Ce=Ce.target,Ce.removeEventListener("dispose",G);var be=c.get(Ce),Fe=c.get(Ce.texture);if(Ce){if(Fe.__webglTexture!==void 0&&e.deleteTexture(Fe.__webglTexture),Ce.depthTexture&&Ce.depthTexture.dispose(),Ce.isWebGLCubeRenderTarget)for(Fe=0;6>Fe;Fe++)e.deleteFramebuffer(be.__webglFramebuffer[Fe]),be.__webglDepthbuffer&&e.deleteRenderbuffer(be.__webglDepthbuffer[Fe]);else e.deleteFramebuffer(be.__webglFramebuffer),be.__webglDepthbuffer&&e.deleteRenderbuffer(be.__webglDepthbuffer),be.__webglMultisampledFramebuffer&&e.deleteFramebuffer(be.__webglMultisampledFramebuffer),be.__webglColorRenderbuffer&&e.deleteRenderbuffer(be.__webglColorRenderbuffer),be.__webglDepthRenderbuffer&&e.deleteRenderbuffer(be.__webglDepthRenderbuffer);c.remove(Ce.texture),c.remove(Ce)}A.memory.textures--}function re(Ce,be){var Fe=c.get(Ce);if(Ce.isVideoTexture){var Qe=A.render.frame;qr.get(Ce)!==Qe&&(qr.set(Ce,Qe),Ce.update())}if(0<Ce.version&&Fe.__version!==Ce.version)if(Qe=Ce.image,Qe===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(Qe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{je(Fe,Ce,be);return}o.activeTexture(33984+be),o.bindTexture(3553,Fe.__webglTexture)}function se(Ce,be){if(Ce.image.length===6){var Fe=c.get(Ce);if(0<Ce.version&&Fe.__version!==Ce.version){Te(Fe,Ce),o.activeTexture(33984+be),o.bindTexture(34067,Fe.__webglTexture),e.pixelStorei(37440,Ce.flipY);var Qe=Ce&&(Ce.isCompressedTexture||Ce.image[0].isCompressedTexture);be=Ce.image[0]&&Ce.image[0].isDataTexture;for(var ft=[],Mt=0;6>Mt;Mt++)ft[Mt]=Qe||be?be?Ce.image[Mt].image:Ce.image[Mt]:T(Ce.image[Mt],!1,!0,xr);var Ne=ft[0],Gt=D(Ne)||vt,Yt=g.convert(Ce.format),kt=g.convert(Ce.type),Ot=b(Ce.internalFormat,Yt,kt);if(we(34067,Ce,Gt),Qe){for(Mt=0;6>Mt;Mt++){var Jt=ft[Mt].mipmaps;for(Qe=0;Qe<Jt.length;Qe++){var Kr=Jt[Qe];Ce.format!==1023&&Ce.format!==1022?Yt!==null?o.compressedTexImage2D(34069+Mt,Qe,Ot,Kr.width,Kr.height,0,Kr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):o.texImage2D(34069+Mt,Qe,Ot,Kr.width,Kr.height,0,Yt,kt,Kr.data)}}Fe.__maxMipLevel=Jt.length-1}else{for(Jt=Ce.mipmaps,Mt=0;6>Mt;Mt++)if(be)for(o.texImage2D(34069+Mt,0,Ot,ft[Mt].width,ft[Mt].height,0,Yt,kt,ft[Mt].data),Qe=0;Qe<Jt.length;Qe++)Kr=Jt[Qe],Kr=Kr.image[Mt].image,o.texImage2D(34069+Mt,Qe+1,Ot,Kr.width,Kr.height,0,Yt,kt,Kr.data);else for(o.texImage2D(34069+Mt,0,Ot,Yt,kt,ft[Mt]),Qe=0;Qe<Jt.length;Qe++)Kr=Jt[Qe],o.texImage2D(34069+Mt,Qe+1,Ot,Yt,kt,Kr.image[Mt]);Fe.__maxMipLevel=Jt.length}X(Ce,Gt)&&I(34067,Ce,Ne.width,Ne.height),Fe.__version=Ce.version,Ce.onUpdate&&Ce.onUpdate(Ce)}else o.activeTexture(33984+be),o.bindTexture(34067,Fe.__webglTexture)}}function ue(Ce,be){o.activeTexture(33984+be),o.bindTexture(34067,c.get(Ce).__webglTexture)}function we(Ce,be,Fe){Fe?(e.texParameteri(Ce,10242,ze[be.wrapS]),e.texParameteri(Ce,10243,ze[be.wrapT]),Ce!==32879&&Ce!==35866||e.texParameteri(Ce,32882,ze[be.wrapR]),e.texParameteri(Ce,10240,Ue[be.magFilter]),e.texParameteri(Ce,10241,Ue[be.minFilter])):(e.texParameteri(Ce,10242,33071),e.texParameteri(Ce,10243,33071),Ce!==32879&&Ce!==35866||e.texParameteri(Ce,32882,33071),be.wrapS===1001&&be.wrapT===1001||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(Ce,10240,N(be.magFilter)),e.texParameteri(Ce,10241,N(be.minFilter)),be.minFilter!==1003&&be.minFilter!==1006&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!(Fe=n.get("EXT_texture_filter_anisotropic"))||be.type===1015&&n.get("OES_texture_float_linear")===null||be.type===1016&&(vt||n.get("OES_texture_half_float_linear"))===null||!(1<be.anisotropy||c.get(be).__currentAnisotropy)||(e.texParameterf(Ce,Fe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(be.anisotropy,v.getMaxAnisotropy())),c.get(be).__currentAnisotropy=be.anisotropy)}function Te(Ce,be){Ce.__webglInit===void 0&&(Ce.__webglInit=!0,be.addEventListener("dispose",k),Ce.__webglTexture=e.createTexture(),A.memory.textures++)}function je(Ce,be,Fe){var Qe=3553;be.isDataTexture2DArray&&(Qe=35866),be.isDataTexture3D&&(Qe=32879),Te(Ce,be),o.activeTexture(33984+Fe),o.bindTexture(Qe,Ce.__webglTexture),e.pixelStorei(37440,be.flipY),e.pixelStorei(37441,be.premultiplyAlpha),e.pixelStorei(3317,be.unpackAlignment),Fe=vt?!1:be.wrapS!==1001||be.wrapT!==1001||be.minFilter!==1003&&be.minFilter!==1006,Fe=Fe&&D(be.image)===!1,Fe=T(be.image,Fe,!1,Nt);var ft=D(Fe)||vt,Mt=g.convert(be.format),Ne=g.convert(be.type),Gt=b(be.internalFormat,Mt,Ne);we(Qe,be,ft);var Yt=be.mipmaps;if(be.isDepthTexture)Gt=6402,vt?Gt=be.type===1015?36012:be.type===1014?33190:be.type===1020?35056:33189:be.type===1015&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),be.format===1026&&Gt===6402&&be.type!==1012&&be.type!==1014&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),be.type=1012,Ne=g.convert(be.type)),be.format===1027&&Gt===6402&&(Gt=34041,be.type!==1020&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),be.type=1020,Ne=g.convert(be.type))),o.texImage2D(3553,0,Gt,Fe.width,Fe.height,0,Mt,Ne,null);else if(be.isDataTexture)if(0<Yt.length&&ft){for(var kt=0,Ot=Yt.length;kt<Ot;kt++){var Jt=Yt[kt];o.texImage2D(3553,kt,Gt,Jt.width,Jt.height,0,Mt,Ne,Jt.data)}be.generateMipmaps=!1,Ce.__maxMipLevel=Yt.length-1}else o.texImage2D(3553,0,Gt,Fe.width,Fe.height,0,Mt,Ne,Fe.data),Ce.__maxMipLevel=0;else if(be.isCompressedTexture){for(kt=0,Ot=Yt.length;kt<Ot;kt++)Jt=Yt[kt],be.format!==1023&&be.format!==1022?Mt!==null?o.compressedTexImage2D(3553,kt,Gt,Jt.width,Jt.height,0,Jt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):o.texImage2D(3553,kt,Gt,Jt.width,Jt.height,0,Mt,Ne,Jt.data);Ce.__maxMipLevel=Yt.length-1}else if(be.isDataTexture2DArray)o.texImage3D(35866,0,Gt,Fe.width,Fe.height,Fe.depth,0,Mt,Ne,Fe.data),Ce.__maxMipLevel=0;else if(be.isDataTexture3D)o.texImage3D(32879,0,Gt,Fe.width,Fe.height,Fe.depth,0,Mt,Ne,Fe.data),Ce.__maxMipLevel=0;else if(0<Yt.length&&ft){for(kt=0,Ot=Yt.length;kt<Ot;kt++)Jt=Yt[kt],o.texImage2D(3553,kt,Gt,Mt,Ne,Jt);be.generateMipmaps=!1,Ce.__maxMipLevel=Yt.length-1}else o.texImage2D(3553,0,Gt,Mt,Ne,Fe),Ce.__maxMipLevel=0;X(be,ft)&&I(Qe,be,Fe.width,Fe.height),Ce.__version=be.version,be.onUpdate&&be.onUpdate(be)}function Ge(Ce,be,Fe,Qe){var ft=g.convert(be.texture.format),Mt=g.convert(be.texture.type),Ne=b(be.texture.internalFormat,ft,Mt);o.texImage2D(Qe,0,Ne,be.width,be.height,0,ft,Mt,null),e.bindFramebuffer(36160,Ce),e.framebufferTexture2D(36160,Fe,Qe,c.get(be.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function He(Ce,be,Fe){if(e.bindRenderbuffer(36161,Ce),be.depthBuffer&&!be.stencilBuffer){var Qe=33189;Fe?((Fe=be.depthTexture)&&Fe.isDepthTexture&&(Fe.type===1015?Qe=36012:Fe.type===1014&&(Qe=33190)),Fe=lt(be),e.renderbufferStorageMultisample(36161,Fe,Qe,be.width,be.height)):e.renderbufferStorage(36161,Qe,be.width,be.height),e.framebufferRenderbuffer(36160,36096,36161,Ce)}else be.depthBuffer&&be.stencilBuffer?(Fe?(Fe=lt(be),e.renderbufferStorageMultisample(36161,Fe,35056,be.width,be.height)):e.renderbufferStorage(36161,34041,be.width,be.height),e.framebufferRenderbuffer(36160,33306,36161,Ce)):(Ce=g.convert(be.texture.format),Qe=g.convert(be.texture.type),Qe=b(be.texture.internalFormat,Ce,Qe),Fe?(Fe=lt(be),e.renderbufferStorageMultisample(36161,Fe,Qe,be.width,be.height)):e.renderbufferStorage(36161,Qe,be.width,be.height));e.bindRenderbuffer(36161,null)}function lt(Ce){return vt&&Ce.isWebGLMultisampleRenderTarget?Math.min(Pr,Ce.samples):0}var ht,It,vt=v.isWebGL2,Et=v.maxTextures,xr=v.maxCubemapSize,Nt=v.maxTextureSize,Pr=v.maxSamples,qr=new co,Fr,$n=!1;try{$n=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}var Gr=0,ze=(ht={},Zi(ht,1e3,10497),Zi(ht,1001,33071),Zi(ht,1002,33648),ht),Ue=(It={},Zi(It,1003,9728),Zi(It,1004,9984),Zi(It,1005,9986),Zi(It,1006,9729),Zi(It,1007,9985),Zi(It,1008,9987),It),ke=!1,Je=!1;this.allocateTextureUnit=function(){var Ce=Gr;return Ce>=Et&&console.warn("THREE.WebGLTextures: Trying to use "+Ce+" texture units while this GPU supports only "+Et),Gr+=1,Ce},this.resetTextureUnits=function(){Gr=0},this.setTexture2D=re,this.setTexture2DArray=function(Ce,be){var Fe=c.get(Ce);0<Ce.version&&Fe.__version!==Ce.version?je(Fe,Ce,be):(o.activeTexture(33984+be),o.bindTexture(35866,Fe.__webglTexture))},this.setTexture3D=function(Ce,be){var Fe=c.get(Ce);0<Ce.version&&Fe.__version!==Ce.version?je(Fe,Ce,be):(o.activeTexture(33984+be),o.bindTexture(32879,Fe.__webglTexture))},this.setTextureCube=se,this.setTextureCubeDynamic=ue,this.setupRenderTarget=function(Ce){var be=c.get(Ce),Fe=c.get(Ce.texture);Ce.addEventListener("dispose",G),Fe.__webglTexture=e.createTexture(),A.memory.textures++;var Qe=Ce.isWebGLCubeRenderTarget===!0,ft=Ce.isWebGLMultisampleRenderTarget===!0,Mt=D(Ce)||vt;if(!vt||Ce.texture.format!==1022||Ce.texture.type!==1015&&Ce.texture.type!==1016||(Ce.texture.format=1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Qe)for(be.__webglFramebuffer=[],ft=0;6>ft;ft++)be.__webglFramebuffer[ft]=e.createFramebuffer();else if(be.__webglFramebuffer=e.createFramebuffer(),ft)if(vt){be.__webglMultisampledFramebuffer=e.createFramebuffer(),be.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,be.__webglColorRenderbuffer),ft=g.convert(Ce.texture.format);var Ne=g.convert(Ce.texture.type);ft=b(Ce.texture.internalFormat,ft,Ne),Ne=lt(Ce),e.renderbufferStorageMultisample(36161,Ne,ft,Ce.width,Ce.height),e.bindFramebuffer(36160,be.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,be.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),Ce.depthBuffer&&(be.__webglDepthRenderbuffer=e.createRenderbuffer(),He(be.__webglDepthRenderbuffer,Ce,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Qe){for(o.bindTexture(34067,Fe.__webglTexture),we(34067,Ce.texture,Mt),ft=0;6>ft;ft++)Ge(be.__webglFramebuffer[ft],Ce,36064,34069+ft);X(Ce.texture,Mt)&&I(34067,Ce.texture,Ce.width,Ce.height),o.bindTexture(34067,null)}else o.bindTexture(3553,Fe.__webglTexture),we(3553,Ce.texture,Mt),Ge(be.__webglFramebuffer,Ce,36064,3553),X(Ce.texture,Mt)&&I(3553,Ce.texture,Ce.width,Ce.height),o.bindTexture(3553,null);if(Ce.depthBuffer){if(be=c.get(Ce),Fe=Ce.isWebGLCubeRenderTarget===!0,Ce.depthTexture){if(Fe)throw Error("target.depthTexture not supported in Cube render targets");if(Ce&&Ce.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,be.__webglFramebuffer),!Ce.depthTexture||!Ce.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(c.get(Ce.depthTexture).__webglTexture&&Ce.depthTexture.image.width===Ce.width&&Ce.depthTexture.image.height===Ce.height||(Ce.depthTexture.image.width=Ce.width,Ce.depthTexture.image.height=Ce.height,Ce.depthTexture.needsUpdate=!0),re(Ce.depthTexture,0),be=c.get(Ce.depthTexture).__webglTexture,Ce.depthTexture.format===1026)e.framebufferTexture2D(36160,36096,3553,be,0);else if(Ce.depthTexture.format===1027)e.framebufferTexture2D(36160,33306,3553,be,0);else throw Error("Unknown depthTexture format")}else if(Fe)for(be.__webglDepthbuffer=[],Fe=0;6>Fe;Fe++)e.bindFramebuffer(36160,be.__webglFramebuffer[Fe]),be.__webglDepthbuffer[Fe]=e.createRenderbuffer(),He(be.__webglDepthbuffer[Fe],Ce,!1);else e.bindFramebuffer(36160,be.__webglFramebuffer),be.__webglDepthbuffer=e.createRenderbuffer(),He(be.__webglDepthbuffer,Ce,!1);e.bindFramebuffer(36160,null)}},this.updateRenderTargetMipmap=function(Ce){var be=Ce.texture,Fe=D(Ce)||vt;if(X(be,Fe)){Fe=Ce.isWebGLCubeRenderTarget?34067:3553;var Qe=c.get(be).__webglTexture;o.bindTexture(Fe,Qe),I(Fe,be,Ce.width,Ce.height),o.bindTexture(Fe,null)}},this.updateMultisampleRenderTarget=function(Ce){if(Ce.isWebGLMultisampleRenderTarget)if(vt){var be=c.get(Ce);e.bindFramebuffer(36008,be.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,be.__webglFramebuffer);var Fe=Ce.width,Qe=Ce.height,ft=16384;Ce.depthBuffer&&(ft|=256),Ce.stencilBuffer&&(ft|=1024),e.blitFramebuffer(0,0,Fe,Qe,0,0,Fe,Qe,ft,9728),e.bindFramebuffer(36160,be.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(Ce,be){Ce&&Ce.isWebGLRenderTarget&&(ke===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),ke=!0),Ce=Ce.texture),re(Ce,be)},this.safeSetTextureCube=function(Ce,be){Ce&&Ce.isWebGLCubeRenderTarget&&(Je===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Je=!0),Ce=Ce.texture),Ce&&Ce.isCubeTexture||Array.isArray(Ce.image)&&Ce.image.length===6?se(Ce,be):ue(Ce,be)}}function Nf(e,n,o){var c=o.isWebGL2;return{convert:function(v){if(v===1009)return 5121;if(v===1017)return 32819;if(v===1018)return 32820;if(v===1019)return 33635;if(v===1010)return 5120;if(v===1011)return 5122;if(v===1012)return 5123;if(v===1013)return 5124;if(v===1014)return 5125;if(v===1015)return 5126;if(v===1016){if(c)return 5131;var g=n.get("OES_texture_half_float");return g!==null?g.HALF_FLOAT_OES:null}if(v===1021)return 6406;if(v===1022)return 6407;if(v===1023)return 6408;if(v===1024)return 6409;if(v===1025)return 6410;if(v===1026)return 6402;if(v===1027)return 34041;if(v===1028)return 6403;if(v===1029)return 36244;if(v===1030)return 33319;if(v===1031)return 33320;if(v===1032)return 36248;if(v===1033)return 36249;if(v===33776||v===33777||v===33778||v===33779)if(g=n.get("WEBGL_compressed_texture_s3tc"),g!==null){if(v===33776)return g.COMPRESSED_RGB_S3TC_DXT1_EXT;if(v===33777)return g.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(v===33778)return g.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(v===33779)return g.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(v===35840||v===35841||v===35842||v===35843)if(g=n.get("WEBGL_compressed_texture_pvrtc"),g!==null){if(v===35840)return g.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(v===35841)return g.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(v===35842)return g.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(v===35843)return g.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(v===36196)return g=n.get("WEBGL_compressed_texture_etc1"),g!==null?g.COMPRESSED_RGB_ETC1_WEBGL:null;if((v===37492||v===37496)&&(g=n.get("WEBGL_compressed_texture_etc"),g!==null)){if(v===37492)return g.COMPRESSED_RGB8_ETC2;if(v===37496)return g.COMPRESSED_RGBA8_ETC2_EAC}if(v===37808||v===37809||v===37810||v===37811||v===37812||v===37813||v===37814||v===37815||v===37816||v===37817||v===37818||v===37819||v===37820||v===37821||v===37840||v===37841||v===37842||v===37843||v===37844||v===37845||v===37846||v===37847||v===37848||v===37849||v===37850||v===37851||v===37852||v===37853)return g=n.get("WEBGL_compressed_texture_astc"),g!==null?v:null;if(v===36492)return g=n.get("EXT_texture_compression_bptc"),g!==null?v:null;if(v===1020)return c?34042:(g=n.get("WEBGL_depth_texture"),g!==null?g.UNSIGNED_INT_24_8_WEBGL:null)}}}function Bf(e){lr.call(this),this.cameras=e||[]}function fs(){ce.call(this),this.type="Group"}function Dr(){this._grip=this._targetRay=null}function FC(e,n){function o(ht){var It=k.get(ht.inputSource);It&&It.dispatchEvent({type:ht.type})}function c(){k.forEach(function(ht,It){ht.disconnect(It)}),k.clear(),e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),lt.stop(),y.isPresenting=!1,y.dispatchEvent({type:"sessionend"})}function v(ht){X=ht,lt.setContext(T),lt.start(),y.isPresenting=!0,y.dispatchEvent({type:"sessionstart"})}function g(ht){for(var It=T.inputSources,vt=0;vt<N.length;vt++)k.set(It[vt],N[vt]);for(vt=0;vt<ht.removed.length;vt++){It=ht.removed[vt];var Et=k.get(It);Et&&(Et.dispatchEvent({type:"disconnected",data:It}),k.delete(It))}for(vt=0;vt<ht.added.length;vt++)It=ht.added[vt],(Et=k.get(It))&&Et.dispatchEvent({type:"connected",data:It})}function A(ht,It){It===null?ht.matrixWorld.copy(ht.matrix):ht.matrixWorld.multiplyMatrices(It.matrixWorld,ht.matrix),ht.matrixWorldInverse.getInverse(ht.matrixWorld)}var y=this,T=null,D=1,X=null,I="local-floor",b=null,N=[],k=new B2,G=new lr;G.layers.enable(1),G.viewport=new te;var re=new lr;re.layers.enable(2),re.viewport=new te;var se=[G,re],ue=new Bf;ue.layers.enable(1),ue.layers.enable(2);var we=null,Te=null;this.isPresenting=this.enabled=!1,this.getController=function(ht){var It=N[ht];return It===void 0&&(It=new Dr,N[ht]=It),It.getTargetRaySpace()},this.getControllerGrip=function(ht){var It=N[ht];return It===void 0&&(It=new Dr,N[ht]=It),It.getGripSpace()},this.setFramebufferScaleFactor=function(ht){D=ht,y.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ht){I=ht,y.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return X},this.getSession=function(){return T},this.setSession=function(ht){T=ht,T!==null&&(T.addEventListener("select",o),T.addEventListener("selectstart",o),T.addEventListener("selectend",o),T.addEventListener("squeeze",o),T.addEventListener("squeezestart",o),T.addEventListener("squeezeend",o),T.addEventListener("end",c),ht=n.getContextAttributes(),ht.xrCompatible!==!0&&n.makeXRCompatible(),ht=new XRWebGLLayer(T,n,{antialias:ht.antialias,alpha:ht.alpha,depth:ht.depth,stencil:ht.stencil,framebufferScaleFactor:D}),T.updateRenderState({baseLayer:ht}),T.requestReferenceSpace(I).then(v),T.addEventListener("inputsourceschange",g))};var je=new oe,Ge=new oe;this.getCamera=function(ht){ue.near=re.near=G.near=ht.near,ue.far=re.far=G.far=ht.far,(we!==ue.near||Te!==ue.far)&&(T.updateRenderState({depthNear:ue.near,depthFar:ue.far}),we=ue.near,Te=ue.far);var It=ht.parent,vt=ue.cameras;A(ue,It);for(var Et=0;Et<vt.length;Et++)A(vt[Et],It);for(ht.matrixWorld.copy(ue.matrixWorld),ht=ht.children,Et=0,It=ht.length;Et<It;Et++)ht[Et].updateMatrixWorld(!0);if(vt.length===2){je.setFromMatrixPosition(G.matrixWorld),Ge.setFromMatrixPosition(re.matrixWorld),vt=je.distanceTo(Ge);var xr=G.projectionMatrix.elements,Nt=re.projectionMatrix.elements,Pr=xr[14]/(xr[10]-1);Et=xr[14]/(xr[10]+1),ht=(xr[9]+1)/xr[5],It=(xr[9]-1)/xr[5];var qr=(xr[8]-1)/xr[0],Fr=(Nt[8]+1)/Nt[0];Nt=Pr*qr,xr=Pr*Fr,Fr=vt/(-qr+Fr),qr=Fr*-qr,G.matrixWorld.decompose(ue.position,ue.quaternion,ue.scale),ue.translateX(qr),ue.translateZ(Fr),ue.matrixWorld.compose(ue.position,ue.quaternion,ue.scale),ue.matrixWorldInverse.getInverse(ue.matrixWorld),Pr+=Fr,Fr=Et+Fr,ue.projectionMatrix.makePerspective(Nt-qr,xr+(vt-qr),ht*Et/Fr*Pr,It*Et/Fr*Pr,Pr,Fr)}else ue.projectionMatrix.copy(G.projectionMatrix);return ue};var He=null,lt=new qn;lt.setAnimationLoop(function(ht,It){if(b=It.getViewerPose(X),b!==null){var vt=b.views,Et=T.renderState.baseLayer;e.setFramebuffer(Et.framebuffer);var xr=!1;vt.length!==ue.cameras.length&&(ue.cameras.length=0,xr=!0);for(var Nt=0;Nt<vt.length;Nt++){var Pr=vt[Nt],qr=Et.getViewport(Pr),Fr=se[Nt];Fr.matrix.fromArray(Pr.transform.matrix),Fr.projectionMatrix.fromArray(Pr.projectionMatrix),Fr.viewport.set(qr.x,qr.y,qr.width,qr.height),Nt===0&&ue.matrix.copy(Fr.matrix),xr===!0&&ue.cameras.push(Fr)}}for(vt=T.inputSources,Nt=0;Nt<N.length;Nt++)N[Nt].update(vt[Nt],It,X);He&&He(ht,It)}),this.setAnimationLoop=function(ht){He=ht},this.dispose=function(){}}function G3(e){function n(c,v,g){if(c.opacity.value=v.opacity,v.color&&c.diffuse.value.copy(v.color),v.emissive&&c.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(c.map.value=v.map),v.alphaMap&&(c.alphaMap.value=v.alphaMap),v.specularMap&&(c.specularMap.value=v.specularMap),(g=v.envMap||g)&&(c.envMap.value=g,c.flipEnvMap.value=g.isCubeTexture?-1:1,c.reflectivity.value=v.reflectivity,c.refractionRatio.value=v.refractionRatio,c.maxMipLevel.value=e.get(g).__maxMipLevel),v.lightMap&&(c.lightMap.value=v.lightMap,c.lightMapIntensity.value=v.lightMapIntensity),v.aoMap&&(c.aoMap.value=v.aoMap,c.aoMapIntensity.value=v.aoMapIntensity),v.map)var A=v.map;else v.specularMap?A=v.specularMap:v.displacementMap?A=v.displacementMap:v.normalMap?A=v.normalMap:v.bumpMap?A=v.bumpMap:v.roughnessMap?A=v.roughnessMap:v.metalnessMap?A=v.metalnessMap:v.alphaMap?A=v.alphaMap:v.emissiveMap&&(A=v.emissiveMap);if(A!==void 0&&(A.isWebGLRenderTarget&&(A=A.texture),A.matrixAutoUpdate===!0&&A.updateMatrix(),c.uvTransform.value.copy(A.matrix)),v.aoMap)var y=v.aoMap;else v.lightMap&&(y=v.lightMap);y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),c.uv2Transform.value.copy(y.matrix))}function o(c,v,g){c.roughness.value=v.roughness,c.metalness.value=v.metalness,v.roughnessMap&&(c.roughnessMap.value=v.roughnessMap),v.metalnessMap&&(c.metalnessMap.value=v.metalnessMap),v.emissiveMap&&(c.emissiveMap.value=v.emissiveMap),v.bumpMap&&(c.bumpMap.value=v.bumpMap,c.bumpScale.value=v.bumpScale,v.side===1&&(c.bumpScale.value*=-1)),v.normalMap&&(c.normalMap.value=v.normalMap,c.normalScale.value.copy(v.normalScale),v.side===1&&c.normalScale.value.negate()),v.displacementMap&&(c.displacementMap.value=v.displacementMap,c.displacementScale.value=v.displacementScale,c.displacementBias.value=v.displacementBias),(v.envMap||g)&&(c.envMapIntensity.value=v.envMapIntensity)}return{refreshFogUniforms:function(c,v){c.fogColor.value.copy(v.color),v.isFog?(c.fogNear.value=v.near,c.fogFar.value=v.far):v.isFogExp2&&(c.fogDensity.value=v.density)},refreshMaterialUniforms:function(c,v,g,A,y){if(v.isMeshBasicMaterial)n(c,v);else if(v.isMeshLambertMaterial)n(c,v),v.emissiveMap&&(c.emissiveMap.value=v.emissiveMap);else if(v.isMeshToonMaterial)n(c,v),c.specular.value.copy(v.specular),c.shininess.value=Math.max(v.shininess,1e-4),v.gradientMap&&(c.gradientMap.value=v.gradientMap),v.emissiveMap&&(c.emissiveMap.value=v.emissiveMap),v.bumpMap&&(c.bumpMap.value=v.bumpMap,c.bumpScale.value=v.bumpScale,v.side===1&&(c.bumpScale.value*=-1)),v.normalMap&&(c.normalMap.value=v.normalMap,c.normalScale.value.copy(v.normalScale),v.side===1&&c.normalScale.value.negate()),v.displacementMap&&(c.displacementMap.value=v.displacementMap,c.displacementScale.value=v.displacementScale,c.displacementBias.value=v.displacementBias);else if(v.isMeshPhongMaterial)n(c,v),c.specular.value.copy(v.specular),c.shininess.value=Math.max(v.shininess,1e-4),v.emissiveMap&&(c.emissiveMap.value=v.emissiveMap),v.bumpMap&&(c.bumpMap.value=v.bumpMap,c.bumpScale.value=v.bumpScale,v.side===1&&(c.bumpScale.value*=-1)),v.normalMap&&(c.normalMap.value=v.normalMap,c.normalScale.value.copy(v.normalScale),v.side===1&&c.normalScale.value.negate()),v.displacementMap&&(c.displacementMap.value=v.displacementMap,c.displacementScale.value=v.displacementScale,c.displacementBias.value=v.displacementBias);else if(v.isMeshStandardMaterial)n(c,v,g),v.isMeshPhysicalMaterial?(o(c,v,g),c.reflectivity.value=v.reflectivity,c.clearcoat.value=v.clearcoat,c.clearcoatRoughness.value=v.clearcoatRoughness,v.sheen&&c.sheen.value.copy(v.sheen),v.clearcoatMap&&(c.clearcoatMap.value=v.clearcoatMap),v.clearcoatRoughnessMap&&(c.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap),v.clearcoatNormalMap&&(c.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),c.clearcoatNormalMap.value=v.clearcoatNormalMap,v.side===1&&c.clearcoatNormalScale.value.negate()),c.transparency.value=v.transparency):o(c,v,g);else if(v.isMeshMatcapMaterial)n(c,v),v.matcap&&(c.matcap.value=v.matcap),v.bumpMap&&(c.bumpMap.value=v.bumpMap,c.bumpScale.value=v.bumpScale,v.side===1&&(c.bumpScale.value*=-1)),v.normalMap&&(c.normalMap.value=v.normalMap,c.normalScale.value.copy(v.normalScale),v.side===1&&c.normalScale.value.negate()),v.displacementMap&&(c.displacementMap.value=v.displacementMap,c.displacementScale.value=v.displacementScale,c.displacementBias.value=v.displacementBias);else if(v.isMeshDepthMaterial)n(c,v),v.displacementMap&&(c.displacementMap.value=v.displacementMap,c.displacementScale.value=v.displacementScale,c.displacementBias.value=v.displacementBias);else if(v.isMeshDistanceMaterial)n(c,v),v.displacementMap&&(c.displacementMap.value=v.displacementMap,c.displacementScale.value=v.displacementScale,c.displacementBias.value=v.displacementBias),c.referencePosition.value.copy(v.referencePosition),c.nearDistance.value=v.nearDistance,c.farDistance.value=v.farDistance;else if(v.isMeshNormalMaterial)n(c,v),v.bumpMap&&(c.bumpMap.value=v.bumpMap,c.bumpScale.value=v.bumpScale,v.side===1&&(c.bumpScale.value*=-1)),v.normalMap&&(c.normalMap.value=v.normalMap,c.normalScale.value.copy(v.normalScale),v.side===1&&c.normalScale.value.negate()),v.displacementMap&&(c.displacementMap.value=v.displacementMap,c.displacementScale.value=v.displacementScale,c.displacementBias.value=v.displacementBias);else if(v.isLineBasicMaterial)c.diffuse.value.copy(v.color),c.opacity.value=v.opacity,v.isLineDashedMaterial&&(c.dashSize.value=v.dashSize,c.totalSize.value=v.dashSize+v.gapSize,c.scale.value=v.scale);else if(v.isPointsMaterial){if(c.diffuse.value.copy(v.color),c.opacity.value=v.opacity,c.size.value=v.size*A,c.scale.value=.5*y,v.map&&(c.map.value=v.map),v.alphaMap&&(c.alphaMap.value=v.alphaMap),v.map)var T=v.map;else v.alphaMap&&(T=v.alphaMap);T!==void 0&&(T.matrixAutoUpdate===!0&&T.updateMatrix(),c.uvTransform.value.copy(T.matrix))}else if(v.isSpriteMaterial){if(c.diffuse.value.copy(v.color),c.opacity.value=v.opacity,c.rotation.value=v.rotation,v.map&&(c.map.value=v.map),v.alphaMap&&(c.alphaMap.value=v.alphaMap),v.map)var D=v.map;else v.alphaMap&&(D=v.alphaMap);D!==void 0&&(D.matrixAutoUpdate===!0&&D.updateMatrix(),c.uvTransform.value.copy(D.matrix))}else v.isShadowMaterial?(c.color.value.copy(v.color),c.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}}}function Wu(e){var n;function o(){Nr=new ji(Zt),Ln=new Kn(Zt,Nr,e),Ln.isWebGL2===!1&&(Nr.get("WEBGL_depth_texture"),Nr.get("OES_texture_float"),Nr.get("OES_texture_half_float"),Nr.get("OES_texture_half_float_linear"),Nr.get("OES_standard_derivatives"),Nr.get("OES_element_index_uint"),Nr.get("ANGLE_instanced_arrays")),Nr.get("OES_texture_float_linear"),el=new Nf(Zt,Nr,Ln),Tr=new Ko(Zt,Nr,Ln),Tr.scissor(ke.copy(Ne).multiplyScalar(Fe).floor()),Tr.viewport(Ue.copy(Mt).multiplyScalar(Fe).floor()),Qo=new bi,Ai=new qo,Rs=new Do(Zt,Nr,Tr,Ai,Ln,el,Qo),uc=new Dn(Zt,Ln),md=new _a(Zt,uc,Qo),Jl=new Gi(Zt,md,uc,Qo),dM=new Ao(Zt),hf=new ml(ht,Nr,Ln),ff=new G3(Ai),Cl=new tp,ih=new Sx,As=new ui(ht,Tr,Jl,we),pM=new hn(Zt,Nr,Qo,Ln),cc=new ro(Zt,Nr,Qo,Ln),Qo.programs=hf.programs,ht.capabilities=Ln,ht.extensions=Nr,ht.properties=Ai,ht.renderLists=Cl,ht.state=Tr,ht.info=Qo}function c(qe){qe.preventDefault(),It=!0}function v(){It=!1,o()}function g(qe){qe=qe.target,qe.removeEventListener("dispose",g),A(qe),Ai.remove(qe)}function A(qe){var qt=Ai.get(qe).program;qe.program=void 0,qt!==void 0&&hf.releaseProgram(qt)}function y(qe,qt){qe.render(function(wt){ht.renderBufferImmediate(wt,qt)})}function T(qe,qt,wt,rr){if(qe.visible!==!1){if(qe.layers.test(qt.layers)){if(qe.isGroup)wt=qe.renderOrder;else if(qe.isLOD)qe.autoUpdate===!0&&qe.update(qt);else if(qe.isLight)lt.pushLight(qe),qe.castShadow&&lt.pushShadow(qe);else if(qe.isSprite){if(!qe.frustumCulled||Yt.intersectsSprite(qe)){rr&&gn.setFromMatrixPosition(qe.matrixWorld).applyMatrix4(Kr);var Rr=Jl.update(qe),ri=qe.material;ri.visible&&He.push(qe,Rr,ri,wt,gn.z,null)}}else if(qe.isImmediateRenderObject)rr&&gn.setFromMatrixPosition(qe.matrixWorld).applyMatrix4(Kr),He.push(qe,null,qe.material,wt,gn.z,null);else if((qe.isMesh||qe.isLine||qe.isPoints)&&(qe.isSkinnedMesh&&qe.skeleton.frame!==Qo.render.frame&&(qe.skeleton.update(),qe.skeleton.frame=Qo.render.frame),!qe.frustumCulled||Yt.intersectsObject(qe)))if(rr&&gn.setFromMatrixPosition(qe.matrixWorld).applyMatrix4(Kr),Rr=Jl.update(qe),ri=qe.material,Array.isArray(ri))for(var Hr=Rr.groups,_n=0,ei=Hr.length;_n<ei;_n++){var Ni=Hr[_n],wi=ri[Ni.materialIndex];wi&&wi.visible&&He.push(qe,Rr,wi,wt,gn.z,Ni)}else ri.visible&&He.push(qe,Rr,ri,wt,gn.z,null)}for(qe=qe.children,_n=0,ei=qe.length;_n<ei;_n++)T(qe[_n],qt,wt,rr)}}function D(qe,qt,wt,rr){for(var Rr=0,ri=qe.length;Rr<ri;Rr++){var Hr=qe[Rr],_n=Hr.object,ei=Hr.geometry,Ni=rr===void 0?Hr.material:rr;if(Hr=Hr.group,wt.isArrayCamera){ze=wt;for(var wi=wt.cameras,hc=0,Lo=wi.length;hc<Lo;hc++){var xa=wi[hc];_n.layers.test(xa.layers)&&(Tr.viewport(Ue.copy(xa.viewport)),lt.setupLights(xa),X(_n,qt,xa,ei,Ni,Hr))}}else ze=null,X(_n,qt,wt,ei,Ni,Hr)}}function X(qe,qt,wt,rr,Rr,ri){if(qe.onBeforeRender(ht,qt,wt,rr,Rr,ri),lt=ih.get(qt,ze||wt),qe.modelViewMatrix.multiplyMatrices(wt.matrixWorldInverse,qe.matrixWorld),qe.normalMatrix.getNormalMatrix(qe.modelViewMatrix),qe.isImmediateRenderObject){var Hr=b(wt,qt,Rr,qe);Tr.setMaterial(Rr),Fr=n=null,$n=!1,y(qe,Hr)}else ht.renderBufferDirect(wt,qt,rr,Rr,qe,ri);qe.onAfterRender(ht,qt,wt,rr,Rr,ri),lt=ih.get(qt,ze||wt)}function I(qe,qt,wt){var rr=Ai.get(qe),Rr=lt.state.lights,ri=Rr.state.version;wt=hf.getParameters(qe,Rr.state,lt.state.shadowsArray,qt,kt.numPlanes,kt.numIntersection,wt);var Hr=hf.getProgramCacheKey(wt),_n=rr.program,ei=!0;if(_n===void 0)qe.addEventListener("dispose",g);else if(_n.cacheKey!==Hr)A(qe);else{if(rr.lightsStateVersion!==ri)rr.lightsStateVersion=ri;else if(wt.shaderID!==void 0)return;ei=!1}if(ei&&(_n=hf.acquireProgram(wt,Hr),rr.program=_n,rr.uniforms=wt.uniforms,rr.outputEncoding=wt.outputEncoding,qe.program=_n),wt=_n.getAttributes(),qe.morphTargets)for(Hr=qe.numSupportedMorphTargets=0;Hr<ht.maxMorphTargets;Hr++)0<=wt["morphTarget"+Hr]&&qe.numSupportedMorphTargets++;if(qe.morphNormals)for(Hr=qe.numSupportedMorphNormals=0;Hr<ht.maxMorphNormals;Hr++)0<=wt["morphNormal"+Hr]&&qe.numSupportedMorphNormals++;wt=rr.uniforms,(!qe.isShaderMaterial&&!qe.isRawShaderMaterial||qe.clipping===!0)&&(rr.numClippingPlanes=kt.numPlanes,rr.numIntersection=kt.numIntersection,wt.clippingPlanes=kt.uniform),rr.environment=qe.isMeshStandardMaterial?qt.environment:null,rr.fog=qt.fog,rr.needsLights=qe.isMeshLambertMaterial||qe.isMeshToonMaterial||qe.isMeshPhongMaterial||qe.isMeshStandardMaterial||qe.isShadowMaterial||qe.isShaderMaterial&&qe.lights===!0,rr.lightsStateVersion=ri,rr.needsLights&&(wt.ambientLightColor.value=Rr.state.ambient,wt.lightProbe.value=Rr.state.probe,wt.directionalLights.value=Rr.state.directional,wt.directionalLightShadows.value=Rr.state.directionalShadow,wt.spotLights.value=Rr.state.spot,wt.spotLightShadows.value=Rr.state.spotShadow,wt.rectAreaLights.value=Rr.state.rectArea,wt.pointLights.value=Rr.state.point,wt.pointLightShadows.value=Rr.state.pointShadow,wt.hemisphereLights.value=Rr.state.hemi,wt.directionalShadowMap.value=Rr.state.directionalShadowMap,wt.directionalShadowMatrix.value=Rr.state.directionalShadowMatrix,wt.spotShadowMap.value=Rr.state.spotShadowMap,wt.spotShadowMatrix.value=Rr.state.spotShadowMatrix,wt.pointShadowMap.value=Rr.state.pointShadowMap,wt.pointShadowMatrix.value=Rr.state.pointShadowMatrix),qe=rr.program.getUniforms(),qe=Sa.seqWithValue(qe.seq,wt),rr.uniformsList=qe}function b(qe,qt,wt,rr){Rs.resetTextureUnits();var Rr=qt.fog,ri=wt.isMeshStandardMaterial?qt.environment:null,Hr=Nt===null?ht.outputEncoding:Nt.texture.encoding,_n=Ai.get(wt),ei=lt.state.lights;Ot&&(Jt||qe!==Gr)&&kt.setState(wt.clippingPlanes,wt.clipIntersection,wt.clipShadows,qe,_n,qe===Gr&&wt.id===qr),wt.version===_n.__version?_n.program===void 0||wt.fog&&_n.fog!==Rr||_n.environment!==ri||_n.needsLights&&_n.lightsStateVersion!==ei.state.version?I(wt,qt,rr):_n.numClippingPlanes===void 0||_n.numClippingPlanes===kt.numPlanes&&_n.numIntersection===kt.numIntersection?_n.outputEncoding!==Hr&&I(wt,qt,rr):I(wt,qt,rr):(I(wt,qt,rr),_n.__version=wt.version);var Ni=!1,wi=!1,hc=!1;if(qt=_n.program,Hr=qt.getUniforms(),ei=_n.uniforms,Tr.useProgram(qt.program)&&(hc=wi=Ni=!0),wt.id!==qr&&(qr=wt.id,wi=!0),(Ni||Gr!==qe)&&(Hr.setValue(Zt,"projectionMatrix",qe.projectionMatrix),Ln.logarithmicDepthBuffer&&Hr.setValue(Zt,"logDepthBufFC",2/(Math.log(qe.far+1)/Math.LN2)),Gr!==qe&&(Gr=qe,hc=wi=!0),(wt.isShaderMaterial||wt.isMeshPhongMaterial||wt.isMeshToonMaterial||wt.isMeshStandardMaterial||wt.envMap)&&(Ni=Hr.map.cameraPosition,Ni!==void 0&&Ni.setValue(Zt,gn.setFromMatrixPosition(qe.matrixWorld))),(wt.isMeshPhongMaterial||wt.isMeshToonMaterial||wt.isMeshLambertMaterial||wt.isMeshBasicMaterial||wt.isMeshStandardMaterial||wt.isShaderMaterial)&&Hr.setValue(Zt,"isOrthographic",qe.isOrthographicCamera===!0),(wt.isMeshPhongMaterial||wt.isMeshToonMaterial||wt.isMeshLambertMaterial||wt.isMeshBasicMaterial||wt.isMeshStandardMaterial||wt.isShaderMaterial||wt.skinning)&&Hr.setValue(Zt,"viewMatrix",qe.matrixWorldInverse)),wt.skinning&&(Hr.setOptional(Zt,rr,"bindMatrix"),Hr.setOptional(Zt,rr,"bindMatrixInverse"),qe=rr.skeleton))if(Ni=qe.bones,Ln.floatVertexTextures){if(qe.boneTexture===void 0){Ni=Math.sqrt(4*Ni.length),Ni=ai.ceilPowerOfTwo(Ni),Ni=Math.max(Ni,4);var Lo=new Float32Array(Ni*Ni*4);Lo.set(qe.boneMatrices);var xa=new oi(Lo,Ni,Ni,1023,1015);qe.boneMatrices=Lo,qe.boneTexture=xa,qe.boneTextureSize=Ni}Hr.setValue(Zt,"boneTexture",qe.boneTexture,Rs),Hr.setValue(Zt,"boneTextureSize",qe.boneTextureSize)}else Hr.setOptional(Zt,qe,"boneMatrices");return(wi||_n.receiveShadow!==rr.receiveShadow)&&(_n.receiveShadow=rr.receiveShadow,Hr.setValue(Zt,"receiveShadow",rr.receiveShadow)),wi&&(Hr.setValue(Zt,"toneMappingExposure",ht.toneMappingExposure),Hr.setValue(Zt,"toneMappingWhitePoint",ht.toneMappingWhitePoint),_n.needsLights&&(wi=hc,ei.ambientLightColor.needsUpdate=wi,ei.lightProbe.needsUpdate=wi,ei.directionalLights.needsUpdate=wi,ei.directionalLightShadows.needsUpdate=wi,ei.pointLights.needsUpdate=wi,ei.pointLightShadows.needsUpdate=wi,ei.spotLights.needsUpdate=wi,ei.spotLightShadows.needsUpdate=wi,ei.rectAreaLights.needsUpdate=wi,ei.hemisphereLights.needsUpdate=wi),Rr&&wt.fog&&ff.refreshFogUniforms(ei,Rr),ff.refreshMaterialUniforms(ei,wt,ri,Fe,be),ei.ltc_1!==void 0&&(ei.ltc_1.value=Xr.LTC_1),ei.ltc_2!==void 0&&(ei.ltc_2.value=Xr.LTC_2),Sa.upload(Zt,_n.uniformsList,ei,Rs)),wt.isShaderMaterial&&wt.uniformsNeedUpdate===!0&&(Sa.upload(Zt,_n.uniformsList,ei,Rs),wt.uniformsNeedUpdate=!1),wt.isSpriteMaterial&&Hr.setValue(Zt,"center",rr.center),Hr.setValue(Zt,"modelViewMatrix",rr.modelViewMatrix),Hr.setValue(Zt,"normalMatrix",rr.normalMatrix),Hr.setValue(Zt,"modelMatrix",rr.matrixWorld),qt}e=e||{};var N=e.canvas!==void 0?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),k=e.context!==void 0?e.context:null,G=e.alpha!==void 0?e.alpha:!1,re=e.depth!==void 0?e.depth:!0,se=e.stencil!==void 0?e.stencil:!0,ue=e.antialias!==void 0?e.antialias:!1,we=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,Te=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,je=e.powerPreference!==void 0?e.powerPreference:"default",Ge=e.failIfMajorPerformanceCaveat!==void 0?e.failIfMajorPerformanceCaveat:!1,He=null,lt=null;this.domElement=N,this.debug={checkShaderErrors:!0},this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=3e3,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingWhitePoint=this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var ht=this,It=!1,vt=null,Et=0,xr=0,Nt=null,Pr=null,qr=-1,Fr=n=null,$n=!1,Gr=null,ze=null,Ue=new te,ke=new te,Je=null,Ce=N.width,be=N.height,Fe=1,Qe=null,ft=null,Mt=new te(0,0,Ce,be),Ne=new te(0,0,Ce,be),Gt=!1,Yt=new xn,kt=new $i,Ot=!1,Jt=!1,Kr=new me,gn=new oe;try{G={alpha:G,depth:re,stencil:se,antialias:ue,premultipliedAlpha:we,preserveDrawingBuffer:Te,powerPreference:je,failIfMajorPerformanceCaveat:Ge},N.addEventListener("webglcontextlost",c,!1),N.addEventListener("webglcontextrestored",v,!1);var Zt=k||N.getContext("webgl",G)||N.getContext("experimental-webgl",G);if(Zt===null)throw N.getContext("webgl")!==null?Error("Error creating WebGL context with your selected attributes."):Error("Error creating WebGL context.");Zt.getShaderPrecisionFormat===void 0&&(Zt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(qe){throw console.error("THREE.WebGLRenderer: "+qe.message),qe}var Nr,Ln,Tr,Qo,Ai,Rs,uc,md,Jl,hf,ff,Cl,ih,As,dM,pM,cc,el;o();var _l=new FC(ht,Zt);this.xr=_l;var gd=new Lr(ht,Jl,Ln.maxTextureSize);this.shadowMap=gd,this.getContext=function(){return Zt},this.getContextAttributes=function(){return Zt.getContextAttributes()},this.forceContextLoss=function(){var qe=Nr.get("WEBGL_lose_context");qe&&qe.loseContext()},this.forceContextRestore=function(){var qe=Nr.get("WEBGL_lose_context");qe&&qe.restoreContext()},this.getPixelRatio=function(){return Fe},this.setPixelRatio=function(qe){qe!==void 0&&(Fe=qe,this.setSize(Ce,be,!1))},this.getSize=function(qe){return qe===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),qe=new U),qe.set(Ce,be)},this.setSize=function(qe,qt,wt){_l.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Ce=qe,be=qt,N.width=Math.floor(qe*Fe),N.height=Math.floor(qt*Fe),wt!==!1&&(N.style.width=qe+"px",N.style.height=qt+"px"),this.setViewport(0,0,qe,qt))},this.getDrawingBufferSize=function(qe){return qe===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),qe=new U),qe.set(Ce*Fe,be*Fe).floor()},this.setDrawingBufferSize=function(qe,qt,wt){Ce=qe,be=qt,Fe=wt,N.width=Math.floor(qe*wt),N.height=Math.floor(qt*wt),this.setViewport(0,0,qe,qt)},this.getCurrentViewport=function(qe){return qe===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),qe=new te),qe.copy(Ue)},this.getViewport=function(qe){return qe.copy(Mt)},this.setViewport=function(qe,qt,wt,rr){qe.isVector4?Mt.set(qe.x,qe.y,qe.z,qe.w):Mt.set(qe,qt,wt,rr),Tr.viewport(Ue.copy(Mt).multiplyScalar(Fe).floor())},this.getScissor=function(qe){return qe.copy(Ne)},this.setScissor=function(qe,qt,wt,rr){qe.isVector4?Ne.set(qe.x,qe.y,qe.z,qe.w):Ne.set(qe,qt,wt,rr),Tr.scissor(ke.copy(Ne).multiplyScalar(Fe).floor())},this.getScissorTest=function(){return Gt},this.setScissorTest=function(qe){Tr.setScissorTest(Gt=qe)},this.setOpaqueSort=function(qe){Qe=qe},this.setTransparentSort=function(qe){ft=qe},this.getClearColor=function(){return As.getClearColor()},this.setClearColor=function(){As.setClearColor.apply(As,arguments)},this.getClearAlpha=function(){return As.getClearAlpha()},this.setClearAlpha=function(){As.setClearAlpha.apply(As,arguments)},this.clear=function(qe,qt,wt){var rr=0;(qe===void 0||qe)&&(rr|=16384),(qt===void 0||qt)&&(rr|=256),(wt===void 0||wt)&&(rr|=1024),Zt.clear(rr)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){N.removeEventListener("webglcontextlost",c,!1),N.removeEventListener("webglcontextrestored",v,!1),Cl.dispose(),ih.dispose(),Ai.dispose(),Jl.dispose(),_l.dispose(),ov.stop()},this.renderBufferImmediate=function(qe,qt){Tr.initAttributes();var wt=Ai.get(qe);qe.hasPositions&&!wt.position&&(wt.position=Zt.createBuffer()),qe.hasNormals&&!wt.normal&&(wt.normal=Zt.createBuffer()),qe.hasUvs&&!wt.uv&&(wt.uv=Zt.createBuffer()),qe.hasColors&&!wt.color&&(wt.color=Zt.createBuffer()),qt=qt.getAttributes(),qe.hasPositions&&(Zt.bindBuffer(34962,wt.position),Zt.bufferData(34962,qe.positionArray,35048),Tr.enableAttribute(qt.position),Zt.vertexAttribPointer(qt.position,3,5126,!1,0,0)),qe.hasNormals&&(Zt.bindBuffer(34962,wt.normal),Zt.bufferData(34962,qe.normalArray,35048),Tr.enableAttribute(qt.normal),Zt.vertexAttribPointer(qt.normal,3,5126,!1,0,0)),qe.hasUvs&&(Zt.bindBuffer(34962,wt.uv),Zt.bufferData(34962,qe.uvArray,35048),Tr.enableAttribute(qt.uv),Zt.vertexAttribPointer(qt.uv,2,5126,!1,0,0)),qe.hasColors&&(Zt.bindBuffer(34962,wt.color),Zt.bufferData(34962,qe.colorArray,35048),Tr.enableAttribute(qt.color),Zt.vertexAttribPointer(qt.color,3,5126,!1,0,0)),Tr.disableUnusedAttributes(),Zt.drawArrays(4,0,qe.count),qe.count=0};var Ql=new _e;this.renderBufferDirect=function(qe,qt,wt,rr,Rr,ri){qt===null&&(qt=Ql);var Hr=Rr.isMesh&&0>Rr.matrixWorld.determinant(),_n=b(qe,qt,rr,Rr);Tr.setMaterial(rr,Hr);var ei=!1;if((n!==wt.id||Fr!==_n.id||$n!==(rr.wireframe===!0))&&(n=wt.id,Fr=_n.id,$n=rr.wireframe===!0,ei=!0),(rr.morphTargets||rr.morphNormals)&&(dM.update(Rr,wt,rr,_n),ei=!0),Rr.isInstancedMesh===!0&&(ei=!0),qe=wt.index,qt=wt.attributes.position,qe===null){if(qt===void 0||qt.count===0)return}else if(qe.count===0)return;var Ni=1;if(rr.wireframe===!0&&(qe=md.getWireframeAttribute(wt),Ni=2),Hr=pM,qe!==null){var wi=uc.get(qe);Hr=cc,Hr.setIndex(wi)}if(ei){if(Ln.isWebGL2!==!1||!Rr.isInstancedMesh&&!wt.isInstancedBufferGeometry||Nr.get("ANGLE_instanced_arrays")!==null){Tr.initAttributes(),ei=wt.attributes,_n=_n.getAttributes();var hc=rr.defaultAttributeValues;for(yd in _n){var Lo=_n[yd];if(0<=Lo){var xa=ei[yd];if(xa!==void 0){var oh=xa.normalized,mM=xa.itemSize,wu=uc.get(xa);if(wu!==void 0){var yy=wu.buffer,vd=wu.type;if(wu=wu.bytesPerElement,xa.isInterleavedBufferAttribute){var Kp=xa.data,iR=Kp.stride;xa=xa.offset,Kp&&Kp.isInstancedInterleavedBuffer?(Tr.enableAttributeAndDivisor(Lo,Kp.meshPerAttribute),wt._maxInstanceCount===void 0&&(wt._maxInstanceCount=Kp.meshPerAttribute*Kp.count)):Tr.enableAttribute(Lo),Zt.bindBuffer(34962,yy),Tr.vertexAttribPointer(Lo,mM,vd,oh,iR*wu,xa*wu)}else xa.isInstancedBufferAttribute?(Tr.enableAttributeAndDivisor(Lo,xa.meshPerAttribute),wt._maxInstanceCount===void 0&&(wt._maxInstanceCount=xa.meshPerAttribute*xa.count)):Tr.enableAttribute(Lo),Zt.bindBuffer(34962,yy),Tr.vertexAttribPointer(Lo,mM,vd,oh,0,0)}}else if(yd==="instanceMatrix")wu=uc.get(Rr.instanceMatrix),wu!==void 0&&(yy=wu.buffer,vd=wu.type,Tr.enableAttributeAndDivisor(Lo+0,1),Tr.enableAttributeAndDivisor(Lo+1,1),Tr.enableAttributeAndDivisor(Lo+2,1),Tr.enableAttributeAndDivisor(Lo+3,1),Zt.bindBuffer(34962,yy),Zt.vertexAttribPointer(Lo+0,4,vd,!1,64,0),Zt.vertexAttribPointer(Lo+1,4,vd,!1,64,16),Zt.vertexAttribPointer(Lo+2,4,vd,!1,64,32),Zt.vertexAttribPointer(Lo+3,4,vd,!1,64,48));else if(hc!==void 0&&(oh=hc[yd],oh!==void 0))switch(oh.length){case 2:Zt.vertexAttrib2fv(Lo,oh);break;case 3:Zt.vertexAttrib3fv(Lo,oh);break;case 4:Zt.vertexAttrib4fv(Lo,oh);break;default:Zt.vertexAttrib1fv(Lo,oh)}}}Tr.disableUnusedAttributes()}qe!==null&&Zt.bindBuffer(34963,wi.buffer)}var yd=wt.drawRange.start*Ni;ei=ri!==null?ri.start*Ni:0,wi=Math.max(yd,ei),ri=Math.max(0,Math.min(qe!==null?qe.count:qt.count,yd+wt.drawRange.count*Ni,ei+(ri!==null?ri.count*Ni:1/0))-1-wi+1),ri!==0&&(Rr.isMesh?rr.wireframe===!0?(Tr.setLineWidth(rr.wireframeLinewidth*(Nt===null?Fe:1)),Hr.setMode(1)):Hr.setMode(4):Rr.isLine?(rr=rr.linewidth,rr===void 0&&(rr=1),Tr.setLineWidth(rr*(Nt===null?Fe:1)),Rr.isLineSegments?Hr.setMode(1):Rr.isLineLoop?Hr.setMode(2):Hr.setMode(3)):Rr.isPoints?Hr.setMode(0):Rr.isSprite&&Hr.setMode(4),Rr.isInstancedMesh?Hr.renderInstances(wt,wi,ri,Rr.count):wt.isInstancedBufferGeometry?Hr.renderInstances(wt,wi,ri,Math.min(wt.instanceCount,wt._maxInstanceCount)):Hr.render(wi,ri))},this.compile=function(qe,qt){lt=ih.get(qe,qt),lt.init(),qe.traverse(function(rr){rr.isLight&&(lt.pushLight(rr),rr.castShadow&&lt.pushShadow(rr))}),lt.setupLights(qt);var wt={};qe.traverse(function(rr){var Rr=rr.material;if(Rr)if(Array.isArray(Rr))for(var ri=0;ri<Rr.length;ri++){var Hr=Rr[ri];!(Hr.uuid in wt)&&(I(Hr,qe,rr),wt[Hr.uuid]=!0)}else!(Rr.uuid in wt)&&(I(Rr,qe,rr),wt[Rr.uuid]=!0)})};var Ls=null,ov=new qn;ov.setAnimationLoop(function(qe){_l.isPresenting||Ls&&Ls(qe)}),typeof window<"u"&&ov.setContext(window),this.setAnimationLoop=function(qe){Ls=qe,_l.setAnimationLoop(qe),ov.start()},this.render=function(qe,qt,wt,rr){if(wt!==void 0){console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.");var Rr=wt}if(rr!==void 0){console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.");var ri=rr}qt&&qt.isCamera?It||(Fr=n=null,$n=!1,qr=-1,Gr=null,qe.autoUpdate===!0&&qe.updateMatrixWorld(),qt.parent===null&&qt.updateMatrixWorld(),_l.enabled&&_l.isPresenting&&(qt=_l.getCamera(qt)),qe.onBeforeRender(ht,qe,qt,Rr||Nt),lt=ih.get(qe,qt),lt.init(),Kr.multiplyMatrices(qt.projectionMatrix,qt.matrixWorldInverse),Yt.setFromProjectionMatrix(Kr),Jt=this.localClippingEnabled,Ot=kt.init(this.clippingPlanes,Jt,qt),He=Cl.get(qe,qt),He.init(),T(qe,qt,0,ht.sortObjects),He.finish(),ht.sortObjects===!0&&He.sort(Qe,ft),Ot&&kt.beginShadows(),gd.render(lt.state.shadowsArray,qe,qt),lt.setupLights(qt),Ot&&kt.endShadows(),this.info.autoReset&&this.info.reset(),Rr!==void 0&&this.setRenderTarget(Rr),As.render(He,qe,qt,ri),wt=He.opaque,rr=He.transparent,qe.overrideMaterial?(Rr=qe.overrideMaterial,wt.length&&D(wt,qe,qt,Rr),rr.length&&D(rr,qe,qt,Rr)):(wt.length&&D(wt,qe,qt),rr.length&&D(rr,qe,qt)),qe.onAfterRender(ht,qe,qt),Nt!==null&&(Rs.updateRenderTargetMipmap(Nt),Rs.updateMultisampleRenderTarget(Nt)),Tr.buffers.depth.setTest(!0),Tr.buffers.depth.setMask(!0),Tr.buffers.color.setMask(!0),Tr.setPolygonOffset(!1),lt=He=null):console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(qe){vt!==qe&&Nt===null&&Zt.bindFramebuffer(36160,qe),vt=qe},this.getActiveCubeFace=function(){return Et},this.getActiveMipmapLevel=function(){return xr},this.getRenderTarget=function(){return Nt},this.setRenderTarget=function(qe,qt,wt){Nt=qe,Et=qt,xr=wt,qe&&Ai.get(qe).__webglFramebuffer===void 0&&Rs.setupRenderTarget(qe);var rr=vt,Rr=!1;qe?(rr=Ai.get(qe).__webglFramebuffer,qe.isWebGLCubeRenderTarget?(rr=rr[qt||0],Rr=!0):rr=qe.isWebGLMultisampleRenderTarget?Ai.get(qe).__webglMultisampledFramebuffer:rr,Ue.copy(qe.viewport),ke.copy(qe.scissor),Je=qe.scissorTest):(Ue.copy(Mt).multiplyScalar(Fe).floor(),ke.copy(Ne).multiplyScalar(Fe).floor(),Je=Gt),Pr!==rr&&(Zt.bindFramebuffer(36160,rr),Pr=rr),Tr.viewport(Ue),Tr.scissor(ke),Tr.setScissorTest(Je),Rr&&(qe=Ai.get(qe.texture),Zt.framebufferTexture2D(36160,36064,34069+(qt||0),qe.__webglTexture,wt||0))},this.readRenderTargetPixels=function(qe,qt,wt,rr,Rr,ri,Hr){if(qe&&qe.isWebGLRenderTarget){var _n=Ai.get(qe).__webglFramebuffer;if(qe.isWebGLCubeRenderTarget&&Hr!==void 0&&(_n=_n[Hr]),_n){Hr=!1,_n!==Pr&&(Zt.bindFramebuffer(36160,_n),Hr=!0);try{var ei=qe.texture,Ni=ei.format,wi=ei.type;Ni!==1023&&el.convert(Ni)!==Zt.getParameter(35739)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):wi===1009||el.convert(wi)===Zt.getParameter(35738)||wi===1015&&(Ln.isWebGL2||Nr.get("OES_texture_float")||Nr.get("WEBGL_color_buffer_float"))||wi===1016&&(Ln.isWebGL2?Nr.get("EXT_color_buffer_float"):Nr.get("EXT_color_buffer_half_float"))?Zt.checkFramebufferStatus(36160)===36053?0<=qt&&qt<=qe.width-rr&&0<=wt&&wt<=qe.height-Rr&&Zt.readPixels(qt,wt,rr,Rr,el.convert(Ni),el.convert(wi),ri):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{Hr&&Zt.bindFramebuffer(36160,Pr)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(qe,qt,wt){wt===void 0&&(wt=0);var rr=Math.pow(2,-wt),Rr=Math.floor(qt.image.width*rr);rr=Math.floor(qt.image.height*rr);var ri=el.convert(qt.format);Rs.setTexture2D(qt,0),Zt.copyTexImage2D(3553,wt,ri,qe.x,qe.y,Rr,rr,0),Tr.unbindTexture()},this.copyTextureToTexture=function(qe,qt,wt,rr){rr===void 0&&(rr=0);var Rr=qt.image.width,ri=qt.image.height,Hr=el.convert(wt.format),_n=el.convert(wt.type);Rs.setTexture2D(wt,0),qt.isDataTexture?Zt.texSubImage2D(3553,rr,qe.x,qe.y,Rr,ri,Hr,_n,qt.image.data):qt.isCompressedTexture?Zt.compressedTexSubImage2D(3553,rr,qe.x,qe.y,qt.mipmaps[0].width,qt.mipmaps[0].height,Hr,qt.mipmaps[0].data):Zt.texSubImage2D(3553,rr,qe.x,qe.y,Hr,_n,qt.image),rr===0&&wt.generateMipmaps&&Zt.generateMipmap(3553),Tr.unbindTexture()},this.initTexture=function(qe){Rs.setTexture2D(qe,0),Tr.unbindTexture()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Jo(e,n){this.name="",this.color=new Ye(e),this.density=n!==void 0?n:25e-5}function Tx(e,n,o){this.name="",this.color=new Ye(e),this.near=n!==void 0?n:1,this.far=o!==void 0?o:1e3}function Mr(e,n){this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}function Ws(e,n,o,c){this.name="",this.data=e,this.itemSize=n,this.offset=o,this.normalized=c===!0}function zf(e){$e.call(this),this.type="SpriteMaterial",this.color=new Ye(16777215),this.alphaMap=this.map=null,this.rotation=0,this.transparent=this.sizeAttenuation=!0,this.setValues(e)}function d0(e){if(ce.call(this),this.type="Sprite",cy===void 0){cy=new Ut;var n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);n=new Mr(n,5),cy.setIndex([0,1,2,0,2,3]),cy.setAttribute("position",new Ws(n,3,0,!1)),cy.setAttribute("uv",new Ws(n,2,3,!1))}this.geometry=cy,this.material=e!==void 0?e:new zf,this.center=new U(.5,.5)}function rp(e,n,o,c,v,g){dy.subVectors(e,o).addScalar(.5).multiply(c),v!==void 0?(Y2.x=g*dy.x-v*dy.y,Y2.y=v*dy.x+g*dy.y):Y2.copy(dy),e.copy(n),e.x+=Y2.x,e.y+=Y2.y,e.applyMatrix4(pb)}function p0(){ce.call(this),this._currentLevel=0,this.type="LOD",Rn(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function np(e,n){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),_r.call(this,e,n),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new me,this.bindMatrixInverse=new me}function Uf(e,n){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,n===void 0)this.calculateInverses();else if(this.bones.length===n.length)this.boneInverses=n.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[],e=0,n=this.bones.length;e<n;e++)this.boneInverses.push(new me)}function Xu(){ce.call(this),this.type="Bone"}function ia(e,n,o){_r.call(this,e,n),this.instanceMatrix=new Ve(new Float32Array(16*o),16),this.count=o,this.frustumCulled=!1}function Io(e){$e.call(this),this.type="LineBasicMaterial",this.color=new Ye(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.morphTargets=!1,this.setValues(e)}function Xs(e,n,o){o===1&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),ce.call(this),this.type="Line",this.geometry=e!==void 0?e:new Ut,this.material=n!==void 0?n:new Io,this.updateMorphTargets()}function io(e,n){Xs.call(this,e,n),this.type="LineSegments"}function qm(e,n){Xs.call(this,e,n),this.type="LineLoop"}function lu(e){$e.call(this),this.type="PointsMaterial",this.color=new Ye(16777215),this.alphaMap=this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}function zh(e,n){ce.call(this),this.type="Points",this.geometry=e!==void 0?e:new Ut,this.material=n!==void 0?n:new lu,this.updateMorphTargets()}function Km(e,n,o,c,v,g,A){var y=zI.distanceSqToPoint(e);y<o&&(o=new oe,zI.closestPointToPoint(e,o),o.applyMatrix4(c),e=v.ray.origin.distanceTo(o),e<v.near||e>v.far||g.push({distance:e,distanceToRay:Math.sqrt(y),point:o,index:n,face:null,object:A}))}function NC(e,n,o,c,v,g,A,y,T){J.call(this,e,n,o,c,v,g,A,y,T),this.format=A!==void 0?A:1022,this.minFilter=g!==void 0?g:1006,this.magFilter=v!==void 0?v:1006,this.generateMipmaps=!1}function kf(e,n,o,c,v,g,A,y,T,D,X,I){J.call(this,null,g,A,y,T,D,c,v,X,I),this.image={width:n,height:o},this.mipmaps=e,this.generateMipmaps=this.flipY=!1}function m0(e,n,o,c,v,g,A,y,T){J.call(this,e,n,o,c,v,g,A,y,T),this.needsUpdate=!0}function uu(e,n,o,c,v,g,A,y,T,D){if(D=D!==void 0?D:1026,D!==1026&&D!==1027)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");o===void 0&&D===1026&&(o=1012),o===void 0&&D===1027&&(o=1020),J.call(this,null,c,v,g,A,y,D,o,T),this.image={width:e,height:n},this.magFilter=A!==void 0?A:1003,this.minFilter=y!==void 0?y:1003,this.generateMipmaps=this.flipY=!1}function Jm(e){Ut.call(this),this.type="WireframeGeometry";var n=[],o,c,v,g=[0,0],A={},y=["a","b","c"];if(e&&e.isGeometry){var T=e.faces,D=0;for(c=T.length;D<c;D++){var X=T[D];for(o=0;3>o;o++){var I=X[y[o]],b=X[y[(o+1)%3]];g[0]=Math.min(I,b),g[1]=Math.max(I,b),I=g[0]+","+g[1],A[I]===void 0&&(A[I]={index1:g[0],index2:g[1]})}}for(I in A)D=A[I],y=e.vertices[D.index1],n.push(y.x,y.y,y.z),y=e.vertices[D.index2],n.push(y.x,y.y,y.z)}else if(e&&e.isBufferGeometry)if(y=new oe,e.index!==null){T=e.attributes.position,X=e.index;var N=e.groups;for(N.length===0&&(N=[{start:0,count:X.count,materialIndex:0}]),e=0,v=N.length;e<v;++e)for(D=N[e],o=D.start,c=D.count,D=o,c=o+c;D<c;D+=3)for(o=0;3>o;o++)I=X.getX(D+o),b=X.getX(D+(o+1)%3),g[0]=Math.min(I,b),g[1]=Math.max(I,b),I=g[0]+","+g[1],A[I]===void 0&&(A[I]={index1:g[0],index2:g[1]});for(I in A)D=A[I],y.fromBufferAttribute(T,D.index1),n.push(y.x,y.y,y.z),y.fromBufferAttribute(T,D.index2),n.push(y.x,y.y,y.z)}else for(T=e.attributes.position,D=0,c=T.count/3;D<c;D++)for(o=0;3>o;o++)A=3*D+o,y.fromBufferAttribute(T,A),n.push(y.x,y.y,y.z),A=3*D+(o+1)%3,y.fromBufferAttribute(T,A),n.push(y.x,y.y,y.z);this.setAttribute("position",new Rt(n,3))}function Qm(e,n,o){ur.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:n,stacks:o},this.fromBufferGeometry(new Hf(e,n,o)),this.mergeVertices()}function Hf(e,n,o){Ut.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:n,stacks:o};var c=[],v=[],g=[],A=[],y=new oe,T=new oe,D=new oe,X=new oe,I=new oe,b,N;3>e.length&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var k=n+1;for(b=0;b<=o;b++){var G=b/o;for(N=0;N<=n;N++){var re=N/n;e(re,G,T),v.push(T.x,T.y,T.z),0<=re-1e-5?(e(re-1e-5,G,D),X.subVectors(T,D)):(e(re+1e-5,G,D),X.subVectors(D,T)),0<=G-1e-5?(e(re,G-1e-5,D),I.subVectors(T,D)):(e(re,G+1e-5,D),I.subVectors(D,T)),y.crossVectors(X,I).normalize(),g.push(y.x,y.y,y.z),A.push(re,G)}}for(b=0;b<o;b++)for(N=0;N<n;N++)e=b*k+N+1,y=(b+1)*k+N+1,T=(b+1)*k+N,c.push(b*k+N,e,T),c.push(e,y,T);this.setIndex(c),this.setAttribute("position",new Rt(v,3)),this.setAttribute("normal",new Rt(g,3)),this.setAttribute("uv",new Rt(A,2))}function ip(e,n,o,c){ur.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:o,detail:c},this.fromBufferGeometry(new Ys(e,n,o,c)),this.mergeVertices()}function Ys(e,n,o,c){function v(D){y.push(D.x,D.y,D.z)}function g(D,X){D*=3,X.x=e[D+0],X.y=e[D+1],X.z=e[D+2]}function A(D,X,I,b){0>b&&D.x===1&&(T[X]=D.x-1),I.x===0&&I.z===0&&(T[X]=b/2/Math.PI+.5)}Ut.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:n,radius:o,detail:c},o=o||1,c=c||0;var y=[],T=[];(function(D){for(var X=new oe,I=new oe,b=new oe,N=0;N<n.length;N+=3){g(n[N+0],X),g(n[N+1],I),g(n[N+2],b);var k,G,re=X,se=I,ue=b,we=Math.pow(2,D),Te=[];for(G=0;G<=we;G++){Te[G]=[];var je=re.clone().lerp(ue,G/we),Ge=se.clone().lerp(ue,G/we),He=we-G;for(k=0;k<=He;k++)Te[G][k]=k===0&&G===we?je:je.clone().lerp(Ge,k/He)}for(G=0;G<we;G++)for(k=0;k<2*(we-G)-1;k++)re=Math.floor(k/2),k%2===0?(v(Te[G][re+1]),v(Te[G+1][re]),v(Te[G][re])):(v(Te[G][re+1]),v(Te[G+1][re+1]),v(Te[G+1][re]))}})(c),function(D){for(var X=new oe,I=0;I<y.length;I+=3)X.x=y[I+0],X.y=y[I+1],X.z=y[I+2],X.normalize().multiplyScalar(D),y[I+0]=X.x,y[I+1]=X.y,y[I+2]=X.z}(o),function(){for(var D=new oe,X=0;X<y.length;X+=3)D.x=y[X+0],D.y=y[X+1],D.z=y[X+2],T.push(Math.atan2(D.z,-D.x)/2/Math.PI+.5,1-(Math.atan2(-D.y,Math.sqrt(D.x*D.x+D.z*D.z))/Math.PI+.5));D=new oe,X=new oe;for(var I=new oe,b=new oe,N=new U,k=new U,G=new U,re=0,se=0;re<y.length;re+=9,se+=6){D.set(y[re+0],y[re+1],y[re+2]),X.set(y[re+3],y[re+4],y[re+5]),I.set(y[re+6],y[re+7],y[re+8]),N.set(T[se+0],T[se+1]),k.set(T[se+2],T[se+3]),G.set(T[se+4],T[se+5]),b.copy(D).add(X).add(I).divideScalar(3);var ue=Math.atan2(b.z,-b.x);A(N,se+0,D,ue),A(k,se+2,X,ue),A(G,se+4,I,ue)}for(D=0;D<T.length;D+=6)X=T[D+0],I=T[D+2],b=T[D+4],N=Math.min(X,I,b),.9<Math.max(X,I,b)&&.1>N&&(.2>X&&(T[D+0]+=1),.2>I&&(T[D+2]+=1),.2>b&&(T[D+4]+=1))}(),this.setAttribute("position",new Rt(y,3)),this.setAttribute("normal",new Rt(y.slice(),3)),this.setAttribute("uv",new Rt(T,2)),c===0?this.computeVertexNormals():this.normalizeNormals()}function op(e,n){ur.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n},this.fromBufferGeometry(new Uh(e,n)),this.mergeVertices()}function Uh(e,n){Ys.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,n),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:n}}function g0(e,n){ur.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n},this.fromBufferGeometry(new Yu(e,n)),this.mergeVertices()}function Yu(e,n){Ys.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,n),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:n}}function jf(e,n){ur.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n},this.fromBufferGeometry(new $m(e,n)),this.mergeVertices()}function $m(e,n){var o=(1+Math.sqrt(5))/2;Ys.call(this,[-1,o,0,1,o,0,-1,-o,0,1,-o,0,0,-1,o,0,1,o,0,-1,-o,0,1,-o,o,0,-1,o,0,1,-o,0,-1,-o,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,n),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:n}}function ap(e,n){ur.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n},this.fromBufferGeometry(new eg(e,n)),this.mergeVertices()}function eg(e,n){var o=(1+Math.sqrt(5))/2,c=1/o;Ys.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-c,-o,0,-c,o,0,c,-o,0,c,o,-c,-o,0,-c,o,0,c,-o,0,c,o,0,-o,0,-c,o,0,-c,-o,0,c,o,0,c],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,n),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:n}}function v0(e,n,o,c,v,g){ur.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:o,radialSegments:c,closed:v},g!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed."),e=new Gf(e,n,o,c,v),this.tangents=e.tangents,this.normals=e.normals,this.binormals=e.binormals,this.fromBufferGeometry(e),this.mergeVertices()}function Gf(e,n,o,c,v){function g(se){X=e.getPointAt(se/n,X);var ue=A.normals[se];for(se=A.binormals[se],b=0;b<=c;b++){var we=b/c*Math.PI*2,Te=Math.sin(we);we=-Math.cos(we),T.x=we*ue.x+Te*se.x,T.y=we*ue.y+Te*se.y,T.z=we*ue.z+Te*se.z,T.normalize(),k.push(T.x,T.y,T.z),y.x=X.x+o*T.x,y.y=X.y+o*T.y,y.z=X.z+o*T.z,N.push(y.x,y.y,y.z)}}Ut.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:n,radius:o,radialSegments:c,closed:v},n=n||64,o=o||1,c=c||8,v=v||!1;var A=e.computeFrenetFrames(n,v);this.tangents=A.tangents,this.normals=A.normals,this.binormals=A.binormals;var y=new oe,T=new oe,D=new U,X=new oe,I,b,N=[],k=[],G=[],re=[];for(I=0;I<n;I++)g(I);for(g(v===!1?n:0),I=0;I<=n;I++)for(b=0;b<=c;b++)D.x=I/n,D.y=b/c,G.push(D.x,D.y);(function(){for(b=1;b<=n;b++)for(I=1;I<=c;I++){var se=(c+1)*b+(I-1),ue=(c+1)*b+I,we=(c+1)*(b-1)+I;re.push((c+1)*(b-1)+(I-1),se,we),re.push(se,ue,we)}})(),this.setIndex(re),this.setAttribute("position",new Rt(N,3)),this.setAttribute("normal",new Rt(k,3)),this.setAttribute("uv",new Rt(G,2))}function tg(e,n,o,c,v,g,A){ur.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:o,radialSegments:c,p:v,q:g},A!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new rg(e,n,o,c,v,g)),this.mergeVertices()}function rg(e,n,o,c,v,g){function A(Ge,He,lt,ht,It){var vt=Math.sin(Ge);He=lt/He*Ge,lt=Math.cos(He),It.x=ht*(2+lt)*.5*Math.cos(Ge),It.y=ht*(2+lt)*vt*.5,It.z=ht*Math.sin(He)*.5}Ut.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:n,tubularSegments:o,radialSegments:c,p:v,q:g},e=e||1,n=n||.4,o=Math.floor(o)||64,c=Math.floor(c)||8,v=v||2,g=g||3;var y=[],T=[],D=[],X=[],I,b=new oe,N=new oe,k=new oe,G=new oe,re=new oe,se=new oe,ue=new oe;for(I=0;I<=o;++I){var we=I/o*v*Math.PI*2;for(A(we,v,g,e,k),A(we+.01,v,g,e,G),se.subVectors(G,k),ue.addVectors(G,k),re.crossVectors(se,ue),ue.crossVectors(re,se),re.normalize(),ue.normalize(),we=0;we<=c;++we){var Te=we/c*Math.PI*2,je=-n*Math.cos(Te);Te=n*Math.sin(Te),b.x=k.x+(je*ue.x+Te*re.x),b.y=k.y+(je*ue.y+Te*re.y),b.z=k.z+(je*ue.z+Te*re.z),T.push(b.x,b.y,b.z),N.subVectors(b,k).normalize(),D.push(N.x,N.y,N.z),X.push(I/o),X.push(we/c)}}for(we=1;we<=o;we++)for(I=1;I<=c;I++)e=(c+1)*we+(I-1),n=(c+1)*we+I,v=(c+1)*(we-1)+I,y.push((c+1)*(we-1)+(I-1),e,v),y.push(e,n,v);this.setIndex(y),this.setAttribute("position",new Rt(T,3)),this.setAttribute("normal",new Rt(D,3)),this.setAttribute("uv",new Rt(X,2))}function ng(e,n,o,c,v){ur.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:o,tubularSegments:c,arc:v},this.fromBufferGeometry(new sp(e,n,o,c,v)),this.mergeVertices()}function sp(e,n,o,c,v){Ut.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:n,radialSegments:o,tubularSegments:c,arc:v},e=e||1,n=n||.4,o=Math.floor(o)||8,c=Math.floor(c)||6,v=v||2*Math.PI;var g=[],A=[],y=[],T=[],D=new oe,X=new oe,I=new oe,b,N;for(b=0;b<=o;b++)for(N=0;N<=c;N++){var k=N/c*v,G=b/o*Math.PI*2;X.x=(e+n*Math.cos(G))*Math.cos(k),X.y=(e+n*Math.cos(G))*Math.sin(k),X.z=n*Math.sin(G),A.push(X.x,X.y,X.z),D.x=e*Math.cos(k),D.y=e*Math.sin(k),I.subVectors(X,D).normalize(),y.push(I.x,I.y,I.z),T.push(N/c),T.push(b/o)}for(b=1;b<=o;b++)for(N=1;N<=c;N++)e=(c+1)*(b-1)+N-1,n=(c+1)*(b-1)+N,v=(c+1)*b+N,g.push((c+1)*b+N-1,e,v),g.push(e,n,v);this.setIndex(g),this.setAttribute("position",new Rt(A,3)),this.setAttribute("normal",new Rt(y,3)),this.setAttribute("uv",new Rt(T,2))}function Ex(e,n,o,c,v){for(var g,A=0,y=n,T=o-c;y<o;y+=c)A+=(e[T]-e[y])*(e[y+1]+e[T+1]),T=y;if(v===0<A)for(v=n;v<o;v+=c)g=Wf(v,e[v],e[v+1],g);else for(v=o-c;v>=n;v-=c)g=Wf(v,e[v],e[v+1],g);return g&&og(g,g.next)&&(Xf(g),g=g.next),g}function cu(e,n){if(!e)return e;n||(n=e);do{var o=!1;if(e.steiner||!og(e,e.next)&&Mi(e.prev,e,e.next)!==0)e=e.next;else{if(Xf(e),e=n=e.prev,e===e.next)break;o=!0}}while(o||e!==n);return n}function ig(e,n,o,c,v,g,A){if(e){if(!A&&g){var y=e,T=y;do T.z===null&&(T.z=ds(T.x,T.y,c,v,g)),T.prevZ=T.prev,T=T.nextZ=T.next;while(T!==y);T.prevZ.nextZ=null,T.prevZ=null,y=T;var D,X,I,b,N=1;do{T=y;var k=y=null;for(X=0;T;){X++;var G=T;for(D=I=0;D<N&&(I++,G=G.nextZ,G);D++);for(b=N;0<I||0<b&&G;)I!==0&&(b===0||!G||T.z<=G.z)?(D=T,T=T.nextZ,I--):(D=G,G=G.nextZ,b--),k?k.nextZ=D:y=D,D.prevZ=k,k=D;T=G}k.nextZ=null,N*=2}while(1<X)}for(y=e;e.prev!==e.next;){if(T=e.prev,G=e.next,g)k=BC(e,c,v,g);else e:if(k=e,X=k.prev,I=k,N=k.next,0<=Mi(X,I,N))k=!1;else{for(D=k.next.next;D!==k.prev;){if(Dc(X.x,X.y,I.x,I.y,N.x,N.y,D.x,D.y)&&0<=Mi(D.prev,D,D.next)){k=!1;break e}D=D.next}k=!0}if(k)n.push(T.i/o),n.push(e.i/o),n.push(G.i/o),Xf(e),y=e=G.next;else if(e=G,e===y){if(!A)ig(cu(e),n,o,c,v,g,1);else if(A===1){e=cu(e),A=n,y=o,T=e;do G=T.prev,k=T.next.next,!og(G,k)&&UC(G,T,T.next,k)&&bc(G,k)&&bc(k,G)&&(A.push(G.i/y),A.push(T.i/y),A.push(k.i/y),Xf(T),Xf(T.next),T=e=k),T=T.next;while(T!==e);e=cu(T),ig(e,n,o,c,v,g,2)}else if(A===2)e:{A=e;do{for(y=A.next.next;y!==A.prev;){if(T=A.i!==y.i){if(T=A,G=y,k=T.next.i!==G.i&&T.prev.i!==G.i){t:{k=T;do{if(k.i!==T.i&&k.next.i!==T.i&&k.i!==G.i&&k.next.i!==G.i&&UC(k,k.next,T,G)){k=!0;break t}k=k.next}while(k!==T);k=!1}k=!k}if(k){if(k=bc(T,G)&&bc(G,T)){k=T,X=!1,I=(T.x+G.x)/2,N=(T.y+G.y)/2;do k.y>N!=k.next.y>N&&k.next.y!==k.y&&I<(k.next.x-k.x)*(N-k.y)/(k.next.y-k.y)+k.x&&(X=!X),k=k.next;while(k!==T);k=X}k=k&&(Mi(T.prev,T,G.prev)||Mi(T,G.prev,G))||og(T,G)&&0<Mi(T.prev,T,T.next)&&0<Mi(G.prev,G,G.next)}T=k}if(T){e=zl(A,y),A=cu(A,A.next),e=cu(e,e.next),ig(A,n,o,c,v,g),ig(e,n,o,c,v,g);break e}y=y.next}A=A.next}while(A!==e)}break}}}}function BC(e,n,o,c){var v=e.prev,g=e.next;if(0<=Mi(v,e,g))return!1;var A=v.x>e.x?v.x>g.x?v.x:g.x:e.x>g.x?e.x:g.x,y=v.y>e.y?v.y>g.y?v.y:g.y:e.y>g.y?e.y:g.y,T=ds(v.x<e.x?v.x<g.x?v.x:g.x:e.x<g.x?e.x:g.x,v.y<e.y?v.y<g.y?v.y:g.y:e.y<g.y?e.y:g.y,n,o,c);for(n=ds(A,y,n,o,c),o=e.prevZ,c=e.nextZ;o&&o.z>=T&&c&&c.z<=n;){if(o!==e.prev&&o!==e.next&&Dc(v.x,v.y,e.x,e.y,g.x,g.y,o.x,o.y)&&0<=Mi(o.prev,o,o.next)||(o=o.prevZ,c!==e.prev&&c!==e.next&&Dc(v.x,v.y,e.x,e.y,g.x,g.y,c.x,c.y)&&0<=Mi(c.prev,c,c.next)))return!1;c=c.nextZ}for(;o&&o.z>=T;){if(o!==e.prev&&o!==e.next&&Dc(v.x,v.y,e.x,e.y,g.x,g.y,o.x,o.y)&&0<=Mi(o.prev,o,o.next))return!1;o=o.prevZ}for(;c&&c.z<=n;){if(c!==e.prev&&c!==e.next&&Dc(v.x,v.y,e.x,e.y,g.x,g.y,c.x,c.y)&&0<=Mi(c.prev,c,c.next))return!1;c=c.nextZ}return!0}function Vf(e,n){return e.x-n.x}function zC(e,n){var o=n,c=e.x,v=e.y,g=-1/0;do{if(v<=o.y&&v>=o.next.y&&o.next.y!==o.y){var A=o.x+(v-o.y)*(o.next.x-o.x)/(o.next.y-o.y);if(A<=c&&A>g){if(g=A,A===c){if(v===o.y)return o;if(v===o.next.y)return o.next}var y=o.x<o.next.x?o:o.next}}o=o.next}while(o!==n);if(!y)return null;if(c===g)return y;n=y,A=y.x;var T=y.y,D=1/0;o=y;do{if(c>=o.x&&o.x>=A&&c!==o.x&&Dc(v<T?c:g,v,A,T,v<T?g:c,v,o.x,o.y)){var X=Math.abs(v-o.y)/(c-o.x),I;if((I=bc(o,e))&&!(I=X<D)&&(I=X===D)&&!(I=o.x>y.x)&&(I=o.x===y.x)){I=y;var b=o;I=0>Mi(I.prev,I,b.prev)&&0>Mi(b.next,I,I.next)}I&&(y=o,D=X)}o=o.next}while(o!==n);return y}function ds(e,n,o,c,v){return e=32767*(e-o)*v,n=32767*(n-c)*v,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,(e|e<<1)&1431655765|((n|n<<1)&1431655765)<<1}function y0(e){var n=e,o=e;do(n.x<o.x||n.x===o.x&&n.y<o.y)&&(o=n),n=n.next;while(n!==e);return o}function Dc(e,n,o,c,v,g,A,y){return 0<=(v-A)*(n-y)-(e-A)*(g-y)&&0<=(e-A)*(c-y)-(o-A)*(n-y)&&0<=(o-A)*(g-y)-(v-A)*(c-y)}function Mi(e,n,o){return(n.y-e.y)*(o.x-n.x)-(n.x-e.x)*(o.y-n.y)}function og(e,n){return e.x===n.x&&e.y===n.y}function UC(e,n,o,c){var v=Bl(Mi(e,n,o)),g=Bl(Mi(e,n,c)),A=Bl(Mi(o,c,e)),y=Bl(Mi(o,c,n));return!!(v!==g&&A!==y||v===0&&kh(e,o,n)||g===0&&kh(e,c,n)||A===0&&kh(o,e,c)||y===0&&kh(o,n,c))}function kh(e,n,o){return n.x<=Math.max(e.x,o.x)&&n.x>=Math.min(e.x,o.x)&&n.y<=Math.max(e.y,o.y)&&n.y>=Math.min(e.y,o.y)}function Bl(e){return 0<e?1:0>e?-1:0}function bc(e,n){return 0>Mi(e.prev,e,e.next)?0<=Mi(e,n,e.next)&&0<=Mi(e,e.prev,n):0>Mi(e,n,e.prev)||0>Mi(e,e.next,n)}function zl(e,n){var o=new ag(e.i,e.x,e.y),c=new ag(n.i,n.x,n.y),v=e.next,g=n.prev;return e.next=n,n.prev=e,o.next=v,v.prev=o,c.next=o,o.prev=c,g.next=c,c.prev=g,c}function Wf(e,n,o,c){return e=new ag(e,n,o),c?(e.next=c.next,e.prev=c,c.next.prev=e,c.next=e):(e.prev=e,e.next=e),e}function Xf(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ag(e,n,o){this.i=e,this.x=n,this.y=o,this.nextZ=this.prevZ=this.z=this.next=this.prev=null,this.steiner=!1}function x0(e){var n=e.length;2<n&&e[n-1].equals(e[0])&&e.pop()}function Ix(e,n){for(var o=0;o<n.length;o++)e.push(n[o].x),e.push(n[o].y)}function Hh(e,n){ur.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},this.fromBufferGeometry(new Ul(e,n)),this.mergeVertices()}function Ul(e,n){function o(T){function D(Ot,Jt,Kr){return Jt||console.error("THREE.ExtrudeGeometry: vec does not exist"),Jt.clone().multiplyScalar(Kr).add(Ot)}function X(Ot,Jt,Kr){var gn=Ot.x-Jt.x,Zt=Ot.y-Jt.y,Nr=Kr.x-Ot.x,Ln=Kr.y-Ot.y,Tr=gn*gn+Zt*Zt;if(Math.abs(gn*Ln-Zt*Nr)>Bo){var Qo=Math.sqrt(Tr),Ai=Math.sqrt(Nr*Nr+Ln*Ln);if(Tr=Jt.x-Zt/Qo,Jt=Jt.y+gn/Qo,Ln=((Kr.x-Ln/Ai-Tr)*Ln-(Kr.y+Nr/Ai-Jt)*Nr)/(gn*Ln-Zt*Nr),Nr=Tr+gn*Ln-Ot.x,gn=Jt+Zt*Ln-Ot.y,Zt=Nr*Nr+gn*gn,2>=Zt)return new U(Nr,gn);Zt=Math.sqrt(Zt/2)}else Ot=!1,gn>Bo?Nr>Bo&&(Ot=!0):gn<-Bo?Nr<-Bo&&(Ot=!0):lf(Zt)===lf(Ln)&&(Ot=!0),Ot?(Nr=-Zt,Zt=Math.sqrt(Tr)):(Nr=gn,gn=Zt,Zt=Math.sqrt(Tr/2));return new U(Nr/Zt,gn/Zt)}function I(Ot,Jt){for(Qe=Ot.length;0<=--Qe;){var Kr=Qe,gn=Qe-1;0>gn&&(gn=Ot.length-1);var Zt,Nr=ue+2*lt;for(Zt=0;Zt<Nr;Zt++){var Ln=Ce*Zt,Tr=Ce*(Zt+1),Qo=Jt+gn+Ln,Ai=Jt+gn+Tr;Tr=Jt+Kr+Tr,k(Jt+Kr+Ln),k(Qo),k(Tr),k(Qo),k(Ai),k(Tr),Ln=v.length/3,Ln=It.generateSideWallUV(c,v,Ln-6,Ln-3,Ln-2,Ln-1),G(Ln[0]),G(Ln[1]),G(Ln[3]),G(Ln[1]),G(Ln[2]),G(Ln[3])}}}function b(Ot,Jt,Kr){re.push(Ot),re.push(Jt),re.push(Kr)}function N(Ot,Jt,Kr){k(Ot),k(Jt),k(Kr),Ot=v.length/3,Ot=It.generateTopUV(c,v,Ot-3,Ot-2,Ot-1),G(Ot[0]),G(Ot[1]),G(Ot[2])}function k(Ot){v.push(re[3*Ot]),v.push(re[3*Ot+1]),v.push(re[3*Ot+2])}function G(Ot){g.push(Ot.x),g.push(Ot.y)}var re=[],se=n.curveSegments!==void 0?n.curveSegments:12,ue=n.steps!==void 0?n.steps:1,we=n.depth!==void 0?n.depth:100,Te=n.bevelEnabled!==void 0?n.bevelEnabled:!0,je=n.bevelThickness!==void 0?n.bevelThickness:6,Ge=n.bevelSize!==void 0?n.bevelSize:je-2,He=n.bevelOffset!==void 0?n.bevelOffset:0,lt=n.bevelSegments!==void 0?n.bevelSegments:3,ht=n.extrudePath,It=n.UVGenerator!==void 0?n.UVGenerator:TG;n.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),we=n.amount);var vt=!1;if(ht){var Et=ht.getSpacedPoints(ue);vt=!0,Te=!1;var xr=ht.computeFrenetFrames(ue,!1),Nt=new oe,Pr=new oe,qr=new oe}Te||(He=Ge=je=lt=0);var Fr;se=T.extractPoints(se),T=se.shape;var $n=se.holes;if(!Vp.isClockWise(T)){T=T.reverse();var Gr=0;for(Fr=$n.length;Gr<Fr;Gr++){var ze=$n[Gr];Vp.isClockWise(ze)&&($n[Gr]=ze.reverse())}}var Ue=Vp.triangulateShape(T,$n),ke=T;for(Gr=0,Fr=$n.length;Gr<Fr;Gr++)ze=$n[Gr],T=T.concat(ze);var Je,Ce=T.length,be,Fe=Ue.length;se=[];var Qe=0,ft=ke.length,Mt=ft-1;for(Je=Qe+1;Qe<ft;Qe++,Mt++,Je++)Mt===ft&&(Mt=0),Je===ft&&(Je=0),se[Qe]=X(ke[Qe],ke[Mt],ke[Je]);ht=[];var Ne=se.concat();for(Gr=0,Fr=$n.length;Gr<Fr;Gr++){ze=$n[Gr];var Gt=[];for(Qe=0,ft=ze.length,Mt=ft-1,Je=Qe+1;Qe<ft;Qe++,Mt++,Je++)Mt===ft&&(Mt=0),Je===ft&&(Je=0),Gt[Qe]=X(ze[Qe],ze[Mt],ze[Je]);ht.push(Gt),Ne=Ne.concat(Gt)}for(Mt=0;Mt<lt;Mt++){ft=Mt/lt;var Yt=je*Math.cos(ft*Math.PI/2);for(Je=Ge*Math.sin(ft*Math.PI/2)+He,Qe=0,ft=ke.length;Qe<ft;Qe++){var kt=D(ke[Qe],se[Qe],Je);b(kt.x,kt.y,-Yt)}for(Gr=0,Fr=$n.length;Gr<Fr;Gr++)for(ze=$n[Gr],Gt=ht[Gr],Qe=0,ft=ze.length;Qe<ft;Qe++)kt=D(ze[Qe],Gt[Qe],Je),b(kt.x,kt.y,-Yt)}for(Je=Ge+He,Qe=0;Qe<Ce;Qe++)kt=Te?D(T[Qe],Ne[Qe],Je):T[Qe],vt?(Pr.copy(xr.normals[0]).multiplyScalar(kt.x),Nt.copy(xr.binormals[0]).multiplyScalar(kt.y),qr.copy(Et[0]).add(Pr).add(Nt),b(qr.x,qr.y,qr.z)):b(kt.x,kt.y,0);for(ft=1;ft<=ue;ft++)for(Qe=0;Qe<Ce;Qe++)kt=Te?D(T[Qe],Ne[Qe],Je):T[Qe],vt?(Pr.copy(xr.normals[ft]).multiplyScalar(kt.x),Nt.copy(xr.binormals[ft]).multiplyScalar(kt.y),qr.copy(Et[ft]).add(Pr).add(Nt),b(qr.x,qr.y,qr.z)):b(kt.x,kt.y,we/ue*ft);for(Mt=lt-1;0<=Mt;Mt--){for(ft=Mt/lt,Yt=je*Math.cos(ft*Math.PI/2),Je=Ge*Math.sin(ft*Math.PI/2)+He,Qe=0,ft=ke.length;Qe<ft;Qe++)kt=D(ke[Qe],se[Qe],Je),b(kt.x,kt.y,we+Yt);for(Gr=0,Fr=$n.length;Gr<Fr;Gr++)for(ze=$n[Gr],Gt=ht[Gr],Qe=0,ft=ze.length;Qe<ft;Qe++)kt=D(ze[Qe],Gt[Qe],Je),vt?b(kt.x,kt.y+Et[ue-1].y,Et[ue-1].x+Yt):b(kt.x,kt.y,we+Yt)}(function(){var Ot=v.length/3;if(Te){var Jt=0*Ce;for(Qe=0;Qe<Fe;Qe++)be=Ue[Qe],N(be[2]+Jt,be[1]+Jt,be[0]+Jt);for(Jt=Ce*(ue+2*lt),Qe=0;Qe<Fe;Qe++)be=Ue[Qe],N(be[0]+Jt,be[1]+Jt,be[2]+Jt)}else{for(Qe=0;Qe<Fe;Qe++)be=Ue[Qe],N(be[2],be[1],be[0]);for(Qe=0;Qe<Fe;Qe++)be=Ue[Qe],N(be[0]+Ce*ue,be[1]+Ce*ue,be[2]+Ce*ue)}c.addGroup(Ot,v.length/3-Ot,0)})(),function(){var Ot=v.length/3,Jt=0;for(I(ke,Jt),Jt+=ke.length,Gr=0,Fr=$n.length;Gr<Fr;Gr++)ze=$n[Gr],I(ze,Jt),Jt+=ze.length;c.addGroup(Ot,v.length/3-Ot,1)}()}Ut.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];for(var c=this,v=[],g=[],A=0,y=e.length;A<y;A++)o(e[A]);this.setAttribute("position",new Rt(v,3)),this.setAttribute("uv",new Rt(g,2)),this.computeVertexNormals()}function Rx(e,n,o){if(o.shapes=[],Array.isArray(e))for(var c=0,v=e.length;c<v;c++)o.shapes.push(e[c].uuid);else o.shapes.push(e.uuid);return n.extrudePath!==void 0&&(o.options.extrudePath=n.extrudePath.toJSON()),o}function A0(e,n){ur.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:n},this.fromBufferGeometry(new lp(e,n)),this.mergeVertices()}function lp(e,n){n=n||{};var o=n.font;if(!o||!o.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new ur;e=o.generateShapes(e,n.size),n.depth=n.height!==void 0?n.height:50,n.bevelThickness===void 0&&(n.bevelThickness=10),n.bevelSize===void 0&&(n.bevelSize=8),n.bevelEnabled===void 0&&(n.bevelEnabled=!1),Ul.call(this,e,n),this.type="TextBufferGeometry"}function sg(e,n,o,c,v,g,A){ur.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:o,phiStart:c,phiLength:v,thetaStart:g,thetaLength:A},this.fromBufferGeometry(new Yf(e,n,o,c,v,g,A)),this.mergeVertices()}function Yf(e,n,o,c,v,g,A){Ut.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:o,phiStart:c,phiLength:v,thetaStart:g,thetaLength:A},e=e||1,n=Math.max(3,Math.floor(n)||8),o=Math.max(2,Math.floor(o)||6),c=c!==void 0?c:0,v=v!==void 0?v:2*Math.PI,g=g!==void 0?g:0,A=A!==void 0?A:Math.PI;var y=Math.min(g+A,Math.PI),T,D,X=0,I=[],b=new oe,N=new oe,k=[],G=[],re=[],se=[];for(D=0;D<=o;D++){var ue=[],we=D/o,Te=0;for(D==0&&g==0?Te=.5/n:D==o&&y==Math.PI&&(Te=-.5/n),T=0;T<=n;T++){var je=T/n;b.x=-e*Math.cos(c+je*v)*Math.sin(g+we*A),b.y=e*Math.cos(g+we*A),b.z=e*Math.sin(c+je*v)*Math.sin(g+we*A),G.push(b.x,b.y,b.z),N.copy(b).normalize(),re.push(N.x,N.y,N.z),se.push(je+Te,1-we),ue.push(X++)}I.push(ue)}for(D=0;D<o;D++)for(T=0;T<n;T++)e=I[D][T+1],c=I[D][T],v=I[D+1][T],A=I[D+1][T+1],(D!==0||0<g)&&k.push(e,c,A),(D!==o-1||y<Math.PI)&&k.push(c,v,A);this.setIndex(k),this.setAttribute("position",new Rt(G,3)),this.setAttribute("normal",new Rt(re,3)),this.setAttribute("uv",new Rt(se,2))}function lg(e,n,o,c,v,g){ur.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:o,phiSegments:c,thetaStart:v,thetaLength:g},this.fromBufferGeometry(new up(e,n,o,c,v,g)),this.mergeVertices()}function up(e,n,o,c,v,g){Ut.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:o,phiSegments:c,thetaStart:v,thetaLength:g},e=e||.5,n=n||1,v=v!==void 0?v:0,g=g!==void 0?g:2*Math.PI,o=o!==void 0?Math.max(3,o):8,c=c!==void 0?Math.max(1,c):1;var A=[],y=[],T=[],D=[],X=e,I=(n-e)/c,b=new oe,N=new U,k,G;for(k=0;k<=c;k++){for(G=0;G<=o;G++)e=v+G/o*g,b.x=X*Math.cos(e),b.y=X*Math.sin(e),y.push(b.x,b.y,b.z),T.push(0,0,1),N.x=(b.x/n+1)/2,N.y=(b.y/n+1)/2,D.push(N.x,N.y);X+=I}for(k=0;k<c;k++)for(n=k*(o+1),G=0;G<o;G++)e=G+n,v=e+o+1,g=e+o+2,X=e+1,A.push(e,v,X),A.push(v,g,X);this.setIndex(A),this.setAttribute("position",new Rt(y,3)),this.setAttribute("normal",new Rt(T,3)),this.setAttribute("uv",new Rt(D,2))}function ug(e,n,o,c){ur.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:o,phiLength:c},this.fromBufferGeometry(new cp(e,n,o,c)),this.mergeVertices()}function cp(e,n,o,c){Ut.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:n,phiStart:o,phiLength:c},n=Math.floor(n)||12,o=o||0,c=c||2*Math.PI,c=ai.clamp(c,0,2*Math.PI);var v=[],g=[],A=[],y=1/n,T=new oe,D=new U,X;for(X=0;X<=n;X++){var I=o+X*y*c,b=Math.sin(I),N=Math.cos(I);for(I=0;I<=e.length-1;I++)T.x=e[I].x*b,T.y=e[I].y,T.z=e[I].x*N,g.push(T.x,T.y,T.z),D.x=X/n,D.y=I/(e.length-1),A.push(D.x,D.y)}for(X=0;X<n;X++)for(I=0;I<e.length-1;I++)o=I+X*e.length,y=o+e.length,T=o+e.length+1,D=o+1,v.push(o,y,D),v.push(y,T,D);if(this.setIndex(v),this.setAttribute("position",new Rt(g,3)),this.setAttribute("uv",new Rt(A,2)),this.computeVertexNormals(),c===2*Math.PI)for(c=this.attributes.normal.array,v=new oe,g=new oe,A=new oe,o=n*e.length*3,I=X=0;X<e.length;X++,I+=3)v.x=c[I+0],v.y=c[I+1],v.z=c[I+2],g.x=c[o+I+0],g.y=c[o+I+1],g.z=c[o+I+2],A.addVectors(v,g).normalize(),c[I+0]=c[o+I+0]=A.x,c[I+1]=c[o+I+1]=A.y,c[I+2]=c[o+I+2]=A.z}function hp(e,n){ur.call(this),this.type="ShapeGeometry",(typeof n>"u"?"undefined":Jc(n))==="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),n=n.curveSegments),this.parameters={shapes:e,curveSegments:n},this.fromBufferGeometry(new Zu(e,n)),this.mergeVertices()}function Zu(e,n){function o(X){var I,b=v.length/3;X=X.extractPoints(n);var N=X.shape,k=X.holes;for(Vp.isClockWise(N)===!1&&(N=N.reverse()),X=0,I=k.length;X<I;X++){var G=k[X];Vp.isClockWise(G)===!0&&(k[X]=G.reverse())}var re=Vp.triangulateShape(N,k);for(X=0,I=k.length;X<I;X++)G=k[X],N=N.concat(G);for(X=0,I=N.length;X<I;X++)G=N[X],v.push(G.x,G.y,0),g.push(0,0,1),A.push(G.x,G.y);for(X=0,I=re.length;X<I;X++)N=re[X],c.push(N[0]+b,N[1]+b,N[2]+b),T+=3}Ut.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:n},n=n||12;var c=[],v=[],g=[],A=[],y=0,T=0;if(Array.isArray(e)===!1)o(e);else for(var D=0;D<e.length;D++)o(e[D]),this.addGroup(y,T,D),y+=T,T=0;this.setIndex(c),this.setAttribute("position",new Rt(v,3)),this.setAttribute("normal",new Rt(g,3)),this.setAttribute("uv",new Rt(A,2))}function Lx(e,n){if(n.shapes=[],Array.isArray(e))for(var o=0,c=e.length;o<c;o++)n.shapes.push(e[o].uuid);else n.shapes.push(e.uuid);return n}function Fc(e,n){Ut.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:n};var o=[];n=Math.cos(ai.DEG2RAD*(n!==void 0?n:1));var c=[0,0],v={},g=["a","b","c"];if(e.isBufferGeometry){var A=new ur;A.fromBufferGeometry(e)}else A=e.clone();A.mergeVertices(),A.computeFaceNormals(),e=A.vertices,A=A.faces;for(var y=0,T=A.length;y<T;y++)for(var D=A[y],X=0;3>X;X++){var I=D[g[X]],b=D[g[(X+1)%3]];c[0]=Math.min(I,b),c[1]=Math.max(I,b),I=c[0]+","+c[1],v[I]===void 0?v[I]={index1:c[0],index2:c[1],face1:y,face2:void 0}:v[I].face2=y}for(I in v)c=v[I],(c.face2===void 0||A[c.face1].normal.dot(A[c.face2].normal)<=n)&&(g=e[c.index1],o.push(g.x,g.y,g.z),g=e[c.index2],o.push(g.x,g.y,g.z));this.setAttribute("position",new Rt(o,3))}function Ta(e,n,o,c,v,g,A,y){ur.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:o,radialSegments:c,heightSegments:v,openEnded:g,thetaStart:A,thetaLength:y},this.fromBufferGeometry(new jh(e,n,o,c,v,g,A,y)),this.mergeVertices()}function jh(e,n,o,c,v,g,A,y){function T(ue){var we,Te=new U,je=new oe,Ge=0,He=ue===!0?e:n,lt=ue===!0?1:-1,ht=k;for(we=1;we<=c;we++)I.push(0,re*lt,0),b.push(0,lt,0),N.push(.5,.5),k++;var It=k;for(we=0;we<=c;we++){var vt=we/c*y+A,Et=Math.cos(vt);vt=Math.sin(vt),je.x=He*vt,je.y=re*lt,je.z=He*Et,I.push(je.x,je.y,je.z),b.push(0,lt,0),Te.x=.5*Et+.5,Te.y=.5*vt*lt+.5,N.push(Te.x,Te.y),k++}for(we=0;we<c;we++)Te=ht+we,je=It+we,ue===!0?X.push(je,je+1,Te):X.push(je+1,je,Te),Ge+=3;D.addGroup(se,Ge,ue===!0?1:2),se+=Ge}Ut.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:o,radialSegments:c,heightSegments:v,openEnded:g,thetaStart:A,thetaLength:y};var D=this;e=e!==void 0?e:1,n=n!==void 0?n:1,o=o||1,c=Math.floor(c)||8,v=Math.floor(v)||1,g=g!==void 0?g:!1,A=A!==void 0?A:0,y=y!==void 0?y:2*Math.PI;var X=[],I=[],b=[],N=[],k=0,G=[],re=o/2,se=0;(function(){var ue,we,Te=new oe,je=new oe,Ge=0,He=(n-e)/o;for(we=0;we<=v;we++){var lt=[],ht=we/v,It=ht*(n-e)+e;for(ue=0;ue<=c;ue++){var vt=ue/c,Et=vt*y+A,xr=Math.sin(Et);Et=Math.cos(Et),je.x=It*xr,je.y=-ht*o+re,je.z=It*Et,I.push(je.x,je.y,je.z),Te.set(xr,He,Et).normalize(),b.push(Te.x,Te.y,Te.z),N.push(vt,1-ht),lt.push(k++)}G.push(lt)}for(ue=0;ue<c;ue++)for(we=0;we<v;we++)Te=G[we+1][ue],je=G[we+1][ue+1],He=G[we][ue+1],X.push(G[we][ue],Te,He),X.push(Te,je,He),Ge+=6;D.addGroup(se,Ge,0),se+=Ge})(),g===!1&&(0<e&&T(!0),0<n&&T(!1)),this.setIndex(X),this.setAttribute("position",new Rt(I,3)),this.setAttribute("normal",new Rt(b,3)),this.setAttribute("uv",new Rt(N,2))}function ln(e,n,o,c,v,g,A){Ta.call(this,0,e,n,o,c,v,g,A),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:o,heightSegments:c,openEnded:v,thetaStart:g,thetaLength:A}}function w0(e,n,o,c,v,g,A){jh.call(this,0,e,n,o,c,v,g,A),this.type="ConeBufferGeometry",this.parameters={radius:e,height:n,radialSegments:o,heightSegments:c,openEnded:v,thetaStart:g,thetaLength:A}}function C0(e,n,o,c){ur.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:o,thetaLength:c},this.fromBufferGeometry(new fp(e,n,o,c)),this.mergeVertices()}function fp(e,n,o,c){Ut.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:n,thetaStart:o,thetaLength:c},e=e||1,n=n!==void 0?Math.max(3,n):8,o=o!==void 0?o:0,c=c!==void 0?c:2*Math.PI;var v=[],g=[],A=[],y=[],T,D=new oe,X=new U;g.push(0,0,0),A.push(0,0,1),y.push(.5,.5);var I=0;for(T=3;I<=n;I++,T+=3){var b=o+I/n*c;D.x=e*Math.cos(b),D.y=e*Math.sin(b),g.push(D.x,D.y,D.z),A.push(0,0,1),X.x=(g[T]/e+1)/2,X.y=(g[T+1]/e+1)/2,y.push(X.x,X.y)}for(T=1;T<=n;T++)v.push(T,T+1,0);this.setIndex(v),this.setAttribute("position",new Rt(g,3)),this.setAttribute("normal",new Rt(A,3)),this.setAttribute("uv",new Rt(y,2))}function dp(e){$e.call(this),this.type="ShadowMaterial",this.color=new Ye(0),this.transparent=!0,this.setValues(e)}function cg(e){en.call(this,e),this.type="RawShaderMaterial"}function Ts(e){$e.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ye(16777215),this.roughness=1,this.metalness=0,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ye(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new U(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexTangents=this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function Zf(e){Ts.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new U(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(e)}function Nc(e){$e.call(this),this.type="MeshPhongMaterial",this.color=new Ye(16777215),this.specular=new Ye(1118481),this.shininess=30,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ye(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new U(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function sn(e){$e.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ye(16777215),this.specular=new Ye(1118481),this.shininess=30,this.lightMap=this.gradientMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ye(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new U(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=this.specularMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function pp(e){$e.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new U(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.fog=!1,this.setValues(e)}function mp(e){$e.call(this),this.type="MeshLambertMaterial",this.color=new Ye(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ye(0),this.emissiveIntensity=1,this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function Bc(e){$e.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ye(16777215),this.bumpMap=this.map=this.matcap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new U(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function gp(e){Io.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}function Zs(e,n,o,c){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=c!==void 0?c:new n.constructor(o),this.sampleValues=n,this.valueSize=o}function qf(e,n,o,c){Zs.call(this,e,n,o,c),this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function _0(e,n,o,c){Zs.call(this,e,n,o,c)}function hg(e,n,o,c){Zs.call(this,e,n,o,c)}function ps(e,n,o,c){if(e===void 0)throw Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=ua.convertArray(n,this.TimeBufferType),this.values=ua.convertArray(o,this.ValueBufferType),this.setInterpolation(c||this.DefaultInterpolation)}function Kf(e,n,o){ps.call(this,e,n,o)}function Gh(e,n,o,c){ps.call(this,e,n,o,c)}function vp(e,n,o,c){ps.call(this,e,n,o,c)}function Xi(e,n,o,c){Zs.call(this,e,n,o,c)}function yp(e,n,o,c){ps.call(this,e,n,o,c)}function M0(e,n,o,c){ps.call(this,e,n,o,c)}function Jf(e,n,o,c){ps.call(this,e,n,o,c)}function qs(e,n,o,c){this.name=e,this.tracks=o,this.duration=n!==void 0?n:-1,this.blendMode=c!==void 0?c:2500,this.uuid=ai.generateUUID(),0>this.duration&&this.resetDuration()}function kC(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return vp;case"vector":case"vector2":case"vector3":case"vector4":return Jf;case"color":return Gh;case"quaternion":return yp;case"bool":case"boolean":return Kf;case"string":return M0}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function HC(e){if(e.type===void 0)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var n=kC(e.type);if(e.times===void 0){var o=[],c=[];ua.flattenJSON(e.keys,o,c,"value"),e.times=o,e.values=c}return n.parse!==void 0?n.parse(e):new n(e.name,e.times,e.values,e.interpolation)}function jC(e,n,o){var c=this,v=!1,g=0,A=0,y=void 0,T=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=o,this.itemStart=function(D){A++,v===!1&&c.onStart!==void 0&&c.onStart(D,g,A),v=!0},this.itemEnd=function(D){g++,c.onProgress!==void 0&&c.onProgress(D,g,A),g===A&&(v=!1,c.onLoad!==void 0)&&c.onLoad()},this.itemError=function(D){c.onError!==void 0&&c.onError(D)},this.resolveURL=function(D){return y?y(D):D},this.setURLModifier=function(D){return y=D,this},this.addHandler=function(D,X){return T.push(D,X),this},this.removeHandler=function(D){return D=T.indexOf(D),D!==-1&&T.splice(D,2),this},this.getHandler=function(D){for(var X=0,I=T.length;X<I;X+=2){var b=T[X],N=T[X+1];if(b.global&&(b.lastIndex=0),b.test(D))return N}return null}}function gi(e){this.manager=e!==void 0?e:Sb,this.crossOrigin="anonymous",this.resourcePath=this.path="",this.requestHeader={}}function Qa(e){gi.call(this,e)}function GC(e){gi.call(this,e)}function Yn(e){gi.call(this,e)}function VC(e){gi.call(this,e)}function fg(e){gi.call(this,e)}function Px(e){gi.call(this,e)}function xp(e){gi.call(this,e)}function Cn(){this.type="Curve",this.arcLengthDivisions=200}function kl(e,n,o,c,v,g,A,y){Cn.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=n||0,this.xRadius=o||1,this.yRadius=c||1,this.aStartAngle=v||0,this.aEndAngle=g||2*Math.PI,this.aClockwise=A||!1,this.aRotation=y||0}function dg(e,n,o,c,v,g){kl.call(this,e,n,o,o,c,v,g),this.type="ArcCurve"}function Qf(){var e=0,n=0,o=0,c=0;return{initCatmullRom:function(v,g,A,y,T){v=T*(A-v),y=T*(y-g),e=g,n=v,o=-3*g+3*A-2*v-y,c=2*g-2*A+v+y},initNonuniformCatmullRom:function(v,g,A,y,T,D,X){v=((g-v)/T-(A-v)/(T+D)+(A-g)/D)*D,y=((A-g)/D-(y-g)/(D+X)+(y-A)/X)*D,e=g,n=v,o=-3*g+3*A-2*v-y,c=2*g-2*A+v+y},calc:function(v){var g=v*v;return e+n*v+o*g+c*g*v}}}function jo(e,n,o,c){Cn.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=n||!1,this.curveType=o||"centripetal",this.tension=c||.5}function WC(e,n,o,c,v){n=.5*(c-n),v=.5*(v-o);var g=e*e;return(2*o-2*c+n+v)*e*g+(-3*o+3*c-2*n-v)*g+n*e+o}function pg(e,n,o,c){var v=1-e;return v*v*n+2*(1-e)*e*o+e*e*c}function mg(e,n,o,c,v){var g=1-e,A=1-e;return g*g*g*n+3*A*A*e*o+3*(1-e)*e*e*c+e*e*e*v}function Ks(e,n,o,c){Cn.call(this),this.type="CubicBezierCurve",this.v0=e||new U,this.v1=n||new U,this.v2=o||new U,this.v3=c||new U}function oo(e,n,o,c){Cn.call(this),this.type="CubicBezierCurve3",this.v0=e||new oe,this.v1=n||new oe,this.v2=o||new oe,this.v3=c||new oe}function $a(e,n){Cn.call(this),this.type="LineCurve",this.v1=e||new U,this.v2=n||new U}function Js(e,n){Cn.call(this),this.type="LineCurve3",this.v1=e||new oe,this.v2=n||new oe}function ms(e,n,o){Cn.call(this),this.type="QuadraticBezierCurve",this.v0=e||new U,this.v1=n||new U,this.v2=o||new U}function zc(e,n,o){Cn.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new oe,this.v1=n||new oe,this.v2=o||new oe}function Es(e){Cn.call(this),this.type="SplineCurve",this.points=e||[]}function ga(){Cn.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Hl(e){ga.call(this),this.type="Path",this.currentPoint=new U,e&&this.setFromPoints(e)}function Vh(e){Hl.call(this,e),this.uuid=ai.generateUUID(),this.type="Shape",this.holes=[]}function po(e,n){ce.call(this),this.type="Light",this.color=new Ye(e),this.intensity=n!==void 0?n:1,this.receiveShadow=void 0}function Ap(e,n,o){po.call(this,e,o),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(ce.DefaultUp),this.updateMatrix(),this.groundColor=new Ye(n)}function Uc(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new U(512,512),this.mapPass=this.map=null,this.matrix=new me,this._frustum=new xn,this._frameExtents=new U(1,1),this._viewportCount=1,this._viewports=[new te(0,0,1,1)]}function gg(){Uc.call(this,new lr(50,1,.5,500))}function qu(e,n,o,c,v,g){po.call(this,e,n),this.type="SpotLight",this.position.copy(ce.DefaultUp),this.updateMatrix(),this.target=new ce,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(A){this.intensity=A/Math.PI}}),this.distance=o!==void 0?o:0,this.angle=c!==void 0?c:Math.PI/3,this.penumbra=v!==void 0?v:0,this.decay=g!==void 0?g:1,this.shadow=new gg}function vg(){Uc.call(this,new lr(90,1,.5,500)),this._frameExtents=new U(4,2),this._viewportCount=6,this._viewports=[new te(2,1,1,1),new te(0,1,1,1),new te(3,1,1,1),new te(1,1,1,1),new te(3,0,1,1),new te(1,0,1,1)],this._cubeDirections=[new oe(1,0,0),new oe(-1,0,0),new oe(0,0,1),new oe(0,0,-1),new oe(0,1,0),new oe(0,-1,0)],this._cubeUps=[new oe(0,1,0),new oe(0,1,0),new oe(0,1,0),new oe(0,1,0),new oe(0,0,1),new oe(0,0,-1)]}function Wh(e,n,o,c){po.call(this,e,n),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(v){this.intensity=v/(4*Math.PI)}}),this.distance=o!==void 0?o:0,this.decay=c!==void 0?c:1,this.shadow=new vg}function kc(e,n,o,c,v,g){Fn.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e!==void 0?e:-1,this.right=n!==void 0?n:1,this.top=o!==void 0?o:1,this.bottom=c!==void 0?c:-1,this.near=v!==void 0?v:.1,this.far=g!==void 0?g:2e3,this.updateProjectionMatrix()}function $f(){Uc.call(this,new kc(-5,5,5,-5,.5,500))}function yg(e,n){po.call(this,e,n),this.type="DirectionalLight",this.position.copy(ce.DefaultUp),this.updateMatrix(),this.target=new ce,this.shadow=new $f}function xg(e,n){po.call(this,e,n),this.type="AmbientLight",this.castShadow=void 0}function wp(e,n,o,c){po.call(this,e,n),this.type="RectAreaLight",this.width=o!==void 0?o:10,this.height=c!==void 0?c:10}function Ox(){this.coefficients=[];for(var e=0;9>e;e++)this.coefficients.push(new oe)}function jl(e,n){po.call(this,void 0,n),this.type="LightProbe",this.sh=e!==void 0?e:new Ox}function hu(e){gi.call(this,e),this.textures={}}function Xh(){Ut.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function Hc(e,n,o,c){typeof o=="number"&&(c=o,o=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Ve.call(this,e,n,o),this.meshPerAttribute=c||1}function ed(e){gi.call(this,e)}function Ag(e){gi.call(this,e)}function wg(e){typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),gi.call(this,e),this.options=void 0}function Dx(){this.type="ShapePath",this.color=new Ye,this.subPaths=[],this.currentPath=null}function bx(e){this.type="Font",this.data=e}function Fx(e){gi.call(this,e)}function td(e){gi.call(this,e)}function Is(e,n,o){jl.call(this,void 0,o),e=new Ye().set(e),o=new Ye().set(n),n=new oe(e.r,e.g,e.b),e=new oe(o.r,o.g,o.b),o=Math.sqrt(Math.PI);var c=o*Math.sqrt(.75);this.sh.coefficients[0].copy(n).add(e).multiplyScalar(o),this.sh.coefficients[1].copy(n).sub(e).multiplyScalar(c)}function fu(e,n){jl.call(this,void 0,n),e=new Ye().set(e),this.sh.coefficients[0].set(e.r,e.g,e.b).multiplyScalar(2*Math.sqrt(Math.PI))}function S0(e){this.autoStart=e!==void 0?e:!0,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1}function Nx(){ce.call(this),this.type="AudioListener",this.context=Ib.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new S0}function Cp(e){ce.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.offset=this.loopEnd=this.loopStart=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._progress=this._startedAt=0,this.filters=[]}function Bx(e){Cp.call(this,e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function zx(e,n){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n!==void 0?n:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function T0(e,n,o){switch(this.binding=e,this.valueSize=o,n){case"quaternion":e=this._slerp,n=this._slerpAdditive;var c=this._setAdditiveIdentityQuaternion;this.buffer=new Float64Array(6*o),this._workIndex=5;break;case"string":case"bool":n=e=this._select,c=this._setAdditiveIdentityOther,this.buffer=Array(5*o);break;default:e=this._lerp,n=this._lerpAdditive,c=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*o)}this._mixBufferRegion=e,this._mixBufferRegionAdditive=n,this._setIdentity=c,this._origIndex=3,this._addIndex=4,this.referenceCount=this.useCount=this.cumulativeWeightAdditive=this.cumulativeWeight=0}function Ux(e,n,o){o=o||ka.parseTrackName(n),this._targetGroup=e,this._bindings=e.subscribe_(n,o)}function ka(e,n,o){this.path=n,this.parsedPath=o||ka.parseTrackName(n),this.node=ka.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function kx(e,n,o,c){this._mixer=e,this._clip=n,this._localRoot=o||null,this.blendMode=c||n.blendMode,e=n.tracks,n=e.length,o=Array(n),c={endingStart:2400,endingEnd:2400};for(var v=0;v!==n;++v){var g=e[v].createInterpolant(null);o[v]=g,g.settings=c}this._interpolantSettings=c,this._interpolants=o,this._propertyBindings=Array(n),this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function Hx(e){this._root=e,this._initMemoryManager(),this.time=this._accuIndex=0,this.timeScale=1}function jx(e,n){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=n),this.value=e}function Gx(e,n,o){Mr.call(this,e,n),this.meshPerAttribute=o||1}function Vx(e,n,o,c){this.ray=new We(e,n),this.near=o||0,this.far=c||1/0,this.camera=null,this.layers=new de,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Rn(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function _p(e,n){return e.distance-n.distance}function Wx(e,n,o,c){if(e.layers.test(n.layers)&&e.raycast(n,o),c===!0){e=e.children,c=0;for(var v=e.length;c<v;c++)Wx(e[c],n,o,!0)}}function Ea(e,n){this.min=e!==void 0?e:new U(1/0,1/0),this.max=n!==void 0?n:new U(-1/0,-1/0)}function Yh(e,n){this.start=e!==void 0?e:new oe,this.end=n!==void 0?n:new oe}function zn(e){ce.call(this),this.material=e,this.render=function(){},this.hasUvs=this.hasColors=this.hasNormals=this.hasPositions=!1,this.uvArray=this.colorArray=this.normalArray=this.positionArray=null,this.count=0}function Gl(e,n){ce.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,e=new Ut,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var o=0,c=1;32>o;o++,c++){var v=o/32*Math.PI*2,g=c/32*Math.PI*2;n.push(Math.cos(v),Math.sin(v),1,Math.cos(g),Math.sin(g),1)}e.setAttribute("position",new Rt(n,3)),n=new Io({fog:!1,toneMapped:!1}),this.cone=new io(e,n),this.add(this.cone),this.update()}function Zh(e){var n=[];e&&e.isBone&&n.push(e);for(var o=0;o<e.children.length;o++)n.push.apply(n,Zh(e.children[o]));return n}function Mp(e){for(var n=Zh(e),o=new Ut,c=[],v=[],g=new Ye(0,0,1),A=new Ye(0,1,0),y=0;y<n.length;y++){var T=n[y];T.parent&&T.parent.isBone&&(c.push(0,0,0),c.push(0,0,0),v.push(g.r,g.g,g.b),v.push(A.r,A.g,A.b))}o.setAttribute("position",new Rt(c,3)),o.setAttribute("color",new Rt(v,3)),c=new Io({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0}),io.call(this,o,c),this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function Cg(e,n,o){this.light=e,this.light.updateMatrixWorld(),this.color=o,e=new Yf(n,4,2),n=new tt({wireframe:!0,fog:!1,toneMapped:!1}),_r.call(this,e,n),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Vl(e,n,o){ce.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=o,e=new Yu(n),e.rotateY(.5*Math.PI),this.material=new tt({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0),n=e.getAttribute("position"),n=new Float32Array(3*n.count),e.setAttribute("color",new Ve(n,3)),this.add(new _r(e,this.material)),this.update()}function E0(e,n,o,c){e=e||10,n=n||10,o=new Ye(o!==void 0?o:4473924),c=new Ye(c!==void 0?c:8947848);var v=n/2,g=e/n,A=e/2;e=[];for(var y=[],T=0,D=0,X=-A;T<=n;T++,X+=g){e.push(-A,0,X,A,0,X),e.push(X,0,-A,X,0,A);var I=T===v?o:c;I.toArray(y,D),D+=3,I.toArray(y,D),D+=3,I.toArray(y,D),D+=3,I.toArray(y,D),D+=3}n=new Ut,n.setAttribute("position",new Rt(e,3)),n.setAttribute("color",new Rt(y,3)),o=new Io({vertexColors:!0,toneMapped:!1}),io.call(this,n,o),this.type="GridHelper"}function Wl(e,n,o,c,v,g){e=e||10,n=n||16,o=o||8,c=c||64,v=new Ye(v!==void 0?v:4473924),g=new Ye(g!==void 0?g:8947848);var A=[],y=[],T;for(T=0;T<=n;T++){var D=T/n*2*Math.PI,X=Math.sin(D)*e;D=Math.cos(D)*e,A.push(0,0,0),A.push(X,0,D);var I=T&1?v:g;y.push(I.r,I.g,I.b),y.push(I.r,I.g,I.b)}for(T=0;T<=o;T++){I=T&1?v:g;var b=e-e/o*T;for(n=0;n<c;n++)D=n/c*2*Math.PI,X=Math.sin(D)*b,D=Math.cos(D)*b,A.push(X,0,D),y.push(I.r,I.g,I.b),D=(n+1)/c*2*Math.PI,X=Math.sin(D)*b,D=Math.cos(D)*b,A.push(X,0,D),y.push(I.r,I.g,I.b)}e=new Ut,e.setAttribute("position",new Rt(A,3)),e.setAttribute("color",new Rt(y,3)),A=new Io({vertexColors:!0,toneMapped:!1}),io.call(this,e,A),this.type="PolarGridHelper"}function Sp(e,n,o){ce.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=o,n===void 0&&(n=1),e=new Ut,e.setAttribute("position",new Rt([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3)),n=new Io({fog:!1,toneMapped:!1}),this.lightPlane=new Xs(e,n),this.add(this.lightPlane),e=new Ut,e.setAttribute("position",new Rt([0,0,0,0,0,1],3)),this.targetLine=new Xs(e,n),this.add(this.targetLine),this.update()}function Qs(e){function n(N,k,G){o(N,G),o(k,G)}function o(N,k){g.push(0,0,0),A.push(k.r,k.g,k.b),y[N]===void 0&&(y[N]=[]),y[N].push(g.length/3-1)}var c=new Ut,v=new Io({color:16777215,vertexColors:!0,toneMapped:!1}),g=[],A=[],y={},T=new Ye(16755200),D=new Ye(16711680),X=new Ye(43775),I=new Ye(16777215),b=new Ye(3355443);n("n1","n2",T),n("n2","n4",T),n("n4","n3",T),n("n3","n1",T),n("f1","f2",T),n("f2","f4",T),n("f4","f3",T),n("f3","f1",T),n("n1","f1",T),n("n2","f2",T),n("n3","f3",T),n("n4","f4",T),n("p","n1",D),n("p","n2",D),n("p","n3",D),n("p","n4",D),n("u1","u2",X),n("u2","u3",X),n("u3","u1",X),n("c","t",I),n("p","c",b),n("cn1","cn2",b),n("cn3","cn4",b),n("cf1","cf2",b),n("cf3","cf4",b),c.setAttribute("position",new Rt(g,3)),c.setAttribute("color",new Rt(A,3)),io.call(this,c,v),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=y,this.update()}function oa(e,n,o,c,v,g,A){if(oM.set(v,g,A).unproject(c),e=n[e],e!==void 0)for(o=o.getAttribute("position"),n=0,c=e.length;n<c;n++)o.setXYZ(e[n],oM.x,oM.y,oM.z)}function jc(e,n){this.object=e,n===void 0&&(n=16776960),e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var o=new Float32Array(24),c=new Ut;c.setIndex(new Ve(e,1)),c.setAttribute("position",new Ve(o,3)),io.call(this,c,new Io({color:n,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}function I0(e,n){this.type="Box3Helper",this.box=e,n=n||16776960,e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var o=new Ut;o.setIndex(new Ve(e,1)),o.setAttribute("position",new Rt([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),io.call(this,o,new Io({color:n,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}function R0(e,n,o){this.plane=e,this.size=n===void 0?1:n,e=o!==void 0?o:16776960,n=new Ut,n.setAttribute("position",new Rt([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),n.computeBoundingSphere(),Xs.call(this,n,new Io({color:e,toneMapped:!1})),this.type="PlaneHelper",n=new Ut,n.setAttribute("position",new Rt([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),n.computeBoundingSphere(),this.add(new _r(n,new tt({color:e,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}function du(e,n,o,c,v,g){ce.call(this),this.type="ArrowHelper",e===void 0&&(e=new oe(0,0,1)),n===void 0&&(n=new oe(0,0,0)),o===void 0&&(o=1),c===void 0&&(c=16776960),v===void 0&&(v=.2*o),g===void 0&&(g=.2*v),sM===void 0&&(sM=new Ut,sM.setAttribute("position",new Rt([0,0,0,0,1,0],3)),WI=new jh(0,.5,1,5,1),WI.translate(0,-.5,0)),this.position.copy(n),this.line=new Xs(sM,new Io({color:c,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new _r(WI,new tt({color:c,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(o,v,g)}function Xx(e){e=e||1;var n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e];e=new Ut,e.setAttribute("position",new Rt(n,3)),e.setAttribute("color",new Rt([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),n=new Io({vertexColors:!0,toneMapped:!1}),io.call(this,e,n),this.type="AxesHelper"}function XC(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),jo.call(this,e),this.type="catmullrom"}function qh(){}function Yx(e,n){for(var o in n)e[o]=n[o]}function es(e,n){this.lng=e,this.lat=n}function Gc(e,n){this.x=e,this.y=n}function gl(e){for(var n=e.length;0<=--n;)e[n]=0}function Kh(e,n){return function(o){return n(e(o))}}function Jh(e){var n=function(o){return o==null?o:(1<arguments.length&&(o=Array.prototype.slice.call(arguments)),e(o))};return"conversion"in e&&(n.conversion=e.conversion),n}function ts(e){var n=function(o){if(o==null)return o;1<arguments.length&&(o=Array.prototype.slice.call(arguments));var c=e(o);if((typeof c>"u"?"undefined":Jc(c))==="object")for(var v=c.length,g=0;g<v;g++)c[g]=Math.round(c[g]);return c};return"conversion"in e&&(n.conversion=e.conversion),n}function kn(e,n){if(!(this instanceof kn))return new kn(e,n);if(n&&n in Gb&&(n=null),n&&!(n in Au))throw Error("Unknown model: "+n);if(typeof e>"u")this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof kn)this.model=e.model,this.color=e.color.slice(),this.valpha=e.valpha;else if(typeof e=="string"){if(n=$2.get(e),n===null)throw Error("Unable to parse color from string: "+e);this.model=n.model;var o=Au[this.model].channels;this.color=n.value.slice(0,o),this.valpha=typeof n.value[o]=="number"?n.value[o]:1}else if(e.length)this.model=n||"rgb",o=Au[this.model].channels,n=YI.call(e,0,o),this.color=Mg(n,o),this.valpha=typeof e[o]=="number"?e[o]:1;else if(typeof e=="number")e&=16777215,this.model="rgb",this.color=[e>>16&255,e>>8&255,e&255],this.valpha=1;else{if(this.valpha=1,n=Hi(e),"alpha"in e&&(n.splice(n.indexOf("alpha"),1),this.valpha=typeof e.alpha=="number"?e.alpha:0),n=n.sort().join(""),!(n in ZI))throw Error("Unable to parse color from object: "+yu(e));this.model=ZI[n],o=Au[this.model].labels;var c=[];for(n=0;n<o.length;n++)c.push(e[o[n]]);this.color=Mg(c)}if(lM[this.model])for(o=Au[this.model].channels,n=0;n<o;n++)(e=lM[this.model][n])&&(this.color[n]=e(this.color[n]));this.valpha=Math.max(0,Math.min(1,this.valpha)),rc&&rc(this)}function _g(e){return function(n){return Number(n.toFixed(e))}}function Go(e,n,o){return e=Array.isArray(e)?e:[e],e.forEach(function(c){(lM[c]||(lM[c]=[]))[n]=o}),e=e[0],function(c){if(arguments.length){o&&(c=o(c));var v=this[e]();return v.color[n]=c,v}return v=this[e]().color[n],o&&(v=o(v)),v}}function Ro(e){return function(n){return Math.max(0,Math.min(e,n))}}function Mg(e,n){for(var o=0;o<n;o++)typeof e[o]!="number"&&(e[o]=0);return e}function Tp(e,n){for(var o=["webgl2","experimental-webgl2","webgl","experimental-webgl"],c=void 0,v=0;v<o.length;v++)try{if(c=e.getContext(o[v],{stencil:!0,alpha:!0,premultipliedAlpha:!1,antialias:n.antialias||!0,preserveDrawingBuffer:n.preserveDrawingBuffer||!1}))break}catch{}return c}function rs(){this.needsSwap=this.enabled=!0,this.renderToScreen=this.clear=!1}var YC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof H1<"u"?H1:typeof self<"u"?self:{},Vn=M(function(e){e=e.exports=typeof window<"u"&&Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")(),typeof __g=="number"&&(__g=e)}),Oi=M(function(e){e=e.exports={version:"2.6.5"},typeof __e=="number"&&(__e=e)}),Qh=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e},Ia=function(e,n,o){if(Qh(e),n===void 0)return e;switch(o){case 1:return function(c){return e.call(n,c)};case 2:return function(c,v){return e.call(n,c,v)};case 3:return function(c,v,g){return e.call(n,c,v,g)}}return function(){return e.apply(n,arguments)}},bo=function(e){return typeof e=="object"?e!==null:typeof e=="function"},Ra=function(e){if(!bo(e))throw TypeError(e+" is not an object!");return e},Vc=function(e){try{return!!e()}catch{return!0}},ns=!Vc(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),vl=Vn.document,$h=bo(vl)&&bo(vl.createElement),Zx=!ns&&!Vc(function(){return Object.defineProperty($h?vl.createElement("div"):{},"a",{get:function(){return 7}}).a!=7}),Ep=function(e,n){if(!bo(e))return e;var o,c;if(typeof(o=e.toString)=="function"&&!bo(c=o.call(e))||typeof(o=e.valueOf)=="function"&&!bo(c=o.call(e))||!n)return c;throw TypeError("Can't convert object to primitive value")},V3=Object.defineProperty,yl={f:ns?Object.defineProperty:function(e,n,o){if(Ra(e),n=Ep(n,!0),Ra(o),Zx)try{return V3(e,n,o)}catch{}if("get"in o||"set"in o)throw TypeError("Accessors not supported!");return"value"in o&&(e[n]=o.value),e}},ef=function(e,n){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:n}},Ku=ns?function(e,n,o){return yl.f(e,n,ef(1,o))}:function(e,n,o){return e[n]=o,e},L0={}.hasOwnProperty,ao=function(e,n){return L0.call(e,n)},gs=function(e,n,o){var c=e&gs.F,v=e&gs.G,g=e&gs.S,A=e&gs.P,y=e&gs.B,T=e&gs.W,D=v?Oi:Oi[n]||(Oi[n]={}),X=D.prototype;g=v?Vn:g?Vn[n]:(Vn[n]||{}).prototype;var I;v&&(o=n);for(I in o)if(n=!c&&g&&g[I]!==void 0,!n||!ao(D,I)){var b=n?g[I]:o[I];D[I]=v&&typeof g[I]!="function"?o[I]:y&&n?Ia(b,Vn):T&&g[I]==b?function(N){var k=function(G,re,se){if(this instanceof N){switch(arguments.length){case 0:return new N;case 1:return new N(G);case 2:return new N(G,re)}return new N(G,re,se)}return N.apply(this,arguments)};return k.prototype=N.prototype,k}(b):A&&typeof b=="function"?Ia(Function.call,b):b,A&&((D.virtual||(D.virtual={}))[I]=b,e&gs.R&&X&&!X[I]&&Ku(X,I,b))}};gs.F=1,gs.G=2,gs.S=4,gs.P=8,gs.B=16,gs.W=32,gs.U=64,gs.R=128;var kr=gs,W3={}.toString,rd=function(e){return W3.call(e).slice(8,-1)},qx=Object("z").propertyIsEnumerable(0)?Object:function(e){return rd(e)=="String"?e.split(""):Object(e)},tf=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e},Ju=function(e){return qx(tf(e))},Sg=Math.ceil,ZC=Math.floor,Kx=function(e){return isNaN(e=+e)?0:(0<e?ZC:Sg)(e)},P0=Math.min,Qu=function(e){return 0<e?P0(Kx(e),9007199254740991):0},X3=Math.max,Y3=Math.min,vs=M(function(e){var n=Vn["__core-js_shared__"]||(Vn["__core-js_shared__"]={});(e.exports=function(o,c){return n[o]||(n[o]=c!==void 0?c:{})})("versions",[]).push({version:Oi.version,mode:"pure",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),qC=0,Z3=Math.random(),O0=function(e){return"Symbol(".concat(e===void 0?"":e,")_",(++qC+Z3).toString(36))},Jx=vs("keys"),D0=function(e){return Jx[e]||(Jx[e]=O0(e))},KC=function(e){return function(n,o,c){n=Ju(n);var v=Qu(n.length);for(c=Kx(c),c=0>c?X3(c+v,0):Y3(c,v);v>c;c++)if(c in n&&n[c]===o)return c||0;return-1}}(),JC=D0("IE_PROTO"),Qx=function(e,n){e=Ju(e);var o=0,c=[],v;for(v in e)v!=JC&&ao(e,v)&&c.push(v);for(;n.length>o;)ao(e,v=n[o++])&&(~KC(c,v)||c.push(v));return c},Tg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),nd=Object.keys||function(e){return Qx(e,Tg)},b0=ns?Object.defineProperties:function(e,n){Ra(e);for(var o=nd(n),c=o.length,v=0,g;c>v;)yl.f(e,g=o[v++],n[g]);return e},F0=Vn.document,N0=F0&&F0.documentElement,Wc=D0("IE_PROTO"),$x=function(){},Eg=function(){var e=$h?vl.createElement("iframe"):{},n=Tg.length;for(e.style.display="none",N0.appendChild(e),e.src="javascript:",e=e.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),Eg=e.F;n--;)delete Eg.prototype[Tg[n]];return Eg()},rf=Object.create||function(e,n){if(e!==null){$x.prototype=Ra(e);var o=new $x;$x.prototype=null,o[Wc]=e}else o=Eg();return n===void 0?o:b0(o,n)};kr(kr.S,"Object",{create:rf});var q3=Oi.Object,Ig=function(e,n){return q3.create(e,n)},B0=M(function(e){e.exports={default:Ig,__esModule:!0}}),Le=m(B0),e2=Object.getOwnPropertySymbols,Rg={}.propertyIsEnumerable,z0=Object.assign,t2=!z0||Vc(function(){var e={},n={},o=Symbol();return e[o]=7,"abcdefghijklmnopqrst".split("").forEach(function(c){n[c]=c}),z0({},e)[o]!=7||Object.keys(z0({},n)).join("")!="abcdefghijklmnopqrst"})?function(e,n){for(var o=Object(tf(e)),c=arguments.length,v=1,g=e2,A=Rg;c>v;)for(var y=qx(arguments[v++]),T=g?nd(y).concat(g(y)):nd(y),D=T.length,X=0,I;D>X;)A.call(y,I=T[X++])&&(o[I]=y[I]);return o}:z0;kr(kr.S+kr.F,"Object",{assign:t2});var pu=Oi.Object.assign,QC=M(function(e){e.exports={default:pu,__esModule:!0}}),Pe=m(QC);kr(kr.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}});var r2=Oi.Math.log2,n2=M(function(e){e.exports={default:r2,__esModule:!0}}),i2=m(n2),Xl={},aa=M(function(e){var n=vs("wks"),o=Vn.Symbol,c=typeof o=="function";(e.exports=function(v){return n[v]||(n[v]=c&&o[v]||(c?o:O0)("Symbol."+v))}).store=n}),$C=yl.f,o2=aa("toStringTag"),Ha=function(e,n,o){e&&!ao(e=o?e:e.prototype,o2)&&$C(e,o2,{configurable:!0,value:n})},Fo={};Ku(Fo,aa("iterator"),function(){return this});var dn=function(e,n,o){e.prototype=rf(Fo,{next:ef(1,o)}),Ha(e,n+" Iterator")},Qn=D0("IE_PROTO"),K3=Object.prototype,Lg=Object.getPrototypeOf||function(e){return e=Object(tf(e)),ao(e,Qn)?e[Qn]:typeof e.constructor=="function"&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?K3:null},Er=aa("iterator"),a2=!([].keys&&"next"in[].keys()),J3=function(){return this},s2=function(e,n,o,c,v,g,A){dn(o,n,c),c=function(se){return!a2&&se in X?X[se]:function(){return new o(this,se)}};var y=n+" Iterator",T=v=="values",D=!1,X=e.prototype,I=X[Er]||X["@@iterator"]||v&&X[v],b=I||c(v),N=v?T?c("entries"):b:void 0,k=n=="Array"&&X.entries||I,G;if(k&&(e=Lg(k.call(new e)),e!==Object.prototype&&e.next&&Ha(e,y,!0)),T&&I&&I.name!=="values"&&(D=!0,b=function(){return I.call(this)}),A&&(a2||D||!X[Er])&&Ku(X,Er,b),Xl[n]=b,Xl[y]=J3,v){var re={values:T?b:c("values"),keys:g?b:c("keys"),entries:N};if(A)for(G in re)G in X||Ku(X,G,re[G]);else kr(kr.P+kr.F*(a2||D),n,re)}return re},Q3=function(e){return function(n,o){n=String(tf(n)),o=Kx(o);var c=n.length,v;if(0>o||o>=c)return"";var g=n.charCodeAt(o);return 55296>g||56319<g||o+1===c||56320>(v=n.charCodeAt(o+1))||57343<v?n.charAt(o):n.slice(o,o+2)}}();s2(String,"String",function(e){this._t=String(e),this._i=0},function(){var e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(e=Q3(e,n),this._i+=e.length,{value:e,done:!1})});var Jn=function(e,n,o,c){try{return c?n(Ra(o)[0],o[1]):n(o)}catch(v){throw n=e.return,n!==void 0&&Ra(n.call(e)),v}},$u=aa("iterator"),l2=Array.prototype,Br=aa("toStringTag"),$3=rd(function(){return arguments}())=="Arguments",Yi=function(e){var n;if(e===void 0)var o="Undefined";else{if(e===null)var c="Null";else{e:{var v=e=Object(e);try{c=v[Br];break e}catch{}c=void 0}c=typeof(o=c)=="string"?o:$3?rd(e):(n=rd(e))=="Object"&&typeof e.callee=="function"?"Arguments":n}o=c}return o},La=aa("iterator"),nf=Oi.getIteratorMethod=function(e){if(e!=null)return e[La]||e["@@iterator"]||Xl[Yi(e)]},u2=aa("iterator"),e_=!1;try{[7][u2]().return=function(){e_=!0}}catch{}var t_=function(e,n){if(!n&&!e_)return!1;var o=!1;try{n=[7];var c=n[u2]();c.next=function(){return{done:o=!0}},n[u2]=function(){return c},e(n)}catch{}return o};kr(kr.S+kr.F*!t_(function(e){}),"Array",{from:function(e){var n=Object(tf(e)),o=typeof this=="function"?this:Array,c=arguments.length,v=1<c?arguments[1]:void 0,g=v!==void 0,A=0,y=nf(n),T;if(g&&(v=Ia(v,2<c?arguments[2]:void 0,2)),y!=null&&(o!=Array||y===void 0||Xl.Array!==y&&l2[$u]!==y))for(n=y.call(n),o=new o;!(T=n.next()).done;A++)c=o,y=A,T=g?Jn(n,v,[T.value,A],!0):T.value,y in c?yl.f(c,y,ef(0,T)):c[y]=T;else for(c=Qu(n.length),o=new o(c);c>A;A++){y=o,T=A;var D=g?v(n[A],A):n[A];T in y?yl.f(y,T,ef(0,D)):y[T]=D}return o.length=A,o}});var eI=Oi.Array.from,Pg=M(function(e){e.exports={default:eI,__esModule:!0}}),U0=m(Pg),Xc=function(e,n){return{value:n,done:!!e}};s2(Array,"Array",function(e,n){this._t=Ju(e),this._i=0,this._k=n},function(){var e=this._t,n=this._k,o=this._i++;return!e||o>=e.length?(this._t=void 0,Xc(1)):n=="keys"?Xc(0,o):n=="values"?Xc(0,e[o]):Xc(0,[o,e[o]])},"values"),Xl.Arguments=Xl.Array;for(var Ip=aa("toStringTag"),r_="CSSRuleList CSSStyleDeclaration CSSValueList ClientRectList DOMRectList DOMStringList DOMTokenList DataTransferItemList FileList HTMLAllCollection HTMLCollection HTMLFormElement HTMLSelectElement MediaList MimeTypeArray NamedNodeMap NodeList PaintRequestList Plugin PluginArray SVGLengthList SVGNumberList SVGPathSegList SVGPointList SVGStringList SVGTransformList SourceBufferList StyleSheetList TextTrackCueList TextTrackList TouchList".split(" "),c2=0;c2<r_.length;c2++){var h2=r_[c2],n_=Vn[h2],f2=n_&&n_.prototype;f2&&!f2[Ip]&&Ku(f2,Ip,h2),Xl[h2]=Xl.Array}var Rp=function(e,n,o,c){if(!(e instanceof n)||c!==void 0&&c in e)throw TypeError(o+": incorrect invocation!");return e},of=M(function(e){var n={},o={};e=e.exports=function(c,v,g,A,y){y=y?function(){return c}:nf(c),g=Ia(g,A,v?2:1),A=0;var T,D;if(typeof y!="function")throw TypeError(c+" is not iterable!");if(y===void 0||Xl.Array!==y&&l2[$u]!==y){for(A=y.call(c);!(D=A.next()).done;)if(y=Jn(A,g,D.value,v),y===n||y===o)return y}else for(T=Qu(c.length);T>A;A++)if(y=v?g(Ra(D=c[A])[0],D[1]):g(c[A]),y===n||y===o)return y},e.BREAK=n,e.RETURN=o}),d2=aa("species"),k0=function(e,n){e=Ra(e).constructor;var o;return e===void 0||(o=Ra(e)[d2])==null?n:Qh(o)},ki=function(e,n,o){switch(n.length){case 0:return e();case 1:return e(n[0]);case 2:return e(n[0],n[1]);case 3:return e(n[0],n[1],n[2]);case 4:return e(n[0],n[1],n[2],n[3])}return e.apply(o,n)},i_=Vn.process,H0=Vn.setImmediate,o_=Vn.clearImmediate,a_=Vn.MessageChannel,p2=Vn.Dispatch,Yl=0,Lp={},Og=function(){var e=+this;if(Lp.hasOwnProperty(e)){var n=Lp[e];delete Lp[e],n()}},Dg=function(e){Og.call(e.data)};if(!H0||!o_)if(H0=function(e){for(var n=[],o=1;arguments.length>o;)n.push(arguments[o++]);return Lp[++Yl]=function(){ki(typeof e=="function"?e:Function(e),n)},ec(Yl),Yl},o_=function(e){delete Lp[e]},rd(i_)=="process")var ec=function(e){i_.nextTick(Ia(Og,e,1))};else if(p2&&p2.now)ec=function(e){p2.now(Ia(Og,e,1))};else if(a_){var m2=new a_,g2=m2.port2;m2.port1.onmessage=Dg,ec=Ia(g2.postMessage,g2,1)}else Vn.addEventListener&&typeof postMessage=="function"&&!Vn.importScripts?(ec=function(e){Vn.postMessage(e+"","*")},Vn.addEventListener("message",Dg,!1)):ec="onreadystatechange"in($h?vl.createElement("script"):{})?function(e){N0.appendChild($h?vl.createElement("script"):{}).onreadystatechange=function(){N0.removeChild(this),Og.call(e)}}:function(e){setTimeout(Ia(Og,e,1),0)};var bg=H0,s_=Vn.MutationObserver||Vn.WebKitMutationObserver,j0=Vn.process,Pp=Vn.Promise,id=rd(j0)=="process",Yc={f:function(e){return new L(e)}},xl=function(e){try{return{e:!1,v:e()}}catch(n){return{e:!0,v:n}}},l_=Vn.navigator,u_=l_&&l_.userAgent||"",v2=function(e,n){if(Ra(e),bo(n)&&n.constructor===e)return n;e=Yc.f(e);var o=e.resolve;return o(n),e.promise},Fg=function(e,n,o){for(var c in n)Ku(e,c,n[c]);return e},c_=aa("species"),h_=function(e){e=typeof Oi[e]=="function"?Oi[e]:Vn[e],ns&&e&&!e[c_]&&yl.f(e,c_,{configurable:!0,get:function(){return this}})},G0=function(){var e,n,o=function(){var y;for(id&&(y=j0.domain)&&y.exit();e;){var T=e.fn;e=e.next;try{T()}catch(D){throw e?c():n=void 0,D}}n=void 0,y&&y.enter()};if(id)var c=function(){j0.nextTick(o)};else if(!s_||Vn.navigator&&Vn.navigator.standalone)if(Pp&&Pp.resolve){var v=Pp.resolve(void 0);c=function(){v.then(o)}}else c=function(){bg.call(Vn,o)};else{var g=!0,A=document.createTextNode("");new s_(o).observe(A,{characterData:!0}),c=function(){A.data=g=!g}}return function(y){y={fn:y,next:void 0},n&&(n.next=y),e||(e=y,c()),n=y}}(),f_=Vn.TypeError,Op=Vn.process,V0=Op&&Op.versions,y2=V0&&V0.v8||"",tc=Vn.Promise,Ng=Yi(Op)=="process",W0=function(){},Bg,mu=Bg=Yc.f,X0=!!function(){try{var e=tc.resolve(1),n=(e.constructor={})[aa("species")]=function(o){o(W0,W0)};return(Ng||typeof PromiseRejectionEvent=="function")&&e.then(W0)instanceof n&&y2.indexOf("6.6")!==0&&u_.indexOf("Chrome/66")===-1}catch{}}(),x2=function(e){var n;return bo(e)&&typeof(n=e.then)=="function"?n:!1},A2=function(e,n){if(!e._n){e._n=!0;var o=e._c;G0(function(){for(var c=e._v,v=e._s==1,g=0;o.length>g;){var A=void 0,y=void 0,T=void 0,D=o[g++],X=v?D.ok:D.fail,I=D.resolve,b=D.reject,N=D.domain;try{X?(v||(e._h==2&&w2(e),e._h=1),X===!0?T=c:(N&&N.enter(),T=X(c),N&&(N.exit(),A=!0)),T===D.promise?b(f_("Promise-chain cycle")):(y=x2(T))?y.call(T,I,b):I(T)):b(c)}catch(k){N&&!A&&N.exit(),b(k)}}e._c=[],e._n=!1,n&&!e._h&&d_(e)})}},d_=function(e){bg.call(Vn,function(){var n=e._v,o=e._h!==1&&(e._a||e._c).length===0,c,v;if(o){var g=xl(function(){Ng?Op.emit("unhandledRejection",n,e):(c=Vn.onunhandledrejection)?c({promise:e,reason:n}):(v=Vn.console)&&v.error&&v.error("Unhandled promise rejection",n)});e._h=Ng||e._h!==1&&(e._a||e._c).length===0?2:1}if(e._a=void 0,o&&g.e)throw g.v})},w2=function(e){bg.call(Vn,function(){var n;Ng?Op.emit("rejectionHandled",e):(n=Vn.onrejectionhandled)&&n({promise:e,reason:e._v})})},od=function(e){var n=this;n._d||(n._d=!0,n=n._w||n,n._v=e,n._s=2,n._a||(n._a=n._c.slice()),A2(n,!0))},Y0=function(e){var n=this,o;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw f_("Promise can't be resolved itself");(o=x2(e))?G0(function(){var c={_w:n,_d:!1};try{o.call(e,Ia(Y0,c,1),Ia(od,c,1))}catch(v){od.call(c,v)}}):(n._v=e,n._s=1,A2(n,!1))}catch(c){od.call({_w:n,_d:!1},c)}}};if(!X0){tc=function(e){Rp(this,tc,"Promise","_h"),Qh(e),zg.call(this);try{e(Ia(Y0,this,1),Ia(od,this,1))}catch(n){od.call(this,n)}};var zg=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1};zg.prototype=Fg(tc.prototype,{then:function(e,n){var o=mu(k0(this,tc));return o.ok=typeof e=="function"?e:!0,o.fail=typeof n=="function"&&n,o.domain=Ng?Op.domain:void 0,this._c.push(o),this._a&&this._a.push(o),this._s&&A2(this,!1),o.promise},catch:function(e){return this.then(void 0,e)}});var C2=function(){var e=new zg;this.promise=e,this.resolve=Ia(Y0,e,1),this.reject=Ia(od,e,1)};Yc.f=mu=function(e){return e===tc||e===Dp?new C2(e):Bg(e)}}kr(kr.G+kr.W+kr.F*!X0,{Promise:tc}),Ha(tc,"Promise"),h_("Promise");var Dp=Oi.Promise;kr(kr.S+kr.F*!X0,"Promise",{reject:function(e){var n=mu(this),o=n.reject;return o(e),n.promise}}),kr(kr.S+1*kr.F,"Promise",{resolve:function(e){return v2(this===Dp?tc:this,e)}}),kr(kr.S+kr.F*!(X0&&t_(function(e){tc.all(e).catch(W0)})),"Promise",{all:function(e){var n=this,o=mu(n),c=o.resolve,v=o.reject,g=xl(function(){var A=[],y=0,T=1;of(e,!1,function(D){var X=y++,I=!1;A.push(void 0),T++,n.resolve(D).then(function(b){I||(I=!0,A[X]=b,--T||c(A))},v)}),--T||c(A)});return g.e&&v(g.v),o.promise},race:function(e){var n=this,o=mu(n),c=o.reject,v=xl(function(){of(e,!1,function(g){n.resolve(g).then(o.resolve,c)})});return v.e&&c(v.v),o.promise}}),kr(kr.P+kr.R,"Promise",{finally:function(e){var n=k0(this,Oi.Promise||Vn.Promise),o=typeof e=="function";return this.then(o?function(c){return v2(n,e()).then(function(){return c})}:e,o?function(c){return v2(n,e()).then(function(){throw c})}:e)}}),kr(kr.S,"Promise",{try:function(e){var n=Yc.f(this);return e=xl(e),(e.e?n.reject:n.resolve)(e.v),n.promise}});var Ug=Oi.Promise,p_=M(function(e){e.exports={default:Ug,__esModule:!0}}),vi=m(p_),af=M(function(e){var n=O0("meta"),o=yl.f,c=0,v=Object.isExtensible||function(){return!0},g=!Vc(function(){return v(Object.preventExtensions({}))}),A=function(T){o(T,n,{value:{i:"O"+ ++c,w:{}}})},y=e.exports={KEY:n,NEED:!1,fastKey:function(T,D){if(!bo(T))return typeof T=="symbol"?T:(typeof T=="string"?"S":"P")+T;if(!ao(T,n)){if(!v(T))return"F";if(!D)return"E";A(T)}return T[n].i},getWeak:function(T,D){if(!ao(T,n)){if(!v(T))return!0;if(!D)return!1;A(T)}return T[n].w},onFreeze:function(T){return g&&y.NEED&&v(T)&&!ao(T,n)&&A(T),T}}}),kg=function(e,n){var o=(Oi.Object||{})[e]||Object[e],c={};c[e]=n(o),kr(kr.S+kr.F*Vc(function(){o(1)}),"Object",c)},_2=af.onFreeze;kg("freeze",function(e){return function(n){return e&&bo(n)?e(_2(n)):n}});var m_=Oi.Object.freeze,M2=M(function(e){e.exports={default:m_,__esModule:!0}}),rc=m(M2),Z0={f:aa},q0=Z0.f("iterator"),sf=M(function(e){e.exports={default:q0,__esModule:!0}});m(sf);var g_=yl.f,S2=function(e){var n=Oi.Symbol||(Oi.Symbol={});e.charAt(0)=="_"||e in n||g_(n,e,{value:Z0.f(e)})},Hg=Array.isArray||function(e){return rd(e)=="Array"},T2=Tg.concat("length","prototype"),E2=Object.getOwnPropertyNames||function(e){return Qx(e,T2)},I2=E2,v_={}.toString,R2=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ad=function(e){if(R2&&v_.call(e)=="[object Window]")try{var n=I2(e)}catch{n=R2.slice()}else n=I2(Ju(e));return n},L2=Object.getOwnPropertyDescriptor,K0={f:ns?L2:function(e,n){if(e=Ju(e),n=Ep(n,!0),Zx)try{return L2(e,n)}catch{}if(ao(e,n))return ef(!Rg.call(e,n),e[n])}},nc=af.KEY,bp=K0.f,ic=yl.f,P2=ad,ja=Vn.Symbol,sd=Vn.JSON,jg=sd&&sd.stringify,ys=aa("_hidden"),y_=aa("toPrimitive"),tI={}.propertyIsEnumerable,oc=vs("symbol-registry"),gu=vs("symbols"),ld=vs("op-symbols"),vu=Object.prototype,ud=typeof ja=="function",O2=Vn.QObject,D2=!O2||!O2.prototype||!O2.prototype.findChild,ac=ns&&Vc(function(){return rf(ic({},"a",{get:function(){return ic(this,"a",{value:7}).a}})).a!=7})?function(e,n,o){var c=bp(vu,n);c&&delete vu[n],ic(e,n,o),c&&e!==vu&&ic(vu,n,c)}:ic,Zc=function(e){var n=gu[e]=rf(ja.prototype);return n._k=e,n},b2=ud&&typeof ja.iterator=="symbol"?function(e){return typeof e=="symbol"}:function(e){return e instanceof ja},Gg=function(e,n,o){return e===vu&&Gg(ld,n,o),Ra(e),n=Ep(n,!0),Ra(o),ao(gu,n)?(o.enumerable?(ao(e,ys)&&e[ys][n]&&(e[ys][n]=!1),o=rf(o,{enumerable:ef(0,!1)})):(ao(e,ys)||ic(e,ys,ef(1,{})),e[ys][n]=!0),ac(e,n,o)):ic(e,n,o)},Fp=function(e,n){Ra(e);var o=n=Ju(n),c=nd(o),v=e2;if(v){v=v(o);for(var g=Rg,A=0,y;v.length>A;)g.call(o,y=v[A++])&&c.push(y)}o=0,y=c.length;for(var T;y>o;)Gg(e,T=c[o++],n[T]);return e},J0=function(e){var n=tI.call(this,e=Ep(e,!0));return this===vu&&ao(gu,e)&&!ao(ld,e)?!1:n||!ao(this,e)||!ao(gu,e)||ao(this,ys)&&this[ys][e]?n:!0},Q0=function(e,n){if(e=Ju(e),n=Ep(n,!0),e!==vu||!ao(gu,n)||ao(ld,n)){var o=bp(e,n);return!o||!ao(gu,n)||ao(e,ys)&&e[ys][n]||(o.enumerable=!0),o}},x_=function(e){e=P2(Ju(e));for(var n=[],o=0,c;e.length>o;)ao(gu,c=e[o++])||c==ys||c==nc||n.push(c);return n},A_=function(e){var n=e===vu;e=P2(n?ld:Ju(e));for(var o=[],c=0,v;e.length>c;)ao(gu,v=e[c++])&&(!n||ao(vu,v))&&o.push(gu[v]);return o};ud||(ja=function(){if(this instanceof ja)throw TypeError("Symbol is not a constructor!");var e=O0(0<arguments.length?arguments[0]:void 0),n=function(o){this===vu&&n.call(ld,o),ao(this,ys)&&ao(this[ys],e)&&(this[ys][e]=!1),ac(this,e,ef(1,o))};return ns&&D2&&ac(vu,e,{configurable:!0,set:n}),Zc(e)},Ku(ja.prototype,"toString",function(){return this._k}),K0.f=Q0,yl.f=Gg,E2=ad=x_,Rg=J0,e2=A_,Z0.f=function(e){return Zc(aa(e))}),kr(kr.G+kr.W+kr.F*!ud,{Symbol:ja});for(var w_="hasInstance isConcatSpreadable iterator match replace search species split toPrimitive toStringTag unscopables".split(" "),C_=0;w_.length>C_;)aa(w_[C_++]);for(var qc=nd(aa.store),__=0;qc.length>__;)S2(qc[__++]);kr(kr.S+kr.F*!ud,"Symbol",{for:function(e){return ao(oc,e+="")?oc[e]:oc[e]=ja(e)},keyFor:function(e){if(!b2(e))throw TypeError(e+" is not a symbol!");for(var n in oc)if(oc[n]===e)return n},useSetter:function(){D2=!0},useSimple:function(){D2=!1}}),kr(kr.S+kr.F*!ud,"Object",{create:function(e,n){return n===void 0?rf(e):Fp(rf(e),n)},defineProperty:Gg,defineProperties:Fp,getOwnPropertyDescriptor:Q0,getOwnPropertyNames:x_,getOwnPropertySymbols:A_}),sd&&kr(kr.S+kr.F*(!ud||Vc(function(){var e=ja();return jg([e])!="[null]"||jg({a:e})!="{}"||jg(Object(e))!="{}"})),"JSON",{stringify:function(e){for(var n=[e],o=1,c;arguments.length>o;)n.push(arguments[o++]);if(c=o=n[1],(bo(o)||e!==void 0)&&!b2(e))return Hg(o)||(o=function(v,g){if(typeof c=="function"&&(g=c.call(this,v,g)),!b2(g))return g}),n[1]=o,jg.apply(sd,n)}}),ja.prototype[y_]||Ku(ja.prototype,y_,ja.prototype.valueOf),Ha(ja,"Symbol"),Ha(Math,"Math",!0),Ha(Vn.JSON,"JSON",!0),S2("asyncIterator"),S2("observable");var Np=Oi.Symbol,Kc=M(function(e){e.exports={default:Np,__esModule:!0}});m(Kc);var sc=M(function(e,n){n.__esModule=!0,e=sf&&sf.__esModule?sf:{default:sf};var o=Kc&&Kc.__esModule?Kc:{default:Kc},c=typeof o.default=="function"&&typeof e.default=="symbol"?function(v){return typeof v}:function(v){return v&&typeof o.default=="function"&&v.constructor===o.default&&v!==o.default.prototype?"symbol":typeof v};n.default=typeof o.default=="function"&&c(e.default)==="symbol"?function(v){return typeof v>"u"?"undefined":c(v)}:function(v){return v&&typeof o.default=="function"&&v.constructor===o.default&&v!==o.default.prototype?"symbol":typeof v>"u"?"undefined":c(v)}}),Jc=m(sc),Al=function(e,n){if(!bo(e)||e._t!==n)throw TypeError("Incompatible receiver, "+n+" required!");return e},cd=yl.f,M_=af.fastKey,Vg=ns?"_s":"size",$0=function(e,n){var o=M_(n);if(o!=="F")return e._i[o];for(e=e._f;e;e=e.n)if(e.k==n)return e},F2={getConstructor:function(e,n,o,c){var v=e(function(g,A){Rp(g,v,n,"_i"),g._t=n,g._i=rf(null),g._f=void 0,g._l=void 0,g[Vg]=0,A!=null&&of(A,o,g[c],g)});return Fg(v.prototype,{clear:function(){for(var g=Al(this,n),A=g._i,y=g._f;y;y=y.n)y.r=!0,y.p&&(y.p=y.p.n=void 0),delete A[y.i];g._f=g._l=void 0,g[Vg]=0},delete:function(g){var A=Al(this,n);if(g=$0(A,g)){var y=g.n,T=g.p;delete A._i[g.i],g.r=!0,T&&(T.n=y),y&&(y.p=T),A._f==g&&(A._f=y),A._l==g&&(A._l=T),A[Vg]--}return!!g},forEach:function(g){Al(this,n);for(var A=Ia(g,1<arguments.length?arguments[1]:void 0,3),y;y=y?y.n:this._f;)for(A(y.v,y.k,this);y&&y.r;)y=y.p},has:function(g){return!!$0(Al(this,n),g)}}),ns&&cd(v.prototype,"size",{get:function(){return Al(this,n)[Vg]}}),v},def:function(e,n,o){var c=$0(e,n),v;return c?c.v=o:(e._l=c={i:v=M_(n,!0),k:n,v:o,p:n=e._l,n:void 0,r:!1},e._f||(e._f=c),n&&(n.n=c),e[Vg]++,v!=="F"&&(e._i[v]=c)),e},getEntry:$0,setStrong:function(e,n,o){s2(e,n,function(c,v){this._t=Al(c,n),this._k=v,this._l=void 0},function(){for(var c=this._k,v=this._l;v&&v.r;)v=v.p;return this._t&&(this._l=v=v?v.n:this._t._f)?c=="keys"?Xc(0,v.k):c=="values"?Xc(0,v.v):Xc(0,[v.k,v.v]):(this._t=void 0,Xc(1))},o?"entries":"values",!o,!0),h_(n)}},rI=aa("species"),N2=function(e,n){if(Hg(e)){var o=e.constructor;typeof o!="function"||o!==Array&&!Hg(o.prototype)||(o=void 0),bo(o)&&(o=o[rI],o===null&&(o=void 0))}return new(o===void 0?Array:o)(n)},ey=function(e,n){var o=e==1,c=e==2,v=e==3,g=e==4,A=e==6,y=e==5||A,T=N2;return function(D,X,I){var b=Object(tf(D)),N=qx(b);X=Ia(X,I,3),I=Qu(N.length);var k=0;D=o?T(D,I):c?T(D,0):void 0;for(var G,re;I>k;k++)if((y||k in N)&&(G=N[k],re=X(G,k,b),e)){if(o)D[k]=re;else if(re)switch(e){case 3:return!0;case 5:return G;case 6:return k;case 2:D.push(G)}else if(g)return!1}return A?-1:v||g?g:D}},Wg=yl.f,nI=ey(0),S_=function(e,n,o,c,v,g){var A=Vn[e],y=A,T="set",D=y&&y.prototype,X={};return ns&&typeof y=="function"&&(g||D.forEach&&!Vc(function(){new y().entries().next()}))?(y=n(function(I,b){Rp(I,y,e,"_c"),I._c=new A,b!=null&&of(b,v,I[T],I)}),nI("add clear delete forEach get has set keys values entries toJSON".split(" "),function(I){var b=I=="add"||I=="set";I in D&&(!g||I!="clear")&&Ku(y.prototype,I,function(N,k){return Rp(this,y,I),!b&&g&&!bo(N)?I=="get"?void 0:!1:(N=this._c[I](N===0?0:N,k),b?this:N)})}),g||Wg(y.prototype,"size",{get:function(){return this._c.size}})):(y=c.getConstructor(n,e,v,T),Fg(y.prototype,o),af.NEED=!0),Ha(y,e),X[e]=y,kr(kr.G+kr.W+kr.F,X),g||c.setStrong(y,e,v),y};S_("Map",function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{get:function(e){return(e=F2.getEntry(Al(this,"Map"),e))&&e.v},set:function(e,n){return F2.def(Al(this,"Map"),e===0?0:e,n)}},F2,!0),kr(kr.P+kr.R,"Map",{toJSON:function(e){return function(){if(Yi(this)!=e)throw TypeError(e+"#toJSON isn't generic");var n=[];return of(this,!1,n.push,n,void 0),n}}("Map")});var T_=function(e){kr(kr.S,e,{of:function(){for(var n=arguments.length,o=Array(n);n--;)o[n]=arguments[n];return new this(o)}})};T_("Map");var ty=function(e){kr(kr.S,e,{from:function(n,o,c){var v;if(Qh(this),(v=o!==void 0)&&Qh(o),n==null)return new this;var g=[];if(v){var A=0,y=Ia(o,c,2);of(n,!1,function(T){g.push(y(T,A++))})}else of(n,!1,g.push,g);return new this(g)}})};ty("Map");var iI=Oi.Map,oI=M(function(e){e.exports={default:iI,__esModule:!0}}),B2=m(oI);kr(kr.S+kr.F*!ns,"Object",{defineProperty:yl.f});var aI=Oi.Object,E_=function(e,n,o){return aI.defineProperty(e,n,o)},Qc=M(function(e){e.exports={default:E_,__esModule:!0}}),va=m(Qc),sI=M(function(e,n){n.__esModule=!0;var o=Qc&&Qc.__esModule?Qc:{default:Qc};n.default=function(c,v,g){return v in c?(0,o.default)(c,v,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[v]=g,c}}),Zi=m(sI),z2=af.getWeak,lI=ey(5),uI=ey(6),No=0,Xg=function(e){return e._l||(e._l=new Zl)},Zl=function(){this.a=[]},U2=function(e,n){return lI(e.a,function(o){return o[0]===n})};Zl.prototype={get:function(e){if(e=U2(this,e))return e[1]},has:function(e){return!!U2(this,e)},set:function(e,n){var o=U2(this,e);o?o[1]=n:this.a.push([e,n])},delete:function(e){var n=uI(this.a,function(o){return o[0]===e});return~n&&this.a.splice(n,1),!!~n}};var ql={getConstructor:function(e,n,o,c){var v=e(function(g,A){Rp(g,v,n,"_i"),g._t=n,g._i=No++,g._l=void 0,A!=null&&of(A,o,g[c],g)});return Fg(v.prototype,{delete:function(g){if(!bo(g))return!1;var A=z2(g);return A===!0?Xg(Al(this,n)).delete(g):A&&ao(A,this._i)&&delete A[this._i]},has:function(g){if(!bo(g))return!1;var A=z2(g);return A===!0?Xg(Al(this,n)).has(g):A&&ao(A,this._i)}}),v},def:function(e,n,o){var c=z2(Ra(n),!0);return c===!0?Xg(e).set(n,o):c[e._i]=o,e},ufstore:Xg};M(function(e){var n=ey(0),o=!Vn.ActiveXObject&&"ActiveXObject"in Vn,c=af.getWeak,v=Object.isExtensible,g=ql.ufstore,A=function(X){return function(){return X(this,0<arguments.length?arguments[0]:void 0)}},y={get:function(X){if(bo(X)){var I=c(X);return I===!0?g(Al(this,"WeakMap")).get(X):I?I[this._i]:void 0}},set:function(X,I){return ql.def(Al(this,"WeakMap"),X,I)}},T=e.exports=S_("WeakMap",A,y,ql,!0,!0);if(Al&&o){var D=ql.getConstructor(A,"WeakMap");t2(D.prototype,y),af.NEED=!0,n(["delete","has","get","set"],function(X){var I=T.prototype,b=I[X];Ku(I,X,function(N,k){return bo(N)&&!v(N)?(this._f||(this._f=new D),N=this._f[X](N,k),X=="set"?this:N):b.call(this,N,k)})})}}),T_("WeakMap"),ty("WeakMap");var I_=Oi.WeakMap,k2=M(function(e){e.exports={default:I_,__esModule:!0}}),co=m(k2);kg("getPrototypeOf",function(){return function(e){return Lg(Object(tf(e)))}});var Bp=Oi.Object.getPrototypeOf,R_=M(function(e){e.exports={default:Bp,__esModule:!0}}),Pa=m(R_),cI=M(function(e,n){n.__esModule=!0,n.default=function(o,c){if(!(o instanceof c))throw new TypeError("Cannot call a class as a function")}}),Fi=m(cI),L_=M(function(e,n){n.__esModule=!0;var o=sc&&sc.__esModule?sc:{default:sc};n.default=function(c,v){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!v||(typeof v>"u"?"undefined":(0,o.default)(v))!=="object"&&typeof v!="function"?c:v}}),sa=m(L_),P_=Object.setPrototypeOf||("__proto__"in{}?function(e,n,o){try{o=Ia(Function.call,K0.f(Object.prototype,"__proto__").set,2),o(e,[]),n=!(e instanceof Array)}catch{n=!0}return function(c,v){if(Ra(c),!bo(v)&&v!==null)throw TypeError(v+": can't set as prototype!");return n?c.__proto__=v:o(c,v),c}}({},!1):void 0);kr(kr.S,"Object",{setPrototypeOf:P_});var hI=Oi.Object.setPrototypeOf,O_=M(function(e){e.exports={default:hI,__esModule:!0}});m(O_);var fI=M(function(e,n){function o(A){return A&&A.__esModule?A:{default:A}}n.__esModule=!0;var c=o(O_),v=o(B0),g=o(sc);n.default=function(A,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof y>"u"?"undefined":(0,g.default)(y)));A.prototype=(0,v.default)(y&&y.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),y&&(c.default?(0,c.default)(A,y):A.__proto__=y)}}),Oa=m(fI);kg("keys",function(){return function(e){return nd(Object(tf(e)))}});var dI=Oi.Object.keys,pI=M(function(e){e.exports={default:dI,__esModule:!0}}),Hi=m(pI),H2=Oi.JSON||(Oi.JSON={stringify:JSON.stringify}),D_=function(e){return H2.stringify.apply(H2,arguments)},b_=M(function(e){e.exports={default:D_,__esModule:!0}}),yu=m(b_);kr(kr.S+kr.F*!ns,"Object",{defineProperties:b0});var mI=Oi.Object,zp=function(e,n){return mI.defineProperties(e,n)},j2=M(function(e){e.exports={default:zp,__esModule:!0}}),Rn=m(j2);kr(kr.S,"Math",{sign:Math.sign||function(e){return(e=+e)==0||e!=e?e:0>e?-1:1}});var Up=Oi.Math.sign,gI=M(function(e){e.exports={default:Up,__esModule:!0}}),lf=m(gI),vI=Math.floor;kr(kr.S,"Number",{isInteger:function(e){return!bo(e)&&isFinite(e)&&vI(e)===e}});var yI=Oi.Number.isInteger,xI=M(function(e){e.exports={default:yI,__esModule:!0}}),kp=m(xI);kr(kr.S,"Number",{EPSILON:Math.pow(2,-52)});var AI=Math.pow(2,-52),wI=M(function(e){e.exports={default:AI,__esModule:!0}}),Bo=m(wI);Bo===void 0&&(Number.EPSILON=Math.pow(2,-52)),kp===void 0&&(Number.isInteger=function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}),lf===void 0&&(Math.sign=function(e){return 0>e?-1:0<e?1:+e}),!("name"in Function.prototype)&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),Pe===void 0&&(Object.assign=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),o=1;o<arguments.length;o++){var c=arguments[o];if(c!=null)for(var v in c)Object.prototype.hasOwnProperty.call(c,v)&&(n[v]=c[v])}return n}),Pe(z.prototype,{addEventListener:function(e,n){this._listeners===void 0&&(this._listeners={});var o=this._listeners;o[e]===void 0&&(o[e]=[]),o[e].indexOf(n)===-1&&o[e].push(n)},hasEventListener:function(e,n){if(this._listeners===void 0)return!1;var o=this._listeners;return o[e]!==void 0&&o[e].indexOf(n)!==-1},removeEventListener:function(e,n){this._listeners!==void 0&&(e=this._listeners[e],e!==void 0&&(n=e.indexOf(n),n!==-1&&e.splice(n,1)))},dispatchEvent:function(e){if(this._listeners!==void 0){var n=this._listeners[e.type];if(n!==void 0){e.target=this,n=n.slice(0);for(var o=0,c=n.length;o<c;o++)n[o].call(this,e)}}}});for(var is=[],Yg=0;256>Yg;Yg++)is[Yg]=(16>Yg?"0":"")+Yg.toString(16);var ai={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,o=4294967295*Math.random()|0,c=4294967295*Math.random()|0;return(is[e&255]+is[e>>8&255]+is[e>>16&255]+is[e>>24&255]+"-"+is[n&255]+is[n>>8&255]+"-"+is[n>>16&15|64]+is[n>>24&255]+"-"+is[o&63|128]+is[o>>8&255]+"-"+is[o>>16&255]+is[o>>24&255]+is[c&255]+is[c>>8&255]+is[c>>16&255]+is[c>>24&255]).toUpperCase()},clamp:function(e,n,o){return Math.max(n,Math.min(o,e))},euclideanModulo:function(e,n){return(e%n+n)%n},mapLinear:function(e,n,o,c,v){return c+(e-n)*(v-c)/(o-n)},lerp:function(e,n,o){return(1-o)*e+o*n},smoothstep:function(e,n,o){return e<=n?0:e>=o?1:(e=(e-n)/(o-n),e*e*(3-2*e))},smootherstep:function(e,n,o){return e<=n?0:e>=o?1:(e=(e-n)/(o-n),e*e*e*(e*(6*e-15)+10))},randInt:function(e,n){return e+Math.floor(Math.random()*(n-e+1))},randFloat:function(e,n){return e+Math.random()*(n-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*ai.DEG2RAD},radToDeg:function(e){return e*ai.RAD2DEG},isPowerOfTwo:function(e){return(e&e-1)===0&&e!==0},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,n,o,c,v){var g=Math.cos,A=Math.sin,y=g(o/2);o=A(o/2);var T=g((n+c)/2),D=A((n+c)/2),X=g((n-c)/2),I=A((n-c)/2);switch(g=g((c-n)/2),n=A((c-n)/2),v){case"XYX":e.set(y*D,o*X,o*I,y*T);break;case"YZY":e.set(o*I,y*D,o*X,y*T);break;case"ZXZ":e.set(o*X,o*I,y*D,y*T);break;case"XZX":e.set(y*D,o*n,o*g,y*T);break;case"YXY":e.set(o*g,y*D,o*n,y*T);break;case"ZYZ":e.set(o*n,o*g,y*D,y*T);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+v)}}};Rn(U.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Pe(U.prototype,{isVector2:!0,set:function(e,n){return this.x=e,this.y=n,this},setScalar:function(e){return this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,n){return n!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,n)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this},addScaledVector:function(e,n){return this.x+=e.x*n,this.y+=e.y*n,this},sub:function(e,n){return n!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,n)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var n=this.x,o=this.y;return e=e.elements,this.x=e[0]*n+e[3]*o+e[6],this.y=e[1]*n+e[4]*o+e[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this},clampScalar:function(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this},clampLength:function(e,n){var o=this.length();return this.divideScalar(o||1).multiplyScalar(Math.max(e,Math.min(n,o)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){return Math.atan2(-this.y,-this.x)+Math.PI},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var n=this.x-e.x;return e=this.y-e.y,n*n+e*e},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this},lerpVectors:function(e,n,o){return this.x=e.x+(n.x-e.x)*o,this.y=e.y+(n.y-e.y)*o,this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,n){return n===void 0&&(n=0),this.x=e[n],this.y=e[n+1],this},toArray:function(e,n){return e===void 0&&(e=[]),n===void 0&&(n=0),e[n]=this.x,e[n+1]=this.y,e},fromBufferAttribute:function(e,n,o){return o!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(n),this.y=e.getY(n),this},rotateAround:function(e,n){var o=Math.cos(n);n=Math.sin(n);var c=this.x-e.x,v=this.y-e.y;return this.x=c*o-v*n+e.x,this.y=c*n+v*o+e.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}}),Pe(W.prototype,{isMatrix3:!0,set:function(e,n,o,c,v,g,A,y,T){var D=this.elements;return D[0]=e,D[1]=c,D[2]=A,D[3]=n,D[4]=v,D[5]=y,D[6]=o,D[7]=g,D[8]=T,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(e){var n=this.elements;return e=e.elements,n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],this},extractBasis:function(e,n,o){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),o.setFromMatrix3Column(this,2),this},setFromMatrix4:function(e){return e=e.elements,this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,n){var o=e.elements,c=n.elements;n=this.elements,e=o[0];var v=o[3],g=o[6],A=o[1],y=o[4],T=o[7],D=o[2],X=o[5];o=o[8];var I=c[0],b=c[3],N=c[6],k=c[1],G=c[4],re=c[7],se=c[2],ue=c[5];return c=c[8],n[0]=e*I+v*k+g*se,n[3]=e*b+v*G+g*ue,n[6]=e*N+v*re+g*c,n[1]=A*I+y*k+T*se,n[4]=A*b+y*G+T*ue,n[7]=A*N+y*re+T*c,n[2]=D*I+X*k+o*se,n[5]=D*b+X*G+o*ue,n[8]=D*N+X*re+o*c,this},multiplyScalar:function(e){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this},determinant:function(){var e=this.elements,n=e[0],o=e[1],c=e[2],v=e[3],g=e[4],A=e[5],y=e[6],T=e[7];return e=e[8],n*g*e-n*A*T-o*v*e+o*A*y+c*v*T-c*g*y},getInverse:function(e,n){n!==void 0&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var o=e.elements;e=this.elements,n=o[0];var c=o[1],v=o[2],g=o[3],A=o[4],y=o[5],T=o[6],D=o[7];o=o[8];var X=o*A-y*D,I=y*T-o*g,b=D*g-A*T,N=n*X+c*I+v*b;return N===0?this.set(0,0,0,0,0,0,0,0,0):(N=1/N,e[0]=X*N,e[1]=(v*D-o*c)*N,e[2]=(y*c-v*A)*N,e[3]=I*N,e[4]=(o*n-v*T)*N,e[5]=(v*g-y*n)*N,e[6]=b*N,e[7]=(c*T-D*n)*N,e[8]=(A*n-c*g)*N,this)},transpose:function(){var e=this.elements,n=e[1];return e[1]=e[3],e[3]=n,n=e[2],e[2]=e[6],e[6]=n,n=e[5],e[5]=e[7],e[7]=n,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this},setUvTransform:function(e,n,o,c,v,g,A){var y=Math.cos(v);v=Math.sin(v),this.set(o*y,o*v,-o*(y*g+v*A)+g+e,-c*v,c*y,-c*(-v*g+y*A)+A+n,0,0,1)},scale:function(e,n){var o=this.elements;return o[0]*=e,o[3]*=e,o[6]*=e,o[1]*=n,o[4]*=n,o[7]*=n,this},rotate:function(e){var n=Math.cos(e);e=Math.sin(e);var o=this.elements,c=o[0],v=o[3],g=o[6],A=o[1],y=o[4],T=o[7];return o[0]=n*c+e*A,o[3]=n*v+e*y,o[6]=n*g+e*T,o[1]=-e*c+n*A,o[4]=-e*v+n*y,o[7]=-e*g+n*T,this},translate:function(e,n){var o=this.elements;return o[0]+=e*o[2],o[3]+=e*o[5],o[6]+=e*o[8],o[1]+=n*o[2],o[4]+=n*o[5],o[7]+=n*o[8],this},equals:function(e){var n=this.elements;e=e.elements;for(var o=0;9>o;o++)if(n[o]!==e[o])return!1;return!0},fromArray:function(e,n){n===void 0&&(n=0);for(var o=0;9>o;o++)this.elements[o]=e[o+n];return this},toArray:function(e,n){e===void 0&&(e=[]),n===void 0&&(n=0);var o=this.elements;return e[n]=o[0],e[n+1]=o[1],e[n+2]=o[2],e[n+3]=o[3],e[n+4]=o[4],e[n+5]=o[5],e[n+6]=o[6],e[n+7]=o[7],e[n+8]=o[8],e}});var d,p={getDataURL:function(e){if(typeof HTMLCanvasElement>"u")return e.src;if(!(e instanceof HTMLCanvasElement)){d===void 0&&(d=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),d.width=e.width,d.height=e.height;var n=d.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),e=d}return 2048<e.width||2048<e.height?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},s=0;J.DEFAULT_IMAGE=void 0,J.DEFAULT_MAPPING=300,J.prototype=Pe(Le(z.prototype),{constructor:J,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];var o={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){var c=this.image;if(c.uuid===void 0&&(c.uuid=ai.generateUUID()),!n&&e.images[c.uuid]===void 0){if(Array.isArray(c))for(var v=[],g=0,A=c.length;g<A;g++)v.push(p.getDataURL(c[g]));else v=p.getDataURL(c);e.images[c.uuid]={uuid:c.uuid,url:v}}o.image=c.uuid}return n||(e.textures[this.uuid]=o),o},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==300)return e;if(e.applyMatrix3(this.matrix),0>e.x||1<e.x)switch(this.wrapS){case 1e3:e.x-=Math.floor(e.x);break;case 1001:e.x=0>e.x?0:1;break;case 1002:e.x=Math.abs(Math.floor(e.x)%2)===1?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(0>e.y||1<e.y)switch(this.wrapT){case 1e3:e.y-=Math.floor(e.y);break;case 1001:e.y=0>e.y?0:1;break;case 1002:e.y=Math.abs(Math.floor(e.y)%2)===1?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(J.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}}),Rn(te.prototype,{width:{get:function(){return this.z},set:function(e){this.z=e}},height:{get:function(){return this.w},set:function(e){this.w=e}}}),Pe(te.prototype,{isVector4:!0,set:function(e,n,o,c){return this.x=e,this.y=n,this.z=o,this.w=c,this},setScalar:function(e){return this.w=this.z=this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this},add:function(e,n){return n!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,n)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this},addScaledVector:function(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this},sub:function(e,n){return n!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,n)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var n=this.x,o=this.y,c=this.z,v=this.w;return e=e.elements,this.x=e[0]*n+e[4]*o+e[8]*c+e[12]*v,this.y=e[1]*n+e[5]*o+e[9]*c+e[13]*v,this.z=e[2]*n+e[6]*o+e[10]*c+e[14]*v,this.w=e[3]*n+e[7]*o+e[11]*c+e[15]*v,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var n=Math.sqrt(1-e.w*e.w);return 1e-4>n?(this.x=1,this.z=this.y=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this},setAxisAngleFromRotationMatrix:function(e){e=e.elements;var n=e[0],o=e[4],c=e[8],v=e[1],g=e[5],A=e[9],y=e[2],T=e[6],D=e[10];return .01>Math.abs(o-v)&&.01>Math.abs(c-y)&&.01>Math.abs(A-T)?.1>Math.abs(o+v)&&.1>Math.abs(c+y)&&.1>Math.abs(A+T)&&.1>Math.abs(n+g+D-3)?(this.set(1,0,0,0),this):(e=Math.PI,n=(n+1)/2,g=(g+1)/2,D=(D+1)/2,o=(o+v)/4,c=(c+y)/4,A=(A+T)/4,n>g&&n>D?.01>n?(T=0,o=y=.707106781):(T=Math.sqrt(n),y=o/T,o=c/T):g>D?.01>g?(T=.707106781,y=0,o=.707106781):(y=Math.sqrt(g),T=o/y,o=A/y):.01>D?(y=T=.707106781,o=0):(o=Math.sqrt(D),T=c/o,y=A/o),this.set(T,y,o,e),this):(e=Math.sqrt((T-A)*(T-A)+(c-y)*(c-y)+(v-o)*(v-o)),.001>Math.abs(e)&&(e=1),this.x=(T-A)/e,this.y=(c-y)/e,this.z=(v-o)/e,this.w=Math.acos((n+g+D-1)/2),this)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this},clampScalar:function(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this},clampLength:function(e,n){var o=this.length();return this.divideScalar(o||1).multiplyScalar(Math.max(e,Math.min(n,o)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this},lerpVectors:function(e,n,o){return this.x=e.x+(n.x-e.x)*o,this.y=e.y+(n.y-e.y)*o,this.z=e.z+(n.z-e.z)*o,this.w=e.w+(n.w-e.w)*o,this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,n){return n===void 0&&(n=0),this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this},toArray:function(e,n){return e===void 0&&(e=[]),n===void 0&&(n=0),e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e},fromBufferAttribute:function(e,n,o){return o!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}),ae.prototype=Pe(Le(z.prototype),{constructor:ae,isWebGLRenderTarget:!0,setSize:function(e,n){(this.width!==e||this.height!==n)&&(this.width=e,this.height=n,this.texture.image.width=e,this.texture.image.height=n,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),ve.prototype=Pe(Le(ae.prototype),{constructor:ve,isWebGLMultisampleRenderTarget:!0,copy:function(e){return ae.prototype.copy.call(this,e),this.samples=e.samples,this}}),Pe(he,{slerp:function(e,n,o,c){return o.copy(e).slerp(n,c)},slerpFlat:function(e,n,o,c,v,g,A){var y=o[c+0],T=o[c+1],D=o[c+2];o=o[c+3],c=v[g+0];var X=v[g+1],I=v[g+2];if(v=v[g+3],o!==v||y!==c||T!==X||D!==I){g=1-A;var b=y*c+T*X+D*I+o*v,N=0<=b?1:-1,k=1-b*b;k>Bo&&(k=Math.sqrt(k),b=Math.atan2(k,b*N),g=Math.sin(g*b)/k,A=Math.sin(A*b)/k),N*=A,y=y*g+c*N,T=T*g+X*N,D=D*g+I*N,o=o*g+v*N,g===1-A&&(A=1/Math.sqrt(y*y+T*T+D*D+o*o),y*=A,T*=A,D*=A,o*=A)}e[n]=y,e[n+1]=T,e[n+2]=D,e[n+3]=o},multiplyQuaternionsFlat:function(e,n,o,c,v,g){var A=o[c],y=o[c+1],T=o[c+2];o=o[c+3],c=v[g];var D=v[g+1],X=v[g+2];return v=v[g+3],e[n]=A*v+o*c+y*X-T*D,e[n+1]=y*v+o*D+T*c-A*X,e[n+2]=T*v+o*X+A*D-y*c,e[n+3]=o*v-A*c-y*D-T*X,e}}),Rn(he.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}}),Pe(he.prototype,{isQuaternion:!0,set:function(e,n,o,c){return this._x=e,this._y=n,this._z=o,this._w=c,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this},setFromEuler:function(e,n){if(!e||!e.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var o=e._x,c=e._y,v=e._z;e=e.order;var g=Math.cos,A=Math.sin,y=g(o/2),T=g(c/2);switch(g=g(v/2),o=A(o/2),c=A(c/2),v=A(v/2),e){case"XYZ":this._x=o*T*g+y*c*v,this._y=y*c*g-o*T*v,this._z=y*T*v+o*c*g,this._w=y*T*g-o*c*v;break;case"YXZ":this._x=o*T*g+y*c*v,this._y=y*c*g-o*T*v,this._z=y*T*v-o*c*g,this._w=y*T*g+o*c*v;break;case"ZXY":this._x=o*T*g-y*c*v,this._y=y*c*g+o*T*v,this._z=y*T*v+o*c*g,this._w=y*T*g-o*c*v;break;case"ZYX":this._x=o*T*g-y*c*v,this._y=y*c*g+o*T*v,this._z=y*T*v-o*c*g,this._w=y*T*g+o*c*v;break;case"YZX":this._x=o*T*g+y*c*v,this._y=y*c*g+o*T*v,this._z=y*T*v-o*c*g,this._w=y*T*g-o*c*v;break;case"XZY":this._x=o*T*g-y*c*v,this._y=y*c*g-o*T*v,this._z=y*T*v+o*c*g,this._w=y*T*g+o*c*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+e)}return n!==!1&&this._onChangeCallback(),this},setFromAxisAngle:function(e,n){n/=2;var o=Math.sin(n);return this._x=e.x*o,this._y=e.y*o,this._z=e.z*o,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(e){var n=e.elements,o=n[0];e=n[4];var c=n[8],v=n[1],g=n[5],A=n[9],y=n[2],T=n[6];n=n[10];var D=o+g+n;return 0<D?(o=.5/Math.sqrt(D+1),this._w=.25/o,this._x=(T-A)*o,this._y=(c-y)*o,this._z=(v-e)*o):o>g&&o>n?(o=2*Math.sqrt(1+o-g-n),this._w=(T-A)/o,this._x=.25*o,this._y=(e+v)/o,this._z=(c+y)/o):g>n?(o=2*Math.sqrt(1+g-o-n),this._w=(c-y)/o,this._x=(e+v)/o,this._y=.25*o,this._z=(A+T)/o):(o=2*Math.sqrt(1+n-o-g),this._w=(v-e)/o,this._x=(c+y)/o,this._y=(A+T)/o,this._z=.25*o),this._onChangeCallback(),this},setFromUnitVectors:function(e,n){var o=e.dot(n)+1;return 1e-6>o?(o=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0):(this._x=0,this._y=-e.z,this._z=e.y)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x),this._w=o,this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(ai.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,n){var o=this.angleTo(e);return o===0?this:(this.slerp(e,Math.min(1,n/o)),this)},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return e===0?(this._z=this._y=this._x=0,this._w=1):(e=1/e,this._x*=e,this._y*=e,this._z*=e,this._w*=e),this._onChangeCallback(),this},multiply:function(e,n){return n!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,n)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,n){var o=e._x,c=e._y,v=e._z;e=e._w;var g=n._x,A=n._y,y=n._z;return n=n._w,this._x=o*n+e*g+c*y-v*A,this._y=c*n+e*A+v*g-o*y,this._z=v*n+e*y+o*A-c*g,this._w=e*n-o*g-c*A-v*y,this._onChangeCallback(),this},slerp:function(e,n){if(n===0)return this;if(n===1)return this.copy(e);var o=this._x,c=this._y,v=this._z,g=this._w,A=g*e._w+o*e._x+c*e._y+v*e._z;if(0>A?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,A=-A):this.copy(e),1<=A)return this._w=g,this._x=o,this._y=c,this._z=v,this;if(e=1-A*A,e<=Bo)return A=1-n,this._w=A*g+n*this._w,this._x=A*o+n*this._x,this._y=A*c+n*this._y,this._z=A*v+n*this._z,this.normalize(),this._onChangeCallback(),this;e=Math.sqrt(e);var y=Math.atan2(e,A);return A=Math.sin((1-n)*y)/e,n=Math.sin(n*y)/e,this._w=g*A+this._w*n,this._x=o*A+this._x*n,this._y=c*A+this._y*n,this._z=v*A+this._z*n,this._onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,n){return n===void 0&&(n=0),this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this},toArray:function(e,n){return e===void 0&&(e=[]),n===void 0&&(n=0),e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e},fromBufferAttribute:function(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}});var h=new oe,_=new he;Pe(oe.prototype,{isVector3:!0,set:function(e,n,o){return this.x=e,this.y=n,this.z=o,this},setScalar:function(e){return this.z=this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,n){return n!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,n)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this},addScaledVector:function(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this},sub:function(e,n){return n!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,n)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this},multiply:function(e,n){return n!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,n)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this},applyEuler:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(_.setFromEuler(e))},applyAxisAngle:function(e,n){return this.applyQuaternion(_.setFromAxisAngle(e,n))},applyMatrix3:function(e){var n=this.x,o=this.y,c=this.z;return e=e.elements,this.x=e[0]*n+e[3]*o+e[6]*c,this.y=e[1]*n+e[4]*o+e[7]*c,this.z=e[2]*n+e[5]*o+e[8]*c,this},applyNormalMatrix:function(e){return this.applyMatrix3(e).normalize()},applyMatrix4:function(e){var n=this.x,o=this.y,c=this.z;e=e.elements;var v=1/(e[3]*n+e[7]*o+e[11]*c+e[15]);return this.x=(e[0]*n+e[4]*o+e[8]*c+e[12])*v,this.y=(e[1]*n+e[5]*o+e[9]*c+e[13])*v,this.z=(e[2]*n+e[6]*o+e[10]*c+e[14])*v,this},applyQuaternion:function(e){var n=this.x,o=this.y,c=this.z,v=e.x,g=e.y,A=e.z;e=e.w;var y=e*n+g*c-A*o,T=e*o+A*n-v*c,D=e*c+v*o-g*n;return n=-v*n-g*o-A*c,this.x=y*e+n*-v+T*-A-D*-g,this.y=T*e+n*-g+D*-v-y*-A,this.z=D*e+n*-A+y*-g-T*-v,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){var n=this.x,o=this.y,c=this.z;return e=e.elements,this.x=e[0]*n+e[4]*o+e[8]*c,this.y=e[1]*n+e[5]*o+e[9]*c,this.z=e[2]*n+e[6]*o+e[10]*c,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this},clampScalar:function(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this},clampLength:function(e,n){var o=this.length();return this.divideScalar(o||1).multiplyScalar(Math.max(e,Math.min(n,o)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this},lerpVectors:function(e,n,o){return this.x=e.x+(n.x-e.x)*o,this.y=e.y+(n.y-e.y)*o,this.z=e.z+(n.z-e.z)*o,this},cross:function(e,n){return n!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,n)):this.crossVectors(this,e)},crossVectors:function(e,n){var o=e.x,c=e.y;e=e.z;var v=n.x,g=n.y;return n=n.z,this.x=c*n-e*g,this.y=e*v-o*n,this.z=o*g-c*v,this},projectOnVector:function(e){var n=e.lengthSq();return n===0?this.set(0,0,0):(n=e.dot(this)/n,this.copy(e).multiplyScalar(n))},projectOnPlane:function(e){return h.copy(this).projectOnVector(e),this.sub(h)},reflect:function(e){return this.sub(h.copy(e).multiplyScalar(2*this.dot(e)))},angleTo:function(e){var n=Math.sqrt(this.lengthSq()*e.lengthSq());return n===0?Math.PI/2:(e=this.dot(e)/n,Math.acos(ai.clamp(e,-1,1)))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var n=this.x-e.x,o=this.y-e.y;return e=this.z-e.z,n*n+o*o+e*e},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,n,o){var c=Math.sin(n)*e;return this.x=c*Math.sin(o),this.y=Math.cos(n)*e,this.z=c*Math.cos(o),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,n,o){return this.x=e*Math.sin(n),this.y=o,this.z=e*Math.cos(n),this},setFromMatrixPosition:function(e){return e=e.elements,this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(e){var n=this.setFromMatrixColumn(e,0).length(),o=this.setFromMatrixColumn(e,1).length();return e=this.setFromMatrixColumn(e,2).length(),this.x=n,this.y=o,this.z=e,this},setFromMatrixColumn:function(e,n){return this.fromArray(e.elements,4*n)},setFromMatrix3Column:function(e,n){return this.fromArray(e.elements,3*n)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,n){return n===void 0&&(n=0),this.x=e[n],this.y=e[n+1],this.z=e[n+2],this},toArray:function(e,n){return e===void 0&&(e=[]),n===void 0&&(n=0),e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e},fromBufferAttribute:function(e,n,o){return o!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var x=new oe,S=new me,C=new oe(0,0,0),R=new oe(1,1,1),H=new oe,Z=new oe,P=new oe;Pe(me.prototype,{isMatrix4:!0,set:function(e,n,o,c,v,g,A,y,T,D,X,I,b,N,k,G){var re=this.elements;return re[0]=e,re[4]=n,re[8]=o,re[12]=c,re[1]=v,re[5]=g,re[9]=A,re[13]=y,re[2]=T,re[6]=D,re[10]=X,re[14]=I,re[3]=b,re[7]=N,re[11]=k,re[15]=G,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new me().fromArray(this.elements)},copy:function(e){var n=this.elements;return e=e.elements,n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],this},copyPosition:function(e){var n=this.elements;return e=e.elements,n[12]=e[12],n[13]=e[13],n[14]=e[14],this},extractBasis:function(e,n,o){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),o.setFromMatrixColumn(this,2),this},makeBasis:function(e,n,o){return this.set(e.x,n.x,o.x,0,e.y,n.y,o.y,0,e.z,n.z,o.z,0,0,0,0,1),this},extractRotation:function(e){var n=this.elements,o=e.elements,c=1/x.setFromMatrixColumn(e,0).length(),v=1/x.setFromMatrixColumn(e,1).length();return e=1/x.setFromMatrixColumn(e,2).length(),n[0]=o[0]*c,n[1]=o[1]*c,n[2]=o[2]*c,n[3]=0,n[4]=o[4]*v,n[5]=o[5]*v,n[6]=o[6]*v,n[7]=0,n[8]=o[8]*e,n[9]=o[9]*e,n[10]=o[10]*e,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this},makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var n=this.elements,o=e.x,c=e.y,v=e.z,g=Math.cos(o);o=Math.sin(o);var A=Math.cos(c);c=Math.sin(c);var y=Math.cos(v);if(v=Math.sin(v),e.order==="XYZ"){e=g*y;var T=g*v,D=o*y,X=o*v;n[0]=A*y,n[4]=-A*v,n[8]=c,n[1]=T+D*c,n[5]=e-X*c,n[9]=-o*A,n[2]=X-e*c,n[6]=D+T*c,n[10]=g*A}else e.order==="YXZ"?(e=A*y,T=A*v,D=c*y,X=c*v,n[0]=e+X*o,n[4]=D*o-T,n[8]=g*c,n[1]=g*v,n[5]=g*y,n[9]=-o,n[2]=T*o-D,n[6]=X+e*o,n[10]=g*A):e.order==="ZXY"?(e=A*y,T=A*v,D=c*y,X=c*v,n[0]=e-X*o,n[4]=-g*v,n[8]=D+T*o,n[1]=T+D*o,n[5]=g*y,n[9]=X-e*o,n[2]=-g*c,n[6]=o,n[10]=g*A):e.order==="ZYX"?(e=g*y,T=g*v,D=o*y,X=o*v,n[0]=A*y,n[4]=D*c-T,n[8]=e*c+X,n[1]=A*v,n[5]=X*c+e,n[9]=T*c-D,n[2]=-c,n[6]=o*A,n[10]=g*A):e.order==="YZX"?(e=g*A,T=g*c,D=o*A,X=o*c,n[0]=A*y,n[4]=X-e*v,n[8]=D*v+T,n[1]=v,n[5]=g*y,n[9]=-o*y,n[2]=-c*y,n[6]=T*v+D,n[10]=e-X*v):e.order==="XZY"&&(e=g*A,T=g*c,D=o*A,X=o*c,n[0]=A*y,n[4]=-v,n[8]=c*y,n[1]=e*v+X,n[5]=g*y,n[9]=T*v-D,n[2]=D*v-T,n[6]=o*y,n[10]=X*v+e);return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this},makeRotationFromQuaternion:function(e){return this.compose(C,e,R)},lookAt:function(e,n,o){var c=this.elements;return P.subVectors(e,n),P.lengthSq()===0&&(P.z=1),P.normalize(),H.crossVectors(o,P),H.lengthSq()===0&&(Math.abs(o.z)===1?P.x+=1e-4:P.z+=1e-4,P.normalize(),H.crossVectors(o,P)),H.normalize(),Z.crossVectors(P,H),c[0]=H.x,c[4]=Z.x,c[8]=P.x,c[1]=H.y,c[5]=Z.y,c[9]=P.y,c[2]=H.z,c[6]=Z.z,c[10]=P.z,this},multiply:function(e,n){return n!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,n)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,n){var o=e.elements,c=n.elements;n=this.elements,e=o[0];var v=o[4],g=o[8],A=o[12],y=o[1],T=o[5],D=o[9],X=o[13],I=o[2],b=o[6],N=o[10],k=o[14],G=o[3],re=o[7],se=o[11];o=o[15];var ue=c[0],we=c[4],Te=c[8],je=c[12],Ge=c[1],He=c[5],lt=c[9],ht=c[13],It=c[2],vt=c[6],Et=c[10],xr=c[14],Nt=c[3],Pr=c[7],qr=c[11];return c=c[15],n[0]=e*ue+v*Ge+g*It+A*Nt,n[4]=e*we+v*He+g*vt+A*Pr,n[8]=e*Te+v*lt+g*Et+A*qr,n[12]=e*je+v*ht+g*xr+A*c,n[1]=y*ue+T*Ge+D*It+X*Nt,n[5]=y*we+T*He+D*vt+X*Pr,n[9]=y*Te+T*lt+D*Et+X*qr,n[13]=y*je+T*ht+D*xr+X*c,n[2]=I*ue+b*Ge+N*It+k*Nt,n[6]=I*we+b*He+N*vt+k*Pr,n[10]=I*Te+b*lt+N*Et+k*qr,n[14]=I*je+b*ht+N*xr+k*c,n[3]=G*ue+re*Ge+se*It+o*Nt,n[7]=G*we+re*He+se*vt+o*Pr,n[11]=G*Te+re*lt+se*Et+o*qr,n[15]=G*je+re*ht+se*xr+o*c,this},multiplyScalar:function(e){var n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this},determinant:function(){var e=this.elements,n=e[0],o=e[4],c=e[8],v=e[12],g=e[1],A=e[5],y=e[9],T=e[13],D=e[2],X=e[6],I=e[10],b=e[14];return e[3]*(+v*y*X-c*T*X-v*A*I+o*T*I+c*A*b-o*y*b)+e[7]*(+n*y*b-n*T*I+v*g*I-c*g*b+c*T*D-v*y*D)+e[11]*(+n*T*X-n*A*b-v*g*X+o*g*b+v*A*D-o*T*D)+e[15]*(-c*A*D-n*y*X+n*A*I+c*g*X-o*g*I+o*y*D)},transpose:function(){var e=this.elements,n=e[1];return e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this},setPosition:function(e,n,o){var c=this.elements;return e.isVector3?(c[12]=e.x,c[13]=e.y,c[14]=e.z):(c[12]=e,c[13]=n,c[14]=o),this},getInverse:function(e,n){n!==void 0&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate."),n=this.elements;var o=e.elements;e=o[0];var c=o[1],v=o[2],g=o[3],A=o[4],y=o[5],T=o[6],D=o[7],X=o[8],I=o[9],b=o[10],N=o[11],k=o[12],G=o[13],re=o[14];o=o[15];var se=I*re*D-G*b*D+G*T*N-y*re*N-I*T*o+y*b*o,ue=k*b*D-X*re*D-k*T*N+A*re*N+X*T*o-A*b*o,we=X*G*D-k*I*D+k*y*N-A*G*N-X*y*o+A*I*o,Te=k*I*T-X*G*T-k*y*b+A*G*b+X*y*re-A*I*re,je=e*se+c*ue+v*we+g*Te;return je===0?this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0):(je=1/je,n[0]=se*je,n[1]=(G*b*g-I*re*g-G*v*N+c*re*N+I*v*o-c*b*o)*je,n[2]=(y*re*g-G*T*g+G*v*D-c*re*D-y*v*o+c*T*o)*je,n[3]=(I*T*g-y*b*g-I*v*D+c*b*D+y*v*N-c*T*N)*je,n[4]=ue*je,n[5]=(X*re*g-k*b*g+k*v*N-e*re*N-X*v*o+e*b*o)*je,n[6]=(k*T*g-A*re*g-k*v*D+e*re*D+A*v*o-e*T*o)*je,n[7]=(A*b*g-X*T*g+X*v*D-e*b*D-A*v*N+e*T*N)*je,n[8]=we*je,n[9]=(k*I*g-X*G*g-k*c*N+e*G*N+X*c*o-e*I*o)*je,n[10]=(A*G*g-k*y*g+k*c*D-e*G*D-A*c*o+e*y*o)*je,n[11]=(X*y*g-A*I*g-X*c*D+e*I*D+A*c*N-e*y*N)*je,n[12]=Te*je,n[13]=(X*G*v-k*I*v+k*c*b-e*G*b-X*c*re+e*I*re)*je,n[14]=(k*y*v-A*G*v-k*c*T+e*G*T+A*c*re-e*y*re)*je,n[15]=(A*I*v-X*y*v+X*c*T-e*I*T-A*c*b+e*y*b)*je,this)},scale:function(e){var n=this.elements,o=e.x,c=e.y;return e=e.z,n[0]*=o,n[4]*=c,n[8]*=e,n[1]*=o,n[5]*=c,n[9]*=e,n[2]*=o,n[6]*=c,n[10]*=e,n[3]*=o,n[7]*=c,n[11]*=e,this},getMaxScaleOnAxis:function(){var e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))},makeTranslation:function(e,n,o){return this.set(1,0,0,e,0,1,0,n,0,0,1,o,0,0,0,1),this},makeRotationX:function(e){var n=Math.cos(e);return e=Math.sin(e),this.set(1,0,0,0,0,n,-e,0,0,e,n,0,0,0,0,1),this},makeRotationY:function(e){var n=Math.cos(e);return e=Math.sin(e),this.set(n,0,e,0,0,1,0,0,-e,0,n,0,0,0,0,1),this},makeRotationZ:function(e){var n=Math.cos(e);return e=Math.sin(e),this.set(n,-e,0,0,e,n,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,n){var o=Math.cos(n);n=Math.sin(n);var c=1-o,v=e.x,g=e.y;e=e.z;var A=c*v,y=c*g;return this.set(A*v+o,A*g-n*e,A*e+n*g,0,A*g+n*e,y*g+o,y*e-n*v,0,A*e-n*g,y*e+n*v,c*e*e+o,0,0,0,0,1),this},makeScale:function(e,n,o){return this.set(e,0,0,0,0,n,0,0,0,0,o,0,0,0,0,1),this},makeShear:function(e,n,o){return this.set(1,n,o,0,e,1,o,0,e,n,1,0,0,0,0,1),this},compose:function(e,n,o){var c=this.elements,v=n._x,g=n._y,A=n._z,y=n._w,T=v+v,D=g+g,X=A+A;n=v*T;var I=v*D;v*=X;var b=g*D;g*=X,A*=X,T*=y,D*=y,y*=X,X=o.x;var N=o.y;return o=o.z,c[0]=(1-(b+A))*X,c[1]=(I+y)*X,c[2]=(v-D)*X,c[3]=0,c[4]=(I-y)*N,c[5]=(1-(n+A))*N,c[6]=(g+T)*N,c[7]=0,c[8]=(v+D)*o,c[9]=(g-T)*o,c[10]=(1-(n+b))*o,c[11]=0,c[12]=e.x,c[13]=e.y,c[14]=e.z,c[15]=1,this},decompose:function(e,n,o){var c=this.elements,v=x.set(c[0],c[1],c[2]).length(),g=x.set(c[4],c[5],c[6]).length(),A=x.set(c[8],c[9],c[10]).length();0>this.determinant()&&(v=-v),e.x=c[12],e.y=c[13],e.z=c[14],S.copy(this),e=1/v,c=1/g;var y=1/A;return S.elements[0]*=e,S.elements[1]*=e,S.elements[2]*=e,S.elements[4]*=c,S.elements[5]*=c,S.elements[6]*=c,S.elements[8]*=y,S.elements[9]*=y,S.elements[10]*=y,n.setFromRotationMatrix(S),o.x=v,o.y=g,o.z=A,this},makePerspective:function(e,n,o,c,v,g){g===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var A=this.elements;return A[0]=2*v/(n-e),A[4]=0,A[8]=(n+e)/(n-e),A[12]=0,A[1]=0,A[5]=2*v/(o-c),A[9]=(o+c)/(o-c),A[13]=0,A[2]=0,A[6]=0,A[10]=-(g+v)/(g-v),A[14]=-2*g*v/(g-v),A[3]=0,A[7]=0,A[11]=-1,A[15]=0,this},makeOrthographic:function(e,n,o,c,v,g){var A=this.elements,y=1/(n-e),T=1/(o-c),D=1/(g-v);return A[0]=2*y,A[4]=0,A[8]=0,A[12]=-((n+e)*y),A[1]=0,A[5]=2*T,A[9]=0,A[13]=-((o+c)*T),A[2]=0,A[6]=0,A[10]=-2*D,A[14]=-((g+v)*D),A[3]=0,A[7]=0,A[11]=0,A[15]=1,this},equals:function(e){var n=this.elements;e=e.elements;for(var o=0;16>o;o++)if(n[o]!==e[o])return!1;return!0},fromArray:function(e,n){n===void 0&&(n=0);for(var o=0;16>o;o++)this.elements[o]=e[o+n];return this},toArray:function(e,n){e===void 0&&(e=[]),n===void 0&&(n=0);var o=this.elements;return e[n]=o[0],e[n+1]=o[1],e[n+2]=o[2],e[n+3]=o[3],e[n+4]=o[4],e[n+5]=o[5],e[n+6]=o[6],e[n+7]=o[7],e[n+8]=o[8],e[n+9]=o[9],e[n+10]=o[10],e[n+11]=o[11],e[n+12]=o[12],e[n+13]=o[13],e[n+14]=o[14],e[n+15]=o[15],e}});var F=new me,V=new he;ge.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),ge.DefaultOrder="XYZ",Rn(ge.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}}),Pe(ge.prototype,{isEuler:!0,set:function(e,n,o,c){return this._x=e,this._y=n,this._z=o,this._order=c||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this},setFromRotationMatrix:function(e,n,o){var c=ai.clamp,v=e.elements;e=v[0];var g=v[4],A=v[8],y=v[1],T=v[5],D=v[9],X=v[2],I=v[6];switch(v=v[10],n=n||this._order,n){case"XYZ":this._y=Math.asin(c(A,-1,1)),.9999999>Math.abs(A)?(this._x=Math.atan2(-D,v),this._z=Math.atan2(-g,e)):(this._x=Math.atan2(I,T),this._z=0);break;case"YXZ":this._x=Math.asin(-c(D,-1,1)),.9999999>Math.abs(D)?(this._y=Math.atan2(A,v),this._z=Math.atan2(y,T)):(this._y=Math.atan2(-X,e),this._z=0);break;case"ZXY":this._x=Math.asin(c(I,-1,1)),.9999999>Math.abs(I)?(this._y=Math.atan2(-X,v),this._z=Math.atan2(-g,T)):(this._y=0,this._z=Math.atan2(y,e));break;case"ZYX":this._y=Math.asin(-c(X,-1,1)),.9999999>Math.abs(X)?(this._x=Math.atan2(I,v),this._z=Math.atan2(y,e)):(this._x=0,this._z=Math.atan2(-g,T));break;case"YZX":this._z=Math.asin(c(y,-1,1)),.9999999>Math.abs(y)?(this._x=Math.atan2(-D,T),this._y=Math.atan2(-X,e)):(this._x=0,this._y=Math.atan2(A,v));break;case"XZY":this._z=Math.asin(-c(g,-1,1)),.9999999>Math.abs(g)?(this._x=Math.atan2(I,T),this._y=Math.atan2(A,e)):(this._x=Math.atan2(-D,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,o!==!1&&this._onChangeCallback(),this},setFromQuaternion:function(e,n,o){return F.makeRotationFromQuaternion(e),this.setFromRotationMatrix(F,n,o)},setFromVector3:function(e,n){return this.set(e.x,e.y,e.z,n||this._order)},reorder:function(e){return V.setFromEuler(this),this.setFromQuaternion(V,e)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this},toArray:function(e,n){return e===void 0&&(e=[]),n===void 0&&(n=0),e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new oe(this._x,this._y,this._z)},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}}),Pe(de.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask=this.mask|1<<e|0},enableAll:function(){this.mask=-1},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},disableAll:function(){this.mask=0},test:function(e){return(this.mask&e.mask)!==0}});var j=0,q=new oe,ee=new he,Q=new me,ne=new oe,le=new oe,Ae=new oe,Se=new he,Ie=new oe(1,0,0),Be=new oe(0,1,0),nt=new oe(0,0,1),rt={type:"added"},St={type:"removed"};ce.DefaultUp=new oe(0,1,0),ce.DefaultMatrixAutoUpdate=!0,ce.prototype=Pe(Le(z.prototype),{constructor:ce,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,n){this.quaternion.setFromAxisAngle(e,n)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,n){return ee.setFromAxisAngle(e,n),this.quaternion.multiply(ee),this},rotateOnWorldAxis:function(e,n){return ee.setFromAxisAngle(e,n),this.quaternion.premultiply(ee),this},rotateX:function(e){return this.rotateOnAxis(Ie,e)},rotateY:function(e){return this.rotateOnAxis(Be,e)},rotateZ:function(e){return this.rotateOnAxis(nt,e)},translateOnAxis:function(e,n){return q.copy(e).applyQuaternion(this.quaternion),this.position.add(q.multiplyScalar(n)),this},translateX:function(e){return this.translateOnAxis(Ie,e)},translateY:function(e){return this.translateOnAxis(Be,e)},translateZ:function(e){return this.translateOnAxis(nt,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(Q.getInverse(this.matrixWorld))},lookAt:function(e,n,o){e.isVector3?ne.copy(e):ne.set(e,n,o),e=this.parent,this.updateWorldMatrix(!0,!1),le.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Q.lookAt(le,ne,this.up):Q.lookAt(ne,le,this.up),this.quaternion.setFromRotationMatrix(Q),e&&(Q.extractRotation(e.matrixWorld),ee.setFromRotationMatrix(Q),this.quaternion.premultiply(ee.inverse()))},add:function(e){if(1<arguments.length){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(rt)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(1<arguments.length){for(var n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}return n=this.children.indexOf(e),n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(St)),this},attach:function(e){return this.updateWorldMatrix(!0,!1),Q.getInverse(this.matrixWorld),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Q.multiply(e.parent.matrixWorld)),e.applyMatrix4(Q),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,n){if(this[e]===n)return this;for(var o=0,c=this.children.length;o<c;o++){var v=this.children[o].getObjectByProperty(e,n);if(v!==void 0)return v}},getWorldPosition:function(e){return e===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new oe),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return e===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new he),this.updateMatrixWorld(!0),this.matrixWorld.decompose(le,e,Ae),e},getWorldScale:function(e){return e===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new oe),this.updateMatrixWorld(!0),this.matrixWorld.decompose(le,Se,e),e},getWorldDirection:function(e){e===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new oe),this.updateMatrixWorld(!0);var n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var n=this.children,o=0,c=n.length;o<c;o++)n[o].traverse(e)},traverseVisible:function(e){if(this.visible!==!1){e(this);for(var n=this.children,o=0,c=n.length;o<c;o++)n[o].traverseVisible(e)}},traverseAncestors:function(e){var n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var n=this.children,o=0,c=n.length;o<c;o++)n[o].updateMatrixWorld(e)},updateWorldMatrix:function(e,n){var o=this.parent;if(e===!0&&o!==null&&o.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0)for(e=this.children,n=0,o=e.length;n<o;n++)e[n].updateWorldMatrix(!1,!0)},toJSON:function(e){function n(X,I){return X[I.uuid]===void 0&&(X[I.uuid]=I.toJSON(e)),I.uuid}function o(X){var I=[],b;for(b in X){var N=X[b];delete N.metadata,I.push(N)}return I}var c=e===void 0||typeof e=="string",v={};c&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},v.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var g={};if(g.uuid=this.uuid,g.type=this.type,this.name!==""&&(g.name=this.name),this.castShadow===!0&&(g.castShadow=!0),this.receiveShadow===!0&&(g.receiveShadow=!0),this.visible===!1&&(g.visible=!1),this.frustumCulled===!1&&(g.frustumCulled=!1),this.renderOrder!==0&&(g.renderOrder=this.renderOrder),yu(this.userData)!=="{}"&&(g.userData=this.userData),g.layers=this.layers.mask,g.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(g.matrixAutoUpdate=!1),this.isInstancedMesh&&(g.type="InstancedMesh",g.count=this.count,g.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){g.geometry=n(e.geometries,this.geometry);var A=this.geometry.parameters;if(A!==void 0&&A.shapes!==void 0)if(A=A.shapes,Array.isArray(A))for(var y=0,T=A.length;y<T;y++)n(e.shapes,A[y]);else n(e.shapes,A)}if(this.material!==void 0)if(Array.isArray(this.material)){for(A=[],y=0,T=this.material.length;y<T;y++)A.push(n(e.materials,this.material[y]));g.material=A}else g.material=n(e.materials,this.material);if(0<this.children.length)for(g.children=[],y=0;y<this.children.length;y++)g.children.push(this.children[y].toJSON(e).object);if(c){c=o(e.geometries),y=o(e.materials),T=o(e.textures);var D=o(e.images);A=o(e.shapes),0<c.length&&(v.geometries=c),0<y.length&&(v.materials=y),0<T.length&&(v.textures=T),0<D.length&&(v.images=D),0<A.length&&(v.shapes=A)}return v.object=g,v},clone:function(e){return new this.constructor().copy(this,e)},copy:function(e,n){if(n===void 0&&(n=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(yu(e.userData)),n===!0)for(n=0;n<e.children.length;n++)this.add(e.children[n].clone());return this}}),_e.prototype=Pe(Le(ce.prototype),{constructor:_e,isScene:!0,copy:function(e,n){return ce.prototype.copy.call(this,e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var n=ce.prototype.toJSON.call(this,e);return this.background!==null&&(n.object.background=this.background.toJSON(e)),this.environment!==null&&(n.object.environment=this.environment.toJSON(e)),this.fog!==null&&(n.object.fog=this.fog.toJSON()),n},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Pt=[new oe,new oe,new oe,new oe,new oe,new oe,new oe,new oe],$t=new oe,Xt=new Re,wr=new oe,Qr=new oe,bt=new oe,fr=new oe,un=new oe,fn=new oe,vr=new oe,la=new oe,so=new oe,qi=new oe;Pe(Re.prototype,{isBox3:!0,set:function(e,n){return this.min.copy(e),this.max.copy(n),this},setFromArray:function(e){for(var n=1/0,o=1/0,c=1/0,v=-1/0,g=-1/0,A=-1/0,y=0,T=e.length;y<T;y+=3){var D=e[y],X=e[y+1],I=e[y+2];D<n&&(n=D),X<o&&(o=X),I<c&&(c=I),D>v&&(v=D),X>g&&(g=X),I>A&&(A=I)}return this.min.set(n,o,c),this.max.set(v,g,A),this},setFromBufferAttribute:function(e){for(var n=1/0,o=1/0,c=1/0,v=-1/0,g=-1/0,A=-1/0,y=0,T=e.count;y<T;y++){var D=e.getX(y),X=e.getY(y),I=e.getZ(y);D<n&&(n=D),X<o&&(o=X),I<c&&(c=I),D>v&&(v=D),X>g&&(g=X),I>A&&(A=I)}return this.min.set(n,o,c),this.max.set(v,g,A),this},setFromPoints:function(e){this.makeEmpty();for(var n=0,o=e.length;n<o;n++)this.expandByPoint(e[n]);return this},setFromCenterAndSize:function(e,n){return n=$t.copy(n).multiplyScalar(.5),this.min.copy(e).sub(n),this.max.copy(e).add(n),this},setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return e===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new oe),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return e===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new oe),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(e){e.updateWorldMatrix(!1,!1);var n=e.geometry;n!==void 0&&(n.boundingBox===null&&n.computeBoundingBox(),Xt.copy(n.boundingBox),Xt.applyMatrix4(e.matrixWorld),this.union(Xt)),e=e.children,n=0;for(var o=e.length;n<o;n++)this.expandByObject(e[n]);return this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,n){return n===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),n=new oe),n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(e){return this.clampPoint(e.center,$t),$t.distanceToSquared(e.center)<=e.radius*e.radius},intersectsPlane:function(e){if(0<e.normal.x)var n=e.normal.x*this.min.x,o=e.normal.x*this.max.x;else n=e.normal.x*this.max.x,o=e.normal.x*this.min.x;return 0<e.normal.y?(n+=e.normal.y*this.min.y,o+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,o+=e.normal.y*this.min.y),0<e.normal.z?(n+=e.normal.z*this.min.z,o+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,o+=e.normal.z*this.min.z),n<=-e.constant&&o>=-e.constant},intersectsTriangle:function(e){return this.isEmpty()||(this.getCenter(vr),la.subVectors(this.max,vr),wr.subVectors(e.a,vr),Qr.subVectors(e.b,vr),bt.subVectors(e.c,vr),fr.subVectors(Qr,wr),un.subVectors(bt,Qr),fn.subVectors(wr,bt),e=[0,-fr.z,fr.y,0,-un.z,un.y,0,-fn.z,fn.y,fr.z,0,-fr.x,un.z,0,-un.x,fn.z,0,-fn.x,-fr.y,fr.x,0,-un.y,un.x,0,-fn.y,fn.x,0],!Ee(e,wr,Qr,bt,la))||(e=[1,0,0,0,1,0,0,0,1],!Ee(e,wr,Qr,bt,la))?!1:(so.crossVectors(fr,un),e=[so.x,so.y,so.z],Ee(e,wr,Qr,bt,la))},clampPoint:function(e,n){return n===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),n=new oe),n.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return $t.copy(e).clamp(this.min,this.max).sub(e).length()},getBoundingSphere:function(e){return e===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize($t).length(),e},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){return this.isEmpty()?this:(Pt[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Pt[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Pt[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Pt[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Pt[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Pt[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Pt[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Pt[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Pt),this)},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var G2=new Re;Pe(De.prototype,{set:function(e,n){return this.center.copy(e),this.radius=n,this},setFromPoints:function(e,n){var o=this.center;n!==void 0?o.copy(n):G2.setFromPoints(e).getCenter(o);for(var c=n=0,v=e.length;c<v;c++)n=Math.max(n,o.distanceToSquared(e[c]));return this.radius=Math.sqrt(n),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},isEmpty:function(){return 0>this.radius},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,n){var o=this.center.distanceToSquared(e);return n===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),n=new oe),n.copy(e),o>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n},getBoundingBox:function(e){return e===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Re),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius*=e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});var ho=new oe,Zg=new oe,ry=new oe,Kl=new oe,CI=new oe,F_=new oe,_I=new oe;Pe(We.prototype,{set:function(e,n){return this.origin.copy(e),this.direction.copy(n),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,n){return n===void 0&&(console.warn("THREE.Ray: .at() target is now required"),n=new oe),n.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(e){return this.origin.copy(this.at(e,ho)),this},closestPointToPoint:function(e,n){return n===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),n=new oe),n.subVectors(e,this.origin),e=n.dot(this.direction),0>e?n.copy(this.origin):n.copy(this.direction).multiplyScalar(e).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(e){var n=ho.subVectors(e,this.origin).dot(this.direction);return 0>n?this.origin.distanceToSquared(e):(ho.copy(this.direction).multiplyScalar(n).add(this.origin),ho.distanceToSquared(e))},distanceSqToSegment:function(e,n,o,c){Zg.copy(e).add(n).multiplyScalar(.5),ry.copy(n).sub(e).normalize(),Kl.copy(this.origin).sub(Zg);var v=.5*e.distanceTo(n),g=-this.direction.dot(ry),A=Kl.dot(this.direction),y=-Kl.dot(ry),T=Kl.lengthSq(),D=Math.abs(1-g*g);if(0<D){e=g*y-A,n=g*A-y;var X=v*D;0<=e?n>=-X?n<=X?(v=1/D,e*=v,n*=v,g=e*(e+g*n+2*A)+n*(g*e+n+2*y)+T):(n=v,e=Math.max(0,-(g*n+A)),g=-e*e+n*(n+2*y)+T):(n=-v,e=Math.max(0,-(g*n+A)),g=-e*e+n*(n+2*y)+T):n<=-X?(e=Math.max(0,-(-g*v+A)),n=0<e?-v:Math.min(Math.max(-v,-y),v),g=-e*e+n*(n+2*y)+T):n<=X?(e=0,n=Math.min(Math.max(-v,-y),v),g=n*(n+2*y)+T):(e=Math.max(0,-(g*v+A)),n=0<e?v:Math.min(Math.max(-v,-y),v),g=-e*e+n*(n+2*y)+T)}else n=0<g?-v:v,e=Math.max(0,-(g*n+A)),g=-e*e+n*(n+2*y)+T;return o&&o.copy(this.direction).multiplyScalar(e).add(this.origin),c&&c.copy(ry).multiplyScalar(n).add(Zg),g},intersectSphere:function(e,n){ho.subVectors(e.center,this.origin);var o=ho.dot(this.direction),c=ho.dot(ho)-o*o;return e=e.radius*e.radius,c>e?null:(e=Math.sqrt(e-c),c=o-e,o+=e,0>c&&0>o?null:0>c?this.at(o,n):this.at(c,n))},intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var n=e.normal.dot(this.direction);return n===0?e.distanceToPoint(this.origin)===0?0:null:(e=-(this.origin.dot(e.normal)+e.constant)/n,0<=e?e:null)},intersectPlane:function(e,n){return e=this.distanceToPlane(e),e===null?null:this.at(e,n)},intersectsPlane:function(e){var n=e.distanceToPoint(this.origin);return n===0||0>e.normal.dot(this.direction)*n},intersectBox:function(e,n){var o=1/this.direction.x,c=1/this.direction.y,v=1/this.direction.z,g=this.origin;if(0<=o){var A=(e.min.x-g.x)*o;o*=e.max.x-g.x}else A=(e.max.x-g.x)*o,o*=e.min.x-g.x;if(0<=c){var y=(e.min.y-g.y)*c;c*=e.max.y-g.y}else y=(e.max.y-g.y)*c,c*=e.min.y-g.y;return A>c||y>o||((y>A||A!==A)&&(A=y),(c<o||o!==o)&&(o=c),0<=v?(y=(e.min.z-g.z)*v,e=(e.max.z-g.z)*v):(y=(e.max.z-g.z)*v,e=(e.min.z-g.z)*v),A>e||y>o)?null:((y>A||A!==A)&&(A=y),(e<o||o!==o)&&(o=e),0>o?null:this.at(0<=A?A:o,n))},intersectsBox:function(e){return this.intersectBox(e,ho)!==null},intersectTriangle:function(e,n,o,c,v){if(CI.subVectors(n,e),F_.subVectors(o,e),_I.crossVectors(CI,F_),n=this.direction.dot(_I),0<n){if(c)return null;c=1}else if(0>n)c=-1,n=-n;else return null;return Kl.subVectors(this.origin,e),e=c*this.direction.dot(F_.crossVectors(Kl,F_)),0>e||(o=c*this.direction.dot(CI.cross(Kl)),0>o||e+o>n)?null:(e=-c*Kl.dot(_I),0>e?null:this.at(e/n,v))},applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});var MI=new oe,pG=new oe,mG=new W;Pe(Xe.prototype,{isPlane:!0,set:function(e,n){return this.normal.copy(e),this.constant=n,this},setComponents:function(e,n,o,c){return this.normal.set(e,n,o),this.constant=c,this},setFromNormalAndCoplanarPoint:function(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this},setFromCoplanarPoints:function(e,n,o){return n=MI.subVectors(o,n).cross(pG.subVectors(e,n)).normalize(),this.setFromNormalAndCoplanarPoint(n,e),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,n){return n===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),n=new oe),n.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(e,n){n===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new oe);var o=e.delta(MI),c=this.normal.dot(o);if(c===0){if(this.distanceToPoint(e.start)===0)return n.copy(e.start)}else if(c=-(e.start.dot(this.normal)+this.constant)/c,!(0>c||1<c))return n.copy(o).multiplyScalar(c).add(e.start)},intersectsLine:function(e){var n=this.distanceToPoint(e.start);return e=this.distanceToPoint(e.end),0>n&&0<e||0>e&&0<n},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return e===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new oe),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(e,n){return n=n||mG.getNormalMatrix(e),e=this.coplanarPoint(MI).applyMatrix4(e),n=this.normal.applyMatrix3(n).normalize(),this.constant=-e.dot(n),this},translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});var $c=new oe,hd=new oe,SI=new oe,fd=new oe,ny=new oe,iy=new oe,rb=new oe,TI=new oe,EI=new oe,II=new oe;Pe(et,{getNormal:function(e,n,o,c){return c===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),c=new oe),c.subVectors(o,n),$c.subVectors(e,n),c.cross($c),e=c.lengthSq(),0<e?c.multiplyScalar(1/Math.sqrt(e)):c.set(0,0,0)},getBarycoord:function(e,n,o,c,v){$c.subVectors(c,n),hd.subVectors(o,n),SI.subVectors(e,n),e=$c.dot($c),n=$c.dot(hd),o=$c.dot(SI);var g=hd.dot(hd);c=hd.dot(SI);var A=e*g-n*n;return v===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),v=new oe),A===0?v.set(-2,-1,-1):(A=1/A,g=(g*o-n*c)*A,e=(e*c-n*o)*A,v.set(1-g-e,e,g))},containsPoint:function(e,n,o,c){return et.getBarycoord(e,n,o,c,fd),0<=fd.x&&0<=fd.y&&1>=fd.x+fd.y},getUV:function(e,n,o,c,v,g,A,y){return this.getBarycoord(e,n,o,c,fd),y.set(0,0),y.addScaledVector(v,fd.x),y.addScaledVector(g,fd.y),y.addScaledVector(A,fd.z),y},isFrontFacing:function(e,n,o,c){return $c.subVectors(o,n),hd.subVectors(e,n),0>$c.cross(hd).dot(c)}}),Pe(et.prototype,{set:function(e,n,o){return this.a.copy(e),this.b.copy(n),this.c.copy(o),this},setFromPointsAndIndices:function(e,n,o,c){return this.a.copy(e[n]),this.b.copy(e[o]),this.c.copy(e[c]),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){return $c.subVectors(this.c,this.b),hd.subVectors(this.a,this.b),.5*$c.cross(hd).length()},getMidpoint:function(e){return e===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new oe),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return et.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return e===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Xe),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,n){return et.getBarycoord(e,this.a,this.b,this.c,n)},getUV:function(e,n,o,c,v){return et.getUV(e,this.a,this.b,this.c,n,o,c,v)},containsPoint:function(e){return et.containsPoint(e,this.a,this.b,this.c)},isFrontFacing:function(e){return et.isFrontFacing(this.a,this.b,this.c,e)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(e,n){n===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),n=new oe);var o=this.a,c=this.b,v=this.c;ny.subVectors(c,o),iy.subVectors(v,o),TI.subVectors(e,o);var g=ny.dot(TI),A=iy.dot(TI);if(0>=g&&0>=A)return n.copy(o);EI.subVectors(e,c);var y=ny.dot(EI),T=iy.dot(EI);if(0<=y&&T<=y)return n.copy(c);var D=g*T-y*A;if(0>=D&&0<=g&&0>=y)return c=g/(g-y),n.copy(o).addScaledVector(ny,c);II.subVectors(e,v),e=ny.dot(II);var X=iy.dot(II);return 0<=X&&e<=X?n.copy(v):(g=e*A-g*X,0>=g&&0<=A&&0>=X?(D=A/(A-X),n.copy(o).addScaledVector(iy,D)):(A=y*X-e*T,0>=A&&0<=T-y&&0<=e-X?(rb.subVectors(v,c),D=(T-y)/(T-y+(e-X)),n.copy(c).addScaledVector(rb,D)):(v=1/(A+g+D),c=g*v,D*=v,n.copy(o).addScaledVector(ny,c).addScaledVector(iy,D))))},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});var nb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},eh={h:0,s:0,l:0},N_={h:0,s:0,l:0};Pe(Ye.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this},setScalar:function(e){return this.b=this.g=this.r=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this},setRGB:function(e,n,o){return this.r=e,this.g=n,this.b=o,this},setHSL:function(e,n,o){return e=ai.euclideanModulo(e,1),n=ai.clamp(n,0,1),o=ai.clamp(o,0,1),n===0?this.r=this.g=this.b=o:(n=.5>=o?o*(1+n):o+n-o*n,o=2*o-n,this.r=at(o,n,e+1/3),this.g=at(o,n,e),this.b=at(o,n,e-1/3)),this},setStyle:function(e){function n(A){A!==void 0&&1>parseFloat(A)&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var o;if(o=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var c=o[2];switch(o[1]){case"rgb":case"rgba":if(o=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(c))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,n(o[5]),this;if(o=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(c))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,n(o[5]),this;break;case"hsl":case"hsla":if(o=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(c)){c=parseFloat(o[1])/360;var v=parseInt(o[2],10)/100,g=parseInt(o[3],10)/100;return n(o[5]),this.setHSL(c,v,g)}}}else if(o=/^#([A-Fa-f0-9]+)$/.exec(e)){if(o=o[1],c=o.length,c===3)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,this;if(c===6)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,this}return e&&0<e.length?this.setColorName(e):this},setColorName:function(e){var n=nb[e];return n!==void 0?this.setHex(n):console.warn("THREE.Color: Unknown color "+e),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,n){return n===void 0&&(n=2),this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},copyLinearToGamma:function(e,n){return n===void 0&&(n=2),n=0<n?1/n:1,this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(e){return this.r=ot(e.r),this.g=ot(e.g),this.b=ot(e.b),this},copyLinearToSRGB:function(e){return this.r=ct(e.r),this.g=ct(e.g),this.b=ct(e.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){e===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var n=this.r,o=this.g,c=this.b,v=Math.max(n,o,c),g=Math.min(n,o,c),A,y=(g+v)/2;if(g===v)g=A=0;else{var T=v-g;switch(g=.5>=y?T/(v+g):T/(2-v-g),v){case n:A=(o-c)/T+(o<c?6:0);break;case o:A=(c-n)/T+2;break;case c:A=(n-o)/T+4}A/=6}return e.h=A,e.s=g,e.l=y,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,n,o){return this.getHSL(eh),eh.h+=e,eh.s+=n,eh.l+=o,this.setHSL(eh.h,eh.s,eh.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this},lerpHSL:function(e,n){this.getHSL(eh),e.getHSL(N_),e=ai.lerp(eh.h,N_.h,n);var o=ai.lerp(eh.s,N_.s,n);return n=ai.lerp(eh.l,N_.l,n),this.setHSL(e,o,n),this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,n){return n===void 0&&(n=0),this.r=e[n],this.g=e[n+1],this.b=e[n+2],this},toArray:function(e,n){return e===void 0&&(e=[]),n===void 0&&(n=0),e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e},toJSON:function(){return this.getHex()}}),Ye.NAMES=nb,Pe(Dt.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var n=0,o=e.vertexNormals.length;n<o;n++)this.vertexNormals[n]=e.vertexNormals[n].clone();for(n=0,o=e.vertexColors.length;n<o;n++)this.vertexColors[n]=e.vertexColors[n].clone();return this}});var gG=0;$e.prototype=Pe(Le(z.prototype),{constructor:$e,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(e!==void 0)for(var n in e){var o=e[n];if(o===void 0)console.warn("THREE.Material: '"+n+"' parameter is undefined.");else if(n==="shading")console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=o===1;else{var c=this[n];c===void 0?console.warn("THREE."+this.type+": '"+n+"' is not a property of this material."):c&&c.isColor?c.set(o):c&&c.isVector3&&o&&o.isVector3?c.copy(o):this[n]=o}}},toJSON:function(e){function n(v){var g=[],A;for(A in v){var y=v[A];delete y.metadata,g.push(y)}return g}var o=e===void 0||typeof e=="string";o&&(e={textures:{},images:{}});var c={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};return c.uuid=this.uuid,c.type=this.type,this.name!==""&&(c.name=this.name),this.color&&this.color.isColor&&(c.color=this.color.getHex()),this.roughness!==void 0&&(c.roughness=this.roughness),this.metalness!==void 0&&(c.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(c.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(c.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(c.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(c.specular=this.specular.getHex()),this.shininess!==void 0&&(c.shininess=this.shininess),this.clearcoat!==void 0&&(c.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(c.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(c.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(c.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(c.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,c.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(c.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(c.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(c.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(c.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(c.aoMap=this.aoMap.toJSON(e).uuid,c.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(c.bumpMap=this.bumpMap.toJSON(e).uuid,c.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(c.normalMap=this.normalMap.toJSON(e).uuid,c.normalMapType=this.normalMapType,c.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(c.displacementMap=this.displacementMap.toJSON(e).uuid,c.displacementScale=this.displacementScale,c.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(c.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(c.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(c.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(c.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(c.envMap=this.envMap.toJSON(e).uuid,c.reflectivity=this.reflectivity,c.refractionRatio=this.refractionRatio,this.combine!==void 0&&(c.combine=this.combine),this.envMapIntensity!==void 0&&(c.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(c.gradientMap=this.gradientMap.toJSON(e).uuid),this.size!==void 0&&(c.size=this.size),this.sizeAttenuation!==void 0&&(c.sizeAttenuation=this.sizeAttenuation),this.blending!==1&&(c.blending=this.blending),this.flatShading===!0&&(c.flatShading=this.flatShading),this.side!==0&&(c.side=this.side),this.vertexColors&&(c.vertexColors=!0),1>this.opacity&&(c.opacity=this.opacity),this.transparent===!0&&(c.transparent=this.transparent),c.depthFunc=this.depthFunc,c.depthTest=this.depthTest,c.depthWrite=this.depthWrite,c.stencilWrite=this.stencilWrite,c.stencilWriteMask=this.stencilWriteMask,c.stencilFunc=this.stencilFunc,c.stencilRef=this.stencilRef,c.stencilFuncMask=this.stencilFuncMask,c.stencilFail=this.stencilFail,c.stencilZFail=this.stencilZFail,c.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(c.rotation=this.rotation),this.polygonOffset===!0&&(c.polygonOffset=!0),this.polygonOffsetFactor!==0&&(c.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(c.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(c.linewidth=this.linewidth),this.dashSize!==void 0&&(c.dashSize=this.dashSize),this.gapSize!==void 0&&(c.gapSize=this.gapSize),this.scale!==void 0&&(c.scale=this.scale),this.dithering===!0&&(c.dithering=!0),0<this.alphaTest&&(c.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(c.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(c.wireframe=this.wireframe),1<this.wireframeLinewidth&&(c.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(c.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(c.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(c.morphTargets=!0),this.morphNormals===!0&&(c.morphNormals=!0),this.skinning===!0&&(c.skinning=!0),this.visible===!1&&(c.visible=!1),this.toneMapped===!1&&(c.toneMapped=!1),yu(this.userData)!=="{}"&&(c.userData=this.userData),o&&(o=n(e.textures),e=n(e.images),0<o.length&&(c.textures=o),0<e.length&&(c.images=e)),c},clone:function(){return new this.constructor().copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var n=e.clippingPlanes,o=null;if(n!==null){var c=n.length;o=Array(c);for(var v=0;v!==c;++v)o[v]=n[v].clone()}return this.clippingPlanes=o,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(yu(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty($e.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}}),tt.prototype=Le($e.prototype),tt.prototype.constructor=tt,tt.prototype.isMeshBasicMaterial=!0,tt.prototype.copy=function(e){return $e.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};var _o=new oe;Object.defineProperty(Ve.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}}),Pe(Ve.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,n,o){e*=this.itemSize,o*=n.itemSize;for(var c=0,v=this.itemSize;c<v;c++)this.array[e+c]=n.array[o+c];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var n=this.array,o=0,c=0,v=e.length;c<v;c++){var g=e[c];g===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",c),g=new Ye),n[o++]=g.r,n[o++]=g.g,n[o++]=g.b}return this},copyVector2sArray:function(e){for(var n=this.array,o=0,c=0,v=e.length;c<v;c++){var g=e[c];g===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",c),g=new U),n[o++]=g.x,n[o++]=g.y}return this},copyVector3sArray:function(e){for(var n=this.array,o=0,c=0,v=e.length;c<v;c++){var g=e[c];g===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",c),g=new oe),n[o++]=g.x,n[o++]=g.y,n[o++]=g.z}return this},copyVector4sArray:function(e){for(var n=this.array,o=0,c=0,v=e.length;c<v;c++){var g=e[c];g===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",c),g=new te),n[o++]=g.x,n[o++]=g.y,n[o++]=g.z,n[o++]=g.w}return this},applyMatrix3:function(e){for(var n=0,o=this.count;n<o;n++)_o.x=this.getX(n),_o.y=this.getY(n),_o.z=this.getZ(n),_o.applyMatrix3(e),this.setXYZ(n,_o.x,_o.y,_o.z);return this},applyMatrix4:function(e){for(var n=0,o=this.count;n<o;n++)_o.x=this.getX(n),_o.y=this.getY(n),_o.z=this.getZ(n),_o.applyMatrix4(e),this.setXYZ(n,_o.x,_o.y,_o.z);return this},applyNormalMatrix:function(e){for(var n=0,o=this.count;n<o;n++)_o.x=this.getX(n),_o.y=this.getY(n),_o.z=this.getZ(n),_o.applyNormalMatrix(e),this.setXYZ(n,_o.x,_o.y,_o.z);return this},transformDirection:function(e){for(var n=0,o=this.count;n<o;n++)_o.x=this.getX(n),_o.y=this.getY(n),_o.z=this.getZ(n),_o.transformDirection(e),this.setXYZ(n,_o.x,_o.y,_o.z);return this},set:function(e,n){return n===void 0&&(n=0),this.array.set(e,n),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,n){return this.array[e*this.itemSize]=n,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,n){return this.array[e*this.itemSize+1]=n,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,n){return this.array[e*this.itemSize+2]=n,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,n){return this.array[e*this.itemSize+3]=n,this},setXY:function(e,n,o){return e*=this.itemSize,this.array[e+0]=n,this.array[e+1]=o,this},setXYZ:function(e,n,o,c){return e*=this.itemSize,this.array[e+0]=n,this.array[e+1]=o,this.array[e+2]=c,this},setXYZW:function(e,n,o,c,v){return e*=this.itemSize,this.array[e+0]=n,this.array[e+1]=o,this.array[e+2]=c,this.array[e+3]=v,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),gt.prototype=Le(Ve.prototype),gt.prototype.constructor=gt,mt.prototype=Le(Ve.prototype),mt.prototype.constructor=mt,dt.prototype=Le(Ve.prototype),dt.prototype.constructor=dt,At.prototype=Le(Ve.prototype),At.prototype.constructor=At,jt.prototype=Le(Ve.prototype),jt.prototype.constructor=jt,ar.prototype=Le(Ve.prototype),ar.prototype.constructor=ar,Ht.prototype=Le(Ve.prototype),Ht.prototype.constructor=Ht,Rt.prototype=Le(Ve.prototype),Rt.prototype.constructor=Rt,pr.prototype=Le(Ve.prototype),pr.prototype.constructor=pr,Pe(Cr.prototype,{computeGroups:function(e){var n=[],o=void 0;e=e.faces;for(var c=0;c<e.length;c++){var v=e[c];if(v.materialIndex!==o){o=v.materialIndex,g!==void 0&&(g.count=3*c-g.start,n.push(g));var g={start:3*c,materialIndex:o}}}g!==void 0&&(g.count=3*c-g.start,n.push(g)),this.groups=n},fromGeometry:function(e){var n=e.faces,o=e.vertices,c=e.faceVertexUvs,v=c[0]&&0<c[0].length,g=c[1]&&0<c[1].length,A=e.morphTargets,y=A.length;if(0<y){for(var T=[],D=0;D<y;D++)T[D]={name:A[D].name,data:[]};this.morphTargets.position=T}var X=e.morphNormals,I=X.length;if(0<I){var b=[];for(D=0;D<I;D++)b[D]={name:X[D].name,data:[]};this.morphTargets.normal=b}var N=e.skinIndices,k=e.skinWeights,G=N.length===o.length,re=k.length===o.length;for(0<o.length&&n.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),D=0;D<n.length;D++){var se=n[D];this.vertices.push(o[se.a],o[se.b],o[se.c]);var ue=se.vertexNormals;for(ue.length===3?this.normals.push(ue[0],ue[1],ue[2]):(ue=se.normal,this.normals.push(ue,ue,ue)),ue=se.vertexColors,ue.length===3?this.colors.push(ue[0],ue[1],ue[2]):(ue=se.color,this.colors.push(ue,ue,ue)),v===!0&&(ue=c[0][D],ue!==void 0?this.uvs.push(ue[0],ue[1],ue[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",D),this.uvs.push(new U,new U,new U))),g===!0&&(ue=c[1][D],ue!==void 0?this.uvs2.push(ue[0],ue[1],ue[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",D),this.uvs2.push(new U,new U,new U))),ue=0;ue<y;ue++){var we=A[ue].vertices;T[ue].data.push(we[se.a],we[se.b],we[se.c])}for(ue=0;ue<I;ue++)we=X[ue].vertexNormals[D],b[ue].data.push(we.a,we.b,we.c);G&&this.skinIndices.push(N[se.a],N[se.b],N[se.c]),re&&this.skinWeights.push(k[se.a],k[se.b],k[se.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}});var vG=1,uf=new me,RI=new ce,oy=new oe,xu=new Re,V2=new Re,Ga=new oe;Ut.prototype=Pe(Le(z.prototype),{constructor:Ut,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(65535<Ir(e)?Ht:jt)(e,1):this.index=e},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,n){return this.attributes[e]=n,this},deleteAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,n,o){this.groups.push({start:e,count:n,materialIndex:o!==void 0?o:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,n){this.drawRange.start=e,this.drawRange.count=n},applyMatrix4:function(e){var n=this.attributes.position;if(n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0),n=this.attributes.normal,n!==void 0){var o=new W().getNormalMatrix(e);n.applyNormalMatrix(o),n.needsUpdate=!0}return n=this.attributes.tangent,n!==void 0&&(n.transformDirection(e),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(e){return uf.makeRotationX(e),this.applyMatrix4(uf),this},rotateY:function(e){return uf.makeRotationY(e),this.applyMatrix4(uf),this},rotateZ:function(e){return uf.makeRotationZ(e),this.applyMatrix4(uf),this},translate:function(e,n,o){return uf.makeTranslation(e,n,o),this.applyMatrix4(uf),this},scale:function(e,n,o){return uf.makeScale(e,n,o),this.applyMatrix4(uf),this},lookAt:function(e){return RI.lookAt(e),RI.updateMatrix(),this.applyMatrix4(RI.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(oy).negate(),this.translate(oy.x,oy.y,oy.z),this},setFromObject:function(e){var n=e.geometry;if(e.isPoints||e.isLine){e=new Rt(3*n.vertices.length,3);var o=new Rt(3*n.colors.length,3);this.setAttribute("position",e.copyVector3sArray(n.vertices)),this.setAttribute("color",o.copyColorsArray(n.colors)),n.lineDistances&&n.lineDistances.length===n.vertices.length&&(e=new Rt(n.lineDistances.length,1),this.setAttribute("lineDistance",e.copyArray(n.lineDistances))),n.boundingSphere!==null&&(this.boundingSphere=n.boundingSphere.clone()),n.boundingBox!==null&&(this.boundingBox=n.boundingBox.clone())}else e.isMesh&&n&&n.isGeometry&&this.fromGeometry(n);return this},setFromPoints:function(e){for(var n=[],o=0,c=e.length;o<c;o++){var v=e[o];n.push(v.x,v.y,v.z||0)}return this.setAttribute("position",new Rt(n,3)),this},updateFromObject:function(e){var n=e.geometry;if(e.isMesh){var o=n.__directGeometry;if(n.elementsNeedUpdate===!0&&(o=void 0,n.elementsNeedUpdate=!1),o===void 0)return this.fromGeometry(n);o.verticesNeedUpdate=n.verticesNeedUpdate,o.normalsNeedUpdate=n.normalsNeedUpdate,o.colorsNeedUpdate=n.colorsNeedUpdate,o.uvsNeedUpdate=n.uvsNeedUpdate,o.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=o}return n.verticesNeedUpdate===!0&&(o=this.attributes.position,o!==void 0&&(o.copyVector3sArray(n.vertices),o.needsUpdate=!0),n.verticesNeedUpdate=!1),n.normalsNeedUpdate===!0&&(o=this.attributes.normal,o!==void 0&&(o.copyVector3sArray(n.normals),o.needsUpdate=!0),n.normalsNeedUpdate=!1),n.colorsNeedUpdate===!0&&(o=this.attributes.color,o!==void 0&&(o.copyColorsArray(n.colors),o.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(o=this.attributes.uv,o!==void 0&&(o.copyVector2sArray(n.uvs),o.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(o=this.attributes.lineDistance,o!==void 0&&(o.copyArray(n.lineDistances),o.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=new Cr().fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var n=new Float32Array(3*e.vertices.length);this.setAttribute("position",new Ve(n,3).copyVector3sArray(e.vertices)),0<e.normals.length&&(n=new Float32Array(3*e.normals.length),this.setAttribute("normal",new Ve(n,3).copyVector3sArray(e.normals))),0<e.colors.length&&(n=new Float32Array(3*e.colors.length),this.setAttribute("color",new Ve(n,3).copyColorsArray(e.colors))),0<e.uvs.length&&(n=new Float32Array(2*e.uvs.length),this.setAttribute("uv",new Ve(n,2).copyVector2sArray(e.uvs))),0<e.uvs2.length&&(n=new Float32Array(2*e.uvs2.length),this.setAttribute("uv2",new Ve(n,2).copyVector2sArray(e.uvs2))),this.groups=e.groups;for(var o in e.morphTargets){n=[];for(var c=e.morphTargets[o],v=0,g=c.length;v<g;v++){var A=c[v],y=new Rt(3*A.data.length,3);y.name=A.name,n.push(y.copyVector3sArray(A.data))}this.morphAttributes[o]=n}return 0<e.skinIndices.length&&(o=new Rt(4*e.skinIndices.length,4),this.setAttribute("skinIndex",o.copyVector4sArray(e.skinIndices))),0<e.skinWeights.length&&(o=new Rt(4*e.skinWeights.length,4),this.setAttribute("skinWeight",o.copyVector4sArray(e.skinWeights))),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Re);var e=this.attributes.position,n=this.morphAttributes.position;if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n){e=0;for(var o=n.length;e<o;e++)xu.setFromBufferAttribute(n[e]),this.morphTargetsRelative?(Ga.addVectors(this.boundingBox.min,xu.min),this.boundingBox.expandByPoint(Ga),Ga.addVectors(this.boundingBox.max,xu.max),this.boundingBox.expandByPoint(Ga)):(this.boundingBox.expandByPoint(xu.min),this.boundingBox.expandByPoint(xu.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new De);var e=this.attributes.position,n=this.morphAttributes.position;if(e){var o=this.boundingSphere.center;if(xu.setFromBufferAttribute(e),n)for(var c=0,v=n.length;c<v;c++){var g=n[c];V2.setFromBufferAttribute(g),this.morphTargetsRelative?(Ga.addVectors(xu.min,V2.min),xu.expandByPoint(Ga),Ga.addVectors(xu.max,V2.max),xu.expandByPoint(Ga)):(xu.expandByPoint(V2.min),xu.expandByPoint(V2.max))}xu.getCenter(o);var A=0;for(c=0,v=e.count;c<v;c++)Ga.fromBufferAttribute(e,c),A=Math.max(A,o.distanceToSquared(Ga));if(n)for(c=0,v=n.length;c<v;c++){g=n[c];for(var y=this.morphTargetsRelative,T=0,D=g.count;T<D;T++)Ga.fromBufferAttribute(g,T),y&&(oy.fromBufferAttribute(e,T),Ga.add(oy)),A=Math.max(A,o.distanceToSquared(Ga))}this.boundingSphere.radius=Math.sqrt(A),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,n=this.attributes;if(n.position){var o=n.position.array;if(n.normal===void 0)this.setAttribute("normal",new Ve(new Float32Array(o.length),3));else for(var c=n.normal.array,v=0,g=c.length;v<g;v++)c[v]=0;c=n.normal.array;var A=new oe,y=new oe,T=new oe,D=new oe,X=new oe;if(e){var I=e.array;for(v=0,g=e.count;v<g;v+=3){e=3*I[v+0];var b=3*I[v+1],N=3*I[v+2];A.fromArray(o,e),y.fromArray(o,b),T.fromArray(o,N),D.subVectors(T,y),X.subVectors(A,y),D.cross(X),c[e]+=D.x,c[e+1]+=D.y,c[e+2]+=D.z,c[b]+=D.x,c[b+1]+=D.y,c[b+2]+=D.z,c[N]+=D.x,c[N+1]+=D.y,c[N+2]+=D.z}}else for(v=0,g=o.length;v<g;v+=9)A.fromArray(o,v),y.fromArray(o,v+3),T.fromArray(o,v+6),D.subVectors(T,y),X.subVectors(A,y),D.cross(X),c[v]=D.x,c[v+1]=D.y,c[v+2]=D.z,c[v+3]=D.x,c[v+4]=D.y,c[v+5]=D.z,c[v+6]=D.x,c[v+7]=D.y,c[v+8]=D.z;this.normalizeNormals(),n.normal.needsUpdate=!0}},merge:function(e,n){if(e&&e.isBufferGeometry){n===void 0&&(n=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var o=this.attributes,c;for(c in o)if(e.attributes[c]!==void 0){var v=o[c].array,g=e.attributes[c],A=g.array,y=g.itemSize*n;g=Math.min(A.length,v.length-y);for(var T=0;T<g;T++,y++)v[y]=A[T]}return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){for(var e=this.attributes.normal,n=0,o=e.count;n<o;n++)Ga.x=e.getX(n),Ga.y=e.getY(n),Ga.z=e.getZ(n),Ga.normalize(),e.setXYZ(n,Ga.x,Ga.y,Ga.z)},toNonIndexed:function(){function e(X,I){var b=X.array,N=X.itemSize;X=X.normalized;for(var k=new b.constructor(I.length*N),G,re=0,se=0,ue=I.length;se<ue;se++){G=I[se]*N;for(var we=0;we<N;we++)k[re++]=b[G++]}return new Ve(k,N,X)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var n=new Ut,o=this.index.array,c=this.attributes,v;for(v in c){var g=c[v];g=e(g,o),n.setAttribute(v,g)}var A=this.morphAttributes;for(v in A){var y=[],T=A[v];c=0;for(var D=T.length;c<D;c++)g=T[c],g=e(g,o),y.push(g);n.morphAttributes[v]=y}for(n.morphTargetsRelative=this.morphTargetsRelative,o=this.groups,c=0,v=o.length;c<v;c++)g=o[c],n.addGroup(g.start,g.count,g.materialIndex);return n},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),0<Hi(this.userData).length&&(e.userData=this.userData),this.parameters!==void 0){var n=this.parameters;for(D in n)n[D]!==void 0&&(e[D]=n[D]);return e}e.data={attributes:{}},n=this.index,n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});var o=this.attributes;for(D in o){n=o[D];var c=n.toJSON();n.name!==""&&(c.name=n.name),e.data.attributes[D]=c}o={};var v=!1;for(D in this.morphAttributes){for(var g=this.morphAttributes[D],A=[],y=0,T=g.length;y<T;y++)n=g[y],c=n.toJSON(),n.name!==""&&(c.name=n.name),A.push(c);0<A.length&&(o[D]=A,v=!0)}v&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);var D=this.groups;return 0<D.length&&(e.data.groups=JSON.parse(yu(D))),D=this.boundingSphere,D!==null&&(e.data.boundingSphere={center:D.center.toArray(),radius:D.radius}),e},clone:function(){return new Ut().copy(this)},copy:function(e){var n;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.name=e.name;var o=e.index;o!==null&&this.setIndex(o.clone()),o=e.attributes;for(A in o)this.setAttribute(A,o[A].clone());var c=e.morphAttributes;for(A in c){var v=[],g=c[A];for(o=0,n=g.length;o<n;o++)v.push(g[o].clone());this.morphAttributes[A]=v}this.morphTargetsRelative=e.morphTargetsRelative;var A=e.groups;for(o=0,n=A.length;o<n;o++)c=A[o],this.addGroup(c.start,c.count,c.materialIndex);return A=e.boundingBox,A!==null&&(this.boundingBox=A.clone()),A=e.boundingSphere,A!==null&&(this.boundingSphere=A.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var ib=new me,qg=new We,LI=new De,Hp=new oe,jp=new oe,Gp=new oe,PI=new oe,OI=new oe,DI=new oe,B_=new oe,z_=new oe,U_=new oe,ay=new U,sy=new U,ly=new U,W2=new oe,k_=new oe;_r.prototype=Pe(Le(ce.prototype),{constructor:_r,isMesh:!0,copy:function(e){return ce.prototype.copy.call(this,e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Pe({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){e=e.morphAttributes;var n=Hi(e);if(0<n.length){var o=e[n[0]];if(o!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,n=o.length;e<n;e++){var c=o[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=e}}}else e=e.morphTargets,e!==void 0&&0<e.length&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},raycast:function(e,n){var o=this.geometry,c=this.material,v=this.matrixWorld;if(c!==void 0&&(o.boundingSphere===null&&o.computeBoundingSphere(),LI.copy(o.boundingSphere),LI.applyMatrix4(v),e.ray.intersectsSphere(LI)!==!1&&(ib.getInverse(v),qg.copy(e.ray).applyMatrix4(ib),o.boundingBox===null||qg.intersectsBox(o.boundingBox)!==!1))){if(o.isBufferGeometry){var g=o.index;v=o.attributes.position;var A=o.morphAttributes.position,y=o.morphTargetsRelative,T=o.attributes.uv,D=o.attributes.uv2,X=o.groups,I=o.drawRange,b,N;if(g!==null)if(Array.isArray(c)){var k=0;for(b=X.length;k<b;k++){var G=X[k],re=c[G.materialIndex],se=Math.max(G.start,I.start);for(N=o=Math.min(G.start+G.count,I.start+I.count);se<N;se+=3){o=g.getX(se);var ue=g.getX(se+1),we=g.getX(se+2);(o=bn(this,re,e,qg,v,A,y,T,D,o,ue,we))&&(o.faceIndex=Math.floor(se/3),o.face.materialIndex=G.materialIndex,n.push(o))}}}else for(se=Math.max(0,I.start),o=Math.min(g.count,I.start+I.count),k=se,b=o;k<b;k+=3)o=g.getX(k),ue=g.getX(k+1),we=g.getX(k+2),(o=bn(this,c,e,qg,v,A,y,T,D,o,ue,we))&&(o.faceIndex=Math.floor(k/3),n.push(o));else if(v!==void 0)if(Array.isArray(c))for(k=0,b=X.length;k<b;k++)for(G=X[k],re=c[G.materialIndex],se=Math.max(G.start,I.start),N=o=Math.min(G.start+G.count,I.start+I.count);se<N;se+=3)o=se,ue=se+1,we=se+2,(o=bn(this,re,e,qg,v,A,y,T,D,o,ue,we))&&(o.faceIndex=Math.floor(se/3),o.face.materialIndex=G.materialIndex,n.push(o));else for(se=Math.max(0,I.start),o=Math.min(v.count,I.start+I.count),k=se,b=o;k<b;k+=3)o=k,ue=k+1,we=k+2,(o=bn(this,c,e,qg,v,A,y,T,D,o,ue,we))&&(o.faceIndex=Math.floor(k/3),n.push(o))}else if(o.isGeometry)for(v=Array.isArray(c),A=o.vertices,y=o.faces,o=o.faceVertexUvs[0],0<o.length&&(g=o),I=0,k=y.length;I<k;I++)b=y[I],o=v?c[b.materialIndex]:c,o!==void 0&&(T=A[b.a],D=A[b.b],X=A[b.c],o=Bn(this,o,e,qg,T,D,X,W2))&&(g&&g[I]&&(G=g[I],ay.copy(G[0]),sy.copy(G[1]),ly.copy(G[2]),o.uv=et.getUV(W2,T,D,X,ay,sy,ly,new U)),o.face=b,o.faceIndex=I,n.push(o))}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var yG=0,cf=new me,bI=new ce,H_=new oe;ur.prototype=Pe(Le(z.prototype),{constructor:ur,isGeometry:!0,applyMatrix4:function(e){for(var n=new W().getNormalMatrix(e),o=0,c=this.vertices.length;o<c;o++)this.vertices[o].applyMatrix4(e);for(o=0,c=this.faces.length;o<c;o++){e=this.faces[o],e.normal.applyMatrix3(n).normalize();for(var v=0,g=e.vertexNormals.length;v<g;v++)e.vertexNormals[v].applyMatrix3(n).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.normalsNeedUpdate=this.verticesNeedUpdate=!0,this},rotateX:function(e){return cf.makeRotationX(e),this.applyMatrix4(cf),this},rotateY:function(e){return cf.makeRotationY(e),this.applyMatrix4(cf),this},rotateZ:function(e){return cf.makeRotationZ(e),this.applyMatrix4(cf),this},translate:function(e,n,o){return cf.makeTranslation(e,n,o),this.applyMatrix4(cf),this},scale:function(e,n,o){return cf.makeScale(e,n,o),this.applyMatrix4(cf),this},lookAt:function(e){return bI.lookAt(e),bI.updateMatrix(),this.applyMatrix4(bI.matrix),this},fromBufferGeometry:function(e){function n(N,k,G,re){var se=y===void 0?[]:[o.colors[N].clone(),o.colors[k].clone(),o.colors[G].clone()],ue=A===void 0?[]:[new oe().fromArray(A,3*N),new oe().fromArray(A,3*k),new oe().fromArray(A,3*G)];re=new Dt(N,k,G,ue,se,re),o.faces.push(re),T!==void 0&&o.faceVertexUvs[0].push([new U().fromArray(T,2*N),new U().fromArray(T,2*k),new U().fromArray(T,2*G)]),D!==void 0&&o.faceVertexUvs[1].push([new U().fromArray(D,2*N),new U().fromArray(D,2*k),new U().fromArray(D,2*G)])}var o=this,c=e.index!==null?e.index.array:void 0,v=e.attributes;if(v.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var g=v.position.array,A=v.normal!==void 0?v.normal.array:void 0,y=v.color!==void 0?v.color.array:void 0,T=v.uv!==void 0?v.uv.array:void 0,D=v.uv2!==void 0?v.uv2.array:void 0;for(D!==void 0&&(this.faceVertexUvs[1]=[]),v=0;v<g.length;v+=3)o.vertices.push(new oe().fromArray(g,v)),y!==void 0&&o.colors.push(new Ye().fromArray(y,v));var X=e.groups;if(0<X.length)for(v=0;v<X.length;v++){g=X[v];var I=g.start,b=I;for(I+=g.count;b<I;b+=3)c!==void 0?n(c[b],c[b+1],c[b+2],g.materialIndex):n(b,b+1,b+2,g.materialIndex)}else if(c!==void 0)for(v=0;v<c.length;v+=3)n(c[v],c[v+1],c[v+2]);else for(v=0;v<g.length/3;v+=3)n(v,v+1,v+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(H_).negate(),this.translate(H_.x,H_.y,H_.z),this},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,n=this.boundingSphere.radius;n=n===0?1:1/n;var o=new me;return o.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix4(o),this},computeFaceNormals:function(){for(var e=new oe,n=new oe,o=0,c=this.faces.length;o<c;o++){var v=this.faces[o],g=this.vertices[v.a],A=this.vertices[v.b];e.subVectors(this.vertices[v.c],A),n.subVectors(g,A),e.cross(n),e.normalize(),v.normal.copy(e)}},computeVertexNormals:function(e){e===void 0&&(e=!0);var n,o=Array(this.vertices.length),c=0;for(n=this.vertices.length;c<n;c++)o[c]=new oe;if(e){var v=new oe,g=new oe;for(e=0,c=this.faces.length;e<c;e++){n=this.faces[e];var A=this.vertices[n.a],y=this.vertices[n.b],T=this.vertices[n.c];v.subVectors(T,y),g.subVectors(A,y),v.cross(g),o[n.a].add(v),o[n.b].add(v),o[n.c].add(v)}}else for(this.computeFaceNormals(),e=0,c=this.faces.length;e<c;e++)n=this.faces[e],o[n.a].add(n.normal),o[n.b].add(n.normal),o[n.c].add(n.normal);for(c=0,n=this.vertices.length;c<n;c++)o[c].normalize();for(e=0,c=this.faces.length;e<c;e++)n=this.faces[e],A=n.vertexNormals,A.length===3?(A[0].copy(o[n.a]),A[1].copy(o[n.b]),A[2].copy(o[n.c])):(A[0]=o[n.a].clone(),A[1]=o[n.b].clone(),A[2]=o[n.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e;this.computeFaceNormals();var n=0;for(e=this.faces.length;n<e;n++){var o=this.faces[n],c=o.vertexNormals;c.length===3?(c[0].copy(o.normal),c[1].copy(o.normal),c[2].copy(o.normal)):(c[0]=o.normal.clone(),c[1]=o.normal.clone(),c[2]=o.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,n,o=0;for(n=this.faces.length;o<n;o++){var c=this.faces[o];c.__originalFaceNormal?c.__originalFaceNormal.copy(c.normal):c.__originalFaceNormal=c.normal.clone(),c.__originalVertexNormals||(c.__originalVertexNormals=[]);var v=0;for(e=c.vertexNormals.length;v<e;v++)c.__originalVertexNormals[v]?c.__originalVertexNormals[v].copy(c.vertexNormals[v]):c.__originalVertexNormals[v]=c.vertexNormals[v].clone()}var g=new ur;for(g.faces=this.faces,v=0,e=this.morphTargets.length;v<e;v++){if(!this.morphNormals[v]){this.morphNormals[v]={},this.morphNormals[v].faceNormals=[],this.morphNormals[v].vertexNormals=[],c=this.morphNormals[v].faceNormals;var A=this.morphNormals[v].vertexNormals;for(o=0,n=this.faces.length;o<n;o++){var y=new oe,T={a:new oe,b:new oe,c:new oe};c.push(y),A.push(T)}}for(A=this.morphNormals[v],g.vertices=this.morphTargets[v].vertices,g.computeFaceNormals(),g.computeVertexNormals(),o=0,n=this.faces.length;o<n;o++)c=this.faces[o],y=A.faceNormals[o],T=A.vertexNormals[o],y.copy(c.normal),T.a.copy(c.vertexNormals[0]),T.b.copy(c.vertexNormals[1]),T.c.copy(c.vertexNormals[2])}for(o=0,n=this.faces.length;o<n;o++)c=this.faces[o],c.normal=c.__originalFaceNormal,c.vertexNormals=c.__originalVertexNormals},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Re),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new De),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,n,o){if(e&&e.isGeometry){var c,v=this.vertices.length,g=this.vertices,A=e.vertices,y=this.faces,T=e.faces,D=this.colors,X=e.colors;o===void 0&&(o=0),n!==void 0&&(c=new W().getNormalMatrix(n));for(var I=0,b=A.length;I<b;I++){var N=A[I].clone();n!==void 0&&N.applyMatrix4(n),g.push(N)}for(I=0,b=X.length;I<b;I++)D.push(X[I].clone());for(I=0,b=T.length;I<b;I++){A=T[I];var k=A.vertexNormals;for(X=A.vertexColors,D=new Dt(A.a+v,A.b+v,A.c+v),D.normal.copy(A.normal),c!==void 0&&D.normal.applyMatrix3(c).normalize(),n=0,g=k.length;n<g;n++)N=k[n].clone(),c!==void 0&&N.applyMatrix3(c).normalize(),D.vertexNormals.push(N);for(D.color.copy(A.color),n=0,g=X.length;n<g;n++)N=X[n],D.vertexColors.push(N.clone());D.materialIndex=A.materialIndex+o,y.push(D)}for(I=0,b=e.faceVertexUvs.length;I<b;I++)for(o=e.faceVertexUvs[I],this.faceVertexUvs[I]===void 0&&(this.faceVertexUvs[I]=[]),n=0,g=o.length;n<g;n++){for(c=o[n],v=[],y=0,T=c.length;y<T;y++)v.push(c[y].clone());this.faceVertexUvs[I].push(v)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e={},n=[],o=[],c=Math.pow(10,4),v,g=0;for(v=this.vertices.length;g<v;g++){var A=this.vertices[g];A=Math.round(A.x*c)+"_"+Math.round(A.y*c)+"_"+Math.round(A.z*c),e[A]===void 0?(e[A]=g,n.push(this.vertices[g]),o[g]=n.length-1):o[g]=o[e[A]]}for(e=[],g=0,v=this.faces.length;g<v;g++)for(c=this.faces[g],c.a=o[c.a],c.b=o[c.b],c.c=o[c.c],c=[c.a,c.b,c.c],A=0;3>A;A++)if(c[A]===c[(A+1)%3]){e.push(g);break}for(g=e.length-1;0<=g;g--)for(c=e[g],this.faces.splice(c,1),o=0,v=this.faceVertexUvs.length;o<v;o++)this.faceVertexUvs[o].splice(c,1);return g=this.vertices.length-n.length,this.vertices=n,g},setFromPoints:function(e){this.vertices=[];for(var n=0,o=e.length;n<o;n++){var c=e[n];this.vertices.push(new oe(c.x,c.y,c.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,n=e.length,o=0;o<n;o++)e[o]._id=o;e.sort(function(T,D){return T.materialIndex-D.materialIndex});var c=this.faceVertexUvs[0],v=this.faceVertexUvs[1],g,A;for(c&&c.length===n&&(g=[]),v&&v.length===n&&(A=[]),o=0;o<n;o++){var y=e[o]._id;g&&g.push(c[y]),A&&A.push(v[y])}g&&(this.faceVertexUvs[0]=g),A&&(this.faceVertexUvs[1]=A)},toJSON:function(){function e(je,Ge,He){return He?je|1<<Ge:je&~(1<<Ge)}function n(je){var Ge=je.x.toString()+je.y.toString()+je.z.toString();return D[Ge]!==void 0||(D[Ge]=T.length/3,T.push(je.x,je.y,je.z)),D[Ge]}function o(je){var Ge=je.r.toString()+je.g.toString()+je.b.toString();return I[Ge]!==void 0||(I[Ge]=X.length,X.push(je.getHex())),I[Ge]}function c(je){var Ge=je.x.toString()+je.y.toString();return N[Ge]!==void 0||(N[Ge]=b.length/2,b.push(je.x,je.y)),N[Ge]}var v={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(v.uuid=this.uuid,v.type=this.type,this.name!==""&&(v.name=this.name),this.parameters!==void 0){var g=this.parameters,A;for(A in g)g[A]!==void 0&&(v[A]=g[A]);return v}for(g=[],A=0;A<this.vertices.length;A++){var y=this.vertices[A];g.push(y.x,y.y,y.z)}y=[];var T=[],D={},X=[],I={},b=[],N={};for(A=0;A<this.faces.length;A++){var k=this.faces[A],G=this.faceVertexUvs[0][A]!==void 0,re=0<k.normal.length(),se=0<k.vertexNormals.length,ue=k.color.r!==1||k.color.g!==1||k.color.b!==1,we=0<k.vertexColors.length,Te=0;Te=e(Te,0,0),Te=e(Te,1,!0),Te=e(Te,2,!1),Te=e(Te,3,G),Te=e(Te,4,re),Te=e(Te,5,se),Te=e(Te,6,ue),Te=e(Te,7,we),y.push(Te),y.push(k.a,k.b,k.c),y.push(k.materialIndex),G&&(G=this.faceVertexUvs[0][A],y.push(c(G[0]),c(G[1]),c(G[2]))),re&&y.push(n(k.normal)),se&&(re=k.vertexNormals,y.push(n(re[0]),n(re[1]),n(re[2]))),ue&&y.push(o(k.color)),we&&(k=k.vertexColors,y.push(o(k[0]),o(k[1]),o(k[2])))}return v.data={},v.data.vertices=g,v.data.normals=T,0<X.length&&(v.data.colors=X),0<b.length&&(v.data.uvs=[b]),v.data.faces=y,v},clone:function(){return new ur().copy(this)},copy:function(e){var n,o,c;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.name=e.name;var v=e.vertices,g=0;for(n=v.length;g<n;g++)this.vertices.push(v[g].clone());for(v=e.colors,g=0,n=v.length;g<n;g++)this.colors.push(v[g].clone());for(v=e.faces,g=0,n=v.length;g<n;g++)this.faces.push(v[g].clone());for(g=0,n=e.faceVertexUvs.length;g<n;g++){var A=e.faceVertexUvs[g];for(this.faceVertexUvs[g]===void 0&&(this.faceVertexUvs[g]=[]),v=0,o=A.length;v<o;v++){var y=A[v],T=[],D=0;for(c=y.length;D<c;D++)T.push(y[D].clone());this.faceVertexUvs[g].push(T)}}for(D=e.morphTargets,g=0,n=D.length;g<n;g++){if(c={},c.name=D[g].name,D[g].vertices!==void 0)for(c.vertices=[],v=0,o=D[g].vertices.length;v<o;v++)c.vertices.push(D[g].vertices[v].clone());if(D[g].normals!==void 0)for(c.normals=[],v=0,o=D[g].normals.length;v<o;v++)c.normals.push(D[g].normals[v].clone());this.morphTargets.push(c)}for(D=e.morphNormals,g=0,n=D.length;g<n;g++){if(c={},D[g].vertexNormals!==void 0)for(c.vertexNormals=[],v=0,o=D[g].vertexNormals.length;v<o;v++)A=D[g].vertexNormals[v],y={},y.a=A.a.clone(),y.b=A.b.clone(),y.c=A.c.clone(),c.vertexNormals.push(y);if(D[g].faceNormals!==void 0)for(c.faceNormals=[],v=0,o=D[g].faceNormals.length;v<o;v++)c.faceNormals.push(D[g].faceNormals[v].clone());this.morphNormals.push(c)}for(v=e.skinWeights,g=0,n=v.length;g<n;g++)this.skinWeights.push(v[g].clone());for(v=e.skinIndices,g=0,n=v.length;g<n;g++)this.skinIndices.push(v[g].clone());for(v=e.lineDistances,g=0,n=v.length;g<n;g++)this.lineDistances.push(v[g]);return g=e.boundingBox,g!==null&&(this.boundingBox=g.clone()),g=e.boundingSphere,g!==null&&(this.boundingSphere=g.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var xG=function(e){function n(o,c,v,g,A,y){Fi(this,n);var T=sa(this,(n.__proto__||Pa(n)).call(this));return T.type="BoxGeometry",T.parameters={width:o,height:c,depth:v,widthSegments:g,heightSegments:A,depthSegments:y},T.fromBufferGeometry(new j_(o,c,v,g,A,y)),T.mergeVertices(),T}return Oa(n,e),n}(ur),j_=function(e){function n(o,c,v,g,A,y){function T(se,ue,we,Te,je,Ge,He,lt,ht,It,vt){var Et=Ge/ht,xr=He/It,Nt=Ge/2,Pr=He/2,qr=lt/2;He=ht+1;for(var Fr=It+1,$n=Ge=0,Gr=new oe,ze=0;ze<Fr;ze++)for(var Ue=ze*xr-Pr,ke=0;ke<He;ke++)Gr[se]=(ke*Et-Nt)*Te,Gr[ue]=Ue*je,Gr[we]=qr,b.push(Gr.x,Gr.y,Gr.z),Gr[se]=0,Gr[ue]=0,Gr[we]=0<lt?1:-1,N.push(Gr.x,Gr.y,Gr.z),k.push(ke/ht),k.push(1-ze/It),Ge+=1;for(se=0;se<It;se++)for(ue=0;ue<ht;ue++)we=G+ue+He*(se+1),Te=G+(ue+1)+He*(se+1),je=G+(ue+1)+He*se,I.push(G+ue+He*se,we,je),I.push(we,Te,je),$n+=6;X.addGroup(re,$n,vt),re+=$n,G+=Ge}Fi(this,n);var D=sa(this,(n.__proto__||Pa(n)).call(this));D.type="BoxBufferGeometry",D.parameters={width:o,height:c,depth:v,widthSegments:g,heightSegments:A,depthSegments:y};var X=D;o=o||1,c=c||1,v=v||1,g=Math.floor(g)||1,A=Math.floor(A)||1,y=Math.floor(y)||1;var I=[],b=[],N=[],k=[],G=0,re=0;return T("z","y","x",-1,-1,v,c,o,y,A,0),T("z","y","x",1,-1,v,c,-o,y,A,1),T("x","z","y",1,1,o,v,c,g,y,2),T("x","z","y",1,-1,o,v,-c,g,y,3),T("x","y","z",1,-1,o,c,v,g,A,4),T("x","y","z",-1,-1,o,c,-v,g,A,5),D.setIndex(I),D.setAttribute("position",new Rt(b,3)),D.setAttribute("normal",new Rt(N,3)),D.setAttribute("uv",new Rt(k,2)),D}return Oa(n,e),n}(Ut),Kg={clone:jn,merge:An};en.prototype=Le($e.prototype),en.prototype.constructor=en,en.prototype.isShaderMaterial=!0,en.prototype.copy=function(e){return $e.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=jn(e.uniforms),this.defines=Pe({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Pe({},e.extensions),this},en.prototype.toJSON=function(e){var n=$e.prototype.toJSON.call(this,e);n.uniforms={};for(var o in this.uniforms){var c=this.uniforms[o].value;n.uniforms[o]=c&&c.isTexture?{type:"t",value:c.toJSON(e).uuid}:c&&c.isColor?{type:"c",value:c.getHex()}:c&&c.isVector2?{type:"v2",value:c.toArray()}:c&&c.isVector3?{type:"v3",value:c.toArray()}:c&&c.isVector4?{type:"v4",value:c.toArray()}:c&&c.isMatrix3?{type:"m3",value:c.toArray()}:c&&c.isMatrix4?{type:"m4",value:c.toArray()}:{value:c}}0<Hi(this.defines).length&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,e={};for(var v in this.extensions)this.extensions[v]===!0&&(e[v]=!0);return 0<Hi(e).length&&(n.extensions=e),n},Fn.prototype=Pe(Le(ce.prototype),{constructor:Fn,isCamera:!0,copy:function(e,n){return ce.prototype.copy.call(this,e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){e===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new oe),this.updateMatrixWorld(!0);var n=this.matrixWorld.elements;return e.set(-n[8],-n[9],-n[10]).normalize()},updateMatrixWorld:function(e){ce.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(e,n){ce.prototype.updateWorldMatrix.call(this,e,n),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}}),lr.prototype=Pe(Le(Fn.prototype),{constructor:lr,isPerspectiveCamera:!0,copy:function(e,n){return Fn.prototype.copy.call(this,e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Pe({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){e=.5*this.getFilmHeight()/e,this.fov=2*ai.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*ai.DEG2RAD*this.fov);return .5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*ai.RAD2DEG*Math.atan(Math.tan(.5*ai.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,n,o,c,v,g){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=o,this.view.offsetY=c,this.view.width=v,this.view.height=g,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,n=e*Math.tan(.5*ai.DEG2RAD*this.fov)/this.zoom,o=2*n,c=this.aspect*o,v=-.5*c,g=this.view;if(this.view!==null&&this.view.enabled){var A=g.fullWidth,y=g.fullHeight;v+=g.offsetX*c/A,n-=g.offsetY*o/y,c*=g.width/A,o*=g.height/y}g=this.filmOffset,g!==0&&(v+=e*g/this.getFilmWidth()),this.projectionMatrix.makePerspective(v,v+c,n,n-o,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){return e=ce.prototype.toJSON.call(this,e),e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Pe({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),er.prototype=Le(ce.prototype),er.prototype.constructor=er,cn.prototype=Le(ae.prototype),cn.prototype.constructor=cn,cn.prototype.isWebGLCubeRenderTarget=!0,cn.prototype.fromEquirectangularTexture=function(e,n){this.texture.type=n.type,this.texture.format=n.format,this.texture.encoding=n.encoding;var o=new _e,c=new en({type:"CubemapFromEquirect",uniforms:jn({tEquirect:{value:null}}),vertexShader:`varying vec3 vWorldDirection;
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragmentShader:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
}`,side:1,blending:0});return c.uniforms.tEquirect.value=n,n=new _r(new j_(5,5,5),c),o.add(n),new er(1,10,this).update(e,o),n.geometry.dispose(),n.material.dispose(),this},oi.prototype=Le(J.prototype),oi.prototype.constructor=oi,oi.prototype.isDataTexture=!0;var uy=new De,G_=new oe;Pe(xn.prototype,{set:function(e,n,o,c,v,g){var A=this.planes;return A[0].copy(e),A[1].copy(n),A[2].copy(o),A[3].copy(c),A[4].copy(v),A[5].copy(g),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){for(var n=this.planes,o=0;6>o;o++)n[o].copy(e.planes[o]);return this},setFromProjectionMatrix:function(e){var n=this.planes,o=e.elements;e=o[0];var c=o[1],v=o[2],g=o[3],A=o[4],y=o[5],T=o[6],D=o[7],X=o[8],I=o[9],b=o[10],N=o[11],k=o[12],G=o[13],re=o[14];return o=o[15],n[0].setComponents(g-e,D-A,N-X,o-k).normalize(),n[1].setComponents(g+e,D+A,N+X,o+k).normalize(),n[2].setComponents(g+c,D+y,N+I,o+G).normalize(),n[3].setComponents(g-c,D-y,N-I,o-G).normalize(),n[4].setComponents(g-v,D-T,N-b,o-re).normalize(),n[5].setComponents(g+v,D+T,N+b,o+re).normalize(),this},intersectsObject:function(e){var n=e.geometry;return n.boundingSphere===null&&n.computeBoundingSphere(),uy.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(uy)},intersectsSprite:function(e){return uy.center.set(0,0,0),uy.radius=.7071067811865476,uy.applyMatrix4(e.matrixWorld),this.intersectsSphere(uy)},intersectsSphere:function(e){var n=this.planes,o=e.center;e=-e.radius;for(var c=0;6>c;c++)if(n[c].distanceToPoint(o)<e)return!1;return!0},intersectsBox:function(e){for(var n=this.planes,o=0;6>o;o++){var c=n[o];if(G_.x=0<c.normal.x?e.max.x:e.min.x,G_.y=0<c.normal.y?e.max.y:e.min.y,G_.z=0<c.normal.z?e.max.z:e.min.z,0>c.distanceToPoint(G_))return!1}return!0},containsPoint:function(e){for(var n=this.planes,o=0;6>o;o++)if(0>n[o].distanceToPoint(e))return!1;return!0}});var Xr={common:{diffuse:{value:new Ye(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new W},uv2Transform:{value:new W},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new U(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ye(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Ye(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new W}},sprite:{diffuse:{value:new Ye(15658734)},opacity:{value:1},center:{value:new U(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new W}}};mn.prototype=Le(ur.prototype),mn.prototype.constructor=mn,pi.prototype=Le(Ut.prototype),pi.prototype.constructor=pi;var Ii={alphamap_fragment:`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment:`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment:`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,aomap_fragment:`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,aomap_pars_fragment:`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs:`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS  = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha  = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,bumpmap_pars_fragment:`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment:`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment:`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex:`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex:`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment:`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment:`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_pars_vertex:`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_vertex:`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,common:`#define PI 3.14159265359
#define PI2 6.28318530718
#define PI_HALF 1.5707963267949
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
  return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cube_uv_reflection_fragment:`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_maxMipLevel 8.0
#define cubeUV_minMipLevel 4.0
#define cubeUV_maxTileSize 256.0
#define cubeUV_minTileSize 16.0
float getFace(vec3 direction) {
    vec3 absDirection = abs(direction);
    float face = -1.0;
    if (absDirection.x > absDirection.z) {
      if (absDirection.x > absDirection.y)
        face = direction.x > 0.0 ? 0.0 : 3.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    } else {
      if (absDirection.z > absDirection.y)
        face = direction.z > 0.0 ? 2.0 : 5.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    }
    return face;
}
vec2 getUV(vec3 direction, float face) {
    vec2 uv;
    if (face == 0.0) {
      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {
      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {
      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {
      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {
      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {
      uv = vec2(direction.x, direction.y) / abs(direction.z);    }
    return 0.5 * (uv + 1.0);
}
vec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
  float face = getFace(direction);
  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
  mipInt = max(mipInt, cubeUV_minMipLevel);
  float faceSize = exp2(mipInt);
  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
  vec2 uv = getUV(direction, face) * (faceSize - 1.0);
  vec2 f = fract(uv);
  uv += 0.5 - f;
  if (face > 2.0) {
    uv.y += faceSize;
    face -= 3.0;
  }
  uv.x += face * faceSize;
  if(mipInt < cubeUV_maxMipLevel){
    uv.y += 2.0 * cubeUV_maxTileSize;
  }
  uv.y += filterInt * 2.0 * cubeUV_minTileSize;
  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
  uv *= texelSize;
  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x += texelSize;
  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.y += texelSize;
  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x -= texelSize;
  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  vec3 tm = mix(tl, tr, f.x);
  vec3 bm = mix(bl, br, f.x);
  return mix(tm, bm, f.y);
}
#define r0 1.0
#define v0 0.339
#define m0 -2.0
#define r1 0.8
#define v1 0.276
#define m1 -1.0
#define r4 0.4
#define v4 0.046
#define m4 2.0
#define r5 0.305
#define v5 0.016
#define m5 3.0
#define r6 0.21
#define v6 0.0038
#define m6 4.0
float roughnessToMip(float roughness) {
  float mip = 0.0;
  if (roughness >= r1) {
    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
  } else if (roughness >= r4) {
    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
  } else if (roughness >= r5) {
    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
  } else if (roughness >= r6) {
    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
  } else {
    mip = -2.0 * log2(1.16 * roughness);  }
  return mip;
}
vec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {
  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);
  float mipF = fract(mip);
  float mipInt = floor(mip);
  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);
  if (mipF == 0.0) {
    return vec4(color0, 1.0);
  } else {
    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);
    return vec4(mix(color0, color1, mipF), 1.0);
  }
}
#endif`,defaultnormal_vertex:`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex:`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex:`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment:`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment:`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,envmap_fragment:`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		}  else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		reflectVec = normalize( reflectVec );
		vec2 sampleUV = equirectUv( reflectVec );
		vec4 envColor = texture2D( envMap, sampleUV );
	#elif defined( ENVMAP_TYPE_SPHERE )
		reflectVec = normalize( reflectVec );
		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment:`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment:`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex:`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_physical_pars_fragment:`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
		  vec3 reflectVec = reflect( -viewDir, normal );
		  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
		  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV = equirectUv( reflectVec );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_SPHERE )
			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,envmap_vertex:`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) { 
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex:`#ifdef USE_FOG
	fogDepth = -mvPosition.z;
#endif`,fog_pars_vertex:`#ifdef USE_FOG
	varying float fogDepth;
#endif`,fog_fragment:`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment:`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment:`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,lightmap_fragment:`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,lightmap_pars_fragment:`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_vertex:`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,lights_pars_begin:`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
		struct PointLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,lights_toon_fragment:`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_toon_pars_fragment:`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,lights_phong_fragment:`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment:`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,lights_physical_fragment:`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,lights_physical_pars_fragment:`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin:`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps:`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,lights_fragment_end:`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment:`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment:`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex:`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex:`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment:`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,map_pars_fragment:`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment:`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment:`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment:`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment:`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphnormal_vertex:`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,morphtarget_pars_vertex:`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,morphtarget_vertex:`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += morphTarget4 * morphTargetInfluences[ 4 ];
	transformed += morphTarget5 * morphTargetInfluences[ 5 ];
	transformed += morphTarget6 * morphTargetInfluences[ 6 ];
	transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,normal_fragment_begin:`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps:`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,normalmap_pars_fragment:`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,clearcoat_normal_fragment_begin:`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps:`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,clearcoat_pars_fragment:`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,packing:`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment:`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex:`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment:`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment:`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment:`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment:`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,shadowmask_pars_fragment:`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex:`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex:`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,skinning_vertex:`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex:`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment:`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment:`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment:`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment:`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );
}`,uv_pars_fragment:`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uv_pars_vertex:`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uv_vertex:`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,uv2_vertex:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,worldpos_vertex:`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,background_frag:`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,background_vert:`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,cube_frag:`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,depth_vert:`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,distanceRGBA_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,distanceRGBA_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,equirect_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshbasic_vert:`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag:`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert:`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshmatcap_frag:`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert:`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshtoon_frag:`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert:`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphysical_frag:`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSPARENCY
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSPARENCY
	uniform float transparency;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSPARENCY
		diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert:`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,normal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,normal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,shadow_vert:`#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sprite_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sprite_vert:`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`},dd={basic:{uniforms:An([Xr.common,Xr.specularmap,Xr.envmap,Xr.aomap,Xr.lightmap,Xr.fog]),vertexShader:Ii.meshbasic_vert,fragmentShader:Ii.meshbasic_frag},lambert:{uniforms:An([Xr.common,Xr.specularmap,Xr.envmap,Xr.aomap,Xr.lightmap,Xr.emissivemap,Xr.fog,Xr.lights,{emissive:{value:new Ye(0)}}]),vertexShader:Ii.meshlambert_vert,fragmentShader:Ii.meshlambert_frag},phong:{uniforms:An([Xr.common,Xr.specularmap,Xr.envmap,Xr.aomap,Xr.lightmap,Xr.emissivemap,Xr.bumpmap,Xr.normalmap,Xr.displacementmap,Xr.fog,Xr.lights,{emissive:{value:new Ye(0)},specular:{value:new Ye(1118481)},shininess:{value:30}}]),vertexShader:Ii.meshphong_vert,fragmentShader:Ii.meshphong_frag},standard:{uniforms:An([Xr.common,Xr.envmap,Xr.aomap,Xr.lightmap,Xr.emissivemap,Xr.bumpmap,Xr.normalmap,Xr.displacementmap,Xr.roughnessmap,Xr.metalnessmap,Xr.fog,Xr.lights,{emissive:{value:new Ye(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ii.meshphysical_vert,fragmentShader:Ii.meshphysical_frag},toon:{uniforms:An([Xr.common,Xr.specularmap,Xr.aomap,Xr.lightmap,Xr.emissivemap,Xr.bumpmap,Xr.normalmap,Xr.displacementmap,Xr.gradientmap,Xr.fog,Xr.lights,{emissive:{value:new Ye(0)},specular:{value:new Ye(1118481)},shininess:{value:30}}]),vertexShader:Ii.meshtoon_vert,fragmentShader:Ii.meshtoon_frag},matcap:{uniforms:An([Xr.common,Xr.bumpmap,Xr.normalmap,Xr.displacementmap,Xr.fog,{matcap:{value:null}}]),vertexShader:Ii.meshmatcap_vert,fragmentShader:Ii.meshmatcap_frag},points:{uniforms:An([Xr.points,Xr.fog]),vertexShader:Ii.points_vert,fragmentShader:Ii.points_frag},dashed:{uniforms:An([Xr.common,Xr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ii.linedashed_vert,fragmentShader:Ii.linedashed_frag},depth:{uniforms:An([Xr.common,Xr.displacementmap]),vertexShader:Ii.depth_vert,fragmentShader:Ii.depth_frag},normal:{uniforms:An([Xr.common,Xr.bumpmap,Xr.normalmap,Xr.displacementmap,{opacity:{value:1}}]),vertexShader:Ii.normal_vert,fragmentShader:Ii.normal_frag},sprite:{uniforms:An([Xr.sprite,Xr.fog]),vertexShader:Ii.sprite_vert,fragmentShader:Ii.sprite_frag},background:{uniforms:{uvTransform:{value:new W},t2D:{value:null}},vertexShader:Ii.background_vert,fragmentShader:Ii.background_frag},cube:{uniforms:An([Xr.envmap,{opacity:{value:1}}]),vertexShader:Ii.cube_vert,fragmentShader:Ii.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ii.equirect_vert,fragmentShader:Ii.equirect_frag},distanceRGBA:{uniforms:An([Xr.common,Xr.displacementmap,{referencePosition:{value:new oe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ii.distanceRGBA_vert,fragmentShader:Ii.distanceRGBA_frag},shadow:{uniforms:An([Xr.lights,Xr.fog,{color:{value:new Ye(0)},opacity:{value:1}}]),vertexShader:Ii.shadow_vert,fragmentShader:Ii.shadow_frag}};dd.physical={uniforms:An([dd.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new U(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Ye(0)},transparency:{value:0}}]),vertexShader:Ii.meshphysical_vert,fragmentShader:Ii.meshphysical_frag},Vi.prototype=Le(J.prototype),Vi.prototype.constructor=Vi,Vi.prototype.isCubeTexture=!0,Object.defineProperty(Vi.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),zi.prototype=Le(J.prototype),zi.prototype.constructor=zi,zi.prototype.isDataTexture2DArray=!0,To.prototype=Le(J.prototype),To.prototype.constructor=To,To.prototype.isDataTexture3D=!0;var ob=new J,AG=new zi,wG=new To,ab=new Vi,sb=[],lb=[],ub=new Float32Array(16),cb=new Float32Array(9),hb=new Float32Array(4);cs.prototype.updateCache=function(e){var n=this.cache;e instanceof Float32Array&&n.length!==e.length&&(this.cache=new Float32Array(e.length)),ti(n,e)},Gs.prototype.setValue=function(e,n,o){for(var c=this.seq,v=0,g=c.length;v!==g;++v){var A=c[v];A.setValue(e,n[A.id],o)}};var FI=/([\w\d_]+)(\])?(\[|\.)?/g;Sa.prototype.setValue=function(e,n,o,c){n=this.map[n],n!==void 0&&n.setValue(e,o,c)},Sa.prototype.setOptional=function(e,n,o){n=n[o],n!==void 0&&this.setValue(e,o,n)},Sa.upload=function(e,n,o,c){for(var v=0,g=n.length;v!==g;++v){var A=n[v],y=o[A.id];y.needsUpdate!==!1&&A.setValue(e,y.value,c)}},Sa.seqWithValue=function(e,n){for(var o=[],c=0,v=e.length;c!==v;++c){var g=e[c];g.id in n&&o.push(g)}return o};var CG=0,NI=/^[ \t]*#include +<([\w\d./]+)>/gm,fb=/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,db=/#pragma unroll_loop_start[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g,_G=0;Wr.prototype=Le($e.prototype),Wr.prototype.constructor=Wr,Wr.prototype.isMeshDepthMaterial=!0,Wr.prototype.copy=function(e){return $e.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},Tn.prototype=Le($e.prototype),Tn.prototype.constructor=Tn,Tn.prototype.isMeshDistanceMaterial=!0,Tn.prototype.copy=function(e){return $e.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},Bf.prototype=Pe(Le(lr.prototype),{constructor:Bf,isArrayCamera:!0}),fs.prototype=Pe(Le(ce.prototype),{constructor:fs,isGroup:!0}),Pe(Dr.prototype,{constructor:Dr,getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new fs,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new fs,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this},disconnect:function(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this},update:function(e,n,o){var c=null,v=null,g=this._targetRay,A=this._grip;return e&&(g!==null&&(c=n.getPose(e.targetRaySpace,o),c!==null&&(g.matrix.fromArray(c.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale))),A!==null&&e.gripSpace&&(v=n.getPose(e.gripSpace,o),v!==null&&(A.matrix.fromArray(v.transform.matrix),A.matrix.decompose(A.position,A.rotation,A.scale)))),g!==null&&(g.visible=c!==null),A!==null&&(A.visible=v!==null),this}}),Pe(FC.prototype,z.prototype),Pe(Jo.prototype,{isFogExp2:!0,clone:function(){return new Jo(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Pe(Tx.prototype,{isFog:!0,clone:function(){return new Tx(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(Mr.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}}),Pe(Mr.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,n,o){e*=this.stride,o*=n.stride;for(var c=0,v=this.stride;c<v;c++)this.array[e+c]=n.array[o+c];return this},set:function(e,n){return n===void 0&&(n=0),this.array.set(e,n),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}});var Jg=new oe;Rn(Ws.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Pe(Ws.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(var n=0,o=this.data.count;n<o;n++)Jg.x=this.getX(n),Jg.y=this.getY(n),Jg.z=this.getZ(n),Jg.applyMatrix4(e),this.setXYZ(n,Jg.x,Jg.y,Jg.z);return this},setX:function(e,n){return this.data.array[e*this.data.stride+this.offset]=n,this},setY:function(e,n){return this.data.array[e*this.data.stride+this.offset+1]=n,this},setZ:function(e,n){return this.data.array[e*this.data.stride+this.offset+2]=n,this},setW:function(e,n){return this.data.array[e*this.data.stride+this.offset+3]=n,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,n,o){return e=e*this.data.stride+this.offset,this.data.array[e+0]=n,this.data.array[e+1]=o,this},setXYZ:function(e,n,o,c){return e=e*this.data.stride+this.offset,this.data.array[e+0]=n,this.data.array[e+1]=o,this.data.array[e+2]=c,this},setXYZW:function(e,n,o,c,v){return e=e*this.data.stride+this.offset,this.data.array[e+0]=n,this.data.array[e+1]=o,this.data.array[e+2]=c,this.data.array[e+3]=v,this},clone:function(){for(var e=[],n=0;n<this.count;n++)for(var o=n*this.data.stride+this.offset,c=0;c<this.itemSize;c++)e.push(this.data.array[o+c]);return new Ve(new this.array.constructor(e),this.itemSize,this.normalized)},toJSON:function(){for(var e=[],n=0;n<this.count;n++)for(var o=n*this.data.stride+this.offset,c=0;c<this.itemSize;c++)e.push(this.data.array[o+c]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}}),zf.prototype=Le($e.prototype),zf.prototype.constructor=zf,zf.prototype.isSpriteMaterial=!0,zf.prototype.copy=function(e){return $e.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};var cy,X2=new oe,hy=new oe,fy=new oe,dy=new U,Y2=new U,pb=new me,V_=new oe,Z2=new oe,W_=new oe,mb=new U,BI=new U,gb=new U;d0.prototype=Pe(Le(ce.prototype),{constructor:d0,isSprite:!0,raycast:function(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),hy.setFromMatrixScale(this.matrixWorld),pb.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),fy.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&hy.multiplyScalar(-fy.z);var o=this.material.rotation;if(o!==0)var c=Math.cos(o),v=Math.sin(o);o=this.center,rp(V_.set(-.5,-.5,0),fy,o,hy,v,c),rp(Z2.set(.5,-.5,0),fy,o,hy,v,c),rp(W_.set(.5,.5,0),fy,o,hy,v,c),mb.set(0,0),BI.set(1,0),gb.set(1,1);var g=e.ray.intersectTriangle(V_,Z2,W_,!1,X2);g===null&&(rp(Z2.set(-.5,.5,0),fy,o,hy,v,c),BI.set(0,1),g=e.ray.intersectTriangle(V_,W_,Z2,!1,X2),g===null)||(v=e.ray.origin.distanceTo(X2),v<e.near||v>e.far||n.push({distance:v,point:X2.clone(),uv:et.getUV(X2,V_,Z2,W_,mb,BI,gb,new U),face:null,object:this}))},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return ce.prototype.copy.call(this,e),e.center!==void 0&&this.center.copy(e.center),this}});var X_=new oe,vb=new oe;p0.prototype=Pe(Le(ce.prototype),{constructor:p0,isLOD:!0,copy:function(e){ce.prototype.copy.call(this,e,!1);for(var n=e.levels,o=0,c=n.length;o<c;o++){var v=n[o];this.addLevel(v.object.clone(),v.distance)}return this.autoUpdate=e.autoUpdate,this},addLevel:function(e,n){n===void 0&&(n=0),n=Math.abs(n);for(var o=this.levels,c=0;c<o.length&&!(n<o[c].distance);c++);return o.splice(c,0,{distance:n,object:e}),this.add(e),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(e){var n=this.levels;if(0<n.length){for(var o=1,c=n.length;o<c&&!(e<n[o].distance);o++);return n[o-1].object}return null},raycast:function(e,n){if(0<this.levels.length){X_.setFromMatrixPosition(this.matrixWorld);var o=e.ray.origin.distanceTo(X_);this.getObjectForDistance(o).raycast(e,n)}},update:function(e){var n=this.levels;if(1<n.length){X_.setFromMatrixPosition(e.matrixWorld),vb.setFromMatrixPosition(this.matrixWorld),e=X_.distanceTo(vb)/e.zoom,n[0].object.visible=!0;for(var o=1,c=n.length;o<c&&e>=n[o].distance;o++)n[o-1].object.visible=!1,n[o].object.visible=!0;for(this._currentLevel=o-1;o<c;o++)n[o].object.visible=!1}},toJSON:function(e){e=ce.prototype.toJSON.call(this,e),this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];for(var n=this.levels,o=0,c=n.length;o<c;o++){var v=n[o];e.object.levels.push({object:v.object.uuid,distance:v.distance})}return e}}),np.prototype=Pe(Le(_r.prototype),{constructor:np,isSkinnedMesh:!0,bind:function(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.getInverse(n)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new te,n=this.geometry.attributes.skinWeight,o=0,c=n.count;o<c;o++){e.x=n.getX(o),e.y=n.getY(o),e.z=n.getZ(o),e.w=n.getW(o);var v=1/e.manhattanLength();v!==1/0?e.multiplyScalar(v):e.set(1,0,0,0),n.setXYZW(o,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){_r.prototype.updateMatrixWorld.call(this,e),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)},boneTransform:function(){var e=new oe,n=new te,o=new te,c=new oe,v=new me;return function(g,A){var y=this.skeleton,T=this.geometry;for(n.fromBufferAttribute(T.attributes.skinIndex,g),o.fromBufferAttribute(T.attributes.skinWeight,g),e.fromBufferAttribute(T.attributes.position,g).applyMatrix4(this.bindMatrix),A.set(0,0,0),g=0;4>g;g++)if(T=o.getComponent(g),T!==0){var D=n.getComponent(g);v.multiplyMatrices(y.bones[D].matrixWorld,y.boneInverses[D]),A.addScaledVector(c.copy(e).applyMatrix4(v),T)}return A.applyMatrix4(this.bindMatrixInverse)}}()});var yb=new me,MG=new me;Pe(Uf.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,n=this.bones.length;e<n;e++){var o=new me;this.bones[e]&&o.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(o)}},pose:function(){var e,n,o=0;for(n=this.bones.length;o<n;o++)(e=this.bones[o])&&e.matrixWorld.getInverse(this.boneInverses[o]);for(o=0,n=this.bones.length;o<n;o++)(e=this.bones[o])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){for(var e=this.bones,n=this.boneInverses,o=this.boneMatrices,c=this.boneTexture,v=0,g=e.length;v<g;v++)yb.multiplyMatrices(e[v]?e[v].matrixWorld:MG,n[v]),yb.toArray(o,16*v);c!==void 0&&(c.needsUpdate=!0)},clone:function(){return new Uf(this.bones,this.boneInverses)},getBoneByName:function(e){for(var n=0,o=this.bones.length;n<o;n++){var c=this.bones[n];if(c.name===e)return c}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),Xu.prototype=Pe(Le(ce.prototype),{constructor:Xu,isBone:!0});var xb=new me,Ab=new me,Y_=[],q2=new _r;ia.prototype=Pe(Le(_r.prototype),{constructor:ia,isInstancedMesh:!0,getMatrixAt:function(e,n){n.fromArray(this.instanceMatrix.array,16*e)},raycast:function(e,n){var o=this.matrixWorld,c=this.count;if(q2.geometry=this.geometry,q2.material=this.material,q2.material!==void 0)for(var v=0;v<c;v++){this.getMatrixAt(v,xb),Ab.multiplyMatrices(o,xb),q2.matrixWorld=Ab,q2.raycast(e,Y_);for(var g=0,A=Y_.length;g<A;g++){var y=Y_[g];y.instanceId=v,y.object=this,n.push(y)}Y_.length=0}},setMatrixAt:function(e,n){n.toArray(this.instanceMatrix.array,16*e)},updateMorphTargets:function(){}}),Io.prototype=Le($e.prototype),Io.prototype.constructor=Io,Io.prototype.isLineBasicMaterial=!0,Io.prototype.copy=function(e){return $e.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this};var wb=new oe,Cb=new oe,_b=new me,Z_=new We,q_=new De;Xs.prototype=Pe(Le(ce.prototype),{constructor:Xs,isLine:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(e.index===null){for(var n=e.attributes.position,o=[0],c=1,v=n.count;c<v;c++)wb.fromBufferAttribute(n,c-1),Cb.fromBufferAttribute(n,c),o[c]=o[c-1],o[c]+=wb.distanceTo(Cb);e.setAttribute("lineDistance",new Rt(o,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry)for(n=e.vertices,o=e.lineDistances,o[0]=0,c=1,v=n.length;c<v;c++)o[c]=o[c-1],o[c]+=n[c-1].distanceTo(n[c]);return this},raycast:function(e,n){var o=this.geometry,c=this.matrixWorld,v=e.params.Line.threshold;if(o.boundingSphere===null&&o.computeBoundingSphere(),q_.copy(o.boundingSphere),q_.applyMatrix4(c),q_.radius+=v,e.ray.intersectsSphere(q_)!==!1){_b.getInverse(c),Z_.copy(e.ray).applyMatrix4(_b),c=v/((this.scale.x+this.scale.y+this.scale.z)/3),c*=c;var g=new oe,A=new oe;v=new oe;var y=new oe,T=this&&this.isLineSegments?2:1;if(o.isBufferGeometry){var D=o.index,X=o.attributes.position.array;if(D!==null){D=D.array,o=0;for(var I=D.length-1;o<I;o+=T){var b=D[o+1];g.fromArray(X,3*D[o]),A.fromArray(X,3*b),b=Z_.distanceSqToSegment(g,A,y,v),b>c||(y.applyMatrix4(this.matrixWorld),b=e.ray.origin.distanceTo(y),b<e.near||b>e.far||n.push({distance:b,point:v.clone().applyMatrix4(this.matrixWorld),index:o,face:null,faceIndex:null,object:this}))}}else for(o=0,I=X.length/3-1;o<I;o+=T)g.fromArray(X,3*o),A.fromArray(X,3*o+3),b=Z_.distanceSqToSegment(g,A,y,v),b>c||(y.applyMatrix4(this.matrixWorld),b=e.ray.origin.distanceTo(y),b<e.near||b>e.far||n.push({distance:b,point:v.clone().applyMatrix4(this.matrixWorld),index:o,face:null,faceIndex:null,object:this}))}else if(o.isGeometry)for(g=o.vertices,A=g.length,o=0;o<A-1;o+=T)b=Z_.distanceSqToSegment(g[o],g[o+1],y,v),b>c||(y.applyMatrix4(this.matrixWorld),b=e.ray.origin.distanceTo(y),b<e.near||b>e.far||n.push({distance:b,point:v.clone().applyMatrix4(this.matrixWorld),index:o,face:null,faceIndex:null,object:this}))}},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){e=e.morphAttributes;var n=Hi(e);if(0<n.length){var o=e[n[0]];if(o!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,n=o.length;e<n;e++){var c=o[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=e}}}else e=e.morphTargets,e!==void 0&&0<e.length&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var K_=new oe,J_=new oe;io.prototype=Pe(Le(Xs.prototype),{constructor:io,isLineSegments:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(e.index===null){for(var n=e.attributes.position,o=[],c=0,v=n.count;c<v;c+=2)K_.fromBufferAttribute(n,c),J_.fromBufferAttribute(n,c+1),o[c]=c===0?0:o[c-1],o[c+1]=o[c]+K_.distanceTo(J_);e.setAttribute("lineDistance",new Rt(o,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry)for(n=e.vertices,o=e.lineDistances,c=0,v=n.length;c<v;c+=2)K_.copy(n[c]),J_.copy(n[c+1]),o[c]=c===0?0:o[c-1],o[c+1]=o[c]+K_.distanceTo(J_);return this}}),qm.prototype=Pe(Le(Xs.prototype),{constructor:qm,isLineLoop:!0}),lu.prototype=Le($e.prototype),lu.prototype.constructor=lu,lu.prototype.isPointsMaterial=!0,lu.prototype.copy=function(e){return $e.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};var Mb=new me,zI=new We,Q_=new De,$_=new oe;zh.prototype=Pe(Le(ce.prototype),{constructor:zh,isPoints:!0,raycast:function(e,n){var o=this.geometry,c=this.matrixWorld,v=e.params.Points.threshold;if(o.boundingSphere===null&&o.computeBoundingSphere(),Q_.copy(o.boundingSphere),Q_.applyMatrix4(c),Q_.radius+=v,e.ray.intersectsSphere(Q_)!==!1)if(Mb.getInverse(c),zI.copy(e.ray).applyMatrix4(Mb),v/=(this.scale.x+this.scale.y+this.scale.z)/3,v*=v,o.isBufferGeometry){var g=o.index;if(o=o.attributes.position.array,g!==null){var A=g.array;g=0;for(var y=A.length;g<y;g++){var T=A[g];$_.fromArray(o,3*T),Km($_,T,v,c,e,n,this)}}else for(g=0,A=o.length/3;g<A;g++)$_.fromArray(o,3*g),Km($_,g,v,c,e,n,this)}else for(o=o.vertices,g=0,A=o.length;g<A;g++)Km(o[g],g,v,c,e,n,this)},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){e=e.morphAttributes;var n=Hi(e);if(0<n.length){var o=e[n[0]];if(o!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,n=o.length;e<n;e++){var c=o[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=e}}}else e=e.morphTargets,e!==void 0&&0<e.length&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),NC.prototype=Pe(Le(J.prototype),{constructor:NC,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),kf.prototype=Le(J.prototype),kf.prototype.constructor=kf,kf.prototype.isCompressedTexture=!0,m0.prototype=Le(J.prototype),m0.prototype.constructor=m0,m0.prototype.isCanvasTexture=!0,uu.prototype=Le(J.prototype),uu.prototype.constructor=uu,uu.prototype.isDepthTexture=!0,Jm.prototype=Le(Ut.prototype),Jm.prototype.constructor=Jm,Qm.prototype=Le(ur.prototype),Qm.prototype.constructor=Qm,Hf.prototype=Le(Ut.prototype),Hf.prototype.constructor=Hf,ip.prototype=Le(ur.prototype),ip.prototype.constructor=ip,Ys.prototype=Le(Ut.prototype),Ys.prototype.constructor=Ys,op.prototype=Le(ur.prototype),op.prototype.constructor=op,Uh.prototype=Le(Ys.prototype),Uh.prototype.constructor=Uh,g0.prototype=Le(ur.prototype),g0.prototype.constructor=g0,Yu.prototype=Le(Ys.prototype),Yu.prototype.constructor=Yu,jf.prototype=Le(ur.prototype),jf.prototype.constructor=jf,$m.prototype=Le(Ys.prototype),$m.prototype.constructor=$m,ap.prototype=Le(ur.prototype),ap.prototype.constructor=ap,eg.prototype=Le(Ys.prototype),eg.prototype.constructor=eg,v0.prototype=Le(ur.prototype),v0.prototype.constructor=v0,Gf.prototype=Le(Ut.prototype),Gf.prototype.constructor=Gf,Gf.prototype.toJSON=function(){var e=Ut.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e},tg.prototype=Le(ur.prototype),tg.prototype.constructor=tg,rg.prototype=Le(Ut.prototype),rg.prototype.constructor=rg,ng.prototype=Le(ur.prototype),ng.prototype.constructor=ng,sp.prototype=Le(Ut.prototype),sp.prototype.constructor=sp;var SG={triangulate:function(e,n,o){o=o||2;var c=n&&n.length,v=c?n[0]*o:e.length,g=Ex(e,0,v,o,!0),A=[];if(!g||g.next===g.prev)return A;var y;if(c){var T=o;c=[];var D,X=0;for(D=n.length;X<D;X++){var I=n[X]*T,b=X<D-1?n[X+1]*T:e.length;I=Ex(e,I,b,T,!1),I===I.next&&(I.steiner=!0),c.push(y0(I))}for(c.sort(Vf),X=0;X<c.length;X++)T=c[X],n=g,(n=zC(T,n))&&(T=zl(n,T),cu(n,n.next),cu(T,T.next)),g=cu(g,g.next)}if(e.length>80*o){var N=y=e[0],k=c=e[1];for(T=o;T<v;T+=o)X=e[T],n=e[T+1],X<N&&(N=X),n<k&&(k=n),X>y&&(y=X),n>c&&(c=n);y=Math.max(y-N,c-k),y=y!==0?1/y:0}return ig(g,A,o,N,k,y),A}},Vp={area:function(e){for(var n=e.length,o=0,c=n-1,v=0;v<n;c=v++)o+=e[c].x*e[v].y-e[v].x*e[c].y;return .5*o},isClockWise:function(e){return 0>Vp.area(e)},triangulateShape:function(e,n){var o=[],c=[],v=[];x0(e),Ix(o,e);var g=e.length;for(n.forEach(x0),e=0;e<n.length;e++)c.push(g),g+=n[e].length,Ix(o,n[e]);for(n=SG.triangulate(o,c),e=0;e<n.length;e+=3)v.push(n.slice(e,e+3));return v}};Hh.prototype=Le(ur.prototype),Hh.prototype.constructor=Hh,Hh.prototype.toJSON=function(){var e=ur.prototype.toJSON.call(this);return Rx(this.parameters.shapes,this.parameters.options,e)},Ul.prototype=Le(Ut.prototype),Ul.prototype.constructor=Ul,Ul.prototype.toJSON=function(){var e=Ut.prototype.toJSON.call(this);return Rx(this.parameters.shapes,this.parameters.options,e)};var TG={generateTopUV:function(e,n,o,c,v){e=n[3*c],c=n[3*c+1];var g=n[3*v];return v=n[3*v+1],[new U(n[3*o],n[3*o+1]),new U(e,c),new U(g,v)]},generateSideWallUV:function(e,n,o,c,v,g){e=n[3*o];var A=n[3*o+1];o=n[3*o+2];var y=n[3*c],T=n[3*c+1];c=n[3*c+2];var D=n[3*v],X=n[3*v+1];v=n[3*v+2];var I=n[3*g],b=n[3*g+1];return n=n[3*g+2],.01>Math.abs(A-T)?[new U(e,1-o),new U(y,1-c),new U(D,1-v),new U(I,1-n)]:[new U(A,1-o),new U(T,1-c),new U(X,1-v),new U(b,1-n)]}};A0.prototype=Le(ur.prototype),A0.prototype.constructor=A0,lp.prototype=Le(Ul.prototype),lp.prototype.constructor=lp,sg.prototype=Le(ur.prototype),sg.prototype.constructor=sg,Yf.prototype=Le(Ut.prototype),Yf.prototype.constructor=Yf,lg.prototype=Le(ur.prototype),lg.prototype.constructor=lg,up.prototype=Le(Ut.prototype),up.prototype.constructor=up,ug.prototype=Le(ur.prototype),ug.prototype.constructor=ug,cp.prototype=Le(Ut.prototype),cp.prototype.constructor=cp,hp.prototype=Le(ur.prototype),hp.prototype.constructor=hp,hp.prototype.toJSON=function(){var e=ur.prototype.toJSON.call(this);return Lx(this.parameters.shapes,e)},Zu.prototype=Le(Ut.prototype),Zu.prototype.constructor=Zu,Zu.prototype.toJSON=function(){var e=Ut.prototype.toJSON.call(this);return Lx(this.parameters.shapes,e)},Fc.prototype=Le(Ut.prototype),Fc.prototype.constructor=Fc,Ta.prototype=Le(ur.prototype),Ta.prototype.constructor=Ta,jh.prototype=Le(Ut.prototype),jh.prototype.constructor=jh,ln.prototype=Le(Ta.prototype),ln.prototype.constructor=ln,w0.prototype=Le(jh.prototype),w0.prototype.constructor=w0,C0.prototype=Le(ur.prototype),C0.prototype.constructor=C0,fp.prototype=Le(Ut.prototype),fp.prototype.constructor=fp;var wl=rc({__proto__:null,WireframeGeometry:Jm,ParametricGeometry:Qm,ParametricBufferGeometry:Hf,TetrahedronGeometry:op,TetrahedronBufferGeometry:Uh,OctahedronGeometry:g0,OctahedronBufferGeometry:Yu,IcosahedronGeometry:jf,IcosahedronBufferGeometry:$m,DodecahedronGeometry:ap,DodecahedronBufferGeometry:eg,PolyhedronGeometry:ip,PolyhedronBufferGeometry:Ys,TubeGeometry:v0,TubeBufferGeometry:Gf,TorusKnotGeometry:tg,TorusKnotBufferGeometry:rg,TorusGeometry:ng,TorusBufferGeometry:sp,TextGeometry:A0,TextBufferGeometry:lp,SphereGeometry:sg,SphereBufferGeometry:Yf,RingGeometry:lg,RingBufferGeometry:up,PlaneGeometry:mn,PlaneBufferGeometry:pi,LatheGeometry:ug,LatheBufferGeometry:cp,ShapeGeometry:hp,ShapeBufferGeometry:Zu,ExtrudeGeometry:Hh,ExtrudeBufferGeometry:Ul,EdgesGeometry:Fc,ConeGeometry:ln,ConeBufferGeometry:w0,CylinderGeometry:Ta,CylinderBufferGeometry:jh,CircleGeometry:C0,CircleBufferGeometry:fp,BoxGeometry:xG,BoxBufferGeometry:j_});dp.prototype=Le($e.prototype),dp.prototype.constructor=dp,dp.prototype.isShadowMaterial=!0,dp.prototype.copy=function(e){return $e.prototype.copy.call(this,e),this.color.copy(e.color),this},cg.prototype=Le(en.prototype),cg.prototype.constructor=cg,cg.prototype.isRawShaderMaterial=!0,Ts.prototype=Le($e.prototype),Ts.prototype.constructor=Ts,Ts.prototype.isMeshStandardMaterial=!0,Ts.prototype.copy=function(e){return $e.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.vertexTangents=e.vertexTangents,this},Zf.prototype=Le(Ts.prototype),Zf.prototype.constructor=Zf,Zf.prototype.isMeshPhysicalMaterial=!0,Zf.prototype.copy=function(e){return Ts.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,this.sheen=e.sheen?(this.sheen||new Ye).copy(e.sheen):null,this.transparency=e.transparency,this},Nc.prototype=Le($e.prototype),Nc.prototype.constructor=Nc,Nc.prototype.isMeshPhongMaterial=!0,Nc.prototype.copy=function(e){return $e.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},sn.prototype=Le($e.prototype),sn.prototype.constructor=sn,sn.prototype.isMeshToonMaterial=!0,sn.prototype.copy=function(e){return $e.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},pp.prototype=Le($e.prototype),pp.prototype.constructor=pp,pp.prototype.isMeshNormalMaterial=!0,pp.prototype.copy=function(e){return $e.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},mp.prototype=Le($e.prototype),mp.prototype.constructor=mp,mp.prototype.isMeshLambertMaterial=!0,mp.prototype.copy=function(e){return $e.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Bc.prototype=Le($e.prototype),Bc.prototype.constructor=Bc,Bc.prototype.isMeshMatcapMaterial=!0,Bc.prototype.copy=function(e){return $e.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},gp.prototype=Le(Io.prototype),gp.prototype.constructor=gp,gp.prototype.isLineDashedMaterial=!0,gp.prototype.copy=function(e){return Io.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var EG=rc({__proto__:null,ShadowMaterial:dp,SpriteMaterial:zf,RawShaderMaterial:cg,ShaderMaterial:en,PointsMaterial:lu,MeshPhysicalMaterial:Zf,MeshStandardMaterial:Ts,MeshPhongMaterial:Nc,MeshToonMaterial:sn,MeshNormalMaterial:pp,MeshLambertMaterial:mp,MeshDepthMaterial:Wr,MeshDistanceMaterial:Tn,MeshBasicMaterial:tt,MeshMatcapMaterial:Bc,LineDashedMaterial:gp,LineBasicMaterial:Io,Material:$e}),ua={arraySlice:function(e,n,o){return ua.isTypedArray(e)?new e.constructor(e.subarray(n,o!==void 0?o:e.length)):e.slice(n,o)},convertArray:function(e,n,o){return!e||!o&&e.constructor===n?e:typeof n.BYTES_PER_ELEMENT=="number"?new n(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var n=e.length,o=Array(n),c=0;c!==n;++c)o[c]=c;return o.sort(function(v,g){return e[v]-e[g]}),o},sortedArray:function(e,n,o){for(var c=e.length,v=new e.constructor(c),g=0,A=0;A!==c;++g)for(var y=o[g]*n,T=0;T!==n;++T)v[A++]=e[y+T];return v},flattenJSON:function(e,n,o,c){for(var v=1,g=e[0];g!==void 0&&g[c]===void 0;)g=e[v++];if(g!==void 0){var A=g[c];if(A!==void 0)if(Array.isArray(A))do A=g[c],A!==void 0&&(n.push(g.time),o.push.apply(o,A)),g=e[v++];while(g!==void 0);else if(A.toArray!==void 0)do A=g[c],A!==void 0&&(n.push(g.time),A.toArray(o,o.length)),g=e[v++];while(g!==void 0);else do A=g[c],A!==void 0&&(n.push(g.time),o.push(A)),g=e[v++];while(g!==void 0)}},subclip:function(e,n,o,c,v){v=v||30,e=e.clone(),e.name=n;var g=[];for(n=0;n<e.tracks.length;++n){for(var A=e.tracks[n],y=A.getValueSize(),T=[],D=[],X=0;X<A.times.length;++X){var I=A.times[X]*v;if(!(I<o||I>=c))for(T.push(A.times[X]),I=0;I<y;++I)D.push(A.values[X*y+I])}T.length!==0&&(A.times=ua.convertArray(T,A.times.constructor),A.values=ua.convertArray(D,A.values.constructor),g.push(A))}for(e.tracks=g,o=1/0,n=0;n<e.tracks.length;++n)o>e.tracks[n].times[0]&&(o=e.tracks[n].times[0]);for(n=0;n<e.tracks.length;++n)e.tracks[n].shift(-1*o);return e.resetDuration(),e},makeClipAdditive:function(e,n,o,c){n===void 0&&(n=0),o===void 0&&(o=e),(c===void 0||0>=c)&&(c=30);var v=e.tracks.length;for(n/=c,c=0;c<v;++c){var g=o.tracks[c],A=g.ValueTypeName;if(A!=="bool"&&A!=="string"){var y=e.tracks.find(function(k){return k.name===g.name&&k.ValueTypeName===A});if(y!==void 0){var T=g.getValueSize(),D=g.times.length-1;n<=g.times[0]?D=ua.arraySlice(g.values,0,g.valueSize):n>=g.times[D]?D=ua.arraySlice(g.values,D*T):(D=g.createInterpolant(),D.evaluate(n),D=D.resultBuffer),A==="quaternion"&&new he(D[0],D[1],D[2],D[3]).normalize().conjugate().toArray(D);for(var X=y.times.length,I=0;I<X;++I){var b=I*T;if(A==="quaternion")he.multiplyQuaternionsFlat(y.values,b,D,0,y.values,b);else for(var N=0;N<T;++N)y.values[b+N]-=D[N]}}}}return e.blendMode=2501,e}};Pe(Zs.prototype,{evaluate:function(e){var n=this.parameterPositions,o=this._cachedIndex,c=n[o],v=n[o-1];e:{t:{r:{n:if(!(e<c)){for(var g=o+2;;){if(c===void 0){if(e<v)break n;return this._cachedIndex=o=n.length,this.afterEnd_(o-1,e,v)}if(o===g)break;if(v=c,c=n[++o],e<c)break t}c=n.length;break r}if(e>=v)break e;for(g=n[1],e<g&&(o=2,v=g),g=o-2;;){if(v===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,c);if(o===g)break;if(c=v,v=n[--o-1],e>=v)break t}c=o,o=0}for(;o<c;)v=o+c>>>1,e<n[v]?c=v:o=v+1;if(c=n[o],v=n[o-1],v===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,c);if(c===void 0)return this._cachedIndex=o=n.length,this.afterEnd_(o-1,v,e)}this._cachedIndex=o,this.intervalChanged_(o,v,c)}return this.interpolate_(o,v,e,c)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){var n=this.resultBuffer,o=this.sampleValues,c=this.valueSize;e*=c;for(var v=0;v!==c;++v)n[v]=o[e+v];return n},interpolate_:function(){throw Error("call to abstract method")},intervalChanged_:function(){}}),Pe(Zs.prototype,{beforeStart_:Zs.prototype.copySampleValue_,afterEnd_:Zs.prototype.copySampleValue_}),qf.prototype=Pe(Le(Zs.prototype),{constructor:qf,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(e,n,o){var c=this.parameterPositions,v=e-2,g=e+1,A=c[v],y=c[g];if(A===void 0)switch(this.getSettings_().endingStart){case 2401:v=e,A=2*n-o;break;case 2402:v=c.length-2,A=n+c[v]-c[v+1];break;default:v=e,A=o}if(y===void 0)switch(this.getSettings_().endingEnd){case 2401:g=e,y=2*o-n;break;case 2402:g=1,y=o+c[1]-c[0];break;default:g=e-1,y=n}e=.5*(o-n),c=this.valueSize,this._weightPrev=e/(n-A),this._weightNext=e/(y-o),this._offsetPrev=v*c,this._offsetNext=g*c},interpolate_:function(e,n,o,c){var v=this.resultBuffer,g=this.sampleValues,A=this.valueSize;e*=A;var y=e-A,T=this._offsetPrev,D=this._offsetNext,X=this._weightPrev,I=this._weightNext,b=(o-n)/(c-n);for(o=b*b,c=o*b,n=-X*c+2*X*o-X*b,X=(1+X)*c+(-1.5-2*X)*o+(-.5+X)*b+1,b=(-1-I)*c+(1.5+I)*o+.5*b,I=I*c-I*o,o=0;o!==A;++o)v[o]=n*g[T+o]+X*g[y+o]+b*g[e+o]+I*g[D+o];return v}}),_0.prototype=Pe(Le(Zs.prototype),{constructor:_0,interpolate_:function(e,n,o,c){var v=this.resultBuffer,g=this.sampleValues,A=this.valueSize;e*=A;var y=e-A;for(n=(o-n)/(c-n),o=1-n,c=0;c!==A;++c)v[c]=g[y+c]*o+g[e+c]*n;return v}}),hg.prototype=Pe(Le(Zs.prototype),{constructor:hg,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Pe(ps,{toJSON:function(e){var n=e.constructor;if(n.toJSON!==void 0)n=n.toJSON(e);else{n={name:e.name,times:ua.convertArray(e.times,Array),values:ua.convertArray(e.values,Array)};var o=e.getInterpolation();o!==e.DefaultInterpolation&&(n.interpolation=o)}return n.type=e.ValueTypeName,n}}),Pe(ps.prototype,{constructor:ps,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new hg(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new _0(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new qf(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){switch(e){case 2300:var n=this.InterpolantFactoryMethodDiscrete;break;case 2301:n=this.InterpolantFactoryMethodLinear;break;case 2302:n=this.InterpolantFactoryMethodSmooth}if(n===void 0){if(n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name,this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=n,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(e!==0)for(var n=this.times,o=0,c=n.length;o!==c;++o)n[o]+=e;return this},scale:function(e){if(e!==1)for(var n=this.times,o=0,c=n.length;o!==c;++o)n[o]*=e;return this},trim:function(e,n){for(var o=this.times,c=o.length,v=0,g=c-1;v!==c&&o[v]<e;)++v;for(;g!==-1&&o[g]>n;)--g;return++g,(v!==0||g!==c)&&(v>=g&&(g=Math.max(g,1),v=g-1),e=this.getValueSize(),this.times=ua.arraySlice(o,v,g),this.values=ua.arraySlice(this.values,v*e,g*e)),this},validate:function(){var e=!0,n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var o=this.times;n=this.values;var c=o.length;c===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var v=null,g=0;g!==c;g++){var A=o[g];if(typeof A=="number"&&isNaN(A)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,g,A),e=!1;break}if(v!==null&&v>A){console.error("THREE.KeyframeTrack: Out of order keys.",this,g,A,v),e=!1;break}v=A}if(n!==void 0&&ua.isTypedArray(n)){for(g=0,o=n.length;g!==o;++g)if(c=n[g],isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,g,c),e=!1;break}}return e},optimize:function(){for(var e=ua.arraySlice(this.times),n=ua.arraySlice(this.values),o=this.getValueSize(),c=this.getInterpolation()===2302,v=1,g=e.length-1,A=1;A<g;++A){var y=!1,T=e[A];if(T!==e[A+1]&&(A!==1||T!==T[0]))if(c)y=!0;else{var D=A*o,X=D-o,I=D+o;for(T=0;T!==o;++T){var b=n[D+T];if(b!==n[X+T]||b!==n[I+T]){y=!0;break}}}if(y){if(A!==v)for(e[v]=e[A],y=A*o,D=v*o,T=0;T!==o;++T)n[D+T]=n[y+T];++v}}if(0<g){for(e[v]=e[g],y=g*o,D=v*o,T=0;T!==o;++T)n[D+T]=n[y+T];++v}return v!==e.length?(this.times=ua.arraySlice(e,0,v),this.values=ua.arraySlice(n,0,v*o)):(this.times=e,this.values=n),this},clone:function(){var e=ua.arraySlice(this.times,0),n=ua.arraySlice(this.values,0);return e=new this.constructor(this.name,e,n),e.createInterpolant=this.createInterpolant,e}}),Kf.prototype=Pe(Le(ps.prototype),{constructor:Kf,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Gh.prototype=Pe(Le(ps.prototype),{constructor:Gh,ValueTypeName:"color"}),vp.prototype=Pe(Le(ps.prototype),{constructor:vp,ValueTypeName:"number"}),Xi.prototype=Pe(Le(Zs.prototype),{constructor:Xi,interpolate_:function(e,n,o,c){var v=this.resultBuffer,g=this.sampleValues,A=this.valueSize;for(e*=A,n=(o-n)/(c-n),o=e+A;e!==o;e+=4)he.slerpFlat(v,0,g,e-A,g,e,n);return v}}),yp.prototype=Pe(Le(ps.prototype),{constructor:yp,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new Xi(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),M0.prototype=Pe(Le(ps.prototype),{constructor:M0,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Jf.prototype=Pe(Le(ps.prototype),{constructor:Jf,ValueTypeName:"vector"}),Pe(qs,{parse:function(e){for(var n=[],o=e.tracks,c=1/(e.fps||1),v=0,g=o.length;v!==g;++v)n.push(HC(o[v]).scale(c));return new qs(e.name,e.duration,n,e.blendMode)},toJSON:function(e){var n=[],o=e.tracks;e={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(var c=0,v=o.length;c!==v;++c)n.push(ps.toJSON(o[c]));return e},CreateFromMorphTargetSequence:function(e,n,o,c){for(var v=n.length,g=[],A=0;A<v;A++){var y=[],T=[];y.push((A+v-1)%v,A,(A+1)%v),T.push(0,1,0);var D=ua.getKeyframeOrder(y);y=ua.sortedArray(y,1,D),T=ua.sortedArray(T,1,D),c||y[0]!==0||(y.push(v),T.push(T[0])),g.push(new vp(".morphTargetInfluences["+n[A].name+"]",y,T).scale(1/o))}return new qs(e,-1,g)},findByName:function(e,n){var o=e;for(Array.isArray(e)||(o=e.geometry&&e.geometry.animations||e.animations),e=0;e<o.length;e++)if(o[e].name===n)return o[e];return null},CreateClipsFromMorphTargetSequences:function(e,n,o){for(var c={},v=/^([\w-]*?)([\d]+)$/,g=0,A=e.length;g<A;g++){var y=e[g],T=y.name.match(v);if(T&&1<T.length){var D=T[1];(T=c[D])||(c[D]=T=[]),T.push(y)}}e=[];for(D in c)e.push(qs.CreateFromMorphTargetSequence(D,c[D],n,o));return e},parseAnimation:function(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var o=function(re,se,ue,we,Te){if(ue.length!==0){var je=[],Ge=[];ua.flattenJSON(ue,je,Ge,we),je.length!==0&&Te.push(new re(se,je,Ge))}},c=[],v=e.name||"default",g=e.length||-1,A=e.fps||30,y=e.blendMode;e=e.hierarchy||[];for(var T=0;T<e.length;T++){var D=e[T].keys;if(D&&D.length!==0)if(D[0].morphTargets){g={};for(var X=0;X<D.length;X++)if(D[X].morphTargets)for(var I=0;I<D[X].morphTargets.length;I++)g[D[X].morphTargets[I]]=-1;for(var b in g){var N=[],k=[];for(I=0;I!==D[X].morphTargets.length;++I){var G=D[X];N.push(G.time),k.push(G.morphTarget===b?1:0)}c.push(new vp(".morphTargetInfluence["+b+"]",N,k))}g=g.length*(A||1)}else X=".bones["+n[T].name+"]",o(Jf,X+".position",D,"pos",c),o(yp,X+".quaternion",D,"rot",c),o(Jf,X+".scale",D,"scl",c)}return c.length===0?null:new qs(v,g,c,y)}}),Pe(qs.prototype,{resetDuration:function(){for(var e=0,n=0,o=this.tracks.length;n!==o;++n){var c=this.tracks[n];e=Math.max(e,c.times[c.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new qs(this.name,this.duration,e,this.blendMode)}});var py={enabled:!1,files:{},add:function(e,n){this.enabled!==!1&&(this.files[e]=n)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Sb=new jC;Pe(gi.prototype,{load:function(){},loadAsync:function(e,n){var o=this;return new vi(function(c,v){o.load(e,c,n,v)})},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});var th={};Qa.prototype=Pe(Le(gi.prototype),{constructor:Qa,load:function(e,n,o,c){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);var v=this,g=py.get(e);if(g!==void 0)return v.manager.itemStart(e),setTimeout(function(){n&&n(g),v.manager.itemEnd(e)},0),g;if(th[e]!==void 0)th[e].push({onLoad:n,onProgress:o,onError:c});else{var A=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(A){o=A[1];var y=!!A[2];A=A[3],A=decodeURIComponent(A),y&&(A=atob(A));try{var T=(this.responseType||"").toLowerCase();switch(T){case"arraybuffer":case"blob":var D=new Uint8Array(A.length);for(y=0;y<A.length;y++)D[y]=A.charCodeAt(y);var X=T==="blob"?new Blob([D.buffer],{type:o}):D.buffer;break;case"document":X=new DOMParser().parseFromString(A,o);break;case"json":X=JSON.parse(A);break;default:X=A}setTimeout(function(){n&&n(X),v.manager.itemEnd(e)},0)}catch(b){setTimeout(function(){c&&c(b),v.manager.itemError(e),v.manager.itemEnd(e)},0)}}else{th[e]=[],th[e].push({onLoad:n,onProgress:o,onError:c});var I=new XMLHttpRequest;I.open("GET",e,!0),I.addEventListener("load",function(b){var N=this.response,k=th[e];if(delete th[e],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),py.add(e,N);for(var G=0,re=k.length;G<re;G++){var se=k[G];se.onLoad&&se.onLoad(N)}}else{for(G=0,re=k.length;G<re;G++)se=k[G],se.onError&&se.onError(b);v.manager.itemError(e)}v.manager.itemEnd(e)},!1),I.addEventListener("progress",function(b){for(var N=th[e],k=0,G=N.length;k<G;k++){var re=N[k];re.onProgress&&re.onProgress(b)}},!1),I.addEventListener("error",function(b){var N=th[e];delete th[e];for(var k=0,G=N.length;k<G;k++){var re=N[k];re.onError&&re.onError(b)}v.manager.itemError(e),v.manager.itemEnd(e)},!1),I.addEventListener("abort",function(b){var N=th[e];delete th[e];for(var k=0,G=N.length;k<G;k++){var re=N[k];re.onError&&re.onError(b)}v.manager.itemError(e),v.manager.itemEnd(e)},!1),this.responseType!==void 0&&(I.responseType=this.responseType),this.withCredentials!==void 0&&(I.withCredentials=this.withCredentials),I.overrideMimeType&&I.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(y in this.requestHeader)I.setRequestHeader(y,this.requestHeader[y]);I.send(null)}return v.manager.itemStart(e),I}},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this}}),GC.prototype=Pe(Le(gi.prototype),{constructor:GC,load:function(e,n,o,c){var v=this,g=new Qa(v.manager);g.setPath(v.path),g.load(e,function(A){try{n(v.parse(JSON.parse(A)))}catch(y){c?c(y):console.error(y),v.manager.itemError(e)}},o,c)},parse:function(e){for(var n=[],o=0;o<e.length;o++){var c=qs.parse(e[o]);n.push(c)}return n}}),Yn.prototype=Pe(Le(gi.prototype),{constructor:Yn,load:function(e,n,o,c){function v(b){T.load(e[b],function(N){N=g.parse(N,!0),A[b]={width:N.width,height:N.height,format:N.format,mipmaps:N.mipmaps},D+=1,D===6&&(N.mipmapCount===1&&(y.minFilter=1006),y.format=N.format,y.needsUpdate=!0,n&&n(y))},o,c)}var g=this,A=[],y=new kf;y.image=A;var T=new Qa(this.manager);if(T.setPath(this.path),T.setResponseType("arraybuffer"),Array.isArray(e))for(var D=0,X=0,I=e.length;X<I;++X)v(X);else T.load(e,function(b){if(b=g.parse(b,!0),b.isCubemap)for(var N=b.mipmaps.length/b.mipmapCount,k=0;k<N;k++){A[k]={mipmaps:[]};for(var G=0;G<b.mipmapCount;G++)A[k].mipmaps.push(b.mipmaps[k*b.mipmapCount+G]),A[k].format=b.format,A[k].width=b.width,A[k].height=b.height}else y.image.width=b.width,y.image.height=b.height,y.mipmaps=b.mipmaps;b.mipmapCount===1&&(y.minFilter=1006),y.format=b.format,y.needsUpdate=!0,n&&n(y)},o,c);return y}}),VC.prototype=Pe(Le(gi.prototype),{constructor:VC,load:function(e,n,o,c){var v=this,g=new oi,A=new Qa(this.manager);return A.setResponseType("arraybuffer"),A.setPath(this.path),A.load(e,function(y){(y=v.parse(y))&&(y.image!==void 0?g.image=y.image:y.data!==void 0&&(g.image.width=y.width,g.image.height=y.height,g.image.data=y.data),g.wrapS=y.wrapS!==void 0?y.wrapS:1001,g.wrapT=y.wrapT!==void 0?y.wrapT:1001,g.magFilter=y.magFilter!==void 0?y.magFilter:1006,g.minFilter=y.minFilter!==void 0?y.minFilter:1006,g.anisotropy=y.anisotropy!==void 0?y.anisotropy:1,y.format!==void 0&&(g.format=y.format),y.type!==void 0&&(g.type=y.type),y.mipmaps!==void 0&&(g.mipmaps=y.mipmaps,g.minFilter=1008),y.mipmapCount===1&&(g.minFilter=1006),g.needsUpdate=!0,n&&n(g,y))},o,c),g}}),fg.prototype=Pe(Le(gi.prototype),{constructor:fg,load:function(e,n,o,c){function v(){T.removeEventListener("load",v,!1),T.removeEventListener("error",g,!1),py.add(e,this),n&&n(this),A.manager.itemEnd(e)}function g(D){T.removeEventListener("load",v,!1),T.removeEventListener("error",g,!1),c&&c(D),A.manager.itemError(e),A.manager.itemEnd(e)}this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);var A=this,y=py.get(e);if(y!==void 0)return A.manager.itemStart(e),setTimeout(function(){n&&n(y),A.manager.itemEnd(e)},0),y;var T=document.createElementNS("http://www.w3.org/1999/xhtml","img");return T.addEventListener("load",v,!1),T.addEventListener("error",g,!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(T.crossOrigin=this.crossOrigin),A.manager.itemStart(e),T.src=e,T}}),Px.prototype=Pe(Le(gi.prototype),{constructor:Px,load:function(e,n,o,c){function v(T){A.load(e[T],function(D){g.images[T]=D,y++,y===6&&(g.needsUpdate=!0,n&&n(g))},void 0,c)}var g=new Vi,A=new fg(this.manager);A.setCrossOrigin(this.crossOrigin),A.setPath(this.path);var y=0;for(o=0;o<e.length;++o)v(o);return g}}),xp.prototype=Pe(Le(gi.prototype),{constructor:xp,load:function(e,n,o,c){var v=new J,g=new fg(this.manager);return g.setCrossOrigin(this.crossOrigin),g.setPath(this.path),g.load(e,function(A){v.image=A,A=0<e.search(/\.jpe?g($|\?)/i)||e.search(/^data:image\/jpeg/)===0,v.format=A?1022:1023,v.needsUpdate=!0,n!==void 0&&n(v)},o,c),v}}),Pe(Cn.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,n){return e=this.getUtoTmapping(e),this.getPoint(e,n)},getPoints:function(e){e===void 0&&(e=5);for(var n=[],o=0;o<=e;o++)n.push(this.getPoint(o/e));return n},getSpacedPoints:function(e){e===void 0&&(e=5);for(var n=[],o=0;o<=e;o++)n.push(this.getPointAt(o/e));return n},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e===void 0&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var n=[],o=this.getPoint(0),c,v=0;for(n.push(0),c=1;c<=e;c++){var g=this.getPoint(c/e);v+=g.distanceTo(o),n.push(v),o=g}return this.cacheArcLengths=n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,n){var o=this.getLengths(),c=o.length;n=n||e*o[c-1];for(var v=0,g=c-1,A;v<=g;)if(e=Math.floor(v+(g-v)/2),A=o[e]-n,0>A)v=e+1;else if(0<A)g=e-1;else{g=e;break}return e=g,o[e]===n?e/(c-1):(v=o[e],(e+(n-v)/(o[e+1]-v))/(c-1))},getTangent:function(e,n){var o=e-1e-4;return e+=1e-4,0>o&&(o=0),1<e&&(e=1),o=this.getPoint(o),e=this.getPoint(e),n=n||(o.isVector2?new U:new oe),n.copy(e).sub(o).normalize(),n},getTangentAt:function(e,n){return e=this.getUtoTmapping(e),this.getTangent(e,n)},computeFrenetFrames:function(e,n){var o=new oe,c=[],v=[],g=[],A=new oe,y=new me,T;for(T=0;T<=e;T++){var D=T/e;c[T]=this.getTangentAt(D,new oe),c[T].normalize()}v[0]=new oe,g[0]=new oe,T=Number.MAX_VALUE,D=Math.abs(c[0].x);var X=Math.abs(c[0].y),I=Math.abs(c[0].z);for(D<=T&&(T=D,o.set(1,0,0)),X<=T&&(T=X,o.set(0,1,0)),I<=T&&o.set(0,0,1),A.crossVectors(c[0],o).normalize(),v[0].crossVectors(c[0],A),g[0].crossVectors(c[0],v[0]),T=1;T<=e;T++)v[T]=v[T-1].clone(),g[T]=g[T-1].clone(),A.crossVectors(c[T-1],c[T]),A.length()>Bo&&(A.normalize(),o=Math.acos(ai.clamp(c[T-1].dot(c[T]),-1,1)),v[T].applyMatrix4(y.makeRotationAxis(A,o))),g[T].crossVectors(c[T],v[T]);if(n===!0)for(o=Math.acos(ai.clamp(v[0].dot(v[e]),-1,1)),o/=e,0<c[0].dot(A.crossVectors(v[0],v[e]))&&(o=-o),T=1;T<=e;T++)v[T].applyMatrix4(y.makeRotationAxis(c[T],o*T)),g[T].crossVectors(c[T],v[T]);return{tangents:c,normals:v,binormals:g}},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),kl.prototype=Le(Cn.prototype),kl.prototype.constructor=kl,kl.prototype.isEllipseCurve=!0,kl.prototype.getPoint=function(e,n){n=n||new U;for(var o=2*Math.PI,c=this.aEndAngle-this.aStartAngle,v=Math.abs(c)<Bo;0>c;)c+=o;for(;c>o;)c-=o;c<Bo&&(c=v?0:o),this.aClockwise!==!0||v||(c=c===o?-o:c-o),o=this.aStartAngle+e*c,e=this.aX+this.xRadius*Math.cos(o);var g=this.aY+this.yRadius*Math.sin(o);return this.aRotation!==0&&(o=Math.cos(this.aRotation),c=Math.sin(this.aRotation),v=e-this.aX,g-=this.aY,e=v*o-g*c+this.aX,g=v*c+g*o+this.aY),n.set(e,g)},kl.prototype.copy=function(e){return Cn.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},kl.prototype.toJSON=function(){var e=Cn.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},kl.prototype.fromJSON=function(e){return Cn.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},dg.prototype=Le(kl.prototype),dg.prototype.constructor=dg,dg.prototype.isArcCurve=!0;var eM=new oe,UI=new Qf,kI=new Qf,HI=new Qf;jo.prototype=Le(Cn.prototype),jo.prototype.constructor=jo,jo.prototype.isCatmullRomCurve3=!0,jo.prototype.getPoint=function(e,n){n=n||new oe;var o=this.points,c=o.length;e*=c-(this.closed?0:1);var v=Math.floor(e);if(e-=v,this.closed?v+=0<v?0:(Math.floor(Math.abs(v)/c)+1)*c:e===0&&v===c-1&&(v=c-2,e=1),this.closed||0<v)var g=o[(v-1)%c];else eM.subVectors(o[0],o[1]).add(o[0]),g=eM;var A=o[v%c],y=o[(v+1)%c];if(this.closed||v+2<c?o=o[(v+2)%c]:(eM.subVectors(o[c-1],o[c-2]).add(o[c-1]),o=eM),this.curveType==="centripetal"||this.curveType==="chordal"){var T=this.curveType==="chordal"?.5:.25;c=Math.pow(g.distanceToSquared(A),T),v=Math.pow(A.distanceToSquared(y),T),T=Math.pow(y.distanceToSquared(o),T),1e-4>v&&(v=1),1e-4>c&&(c=v),1e-4>T&&(T=v),UI.initNonuniformCatmullRom(g.x,A.x,y.x,o.x,c,v,T),kI.initNonuniformCatmullRom(g.y,A.y,y.y,o.y,c,v,T),HI.initNonuniformCatmullRom(g.z,A.z,y.z,o.z,c,v,T)}else this.curveType==="catmullrom"&&(UI.initCatmullRom(g.x,A.x,y.x,o.x,this.tension),kI.initCatmullRom(g.y,A.y,y.y,o.y,this.tension),HI.initCatmullRom(g.z,A.z,y.z,o.z,this.tension));return n.set(UI.calc(e),kI.calc(e),HI.calc(e)),n},jo.prototype.copy=function(e){Cn.prototype.copy.call(this,e),this.points=[];for(var n=0,o=e.points.length;n<o;n++)this.points.push(e.points[n].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},jo.prototype.toJSON=function(){var e=Cn.prototype.toJSON.call(this);e.points=[];for(var n=0,o=this.points.length;n<o;n++)e.points.push(this.points[n].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},jo.prototype.fromJSON=function(e){Cn.prototype.fromJSON.call(this,e),this.points=[];for(var n=0,o=e.points.length;n<o;n++){var c=e.points[n];this.points.push(new oe().fromArray(c))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Ks.prototype=Le(Cn.prototype),Ks.prototype.constructor=Ks,Ks.prototype.isCubicBezierCurve=!0,Ks.prototype.getPoint=function(e,n){n=n||new U;var o=this.v0,c=this.v1,v=this.v2,g=this.v3;return n.set(mg(e,o.x,c.x,v.x,g.x),mg(e,o.y,c.y,v.y,g.y)),n},Ks.prototype.copy=function(e){return Cn.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Ks.prototype.toJSON=function(){var e=Cn.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Ks.prototype.fromJSON=function(e){return Cn.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},oo.prototype=Le(Cn.prototype),oo.prototype.constructor=oo,oo.prototype.isCubicBezierCurve3=!0,oo.prototype.getPoint=function(e,n){n=n||new oe;var o=this.v0,c=this.v1,v=this.v2,g=this.v3;return n.set(mg(e,o.x,c.x,v.x,g.x),mg(e,o.y,c.y,v.y,g.y),mg(e,o.z,c.z,v.z,g.z)),n},oo.prototype.copy=function(e){return Cn.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},oo.prototype.toJSON=function(){var e=Cn.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},oo.prototype.fromJSON=function(e){return Cn.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},$a.prototype=Le(Cn.prototype),$a.prototype.constructor=$a,$a.prototype.isLineCurve=!0,$a.prototype.getPoint=function(e,n){return n=n||new U,e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},$a.prototype.getPointAt=function(e,n){return this.getPoint(e,n)},$a.prototype.getTangent=function(e,n){return e=n||new U,e=e.copy(this.v2).sub(this.v1).normalize()},$a.prototype.copy=function(e){return Cn.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},$a.prototype.toJSON=function(){var e=Cn.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},$a.prototype.fromJSON=function(e){return Cn.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Js.prototype=Le(Cn.prototype),Js.prototype.constructor=Js,Js.prototype.isLineCurve3=!0,Js.prototype.getPoint=function(e,n){return n=n||new oe,e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Js.prototype.getPointAt=function(e,n){return this.getPoint(e,n)},Js.prototype.copy=function(e){return Cn.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Js.prototype.toJSON=function(){var e=Cn.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Js.prototype.fromJSON=function(e){return Cn.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ms.prototype=Le(Cn.prototype),ms.prototype.constructor=ms,ms.prototype.isQuadraticBezierCurve=!0,ms.prototype.getPoint=function(e,n){n=n||new U;var o=this.v0,c=this.v1,v=this.v2;return n.set(pg(e,o.x,c.x,v.x),pg(e,o.y,c.y,v.y)),n},ms.prototype.copy=function(e){return Cn.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ms.prototype.toJSON=function(){var e=Cn.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ms.prototype.fromJSON=function(e){return Cn.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},zc.prototype=Le(Cn.prototype),zc.prototype.constructor=zc,zc.prototype.isQuadraticBezierCurve3=!0,zc.prototype.getPoint=function(e,n){n=n||new oe;var o=this.v0,c=this.v1,v=this.v2;return n.set(pg(e,o.x,c.x,v.x),pg(e,o.y,c.y,v.y),pg(e,o.z,c.z,v.z)),n},zc.prototype.copy=function(e){return Cn.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},zc.prototype.toJSON=function(){var e=Cn.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},zc.prototype.fromJSON=function(e){return Cn.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Es.prototype=Le(Cn.prototype),Es.prototype.constructor=Es,Es.prototype.isSplineCurve=!0,Es.prototype.getPoint=function(e,n){n=n||new U;var o=this.points,c=(o.length-1)*e;e=Math.floor(c),c-=e;var v=o[e===0?e:e-1],g=o[e],A=o[e>o.length-2?o.length-1:e+1];return o=o[e>o.length-3?o.length-1:e+2],n.set(WC(c,v.x,g.x,A.x,o.x),WC(c,v.y,g.y,A.y,o.y)),n},Es.prototype.copy=function(e){Cn.prototype.copy.call(this,e),this.points=[];for(var n=0,o=e.points.length;n<o;n++)this.points.push(e.points[n].clone());return this},Es.prototype.toJSON=function(){var e=Cn.prototype.toJSON.call(this);e.points=[];for(var n=0,o=this.points.length;n<o;n++)e.points.push(this.points[n].toArray());return e},Es.prototype.fromJSON=function(e){Cn.prototype.fromJSON.call(this,e),this.points=[];for(var n=0,o=e.points.length;n<o;n++){var c=e.points[n];this.points.push(new U().fromArray(c))}return this};var jI=rc({__proto__:null,ArcCurve:dg,CatmullRomCurve3:jo,CubicBezierCurve:Ks,CubicBezierCurve3:oo,EllipseCurve:kl,LineCurve:$a,LineCurve3:Js,QuadraticBezierCurve:ms,QuadraticBezierCurve3:zc,SplineCurve:Es});ga.prototype=Pe(Le(Cn.prototype),{constructor:ga,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);e.equals(n)||this.curves.push(new $a(n,e))},getPoint:function(e){var n=e*this.getLength(),o=this.getCurveLengths();for(e=0;e<o.length;){if(o[e]>=n)return n=o[e]-n,e=this.curves[e],o=e.getLength(),e.getPointAt(o===0?0:1-n/o);e++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],n=0,o=0,c=this.curves.length;o<c;o++)n+=this.curves[o].getLength(),e.push(n);return this.cacheLengths=e},getSpacedPoints:function(e){e===void 0&&(e=40);for(var n=[],o=0;o<=e;o++)n.push(this.getPoint(o/e));return this.autoClose&&n.push(n[0]),n},getPoints:function(e){e=e||12;for(var n=[],o,c=0,v=this.curves;c<v.length;c++){var g=v[c];g=g.getPoints(g&&g.isEllipseCurve?2*e:g&&(g.isLineCurve||g.isLineCurve3)?1:g&&g.isSplineCurve?e*g.points.length:e);for(var A=0;A<g.length;A++){var y=g[A];o&&o.equals(y)||(n.push(y),o=y)}}return this.autoClose&&1<n.length&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){Cn.prototype.copy.call(this,e),this.curves=[];for(var n=0,o=e.curves.length;n<o;n++)this.curves.push(e.curves[n].clone());return this.autoClose=e.autoClose,this},toJSON:function(){var e=Cn.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var n=0,o=this.curves.length;n<o;n++)e.curves.push(this.curves[n].toJSON());return e},fromJSON:function(e){Cn.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var n=0,o=e.curves.length;n<o;n++){var c=e.curves[n];this.curves.push(new jI[c.type]().fromJSON(c))}return this}}),Hl.prototype=Pe(Le(ga.prototype),{constructor:Hl,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var n=1,o=e.length;n<o;n++)this.lineTo(e[n].x,e[n].y);return this},moveTo:function(e,n){return this.currentPoint.set(e,n),this},lineTo:function(e,n){var o=new $a(this.currentPoint.clone(),new U(e,n));return this.curves.push(o),this.currentPoint.set(e,n),this},quadraticCurveTo:function(e,n,o,c){return e=new ms(this.currentPoint.clone(),new U(e,n),new U(o,c)),this.curves.push(e),this.currentPoint.set(o,c),this},bezierCurveTo:function(e,n,o,c,v,g){return e=new Ks(this.currentPoint.clone(),new U(e,n),new U(o,c),new U(v,g)),this.curves.push(e),this.currentPoint.set(v,g),this},splineThru:function(e){var n=[this.currentPoint.clone()].concat(e);return n=new Es(n),this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,n,o,c,v,g){return this.absarc(e+this.currentPoint.x,n+this.currentPoint.y,o,c,v,g),this},absarc:function(e,n,o,c,v,g){return this.absellipse(e,n,o,o,c,v,g),this},ellipse:function(e,n,o,c,v,g,A,y){return this.absellipse(e+this.currentPoint.x,n+this.currentPoint.y,o,c,v,g,A,y),this},absellipse:function(e,n,o,c,v,g,A,y){return e=new kl(e,n,o,c,v,g,A,y),0<this.curves.length&&(n=e.getPoint(0),n.equals(this.currentPoint)||this.lineTo(n.x,n.y)),this.curves.push(e),e=e.getPoint(1),this.currentPoint.copy(e),this},copy:function(e){return ga.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=ga.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return ga.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Vh.prototype=Pe(Le(Hl.prototype),{constructor:Vh,getPointsHoles:function(e){for(var n=[],o=0,c=this.holes.length;o<c;o++)n[o]=this.holes[o].getPoints(e);return n},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Hl.prototype.copy.call(this,e),this.holes=[];for(var n=0,o=e.holes.length;n<o;n++)this.holes.push(e.holes[n].clone());return this},toJSON:function(){var e=Hl.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var n=0,o=this.holes.length;n<o;n++)e.holes.push(this.holes[n].toJSON());return e},fromJSON:function(e){Hl.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var n=0,o=e.holes.length;n<o;n++){var c=e.holes[n];this.holes.push(new Hl().fromJSON(c))}return this}}),po.prototype=Pe(Le(ce.prototype),{constructor:po,isLight:!0,copy:function(e){return ce.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){return e=ce.prototype.toJSON.call(this,e),e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),e}}),Ap.prototype=Pe(Le(po.prototype),{constructor:Ap,isHemisphereLight:!0,copy:function(e){return po.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Pe(Uc.prototype,{_projScreenMatrix:new me,_lightPositionWorld:new oe,_lookTarget:new oe,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){var n=this.camera,o=this.matrix,c=this._projScreenMatrix,v=this._lookTarget,g=this._lightPositionWorld;g.setFromMatrixPosition(e.matrixWorld),n.position.copy(g),v.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(v),n.updateMatrixWorld(),c.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(c),o.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),o.multiply(n.projectionMatrix),o.multiply(n.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var e={};return this.bias!==0&&(e.bias=this.bias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),gg.prototype=Pe(Le(Uc.prototype),{constructor:gg,isSpotLightShadow:!0,updateMatrices:function(e){var n=this.camera,o=2*ai.RAD2DEG*e.angle,c=this.mapSize.width/this.mapSize.height,v=e.distance||n.far;(o!==n.fov||c!==n.aspect||v!==n.far)&&(n.fov=o,n.aspect=c,n.far=v,n.updateProjectionMatrix()),Uc.prototype.updateMatrices.call(this,e)}}),qu.prototype=Pe(Le(po.prototype),{constructor:qu,isSpotLight:!0,copy:function(e){return po.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),vg.prototype=Pe(Le(Uc.prototype),{constructor:vg,isPointLightShadow:!0,updateMatrices:function(e,n){n===void 0&&(n=0);var o=this.camera,c=this.matrix,v=this._lightPositionWorld,g=this._lookTarget,A=this._projScreenMatrix;v.setFromMatrixPosition(e.matrixWorld),o.position.copy(v),g.copy(o.position),g.add(this._cubeDirections[n]),o.up.copy(this._cubeUps[n]),o.lookAt(g),o.updateMatrixWorld(),c.makeTranslation(-v.x,-v.y,-v.z),A.multiplyMatrices(o.projectionMatrix,o.matrixWorldInverse),this._frustum.setFromProjectionMatrix(A)}}),Wh.prototype=Pe(Le(po.prototype),{constructor:Wh,isPointLight:!0,copy:function(e){return po.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),kc.prototype=Pe(Le(Fn.prototype),{constructor:kc,isOrthographicCamera:!0,copy:function(e,n){return Fn.prototype.copy.call(this,e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Pe({},e.view),this},setViewOffset:function(e,n,o,c,v,g){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=o,this.view.offsetY=c,this.view.width=v,this.view.height=g,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),o=(this.right+this.left)/2,c=(this.top+this.bottom)/2,v=o-e;o+=e,e=c+n,n=c-n,this.view!==null&&this.view.enabled&&(c=(this.right-this.left)/this.view.fullWidth/this.zoom,n=(this.top-this.bottom)/this.view.fullHeight/this.zoom,v+=c*this.view.offsetX,o=v+c*this.view.width,e-=n*this.view.offsetY,n=e-n*this.view.height),this.projectionMatrix.makeOrthographic(v,o,e,n,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){return e=ce.prototype.toJSON.call(this,e),e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Pe({},this.view)),e}}),$f.prototype=Pe(Le(Uc.prototype),{constructor:$f,isDirectionalLightShadow:!0,updateMatrices:function(e){Uc.prototype.updateMatrices.call(this,e)}}),yg.prototype=Pe(Le(po.prototype),{constructor:yg,isDirectionalLight:!0,copy:function(e){return po.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),xg.prototype=Pe(Le(po.prototype),{constructor:xg,isAmbientLight:!0}),wp.prototype=Pe(Le(po.prototype),{constructor:wp,isRectAreaLight:!0,copy:function(e){return po.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){return e=po.prototype.toJSON.call(this,e),e.object.width=this.width,e.object.height=this.height,e}}),Pe(Ox.prototype,{isSphericalHarmonics3:!0,set:function(e){for(var n=0;9>n;n++)this.coefficients[n].copy(e[n]);return this},zero:function(){for(var e=0;9>e;e++)this.coefficients[e].set(0,0,0);return this},getAt:function(e,n){var o=e.x,c=e.y;e=e.z;var v=this.coefficients;return n.copy(v[0]).multiplyScalar(.282095),n.addScaledVector(v[1],.488603*c),n.addScaledVector(v[2],.488603*e),n.addScaledVector(v[3],.488603*o),n.addScaledVector(v[4],1.092548*o*c),n.addScaledVector(v[5],1.092548*c*e),n.addScaledVector(v[6],.315392*(3*e*e-1)),n.addScaledVector(v[7],1.092548*o*e),n.addScaledVector(v[8],.546274*(o*o-c*c)),n},getIrradianceAt:function(e,n){var o=e.x,c=e.y;e=e.z;var v=this.coefficients;return n.copy(v[0]).multiplyScalar(.886227),n.addScaledVector(v[1],1.023328*c),n.addScaledVector(v[2],1.023328*e),n.addScaledVector(v[3],1.023328*o),n.addScaledVector(v[4],.858086*o*c),n.addScaledVector(v[5],.858086*c*e),n.addScaledVector(v[6],.743125*e*e-.247708),n.addScaledVector(v[7],.858086*o*e),n.addScaledVector(v[8],.429043*(o*o-c*c)),n},add:function(e){for(var n=0;9>n;n++)this.coefficients[n].add(e.coefficients[n]);return this},addScaledSH:function(e,n){for(var o=0;9>o;o++)this.coefficients[o].addScaledVector(e.coefficients[o],n);return this},scale:function(e){for(var n=0;9>n;n++)this.coefficients[n].multiplyScalar(e);return this},lerp:function(e,n){for(var o=0;9>o;o++)this.coefficients[o].lerp(e.coefficients[o],n);return this},equals:function(e){for(var n=0;9>n;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0},copy:function(e){return this.set(e.coefficients)},clone:function(){return new this.constructor().copy(this)},fromArray:function(e,n){n===void 0&&(n=0);for(var o=this.coefficients,c=0;9>c;c++)o[c].fromArray(e,n+3*c);return this},toArray:function(e,n){e===void 0&&(e=[]),n===void 0&&(n=0);for(var o=this.coefficients,c=0;9>c;c++)o[c].toArray(e,n+3*c);return e}}),Pe(Ox,{getBasisAt:function(e,n){var o=e.x,c=e.y;e=e.z,n[0]=.282095,n[1]=.488603*c,n[2]=.488603*e,n[3]=.488603*o,n[4]=1.092548*o*c,n[5]=1.092548*c*e,n[6]=.315392*(3*e*e-1),n[7]=1.092548*o*e,n[8]=.546274*(o*o-c*c)}}),jl.prototype=Pe(Le(po.prototype),{constructor:jl,isLightProbe:!0,copy:function(e){return po.prototype.copy.call(this,e),this.sh.copy(e.sh),this},fromJSON:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this},toJSON:function(e){return e=po.prototype.toJSON.call(this,e),e.object.sh=this.sh.toArray(),e}}),hu.prototype=Pe(Le(gi.prototype),{constructor:hu,load:function(e,n,o,c){var v=this,g=new Qa(v.manager);g.setPath(v.path),g.load(e,function(A){try{n(v.parse(JSON.parse(A)))}catch(y){c?c(y):console.error(y),v.manager.itemError(e)}},o,c)},parse:function(e){function n(y){return o[y]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",y),o[y]}var o=this.textures,c=new EG[e.type];if(e.uuid!==void 0&&(c.uuid=e.uuid),e.name!==void 0&&(c.name=e.name),e.color!==void 0&&c.color.setHex(e.color),e.roughness!==void 0&&(c.roughness=e.roughness),e.metalness!==void 0&&(c.metalness=e.metalness),e.sheen!==void 0&&(c.sheen=new Ye().setHex(e.sheen)),e.emissive!==void 0&&c.emissive.setHex(e.emissive),e.specular!==void 0&&c.specular.setHex(e.specular),e.shininess!==void 0&&(c.shininess=e.shininess),e.clearcoat!==void 0&&(c.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(c.clearcoatRoughness=e.clearcoatRoughness),e.fog!==void 0&&(c.fog=e.fog),e.flatShading!==void 0&&(c.flatShading=e.flatShading),e.blending!==void 0&&(c.blending=e.blending),e.combine!==void 0&&(c.combine=e.combine),e.side!==void 0&&(c.side=e.side),e.opacity!==void 0&&(c.opacity=e.opacity),e.transparent!==void 0&&(c.transparent=e.transparent),e.alphaTest!==void 0&&(c.alphaTest=e.alphaTest),e.depthTest!==void 0&&(c.depthTest=e.depthTest),e.depthWrite!==void 0&&(c.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(c.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(c.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(c.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(c.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(c.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(c.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(c.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(c.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(c.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(c.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(c.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(c.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(c.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(c.rotation=e.rotation),e.linewidth!==1&&(c.linewidth=e.linewidth),e.dashSize!==void 0&&(c.dashSize=e.dashSize),e.gapSize!==void 0&&(c.gapSize=e.gapSize),e.scale!==void 0&&(c.scale=e.scale),e.polygonOffset!==void 0&&(c.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(c.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(c.polygonOffsetUnits=e.polygonOffsetUnits),e.skinning!==void 0&&(c.skinning=e.skinning),e.morphTargets!==void 0&&(c.morphTargets=e.morphTargets),e.morphNormals!==void 0&&(c.morphNormals=e.morphNormals),e.dithering!==void 0&&(c.dithering=e.dithering),e.vertexTangents!==void 0&&(c.vertexTangents=e.vertexTangents),e.visible!==void 0&&(c.visible=e.visible),e.toneMapped!==void 0&&(c.toneMapped=e.toneMapped),e.userData!==void 0&&(c.userData=e.userData),e.vertexColors!==void 0&&(c.vertexColors=typeof e.vertexColors=="number"?0<e.vertexColors:e.vertexColors),e.uniforms!==void 0)for(var v in e.uniforms){var g=e.uniforms[v];switch(c.uniforms[v]={},g.type){case"t":c.uniforms[v].value=n(g.value);break;case"c":c.uniforms[v].value=new Ye().setHex(g.value);break;case"v2":c.uniforms[v].value=new U().fromArray(g.value);break;case"v3":c.uniforms[v].value=new oe().fromArray(g.value);break;case"v4":c.uniforms[v].value=new te().fromArray(g.value);break;case"m3":c.uniforms[v].value=new W().fromArray(g.value);case"m4":c.uniforms[v].value=new me().fromArray(g.value);break;default:c.uniforms[v].value=g.value}}if(e.defines!==void 0&&(c.defines=e.defines),e.vertexShader!==void 0&&(c.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(c.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(var A in e.extensions)c.extensions[A]=e.extensions[A];return e.shading!==void 0&&(c.flatShading=e.shading===1),e.size!==void 0&&(c.size=e.size),e.sizeAttenuation!==void 0&&(c.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(c.map=n(e.map)),e.matcap!==void 0&&(c.matcap=n(e.matcap)),e.alphaMap!==void 0&&(c.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(c.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(c.bumpScale=e.bumpScale),e.normalMap!==void 0&&(c.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(c.normalMapType=e.normalMapType),e.normalScale!==void 0&&(v=e.normalScale,Array.isArray(v)===!1&&(v=[v,v]),c.normalScale=new U().fromArray(v)),e.displacementMap!==void 0&&(c.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(c.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(c.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(c.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(c.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(c.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(c.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(c.specularMap=n(e.specularMap)),e.envMap!==void 0&&(c.envMap=n(e.envMap)),e.envMapIntensity!==void 0&&(c.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(c.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(c.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(c.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(c.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(c.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(c.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(c.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(c.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(c.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(c.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(c.clearcoatNormalScale=new U().fromArray(e.clearcoatNormalScale)),c},setTextures:function(e){return this.textures=e,this}});var Wp={decodeText:function(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);for(var n="",o=0,c=e.length;o<c;o++)n+=String.fromCharCode(e[o]);try{return decodeURIComponent(escape(n))}catch{return n}},extractUrlBase:function(e){var n=e.lastIndexOf("/");return n===-1?"./":e.substr(0,n+1)}};Xh.prototype=Pe(Le(Ut.prototype),{constructor:Xh,isInstancedBufferGeometry:!0,copy:function(e){return Ut.prototype.copy.call(this,e),this.instanceCount=e.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var e=Ut.prototype.toJSON.call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}),Hc.prototype=Pe(Le(Ve.prototype),{constructor:Hc,isInstancedBufferAttribute:!0,copy:function(e){return Ve.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){var e=Ve.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),ed.prototype=Pe(Le(gi.prototype),{constructor:ed,load:function(e,n,o,c){var v=this,g=new Qa(v.manager);g.setPath(v.path),g.load(e,function(A){try{n(v.parse(JSON.parse(A)))}catch(y){c?c(y):console.error(y),v.manager.itemError(e)}},o,c)},parse:function(e){var n=e.isInstancedBufferGeometry?new Xh:new Ut,o=e.data.index;if(o!==void 0){var c=new GI[o.type](o.array);n.setIndex(new Ve(c,1))}o=e.data.attributes;for(var v in o){var g=o[v];c=new GI[g.type](g.array),c=new(g.isInstancedBufferAttribute?Hc:Ve)(c,g.itemSize,g.normalized),g.name!==void 0&&(c.name=g.name),n.setAttribute(v,c)}var A=e.data.morphAttributes;if(A)for(v in A){var y=A[v],T=[];o=0;for(var D=y.length;o<D;o++)g=y[o],c=new GI[g.type](g.array),c=new Ve(c,g.itemSize,g.normalized),g.name!==void 0&&(c.name=g.name),T.push(c);n.morphAttributes[v]=T}if(e.data.morphTargetsRelative&&(n.morphTargetsRelative=!0),v=e.data.groups||e.data.drawcalls||e.data.offsets,v!==void 0)for(o=0,g=v.length;o!==g;++o)c=v[o],n.addGroup(c.start,c.count,c.materialIndex);return o=e.data.boundingSphere,o!==void 0&&(v=new oe,o.center!==void 0&&v.fromArray(o.center),n.boundingSphere=new De(v,o.radius)),e.name&&(n.name=e.name),e.userData&&(n.userData=e.userData),n}});var GI={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray<"u"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};Ag.prototype=Pe(Le(gi.prototype),{constructor:Ag,load:function(e,n,o,c){var v=this,g=this.path===""?Wp.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||g,g=new Qa(v.manager),g.setPath(this.path),g.load(e,function(A){var y=null;try{y=JSON.parse(A)}catch(T){c!==void 0&&c(T),console.error("THREE:ObjectLoader: Can't parse "+e+".",T.message);return}A=y.metadata,A===void 0||A.type===void 0||A.type.toLowerCase()==="geometry"?console.error("THREE.ObjectLoader: Can't load "+e):v.parse(y,n)},o,c)},parse:function(e,n){var o=this.parseShape(e.shapes);o=this.parseGeometries(e.geometries,o);var c=this.parseImages(e.images,function(){n!==void 0&&n(v)});c=this.parseTextures(e.textures,c),c=this.parseMaterials(e.materials,c);var v=this.parseObject(e.object,o,c);return e.animations&&(v.animations=this.parseAnimations(e.animations)),e.images!==void 0&&e.images.length!==0||n===void 0||n(v),v},parseShape:function(e){var n={};if(e!==void 0)for(var o=0,c=e.length;o<c;o++){var v=new Vh().fromJSON(e[o]);n[v.uuid]=v}return n},parseGeometries:function(e,n){var o={};if(e!==void 0)for(var c=new ed,v=0,g=e.length;v<g;v++){var A=e[v];switch(A.type){case"PlaneGeometry":case"PlaneBufferGeometry":var y=new wl[A.type](A.width,A.height,A.widthSegments,A.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":y=new wl[A.type](A.width,A.height,A.depth,A.widthSegments,A.heightSegments,A.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":y=new wl[A.type](A.radius,A.segments,A.thetaStart,A.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":y=new wl[A.type](A.radiusTop,A.radiusBottom,A.height,A.radialSegments,A.heightSegments,A.openEnded,A.thetaStart,A.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":y=new wl[A.type](A.radius,A.height,A.radialSegments,A.heightSegments,A.openEnded,A.thetaStart,A.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":y=new wl[A.type](A.radius,A.widthSegments,A.heightSegments,A.phiStart,A.phiLength,A.thetaStart,A.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":y=new wl[A.type](A.radius,A.detail);break;case"RingGeometry":case"RingBufferGeometry":y=new wl[A.type](A.innerRadius,A.outerRadius,A.thetaSegments,A.phiSegments,A.thetaStart,A.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":y=new wl[A.type](A.radius,A.tube,A.radialSegments,A.tubularSegments,A.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":y=new wl[A.type](A.radius,A.tube,A.tubularSegments,A.radialSegments,A.p,A.q);break;case"TubeGeometry":case"TubeBufferGeometry":y=new wl[A.type](new jI[A.path.type]().fromJSON(A.path),A.tubularSegments,A.radius,A.radialSegments,A.closed);break;case"LatheGeometry":case"LatheBufferGeometry":y=new wl[A.type](A.points,A.segments,A.phiStart,A.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":y=new wl[A.type](A.vertices,A.indices,A.radius,A.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":y=[];for(var T=0,D=A.shapes.length;T<D;T++){var X=n[A.shapes[T]];y.push(X)}y=new wl[A.type](y,A.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(y=[],T=0,D=A.shapes.length;T<D;T++)X=n[A.shapes[T]],y.push(X);T=A.options.extrudePath,T!==void 0&&(A.options.extrudePath=new jI[T.type]().fromJSON(T)),y=new wl[A.type](y,A.options);break;case"BufferGeometry":case"InstancedBufferGeometry":y=c.parse(A);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+A.type+'"');continue}y.uuid=A.uuid,A.name!==void 0&&(y.name=A.name),y.isBufferGeometry===!0&&A.userData!==void 0&&(y.userData=A.userData),o[A.uuid]=y}return o},parseMaterials:function(e,n){var o={},c={};if(e!==void 0){var v=new hu;v.setTextures(n),n=0;for(var g=e.length;n<g;n++){var A=e[n];if(A.type==="MultiMaterial"){for(var y=[],T=0;T<A.materials.length;T++){var D=A.materials[T];o[D.uuid]===void 0&&(o[D.uuid]=v.parse(D)),y.push(o[D.uuid])}c[A.uuid]=y}else o[A.uuid]===void 0&&(o[A.uuid]=v.parse(A)),c[A.uuid]=o[A.uuid]}}return c},parseAnimations:function(e){for(var n=[],o=0;o<e.length;o++){var c=e[o],v=qs.parse(c);c.uuid!==void 0&&(v.uuid=c.uuid),n.push(v)}return n},parseImages:function(e,n){function o(b){return c.manager.itemStart(b),g.load(b,function(){c.manager.itemEnd(b)},void 0,function(){c.manager.itemError(b),c.manager.itemEnd(b)})}var c=this,v={};if(e!==void 0&&0<e.length){n=new jC(n);var g=new fg(n);g.setCrossOrigin(this.crossOrigin),n=0;for(var A=e.length;n<A;n++){var y=e[n],T=y.url;if(Array.isArray(T)){v[y.uuid]=[];for(var D=0,X=T.length;D<X;D++){var I=T[D];I=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(I)?I:c.resourcePath+I,v[y.uuid].push(o(I))}}else I=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(y.url)?y.url:c.resourcePath+y.url,v[y.uuid]=o(I)}}return v},parseTextures:function(e,n){function o(T,D){return typeof T=="number"?T:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",T),D[T])}var c={};if(e!==void 0)for(var v=0,g=e.length;v<g;v++){var A=e[v];A.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',A.uuid),n[A.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",A.image);var y=Array.isArray(n[A.image])?new Vi(n[A.image]):new J(n[A.image]);y.needsUpdate=!0,y.uuid=A.uuid,A.name!==void 0&&(y.name=A.name),A.mapping!==void 0&&(y.mapping=o(A.mapping,IG)),A.offset!==void 0&&y.offset.fromArray(A.offset),A.repeat!==void 0&&y.repeat.fromArray(A.repeat),A.center!==void 0&&y.center.fromArray(A.center),A.rotation!==void 0&&(y.rotation=A.rotation),A.wrap!==void 0&&(y.wrapS=o(A.wrap[0],Tb),y.wrapT=o(A.wrap[1],Tb)),A.format!==void 0&&(y.format=A.format),A.type!==void 0&&(y.type=A.type),A.encoding!==void 0&&(y.encoding=A.encoding),A.minFilter!==void 0&&(y.minFilter=o(A.minFilter,Eb)),A.magFilter!==void 0&&(y.magFilter=o(A.magFilter,Eb)),A.anisotropy!==void 0&&(y.anisotropy=A.anisotropy),A.flipY!==void 0&&(y.flipY=A.flipY),A.premultiplyAlpha!==void 0&&(y.premultiplyAlpha=A.premultiplyAlpha),A.unpackAlignment!==void 0&&(y.unpackAlignment=A.unpackAlignment),c[A.uuid]=y}return c},parseObject:function(e,n,o){function c(D){return n[D]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",D),n[D]}function v(D){if(D!==void 0){if(Array.isArray(D)){for(var X=[],I=0,b=D.length;I<b;I++){var N=D[I];o[N]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",N),X.push(o[N])}return X}return o[D]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",D),o[D]}}switch(e.type){case"Scene":var g=new _e;e.background!==void 0&&kp(e.background)&&(g.background=new Ye(e.background)),e.fog!==void 0&&(e.fog.type==="Fog"?g.fog=new Tx(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(g.fog=new Jo(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":g=new lr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(g.focus=e.focus),e.zoom!==void 0&&(g.zoom=e.zoom),e.filmGauge!==void 0&&(g.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(g.filmOffset=e.filmOffset),e.view!==void 0&&(g.view=Pe({},e.view));break;case"OrthographicCamera":g=new kc(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(g.zoom=e.zoom),e.view!==void 0&&(g.view=Pe({},e.view));break;case"AmbientLight":g=new xg(e.color,e.intensity);break;case"DirectionalLight":g=new yg(e.color,e.intensity);break;case"PointLight":g=new Wh(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":g=new wp(e.color,e.intensity,e.width,e.height);break;case"SpotLight":g=new qu(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":g=new Ap(e.color,e.groundColor,e.intensity);break;case"LightProbe":g=new jl().fromJSON(e);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":g=c(e.geometry);var A=v(e.material);g=new _r(g,A);break;case"InstancedMesh":g=c(e.geometry),A=v(e.material);var y=e.instanceMatrix;g=new ia(g,A,e.count),g.instanceMatrix=new Ve(new Float32Array(y.array),16);break;case"LOD":g=new p0;break;case"Line":g=new Xs(c(e.geometry),v(e.material),e.mode);break;case"LineLoop":g=new qm(c(e.geometry),v(e.material));break;case"LineSegments":g=new io(c(e.geometry),v(e.material));break;case"PointCloud":case"Points":g=new zh(c(e.geometry),v(e.material));break;case"Sprite":g=new d0(v(e.material));break;case"Group":g=new fs;break;default:g=new ce}if(g.uuid=e.uuid,e.name!==void 0&&(g.name=e.name),e.matrix!==void 0?(g.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(g.matrixAutoUpdate=e.matrixAutoUpdate),g.matrixAutoUpdate&&g.matrix.decompose(g.position,g.quaternion,g.scale)):(e.position!==void 0&&g.position.fromArray(e.position),e.rotation!==void 0&&g.rotation.fromArray(e.rotation),e.quaternion!==void 0&&g.quaternion.fromArray(e.quaternion),e.scale!==void 0&&g.scale.fromArray(e.scale)),e.castShadow!==void 0&&(g.castShadow=e.castShadow),e.receiveShadow!==void 0&&(g.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(g.shadow.bias=e.shadow.bias),e.shadow.radius!==void 0&&(g.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&g.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(g.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(g.visible=e.visible),e.frustumCulled!==void 0&&(g.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(g.renderOrder=e.renderOrder),e.userData!==void 0&&(g.userData=e.userData),e.layers!==void 0&&(g.layers.mask=e.layers),e.children!==void 0)for(y=e.children,A=0;A<y.length;A++)g.add(this.parseObject(y[A],n,o));if(e.type==="LOD")for(e.autoUpdate!==void 0&&(g.autoUpdate=e.autoUpdate),e=e.levels,y=0;y<e.length;y++){A=e[y];var T=g.getObjectByProperty("uuid",A.object);T!==void 0&&g.addLevel(T,A.distance)}return g}});var IG={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},Tb={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},Eb={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:1006,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008};wg.prototype=Pe(Le(gi.prototype),{constructor:wg,setOptions:function(e){return this.options=e,this},load:function(e,n,o,c){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);var v=this,g=py.get(e);if(g!==void 0)return v.manager.itemStart(e),setTimeout(function(){n&&n(g),v.manager.itemEnd(e)},0),g;fetch(e).then(function(A){return A.blob()}).then(function(A){return v.options===void 0?createImageBitmap(A):createImageBitmap(A,v.options)}).then(function(A){py.add(e,A),n&&n(A),v.manager.itemEnd(e)}).catch(function(A){c&&c(A),v.manager.itemError(e),v.manager.itemEnd(e)}),v.manager.itemStart(e)}}),Pe(Dx.prototype,{moveTo:function(e,n){return this.currentPath=new Hl,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this},lineTo:function(e,n){return this.currentPath.lineTo(e,n),this},quadraticCurveTo:function(e,n,o,c){return this.currentPath.quadraticCurveTo(e,n,o,c),this},bezierCurveTo:function(e,n,o,c,v,g){return this.currentPath.bezierCurveTo(e,n,o,c,v,g),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,n){function o(re){for(var se=[],ue=0,we=re.length;ue<we;ue++){var Te=re[ue],je=new Vh;je.curves=Te.curves,se.push(je)}return se}function c(re,se){for(var ue=se.length,we=!1,Te=ue-1,je=0;je<ue;Te=je++){var Ge=se[Te],He=se[je],lt=He.x-Ge.x,ht=He.y-Ge.y;if(Math.abs(ht)>Bo){if(0>ht&&(Ge=se[je],lt=-lt,He=se[Te],ht=-ht),!(re.y<Ge.y||re.y>He.y))if(re.y===Ge.y){if(re.x===Ge.x)return!0}else{if(Te=ht*(re.x-Ge.x)-lt*(re.y-Ge.y),Te===0)return!0;0>Te||(we=!we)}}else if(re.y===Ge.y&&(He.x<=re.x&&re.x<=Ge.x||Ge.x<=re.x&&re.x<=He.x))return!0}return we}var v=Vp.isClockWise,g=this.subPaths;if(g.length===0)return[];if(n===!0)return o(g);if(n=[],g.length===1){var A=g[0],y=new Vh;return y.curves=A.curves,n.push(y),n}var T=!v(g[0].getPoints());T=e?!T:T,y=[];var D=[],X=[],I=0;D[I]=void 0,X[I]=[];for(var b=0,N=g.length;b<N;b++){A=g[b];var k=A.getPoints(),G=v(k);(G=e?!G:G)?(!T&&D[I]&&I++,D[I]={s:new Vh,p:k},D[I].s.curves=A.curves,T&&I++,X[I]=[]):X[I].push({h:A,p:k[0]})}if(!D[0])return o(g);if(1<D.length){for(b=!1,e=[],v=0,g=D.length;v<g;v++)y[v]=[];for(v=0,g=D.length;v<g;v++)for(A=X[v],G=0;G<A.length;G++){for(T=A[G],I=!0,k=0;k<D.length;k++)c(T.p,D[k].p)&&(v!==k&&e.push({froms:v,tos:k,hole:G}),I?(I=!1,y[k].push(T)):b=!0);I&&y[v].push(T)}0<e.length&&(b||(X=y))}for(b=0,v=D.length;b<v;b++)for(y=D[b].s,n.push(y),e=X[b],g=0,A=e.length;g<A;g++)y.holes.push(e[g].h);return n}}),Pe(bx.prototype,{isFont:!0,generateShapes:function(e,n){n===void 0&&(n=100);var o=[],c=n;n=this.data;var v=U0?U0(e):String(e).split("");c/=n.resolution;var g=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*c;e=[];for(var A=0,y=0,T=0;T<v.length;T++){var D=v[T];if(D===`
`)A=0,y-=g;else{var X=D;D=c;var I=A,b=y,N=n,k=N.glyphs[X]||N.glyphs["?"];if(k){if(X=new Dx,k.o){N=k._cachedOutline||(k._cachedOutline=k.o.split(" "));for(var G=0,re=N.length;G<re;)switch(N[G++]){case"m":var se=N[G++]*D+I,ue=N[G++]*D+b;X.moveTo(se,ue);break;case"l":se=N[G++]*D+I,ue=N[G++]*D+b,X.lineTo(se,ue);break;case"q":var we=N[G++]*D+I,Te=N[G++]*D+b,je=N[G++]*D+I,Ge=N[G++]*D+b;X.quadraticCurveTo(je,Ge,we,Te);break;case"b":we=N[G++]*D+I,Te=N[G++]*D+b,je=N[G++]*D+I,Ge=N[G++]*D+b,se=N[G++]*D+I,ue=N[G++]*D+b,X.bezierCurveTo(je,Ge,se,ue,we,Te)}}D={offsetX:k.ha*D,path:X}}else console.error('THREE.Font: character "'+X+'" does not exists in font family '+N.familyName+"."),D=void 0;A+=D.offsetX,e.push(D.path)}}for(n=0,v=e.length;n<v;n++)Array.prototype.push.apply(o,e[n].toShapes());return o}}),Fx.prototype=Pe(Le(gi.prototype),{constructor:Fx,load:function(e,n,o,c){var v=this,g=new Qa(this.manager);g.setPath(this.path),g.load(e,function(A){try{var y=JSON.parse(A)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),y=JSON.parse(A.substring(65,A.length-2))}A=v.parse(y),n&&n(A)},o,c)},parse:function(e){return new bx(e)}});var tM,Ib={getContext:function(){return tM===void 0&&(tM=new(window.AudioContext||window.webkitAudioContext)),tM},setContext:function(e){tM=e}};td.prototype=Pe(Le(gi.prototype),{constructor:td,load:function(e,n,o,c){var v=this,g=new Qa(v.manager);g.setResponseType("arraybuffer"),g.setPath(v.path),g.load(e,function(A){try{var y=A.slice(0);Ib.getContext().decodeAudioData(y,function(T){n(T)})}catch(T){c?c(T):console.error(T),v.manager.itemError(e)}},o,c)}}),Is.prototype=Pe(Le(jl.prototype),{constructor:Is,isHemisphereLightProbe:!0,copy:function(e){return jl.prototype.copy.call(this,e),this},toJSON:function(e){return jl.prototype.toJSON.call(this,e)}}),fu.prototype=Pe(Le(jl.prototype),{constructor:fu,isAmbientLightProbe:!0,copy:function(e){return jl.prototype.copy.call(this,e),this},toJSON:function(e){return jl.prototype.toJSON.call(this,e)}});var Rb=new me,Lb=new me;Pe((function(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new lr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new lr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}).prototype,{update:function(e){var n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep;var o=e.projectionMatrix.clone(),c=n.eyeSep/2,v=c*n.near/n.focus,g=n.near*Math.tan(ai.DEG2RAD*n.fov*.5)/n.zoom;Lb.elements[12]=-c,Rb.elements[12]=c,c=-g*n.aspect+v;var A=g*n.aspect+v;o.elements[0]=2*n.near/(A-c),o.elements[8]=(A+c)/(A-c),this.cameraL.projectionMatrix.copy(o),c=-g*n.aspect-v,A=g*n.aspect-v,o.elements[0]=2*n.near/(A-c),o.elements[8]=(A+c)/(A-c),this.cameraR.projectionMatrix.copy(o)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Lb),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Rb)}}),Pe(S0.prototype,{start:function(){this.oldTime=this.startTime=(typeof performance>"u"?Date:performance).now(),this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.autoStart=this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var n=(typeof performance>"u"?Date:performance).now();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}});var Qg=new oe,Pb=new he,RG=new oe,$g=new oe;Nx.prototype=Pe(Le(ce.prototype),{constructor:Nx,getInput:function(){return this.gain},removeFilter:function(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(e){ce.prototype.updateMatrixWorld.call(this,e),e=this.context.listener;var n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Qg,Pb,RG),$g.set(0,0,-1).applyQuaternion(Pb),e.positionX){var o=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(Qg.x,o),e.positionY.linearRampToValueAtTime(Qg.y,o),e.positionZ.linearRampToValueAtTime(Qg.z,o),e.forwardX.linearRampToValueAtTime($g.x,o),e.forwardY.linearRampToValueAtTime($g.y,o),e.forwardZ.linearRampToValueAtTime($g.z,o),e.upX.linearRampToValueAtTime(n.x,o),e.upY.linearRampToValueAtTime(n.y,o),e.upZ.linearRampToValueAtTime(n.z,o)}else e.setPosition(Qg.x,Qg.y,Qg.z),e.setOrientation($g.x,$g.y,$g.z,n.x,n.y,n.z)}}),Cp.prototype=Pe(Le(ce.prototype),{constructor:Cp,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setMediaStreamSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(e){if(e===void 0&&(e=0),this.isPlaying===!0)console.warn("THREE.Audio: Audio is already playing.");else if(this.hasPlaybackControl===!1)console.warn("THREE.Audio: this Audio has no playback control.");else return this._startedAt=this.context.currentTime+e,e=this.context.createBufferSource(),e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()},pause:function(){if(this.hasPlaybackControl===!1)console.warn("THREE.Audio: this Audio has no playback control.");else return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress%=this.duration||this.buffer.duration),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this},stop:function(){if(this.hasPlaybackControl===!1)console.warn("THREE.Audio: this Audio has no playback control.");else return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),this.isPlaying===!0?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(this.hasPlaybackControl===!1)console.warn("THREE.Audio: this Audio has no playback control.");else return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(this.hasPlaybackControl===!1)console.warn("THREE.Audio: this Audio has no playback control.");else return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this},setLoopStart:function(e){return this.loopStart=e,this},setLoopEnd:function(e){return this.loopEnd=e,this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}});var ev=new oe,Ob=new he,LG=new oe,tv=new oe;Bx.prototype=Pe(Le(Cp.prototype),{constructor:Bx,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,n,o){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=o,this},updateMatrixWorld:function(e){if(ce.prototype.updateMatrixWorld.call(this,e),this.hasPlaybackControl!==!0||this.isPlaying!==!1)if(this.matrixWorld.decompose(ev,Ob,LG),tv.set(0,0,1).applyQuaternion(Ob),e=this.panner,e.positionX){var n=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(ev.x,n),e.positionY.linearRampToValueAtTime(ev.y,n),e.positionZ.linearRampToValueAtTime(ev.z,n),e.orientationX.linearRampToValueAtTime(tv.x,n),e.orientationY.linearRampToValueAtTime(tv.y,n),e.orientationZ.linearRampToValueAtTime(tv.z,n)}else e.setPosition(ev.x,ev.y,ev.z),e.setOrientation(tv.x,tv.y,tv.z)}}),Pe(zx.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,n=this.getFrequencyData(),o=0;o<n.length;o++)e+=n[o];return e/n.length}}),Pe(T0.prototype,{accumulate:function(e,n){var o=this.buffer,c=this.valueSize;e=e*c+c;var v=this.cumulativeWeight;if(v===0){for(v=0;v!==c;++v)o[e+v]=o[v];v=n}else v+=n,this._mixBufferRegion(o,e,0,n/v,c);this.cumulativeWeight=v},accumulateAdditive:function(e){var n=this.buffer,o=this.valueSize,c=o*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,c,0,e,o),this.cumulativeWeightAdditive+=e},apply:function(e){var n=this.valueSize,o=this.buffer;e=e*n+n;var c=this.cumulativeWeight,v=this.cumulativeWeightAdditive,g=this.binding;for(this.cumulativeWeightAdditive=this.cumulativeWeight=0,1>c&&this._mixBufferRegion(o,e,n*this._origIndex,1-c,n),0<v&&this._mixBufferRegionAdditive(o,e,this._addIndex*n,1,n),c=n,v=n+n;c!==v;++c)if(o[c]!==o[c+n]){g.setValue(o,e);break}},saveOriginalState:function(){var e=this.buffer,n=this.valueSize,o=n*this._origIndex;this.binding.getValue(e,o);for(var c=n;c!==o;++c)e[c]=e[o+c%n];this._setIdentity(),this.cumulativeWeightAdditive=this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_setAdditiveIdentityNumeric:function(){for(var e=this._addIndex*this.valueSize,n=e+this.valueSize;e<n;e++)this.buffer[e]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[4*this._addIndex+3]=1},_setAdditiveIdentityOther:function(){for(var e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize,o=0;o<this.valueSize;o++)this.buffer[n+o]=this.buffer[e+o]},_select:function(e,n,o,c,v){if(.5<=c)for(c=0;c!==v;++c)e[n+c]=e[o+c]},_slerp:function(e,n,o,c){he.slerpFlat(e,n,e,n,e,o,c)},_slerpAdditive:function(e,n,o,c,v){v*=this._workIndex,he.multiplyQuaternionsFlat(e,v,e,n,e,o),he.slerpFlat(e,n,e,n,e,v,c)},_lerp:function(e,n,o,c,v){for(var g=1-c,A=0;A!==v;++A){var y=n+A;e[y]=e[y]*g+e[o+A]*c}},_lerpAdditive:function(e,n,o,c,v){for(var g=0;g!==v;++g){var A=n+g;e[A]+=e[o+g]*c}}});var PG=/[\[\]\.:\/]/g,OG="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",DG=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),bG=/(WCOD+)?/.source.replace("WCOD",OG),FG=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),NG=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),BG=new RegExp("^"+DG+bG+FG+NG+"$"),zG=["material","materials","bones"];Pe(Ux.prototype,{getValue:function(e,n){this.bind();var o=this._bindings[this._targetGroup.nCachedObjects_];o!==void 0&&o.getValue(e,n)},setValue:function(e,n){for(var o=this._bindings,c=this._targetGroup.nCachedObjects_,v=o.length;c!==v;++c)o[c].setValue(e,n)},bind:function(){for(var e=this._bindings,n=this._targetGroup.nCachedObjects_,o=e.length;n!==o;++n)e[n].bind()},unbind:function(){for(var e=this._bindings,n=this._targetGroup.nCachedObjects_,o=e.length;n!==o;++n)e[n].unbind()}}),Pe(ka,{Composite:Ux,create:function(e,n,o){return e&&e.isAnimationObjectGroup?new ka.Composite(e,n,o):new ka(e,n,o)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(PG,"")},parseTrackName:function(e){var n=BG.exec(e);if(!n)throw Error("PropertyBinding: Cannot parse trackName: "+e);n={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]};var o=n.nodeName&&n.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){var c=n.nodeName.substring(o+1);zG.indexOf(c)!==-1&&(n.nodeName=n.nodeName.substring(0,o),n.objectName=c)}if(n.propertyName===null||n.propertyName.length===0)throw Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n},findNode:function(e,n){if(!n||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){var o=e.skeleton.getBoneByName(n);if(o!==void 0)return o}return e.children&&(e=function c(v){for(var g=0;g<v.length;g++){var A=v[g];if(A.name===n||A.uuid===n||(A=c(A.children)))return A}return null}(e.children))?e:null}}),Pe(ka.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,n){e[n]=this.node[this.propertyName]},function(e,n){for(var o=this.resolvedProperty,c=0,v=o.length;c!==v;++c)e[n++]=o[c]},function(e,n){e[n]=this.resolvedProperty[this.propertyIndex]},function(e,n){this.resolvedProperty.toArray(e,n)}],SetterByBindingTypeAndVersioning:[[function(e,n){this.targetObject[this.propertyName]=e[n]},function(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0},function(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,n){for(var o=this.resolvedProperty,c=0,v=o.length;c!==v;++c)o[c]=e[n++]},function(e,n){for(var o=this.resolvedProperty,c=0,v=o.length;c!==v;++c)o[c]=e[n++];this.targetObject.needsUpdate=!0},function(e,n){for(var o=this.resolvedProperty,c=0,v=o.length;c!==v;++c)o[c]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,n){this.resolvedProperty[this.propertyIndex]=e[n]},function(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0},function(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,n){this.resolvedProperty.fromArray(e,n)},function(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0},function(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,n){this.bind(),this.getValue(e,n)},setValue:function(e,n){this.bind(),this.setValue(e,n)},bind:function(){var e=this.node,n=this.parsedPath,o=n.objectName,c=n.propertyName,v=n.propertyIndex;if(e||(this.node=e=ka.findNode(this.rootNode,n.nodeName)||this.rootNode),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(o){var g=n.objectIndex;switch(o){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}for(e=e.skeleton.bones,o=0;o<e.length;o++)if(e[o].name===g){g=o;break}break;default:if(e[o]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[o]}if(g!==void 0){if(e[g]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[g]}}if(g=e[c],g===void 0)console.error("THREE.PropertyBinding: Trying to update property for track: "+n.nodeName+"."+c+" but it wasn't found.",e);else{if(n=this.Versioning.None,this.targetObject=e,e.needsUpdate!==void 0?n=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(n=this.Versioning.MatrixWorldNeedsUpdate),o=this.BindingType.Direct,v!==void 0){if(c==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[v]!==void 0&&(v=e.morphTargetDictionary[v])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}o=this.BindingType.ArrayElement,this.resolvedProperty=g,this.propertyIndex=v}else g.fromArray!==void 0&&g.toArray!==void 0?(o=this.BindingType.HasFromToArray,this.resolvedProperty=g):Array.isArray(g)?(o=this.BindingType.EntireArray,this.resolvedProperty=g):this.propertyName=c;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][n]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Pe(ka.prototype,{_getValue_unbound:ka.prototype.getValue,_setValue_unbound:ka.prototype.setValue}),Pe((function(){this.uuid=ai.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var n=0,o=arguments.length;n!==o;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var c=this;this.stats={objects:{get total(){return c._objects.length},get inUse(){return this.total-c.nCachedObjects_}},get bindingsPerObject(){return c._bindings.length}}}).prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,n=e.length,o=this.nCachedObjects_,c=this._indicesByUUID,v=this._paths,g=this._parsedPaths,A=this._bindings,y=A.length,T=void 0,D=0,X=arguments.length;D!==X;++D){var I=arguments[D],b=I.uuid,N=c[b];if(N===void 0){N=n++,c[b]=N,e.push(I),b=0;for(var k=y;b!==k;++b)A[b].push(new ka(I,v[b],g[b]))}else if(N<o){T=e[N];var G=--o;for(k=e[G],c[k.uuid]=N,e[N]=k,c[b]=G,e[G]=I,b=0,k=y;b!==k;++b){var re=A[b],se=re[N];re[N]=re[G],se===void 0&&(se=new ka(I,v[b],g[b])),re[G]=se}}else e[N]!==T&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=o},remove:function(){for(var e=this._objects,n=this.nCachedObjects_,o=this._indicesByUUID,c=this._bindings,v=c.length,g=0,A=arguments.length;g!==A;++g){var y=arguments[g],T=y.uuid,D=o[T];if(D!==void 0&&D>=n){var X=n++,I=e[X];for(o[I.uuid]=D,e[D]=I,o[T]=X,e[X]=y,y=0,T=v;y!==T;++y){I=c[y];var b=I[D];I[D]=I[X],I[X]=b}}}this.nCachedObjects_=n},uncache:function(){for(var e=this._objects,n=e.length,o=this.nCachedObjects_,c=this._indicesByUUID,v=this._bindings,g=v.length,A=0,y=arguments.length;A!==y;++A){var T=arguments[A].uuid,D=c[T];if(D!==void 0)if(delete c[T],D<o){T=--o;var X=e[T],I=--n,b=e[I];for(c[X.uuid]=D,e[D]=X,c[b.uuid]=T,e[T]=b,e.pop(),X=0,b=g;X!==b;++X){var N=v[X],k=N[I];N[D]=N[T],N[T]=k,N.pop()}}else for(I=--n,b=e[I],c[b.uuid]=D,e[D]=b,e.pop(),X=0,b=g;X!==b;++X)N=v[X],N[D]=N[I],N.pop()}this.nCachedObjects_=o},subscribe_:function(e,n){var o=this._bindingsIndicesByPath,c=o[e],v=this._bindings;if(c!==void 0)return v[c];var g=this._paths,A=this._parsedPaths,y=this._objects,T=this.nCachedObjects_,D=Array(y.length);for(c=v.length,o[e]=c,g.push(e),A.push(n),v.push(D),o=T,c=y.length;o!==c;++o)D[o]=new ka(y[o],e,n);return D},unsubscribe_:function(e){var n=this._bindingsIndicesByPath,o=n[e];if(o!==void 0){var c=this._paths,v=this._parsedPaths,g=this._bindings,A=g.length-1,y=g[A];n[e[A]]=o,g[o]=y,g.pop(),v[o]=v[A],v.pop(),c[o]=c[A],c.pop()}}}),Pe(kx.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,n){return this.loop=e,this.repetitions=n,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,n,o){if(e.fadeOut(n),this.fadeIn(n),o){o=this._clip.duration;var c=e._clip.duration,v=o/c;e.warp(1,c/o,n),this.warp(v,1,n)}return this},crossFadeTo:function(e,n,o){return e.crossFadeFrom(this,n,o)},stopFading:function(){var e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,n,o){var c=this._mixer,v=c.time,g=this._timeScaleInterpolant,A=this.timeScale;return g===null&&(this._timeScaleInterpolant=g=c._lendControlInterpolant()),c=g.parameterPositions,g=g.sampleValues,c[0]=v,c[1]=v+o,g[0]=e/A,g[1]=n/A,this},stopWarping:function(){var e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,n,o,c){if(this.enabled){var v=this._startTime;if(v!==null){if(n=(e-v)*o,0>n||o===0)return;this._startTime=null,n*=o}if(n*=this._updateTimeScale(e),o=this._updateTime(n),e=this._updateWeight(e),0<e)switch(n=this._interpolants,v=this._propertyBindings,this.blendMode){case 2501:for(var g=0,A=n.length;g!==A;++g)n[g].evaluate(o),v[g].accumulateAdditive(e);break;default:for(g=0,A=n.length;g!==A;++g)n[g].evaluate(o),v[g].accumulate(c,e)}}else this._updateWeight(e)},_updateWeight:function(e){var n=0;if(this.enabled){n=this.weight;var o=this._weightInterpolant;if(o!==null){var c=o.evaluate(e)[0];n*=c,e>o.parameterPositions[1]&&(this.stopFading(),c===0&&(this.enabled=!1))}}return this._effectiveWeight=n},_updateTimeScale:function(e){var n=0;if(!this.paused){n=this.timeScale;var o=this._timeScaleInterpolant;if(o!==null){var c=o.evaluate(e)[0];n*=c,e>o.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n},_updateTime:function(e){var n=this.time+e,o=this._clip.duration,c=this.loop,v=this._loopCount,g=c===2202;if(e===0)return v===-1?n:g&&(v&1)===1?o-n:n;if(c===2200)e:{if(v===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1)),n>=o)n=o;else if(0>n)n=0;else{this.time=n;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:0>e?-1:1})}else{if(v===-1&&(0<=e?(v=0,this._setEndings(!0,this.repetitions===0,g)):this._setEndings(this.repetitions===0,!0,g)),n>=o||0>n){c=Math.floor(n/o),n-=o*c,v+=Math.abs(c);var A=this.repetitions-v;0>=A?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n=0<e?o:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<e?1:-1})):(A===1?(e=0>e,this._setEndings(e,!e,g)):this._setEndings(!1,!1,g),this._loopCount=v,this.time=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:c}))}else this.time=n;if(g&&(v&1)===1)return o-n}return n},_setEndings:function(e,n,o){var c=this._interpolantSettings;o?(c.endingStart=2401,c.endingEnd=2401):(c.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,c.endingEnd=n?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(e,n,o){var c=this._mixer,v=c.time,g=this._weightInterpolant;return g===null&&(this._weightInterpolant=g=c._lendControlInterpolant()),c=g.parameterPositions,g=g.sampleValues,c[0]=v,g[0]=n,c[1]=v+e,g[1]=o,this}}),Hx.prototype=Pe(Le(z.prototype),{constructor:Hx,_bindAction:function(e,n){var o=e._localRoot||this._root,c=e._clip.tracks,v=c.length,g=e._propertyBindings;e=e._interpolants;var A=o.uuid,y=this._bindingsByRootAndName,T=y[A];for(T===void 0&&(T={},y[A]=T),y=0;y!==v;++y){var D=c[y],X=D.name,I=T[X];if(I===void 0){if(I=g[y],I!==void 0){I._cacheIndex===null&&(++I.referenceCount,this._addInactiveBinding(I,A,X));continue}I=new T0(ka.create(o,X,n&&n._propertyBindings[y].binding.parsedPath),D.ValueTypeName,D.getValueSize()),++I.referenceCount,this._addInactiveBinding(I,A,X)}g[y]=I,e[y].resultBuffer=I.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){var n=(e._localRoot||this._root).uuid,o=e._clip.uuid,c=this._actionsByClip[o];this._bindAction(e,c&&c.knownActions[0]),this._addInactiveAction(e,o,n)}for(n=e._propertyBindings,o=0,c=n.length;o!==c;++o){var v=n[o];v.useCount++===0&&(this._lendBinding(v),v.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var n=e._propertyBindings,o=0,c=n.length;o!==c;++o){var v=n[o];--v.useCount===0&&(v.restoreOriginalState(),this._takeBackBinding(v))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){return e=e._cacheIndex,e!==null&&e<this._nActiveActions},_addInactiveAction:function(e,n,o){var c=this._actions,v=this._actionsByClip,g=v[n];g===void 0?(g={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,v[n]=g):(n=g.knownActions,e._byClipCacheIndex=n.length,n.push(e)),e._cacheIndex=c.length,c.push(e),g.actionByRoot[o]=e},_removeInactiveAction:function(e){var n=this._actions,o=n[n.length-1],c=e._cacheIndex;o._cacheIndex=c,n[c]=o,n.pop(),e._cacheIndex=null,n=e._clip.uuid,o=this._actionsByClip,c=o[n];var v=c.knownActions,g=v[v.length-1],A=e._byClipCacheIndex;g._byClipCacheIndex=A,v[A]=g,v.pop(),e._byClipCacheIndex=null,delete c.actionByRoot[(e._localRoot||this._root).uuid],v.length===0&&delete o[n],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){e=e._propertyBindings;for(var n=0,o=e.length;n!==o;++n){var c=e[n];--c.referenceCount===0&&this._removeInactiveBinding(c)}},_lendAction:function(e){var n=this._actions,o=e._cacheIndex,c=this._nActiveActions++,v=n[c];e._cacheIndex=c,n[c]=e,v._cacheIndex=o,n[o]=v},_takeBackAction:function(e){var n=this._actions,o=e._cacheIndex,c=--this._nActiveActions,v=n[c];e._cacheIndex=c,n[c]=e,v._cacheIndex=o,n[o]=v},_addInactiveBinding:function(e,n,o){var c=this._bindingsByRootAndName,v=c[n],g=this._bindings;v===void 0&&(v={},c[n]=v),v[o]=e,e._cacheIndex=g.length,g.push(e)},_removeInactiveBinding:function(e){var n=this._bindings,o=e.binding,c=o.rootNode.uuid;o=o.path;var v=this._bindingsByRootAndName,g=v[c],A=n[n.length-1];e=e._cacheIndex,A._cacheIndex=e,n[e]=A,n.pop(),delete g[o],Hi(g).length===0&&delete v[c]},_lendBinding:function(e){var n=this._bindings,o=e._cacheIndex,c=this._nActiveBindings++,v=n[c];e._cacheIndex=c,n[c]=e,v._cacheIndex=o,n[o]=v},_takeBackBinding:function(e){var n=this._bindings,o=e._cacheIndex,c=--this._nActiveBindings,v=n[c];e._cacheIndex=c,n[c]=e,v._cacheIndex=o,n[o]=v},_lendControlInterpolant:function(){var e=this._controlInterpolants,n=this._nActiveControlInterpolants++,o=e[n];return o===void 0&&(o=new _0(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),o.__cacheIndex=n,e[n]=o),o},_takeBackControlInterpolant:function(e){var n=this._controlInterpolants,o=e.__cacheIndex,c=--this._nActiveControlInterpolants,v=n[c];e.__cacheIndex=c,n[c]=e,v.__cacheIndex=o,n[o]=v},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,n,o){var c=n||this._root,v=c.uuid;c=typeof e=="string"?qs.findByName(c,e):e,e=c!==null?c.uuid:e;var g=this._actionsByClip[e],A=null;if(o===void 0&&(o=c!==null?c.blendMode:2500),g!==void 0){if(A=g.actionByRoot[v],A!==void 0&&A.blendMode===o)return A;A=g.knownActions[0],c===null&&(c=A._clip)}return c===null?null:(n=new kx(this,c,n,o),this._bindAction(n,A),this._addInactiveAction(n,e,v),n)},existingAction:function(e,n){var o=n||this._root;return n=o.uuid,o=typeof e=="string"?qs.findByName(o,e):e,e=this._actionsByClip[o?o.uuid:e],e!==void 0&&e.actionByRoot[n]||null},stopAllAction:function(){for(var e=this._actions,n=this._nActiveActions-1;0<=n;--n)e[n].stop();return this},update:function(e){e*=this.timeScale;for(var n=this._actions,o=this._nActiveActions,c=this.time+=e,v=lf(e),g=this._accuIndex^=1,A=0;A!==o;++A)n[A]._update(c,e,v,g);for(e=this._bindings,n=this._nActiveBindings,A=0;A!==n;++A)e[A].apply(g);return this},setTime:function(e){for(var n=this.time=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){var n=this._actions;e=e.uuid;var o=this._actionsByClip,c=o[e];if(c!==void 0){c=c.knownActions;for(var v=0,g=c.length;v!==g;++v){var A=c[v];this._deactivateAction(A);var y=A._cacheIndex,T=n[n.length-1];A._cacheIndex=null,A._byClipCacheIndex=null,T._cacheIndex=y,n[y]=T,n.pop(),this._removeInactiveBindingsForAction(A)}delete o[e]}},uncacheRoot:function(e){e=e.uuid;var n=this._actionsByClip;for(c in n){var o=n[c].actionByRoot[e];o!==void 0&&(this._deactivateAction(o),this._removeInactiveAction(o))}var c=this._bindingsByRootAndName[e];if(c!==void 0)for(var v in c)e=c[v],e.restoreOriginalState(),this._removeInactiveBinding(e)},uncacheAction:function(e,n){e=this.existingAction(e,n),e!==null&&(this._deactivateAction(e),this._removeInactiveAction(e))}}),jx.prototype.clone=function(){return new jx(this.value.clone===void 0?this.value:this.value.clone())},Gx.prototype=Pe(Le(Mr.prototype),{constructor:Gx,isInstancedInterleavedBuffer:!0,copy:function(e){return Mr.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Pe(Vx.prototype,{set:function(e,n){this.ray.set(e,n)},setFromCamera:function(e,n){n&&n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n&&n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,n,o){return o=o||[],Wx(e,this,o,n),o.sort(_p),o},intersectObjects:function(e,n,o){if(o=o||[],Array.isArray(e)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),o;for(var c=0,v=e.length;c<v;c++)Wx(e[c],this,o,n);return o.sort(_p),o}}),Pe((function(e,n,o){return this.radius=e!==void 0?e:1,this.phi=n!==void 0?n:0,this.theta=o!==void 0?o:0,this}).prototype,{set:function(e,n,o){return this.radius=e,this.phi=n,this.theta=o,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,n,o){return this.radius=Math.sqrt(e*e+n*n+o*o),this.radius===0?this.phi=this.theta=0:(this.theta=Math.atan2(e,o),this.phi=Math.acos(ai.clamp(n/this.radius,-1,1))),this}}),Pe((function(e,n,o){return this.radius=e!==void 0?e:1,this.theta=n!==void 0?n:0,this.y=o!==void 0?o:0,this}).prototype,{set:function(e,n,o){return this.radius=e,this.theta=n,this.y=o,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,n,o){return this.radius=Math.sqrt(e*e+o*o),this.theta=Math.atan2(e,o),this.y=n,this}});var Db=new U;Pe(Ea.prototype,{set:function(e,n){return this.min.copy(e),this.max.copy(n),this},setFromPoints:function(e){this.makeEmpty();for(var n=0,o=e.length;n<o;n++)this.expandByPoint(e[n]);return this},setFromCenterAndSize:function(e,n){return n=Db.copy(n).multiplyScalar(.5),this.min.copy(e).sub(n),this.max.copy(e).add(n),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return e===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new U),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return e===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new U),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,n){return n===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),n=new U),n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,n){return n===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),n=new U),n.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return Db.copy(e).clamp(this.min,this.max).sub(e).length()},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var bb=new oe,rM=new oe;Pe(Yh.prototype,{set:function(e,n){return this.start.copy(e),this.end.copy(n),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return e===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new oe),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return e===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),e=new oe),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,n){return n===void 0&&(console.warn("THREE.Line3: .at() target is now required"),n=new oe),this.delta(n).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(e,n){return bb.subVectors(e,this.start),rM.subVectors(this.end,this.start),e=rM.dot(rM),e=rM.dot(bb)/e,n&&(e=ai.clamp(e,0,1)),e},closestPointToPoint:function(e,n,o){return e=this.closestPointToPointParameter(e,n),o===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),o=new oe),this.delta(o).multiplyScalar(e).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),zn.prototype=Le(ce.prototype),zn.prototype.constructor=zn,zn.prototype.isImmediateRenderObject=!0;var Fb=new oe;Gl.prototype=Le(ce.prototype),Gl.prototype.constructor=Gl,Gl.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Gl.prototype.update=function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),Fb.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Fb),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var Xp=new oe,nM=new me,VI=new me;Mp.prototype=Le(io.prototype),Mp.prototype.constructor=Mp,Mp.prototype.isSkeletonHelper=!0,Mp.prototype.updateMatrixWorld=function(e){var n=this.bones,o=this.geometry,c=o.getAttribute("position");VI.getInverse(this.root.matrixWorld);for(var v=0,g=0;v<n.length;v++){var A=n[v];A.parent&&A.parent.isBone&&(nM.multiplyMatrices(VI,A.matrixWorld),Xp.setFromMatrixPosition(nM),c.setXYZ(g,Xp.x,Xp.y,Xp.z),nM.multiplyMatrices(VI,A.parent.matrixWorld),Xp.setFromMatrixPosition(nM),c.setXYZ(g+1,Xp.x,Xp.y,Xp.z),g+=2)}o.getAttribute("position").needsUpdate=!0,ce.prototype.updateMatrixWorld.call(this,e)},Cg.prototype=Le(_r.prototype),Cg.prototype.constructor=Cg,Cg.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Cg.prototype.update=function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var UG=new oe,Nb=new Ye,Bb=new Ye;Vl.prototype=Le(ce.prototype),Vl.prototype.constructor=Vl,Vl.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Vl.prototype.update=function(){var e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var n=e.geometry.getAttribute("color");Nb.copy(this.light.color),Bb.copy(this.light.groundColor);for(var o=0,c=n.count;o<c;o++){var v=o<c/2?Nb:Bb;n.setXYZ(o,v.r,v.g,v.b)}n.needsUpdate=!0}e.lookAt(UG.setFromMatrixPosition(this.light.matrixWorld).negate())},E0.prototype=Pe(Le(io.prototype),{constructor:E0,copy:function(e){return io.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return new this.constructor().copy(this)}}),Wl.prototype=Le(io.prototype),Wl.prototype.constructor=Wl;var zb=new oe,iM=new oe,Ub=new oe;Sp.prototype=Le(ce.prototype),Sp.prototype.constructor=Sp,Sp.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Sp.prototype.update=function(){zb.setFromMatrixPosition(this.light.matrixWorld),iM.setFromMatrixPosition(this.light.target.matrixWorld),Ub.subVectors(iM,zb),this.lightPlane.lookAt(iM),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(iM),this.targetLine.scale.z=Ub.length()};var oM=new oe,ya=new Fn;Qs.prototype=Le(io.prototype),Qs.prototype.constructor=Qs,Qs.prototype.update=function(){var e=this.geometry,n=this.pointMap;ya.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),oa("c",n,e,ya,0,0,-1),oa("t",n,e,ya,0,0,1),oa("n1",n,e,ya,-1,-1,-1),oa("n2",n,e,ya,1,-1,-1),oa("n3",n,e,ya,-1,1,-1),oa("n4",n,e,ya,1,1,-1),oa("f1",n,e,ya,-1,-1,1),oa("f2",n,e,ya,1,-1,1),oa("f3",n,e,ya,-1,1,1),oa("f4",n,e,ya,1,1,1),oa("u1",n,e,ya,.7,1.1,-1),oa("u2",n,e,ya,-.7,1.1,-1),oa("u3",n,e,ya,0,2,-1),oa("cf1",n,e,ya,-1,0,1),oa("cf2",n,e,ya,1,0,1),oa("cf3",n,e,ya,0,-1,1),oa("cf4",n,e,ya,0,1,1),oa("cn1",n,e,ya,-1,0,-1),oa("cn2",n,e,ya,1,0,-1),oa("cn3",n,e,ya,0,-1,-1),oa("cn4",n,e,ya,0,1,-1),e.getAttribute("position").needsUpdate=!0};var aM=new Re;jc.prototype=Le(io.prototype),jc.prototype.constructor=jc,jc.prototype.update=function(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&aM.setFromObject(this.object),!aM.isEmpty()){e=aM.min;var n=aM.max,o=this.geometry.attributes.position,c=o.array;c[0]=n.x,c[1]=n.y,c[2]=n.z,c[3]=e.x,c[4]=n.y,c[5]=n.z,c[6]=e.x,c[7]=e.y,c[8]=n.z,c[9]=n.x,c[10]=e.y,c[11]=n.z,c[12]=n.x,c[13]=n.y,c[14]=e.z,c[15]=e.x,c[16]=n.y,c[17]=e.z,c[18]=e.x,c[19]=e.y,c[20]=e.z,c[21]=n.x,c[22]=e.y,c[23]=e.z,o.needsUpdate=!0,this.geometry.computeBoundingSphere()}},jc.prototype.setFromObject=function(e){return this.object=e,this.update(),this},jc.prototype.copy=function(e){return io.prototype.copy.call(this,e),this.object=e.object,this},jc.prototype.clone=function(){return new this.constructor().copy(this)},I0.prototype=Le(io.prototype),I0.prototype.constructor=I0,I0.prototype.updateMatrixWorld=function(e){var n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),ce.prototype.updateMatrixWorld.call(this,e))},R0.prototype=Le(Xs.prototype),R0.prototype.constructor=R0,R0.prototype.updateMatrixWorld=function(e){var n=-this.plane.constant;1e-8>Math.abs(n)&&(n=1e-8),this.scale.set(.5*this.size,.5*this.size,n),this.children[0].material.side=0>n?1:0,this.lookAt(this.plane.normal),ce.prototype.updateMatrixWorld.call(this,e)};var kb=new oe,sM,WI;du.prototype=Le(ce.prototype),du.prototype.constructor=du,du.prototype.setDirection=function(e){.99999<e.y?this.quaternion.set(0,0,0,1):-.99999>e.y?this.quaternion.set(1,0,0,0):(kb.set(e.z,0,-e.x).normalize(),this.quaternion.setFromAxisAngle(kb,Math.acos(e.y)))},du.prototype.setLength=function(e,n,o){n===void 0&&(n=.2*e),o===void 0&&(o=.2*n),this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(o,n,o),this.cone.position.y=e,this.cone.updateMatrix()},du.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},du.prototype.copy=function(e){return ce.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},du.prototype.clone=function(){return new this.constructor().copy(this)},Xx.prototype=Le(io.prototype),Xx.prototype.constructor=Xx;var Hb=[.125,.215,.35,.446,.526,.582],kG=5+Hb.length,rv={};Zi(rv,3e3,0),Zi(rv,3001,1),Zi(rv,3002,2),Zi(rv,3004,3),Zi(rv,3005,4),Zi(rv,3006,5),Zi(rv,3007,6),new kc,function(){for(var e=[],n=[],o=[],c=8,v=0;v<kG;v++){var g=Math.pow(2,c);n.push(g);var A=1/g;4<v?A=Hb[v-8+4-1]:v==0&&(A=0),o.push(A),A=1/(g-1),g=-A/2,A=1+A/2;var y=[g,g,A,g,A,A,g,g,A,A,g,A];g=new Float32Array(108),A=new Float32Array(72);for(var T=new Float32Array(36),D=0;6>D;D++){var X=D%3*2/3-1,I=2<D?0:-1;g.set([X,I,0,X+2/3,I,0,X+2/3,I+1,0,X,I,0,X+2/3,I+1,0,X,I+1,0],18*D),A.set(y,12*D),T.set([D,D,D,D,D,D],6*D)}y=new Ut,y.setAttribute("position",new Ve(g,3)),y.setAttribute("uv",new Ve(A,2)),y.setAttribute("faceIndex",new Ve(T,1)),e.push(y),4<c&&c--}return{_lodPlanes:e,_sizeLods:n,_sigmas:o}}(),Cn.create=function(e,n){return e.prototype=Le(Cn.prototype),e.prototype.constructor=e,e.prototype.getPoint=n,e},Pe(ga.prototype,{createPointsGeometry:function(e){return console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),e=this.getPoints(e),this.createGeometry(e)},createSpacedPointsGeometry:function(e){return console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),e=this.getSpacedPoints(e),this.createGeometry(e)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var n=new ur,o=0,c=e.length;o<c;o++){var v=e[o];n.vertices.push(new oe(v.x,v.y,v.z||0))}return n}}),Pe(Hl.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),Le(jo.prototype),Le(jo.prototype),XC.prototype=Le(jo.prototype),Pe(XC.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),E0.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Mp.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Pe(gi.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Wp.extractUrlBase(e)}}),gi.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Pe(Ag.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Pe(Ea.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Pe(Re.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Pe(De.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),xn.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},Yh.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Pe(ai,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),ai.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),ai.ceilPowerOfTwo(e)}}),Pe(W.prototype,{flattenToArrayOffset:function(e,n){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,n)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Pe(me.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,n){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,n)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new oe().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,n,o,c,v,g){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,n,c,o,v,g)}}),Xe.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},he.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Pe(We.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Pe(et.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,n){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,n)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Pe(et,{barycoordFromPoint:function(e,n,o,c,v){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),et.getBarycoord(e,n,o,c,v)},normal:function(e,n,o,c){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),et.getNormal(e,n,o,c)}}),Pe(Vh.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Hh(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new hp(this,e)}}),Pe(U.prototype,{fromAttribute:function(e,n,o){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,n,o)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Pe(oe.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,n){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(n,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,n,o){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,n,o)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Pe(te.prototype,{fromAttribute:function(e,n,o){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,n,o)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Pe(ur.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Pe(ce.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,n){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(n,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Rn(ce.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Pe(_r.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Rn(_r.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Rn(p0.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Uf.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),np.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Cn.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),lr.prototype.setLens=function(e,n){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),n!==void 0&&(this.filmGauge=n),this.setFocalLength(e)},Rn(po.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Rn(Ve.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===35048},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(35048)}}}),Pe(Ve.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(e===!0?35048:35044),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Pe(Ut.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,n,o){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),n&&n.isBufferAttribute||n&&n.isInterleavedBufferAttribute?e==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(n),this):this.setAttribute(e,n):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new Ve(n,o)))},addDrawCall:function(e,n,o){o!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,n)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},applyMatrix:function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Rn(Ut.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Rn(Xh.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(e){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=e}}}),Rn(Vx.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(e){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=e}}}),Rn(Mr.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===35048},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}}),Pe(Mr.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(e===!0?35048:35044),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Pe(Ul.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Rn(jx.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Rn($e.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Ye}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===1}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Rn(Nc.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Rn(en.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Pe(Wu.prototype,{clearTarget:function(e,n,o,c){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(n,o,c)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Rn(Wu.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=e===!0?3001:3e3}}}),Rn(Lr.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Rn(ae.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Rn(Cp.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var n=this;return new td().load(e,function(o){n.setBuffer(o)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),zx.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},er.prototype.updateCubeMap=function(e,n){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,n)},p.crossOrigin=void 0,p.loadTexture=function(e,n,o,c){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var v=new xp;return v.setCrossOrigin(this.crossOrigin),e=v.load(e,o,void 0,c),n&&(e.mapping=n),e},p.loadTextureCube=function(e,n,o,c){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var v=new Px;return v.setCrossOrigin(this.crossOrigin),e=v.load(e,o,void 0,c),n&&(e.mapping=n),e},p.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},p.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"117"}}));var nv=function(e){gi.call(this,e)};nv.prototype=Pe(Le(gi.prototype),{constructor:nv,load:function(e,n,o,c){var v=this,g=this.path===""?Wp.extractUrlBase(e):this.path,A=new Qa(this.manager);A.setPath(this.path),A.load(e,function(y){try{n(v.parse(y,g))}catch(T){c?c(T):console.error(T),v.manager.itemError(e)}},o,c)},setMaterialOptions:function(e){return this.materialOptions=e,this},parse:function(e,n){var o=e.split(`
`),c={},v=/\s+/;e={};for(var g=0;g<o.length;g++){var A=o[g];if(A=A.trim(),A.length!==0&&A.charAt(0)!=="#"){var y=A.indexOf(" "),T=0<=y?A.substring(0,y):A;T=T.toLowerCase(),A=0<=y?A.substring(y+1):"",A=A.trim(),T==="newmtl"?(c={name:A},e[A]=c):T==="ka"||T==="kd"||T==="ks"||T==="ke"?(A=A.split(v,3),c[T]=[parseFloat(A[0]),parseFloat(A[1]),parseFloat(A[2])]):c[T]=A}}return n=new nv.MaterialCreator(this.resourcePath||n,this.materialOptions),n.setCrossOrigin(this.crossOrigin),n.setManager(this.manager),n.setMaterials(e),n}}),nv.MaterialCreator=function(e,n){this.baseUrl=e||"",this.options=n,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:0,this.wrap=this.options&&this.options.wrap?this.options.wrap:1e3},nv.MaterialCreator.prototype={constructor:nv.MaterialCreator,crossOrigin:"anonymous",setCrossOrigin:function(e){return this.crossOrigin=e,this},setManager:function(e){this.manager=e},setMaterials:function(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(e){if(!this.options)return e;var n={},o;for(o in e){var c=e[o],v={};n[o]=v;for(var g in c){var A=!0,y=c[g],T=g.toLowerCase();switch(T){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(y=[y[0]/255,y[1]/255,y[2]/255]),this.options&&this.options.ignoreZeroRGBs&&y[0]===0&&y[1]===0&&y[2]===0&&(A=!1)}A&&(v[T]=y)}}return n},preload:function(){for(var e in this.materialsInfo)this.create(e)},getIndex:function(e){return this.nameLookup[e]},getAsArray:function(){var e=0,n;for(n in this.materialsInfo)this.materialsArray[e]=this.create(n),this.nameLookup[n]=e,e++;return this.materialsArray},create:function(e){return this.materials[e]===void 0&&this.createMaterial_(e),this.materials[e]},createMaterial_:function(e){function n(T,D){return typeof D!="string"||D===""?"":/^https?:\/\//i.test(D)?D:T+D}function o(T,D){if(!g[T]){D=c.getTextureParams(D,g);var X=c.loadTexture(n(c.baseUrl,D.url));X.repeat.copy(D.scale),X.offset.copy(D.offset),X.wrapS=c.wrap,X.wrapT=c.wrap,g[T]=X}}var c=this,v=this.materialsInfo[e],g={name:e,side:this.side},A;for(A in v){var y=v[A];if(y!=="")switch(A.toLowerCase()){case"kd":g.color=new Ye().fromArray(y);break;case"ks":g.specular=new Ye().fromArray(y);break;case"ke":g.emissive=new Ye().fromArray(y);break;case"map_kd":o("map",y);break;case"map_ks":o("specularMap",y);break;case"map_ke":o("emissiveMap",y);break;case"norm":o("normalMap",y);break;case"map_bump":case"bump":o("bumpMap",y);break;case"map_d":o("alphaMap",y),g.transparent=!0;break;case"ns":g.shininess=parseFloat(y);break;case"d":y=parseFloat(y),1>y&&(g.opacity=y,g.transparent=!0);break;case"tr":y=parseFloat(y),this.options&&this.options.invertTrProperty&&(y=1-y),0<y&&(g.opacity=1-y,g.transparent=!0)}}return this.materials[e]=new Nc(g),this.materials[e]},getTextureParams:function(e,n){var o={scale:new U(1,1),offset:new U(0,0)};e=e.split(/\s+/);var c=e.indexOf("-bm");return 0<=c&&(n.bumpScale=parseFloat(e[c+1]),e.splice(c,2)),c=e.indexOf("-s"),0<=c&&(o.scale.set(parseFloat(e[c+1]),parseFloat(e[c+2])),e.splice(c,4)),c=e.indexOf("-o"),0<=c&&(o.offset.set(parseFloat(e[c+1]),parseFloat(e[c+2])),e.splice(c,4)),o.url=e.join(" ").trim(),o},loadTexture:function(e,n,o,c,v){var g=this.manager!==void 0?this.manager:Sb,A=g.getHandler(e);return A===null&&(A=new xp(g)),A.setCrossOrigin&&A.setCrossOrigin(this.crossOrigin),e=A.load(e,o,c,v),n!==void 0&&(e.mapping=n),e}};var HG=function(){function e(){var I={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(b,N){if(this.object&&this.object.fromDeclaration===!1)this.object.name=b,this.object.fromDeclaration=N!==!1;else{var k=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:b||"",fromDeclaration:N!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasNormalIndices:!1,hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(G,re){var se=this._finalize(!1);return se&&(se.inherited||0>=se.groupCount)&&this.materials.splice(se.index,1),G={index:this.materials.length,name:G||"",mtllib:Array.isArray(re)&&0<re.length?re[re.length-1]:"",smooth:se!==void 0?se.smooth:this.smooth,groupStart:se!==void 0?se.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(ue){return ue={index:typeof ue=="number"?ue:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1},ue.clone=this.clone.bind(ue),ue}},this.materials.push(G),G},currentMaterial:function(){if(0<this.materials.length)return this.materials[this.materials.length-1]},_finalize:function(G){var re=this.currentMaterial();if(re&&re.groupEnd===-1&&(re.groupEnd=this.geometry.vertices.length/3,re.groupCount=re.groupEnd-re.groupStart,re.inherited=!1),G&&1<this.materials.length)for(var se=this.materials.length-1;0<=se;se--)0>=this.materials[se].groupCount&&this.materials.splice(se,1);return G&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),re}},k&&k.name&&typeof k.clone=="function"&&(b=k.clone(0),b.inherited=!0,this.object.materials.push(b)),this.objects.push(this.object)}},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(b,N){return b=parseInt(b,10),3*(0<=b?b-1:b+N/3)},parseNormalIndex:function(b,N){return b=parseInt(b,10),3*(0<=b?b-1:b+N/3)},parseUVIndex:function(b,N){return b=parseInt(b,10),2*(0<=b?b-1:b+N/2)},addVertex:function(b,N,k){var G=this.vertices,re=this.object.geometry.vertices;re.push(G[b+0],G[b+1],G[b+2]),re.push(G[N+0],G[N+1],G[N+2]),re.push(G[k+0],G[k+1],G[k+2])},addVertexPoint:function(b){var N=this.vertices;this.object.geometry.vertices.push(N[b+0],N[b+1],N[b+2])},addVertexLine:function(b){var N=this.vertices;this.object.geometry.vertices.push(N[b+0],N[b+1],N[b+2])},addNormal:function(b,N,k){var G=this.normals,re=this.object.geometry.normals;re.push(G[b+0],G[b+1],G[b+2]),re.push(G[N+0],G[N+1],G[N+2]),re.push(G[k+0],G[k+1],G[k+2])},addFaceNormal:function(b,N,k){var G=this.vertices,re=this.object.geometry.normals;A.fromArray(G,b),y.fromArray(G,N),T.fromArray(G,k),X.subVectors(T,y),D.subVectors(A,y),X.cross(D),X.normalize(),re.push(X.x,X.y,X.z),re.push(X.x,X.y,X.z),re.push(X.x,X.y,X.z)},addColor:function(b,N,k){var G=this.colors,re=this.object.geometry.colors;G[b]!==void 0&&re.push(G[b+0],G[b+1],G[b+2]),G[N]!==void 0&&re.push(G[N+0],G[N+1],G[N+2]),G[k]!==void 0&&re.push(G[k+0],G[k+1],G[k+2])},addUV:function(b,N,k){var G=this.uvs,re=this.object.geometry.uvs;re.push(G[b+0],G[b+1]),re.push(G[N+0],G[N+1]),re.push(G[k+0],G[k+1])},addDefaultUV:function(){var b=this.object.geometry.uvs;b.push(0,0),b.push(0,0),b.push(0,0)},addUVLine:function(b){var N=this.uvs;this.object.geometry.uvs.push(N[b+0],N[b+1])},addFace:function(b,N,k,G,re,se,ue,we,Te){var je=this.vertices.length;b=this.parseVertexIndex(b,je),N=this.parseVertexIndex(N,je),k=this.parseVertexIndex(k,je),this.addVertex(b,N,k),this.addColor(b,N,k),ue!==void 0&&ue!==""?(k=this.normals.length,b=this.parseNormalIndex(ue,k),N=this.parseNormalIndex(we,k),k=this.parseNormalIndex(Te,k),this.addNormal(b,N,k),this.object.geometry.hasNormalIndices=!0):this.addFaceNormal(b,N,k),G!==void 0&&G!==""?(ue=this.uvs.length,b=this.parseUVIndex(G,ue),N=this.parseUVIndex(re,ue),k=this.parseUVIndex(se,ue),this.addUV(b,N,k),this.object.geometry.hasUVIndices=!0):this.addDefaultUV()},addPointGeometry:function(b){this.object.geometry.type="Points";for(var N=this.vertices.length,k=0,G=b.length;k<G;k++)this.addVertexPoint(this.parseVertexIndex(b[k],N))},addLineGeometry:function(b,N){this.object.geometry.type="Line";for(var k=this.vertices.length,G=this.uvs.length,re=0,se=b.length;re<se;re++)this.addVertexLine(this.parseVertexIndex(b[re],k));for(b=0,se=N.length;b<se;b++)this.addUVLine(this.parseUVIndex(N[b],G))}};return I.startObject("",!1),I}function n(I){gi.call(this,I),this.materials=null}var o=/^[og]\s*(.+)?/,c=/^mtllib /,v=/^usemtl /,g=/^usemap /,A=new oe,y=new oe,T=new oe,D=new oe,X=new oe;return n.prototype=Pe(Le(gi.prototype),{constructor:n,load:function(I,b,N,k){var G=this,re=new Qa(G.manager);re.setPath(this.path),re.load(I,function(se){try{b(G.parse(se))}catch(ue){k?k(ue):console.error(ue),G.manager.itemError(I)}},N,k)},setMaterials:function(I){return this.materials=I,this},parse:function(I){var b=new e;I.indexOf(`\r
`)!==-1&&(I=I.replace(/\r\n/g,`
`)),I.indexOf(`\\
`)!==-1&&(I=I.replace(/\\\n/g,""));var N=I.split(`
`),k,G=typeof"".trimLeft=="function";I=0;for(var re=N.length;I<re;I++){var se=N[I];se=G?se.trimLeft():se.trim();var ue=se.length;if(ue!==0&&(ue=se.charAt(0),ue!=="#"))if(ue==="v")switch(se=se.split(/\s+/),se[0]){case"v":b.vertices.push(parseFloat(se[1]),parseFloat(se[2]),parseFloat(se[3])),7<=se.length?b.colors.push(parseFloat(se[4]),parseFloat(se[5]),parseFloat(se[6])):b.colors.push(void 0,void 0,void 0);break;case"vn":b.normals.push(parseFloat(se[1]),parseFloat(se[2]),parseFloat(se[3]));break;case"vt":b.uvs.push(parseFloat(se[1]),parseFloat(se[2]))}else if(ue==="f"){se=se.substr(1).trim();var we=se.split(/\s+/);for(se=[],ue=0,k=we.length;ue<k;ue++){var Te=we[ue];0<Te.length&&(Te=Te.split("/"),se.push(Te))}for(we=se[0],ue=1,k=se.length-1;ue<k;ue++){Te=se[ue];var je=se[ue+1];b.addFace(we[0],Te[0],je[0],we[1],Te[1],je[1],we[2],Te[2],je[2])}}else if(ue==="l"){if(ue=se.substring(1).trim().split(" "),k=[],we=[],se.indexOf("/")===-1)k=ue;else for(se=0,Te=ue.length;se<Te;se++)je=ue[se].split("/"),je[0]!==""&&k.push(je[0]),je[1]!==""&&we.push(je[1]);b.addLineGeometry(k,we)}else ue==="p"?(se=se.substr(1).trim(),se=se.split(" "),b.addPointGeometry(se)):(k=o.exec(se))!==null?(se=(" "+k[0].substr(1).trim()).substr(1),b.startObject(se)):v.test(se)?b.object.startMaterial(se.substring(7).trim(),b.materialLibraries):c.test(se)?b.materialLibraries.push(se.substring(7).trim()):g.test(se)?console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.'):ue==="s"?(k=se.split(" "),1<k.length?(se=k[1].trim().toLowerCase(),b.object.smooth=se!=="0"&&se!=="off"):b.object.smooth=!0,(se=b.object.currentMaterial())&&(se.smooth=b.object.smooth)):se!=="\0"&&console.warn('THREE.OBJLoader: Unexpected line: "'+se+'"')}for(b.finalize(),N=new fs,N.materialLibraries=[].concat(b.materialLibraries),I=0,re=b.objects.length;I<re;I++)if(G=b.objects[I],se=G.geometry,ue=G.materials,k=se.type==="Line",we=se.type==="Points",Te=!1,se.vertices.length!==0){je=new Ut,je.setAttribute("position",new Rt(se.vertices,3)),se.hasNormalIndices===!0&&je.setAttribute("normal",new Rt(se.normals,3)),0<se.colors.length&&(Te=!0,je.setAttribute("color",new Rt(se.colors,3))),se.hasUVIndices===!0&&je.setAttribute("uv",new Rt(se.uvs,2));for(var Ge=[],He=0,lt=ue.length;He<lt;He++){var ht=ue[He],It=ht.name+"_"+ht.smooth+"_"+Te;if(se=b.materials[It],this.materials!==null)if(se=this.materials.create(ht.name),!k||!se||se instanceof Io)!we||!se||se instanceof lu||(vt=new lu({size:10,sizeAttenuation:!1}),$e.prototype.copy.call(vt,se),vt.color.copy(se.color),vt.map=se.map,se=vt);else{var vt=new Io;$e.prototype.copy.call(vt,se),vt.color.copy(se.color),se=vt}se===void 0&&(se=k?new Io:we?new lu({size:1,sizeAttenuation:!1}):new Nc,se.name=ht.name,se.flatShading=!ht.smooth,se.vertexColors=Te,b.materials[It]=se),Ge.push(se)}if(1<Ge.length){for(He=0,lt=ue.length;He<lt;He++)ht=ue[He],je.addGroup(ht.groupStart,ht.groupCount,He);se=k?new io(je,Ge):we?new zh(je,Ge):new _r(je,Ge)}else se=k?new io(je,Ge[0]):we?new zh(je,Ge[0]):new _r(je,Ge[0]);se.name=G.name,N.add(se)}return N}}),n}(),jG=function(){function e(ze){gi.call(this,ze),this.ddsLoader=this.dracoLoader=null}function n(){var ze={};return{get:function(Ue){return ze[Ue]},add:function(Ue,ke){ze[Ue]=ke},remove:function(Ue){delete ze[Ue]},removeAll:function(){ze={}}}}function o(ze){if(!ze)throw Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=lt.MSFT_TEXTURE_DDS,this.ddsLoader=ze}function c(ze){this.name=lt.KHR_LIGHTS_PUNCTUAL,this.lightDefs=(ze.extensions&&ze.extensions[lt.KHR_LIGHTS_PUNCTUAL]||{}).lights||[]}function v(){this.name=lt.KHR_MATERIALS_UNLIT}function g(){this.name=lt.KHR_MATERIALS_CLEARCOAT}function A(ze){this.name=lt.KHR_BINARY_GLTF,this.body=this.content=null;var Ue=new DataView(ze,0,It);if(this.header={magic:Wp.decodeText(new Uint8Array(ze.slice(0,4))),version:Ue.getUint32(4,!0),length:Ue.getUint32(8,!0)},this.header.magic!==ht)throw Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(2>this.header.version)throw Error("THREE.GLTFLoader: Legacy binary file detected.");Ue=new DataView(ze,It);for(var ke=0;ke<Ue.byteLength;){var Je=Ue.getUint32(ke,!0);ke+=4;var Ce=Ue.getUint32(ke,!0);ke+=4,Ce===vt.JSON?(Ce=new Uint8Array(ze,It+ke,Je),this.content=Wp.decodeText(Ce)):Ce===vt.BIN&&(Ce=It+ke,this.body=ze.slice(Ce,Ce+Je)),ke+=Je}if(this.content===null)throw Error("THREE.GLTFLoader: JSON content not found.")}function y(ze,Ue){if(!Ue)throw Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=lt.KHR_DRACO_MESH_COMPRESSION,this.json=ze,this.dracoLoader=Ue,this.dracoLoader.preload()}function T(){this.name=lt.KHR_TEXTURE_TRANSFORM}function D(ze){Ts.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var Ue={specular:{value:new Ye().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=Ue,this.onBeforeCompile=function(ke){for(var Je in Ue)ke.uniforms[Je]=Ue[Je];ke.fragmentShader=ke.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;"),ke.fragmentShader=ke.fragmentShader.replace("uniform float metalness;","uniform float glossiness;"),ke.fragmentShader=ke.fragmentShader.replace("#include <roughnessmap_pars_fragment>",`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`),ke.fragmentShader=ke.fragmentShader.replace("#include <metalnessmap_pars_fragment>",`#ifdef USE_GLOSSINESSMAP
	uniform sampler2D glossinessMap;
#endif`),ke.fragmentShader=ke.fragmentShader.replace("#include <roughnessmap_fragment>",`vec3 specularFactor = specular;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	texelSpecular = sRGBToLinear( texelSpecular );
	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture
	specularFactor *= texelSpecular.rgb;
#endif`),ke.fragmentShader=ke.fragmentShader.replace("#include <metalnessmap_fragment>",`float glossinessFactor = glossiness;
#ifdef USE_GLOSSINESSMAP
	vec4 texelGlossiness = texture2D( glossinessMap, vUv );
	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture
	glossinessFactor *= texelGlossiness.a;
#endif`),ke.fragmentShader=ke.fragmentShader.replace("#include <lights_physical_fragment>",`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.
material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
material.specularColor = specularFactor.rgb;`)},Rn(this,{specular:{get:function(){return Ue.specular.value},set:function(ke){Ue.specular.value=ke}},specularMap:{get:function(){return Ue.specularMap.value},set:function(ke){Ue.specularMap.value=ke}},glossiness:{get:function(){return Ue.glossiness.value},set:function(ke){Ue.glossiness.value=ke}},glossinessMap:{get:function(){return Ue.glossinessMap.value},set:function(ke){(Ue.glossinessMap.value=ke)?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_ROUGHNESSMAP=""):(delete this.defines.USE_ROUGHNESSMAP,delete this.defines.USE_GLOSSINESSMAP)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(ze)}function X(){return{name:lt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:"color map lightMap lightMapIntensity aoMap aoMapIntensity emissive emissiveIntensity emissiveMap bumpMap bumpScale normalMap normalMapType displacementMap displacementScale displacementBias specularMap specular glossinessMap glossiness alphaMap envMap envMapIntensity refractionRatio".split(" "),getMaterialType:function(){return D},extendParams:function(ze,Ue,ke){var Je=Ue.extensions[this.name];if(ze.color=new Ye(1,1,1),ze.opacity=1,Ue=[],Array.isArray(Je.diffuseFactor)){var Ce=Je.diffuseFactor;ze.color.fromArray(Ce),ze.opacity=Ce[3]}return Je.diffuseTexture!==void 0&&Ue.push(ke.assignTexture(ze,"map",Je.diffuseTexture)),ze.emissive=new Ye(0,0,0),ze.glossiness=Je.glossinessFactor!==void 0?Je.glossinessFactor:1,ze.specular=new Ye(1,1,1),Array.isArray(Je.specularFactor)&&ze.specular.fromArray(Je.specularFactor),Je.specularGlossinessTexture!==void 0&&(Je=Je.specularGlossinessTexture,Ue.push(ke.assignTexture(ze,"glossinessMap",Je)),Ue.push(ke.assignTexture(ze,"specularMap",Je))),vi.all(Ue)},createMaterial:function(ze){var Ue=new D(ze);return Ue.fog=!0,Ue.color=ze.color,Ue.map=ze.map===void 0?null:ze.map,Ue.lightMap=null,Ue.lightMapIntensity=1,Ue.aoMap=ze.aoMap===void 0?null:ze.aoMap,Ue.aoMapIntensity=1,Ue.emissive=ze.emissive,Ue.emissiveIntensity=1,Ue.emissiveMap=ze.emissiveMap===void 0?null:ze.emissiveMap,Ue.bumpMap=ze.bumpMap===void 0?null:ze.bumpMap,Ue.bumpScale=1,Ue.normalMap=ze.normalMap===void 0?null:ze.normalMap,Ue.normalMapType=0,ze.normalScale&&(Ue.normalScale=ze.normalScale),Ue.displacementMap=null,Ue.displacementScale=1,Ue.displacementBias=0,Ue.specularMap=ze.specularMap===void 0?null:ze.specularMap,Ue.specular=ze.specular,Ue.glossinessMap=ze.glossinessMap===void 0?null:ze.glossinessMap,Ue.glossiness=ze.glossiness,Ue.alphaMap=null,Ue.envMap=ze.envMap===void 0?null:ze.envMap,Ue.envMapIntensity=1,Ue.refractionRatio=.98,Ue}}}function I(){this.name=lt.KHR_MESH_QUANTIZATION}function b(ze,Ue,ke,Je){Zs.call(this,ze,Ue,ke,Je)}function N(ze,Ue){return typeof ze!="string"||ze===""?"":(/^https?:\/\//i.test(Ue)&&/^\//.test(ze)&&(Ue=Ue.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(ze)||/^data:.*,.*$/i.test(ze)||/^blob:.*$/i.test(ze)?ze:Ue+ze)}function k(ze){return ze.DefaultMaterial===void 0&&(ze.DefaultMaterial=new Ts({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),ze.DefaultMaterial}function G(ze,Ue,ke){for(var Je in ke.extensions)ze[Je]===void 0&&(Ue.userData.gltfExtensions=Ue.userData.gltfExtensions||{},Ue.userData.gltfExtensions[Je]=ke.extensions[Je])}function re(ze,Ue){Ue.extras!==void 0&&(Jc(Ue.extras)==="object"?Pe(ze.userData,Ue.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+Ue.extras))}function se(ze,Ue,ke){for(var Je=!1,Ce=!1,be=0,Fe=Ue.length;be<Fe;be++){var Qe=Ue[be];if(Qe.POSITION!==void 0&&(Je=!0),Qe.NORMAL!==void 0&&(Ce=!0),Je&&Ce)break}if(!Je&&!Ce)return vi.resolve(ze);var ft=[],Mt=[];for(be=0,Fe=Ue.length;be<Fe;be++){if(Qe=Ue[be],Je){var Ne=Qe.POSITION!==void 0?ke.getDependency("accessor",Qe.POSITION):ze.attributes.position;ft.push(Ne)}Ce&&(Ne=Qe.NORMAL!==void 0?ke.getDependency("accessor",Qe.NORMAL):ze.attributes.normal,Mt.push(Ne))}return vi.all([vi.all(ft),vi.all(Mt)]).then(function(Gt){var Yt=Gt[0];return Gt=Gt[1],Je&&(ze.morphAttributes.position=Yt),Ce&&(ze.morphAttributes.normal=Gt),ze.morphTargetsRelative=!0,ze})}function ue(ze){var Ue=ze.extensions&&ze.extensions[lt.KHR_DRACO_MESH_COMPRESSION];return Ue?"draco:"+Ue.bufferView+":"+Ue.indices+":"+we(Ue.attributes):ze.indices+":"+we(ze.attributes)+":"+ze.mode}function we(ze){for(var Ue="",ke=Hi(ze).sort(),Je=0,Ce=ke.length;Je<Ce;Je++)Ue+=ke[Je]+":"+ze[ke[Je]]+";";return Ue}function Te(ze,Ue,ke){this.json=ze||{},this.extensions=Ue||{},this.options=ke||{},this.cache=new n,this.associations=new B2,this.primitiveCache={},this.textureLoader=new xp(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new Qa(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}function je(ze,Ue,ke){var Je=Ue.attributes,Ce=new Re;if(Je.POSITION!==void 0){var be=ke.json.accessors[Je.POSITION];if(Je=be.min,be=be.max,Je!==void 0&&be!==void 0){if(Ce.set(new oe(Je[0],Je[1],Je[2]),new oe(be[0],be[1],be[2])),Ue=Ue.targets,Ue!==void 0){for(var Fe=new oe,Qe=new oe,ft=0,Mt=Ue.length;ft<Mt;ft++)Je=Ue[ft],Je.POSITION!==void 0&&(be=ke.json.accessors[Je.POSITION],Je=be.min,be=be.max,Je!==void 0&&be!==void 0?(Qe.setX(Math.max(Math.abs(Je[0]),Math.abs(be[0]))),Qe.setY(Math.max(Math.abs(Je[1]),Math.abs(be[1]))),Qe.setZ(Math.max(Math.abs(Je[2]),Math.abs(be[2]))),Fe.max(Qe)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION."));Ce.expandByVector(Fe)}ze.boundingBox=Ce,ke=new De,Ce.getCenter(ke.center),ke.radius=Ce.min.distanceTo(Ce.max)/2,ze.boundingSphere=ke}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}function Ge(ze,Ue,ke){function Je(ft,Mt){return ke.getDependency("accessor",ft).then(function(Ne){ze.setAttribute(Mt,Ne)})}var Ce=Ue.attributes,be=[],Fe;for(Fe in Ce){var Qe=qr[Fe]||Fe.toLowerCase();Qe in ze.attributes||be.push(Je(Ce[Fe],Qe))}return Ue.indices===void 0||ze.index||(Ce=ke.getDependency("accessor",Ue.indices).then(function(ft){ze.setIndex(ft)}),be.push(Ce)),re(ze,Ue),je(ze,Ue,ke),vi.all(be).then(function(){return Ue.targets!==void 0?se(ze,Ue.targets,ke):ze})}function He(ze,Ue){var ke=ze.getIndex();if(ke===null){var Je=[];if(ke=ze.getAttribute("position"),ke!==void 0){for(var Ce=0;Ce<ke.count;Ce++)Je.push(Ce);ze.setIndex(Je),ke=ze.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),ze}var be=ke.count-2;if(Je=[],Ue===2)for(Ce=1;Ce<=be;Ce++)Je.push(ke.getX(0)),Je.push(ke.getX(Ce)),Je.push(ke.getX(Ce+1));else for(Ce=0;Ce<be;Ce++)Ce%2===0?(Je.push(ke.getX(Ce)),Je.push(ke.getX(Ce+1)),Je.push(ke.getX(Ce+2))):(Je.push(ke.getX(Ce+2)),Je.push(ke.getX(Ce+1)),Je.push(ke.getX(Ce)));return Je.length/3!==be&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles."),ze=ze.clone(),ze.setIndex(Je),ze}e.prototype=Pe(Le(gi.prototype),{constructor:e,load:function(ze,Ue,ke,Je){var Ce=this,be=this.resourcePath!==""?this.resourcePath:this.path!==""?this.path:Wp.extractUrlBase(ze);Ce.manager.itemStart(ze);var Fe=function(ft){Je?Je(ft):console.error(ft),Ce.manager.itemError(ze),Ce.manager.itemEnd(ze)},Qe=new Qa(Ce.manager);Qe.setPath(this.path),Qe.setResponseType("arraybuffer"),Qe.setRequestHeader(this.requestHeader),Ce.crossOrigin==="use-credentials"&&Qe.setWithCredentials(!0),Qe.load(ze,function(ft){try{Ce.parse(ft,be,function(Mt){Ue(Mt),Ce.manager.itemEnd(ze)},Fe)}catch(Mt){Fe(Mt)}},ke,Fe)},setDRACOLoader:function(ze){return this.dracoLoader=ze,this},setDDSLoader:function(ze){return this.ddsLoader=ze,this},parse:function(ze,Ue,ke,Je){var Ce={};if(typeof ze!="string")if(Wp.decodeText(new Uint8Array(ze,0,4))===ht){try{Ce[lt.KHR_BINARY_GLTF]=new A(ze)}catch(ft){Je&&Je(ft);return}ze=Ce[lt.KHR_BINARY_GLTF].content}else ze=Wp.decodeText(new Uint8Array(ze));if(ze=JSON.parse(ze),ze.asset===void 0||2>ze.asset.version[0])Je&&Je(Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{if(ze.extensionsUsed)for(var be=0;be<ze.extensionsUsed.length;++be){var Fe=ze.extensionsUsed[be],Qe=ze.extensionsRequired||[];switch(Fe){case lt.KHR_LIGHTS_PUNCTUAL:Ce[Fe]=new c(ze);break;case lt.KHR_MATERIALS_CLEARCOAT:Ce[Fe]=new g;break;case lt.KHR_MATERIALS_UNLIT:Ce[Fe]=new v;break;case lt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:Ce[Fe]=new X;break;case lt.KHR_DRACO_MESH_COMPRESSION:Ce[Fe]=new y(ze,this.dracoLoader);break;case lt.MSFT_TEXTURE_DDS:Ce[Fe]=new o(this.ddsLoader);break;case lt.KHR_TEXTURE_TRANSFORM:Ce[Fe]=new T;break;case lt.KHR_MESH_QUANTIZATION:Ce[Fe]=new I;break;default:0<=Qe.indexOf(Fe)&&console.warn('THREE.GLTFLoader: Unknown extension "'+Fe+'".')}}Ue=new Te(ze,Ce,{path:Ue||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager}),Ue.fileLoader.setRequestHeader(this.requestHeader),Ue.parse(ke,Je)}}});var lt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};c.prototype.loadLight=function(ze){var Ue=this.lightDefs[ze],ke=new Ye(16777215);Ue.color!==void 0&&ke.fromArray(Ue.color);var Je=Ue.range!==void 0?Ue.range:0;switch(Ue.type){case"directional":ke=new yg(ke),ke.target.position.set(0,0,-1),ke.add(ke.target);break;case"point":ke=new Wh(ke),ke.distance=Je;break;case"spot":ke=new qu(ke),ke.distance=Je,Ue.spot=Ue.spot||{},Ue.spot.innerConeAngle=Ue.spot.innerConeAngle!==void 0?Ue.spot.innerConeAngle:0,Ue.spot.outerConeAngle=Ue.spot.outerConeAngle!==void 0?Ue.spot.outerConeAngle:Math.PI/4,ke.angle=Ue.spot.outerConeAngle,ke.penumbra=1-Ue.spot.innerConeAngle/Ue.spot.outerConeAngle,ke.target.position.set(0,0,-1),ke.add(ke.target);break;default:throw Error('THREE.GLTFLoader: Unexpected light type, "'+Ue.type+'".')}return ke.position.set(0,0,0),ke.decay=2,Ue.intensity!==void 0&&(ke.intensity=Ue.intensity),ke.name=Ue.name||"light_"+ze,vi.resolve(ke)},v.prototype.getMaterialType=function(){return tt},v.prototype.extendParams=function(ze,Ue,ke){var Je=[];if(ze.color=new Ye(1,1,1),ze.opacity=1,Ue=Ue.pbrMetallicRoughness){if(Array.isArray(Ue.baseColorFactor)){var Ce=Ue.baseColorFactor;ze.color.fromArray(Ce),ze.opacity=Ce[3]}Ue.baseColorTexture!==void 0&&Je.push(ke.assignTexture(ze,"map",Ue.baseColorTexture))}return vi.all(Je)},g.prototype.getMaterialType=function(){return Zf},g.prototype.extendParams=function(ze,Ue,ke){var Je=[];return Ue=Ue.extensions[this.name],Ue.clearcoatFactor!==void 0&&(ze.clearcoat=Ue.clearcoatFactor),Ue.clearcoatTexture!==void 0&&Je.push(ke.assignTexture(ze,"clearcoatMap",Ue.clearcoatTexture)),Ue.clearcoatRoughnessFactor!==void 0&&(ze.clearcoatRoughness=Ue.clearcoatRoughnessFactor),Ue.clearcoatRoughnessTexture!==void 0&&Je.push(ke.assignTexture(ze,"clearcoatRoughnessMap",Ue.clearcoatRoughnessTexture)),Ue.clearcoatNormalTexture!==void 0&&(Je.push(ke.assignTexture(ze,"clearcoatNormalMap",Ue.clearcoatNormalTexture)),Ue.clearcoatNormalTexture.scale!==void 0&&(ke=Ue.clearcoatNormalTexture.scale,ze.clearcoatNormalScale=new U(ke,ke))),vi.all(Je)};var ht="glTF",It=12,vt={JSON:1313821514,BIN:5130562};y.prototype.decodePrimitive=function(ze,Ue){var ke=this.json,Je=this.dracoLoader,Ce=ze.extensions[this.name].bufferView,be=ze.extensions[this.name].attributes,Fe={},Qe={},ft={},Mt;for(Mt in be){var Ne=qr[Mt]||Mt.toLowerCase();Fe[Ne]=be[Mt]}for(Mt in ze.attributes)if(Ne=qr[Mt]||Mt.toLowerCase(),be[Mt]!==void 0){var Gt=ke.accessors[ze.attributes[Mt]];ft[Ne]=Et[Gt.componentType],Qe[Ne]=Gt.normalized===!0}return Ue.getDependency("bufferView",Ce).then(function(Yt){return new vi(function(kt){Je.decodeDracoFile(Yt,function(Ot){for(var Jt in Ot.attributes){var Kr=Ot.attributes[Jt],gn=Qe[Jt];gn!==void 0&&(Kr.normalized=gn)}kt(Ot)},Fe,ft)})})},T.prototype.extendTexture=function(ze,Ue){return ze=ze.clone(),Ue.offset!==void 0&&ze.offset.fromArray(Ue.offset),Ue.rotation!==void 0&&(ze.rotation=Ue.rotation),Ue.scale!==void 0&&ze.repeat.fromArray(Ue.scale),Ue.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),ze.needsUpdate=!0,ze},D.prototype=Le(Ts.prototype),D.prototype.constructor=D,D.prototype.copy=function(ze){return Ts.prototype.copy.call(this,ze),this.specularMap=ze.specularMap,this.specular.copy(ze.specular),this.glossinessMap=ze.glossinessMap,this.glossiness=ze.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},b.prototype=Le(Zs.prototype),b.prototype.constructor=b,b.prototype.copySampleValue_=function(ze){var Ue=this.resultBuffer,ke=this.sampleValues,Je=this.valueSize;ze=ze*Je*3+Je;for(var Ce=0;Ce!==Je;Ce++)Ue[Ce]=ke[ze+Ce];return Ue},b.prototype.beforeStart_=b.prototype.copySampleValue_,b.prototype.afterEnd_=b.prototype.copySampleValue_,b.prototype.interpolate_=function(ze,Ue,ke,Je){var Ce=this.resultBuffer,be=this.sampleValues,Fe=this.valueSize,Qe=2*Fe,ft=3*Fe;Je-=Ue,Ue=(ke-Ue)/Je,ke=Ue*Ue;var Mt=ke*Ue;ze*=ft,ft=ze-ft;var Ne=-2*Mt+3*ke;Mt-=ke;var Gt=1-Ne;for(Ue=Mt-ke+Ue,ke=0;ke!==Fe;ke++)Ce[ke]=Gt*be[ft+ke+Fe]+Ue*be[ft+ke+Qe]*Je+Ne*be[ze+ke+Fe]+Mt*be[ze+ke]*Je;return Ce};var Et={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},xr={9728:1003,9729:1006,9984:1004,9985:1007,9986:1005,9987:1008},Nt={33071:1001,33648:1002,10497:1e3},Pr={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},qr={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Fr={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},$n={CUBICSPLINE:void 0,LINEAR:2301,STEP:2300},Gr={"image/png":1023,"image/jpeg":1022};return Te.prototype.parse=function(ze,Ue){var ke=this,Je=this.json,Ce=this.extensions;this.cache.removeAll(),this.markDefs(),vi.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function(be){be={scene:be[0][Je.scene||0],scenes:be[0],animations:be[1],cameras:be[2],asset:Je.asset,parser:ke,userData:{}},G(Ce,be,Je),re(be,Je),ze(be)}).catch(Ue)},Te.prototype.markDefs=function(){for(var ze=this.json.nodes||[],Ue=this.json.skins||[],ke=this.json.meshes||[],Je={},Ce={},be=0,Fe=Ue.length;be<Fe;be++)for(var Qe=Ue[be].joints,ft=0,Mt=Qe.length;ft<Mt;ft++)ze[Qe[ft]].isBone=!0;for(Ue=0,be=ze.length;Ue<be;Ue++)Fe=ze[Ue],Fe.mesh!==void 0&&(Je[Fe.mesh]===void 0&&(Je[Fe.mesh]=Ce[Fe.mesh]=0),Je[Fe.mesh]++,Fe.skin!==void 0&&(ke[Fe.mesh].isSkinnedMesh=!0));this.json.meshReferences=Je,this.json.meshUses=Ce},Te.prototype.getDependency=function(ze,Ue){var ke=ze+":"+Ue,Je=this.cache.get(ke);if(!Je){switch(ze){case"scene":Je=this.loadScene(Ue);break;case"node":Je=this.loadNode(Ue);break;case"mesh":Je=this.loadMesh(Ue);break;case"accessor":Je=this.loadAccessor(Ue);break;case"bufferView":Je=this.loadBufferView(Ue);break;case"buffer":Je=this.loadBuffer(Ue);break;case"material":Je=this.loadMaterial(Ue);break;case"texture":Je=this.loadTexture(Ue);break;case"skin":Je=this.loadSkin(Ue);break;case"animation":Je=this.loadAnimation(Ue);break;case"camera":Je=this.loadCamera(Ue);break;case"light":Je=this.extensions[lt.KHR_LIGHTS_PUNCTUAL].loadLight(Ue);break;default:throw Error("Unknown type: "+ze)}this.cache.add(ke,Je)}return Je},Te.prototype.getDependencies=function(ze){var Ue=this.cache.get(ze);if(!Ue){var ke=this;Ue=vi.all((this.json[ze+(ze==="mesh"?"es":"s")]||[]).map(function(Je,Ce){return ke.getDependency(ze,Ce)})),this.cache.add(ze,Ue)}return Ue},Te.prototype.loadBuffer=function(ze){var Ue=this.json.buffers[ze],ke=this.fileLoader;if(Ue.type&&Ue.type!=="arraybuffer")throw Error("THREE.GLTFLoader: "+Ue.type+" buffer type is not supported.");if(Ue.uri===void 0&&ze===0)return vi.resolve(this.extensions[lt.KHR_BINARY_GLTF].body);var Je=this.options;return new vi(function(Ce,be){ke.load(N(Ue.uri,Je.path),Ce,void 0,function(){be(Error('THREE.GLTFLoader: Failed to load buffer "'+Ue.uri+'".'))})})},Te.prototype.loadBufferView=function(ze){var Ue=this.json.bufferViews[ze];return this.getDependency("buffer",Ue.buffer).then(function(ke){var Je=Ue.byteOffset||0;return ke.slice(Je,Je+(Ue.byteLength||0))})},Te.prototype.loadAccessor=function(ze){var Ue=this,ke=this.json,Je=this.json.accessors[ze];return Je.bufferView===void 0&&Je.sparse===void 0?vi.resolve(null):(ze=[],Je.bufferView!==void 0?ze.push(this.getDependency("bufferView",Je.bufferView)):ze.push(null),Je.sparse!==void 0&&(ze.push(this.getDependency("bufferView",Je.sparse.indices.bufferView)),ze.push(this.getDependency("bufferView",Je.sparse.values.bufferView))),vi.all(ze).then(function(Ce){var be=Ce[0],Fe=Pr[Je.type],Qe=Et[Je.componentType],ft=Qe.BYTES_PER_ELEMENT,Mt=Je.byteOffset||0,Ne=Je.bufferView!==void 0?ke.bufferViews[Je.bufferView].byteStride:void 0,Gt=Je.normalized===!0;if(Ne&&Ne!==ft*Fe){var Yt=Math.floor(Mt/Ne),kt="InterleavedBuffer:"+Je.bufferView+":"+Je.componentType+":"+Yt+":"+Je.count,Ot=Ue.cache.get(kt);Ot||(Yt=new Qe(be,Yt*Ne,Je.count*Ne/ft),Ot=new Mr(Yt,Ne/ft),Ue.cache.add(kt,Ot)),ft=new Ws(Ot,Fe,Mt%Ne/ft,Gt)}else Yt=be===null?new Qe(Je.count*Fe):new Qe(be,Mt,Je.count*Fe),ft=new Ve(Yt,Fe,Gt);if(Je.sparse!==void 0){for(Ne=Je.sparse.values.byteOffset||0,Mt=new Et[Je.sparse.indices.componentType](Ce[1],Je.sparse.indices.byteOffset||0,Je.sparse.count*Pr.SCALAR),Ce=new Qe(Ce[2],Ne,Je.sparse.count*Fe),be!==null&&(ft=new Ve(ft.array.slice(),ft.itemSize,ft.normalized)),be=0,Qe=Mt.length;be<Qe;be++)if(Ne=Mt[be],ft.setX(Ne,Ce[be*Fe]),2<=Fe&&ft.setY(Ne,Ce[be*Fe+1]),3<=Fe&&ft.setZ(Ne,Ce[be*Fe+2]),4<=Fe&&ft.setW(Ne,Ce[be*Fe+3]),5<=Fe)throw Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}return ft}))},Te.prototype.loadTexture=function(ze){var Ue=this,ke=this.json,Je=this.options,Ce=this.textureLoader,be=self.URL||self.webkitURL,Fe=ke.textures[ze],Qe=Fe.extensions||{},ft=Qe[lt.MSFT_TEXTURE_DDS]?ke.images[Qe[lt.MSFT_TEXTURE_DDS].source]:ke.images[Fe.source],Mt=ft.uri,Ne=!1;return ft.bufferView!==void 0&&(Mt=Ue.getDependency("bufferView",ft.bufferView).then(function(Gt){return Ne=!0,Gt=new Blob([Gt],{type:ft.mimeType}),Mt=be.createObjectURL(Gt)})),vi.resolve(Mt).then(function(Gt){var Yt=Je.manager.getHandler(Gt);return Yt||(Yt=Qe[lt.MSFT_TEXTURE_DDS]?Ue.extensions[lt.MSFT_TEXTURE_DDS].ddsLoader:Ce),new vi(function(kt,Ot){Yt.load(N(Gt,Je.path),kt,void 0,Ot)})}).then(function(Gt){Ne===!0&&be.revokeObjectURL(Mt),Gt.flipY=!1,Fe.name&&(Gt.name=Fe.name),ft.mimeType in Gr&&(Gt.format=Gr[ft.mimeType]);var Yt=(ke.samplers||{})[Fe.sampler]||{};return Gt.magFilter=xr[Yt.magFilter]||1006,Gt.minFilter=xr[Yt.minFilter]||1008,Gt.wrapS=Nt[Yt.wrapS]||1e3,Gt.wrapT=Nt[Yt.wrapT]||1e3,Ue.associations.set(Gt,{type:"textures",index:ze}),Gt})},Te.prototype.assignTexture=function(ze,Ue,ke){var Je=this;return this.getDependency("texture",ke.index).then(function(Ce){if(!Ce.isCompressedTexture)switch(Ue){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":Ce.format=1022}if(ke.texCoord===void 0||ke.texCoord==0||Ue==="aoMap"&&ke.texCoord==1||console.warn("THREE.GLTFLoader: Custom UV set "+ke.texCoord+" for texture "+Ue+" not yet supported."),Je.extensions[lt.KHR_TEXTURE_TRANSFORM]){var be=ke.extensions!==void 0?ke.extensions[lt.KHR_TEXTURE_TRANSFORM]:void 0;if(be){var Fe=Je.associations.get(Ce);Ce=Je.extensions[lt.KHR_TEXTURE_TRANSFORM].extendTexture(Ce,be),Je.associations.set(Ce,Fe)}}ze[Ue]=Ce})},Te.prototype.assignFinalMaterial=function(ze){var Ue=ze.geometry,ke=ze.material,Je=Ue.attributes.tangent!==void 0,Ce=Ue.attributes.color!==void 0,be=Ue.attributes.normal===void 0,Fe=ze.isSkinnedMesh===!0,Qe=0<Hi(Ue.morphAttributes).length,ft=Qe&&Ue.morphAttributes.normal!==void 0;if(ze.isPoints){var Mt="PointsMaterial:"+ke.uuid,Ne=this.cache.get(Mt);Ne||(Ne=new lu,$e.prototype.copy.call(Ne,ke),Ne.color.copy(ke.color),Ne.map=ke.map,Ne.sizeAttenuation=!1,this.cache.add(Mt,Ne)),ke=Ne}else ze.isLine&&(Mt="LineBasicMaterial:"+ke.uuid,Ne=this.cache.get(Mt),Ne||(Ne=new Io,$e.prototype.copy.call(Ne,ke),Ne.color.copy(ke.color),this.cache.add(Mt,Ne)),ke=Ne);(Je||Ce||be||Fe||Qe)&&(Mt="ClonedMaterial:"+ke.uuid+":",ke.isGLTFSpecularGlossinessMaterial&&(Mt+="specular-glossiness:"),Fe&&(Mt+="skinning:"),Je&&(Mt+="vertex-tangents:"),Ce&&(Mt+="vertex-colors:"),be&&(Mt+="flat-shading:"),Qe&&(Mt+="morph-targets:"),ft&&(Mt+="morph-normals:"),Ne=this.cache.get(Mt),Ne||(Ne=ke.clone(),Fe&&(Ne.skinning=!0),Je&&(Ne.vertexTangents=!0),Ce&&(Ne.vertexColors=!0),be&&(Ne.flatShading=!0),Qe&&(Ne.morphTargets=!0),ft&&(Ne.morphNormals=!0),this.cache.add(Mt,Ne),this.associations.set(Ne,this.associations.get(ke))),ke=Ne),ke.aoMap&&Ue.attributes.uv2===void 0&&Ue.attributes.uv!==void 0&&Ue.setAttribute("uv2",Ue.attributes.uv),ke.normalScale&&!Je&&(ke.normalScale.y=-ke.normalScale.y),ke.clearcoatNormalScale&&!Je&&(ke.clearcoatNormalScale.y=-ke.clearcoatNormalScale.y),ze.material=ke},Te.prototype.loadMaterial=function(ze){var Ue=this,ke=this.extensions,Je=this.json.materials[ze],Ce={},be=Je.extensions||{},Fe=[];if(be[lt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var Qe=ke[lt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS],ft=Qe.getMaterialType();Fe.push(Qe.extendParams(Ce,Je,Ue))}else if(be[lt.KHR_MATERIALS_UNLIT])Qe=ke[lt.KHR_MATERIALS_UNLIT],ft=Qe.getMaterialType(),Fe.push(Qe.extendParams(Ce,Je,Ue));else{if(ft=Ts,Qe=Je.pbrMetallicRoughness||{},Ce.color=new Ye(1,1,1),Ce.opacity=1,Array.isArray(Qe.baseColorFactor)){var Mt=Qe.baseColorFactor;Ce.color.fromArray(Mt),Ce.opacity=Mt[3]}Qe.baseColorTexture!==void 0&&Fe.push(Ue.assignTexture(Ce,"map",Qe.baseColorTexture)),Ce.metalness=Qe.metallicFactor!==void 0?Qe.metallicFactor:1,Ce.roughness=Qe.roughnessFactor!==void 0?Qe.roughnessFactor:1,Qe.metallicRoughnessTexture!==void 0&&(Fe.push(Ue.assignTexture(Ce,"metalnessMap",Qe.metallicRoughnessTexture)),Fe.push(Ue.assignTexture(Ce,"roughnessMap",Qe.metallicRoughnessTexture)))}return Je.doubleSided===!0&&(Ce.side=2),Qe=Je.alphaMode||"OPAQUE",Qe==="BLEND"?(Ce.transparent=!0,Ce.depthWrite=!1):(Ce.transparent=!1,Qe==="MASK"&&(Ce.alphaTest=Je.alphaCutoff!==void 0?Je.alphaCutoff:.5)),Je.normalTexture!==void 0&&ft!==tt&&(Fe.push(Ue.assignTexture(Ce,"normalMap",Je.normalTexture)),Ce.normalScale=new U(1,1),Je.normalTexture.scale!==void 0&&Ce.normalScale.set(Je.normalTexture.scale,Je.normalTexture.scale)),Je.occlusionTexture!==void 0&&ft!==tt&&(Fe.push(Ue.assignTexture(Ce,"aoMap",Je.occlusionTexture)),Je.occlusionTexture.strength!==void 0&&(Ce.aoMapIntensity=Je.occlusionTexture.strength)),Je.emissiveFactor!==void 0&&ft!==tt&&(Ce.emissive=new Ye().fromArray(Je.emissiveFactor)),Je.emissiveTexture!==void 0&&ft!==tt&&Fe.push(Ue.assignTexture(Ce,"emissiveMap",Je.emissiveTexture)),be[lt.KHR_MATERIALS_CLEARCOAT]&&(Qe=ke[lt.KHR_MATERIALS_CLEARCOAT],ft=Qe.getMaterialType(),Fe.push(Qe.extendParams(Ce,{extensions:be},Ue))),vi.all(Fe).then(function(){var Ne=ft===D?ke[lt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(Ce):new ft(Ce);return Je.name&&(Ne.name=Je.name),Ne.map&&(Ne.map.encoding=3001),Ne.emissiveMap&&(Ne.emissiveMap.encoding=3001),re(Ne,Je),Ue.associations.set(Ne,{type:"materials",index:ze}),Je.extensions&&G(ke,Ne,Je),Ne})},Te.prototype.loadGeometries=function(ze){function Ue(Gt){return Je[lt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(Gt,ke).then(function(Yt){return Ge(Yt,Gt,ke)})}for(var ke=this,Je=this.extensions,Ce=this.primitiveCache,be=[],Fe=0,Qe=ze.length;Fe<Qe;Fe++){var ft=ze[Fe],Mt=ue(ft),Ne=Ce[Mt];Ne?be.push(Ne.promise):(Ne=ft.extensions&&ft.extensions[lt.KHR_DRACO_MESH_COMPRESSION]?Ue(ft):Ge(new Ut,ft,ke),Ce[Mt]={primitive:ft,promise:Ne},be.push(Ne))}return vi.all(be)},Te.prototype.loadMesh=function(ze){for(var Ue=this,ke=this.json.meshes[ze],Je=ke.primitives,Ce=[],be=0,Fe=Je.length;be<Fe;be++){var Qe=Je[be].material===void 0?k(this.cache):this.getDependency("material",Je[be].material);Ce.push(Qe)}return Ce.push(Ue.loadGeometries(Je)),vi.all(Ce).then(function(ft){var Mt=ft.slice(0,ft.length-1),Ne=ft[ft.length-1];ft=[];for(var Gt=0,Yt=Ne.length;Gt<Yt;Gt++){var kt=Ne[Gt],Ot=Je[Gt],Jt=Mt[Gt];if(Ot.mode===4||Ot.mode===5||Ot.mode===6||Ot.mode===void 0)kt=ke.isSkinnedMesh===!0?new np(kt,Jt):new _r(kt,Jt),kt.isSkinnedMesh!==!0||kt.geometry.attributes.skinWeight.normalized||kt.normalizeSkinWeights(),Ot.mode===5?kt.geometry=He(kt.geometry,1):Ot.mode===6&&(kt.geometry=He(kt.geometry,2));else if(Ot.mode===1)kt=new io(kt,Jt);else if(Ot.mode===3)kt=new Xs(kt,Jt);else if(Ot.mode===2)kt=new qm(kt,Jt);else if(Ot.mode===0)kt=new zh(kt,Jt);else throw Error("THREE.GLTFLoader: Primitive mode unsupported: "+Ot.mode);if(0<Hi(kt.geometry.morphAttributes).length){Ot=kt;var Kr=ke;if(Ot.updateMorphTargets(),Kr.weights!==void 0){Jt=0;for(var gn=Kr.weights.length;Jt<gn;Jt++)Ot.morphTargetInfluences[Jt]=Kr.weights[Jt]}if(Kr.extras&&Array.isArray(Kr.extras.targetNames))if(Kr=Kr.extras.targetNames,Ot.morphTargetInfluences.length===Kr.length)for(Ot.morphTargetDictionary={},Jt=0,gn=Kr.length;Jt<gn;Jt++)Ot.morphTargetDictionary[Kr[Jt]]=Jt;else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}kt.name=ke.name||"mesh_"+ze,1<Ne.length&&(kt.name+="_"+Gt),re(kt,ke),Ue.assignFinalMaterial(kt),ft.push(kt)}if(ft.length===1)return ft[0];for(Mt=new fs,Gt=0,Yt=ft.length;Gt<Yt;Gt++)Mt.add(ft[Gt]);return Mt})},Te.prototype.loadCamera=function(ze){var Ue;ze=this.json.cameras[ze];var ke=ze[ze.type];if(ke)return ze.type==="perspective"?Ue=new lr(ai.radToDeg(ke.yfov),ke.aspectRatio||1,ke.znear||1,ke.zfar||2e6):ze.type==="orthographic"&&(Ue=new kc(-ke.xmag,ke.xmag,ke.ymag,-ke.ymag,ke.znear,ke.zfar)),ze.name&&(Ue.name=ze.name),re(Ue,ze),vi.resolve(Ue);console.warn("THREE.GLTFLoader: Missing camera parameters.")},Te.prototype.loadSkin=function(ze){ze=this.json.skins[ze];var Ue={joints:ze.joints};return ze.inverseBindMatrices===void 0?vi.resolve(Ue):this.getDependency("accessor",ze.inverseBindMatrices).then(function(ke){return Ue.inverseBindMatrices=ke,Ue})},Te.prototype.loadAnimation=function(ze){for(var Ue=this.json.animations[ze],ke=[],Je=[],Ce=[],be=[],Fe=[],Qe=0,ft=Ue.channels.length;Qe<ft;Qe++){var Mt=Ue.channels[Qe],Ne=Ue.samplers[Mt.sampler];Mt=Mt.target;var Gt=Ue.parameters!==void 0?Ue.parameters[Ne.input]:Ne.input,Yt=Ue.parameters!==void 0?Ue.parameters[Ne.output]:Ne.output;ke.push(this.getDependency("node",Mt.node!==void 0?Mt.node:Mt.id)),Je.push(this.getDependency("accessor",Gt)),Ce.push(this.getDependency("accessor",Yt)),be.push(Ne),Fe.push(Mt)}return vi.all([vi.all(ke),vi.all(Je),vi.all(Ce),vi.all(be),vi.all(Fe)]).then(function(kt){var Ot=kt[0],Jt=kt[1],Kr=kt[2],gn=kt[3];kt=kt[4];for(var Zt=[],Nr=0,Ln=Ot.length;Nr<Ln;Nr++){var Tr=Ot[Nr],Qo=Jt[Nr],Ai=Kr[Nr],Rs=gn[Nr],uc=kt[Nr];if(Tr!==void 0){switch(Tr.updateMatrix(),Tr.matrixAutoUpdate=!0,Fr[uc.path]){case Fr.weights:var md=vp;break;case Fr.rotation:md=yp;break;default:md=Jf}var Jl=Tr.name?Tr.name:Tr.uuid,hf=Rs.interpolation!==void 0?$n[Rs.interpolation]:2301,ff=[];if(Fr[uc.path]===Fr.weights?Tr.traverse(function(As){As.isMesh===!0&&As.morphTargetInfluences&&ff.push(As.name?As.name:As.uuid)}):ff.push(Jl),Tr=Ai.array,Ai.normalized){if(Tr.constructor===Int8Array)var Cl=1/127;else if(Tr.constructor===Uint8Array)Cl=1/255;else if(Tr.constructor==Int16Array)Cl=1/32767;else if(Tr.constructor===Uint16Array)Cl=1/65535;else throw Error("THREE.GLTFLoader: Unsupported output accessor component type.");var ih=new Float32Array(Tr.length);for(Ai=0,Jl=Tr.length;Ai<Jl;Ai++)ih[Ai]=Tr[Ai]*Cl;Tr=ih}for(Ai=0,Jl=ff.length;Ai<Jl;Ai++)Cl=new md(ff[Ai]+"."+Fr[uc.path],Qo.array,Tr,hf),Rs.interpolation==="CUBICSPLINE"&&(Cl.createInterpolant=function(As){return new b(this.times,this.values,this.getValueSize()/3,As)},Cl.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),Zt.push(Cl)}}return new qs(Ue.name?Ue.name:"animation_"+ze,void 0,Zt)})},Te.prototype.loadNode=function(ze){var Ue=this.json,ke=this.extensions,Je=this,Ce=Ue.meshReferences,be=Ue.meshUses,Fe=Ue.nodes[ze];return function(){var Qe=[];return Fe.mesh!==void 0&&Qe.push(Je.getDependency("mesh",Fe.mesh).then(function(ft){if(1<Ce[Fe.mesh]){var Mt=be[Fe.mesh]++;ft=ft.clone(),ft.name+="_instance_"+Mt}return Fe.weights!==void 0&&ft.traverse(function(Ne){if(Ne.isMesh)for(var Gt=0,Yt=Fe.weights.length;Gt<Yt;Gt++)Ne.morphTargetInfluences[Gt]=Fe.weights[Gt]}),ft})),Fe.camera!==void 0&&Qe.push(Je.getDependency("camera",Fe.camera)),Fe.extensions&&Fe.extensions[lt.KHR_LIGHTS_PUNCTUAL]&&Fe.extensions[lt.KHR_LIGHTS_PUNCTUAL].light!==void 0&&Qe.push(Je.getDependency("light",Fe.extensions[lt.KHR_LIGHTS_PUNCTUAL].light)),vi.all(Qe)}().then(function(Qe){var ft=Fe.isBone===!0?new Xu:1<Qe.length?new fs:Qe.length===1?Qe[0]:new ce;if(ft!==Qe[0])for(var Mt=0,Ne=Qe.length;Mt<Ne;Mt++)ft.add(Qe[Mt]);return Fe.name&&(ft.userData.name=Fe.name,ft.name=ka.sanitizeNodeName(Fe.name)),re(ft,Fe),Fe.extensions&&G(ke,ft,Fe),Fe.matrix!==void 0?(Qe=new me,Qe.fromArray(Fe.matrix),ft.applyMatrix4(Qe)):(Fe.translation!==void 0&&ft.position.fromArray(Fe.translation),Fe.rotation!==void 0&&ft.quaternion.fromArray(Fe.rotation),Fe.scale!==void 0&&ft.scale.fromArray(Fe.scale)),Je.associations.set(ft,{type:"nodes",index:ze}),ft})},Te.prototype.loadScene=function(){function ze(Ue,ke,Je,Ce){var be=Je.nodes[Ue];return Ce.getDependency("node",Ue).then(function(Fe){if(be.skin===void 0)return Fe;var Qe;return Ce.getDependency("skin",be.skin).then(function(ft){Qe=ft,ft=[];for(var Mt=0,Ne=Qe.joints.length;Mt<Ne;Mt++)ft.push(Ce.getDependency("node",Qe.joints[Mt]));return vi.all(ft)}).then(function(ft){return Fe.traverse(function(Mt){if(Mt.isMesh){for(var Ne=[],Gt=[],Yt=0,kt=ft.length;Yt<kt;Yt++){var Ot=ft[Yt];Ot?(Ne.push(Ot),Ot=new me,Qe.inverseBindMatrices!==void 0&&Ot.fromArray(Qe.inverseBindMatrices.array,16*Yt),Gt.push(Ot)):console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',Qe.joints[Yt])}Mt.bind(new Uf(Ne,Gt),Mt.matrixWorld)}}),Fe})}).then(function(Fe){ke.add(Fe);var Qe=[];if(be.children)for(var ft=be.children,Mt=0,Ne=ft.length;Mt<Ne;Mt++)Qe.push(ze(ft[Mt],Fe,Je,Ce));return vi.all(Qe)})}return function(Ue){var ke=this.json,Je=this.extensions;Ue=this.json.scenes[Ue];var Ce=new fs;Ue.name&&(Ce.name=Ue.name),re(Ce,Ue),Ue.extensions&&G(Je,Ce,Ue),Je=Ue.nodes||[],Ue=[];for(var be=0,Fe=Je.length;be<Fe;be++)Ue.push(ze(Je[be],Ce,ke,this));return vi.all(Ue).then(function(){return Ce})}}(),e}(),Yp={};Yp.MTLLoader=nv,Yp.OBJLoader=HG,Yp.GLTFLoader=jG;var GG=M(function(e,n){n.__esModule=!0;var o=Qc&&Qc.__esModule?Qc:{default:Qc};n.default=function(){function c(v,g){for(var A=0;A<g.length;A++){var y=g[A];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),(0,o.default)(v,y.key,y)}}return function(v,g,A){return g&&c(v.prototype,g),A&&c(v,A),v}}()}),mo=m(GG);Yx(es.prototype,{equals:function(e){return this.lat===e.lat&&this.lng===e.lng},clone:function(){return new es(this.lat,this.lng)},getLngSpan:function(e){return e=Math.abs(e-this.lng),180<e&&(e=360-e),e},sub:function(e){return new es(this.lat-e.lat,this.lng-e.lng)},toString:function(){return"Point"}}),Yx(qh,{EARTHRADIUS:637099681e-2,MCBAND:[1289059486e-2,836237787e-2,5591021,348198983e-2,167804312e-2,0],LLBAND:[75,60,45,30,15,0],MC2LL:[[1410526172116255e-23,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,173379812e-1],[-7435856389565537e-24,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1026014486e-2],[-3030883460898826e-23,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,685681737e-2],[-1981981304930552e-23,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,448277706e-2],[309191371068437e-23,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,25551644e-1],[2890871144776878e-24,8983055095805407e-21,-3068298e-14,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],LL2MC:[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]],getDistanceByMC:function(e,n){if(!e||!n||(e=this.convertMC2LL(e),!e))return 0;var o=this.toRadians(e.lng);if(e=this.toRadians(e.lat),n=this.convertMC2LL(n),!n)return 0;var c=this.toRadians(n.lng);return n=this.toRadians(n.lat),this.getDistance(o,c,e,n)},getDistanceByLL:function(e,n){if(!e||!n)return 0;e.lng=this.getLoop(e.lng,-180,180),e.lat=this.getRange(e.lat,-74,74),n.lng=this.getLoop(n.lng,-180,180),n.lat=this.getRange(n.lat,-74,74);var o=this.toRadians(e.lng),c=this.toRadians(e.lat);return e=this.toRadians(n.lng),n=this.toRadians(n.lat),this.getDistance(o,e,c,n)},convertMC2LL:function(e){if(e==null)return new es(0,0);if(180>e.lng&&-180<e.lng&&90>e.lat&&-90<e.lat)return e;if(window.BMAPGL_84)return new es(180/Math.PI*(2*Math.atan(Math.exp(e.lat/2003750834e-2*180*Math.PI/180))-Math.PI/2),e.lng/2003750834e-2*180);for(var n=new es(Math.abs(e.lng),Math.abs(e.lat)),o=0;o<this.MCBAND.length;o++)if(n.lat>=this.MCBAND[o]){var c=this.MC2LL[o];break}return e=this.convertor(e,c),e=new es(e.lng.toFixed(6),e.lat.toFixed(6))},convertLL2MC:function(e){if(e==null)return new es(0,0);if(180<e.lng||-180>e.lng||90<e.lat||-90>e.lat)return e;if(window.BMAPGL_84){var n=e.lat*Math.PI/180;return new es(e.lng*Math.PI/180*6378137,31890685e-1*Math.log((1+Math.sin(n))/(1-Math.sin(n))))}e.lng=this.getLoop(e.lng,-180,180),e.lat=this.getRange(e.lat,-74,74),n=new es(e.lng,e.lat);for(var o=0;o<this.LLBAND.length;o++)if(n.lat>=this.LLBAND[o]){var c=this.LL2MC[o];break}if(!c){for(o=0;o<this.LLBAND.length;o++)if(n.lat<=-this.LLBAND[o]){c=this.LL2MC[o];break}}return e=this.convertor(e,c),e=new es(Number(e.lng.toFixed(2)),Number(e.lat.toFixed(2)))},convertor:function(e,n){if(e&&n){var o=n[0]+n[1]*Math.abs(e.lng),c=Math.abs(e.lat)/n[9];return n=n[2]+n[3]*c+n[4]*c*c+n[5]*c*c*c+n[6]*c*c*c*c+n[7]*c*c*c*c*c+n[8]*c*c*c*c*c*c,o*=0>e.lng?-1:1,n*=0>e.lat?-1:1,new es(o,n)}},getDistance:function(e,n,o,c){return this.EARTHRADIUS*Math.acos(Math.sin(o)*Math.sin(c)+Math.cos(o)*Math.cos(c)*Math.cos(n-e))},toRadians:function(e){return Math.PI*e/180},toDegrees:function(e){return 180*e/Math.PI},getRange:function(e,n,o){return n!=null&&(e=Math.max(e,n)),o!=null&&(e=Math.min(e,o)),e},getLoop:function(e,n,o){for(;e>o;)e-=o-n;for(;e<n;)e+=o-n;return e}}),Yx(qh.prototype,{lngLatToMercator:function(e){return qh.convertLL2MC(e)},lngLatToPoint:function(e){return e=qh.convertLL2MC(e),new Gc(e.lng,e.lat)},mercatorToLngLat:function(e){return qh.convertMC2LL(e)},pointToLngLat:function(e){return e=new es(e.x,e.y),qh.convertMC2LL(e)},pointToPixel:function(e,n,o,c,v){if(e)return e=this.lngLatToMercator(e,v),n=this.getZoomUnits(n),new Gc(Math.round((e.lng-o.lng)/n+c.width/2),Math.round((o.lat-e.lat)/n+c.height/2))},pixelToPoint:function(e,n,o,c,v){if(e)return n=this.getZoomUnits(n),e=new es(o.lng+n*(e.x-c.width/2),o.lat-n*(e.y-c.height/2)),this.mercatorToLngLat(e,v)},getZoomUnits:function(e){return Math.pow(2,18-e)}});var VG=M(function(e,n){n.__esModule=!0;var o=Pg&&Pg.__esModule?Pg:{default:Pg};n.default=function(c){if(Array.isArray(c)){for(var v=0,g=Array(c.length);v<c.length;v++)g[v]=c[v];return g}return(0,o.default)(c)}}),jb=m(VG);(function(){function e(){var n=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};Fi(this,e),this.options=n,this._initialize()}return mo(e,[{key:"_initialize",value:function(){this.points=this.options.points}},{key:"_normalizaCoord",value:function(n){return n?(n instanceof Array&&(n={lng:Number(n[0]),lat:Number(n[1])}),qh.convertLL2MC(n)):null}},{key:"setOptions",value:function(){this.options=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},this._initialize()}},{key:"getPoints",value:function(n){for(var o=[],c=this.points,v=0;v<c.length-1;v++){var g=this.getCurveByTwoPoints(this._normalizaCoord(c[v]),this._normalizaCoord(c[v+1]),n);g&&0<g.length&&(o=o.concat(g))}return o}},{key:"getCurveByTwoPoints",value:function(n,o){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:20;if(!n||!o)return null;var v=[],g=0;if((typeof o>"u"?"undefined":Jc(o))===void 0)typeof v>"u"||Jc(v);else{var A=parseFloat(n.lat),y=parseFloat(o.lat),T=parseFloat(n.lng),D=parseFloat(o.lng);D>T&&180<parseFloat(D-T)&&0>T&&(T=parseFloat(360+T),D=parseFloat(360+D));var X=0;if(y===A)var I=0,b=T-D;else D===T?(I=Math.PI/2,b=A-y):(I=Math.atan((y-A)/(D-T)),b=(y-A)/Math.sin(I));for(X===0&&(X=I+Math.PI/5),b/=2,I=b*Math.cos(X)+T,X=b*Math.sin(X)+A,b=0;b<c+1;b++){var N=T*(1-2*g+g*g)+I*(2*g-2*g*g)+D*g*g,k=o.lng;v.push([0>n.lng&&0<k?N-360:N,A*(1-2*g+g*g)+X*(2*g-2*g*g)+y*g*g]),g+=1/c}return v}}}]),e})();var K2=void 0,WG=function(){if(K2!==void 0)return K2;var e=navigator.userAgent,n="Android;iPhone;SymbianOS;Windows Phone;iPad;iPod".split(";");K2=!1;for(var o=0;o<n.length;o++)if(0<e.indexOf(n[o])){K2=!0;break}return K2}(),J2=void 0;(function(){if(J2!==void 0)return J2;var e=navigator.userAgent,n=["iPhone","iPad","iPod"];J2=!1;for(var o=0;o<n.length;o++)if(0<e.indexOf(n[o])){J2=!0;break}return J2})(),gl(Array(576)),gl(Array(60)),gl(Array(512)),gl(Array(256)),gl(Array(29)),gl(Array(30)),new Uint32Array(function(){for(var e,n=[],o=0;256>o;o++){e=o;for(var c=0;8>c;c++)e=e&1?3988292384^e>>>1:e>>>1;n[o]=e}return n}());try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{}for(var XI=new Uint8Array(256),Zp=0;256>Zp;Zp++)XI[Zp]=252<=Zp?6:248<=Zp?5:240<=Zp?4:224<=Zp?3:192<=Zp?2:1;XI[254]=XI[254]=1;var rh={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},XG=K0.f;kg("getOwnPropertyDescriptor",function(){return function(e,n){return XG(Ju(e),n)}});var YG=Oi.Object,ZG=function(e,n){return YG.getOwnPropertyDescriptor(e,n)},qG=M(function(e){e.exports={default:ZG,__esModule:!0}}),Da=m(qG),Q2=M(function(e){var n=Array.prototype.concat,o=Array.prototype.slice,c=e.exports=function(v){for(var g=[],A=0,y=v.length;A<y;A++){var T=v[A],D=(D=T)&&typeof D!="string"?D instanceof Array||Array.isArray(D)||0<=D.length&&(D.splice instanceof Function||Da(D,D.length-1)&&D.constructor.name!=="String"):!1;D?g=n.call(g,o.call(T)):g.push(T)}return g};c.wrap=function(v){return function(){return v(c(arguments))}}}),$2=M(function(e){function n(A,y,T){return Math.min(Math.max(y,A),T)}function o(A){return A=A.toString(16).toUpperCase(),2>A.length?"0"+A:A}var c={},v;for(v in rh)rh.hasOwnProperty(v)&&(c[rh[v]]=v);var g=e.exports={to:{},get:{}};g.get=function(A){switch(A.substring(0,3).toLowerCase()){case"hsl":A=g.get.hsl(A);var y="hsl";break;case"hwb":A=g.get.hwb(A),y="hwb";break;default:A=g.get.rgb(A),y="rgb"}return A?{model:y,value:A}:null},g.get.rgb=function(A){if(!A)return null;var y=/^#([a-f0-9]{3,4})$/i,T=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,D=/^rgba?\(\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,X=/(\D+)/,I=[0,0,0,1],b;if(b=A.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(y=b[2],b=b[1],A=0;3>A;A++)T=2*A,I[A]=parseInt(b.slice(T,T+2),16);y&&(I[3]=Math.round(parseInt(y,16)/255*100)/100)}else if(b=A.match(y)){for(b=b[1],y=b[3],A=0;3>A;A++)I[A]=parseInt(b[A]+b[A],16);y&&(I[3]=Math.round(parseInt(y+y,16)/255*100)/100)}else if(b=A.match(T)){for(A=0;3>A;A++)I[A]=parseInt(b[A+1],0);b[4]&&(I[3]=parseFloat(b[4]))}else if(b=A.match(D)){for(A=0;3>A;A++)I[A]=Math.round(2.55*parseFloat(b[A+1]));b[4]&&(I[3]=parseFloat(b[4]))}else return(b=A.match(X))?b[1]==="transparent"?[0,0,0,0]:(I=rh[b[1]],I?(I[3]=1,I):null):null;for(A=0;3>A;A++)I[A]=n(I[A],0,255);return I[3]=n(I[3],0,1),I},g.get.hsl=function(A){if(!A)return null;var y=A.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(y){var T=parseFloat(y[4]);A=(parseFloat(y[1])+360)%360;var D=n(parseFloat(y[2]),0,100);return y=n(parseFloat(y[3]),0,100),T=n(isNaN(T)?1:T,0,1),[A,D,y,T]}return null},g.get.hwb=function(A){if(!A)return null;var y=A.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(y){var T=parseFloat(y[4]);A=(parseFloat(y[1])%360+360)%360;var D=n(parseFloat(y[2]),0,100);return y=n(parseFloat(y[3]),0,100),T=n(isNaN(T)?1:T,0,1),[A,D,y,T]}return null},g.to.hex=function(){var A=Q2(arguments);return"#"+o(A[0])+o(A[1])+o(A[2])+(1>A[3]?o(Math.round(255*A[3])):"")},g.to.rgb=function(){var A=Q2(arguments);return 4>A.length||A[3]===1?"rgb("+Math.round(A[0])+", "+Math.round(A[1])+", "+Math.round(A[2])+")":"rgba("+Math.round(A[0])+", "+Math.round(A[1])+", "+Math.round(A[2])+", "+A[3]+")"},g.to.rgb.percent=function(){var A=Q2(arguments),y=Math.round(A[0]/255*100),T=Math.round(A[1]/255*100),D=Math.round(A[2]/255*100);return 4>A.length||A[3]===1?"rgb("+y+"%, "+T+"%, "+D+"%)":"rgba("+y+"%, "+T+"%, "+D+"%, "+A[3]+")"},g.to.hsl=function(){var A=Q2(arguments);return 4>A.length||A[3]===1?"hsl("+A[0]+", "+A[1]+"%, "+A[2]+"%)":"hsla("+A[0]+", "+A[1]+"%, "+A[2]+"%, "+A[3]+")"},g.to.hwb=function(){var A=Q2(arguments),y="";return 4<=A.length&&A[3]!==1&&(y=", "+A[3]),"hwb("+A[0]+", "+A[1]+"%, "+A[2]+"%"+y+")"},g.to.keyword=function(A){return c[A.slice(0,3)]}}),iv=M(function(e){var n={};for(v in rh)rh.hasOwnProperty(v)&&(n[rh[v]]=v);var o=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},c;for(c in o)if(o.hasOwnProperty(c)){if(!("channels"in o[c]))throw Error("missing channels property: "+c);if(!("labels"in o[c]))throw Error("missing channel labels property: "+c);if(o[c].labels.length!==o[c].channels)throw Error("channel and label counts mismatch: "+c);e=o[c].channels;var v=o[c].labels;delete o[c].channels,delete o[c].labels,Object.defineProperty(o[c],"channels",{value:e}),Object.defineProperty(o[c],"labels",{value:v})}o.rgb.hsl=function(g){var A=g[0]/255,y=g[1]/255,T=g[2]/255;g=Math.min(A,y,T);var D=Math.max(A,y,T),X=D-g,I;return D===g?I=0:A===D?I=(y-T)/X:y===D?I=2+(T-A)/X:T===D&&(I=4+(A-y)/X),I=Math.min(60*I,360),0>I&&(I+=360),A=(g+D)/2,[I,100*(D===g?0:.5>=A?X/(D+g):X/(2-D-g)),100*A]},o.rgb.hsv=function(g){var A,y=g[0]/255,T=g[1]/255,D=g[2]/255,X=Math.max(y,T,D),I=X-Math.min(y,T,D);if(I===0)var b=A=0;else{A=I/X,g=(X-y)/6/I+.5;var N=(X-T)/6/I+.5;I=(X-D)/6/I+.5,y===X?b=I-N:T===X?b=1/3+g-I:D===X&&(b=2/3+N-g),0>b?b+=1:1<b&&--b}return[360*b,100*A,100*X]},o.rgb.hwb=function(g){var A=g[0],y=g[1],T=g[2];g=o.rgb.hsl(g)[0];var D=1/255*Math.min(A,Math.min(y,T));return T=1-1/255*Math.max(A,Math.max(y,T)),[g,100*D,100*T]},o.rgb.cmyk=function(g){var A=g[0]/255,y=g[1]/255;g=g[2]/255;var T=Math.min(1-A,1-y,1-g);return[100*((1-A-T)/(1-T)||0),100*((1-y-T)/(1-T)||0),100*((1-g-T)/(1-T)||0),100*T]},o.rgb.keyword=function(g){var A=n[g];if(A)return A;A=1/0;var y;for(y in rh)if(rh.hasOwnProperty(y)){var T=rh[y];if(T=Math.pow(g[0]-T[0],2)+Math.pow(g[1]-T[1],2)+Math.pow(g[2]-T[2],2),T<A){A=T;var D=y}}return D},o.keyword.rgb=function(g){return rh[g]},o.rgb.xyz=function(g){var A=g[0]/255,y=g[1]/255;return g=g[2]/255,A=.04045<A?Math.pow((A+.055)/1.055,2.4):A/12.92,y=.04045<y?Math.pow((y+.055)/1.055,2.4):y/12.92,g=.04045<g?Math.pow((g+.055)/1.055,2.4):g/12.92,[100*(.4124*A+.3576*y+.1805*g),100*(.2126*A+.7152*y+.0722*g),100*(.0193*A+.1192*y+.9505*g)]},o.rgb.lab=function(g){var A=o.rgb.xyz(g);g=A[0];var y=A[1];return A=A[2],g/=95.047,y/=100,A/=108.883,g=.008856<g?Math.pow(g,1/3):7.787*g+16/116,y=.008856<y?Math.pow(y,1/3):7.787*y+16/116,A=.008856<A?Math.pow(A,1/3):7.787*A+16/116,[116*y-16,500*(g-y),200*(y-A)]},o.hsl.rgb=function(g){var A=g[0]/360,y=g[1]/100;if(g=g[2]/100,y===0){var T=255*g;return[T,T,T]}y=.5>g?g*(1+y):g+y-g*y,g=2*g-y;for(var D=[0,0,0],X=0;3>X;X++)T=A+1/3*-(X-1),0>T&&T++,1<T&&T--,T=1>6*T?g+6*(y-g)*T:1>2*T?y:2>3*T?g+(y-g)*(2/3-T)*6:g,D[X]=255*T;return D},o.hsl.hsv=function(g){var A=g[0],y=g[1]/100;g=g[2]/100;var T=y,D=Math.max(g,.01);return g*=2,y*=1>=g?g:2-g,T*=1>=D?D:2-D,[A,100*(g===0?2*T/(D+T):2*y/(g+y)),(g+y)/2*100]},o.hsv.rgb=function(g){var A=g[0]/60,y=g[1]/100;g=g[2]/100;var T=Math.floor(A)%6,D=A-Math.floor(A);A=255*g*(1-y);var X=255*g*(1-y*D);switch(y=255*g*(1-y*(1-D)),g*=255,T){case 0:return[g,y,A];case 1:return[X,g,A];case 2:return[A,g,y];case 3:return[A,X,g];case 4:return[y,A,g];case 5:return[g,A,X]}},o.hsv.hsl=function(g){var A=g[0],y=g[1]/100;g=g[2]/100;var T=Math.max(g,.01),D=(2-y)*T;return T=y*T/(1>=D?D:2-D)||0,[A,100*T,(2-y)*g/2*100]},o.hwb.rgb=function(g){var A=g[0]/360,y=g[1]/100;g=g[2]/100;var T=y+g;switch(1<T&&(y/=T,g/=T),T=Math.floor(6*A),g=1-g,A=6*A-T,T&1&&(A=1-A),A=y+A*(g-y),T){default:case 6:case 0:T=g;var D=A;break;case 1:T=A,D=g;break;case 2:T=y,D=g,y=A;break;case 3:T=y,D=A,y=g;break;case 4:T=A,D=y,y=g;break;case 5:T=g,D=y,y=A}return[255*T,255*D,255*y]},o.cmyk.rgb=function(g){var A=g[3]/100;return[255*(1-Math.min(1,g[0]/100*(1-A)+A)),255*(1-Math.min(1,g[1]/100*(1-A)+A)),255*(1-Math.min(1,g[2]/100*(1-A)+A))]},o.xyz.rgb=function(g){var A=g[0]/100,y=g[1]/100,T=g[2]/100;g=3.2406*A+-1.5372*y+-.4986*T;var D=-.9689*A+1.8758*y+.0415*T;return A=.0557*A+-.204*y+1.057*T,g=.0031308<g?1.055*Math.pow(g,1/2.4)-.055:12.92*g,D=.0031308<D?1.055*Math.pow(D,1/2.4)-.055:12.92*D,A=.0031308<A?1.055*Math.pow(A,1/2.4)-.055:12.92*A,g=Math.min(Math.max(0,g),1),D=Math.min(Math.max(0,D),1),A=Math.min(Math.max(0,A),1),[255*g,255*D,255*A]},o.xyz.lab=function(g){var A=g[0],y=g[1];return g=g[2],A/=95.047,y/=100,g/=108.883,A=.008856<A?Math.pow(A,1/3):7.787*A+16/116,y=.008856<y?Math.pow(y,1/3):7.787*y+16/116,g=.008856<g?Math.pow(g,1/3):7.787*g+16/116,[116*y-16,500*(A-y),200*(y-g)]},o.lab.xyz=function(g){var A=g[1],y=g[2];g=(g[0]+16)/116,A=A/500+g,y=g-y/200;var T=Math.pow(g,3),D=Math.pow(A,3),X=Math.pow(y,3);return[95.047*(.008856<D?D:(A-16/116)/7.787),100*(.008856<T?T:(g-16/116)/7.787),108.883*(.008856<X?X:(y-16/116)/7.787)]},o.lab.lch=function(g){var A=g[0],y=g[1];g=g[2];var T=360*Math.atan2(g,y)/2/Math.PI;return 0>T&&(T+=360),[A,Math.sqrt(y*y+g*g),T]},o.lch.lab=function(g){var A=g[0],y=g[1];return g=g[2]/360*2*Math.PI,[A,y*Math.cos(g),y*Math.sin(g)]},o.rgb.ansi16=function(g){var A=g[0],y=g[1],T=g[2],D=1 in arguments?arguments[1]:o.rgb.hsv(g)[2];return D=Math.round(D/50),D===0?30:(A=30+(Math.round(T/255)<<2|Math.round(y/255)<<1|Math.round(A/255)),D===2&&(A+=60),A)},o.hsv.ansi16=function(g){return o.rgb.ansi16(o.hsv.rgb(g),g[2])},o.rgb.ansi256=function(g){var A=g[0],y=g[1];return g=g[2],A===y&&y===g?8>A?16:248<A?231:Math.round((A-8)/247*24)+232:16+36*Math.round(A/255*5)+6*Math.round(y/255*5)+Math.round(g/255*5)},o.ansi16.rgb=function(g){var A=g%10;return A===0||A===7?(50<g&&(A+=3.5),A=A/10.5*255,[A,A,A]):(g=.5*(~~(50<g)+1),[(A&1)*g*255,(A>>1&1)*g*255,(A>>2&1)*g*255])},o.ansi256.rgb=function(g){if(232<=g){var A=10*(g-232)+8;return[A,A,A]}g-=16,A=Math.floor(g/36)/5*255;var y=Math.floor((g%=36)/6)/5*255;return[A,y,g%6/5*255]},o.rgb.hex=function(g){return g=(((Math.round(g[0])&255)<<16)+((Math.round(g[1])&255)<<8)+(Math.round(g[2])&255)).toString(16).toUpperCase(),"000000".substring(g.length)+g},o.hex.rgb=function(g){if(g=g.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i),!g)return[0,0,0];var A=g[0];return g[0].length===3&&(A=A.split("").map(function(y){return y+y}).join("")),g=parseInt(A,16),[g>>16&255,g>>8&255,g&255]},o.rgb.hcg=function(g){var A=g[0]/255,y=g[1]/255;g=g[2]/255;var T=Math.max(Math.max(A,y),g),D=Math.min(Math.min(A,y),g),X=T-D;return[(0>=X?0:T===A?(y-g)/X%6:T===y?2+(g-A)/X:(A-y)/X+8)/6%1*360,100*X,100*(1>X?D/(1-X):0)]},o.hsl.hcg=function(g){var A=g[1]/100,y=g[2]/100,T=0;return A=.5>y?2*A*y:2*A*(1-y),1>A&&(T=(y-.5*A)/(1-A)),[g[0],100*A,100*T]},o.hsv.hcg=function(g){var A=g[2]/100,y=g[1]/100*A,T=0;return 1>y&&(T=(A-y)/(1-y)),[g[0],100*y,100*T]},o.hcg.rgb=function(g){var A=g[1]/100,y=g[2]/100;if(A===0)return[255*y,255*y,255*y];var T=[0,0,0];g=g[0]/360%1*6;var D=g%1,X=1-D;switch(Math.floor(g)){case 0:T[0]=1,T[1]=D,T[2]=0;break;case 1:T[0]=X,T[1]=1,T[2]=0;break;case 2:T[0]=0,T[1]=1,T[2]=D;break;case 3:T[0]=0,T[1]=X,T[2]=1;break;case 4:T[0]=D,T[1]=0,T[2]=1;break;default:T[0]=1,T[1]=0,T[2]=X}return y*=1-A,[255*(A*T[0]+y),255*(A*T[1]+y),255*(A*T[2]+y)]},o.hcg.hsv=function(g){var A=g[1]/100,y=A+g[2]/100*(1-A),T=0;return 0<y&&(T=A/y),[g[0],100*T,100*y]},o.hcg.hsl=function(g){var A=g[1]/100,y=g[2]/100*(1-A)+.5*A,T=0;return 0<y&&.5>y?T=A/(2*y):.5<=y&&1>y&&(T=A/(2*(1-y))),[g[0],100*T,100*y]},o.hcg.hwb=function(g){var A=g[1]/100,y=A+g[2]/100*(1-A);return[g[0],100*(y-A),100*(1-y)]},o.hwb.hcg=function(g){var A=1-g[2]/100,y=A-g[1]/100,T=0;return 1>y&&(T=(A-y)/(1-y)),[g[0],100*y,100*T]},o.apple.rgb=function(g){return[g[0]/65535*255,g[1]/65535*255,g[2]/65535*255]},o.rgb.apple=function(g){return[g[0]/255*65535,g[1]/255*65535,g[2]/255*65535]},o.gray.rgb=function(g){return[g[0]/100*255,g[0]/100*255,g[0]/100*255]},o.gray.hsl=o.gray.hsv=function(g){return[0,0,g[0]]},o.gray.hwb=function(g){return[0,100,g[0]]},o.gray.cmyk=function(g){return[0,0,0,g[0]]},o.gray.lab=function(g){return[g[0],0,0]},o.gray.hex=function(g){return g=Math.round(g[0]/100*255)&255,g=((g<<16)+(g<<8)+g).toString(16).toUpperCase(),"000000".substring(g.length)+g},o.rgb.gray=function(g){return[(g[0]+g[1]+g[2])/3/255*100]}}),KG=function(e){for(var n={},o=Hi(iv),c=o.length,v=0;v<c;v++)n[o[v]]={distance:-1,parent:null};for(o=[e],n[e].distance=0;o.length;){e=o.pop(),c=Hi(iv[e]),v=c.length;for(var g=0;g<v;g++){var A=c[g],y=n[A];y.distance===-1&&(y.distance=n[e].distance+1,y.parent=e,o.unshift(A))}}for(o={},e=Hi(n),c=e.length,v=0;v<c;v++){var T=e[v];if(n[T].parent!==null){g=T,A=n,y=[A[T].parent,T];var D=iv[A[T].parent][T];for(T=A[T].parent;A[T].parent;)y.unshift(A[T].parent),D=Kh(iv[A[T].parent][T],D),T=A[T].parent;D.conversion=y,o[g]=D}}return o},my={};Hi(iv).forEach(function(e){my[e]={},Object.defineProperty(my[e],"channels",{value:iv[e].channels}),Object.defineProperty(my[e],"labels",{value:iv[e].labels});var n=KG(e);Hi(n).forEach(function(o){var c=n[o];my[e][o]=ts(c),my[e][o].raw=Jh(c)})});var Au=my,YI=[].slice,Gb=["keyword","gray","hex"],ZI={};Hi(Au).forEach(function(e){ZI[YI.call(Au[e].labels).sort().join("")]=e});var lM={};kn.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var n=this.model in $2.to?this:this.rgb();return n=n.round(typeof e=="number"?e:1),e=n.valpha===1?n.color:n.color.concat(this.valpha),$2.to[n.model](e)},percentString:function(e){return e=this.rgb().round(typeof e=="number"?e:1),e=e.valpha===1?e.color:e.color.concat(this.valpha),$2.to.rgb.percent(e)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var e={},n=Au[this.model].channels,o=Au[this.model].labels,c=0;c<n;c++)e[o[c]]=this.color[c];return this.valpha!==1&&(e.alpha=this.valpha),e},unitArray:function(){var e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,this.valpha!==1&&e.push(this.valpha),e},unitObject:function(){var e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,this.valpha!==1&&(e.alpha=this.valpha),e},round:function(e){return e=Math.max(e||0,0),new kn(this.color.map(_g(e)).concat(this.valpha),this.model)},alpha:function(e){return arguments.length?new kn(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:Go("rgb",0,Ro(255)),green:Go("rgb",1,Ro(255)),blue:Go("rgb",2,Ro(255)),hue:Go(["hsl","hsv","hsl","hwb","hcg"],0,function(e){return(e%360+360)%360}),saturationl:Go("hsl",1,Ro(100)),lightness:Go("hsl",2,Ro(100)),saturationv:Go("hsv",1,Ro(100)),value:Go("hsv",2,Ro(100)),chroma:Go("hcg",1,Ro(100)),gray:Go("hcg",2,Ro(100)),white:Go("hwb",1,Ro(100)),wblack:Go("hwb",2,Ro(100)),cyan:Go("cmyk",0,Ro(100)),magenta:Go("cmyk",1,Ro(100)),yellow:Go("cmyk",2,Ro(100)),black:Go("cmyk",3,Ro(100)),x:Go("xyz",0,Ro(100)),y:Go("xyz",1,Ro(100)),z:Go("xyz",2,Ro(100)),l:Go("lab",0,Ro(100)),a:Go("lab",1),b:Go("lab",2),keyword:function(e){return arguments.length?new kn(e):Au[this.model].keyword(this.color)},hex:function(e){return arguments.length?new kn(e):$2.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255},luminosity:function(){for(var e=this.rgb().color,n=[],o=0;o<e.length;o++){var c=e[o]/255;n[o]=.03928>=c?c/12.92:Math.pow((c+.055)/1.055,2.4)}return .2126*n[0]+.7152*n[1]+.0722*n[2]},contrast:function(e){var n=this.luminosity();return e=e.luminosity(),n>e?(n+.05)/(e+.05):(e+.05)/(n+.05)},level:function(e){return e=this.contrast(e),7.1<=e?"AAA":4.5<=e?"AA":""},isDark:function(){var e=this.rgb().color;return 128>(299*e[0]+587*e[1]+114*e[2])/1e3},isLight:function(){return!this.isDark()},negate:function(){for(var e=this.rgb(),n=0;3>n;n++)e.color[n]=255-e.color[n];return e},lighten:function(e){var n=this.hsl();return n.color[2]+=n.color[2]*e,n},darken:function(e){var n=this.hsl();return n.color[2]-=n.color[2]*e,n},saturate:function(e){var n=this.hsl();return n.color[1]+=n.color[1]*e,n},desaturate:function(e){var n=this.hsl();return n.color[1]-=n.color[1]*e,n},whiten:function(e){var n=this.hwb();return n.color[1]+=n.color[1]*e,n},blacken:function(e){var n=this.hwb();return n.color[2]+=n.color[2]*e,n},grayscale:function(){var e=this.rgb().color;return e=.3*e[0]+.59*e[1]+.11*e[2],kn.rgb(e,e,e)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var n=this.hsl(),o=n.color[0];return o=(o+e)%360,n.color[0]=0>o?360+o:o,n},mix:function(e,n){if(!e||!e.rgb)throw Error('Argument to "mix" was not a Color instance, but rather an instance of '+(typeof e>"u"?"undefined":Jc(e)));e=e.rgb();var o=this.rgb();n=n===void 0?.5:n;var c=2*n-1,v=e.alpha()-o.alpha();return c=((c*v===-1?c:(c+v)/(1+c*v))+1)/2,v=1-c,kn.rgb(c*e.red()+v*o.red(),c*e.green()+v*o.green(),c*e.blue()+v*o.blue(),e.alpha()*n+o.alpha()*(1-n))}},Hi(Au).forEach(function(e){if(Gb.indexOf(e)===-1){var n=Au[e].channels;kn.prototype[e]=function(){if(this.model===e)return new kn(this);if(arguments.length)return new kn(arguments,e);var o=typeof arguments[n]=="number"?n:this.valpha,c=Au[this.model][e].raw(this.color);return c=Array.isArray(c)?c:[c],new kn(c.concat(o),e)},kn[e]=function(o){return typeof o=="number"&&(o=Mg(YI.call(arguments),n)),new kn(o,e)}}});var nh=M(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.setMatrixArrayType=function(g){n.ARRAY_TYPE=c=g},n.toRadian=function(g){return g*v},n.equals=function(g,A){return Math.abs(g-A)<=o*Math.max(1,Math.abs(g),Math.abs(A))},n.RANDOM=n.ARRAY_TYPE=n.EPSILON=void 0;var o=1e-6;n.EPSILON=o;var c=typeof Float32Array<"u"?Float32Array:Array;n.ARRAY_TYPE=c,n.RANDOM=Math.random;var v=Math.PI/180});m(nh);var Vb=M(function(e,n){function o(g,A,y){var T=A[0],D=A[1],X=A[2];A=A[3];var I=y[0],b=y[1],N=y[2];return y=y[3],g[0]=T*I+X*b,g[1]=D*I+A*b,g[2]=T*N+X*y,g[3]=D*N+A*y,g}function c(g,A,y){return g[0]=A[0]-y[0],g[1]=A[1]-y[1],g[2]=A[2]-y[2],g[3]=A[3]-y[3],g}Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){var g=new v.ARRAY_TYPE(4);return v.ARRAY_TYPE!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g},n.clone=function(g){var A=new v.ARRAY_TYPE(4);return A[0]=g[0],A[1]=g[1],A[2]=g[2],A[3]=g[3],A},n.copy=function(g,A){return g[0]=A[0],g[1]=A[1],g[2]=A[2],g[3]=A[3],g},n.identity=function(g){return g[0]=1,g[1]=0,g[2]=0,g[3]=1,g},n.fromValues=function(g,A,y,T){var D=new v.ARRAY_TYPE(4);return D[0]=g,D[1]=A,D[2]=y,D[3]=T,D},n.set=function(g,A,y,T,D){return g[0]=A,g[1]=y,g[2]=T,g[3]=D,g},n.transpose=function(g,A){if(g===A){var y=A[1];g[1]=A[2],g[2]=y}else g[0]=A[0],g[1]=A[2],g[2]=A[1],g[3]=A[3];return g},n.invert=function(g,A){var y=A[0],T=A[1],D=A[2];A=A[3];var X=y*A-D*T;return X?(X=1/X,g[0]=A*X,g[1]=-T*X,g[2]=-D*X,g[3]=y*X,g):null},n.adjoint=function(g,A){var y=A[0];return g[0]=A[3],g[1]=-A[1],g[2]=-A[2],g[3]=y,g},n.determinant=function(g){return g[0]*g[3]-g[2]*g[1]},n.multiply=o,n.rotate=function(g,A,y){var T=A[0],D=A[1],X=A[2];A=A[3];var I=Math.sin(y);return y=Math.cos(y),g[0]=T*y+X*I,g[1]=D*y+A*I,g[2]=T*-I+X*y,g[3]=D*-I+A*y,g},n.scale=function(g,A,y){var T=A[1],D=A[2],X=A[3],I=y[0];return y=y[1],g[0]=A[0]*I,g[1]=T*I,g[2]=D*y,g[3]=X*y,g},n.fromRotation=function(g,A){var y=Math.sin(A);return A=Math.cos(A),g[0]=A,g[1]=y,g[2]=-y,g[3]=A,g},n.fromScaling=function(g,A){return g[0]=A[0],g[1]=0,g[2]=0,g[3]=A[1],g},n.str=function(g){return"mat2("+g[0]+", "+g[1]+", "+g[2]+", "+g[3]+")"},n.frob=function(g){return Math.sqrt(Math.pow(g[0],2)+Math.pow(g[1],2)+Math.pow(g[2],2)+Math.pow(g[3],2))},n.LDU=function(g,A,y,T){return g[2]=T[2]/T[0],y[0]=T[0],y[1]=T[1],y[3]=T[3]-g[2]*y[1],[g,A,y]},n.add=function(g,A,y){return g[0]=A[0]+y[0],g[1]=A[1]+y[1],g[2]=A[2]+y[2],g[3]=A[3]+y[3],g},n.subtract=c,n.exactEquals=function(g,A){return g[0]===A[0]&&g[1]===A[1]&&g[2]===A[2]&&g[3]===A[3]},n.equals=function(g,A){var y=g[0],T=g[1],D=g[2];g=g[3];var X=A[0],I=A[1],b=A[2];return A=A[3],Math.abs(y-X)<=v.EPSILON*Math.max(1,Math.abs(y),Math.abs(X))&&Math.abs(T-I)<=v.EPSILON*Math.max(1,Math.abs(T),Math.abs(I))&&Math.abs(D-b)<=v.EPSILON*Math.max(1,Math.abs(D),Math.abs(b))&&Math.abs(g-A)<=v.EPSILON*Math.max(1,Math.abs(g),Math.abs(A))},n.multiplyScalar=function(g,A,y){return g[0]=A[0]*y,g[1]=A[1]*y,g[2]=A[2]*y,g[3]=A[3]*y,g},n.multiplyScalarAndAdd=function(g,A,y,T){return g[0]=A[0]+y[0]*T,g[1]=A[1]+y[1]*T,g[2]=A[2]+y[2]*T,g[3]=A[3]+y[3]*T,g},n.sub=n.mul=void 0;var v=function(g){if(g&&g.__esModule)return g;var A={};if(g!=null){for(var y in g)if(Object.prototype.hasOwnProperty.call(g,y)){var T=va&&Da?Da(g,y):{};T.get||T.set?va(A,y,T):A[y]=g[y]}}return A.default=g,A}(nh);n.mul=o,n.sub=c});m(Vb);var Wb=M(function(e,n){function o(g,A,y){var T=A[0],D=A[1],X=A[2],I=A[3],b=A[4];A=A[5];var N=y[0],k=y[1],G=y[2],re=y[3],se=y[4];return y=y[5],g[0]=T*N+X*k,g[1]=D*N+I*k,g[2]=T*G+X*re,g[3]=D*G+I*re,g[4]=T*se+X*y+b,g[5]=D*se+I*y+A,g}function c(g,A,y){return g[0]=A[0]-y[0],g[1]=A[1]-y[1],g[2]=A[2]-y[2],g[3]=A[3]-y[3],g[4]=A[4]-y[4],g[5]=A[5]-y[5],g}Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){var g=new v.ARRAY_TYPE(6);return v.ARRAY_TYPE!=Float32Array&&(g[1]=0,g[2]=0,g[4]=0,g[5]=0),g[0]=1,g[3]=1,g},n.clone=function(g){var A=new v.ARRAY_TYPE(6);return A[0]=g[0],A[1]=g[1],A[2]=g[2],A[3]=g[3],A[4]=g[4],A[5]=g[5],A},n.copy=function(g,A){return g[0]=A[0],g[1]=A[1],g[2]=A[2],g[3]=A[3],g[4]=A[4],g[5]=A[5],g},n.identity=function(g){return g[0]=1,g[1]=0,g[2]=0,g[3]=1,g[4]=0,g[5]=0,g},n.fromValues=function(g,A,y,T,D,X){var I=new v.ARRAY_TYPE(6);return I[0]=g,I[1]=A,I[2]=y,I[3]=T,I[4]=D,I[5]=X,I},n.set=function(g,A,y,T,D,X,I){return g[0]=A,g[1]=y,g[2]=T,g[3]=D,g[4]=X,g[5]=I,g},n.invert=function(g,A){var y=A[0],T=A[1],D=A[2],X=A[3],I=A[4];A=A[5];var b=y*X-T*D;return b?(b=1/b,g[0]=X*b,g[1]=-T*b,g[2]=-D*b,g[3]=y*b,g[4]=(D*A-X*I)*b,g[5]=(T*I-y*A)*b,g):null},n.determinant=function(g){return g[0]*g[3]-g[1]*g[2]},n.multiply=o,n.rotate=function(g,A,y){var T=A[0],D=A[1],X=A[2],I=A[3],b=A[4];A=A[5];var N=Math.sin(y);return y=Math.cos(y),g[0]=T*y+X*N,g[1]=D*y+I*N,g[2]=T*-N+X*y,g[3]=D*-N+I*y,g[4]=b,g[5]=A,g},n.scale=function(g,A,y){var T=A[1],D=A[2],X=A[3],I=A[4],b=A[5],N=y[0];return y=y[1],g[0]=A[0]*N,g[1]=T*N,g[2]=D*y,g[3]=X*y,g[4]=I,g[5]=b,g},n.translate=function(g,A,y){var T=A[0],D=A[1],X=A[2],I=A[3],b=A[4];A=A[5];var N=y[0];return y=y[1],g[0]=T,g[1]=D,g[2]=X,g[3]=I,g[4]=T*N+X*y+b,g[5]=D*N+I*y+A,g},n.fromRotation=function(g,A){var y=Math.sin(A);return A=Math.cos(A),g[0]=A,g[1]=y,g[2]=-y,g[3]=A,g[4]=0,g[5]=0,g},n.fromScaling=function(g,A){return g[0]=A[0],g[1]=0,g[2]=0,g[3]=A[1],g[4]=0,g[5]=0,g},n.fromTranslation=function(g,A){return g[0]=1,g[1]=0,g[2]=0,g[3]=1,g[4]=A[0],g[5]=A[1],g},n.str=function(g){return"mat2d("+g[0]+", "+g[1]+", "+g[2]+", "+g[3]+", "+g[4]+", "+g[5]+")"},n.frob=function(g){return Math.sqrt(Math.pow(g[0],2)+Math.pow(g[1],2)+Math.pow(g[2],2)+Math.pow(g[3],2)+Math.pow(g[4],2)+Math.pow(g[5],2)+1)},n.add=function(g,A,y){return g[0]=A[0]+y[0],g[1]=A[1]+y[1],g[2]=A[2]+y[2],g[3]=A[3]+y[3],g[4]=A[4]+y[4],g[5]=A[5]+y[5],g},n.subtract=c,n.multiplyScalar=function(g,A,y){return g[0]=A[0]*y,g[1]=A[1]*y,g[2]=A[2]*y,g[3]=A[3]*y,g[4]=A[4]*y,g[5]=A[5]*y,g},n.multiplyScalarAndAdd=function(g,A,y,T){return g[0]=A[0]+y[0]*T,g[1]=A[1]+y[1]*T,g[2]=A[2]+y[2]*T,g[3]=A[3]+y[3]*T,g[4]=A[4]+y[4]*T,g[5]=A[5]+y[5]*T,g},n.exactEquals=function(g,A){return g[0]===A[0]&&g[1]===A[1]&&g[2]===A[2]&&g[3]===A[3]&&g[4]===A[4]&&g[5]===A[5]},n.equals=function(g,A){var y=g[0],T=g[1],D=g[2],X=g[3],I=g[4];g=g[5];var b=A[0],N=A[1],k=A[2],G=A[3],re=A[4];return A=A[5],Math.abs(y-b)<=v.EPSILON*Math.max(1,Math.abs(y),Math.abs(b))&&Math.abs(T-N)<=v.EPSILON*Math.max(1,Math.abs(T),Math.abs(N))&&Math.abs(D-k)<=v.EPSILON*Math.max(1,Math.abs(D),Math.abs(k))&&Math.abs(X-G)<=v.EPSILON*Math.max(1,Math.abs(X),Math.abs(G))&&Math.abs(I-re)<=v.EPSILON*Math.max(1,Math.abs(I),Math.abs(re))&&Math.abs(g-A)<=v.EPSILON*Math.max(1,Math.abs(g),Math.abs(A))},n.sub=n.mul=void 0;var v=function(g){if(g&&g.__esModule)return g;var A={};if(g!=null){for(var y in g)if(Object.prototype.hasOwnProperty.call(g,y)){var T=va&&Da?Da(g,y):{};T.get||T.set?va(A,y,T):A[y]=g[y]}}return A.default=g,A}(nh);n.mul=o,n.sub=c});m(Wb);var qI=M(function(e,n){function o(g,A,y){var T=A[0],D=A[1],X=A[2],I=A[3],b=A[4],N=A[5],k=A[6],G=A[7];A=A[8];var re=y[0],se=y[1],ue=y[2],we=y[3],Te=y[4],je=y[5],Ge=y[6],He=y[7];return y=y[8],g[0]=re*T+se*I+ue*k,g[1]=re*D+se*b+ue*G,g[2]=re*X+se*N+ue*A,g[3]=we*T+Te*I+je*k,g[4]=we*D+Te*b+je*G,g[5]=we*X+Te*N+je*A,g[6]=Ge*T+He*I+y*k,g[7]=Ge*D+He*b+y*G,g[8]=Ge*X+He*N+y*A,g}function c(g,A,y){return g[0]=A[0]-y[0],g[1]=A[1]-y[1],g[2]=A[2]-y[2],g[3]=A[3]-y[3],g[4]=A[4]-y[4],g[5]=A[5]-y[5],g[6]=A[6]-y[6],g[7]=A[7]-y[7],g[8]=A[8]-y[8],g}Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){var g=new v.ARRAY_TYPE(9);return v.ARRAY_TYPE!=Float32Array&&(g[1]=0,g[2]=0,g[3]=0,g[5]=0,g[6]=0,g[7]=0),g[0]=1,g[4]=1,g[8]=1,g},n.fromMat4=function(g,A){return g[0]=A[0],g[1]=A[1],g[2]=A[2],g[3]=A[4],g[4]=A[5],g[5]=A[6],g[6]=A[8],g[7]=A[9],g[8]=A[10],g},n.clone=function(g){var A=new v.ARRAY_TYPE(9);return A[0]=g[0],A[1]=g[1],A[2]=g[2],A[3]=g[3],A[4]=g[4],A[5]=g[5],A[6]=g[6],A[7]=g[7],A[8]=g[8],A},n.copy=function(g,A){return g[0]=A[0],g[1]=A[1],g[2]=A[2],g[3]=A[3],g[4]=A[4],g[5]=A[5],g[6]=A[6],g[7]=A[7],g[8]=A[8],g},n.fromValues=function(g,A,y,T,D,X,I,b,N){var k=new v.ARRAY_TYPE(9);return k[0]=g,k[1]=A,k[2]=y,k[3]=T,k[4]=D,k[5]=X,k[6]=I,k[7]=b,k[8]=N,k},n.set=function(g,A,y,T,D,X,I,b,N,k){return g[0]=A,g[1]=y,g[2]=T,g[3]=D,g[4]=X,g[5]=I,g[6]=b,g[7]=N,g[8]=k,g},n.identity=function(g){return g[0]=1,g[1]=0,g[2]=0,g[3]=0,g[4]=1,g[5]=0,g[6]=0,g[7]=0,g[8]=1,g},n.transpose=function(g,A){if(g===A){var y=A[1],T=A[2],D=A[5];g[1]=A[3],g[2]=A[6],g[3]=y,g[5]=A[7],g[6]=T,g[7]=D}else g[0]=A[0],g[1]=A[3],g[2]=A[6],g[3]=A[1],g[4]=A[4],g[5]=A[7],g[6]=A[2],g[7]=A[5],g[8]=A[8];return g},n.invert=function(g,A){var y=A[0],T=A[1],D=A[2],X=A[3],I=A[4],b=A[5],N=A[6],k=A[7];A=A[8];var G=A*I-b*k,re=-A*X+b*N,se=k*X-I*N,ue=y*G+T*re+D*se;return ue?(ue=1/ue,g[0]=G*ue,g[1]=(-A*T+D*k)*ue,g[2]=(b*T-D*I)*ue,g[3]=re*ue,g[4]=(A*y-D*N)*ue,g[5]=(-b*y+D*X)*ue,g[6]=se*ue,g[7]=(-k*y+T*N)*ue,g[8]=(I*y-T*X)*ue,g):null},n.adjoint=function(g,A){var y=A[0],T=A[1],D=A[2],X=A[3],I=A[4],b=A[5],N=A[6],k=A[7];return A=A[8],g[0]=I*A-b*k,g[1]=D*k-T*A,g[2]=T*b-D*I,g[3]=b*N-X*A,g[4]=y*A-D*N,g[5]=D*X-y*b,g[6]=X*k-I*N,g[7]=T*N-y*k,g[8]=y*I-T*X,g},n.determinant=function(g){var A=g[3],y=g[4],T=g[5],D=g[6],X=g[7],I=g[8];return g[0]*(I*y-T*X)+g[1]*(-I*A+T*D)+g[2]*(X*A-y*D)},n.multiply=o,n.translate=function(g,A,y){var T=A[0],D=A[1],X=A[2],I=A[3],b=A[4],N=A[5],k=A[6],G=A[7];A=A[8];var re=y[0];return y=y[1],g[0]=T,g[1]=D,g[2]=X,g[3]=I,g[4]=b,g[5]=N,g[6]=re*T+y*I+k,g[7]=re*D+y*b+G,g[8]=re*X+y*N+A,g},n.rotate=function(g,A,y){var T=A[0],D=A[1],X=A[2],I=A[3],b=A[4],N=A[5],k=A[6],G=A[7];A=A[8];var re=Math.sin(y);return y=Math.cos(y),g[0]=y*T+re*I,g[1]=y*D+re*b,g[2]=y*X+re*N,g[3]=y*I-re*T,g[4]=y*b-re*D,g[5]=y*N-re*X,g[6]=k,g[7]=G,g[8]=A,g},n.scale=function(g,A,y){var T=y[0];return y=y[1],g[0]=T*A[0],g[1]=T*A[1],g[2]=T*A[2],g[3]=y*A[3],g[4]=y*A[4],g[5]=y*A[5],g[6]=A[6],g[7]=A[7],g[8]=A[8],g},n.fromTranslation=function(g,A){return g[0]=1,g[1]=0,g[2]=0,g[3]=0,g[4]=1,g[5]=0,g[6]=A[0],g[7]=A[1],g[8]=1,g},n.fromRotation=function(g,A){var y=Math.sin(A);return A=Math.cos(A),g[0]=A,g[1]=y,g[2]=0,g[3]=-y,g[4]=A,g[5]=0,g[6]=0,g[7]=0,g[8]=1,g},n.fromScaling=function(g,A){return g[0]=A[0],g[1]=0,g[2]=0,g[3]=0,g[4]=A[1],g[5]=0,g[6]=0,g[7]=0,g[8]=1,g},n.fromMat2d=function(g,A){return g[0]=A[0],g[1]=A[1],g[2]=0,g[3]=A[2],g[4]=A[3],g[5]=0,g[6]=A[4],g[7]=A[5],g[8]=1,g},n.fromQuat=function(g,A){var y=A[0],T=A[1],D=A[2];A=A[3];var X=y+y,I=T+T,b=D+D;y*=X;var N=T*X;T*=I;var k=D*X,G=D*I;return D*=b,X*=A,I*=A,A*=b,g[0]=1-T-D,g[3]=N-A,g[6]=k+I,g[1]=N+A,g[4]=1-y-D,g[7]=G-X,g[2]=k-I,g[5]=G+X,g[8]=1-y-T,g},n.normalFromMat4=function(g,A){var y=A[0],T=A[1],D=A[2],X=A[3],I=A[4],b=A[5],N=A[6],k=A[7],G=A[8],re=A[9],se=A[10],ue=A[11],we=A[12],Te=A[13],je=A[14];A=A[15];var Ge=y*b-T*I,He=y*N-D*I,lt=y*k-X*I,ht=T*N-D*b,It=T*k-X*b,vt=D*k-X*N,Et=G*Te-re*we,xr=G*je-se*we;G=G*A-ue*we;var Nt=re*je-se*Te;return re=re*A-ue*Te,se=se*A-ue*je,ue=Ge*se-He*re+lt*Nt+ht*G-It*xr+vt*Et,ue?(ue=1/ue,g[0]=(b*se-N*re+k*Nt)*ue,g[1]=(N*G-I*se-k*xr)*ue,g[2]=(I*re-b*G+k*Et)*ue,g[3]=(D*re-T*se-X*Nt)*ue,g[4]=(y*se-D*G+X*xr)*ue,g[5]=(T*G-y*re-X*Et)*ue,g[6]=(Te*vt-je*It+A*ht)*ue,g[7]=(je*lt-we*vt-A*He)*ue,g[8]=(we*It-Te*lt+A*Ge)*ue,g):null},n.projection=function(g,A,y){return g[0]=2/A,g[1]=0,g[2]=0,g[3]=0,g[4]=-2/y,g[5]=0,g[6]=-1,g[7]=1,g[8]=1,g},n.str=function(g){return"mat3("+g[0]+", "+g[1]+", "+g[2]+", "+g[3]+", "+g[4]+", "+g[5]+", "+g[6]+", "+g[7]+", "+g[8]+")"},n.frob=function(g){return Math.sqrt(Math.pow(g[0],2)+Math.pow(g[1],2)+Math.pow(g[2],2)+Math.pow(g[3],2)+Math.pow(g[4],2)+Math.pow(g[5],2)+Math.pow(g[6],2)+Math.pow(g[7],2)+Math.pow(g[8],2))},n.add=function(g,A,y){return g[0]=A[0]+y[0],g[1]=A[1]+y[1],g[2]=A[2]+y[2],g[3]=A[3]+y[3],g[4]=A[4]+y[4],g[5]=A[5]+y[5],g[6]=A[6]+y[6],g[7]=A[7]+y[7],g[8]=A[8]+y[8],g},n.subtract=c,n.multiplyScalar=function(g,A,y){return g[0]=A[0]*y,g[1]=A[1]*y,g[2]=A[2]*y,g[3]=A[3]*y,g[4]=A[4]*y,g[5]=A[5]*y,g[6]=A[6]*y,g[7]=A[7]*y,g[8]=A[8]*y,g},n.multiplyScalarAndAdd=function(g,A,y,T){return g[0]=A[0]+y[0]*T,g[1]=A[1]+y[1]*T,g[2]=A[2]+y[2]*T,g[3]=A[3]+y[3]*T,g[4]=A[4]+y[4]*T,g[5]=A[5]+y[5]*T,g[6]=A[6]+y[6]*T,g[7]=A[7]+y[7]*T,g[8]=A[8]+y[8]*T,g},n.exactEquals=function(g,A){return g[0]===A[0]&&g[1]===A[1]&&g[2]===A[2]&&g[3]===A[3]&&g[4]===A[4]&&g[5]===A[5]&&g[6]===A[6]&&g[7]===A[7]&&g[8]===A[8]},n.equals=function(g,A){var y=g[0],T=g[1],D=g[2],X=g[3],I=g[4],b=g[5],N=g[6],k=g[7];g=g[8];var G=A[0],re=A[1],se=A[2],ue=A[3],we=A[4],Te=A[5],je=A[6],Ge=A[7];return A=A[8],Math.abs(y-G)<=v.EPSILON*Math.max(1,Math.abs(y),Math.abs(G))&&Math.abs(T-re)<=v.EPSILON*Math.max(1,Math.abs(T),Math.abs(re))&&Math.abs(D-se)<=v.EPSILON*Math.max(1,Math.abs(D),Math.abs(se))&&Math.abs(X-ue)<=v.EPSILON*Math.max(1,Math.abs(X),Math.abs(ue))&&Math.abs(I-we)<=v.EPSILON*Math.max(1,Math.abs(I),Math.abs(we))&&Math.abs(b-Te)<=v.EPSILON*Math.max(1,Math.abs(b),Math.abs(Te))&&Math.abs(N-je)<=v.EPSILON*Math.max(1,Math.abs(N),Math.abs(je))&&Math.abs(k-Ge)<=v.EPSILON*Math.max(1,Math.abs(k),Math.abs(Ge))&&Math.abs(g-A)<=v.EPSILON*Math.max(1,Math.abs(g),Math.abs(A))},n.sub=n.mul=void 0;var v=function(g){if(g&&g.__esModule)return g;var A={};if(g!=null){for(var y in g)if(Object.prototype.hasOwnProperty.call(g,y)){var T=va&&Da?Da(g,y):{};T.get||T.set?va(A,y,T):A[y]=g[y]}}return A.default=g,A}(nh);n.mul=o,n.sub=c});m(qI);var KI=M(function(e,n){function o(y){return y[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=1,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=1,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y}function c(y,T,D){var X=T[0],I=T[1],b=T[2],N=T[3],k=T[4],G=T[5],re=T[6],se=T[7],ue=T[8],we=T[9],Te=T[10],je=T[11],Ge=T[12],He=T[13],lt=T[14];T=T[15];var ht=D[0],It=D[1],vt=D[2],Et=D[3];return y[0]=ht*X+It*k+vt*ue+Et*Ge,y[1]=ht*I+It*G+vt*we+Et*He,y[2]=ht*b+It*re+vt*Te+Et*lt,y[3]=ht*N+It*se+vt*je+Et*T,ht=D[4],It=D[5],vt=D[6],Et=D[7],y[4]=ht*X+It*k+vt*ue+Et*Ge,y[5]=ht*I+It*G+vt*we+Et*He,y[6]=ht*b+It*re+vt*Te+Et*lt,y[7]=ht*N+It*se+vt*je+Et*T,ht=D[8],It=D[9],vt=D[10],Et=D[11],y[8]=ht*X+It*k+vt*ue+Et*Ge,y[9]=ht*I+It*G+vt*we+Et*He,y[10]=ht*b+It*re+vt*Te+Et*lt,y[11]=ht*N+It*se+vt*je+Et*T,ht=D[12],It=D[13],vt=D[14],Et=D[15],y[12]=ht*X+It*k+vt*ue+Et*Ge,y[13]=ht*I+It*G+vt*we+Et*He,y[14]=ht*b+It*re+vt*Te+Et*lt,y[15]=ht*N+It*se+vt*je+Et*T,y}function v(y,T,D){var X=T[0],I=T[1],b=T[2],N=T[3],k=X+X,G=I+I,re=b+b;T=X*k;var se=X*G;X*=re;var ue=I*G;return I*=re,b*=re,k*=N,G*=N,N*=re,y[0]=1-(ue+b),y[1]=se+N,y[2]=X-G,y[3]=0,y[4]=se-N,y[5]=1-(T+b),y[6]=I+k,y[7]=0,y[8]=X+G,y[9]=I-k,y[10]=1-(T+ue),y[11]=0,y[12]=D[0],y[13]=D[1],y[14]=D[2],y[15]=1,y}function g(y,T,D){return y[0]=T[0]-D[0],y[1]=T[1]-D[1],y[2]=T[2]-D[2],y[3]=T[3]-D[3],y[4]=T[4]-D[4],y[5]=T[5]-D[5],y[6]=T[6]-D[6],y[7]=T[7]-D[7],y[8]=T[8]-D[8],y[9]=T[9]-D[9],y[10]=T[10]-D[10],y[11]=T[11]-D[11],y[12]=T[12]-D[12],y[13]=T[13]-D[13],y[14]=T[14]-D[14],y[15]=T[15]-D[15],y}Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){var y=new A.ARRAY_TYPE(16);return A.ARRAY_TYPE!=Float32Array&&(y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[11]=0,y[12]=0,y[13]=0,y[14]=0),y[0]=1,y[5]=1,y[10]=1,y[15]=1,y},n.clone=function(y){var T=new A.ARRAY_TYPE(16);return T[0]=y[0],T[1]=y[1],T[2]=y[2],T[3]=y[3],T[4]=y[4],T[5]=y[5],T[6]=y[6],T[7]=y[7],T[8]=y[8],T[9]=y[9],T[10]=y[10],T[11]=y[11],T[12]=y[12],T[13]=y[13],T[14]=y[14],T[15]=y[15],T},n.copy=function(y,T){return y[0]=T[0],y[1]=T[1],y[2]=T[2],y[3]=T[3],y[4]=T[4],y[5]=T[5],y[6]=T[6],y[7]=T[7],y[8]=T[8],y[9]=T[9],y[10]=T[10],y[11]=T[11],y[12]=T[12],y[13]=T[13],y[14]=T[14],y[15]=T[15],y},n.fromValues=function(y,T,D,X,I,b,N,k,G,re,se,ue,we,Te,je,Ge){var He=new A.ARRAY_TYPE(16);return He[0]=y,He[1]=T,He[2]=D,He[3]=X,He[4]=I,He[5]=b,He[6]=N,He[7]=k,He[8]=G,He[9]=re,He[10]=se,He[11]=ue,He[12]=we,He[13]=Te,He[14]=je,He[15]=Ge,He},n.set=function(y,T,D,X,I,b,N,k,G,re,se,ue,we,Te,je,Ge,He){return y[0]=T,y[1]=D,y[2]=X,y[3]=I,y[4]=b,y[5]=N,y[6]=k,y[7]=G,y[8]=re,y[9]=se,y[10]=ue,y[11]=we,y[12]=Te,y[13]=je,y[14]=Ge,y[15]=He,y},n.identity=o,n.transpose=function(y,T){if(y===T){var D=T[1],X=T[2],I=T[3],b=T[6],N=T[7],k=T[11];y[1]=T[4],y[2]=T[8],y[3]=T[12],y[4]=D,y[6]=T[9],y[7]=T[13],y[8]=X,y[9]=b,y[11]=T[14],y[12]=I,y[13]=N,y[14]=k}else y[0]=T[0],y[1]=T[4],y[2]=T[8],y[3]=T[12],y[4]=T[1],y[5]=T[5],y[6]=T[9],y[7]=T[13],y[8]=T[2],y[9]=T[6],y[10]=T[10],y[11]=T[14],y[12]=T[3],y[13]=T[7],y[14]=T[11],y[15]=T[15];return y},n.invert=function(y,T){var D=T[0],X=T[1],I=T[2],b=T[3],N=T[4],k=T[5],G=T[6],re=T[7],se=T[8],ue=T[9],we=T[10],Te=T[11],je=T[12],Ge=T[13],He=T[14];T=T[15];var lt=D*k-X*N,ht=D*G-I*N,It=D*re-b*N,vt=X*G-I*k,Et=X*re-b*k,xr=I*re-b*G,Nt=se*Ge-ue*je,Pr=se*He-we*je,qr=se*T-Te*je,Fr=ue*He-we*Ge,$n=ue*T-Te*Ge,Gr=we*T-Te*He,ze=lt*Gr-ht*$n+It*Fr+vt*qr-Et*Pr+xr*Nt;return ze?(ze=1/ze,y[0]=(k*Gr-G*$n+re*Fr)*ze,y[1]=(I*$n-X*Gr-b*Fr)*ze,y[2]=(Ge*xr-He*Et+T*vt)*ze,y[3]=(we*Et-ue*xr-Te*vt)*ze,y[4]=(G*qr-N*Gr-re*Pr)*ze,y[5]=(D*Gr-I*qr+b*Pr)*ze,y[6]=(He*It-je*xr-T*ht)*ze,y[7]=(se*xr-we*It+Te*ht)*ze,y[8]=(N*$n-k*qr+re*Nt)*ze,y[9]=(X*qr-D*$n-b*Nt)*ze,y[10]=(je*Et-Ge*It+T*lt)*ze,y[11]=(ue*It-se*Et-Te*lt)*ze,y[12]=(k*Pr-N*Fr-G*Nt)*ze,y[13]=(D*Fr-X*Pr+I*Nt)*ze,y[14]=(Ge*ht-je*vt-He*lt)*ze,y[15]=(se*vt-ue*ht+we*lt)*ze,y):null},n.adjoint=function(y,T){var D=T[0],X=T[1],I=T[2],b=T[3],N=T[4],k=T[5],G=T[6],re=T[7],se=T[8],ue=T[9],we=T[10],Te=T[11],je=T[12],Ge=T[13],He=T[14];return T=T[15],y[0]=k*(we*T-Te*He)-ue*(G*T-re*He)+Ge*(G*Te-re*we),y[1]=-(X*(we*T-Te*He)-ue*(I*T-b*He)+Ge*(I*Te-b*we)),y[2]=X*(G*T-re*He)-k*(I*T-b*He)+Ge*(I*re-b*G),y[3]=-(X*(G*Te-re*we)-k*(I*Te-b*we)+ue*(I*re-b*G)),y[4]=-(N*(we*T-Te*He)-se*(G*T-re*He)+je*(G*Te-re*we)),y[5]=D*(we*T-Te*He)-se*(I*T-b*He)+je*(I*Te-b*we),y[6]=-(D*(G*T-re*He)-N*(I*T-b*He)+je*(I*re-b*G)),y[7]=D*(G*Te-re*we)-N*(I*Te-b*we)+se*(I*re-b*G),y[8]=N*(ue*T-Te*Ge)-se*(k*T-re*Ge)+je*(k*Te-re*ue),y[9]=-(D*(ue*T-Te*Ge)-se*(X*T-b*Ge)+je*(X*Te-b*ue)),y[10]=D*(k*T-re*Ge)-N*(X*T-b*Ge)+je*(X*re-b*k),y[11]=-(D*(k*Te-re*ue)-N*(X*Te-b*ue)+se*(X*re-b*k)),y[12]=-(N*(ue*He-we*Ge)-se*(k*He-G*Ge)+je*(k*we-G*ue)),y[13]=D*(ue*He-we*Ge)-se*(X*He-I*Ge)+je*(X*we-I*ue),y[14]=-(D*(k*He-G*Ge)-N*(X*He-I*Ge)+je*(X*G-I*k)),y[15]=D*(k*we-G*ue)-N*(X*we-I*ue)+se*(X*G-I*k),y},n.determinant=function(y){var T=y[0],D=y[1],X=y[2],I=y[3],b=y[4],N=y[5],k=y[6],G=y[7],re=y[8],se=y[9],ue=y[10],we=y[11],Te=y[12],je=y[13],Ge=y[14];return y=y[15],(T*N-D*b)*(ue*y-we*Ge)-(T*k-X*b)*(se*y-we*je)+(T*G-I*b)*(se*Ge-ue*je)+(D*k-X*N)*(re*y-we*Te)-(D*G-I*N)*(re*Ge-ue*Te)+(X*G-I*k)*(re*je-se*Te)},n.multiply=c,n.translate=function(y,T,D){var X=D[0],I=D[1];if(D=D[2],T===y)y[12]=T[0]*X+T[4]*I+T[8]*D+T[12],y[13]=T[1]*X+T[5]*I+T[9]*D+T[13],y[14]=T[2]*X+T[6]*I+T[10]*D+T[14],y[15]=T[3]*X+T[7]*I+T[11]*D+T[15];else{var b=T[0],N=T[1],k=T[2],G=T[3],re=T[4],se=T[5],ue=T[6],we=T[7],Te=T[8],je=T[9],Ge=T[10],He=T[11];y[0]=b,y[1]=N,y[2]=k,y[3]=G,y[4]=re,y[5]=se,y[6]=ue,y[7]=we,y[8]=Te,y[9]=je,y[10]=Ge,y[11]=He,y[12]=b*X+re*I+Te*D+T[12],y[13]=N*X+se*I+je*D+T[13],y[14]=k*X+ue*I+Ge*D+T[14],y[15]=G*X+we*I+He*D+T[15]}return y},n.scale=function(y,T,D){var X=D[0],I=D[1];return D=D[2],y[0]=T[0]*X,y[1]=T[1]*X,y[2]=T[2]*X,y[3]=T[3]*X,y[4]=T[4]*I,y[5]=T[5]*I,y[6]=T[6]*I,y[7]=T[7]*I,y[8]=T[8]*D,y[9]=T[9]*D,y[10]=T[10]*D,y[11]=T[11]*D,y[12]=T[12],y[13]=T[13],y[14]=T[14],y[15]=T[15],y},n.rotate=function(y,T,D,X){var I=X[0],b=X[1];X=X[2];var N=Math.sqrt(I*I+b*b+X*X);if(N<A.EPSILON)return null;N=1/N,I*=N,b*=N,X*=N;var k=Math.sin(D),G=Math.cos(D),re=1-G;D=T[0],N=T[1];var se=T[2],ue=T[3],we=T[4],Te=T[5],je=T[6],Ge=T[7],He=T[8],lt=T[9],ht=T[10],It=T[11],vt=I*I*re+G,Et=b*I*re+X*k,xr=X*I*re-b*k,Nt=I*b*re-X*k,Pr=b*b*re+G,qr=X*b*re+I*k,Fr=I*X*re+b*k;return I=b*X*re-I*k,b=X*X*re+G,y[0]=D*vt+we*Et+He*xr,y[1]=N*vt+Te*Et+lt*xr,y[2]=se*vt+je*Et+ht*xr,y[3]=ue*vt+Ge*Et+It*xr,y[4]=D*Nt+we*Pr+He*qr,y[5]=N*Nt+Te*Pr+lt*qr,y[6]=se*Nt+je*Pr+ht*qr,y[7]=ue*Nt+Ge*Pr+It*qr,y[8]=D*Fr+we*I+He*b,y[9]=N*Fr+Te*I+lt*b,y[10]=se*Fr+je*I+ht*b,y[11]=ue*Fr+Ge*I+It*b,T!==y&&(y[12]=T[12],y[13]=T[13],y[14]=T[14],y[15]=T[15]),y},n.rotateX=function(y,T,D){var X=Math.sin(D);D=Math.cos(D);var I=T[4],b=T[5],N=T[6],k=T[7],G=T[8],re=T[9],se=T[10],ue=T[11];return T!==y&&(y[0]=T[0],y[1]=T[1],y[2]=T[2],y[3]=T[3],y[12]=T[12],y[13]=T[13],y[14]=T[14],y[15]=T[15]),y[4]=I*D+G*X,y[5]=b*D+re*X,y[6]=N*D+se*X,y[7]=k*D+ue*X,y[8]=G*D-I*X,y[9]=re*D-b*X,y[10]=se*D-N*X,y[11]=ue*D-k*X,y},n.rotateY=function(y,T,D){var X=Math.sin(D);D=Math.cos(D);var I=T[0],b=T[1],N=T[2],k=T[3],G=T[8],re=T[9],se=T[10],ue=T[11];return T!==y&&(y[4]=T[4],y[5]=T[5],y[6]=T[6],y[7]=T[7],y[12]=T[12],y[13]=T[13],y[14]=T[14],y[15]=T[15]),y[0]=I*D-G*X,y[1]=b*D-re*X,y[2]=N*D-se*X,y[3]=k*D-ue*X,y[8]=I*X+G*D,y[9]=b*X+re*D,y[10]=N*X+se*D,y[11]=k*X+ue*D,y},n.rotateZ=function(y,T,D){var X=Math.sin(D);D=Math.cos(D);var I=T[0],b=T[1],N=T[2],k=T[3],G=T[4],re=T[5],se=T[6],ue=T[7];return T!==y&&(y[8]=T[8],y[9]=T[9],y[10]=T[10],y[11]=T[11],y[12]=T[12],y[13]=T[13],y[14]=T[14],y[15]=T[15]),y[0]=I*D+G*X,y[1]=b*D+re*X,y[2]=N*D+se*X,y[3]=k*D+ue*X,y[4]=G*D-I*X,y[5]=re*D-b*X,y[6]=se*D-N*X,y[7]=ue*D-k*X,y},n.fromTranslation=function(y,T){return y[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=1,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=1,y[11]=0,y[12]=T[0],y[13]=T[1],y[14]=T[2],y[15]=1,y},n.fromScaling=function(y,T){return y[0]=T[0],y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=T[1],y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=T[2],y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y},n.fromRotation=function(y,T,D){var X=D[0],I=D[1];D=D[2];var b=Math.sqrt(X*X+I*I+D*D);if(b<A.EPSILON)return null;b=1/b,X*=b,I*=b,D*=b,b=Math.sin(T),T=Math.cos(T);var N=1-T;return y[0]=X*X*N+T,y[1]=I*X*N+D*b,y[2]=D*X*N-I*b,y[3]=0,y[4]=X*I*N-D*b,y[5]=I*I*N+T,y[6]=D*I*N+X*b,y[7]=0,y[8]=X*D*N+I*b,y[9]=I*D*N-X*b,y[10]=D*D*N+T,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y},n.fromXRotation=function(y,T){var D=Math.sin(T);return T=Math.cos(T),y[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=T,y[6]=D,y[7]=0,y[8]=0,y[9]=-D,y[10]=T,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y},n.fromYRotation=function(y,T){var D=Math.sin(T);return T=Math.cos(T),y[0]=T,y[1]=0,y[2]=-D,y[3]=0,y[4]=0,y[5]=1,y[6]=0,y[7]=0,y[8]=D,y[9]=0,y[10]=T,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y},n.fromZRotation=function(y,T){var D=Math.sin(T);return T=Math.cos(T),y[0]=T,y[1]=D,y[2]=0,y[3]=0,y[4]=-D,y[5]=T,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=1,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y},n.fromRotationTranslation=v,n.fromQuat2=function(y,T){var D=new A.ARRAY_TYPE(3),X=-T[0],I=-T[1],b=-T[2],N=T[3],k=T[4],G=T[5],re=T[6],se=T[7],ue=X*X+I*I+b*b+N*N;return 0<ue?(D[0]=2*(k*N+se*X+G*b-re*I)/ue,D[1]=2*(G*N+se*I+re*X-k*b)/ue,D[2]=2*(re*N+se*b+k*I-G*X)/ue):(D[0]=2*(k*N+se*X+G*b-re*I),D[1]=2*(G*N+se*I+re*X-k*b),D[2]=2*(re*N+se*b+k*I-G*X)),v(y,T,D),y},n.getTranslation=function(y,T){return y[0]=T[12],y[1]=T[13],y[2]=T[14],y},n.getScaling=function(y,T){var D=T[0],X=T[1],I=T[2],b=T[4],N=T[5],k=T[6],G=T[8],re=T[9];return T=T[10],y[0]=Math.sqrt(D*D+X*X+I*I),y[1]=Math.sqrt(b*b+N*N+k*k),y[2]=Math.sqrt(G*G+re*re+T*T),y},n.getRotation=function(y,T){var D=T[0]+T[5]+T[10];return 0<D?(D=2*Math.sqrt(D+1),y[3]=.25*D,y[0]=(T[6]-T[9])/D,y[1]=(T[8]-T[2])/D,y[2]=(T[1]-T[4])/D):T[0]>T[5]&&T[0]>T[10]?(D=2*Math.sqrt(1+T[0]-T[5]-T[10]),y[3]=(T[6]-T[9])/D,y[0]=.25*D,y[1]=(T[1]+T[4])/D,y[2]=(T[8]+T[2])/D):T[5]>T[10]?(D=2*Math.sqrt(1+T[5]-T[0]-T[10]),y[3]=(T[8]-T[2])/D,y[0]=(T[1]+T[4])/D,y[1]=.25*D,y[2]=(T[6]+T[9])/D):(D=2*Math.sqrt(1+T[10]-T[0]-T[5]),y[3]=(T[1]-T[4])/D,y[0]=(T[8]+T[2])/D,y[1]=(T[6]+T[9])/D,y[2]=.25*D),y},n.fromRotationTranslationScale=function(y,T,D,X){var I=T[0],b=T[1],N=T[2],k=T[3],G=I+I,re=b+b,se=N+N;T=I*G;var ue=I*re;I*=se;var we=b*re;b*=se,N*=se,G*=k,re*=k,k*=se,se=X[0];var Te=X[1];return X=X[2],y[0]=(1-(we+N))*se,y[1]=(ue+k)*se,y[2]=(I-re)*se,y[3]=0,y[4]=(ue-k)*Te,y[5]=(1-(T+N))*Te,y[6]=(b+G)*Te,y[7]=0,y[8]=(I+re)*X,y[9]=(b-G)*X,y[10]=(1-(T+we))*X,y[11]=0,y[12]=D[0],y[13]=D[1],y[14]=D[2],y[15]=1,y},n.fromRotationTranslationScaleOrigin=function(y,T,D,X,I){var b=T[0],N=T[1],k=T[2],G=T[3],re=b+b,se=N+N,ue=k+k;T=b*re;var we=b*se,Te=b*ue;b=N*se,N*=ue;var je=k*ue;k=G*re,se*=G;var Ge=G*ue,He=X[0],lt=X[1];ue=X[2],X=I[0],G=I[1],I=I[2],re=(1-(b+je))*He;var ht=(we+Ge)*He;return He*=Te-se,we=(we-Ge)*lt,je=(1-(T+je))*lt,lt*=N+k,Te=(Te+se)*ue,N=(N-k)*ue,T=(1-(T+b))*ue,y[0]=re,y[1]=ht,y[2]=He,y[3]=0,y[4]=we,y[5]=je,y[6]=lt,y[7]=0,y[8]=Te,y[9]=N,y[10]=T,y[11]=0,y[12]=D[0]+X-(re*X+we*G+Te*I),y[13]=D[1]+G-(ht*X+je*G+N*I),y[14]=D[2]+I-(He*X+lt*G+T*I),y[15]=1,y},n.fromQuat=function(y,T){var D=T[0],X=T[1],I=T[2];T=T[3];var b=D+D,N=X+X,k=I+I;D*=b;var G=X*b;X*=N;var re=I*b,se=I*N;return I*=k,b*=T,N*=T,T*=k,y[0]=1-X-I,y[1]=G+T,y[2]=re-N,y[3]=0,y[4]=G-T,y[5]=1-D-I,y[6]=se+b,y[7]=0,y[8]=re+N,y[9]=se-b,y[10]=1-D-X,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y},n.frustum=function(y,T,D,X,I,b,N){var k=1/(D-T),G=1/(I-X),re=1/(b-N);return y[0]=2*b*k,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=2*b*G,y[6]=0,y[7]=0,y[8]=(D+T)*k,y[9]=(I+X)*G,y[10]=(N+b)*re,y[11]=-1,y[12]=0,y[13]=0,y[14]=N*b*2*re,y[15]=0,y},n.perspective=function(y,T,D,X,I){return T=1/Math.tan(T/2),y[0]=T/D,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=T,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[11]=-1,y[12]=0,y[13]=0,y[15]=0,I!=null&&I!==1/0?(D=1/(X-I),y[10]=(I+X)*D,y[14]=2*I*X*D):(y[10]=-1,y[14]=-2*X),y},n.perspectiveFromFieldOfView=function(y,T,D,X){var I=Math.tan(T.upDegrees*Math.PI/180),b=Math.tan(T.downDegrees*Math.PI/180),N=Math.tan(T.leftDegrees*Math.PI/180);T=Math.tan(T.rightDegrees*Math.PI/180);var k=2/(N+T),G=2/(I+b);return y[0]=k,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=G,y[6]=0,y[7]=0,y[8]=-((N-T)*k*.5),y[9]=(I-b)*G*.5,y[10]=X/(D-X),y[11]=-1,y[12]=0,y[13]=0,y[14]=X*D/(D-X),y[15]=0,y},n.ortho=function(y,T,D,X,I,b,N){var k=1/(T-D),G=1/(X-I),re=1/(b-N);return y[0]=-2*k,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=-2*G,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=2*re,y[11]=0,y[12]=(T+D)*k,y[13]=(I+X)*G,y[14]=(N+b)*re,y[15]=1,y},n.lookAt=function(y,T,D,X){var I=T[0],b=T[1];T=T[2];var N=X[0],k=X[1],G=X[2],re=D[0];X=D[1];var se=D[2];if(Math.abs(I-re)<A.EPSILON&&Math.abs(b-X)<A.EPSILON&&Math.abs(T-se)<A.EPSILON)return o(y);D=I-re,X=b-X,re=T-se;var ue=1/Math.sqrt(D*D+X*X+re*re);D*=ue,X*=ue,re*=ue,se=k*re-G*X,G=G*D-N*re,N=N*X-k*D,(ue=Math.sqrt(se*se+G*G+N*N))?(ue=1/ue,se*=ue,G*=ue,N*=ue):N=G=se=0,k=X*N-re*G;var we=re*se-D*N,Te=D*G-X*se;return(ue=Math.sqrt(k*k+we*we+Te*Te))?(ue=1/ue,k*=ue,we*=ue,Te*=ue):Te=we=k=0,y[0]=se,y[1]=k,y[2]=D,y[3]=0,y[4]=G,y[5]=we,y[6]=X,y[7]=0,y[8]=N,y[9]=Te,y[10]=re,y[11]=0,y[12]=-(se*I+G*b+N*T),y[13]=-(k*I+we*b+Te*T),y[14]=-(D*I+X*b+re*T),y[15]=1,y},n.targetTo=function(y,T,D,X){var I=T[0],b=T[1];T=T[2];var N=X[0],k=X[1],G=X[2];X=I-D[0];var re=b-D[1];D=T-D[2];var se=X*X+re*re+D*D;0<se&&(se=1/Math.sqrt(se),X*=se,re*=se,D*=se);var ue=k*D-G*re;return G=G*X-N*D,N=N*re-k*X,se=ue*ue+G*G+N*N,0<se&&(se=1/Math.sqrt(se),ue*=se,G*=se,N*=se),y[0]=ue,y[1]=G,y[2]=N,y[3]=0,y[4]=re*N-D*G,y[5]=D*ue-X*N,y[6]=X*G-re*ue,y[7]=0,y[8]=X,y[9]=re,y[10]=D,y[11]=0,y[12]=I,y[13]=b,y[14]=T,y[15]=1,y},n.str=function(y){return"mat4("+y[0]+", "+y[1]+", "+y[2]+", "+y[3]+", "+y[4]+", "+y[5]+", "+y[6]+", "+y[7]+", "+y[8]+", "+y[9]+", "+y[10]+", "+y[11]+", "+y[12]+", "+y[13]+", "+y[14]+", "+y[15]+")"},n.frob=function(y){return Math.sqrt(Math.pow(y[0],2)+Math.pow(y[1],2)+Math.pow(y[2],2)+Math.pow(y[3],2)+Math.pow(y[4],2)+Math.pow(y[5],2)+Math.pow(y[6],2)+Math.pow(y[7],2)+Math.pow(y[8],2)+Math.pow(y[9],2)+Math.pow(y[10],2)+Math.pow(y[11],2)+Math.pow(y[12],2)+Math.pow(y[13],2)+Math.pow(y[14],2)+Math.pow(y[15],2))},n.add=function(y,T,D){return y[0]=T[0]+D[0],y[1]=T[1]+D[1],y[2]=T[2]+D[2],y[3]=T[3]+D[3],y[4]=T[4]+D[4],y[5]=T[5]+D[5],y[6]=T[6]+D[6],y[7]=T[7]+D[7],y[8]=T[8]+D[8],y[9]=T[9]+D[9],y[10]=T[10]+D[10],y[11]=T[11]+D[11],y[12]=T[12]+D[12],y[13]=T[13]+D[13],y[14]=T[14]+D[14],y[15]=T[15]+D[15],y},n.subtract=g,n.multiplyScalar=function(y,T,D){return y[0]=T[0]*D,y[1]=T[1]*D,y[2]=T[2]*D,y[3]=T[3]*D,y[4]=T[4]*D,y[5]=T[5]*D,y[6]=T[6]*D,y[7]=T[7]*D,y[8]=T[8]*D,y[9]=T[9]*D,y[10]=T[10]*D,y[11]=T[11]*D,y[12]=T[12]*D,y[13]=T[13]*D,y[14]=T[14]*D,y[15]=T[15]*D,y},n.multiplyScalarAndAdd=function(y,T,D,X){return y[0]=T[0]+D[0]*X,y[1]=T[1]+D[1]*X,y[2]=T[2]+D[2]*X,y[3]=T[3]+D[3]*X,y[4]=T[4]+D[4]*X,y[5]=T[5]+D[5]*X,y[6]=T[6]+D[6]*X,y[7]=T[7]+D[7]*X,y[8]=T[8]+D[8]*X,y[9]=T[9]+D[9]*X,y[10]=T[10]+D[10]*X,y[11]=T[11]+D[11]*X,y[12]=T[12]+D[12]*X,y[13]=T[13]+D[13]*X,y[14]=T[14]+D[14]*X,y[15]=T[15]+D[15]*X,y},n.exactEquals=function(y,T){return y[0]===T[0]&&y[1]===T[1]&&y[2]===T[2]&&y[3]===T[3]&&y[4]===T[4]&&y[5]===T[5]&&y[6]===T[6]&&y[7]===T[7]&&y[8]===T[8]&&y[9]===T[9]&&y[10]===T[10]&&y[11]===T[11]&&y[12]===T[12]&&y[13]===T[13]&&y[14]===T[14]&&y[15]===T[15]},n.equals=function(y,T){var D=y[0],X=y[1],I=y[2],b=y[3],N=y[4],k=y[5],G=y[6],re=y[7],se=y[8],ue=y[9],we=y[10],Te=y[11],je=y[12],Ge=y[13],He=y[14];y=y[15];var lt=T[0],ht=T[1],It=T[2],vt=T[3],Et=T[4],xr=T[5],Nt=T[6],Pr=T[7],qr=T[8],Fr=T[9],$n=T[10],Gr=T[11],ze=T[12],Ue=T[13],ke=T[14];return T=T[15],Math.abs(D-lt)<=A.EPSILON*Math.max(1,Math.abs(D),Math.abs(lt))&&Math.abs(X-ht)<=A.EPSILON*Math.max(1,Math.abs(X),Math.abs(ht))&&Math.abs(I-It)<=A.EPSILON*Math.max(1,Math.abs(I),Math.abs(It))&&Math.abs(b-vt)<=A.EPSILON*Math.max(1,Math.abs(b),Math.abs(vt))&&Math.abs(N-Et)<=A.EPSILON*Math.max(1,Math.abs(N),Math.abs(Et))&&Math.abs(k-xr)<=A.EPSILON*Math.max(1,Math.abs(k),Math.abs(xr))&&Math.abs(G-Nt)<=A.EPSILON*Math.max(1,Math.abs(G),Math.abs(Nt))&&Math.abs(re-Pr)<=A.EPSILON*Math.max(1,Math.abs(re),Math.abs(Pr))&&Math.abs(se-qr)<=A.EPSILON*Math.max(1,Math.abs(se),Math.abs(qr))&&Math.abs(ue-Fr)<=A.EPSILON*Math.max(1,Math.abs(ue),Math.abs(Fr))&&Math.abs(we-$n)<=A.EPSILON*Math.max(1,Math.abs(we),Math.abs($n))&&Math.abs(Te-Gr)<=A.EPSILON*Math.max(1,Math.abs(Te),Math.abs(Gr))&&Math.abs(je-ze)<=A.EPSILON*Math.max(1,Math.abs(je),Math.abs(ze))&&Math.abs(Ge-Ue)<=A.EPSILON*Math.max(1,Math.abs(Ge),Math.abs(Ue))&&Math.abs(He-ke)<=A.EPSILON*Math.max(1,Math.abs(He),Math.abs(ke))&&Math.abs(y-T)<=A.EPSILON*Math.max(1,Math.abs(y),Math.abs(T))},n.sub=n.mul=void 0;var A=function(y){if(y&&y.__esModule)return y;var T={};if(y!=null){for(var D in y)if(Object.prototype.hasOwnProperty.call(y,D)){var X=va&&Da?Da(y,D):{};X.get||X.set?va(T,D,X):T[D]=y[D]}}return T.default=y,T}(nh);n.mul=c,n.sub=g});m(KI);var JI=M(function(e,n){function o(){var k=new N.ARRAY_TYPE(3);return N.ARRAY_TYPE!=Float32Array&&(k[0]=0,k[1]=0,k[2]=0),k}function c(k){var G=k[0],re=k[1];return k=k[2],Math.sqrt(G*G+re*re+k*k)}function v(k,G,re){var se=new N.ARRAY_TYPE(3);return se[0]=k,se[1]=G,se[2]=re,se}function g(k,G,re){return k[0]=G[0]-re[0],k[1]=G[1]-re[1],k[2]=G[2]-re[2],k}function A(k,G,re){return k[0]=G[0]*re[0],k[1]=G[1]*re[1],k[2]=G[2]*re[2],k}function y(k,G,re){return k[0]=G[0]/re[0],k[1]=G[1]/re[1],k[2]=G[2]/re[2],k}function T(k,G){var re=G[0]-k[0],se=G[1]-k[1];return k=G[2]-k[2],Math.sqrt(re*re+se*se+k*k)}function D(k,G){var re=G[0]-k[0],se=G[1]-k[1];return k=G[2]-k[2],re*re+se*se+k*k}function X(k){var G=k[0],re=k[1];return k=k[2],G*G+re*re+k*k}function I(k,G){var re=G[0],se=G[1],ue=G[2];return re=re*re+se*se+ue*ue,0<re&&(re=1/Math.sqrt(re)),k[0]=G[0]*re,k[1]=G[1]*re,k[2]=G[2]*re,k}function b(k,G){return k[0]*G[0]+k[1]*G[1]+k[2]*G[2]}Object.defineProperty(n,"__esModule",{value:!0}),n.create=o,n.clone=function(k){var G=new N.ARRAY_TYPE(3);return G[0]=k[0],G[1]=k[1],G[2]=k[2],G},n.length=c,n.fromValues=v,n.copy=function(k,G){return k[0]=G[0],k[1]=G[1],k[2]=G[2],k},n.set=function(k,G,re,se){return k[0]=G,k[1]=re,k[2]=se,k},n.add=function(k,G,re){return k[0]=G[0]+re[0],k[1]=G[1]+re[1],k[2]=G[2]+re[2],k},n.subtract=g,n.multiply=A,n.divide=y,n.ceil=function(k,G){return k[0]=Math.ceil(G[0]),k[1]=Math.ceil(G[1]),k[2]=Math.ceil(G[2]),k},n.floor=function(k,G){return k[0]=Math.floor(G[0]),k[1]=Math.floor(G[1]),k[2]=Math.floor(G[2]),k},n.min=function(k,G,re){return k[0]=Math.min(G[0],re[0]),k[1]=Math.min(G[1],re[1]),k[2]=Math.min(G[2],re[2]),k},n.max=function(k,G,re){return k[0]=Math.max(G[0],re[0]),k[1]=Math.max(G[1],re[1]),k[2]=Math.max(G[2],re[2]),k},n.round=function(k,G){return k[0]=Math.round(G[0]),k[1]=Math.round(G[1]),k[2]=Math.round(G[2]),k},n.scale=function(k,G,re){return k[0]=G[0]*re,k[1]=G[1]*re,k[2]=G[2]*re,k},n.scaleAndAdd=function(k,G,re,se){return k[0]=G[0]+re[0]*se,k[1]=G[1]+re[1]*se,k[2]=G[2]+re[2]*se,k},n.distance=T,n.squaredDistance=D,n.squaredLength=X,n.negate=function(k,G){return k[0]=-G[0],k[1]=-G[1],k[2]=-G[2],k},n.inverse=function(k,G){return k[0]=1/G[0],k[1]=1/G[1],k[2]=1/G[2],k},n.normalize=I,n.dot=b,n.cross=function(k,G,re){var se=G[0],ue=G[1];G=G[2];var we=re[0],Te=re[1];return re=re[2],k[0]=ue*re-G*Te,k[1]=G*we-se*re,k[2]=se*Te-ue*we,k},n.lerp=function(k,G,re,se){var ue=G[0],we=G[1];return G=G[2],k[0]=ue+se*(re[0]-ue),k[1]=we+se*(re[1]-we),k[2]=G+se*(re[2]-G),k},n.hermite=function(k,G,re,se,ue,we){var Te=we*we,je=Te*(2*we-3)+1,Ge=Te*(we-2)+we,He=Te*(we-1);return we=Te*(3-2*we),k[0]=G[0]*je+re[0]*Ge+se[0]*He+ue[0]*we,k[1]=G[1]*je+re[1]*Ge+se[1]*He+ue[1]*we,k[2]=G[2]*je+re[2]*Ge+se[2]*He+ue[2]*we,k},n.bezier=function(k,G,re,se,ue,we){var Te=1-we,je=Te*Te,Ge=we*we,He=je*Te;return je*=3*we,Te*=3*Ge,we*=Ge,k[0]=G[0]*He+re[0]*je+se[0]*Te+ue[0]*we,k[1]=G[1]*He+re[1]*je+se[1]*Te+ue[1]*we,k[2]=G[2]*He+re[2]*je+se[2]*Te+ue[2]*we,k},n.random=function(k,G){G=G||1;var re=2*N.RANDOM()*Math.PI,se=2*N.RANDOM()-1,ue=Math.sqrt(1-se*se)*G;return k[0]=Math.cos(re)*ue,k[1]=Math.sin(re)*ue,k[2]=se*G,k},n.transformMat4=function(k,G,re){var se=G[0],ue=G[1];G=G[2];var we=re[3]*se+re[7]*ue+re[11]*G+re[15];return we=we||1,k[0]=(re[0]*se+re[4]*ue+re[8]*G+re[12])/we,k[1]=(re[1]*se+re[5]*ue+re[9]*G+re[13])/we,k[2]=(re[2]*se+re[6]*ue+re[10]*G+re[14])/we,k},n.transformMat3=function(k,G,re){var se=G[0],ue=G[1];return G=G[2],k[0]=se*re[0]+ue*re[3]+G*re[6],k[1]=se*re[1]+ue*re[4]+G*re[7],k[2]=se*re[2]+ue*re[5]+G*re[8],k},n.transformQuat=function(k,G,re){var se=re[0],ue=re[1],we=re[2],Te=G[0],je=G[1];G=G[2];var Ge=ue*G-we*je,He=we*Te-se*G,lt=se*je-ue*Te;return re=2*re[3],k[0]=Te+Ge*re+2*(ue*lt-we*He),k[1]=je+He*re+2*(we*Ge-se*lt),k[2]=G+lt*re+2*(se*He-ue*Ge),k},n.rotateX=function(k,G,re,se){var ue=[],we=[];return ue[0]=G[0]-re[0],ue[1]=G[1]-re[1],ue[2]=G[2]-re[2],we[0]=ue[0],we[1]=ue[1]*Math.cos(se)-ue[2]*Math.sin(se),we[2]=ue[1]*Math.sin(se)+ue[2]*Math.cos(se),k[0]=we[0]+re[0],k[1]=we[1]+re[1],k[2]=we[2]+re[2],k},n.rotateY=function(k,G,re,se){var ue=[],we=[];return ue[0]=G[0]-re[0],ue[1]=G[1]-re[1],ue[2]=G[2]-re[2],we[0]=ue[2]*Math.sin(se)+ue[0]*Math.cos(se),we[1]=ue[1],we[2]=ue[2]*Math.cos(se)-ue[0]*Math.sin(se),k[0]=we[0]+re[0],k[1]=we[1]+re[1],k[2]=we[2]+re[2],k},n.rotateZ=function(k,G,re,se){var ue=[],we=[];return ue[0]=G[0]-re[0],ue[1]=G[1]-re[1],ue[2]=G[2]-re[2],we[0]=ue[0]*Math.cos(se)-ue[1]*Math.sin(se),we[1]=ue[0]*Math.sin(se)+ue[1]*Math.cos(se),we[2]=ue[2],k[0]=we[0]+re[0],k[1]=we[1]+re[1],k[2]=we[2]+re[2],k},n.angle=function(k,G){return k=v(k[0],k[1],k[2]),G=v(G[0],G[1],G[2]),I(k,k),I(G,G),G=b(k,G),1<G?0:-1>G?Math.PI:Math.acos(G)},n.zero=function(k){return k[0]=0,k[1]=0,k[2]=0,k},n.str=function(k){return"vec3("+k[0]+", "+k[1]+", "+k[2]+")"},n.exactEquals=function(k,G){return k[0]===G[0]&&k[1]===G[1]&&k[2]===G[2]},n.equals=function(k,G){var re=k[0],se=k[1];k=k[2];var ue=G[0],we=G[1];return G=G[2],Math.abs(re-ue)<=N.EPSILON*Math.max(1,Math.abs(re),Math.abs(ue))&&Math.abs(se-we)<=N.EPSILON*Math.max(1,Math.abs(se),Math.abs(we))&&Math.abs(k-G)<=N.EPSILON*Math.max(1,Math.abs(k),Math.abs(G))},n.forEach=n.sqrLen=n.len=n.sqrDist=n.dist=n.div=n.mul=n.sub=void 0;var N=function(k){if(k&&k.__esModule)return k;var G={};if(k!=null){for(var re in k)if(Object.prototype.hasOwnProperty.call(k,re)){var se=va&&Da?Da(k,re):{};se.get||se.set?va(G,re,se):G[re]=k[re]}}return G.default=k,G}(nh);n.sub=g,n.mul=A,n.div=y,n.dist=T,n.sqrDist=D,n.len=c,n.sqrLen=X,e=function(){var k=o();return function(G,re,se,ue,we,Te){for(re||(re=3),se||(se=0),ue=ue?Math.min(ue*re+se,G.length):G.length;se<ue;se+=re)k[0]=G[se],k[1]=G[se+1],k[2]=G[se+2],we(k,k,Te),G[se]=k[0],G[se+1]=k[1],G[se+2]=k[2];return G}}(),n.forEach=e});m(JI);var QI=M(function(e,n){function o(){var I=new X.ARRAY_TYPE(4);return X.ARRAY_TYPE!=Float32Array&&(I[0]=0,I[1]=0,I[2]=0,I[3]=0),I}function c(I,b,N){return I[0]=b[0]-N[0],I[1]=b[1]-N[1],I[2]=b[2]-N[2],I[3]=b[3]-N[3],I}function v(I,b,N){return I[0]=b[0]*N[0],I[1]=b[1]*N[1],I[2]=b[2]*N[2],I[3]=b[3]*N[3],I}function g(I,b,N){return I[0]=b[0]/N[0],I[1]=b[1]/N[1],I[2]=b[2]/N[2],I[3]=b[3]/N[3],I}function A(I,b){var N=b[0]-I[0],k=b[1]-I[1],G=b[2]-I[2];return I=b[3]-I[3],Math.sqrt(N*N+k*k+G*G+I*I)}function y(I,b){var N=b[0]-I[0],k=b[1]-I[1],G=b[2]-I[2];return I=b[3]-I[3],N*N+k*k+G*G+I*I}function T(I){var b=I[0],N=I[1],k=I[2];return I=I[3],Math.sqrt(b*b+N*N+k*k+I*I)}function D(I){var b=I[0],N=I[1],k=I[2];return I=I[3],b*b+N*N+k*k+I*I}Object.defineProperty(n,"__esModule",{value:!0}),n.create=o,n.clone=function(I){var b=new X.ARRAY_TYPE(4);return b[0]=I[0],b[1]=I[1],b[2]=I[2],b[3]=I[3],b},n.fromValues=function(I,b,N,k){var G=new X.ARRAY_TYPE(4);return G[0]=I,G[1]=b,G[2]=N,G[3]=k,G},n.copy=function(I,b){return I[0]=b[0],I[1]=b[1],I[2]=b[2],I[3]=b[3],I},n.set=function(I,b,N,k,G){return I[0]=b,I[1]=N,I[2]=k,I[3]=G,I},n.add=function(I,b,N){return I[0]=b[0]+N[0],I[1]=b[1]+N[1],I[2]=b[2]+N[2],I[3]=b[3]+N[3],I},n.subtract=c,n.multiply=v,n.divide=g,n.ceil=function(I,b){return I[0]=Math.ceil(b[0]),I[1]=Math.ceil(b[1]),I[2]=Math.ceil(b[2]),I[3]=Math.ceil(b[3]),I},n.floor=function(I,b){return I[0]=Math.floor(b[0]),I[1]=Math.floor(b[1]),I[2]=Math.floor(b[2]),I[3]=Math.floor(b[3]),I},n.min=function(I,b,N){return I[0]=Math.min(b[0],N[0]),I[1]=Math.min(b[1],N[1]),I[2]=Math.min(b[2],N[2]),I[3]=Math.min(b[3],N[3]),I},n.max=function(I,b,N){return I[0]=Math.max(b[0],N[0]),I[1]=Math.max(b[1],N[1]),I[2]=Math.max(b[2],N[2]),I[3]=Math.max(b[3],N[3]),I},n.round=function(I,b){return I[0]=Math.round(b[0]),I[1]=Math.round(b[1]),I[2]=Math.round(b[2]),I[3]=Math.round(b[3]),I},n.scale=function(I,b,N){return I[0]=b[0]*N,I[1]=b[1]*N,I[2]=b[2]*N,I[3]=b[3]*N,I},n.scaleAndAdd=function(I,b,N,k){return I[0]=b[0]+N[0]*k,I[1]=b[1]+N[1]*k,I[2]=b[2]+N[2]*k,I[3]=b[3]+N[3]*k,I},n.distance=A,n.squaredDistance=y,n.length=T,n.squaredLength=D,n.negate=function(I,b){return I[0]=-b[0],I[1]=-b[1],I[2]=-b[2],I[3]=-b[3],I},n.inverse=function(I,b){return I[0]=1/b[0],I[1]=1/b[1],I[2]=1/b[2],I[3]=1/b[3],I},n.normalize=function(I,b){var N=b[0],k=b[1],G=b[2];b=b[3];var re=N*N+k*k+G*G+b*b;return 0<re&&(re=1/Math.sqrt(re)),I[0]=N*re,I[1]=k*re,I[2]=G*re,I[3]=b*re,I},n.dot=function(I,b){return I[0]*b[0]+I[1]*b[1]+I[2]*b[2]+I[3]*b[3]},n.cross=function(I,b,N,k){var G=N[0]*k[1]-N[1]*k[0],re=N[0]*k[2]-N[2]*k[0],se=N[0]*k[3]-N[3]*k[0],ue=N[1]*k[2]-N[2]*k[1],we=N[1]*k[3]-N[3]*k[1];N=N[2]*k[3]-N[3]*k[2],k=b[0];var Te=b[1],je=b[2];return b=b[3],I[0]=Te*N-je*we+b*ue,I[1]=-(k*N)+je*se-b*re,I[2]=k*we-Te*se+b*G,I[3]=-(k*ue)+Te*re-je*G,I},n.lerp=function(I,b,N,k){var G=b[0],re=b[1],se=b[2];return b=b[3],I[0]=G+k*(N[0]-G),I[1]=re+k*(N[1]-re),I[2]=se+k*(N[2]-se),I[3]=b+k*(N[3]-b),I},n.random=function(I,b){b=b||1;do var N=2*X.RANDOM()-1,k=2*X.RANDOM()-1,G=N*N+k*k;while(1<=G);do var re=2*X.RANDOM()-1,se=2*X.RANDOM()-1,ue=re*re+se*se;while(1<=ue);return G=Math.sqrt((1-G)/ue),I[0]=b*N,I[1]=b*k,I[2]=b*re*G,I[3]=b*se*G,I},n.transformMat4=function(I,b,N){var k=b[0],G=b[1],re=b[2];return b=b[3],I[0]=N[0]*k+N[4]*G+N[8]*re+N[12]*b,I[1]=N[1]*k+N[5]*G+N[9]*re+N[13]*b,I[2]=N[2]*k+N[6]*G+N[10]*re+N[14]*b,I[3]=N[3]*k+N[7]*G+N[11]*re+N[15]*b,I},n.transformQuat=function(I,b,N){var k=b[0],G=b[1],re=b[2],se=N[0],ue=N[1],we=N[2];N=N[3];var Te=N*k+ue*re-we*G,je=N*G+we*k-se*re,Ge=N*re+se*G-ue*k;return k=-se*k-ue*G-we*re,I[0]=Te*N+k*-se+je*-we-Ge*-ue,I[1]=je*N+k*-ue+Ge*-se-Te*-we,I[2]=Ge*N+k*-we+Te*-ue-je*-se,I[3]=b[3],I},n.zero=function(I){return I[0]=0,I[1]=0,I[2]=0,I[3]=0,I},n.str=function(I){return"vec4("+I[0]+", "+I[1]+", "+I[2]+", "+I[3]+")"},n.exactEquals=function(I,b){return I[0]===b[0]&&I[1]===b[1]&&I[2]===b[2]&&I[3]===b[3]},n.equals=function(I,b){var N=I[0],k=I[1],G=I[2];I=I[3];var re=b[0],se=b[1],ue=b[2];return b=b[3],Math.abs(N-re)<=X.EPSILON*Math.max(1,Math.abs(N),Math.abs(re))&&Math.abs(k-se)<=X.EPSILON*Math.max(1,Math.abs(k),Math.abs(se))&&Math.abs(G-ue)<=X.EPSILON*Math.max(1,Math.abs(G),Math.abs(ue))&&Math.abs(I-b)<=X.EPSILON*Math.max(1,Math.abs(I),Math.abs(b))},n.forEach=n.sqrLen=n.len=n.sqrDist=n.dist=n.div=n.mul=n.sub=void 0;var X=function(I){if(I&&I.__esModule)return I;var b={};if(I!=null){for(var N in I)if(Object.prototype.hasOwnProperty.call(I,N)){var k=va&&Da?Da(I,N):{};k.get||k.set?va(b,N,k):b[N]=I[N]}}return b.default=I,b}(nh);n.sub=c,n.mul=v,n.div=g,n.dist=A,n.sqrDist=y,n.len=T,n.sqrLen=D,e=function(){var I=o();return function(b,N,k,G,re,se){for(N||(N=4),k||(k=0),G=G?Math.min(G*N+k,b.length):b.length;k<G;k+=N)I[0]=b[k],I[1]=b[k+1],I[2]=b[k+2],I[3]=b[k+3],re(I,I,se),b[k]=I[0],b[k+1]=I[1],b[k+2]=I[2],b[k+3]=I[3];return b}}(),n.forEach=e});m(QI);var $I=M(function(e,n){function o(N){if(N&&N.__esModule)return N;var k={};if(N!=null){for(var G in N)if(Object.prototype.hasOwnProperty.call(N,G)){var re=va&&Da?Da(N,G):{};re.get||re.set?va(k,G,re):k[G]=N[G]}}return k.default=N,k}function c(){var N=new T.ARRAY_TYPE(4);return T.ARRAY_TYPE!=Float32Array&&(N[0]=0,N[1]=0,N[2]=0),N[3]=1,N}function v(N,k,G){G*=.5;var re=Math.sin(G);return N[0]=re*k[0],N[1]=re*k[1],N[2]=re*k[2],N[3]=Math.cos(G),N}function g(N,k,G){var re=k[0],se=k[1],ue=k[2];k=k[3];var we=G[0],Te=G[1],je=G[2];return G=G[3],N[0]=re*G+k*we+se*je-ue*Te,N[1]=se*G+k*Te+ue*we-re*je,N[2]=ue*G+k*je+re*Te-se*we,N[3]=k*G-re*we-se*Te-ue*je,N}function A(N,k,G,re){var se=k[0],ue=k[1],we=k[2];k=k[3];var Te=G[0],je=G[1],Ge=G[2];G=G[3];var He=se*Te+ue*je+we*Ge+k*G;if(0>He&&(He=-He,Te=-Te,je=-je,Ge=-Ge,G=-G),1-He>T.EPSILON){var lt=Math.acos(He),ht=Math.sin(lt);He=Math.sin((1-re)*lt)/ht,re=Math.sin(re*lt)/ht}else He=1-re;return N[0]=He*se+re*Te,N[1]=He*ue+re*je,N[2]=He*we+re*Ge,N[3]=He*k+re*G,N}function y(N,k){var G=k[0]+k[4]+k[8];if(0<G)G=Math.sqrt(G+1),N[3]=.5*G,G=.5/G,N[0]=(k[5]-k[7])*G,N[1]=(k[6]-k[2])*G,N[2]=(k[1]-k[3])*G;else{var re=0;k[4]>k[0]&&(re=1),k[8]>k[3*re+re]&&(re=2);var se=(re+1)%3,ue=(re+2)%3;G=Math.sqrt(k[3*re+re]-k[3*se+se]-k[3*ue+ue]+1),N[re]=.5*G,G=.5/G,N[3]=(k[3*se+ue]-k[3*ue+se])*G,N[se]=(k[3*se+re]+k[3*re+se])*G,N[ue]=(k[3*ue+re]+k[3*re+ue])*G}return N}Object.defineProperty(n,"__esModule",{value:!0}),n.create=c,n.identity=function(N){return N[0]=0,N[1]=0,N[2]=0,N[3]=1,N},n.setAxisAngle=v,n.getAxisAngle=function(N,k){var G=2*Math.acos(k[3]),re=Math.sin(G/2);return re>T.EPSILON?(N[0]=k[0]/re,N[1]=k[1]/re,N[2]=k[2]/re):(N[0]=1,N[1]=0,N[2]=0),G},n.multiply=g,n.rotateX=function(N,k,G){G*=.5;var re=k[0],se=k[1],ue=k[2];k=k[3];var we=Math.sin(G);return G=Math.cos(G),N[0]=re*G+k*we,N[1]=se*G+ue*we,N[2]=ue*G-se*we,N[3]=k*G-re*we,N},n.rotateY=function(N,k,G){G*=.5;var re=k[0],se=k[1],ue=k[2];k=k[3];var we=Math.sin(G);return G=Math.cos(G),N[0]=re*G-ue*we,N[1]=se*G+k*we,N[2]=ue*G+re*we,N[3]=k*G-se*we,N},n.rotateZ=function(N,k,G){G*=.5;var re=k[0],se=k[1],ue=k[2];k=k[3];var we=Math.sin(G);return G=Math.cos(G),N[0]=re*G+se*we,N[1]=se*G-re*we,N[2]=ue*G+k*we,N[3]=k*G-ue*we,N},n.calculateW=function(N,k){var G=k[0],re=k[1];return k=k[2],N[0]=G,N[1]=re,N[2]=k,N[3]=Math.sqrt(Math.abs(1-G*G-re*re-k*k)),N},n.slerp=A,n.random=function(N){var k=T.RANDOM(),G=T.RANDOM(),re=T.RANDOM(),se=Math.sqrt(1-k);return k=Math.sqrt(k),N[0]=se*Math.sin(2*Math.PI*G),N[1]=se*Math.cos(2*Math.PI*G),N[2]=k*Math.sin(2*Math.PI*re),N[3]=k*Math.cos(2*Math.PI*re),N},n.invert=function(N,k){var G=k[0],re=k[1],se=k[2];k=k[3];var ue=G*G+re*re+se*se+k*k;return ue=ue?1/ue:0,N[0]=-G*ue,N[1]=-re*ue,N[2]=-se*ue,N[3]=k*ue,N},n.conjugate=function(N,k){return N[0]=-k[0],N[1]=-k[1],N[2]=-k[2],N[3]=k[3],N},n.fromMat3=y,n.fromEuler=function(N,k,G,re){var se=.5*Math.PI/180;k*=se,G*=se,re*=se,se=Math.sin(k),k=Math.cos(k);var ue=Math.sin(G);G=Math.cos(G);var we=Math.sin(re);return re=Math.cos(re),N[0]=se*G*re-k*ue*we,N[1]=k*ue*re+se*G*we,N[2]=k*G*we-se*ue*re,N[3]=k*G*re+se*ue*we,N},n.str=function(N){return"quat("+N[0]+", "+N[1]+", "+N[2]+", "+N[3]+")"},n.setAxes=n.sqlerp=n.rotationTo=n.equals=n.exactEquals=n.normalize=n.sqrLen=n.squaredLength=n.len=n.length=n.lerp=n.dot=n.scale=n.mul=n.add=n.set=n.copy=n.fromValues=n.clone=void 0;var T=o(nh),D=o(qI),X=o(JI);e=o(QI),n.clone=e.clone,n.fromValues=e.fromValues,n.copy=e.copy,n.set=e.set,n.add=e.add,n.mul=g,n.scale=e.scale,n.dot=e.dot,n.lerp=e.lerp;var I=e.length;n.length=I,n.len=I,I=e.squaredLength,n.squaredLength=I,n.sqrLen=I;var b=e.normalize;n.normalize=b,n.exactEquals=e.exactEquals,n.equals=e.equals,e=function(){var N=X.create(),k=X.fromValues(1,0,0),G=X.fromValues(0,1,0);return function(re,se,ue){var we=X.dot(se,ue);return-.999999>we?(X.cross(N,k,se),1e-6>X.len(N)&&X.cross(N,G,se),X.normalize(N,N),v(re,N,Math.PI),re):.999999<we?(re[0]=0,re[1]=0,re[2]=0,re[3]=1,re):(X.cross(N,se,ue),re[0]=N[0],re[1]=N[1],re[2]=N[2],re[3]=1+we,b(re,re))}}(),n.rotationTo=e,e=function(){var N=c(),k=c();return function(G,re,se,ue,we,Te){return A(N,re,we,Te),A(k,se,ue,Te),A(G,N,k,2*Te*(1-Te)),G}}(),n.sqlerp=e,e=function(){var N=D.create();return function(k,G,re,se){return N[0]=re[0],N[3]=re[1],N[6]=re[2],N[1]=se[0],N[4]=se[1],N[7]=se[2],N[2]=-G[0],N[5]=-G[1],N[8]=-G[2],b(k,y(k,N))}}(),n.setAxes=e});m($I);var Xb=M(function(e,n){function o(I){if(I&&I.__esModule)return I;var b={};if(I!=null){for(var N in I)if(Object.prototype.hasOwnProperty.call(I,N)){var k=va&&Da?Da(I,N):{};k.get||k.set?va(b,N,k):b[N]=I[N]}}return b.default=I,b}function c(I,b,N){var k=.5*N[0],G=.5*N[1];N=.5*N[2];var re=b[0],se=b[1],ue=b[2];return b=b[3],I[0]=re,I[1]=se,I[2]=ue,I[3]=b,I[4]=k*b+G*ue-N*se,I[5]=G*b+N*re-k*ue,I[6]=N*b+k*se-G*re,I[7]=-k*re-G*se-N*ue,I}function v(I,b){return I[0]=b[0],I[1]=b[1],I[2]=b[2],I[3]=b[3],I[4]=b[4],I[5]=b[5],I[6]=b[6],I[7]=b[7],I}function g(I,b,N){var k=b[0],G=b[1],re=b[2],se=b[3],ue=N[4],we=N[5],Te=N[6],je=N[7],Ge=b[4],He=b[5],lt=b[6];b=b[7];var ht=N[0],It=N[1],vt=N[2];return N=N[3],I[0]=k*N+se*ht+G*vt-re*It,I[1]=G*N+se*It+re*ht-k*vt,I[2]=re*N+se*vt+k*It-G*ht,I[3]=se*N-k*ht-G*It-re*vt,I[4]=k*je+se*ue+G*Te-re*we+Ge*N+b*ht+He*vt-lt*It,I[5]=G*je+se*we+re*ue-k*Te+He*N+b*It+lt*ht-Ge*vt,I[6]=re*je+se*Te+k*we-G*ue+lt*N+b*vt+Ge*It-He*ht,I[7]=se*je-k*ue-G*we-re*Te+b*N-Ge*ht-He*It-lt*vt,I}Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){var I=new A.ARRAY_TYPE(8);return A.ARRAY_TYPE!=Float32Array&&(I[0]=0,I[1]=0,I[2]=0,I[4]=0,I[5]=0,I[6]=0,I[7]=0),I[3]=1,I},n.clone=function(I){var b=new A.ARRAY_TYPE(8);return b[0]=I[0],b[1]=I[1],b[2]=I[2],b[3]=I[3],b[4]=I[4],b[5]=I[5],b[6]=I[6],b[7]=I[7],b},n.fromValues=function(I,b,N,k,G,re,se,ue){var we=new A.ARRAY_TYPE(8);return we[0]=I,we[1]=b,we[2]=N,we[3]=k,we[4]=G,we[5]=re,we[6]=se,we[7]=ue,we},n.fromRotationTranslationValues=function(I,b,N,k,G,re,se){var ue=new A.ARRAY_TYPE(8);return ue[0]=I,ue[1]=b,ue[2]=N,ue[3]=k,G*=.5,re*=.5,se*=.5,ue[4]=G*k+re*N-se*b,ue[5]=re*k+se*I-G*N,ue[6]=se*k+G*b-re*I,ue[7]=-G*I-re*b-se*N,ue},n.fromRotationTranslation=c,n.fromTranslation=function(I,b){return I[0]=0,I[1]=0,I[2]=0,I[3]=1,I[4]=.5*b[0],I[5]=.5*b[1],I[6]=.5*b[2],I[7]=0,I},n.fromRotation=function(I,b){return I[0]=b[0],I[1]=b[1],I[2]=b[2],I[3]=b[3],I[4]=0,I[5]=0,I[6]=0,I[7]=0,I},n.fromMat4=function(I,b){var N=y.create();T.getRotation(N,b);var k=new A.ARRAY_TYPE(3);return T.getTranslation(k,b),c(I,N,k),I},n.copy=v,n.identity=function(I){return I[0]=0,I[1]=0,I[2]=0,I[3]=1,I[4]=0,I[5]=0,I[6]=0,I[7]=0,I},n.set=function(I,b,N,k,G,re,se,ue,we){return I[0]=b,I[1]=N,I[2]=k,I[3]=G,I[4]=re,I[5]=se,I[6]=ue,I[7]=we,I},n.getDual=function(I,b){return I[0]=b[4],I[1]=b[5],I[2]=b[6],I[3]=b[7],I},n.setDual=function(I,b){return I[4]=b[0],I[5]=b[1],I[6]=b[2],I[7]=b[3],I},n.getTranslation=function(I,b){var N=b[4],k=b[5],G=b[6],re=b[7],se=-b[0],ue=-b[1],we=-b[2];return b=b[3],I[0]=2*(N*b+re*se+k*we-G*ue),I[1]=2*(k*b+re*ue+G*se-N*we),I[2]=2*(G*b+re*we+N*ue-k*se),I},n.translate=function(I,b,N){var k=b[0],G=b[1],re=b[2],se=b[3],ue=.5*N[0],we=.5*N[1];N=.5*N[2];var Te=b[4],je=b[5],Ge=b[6];return b=b[7],I[0]=k,I[1]=G,I[2]=re,I[3]=se,I[4]=se*ue+G*N-re*we+Te,I[5]=se*we+re*ue-k*N+je,I[6]=se*N+k*we-G*ue+Ge,I[7]=-k*ue-G*we-re*N+b,I},n.rotateX=function(I,b,N){var k=-b[0],G=-b[1],re=-b[2],se=b[3],ue=b[4],we=b[5],Te=b[6],je=b[7],Ge=ue*se+je*k+we*re-Te*G,He=we*se+je*G+Te*k-ue*re,lt=Te*se+je*re+ue*G-we*k;return ue=je*se-ue*k-we*G-Te*re,y.rotateX(I,b,N),k=I[0],G=I[1],re=I[2],se=I[3],I[4]=Ge*se+ue*k+He*re-lt*G,I[5]=He*se+ue*G+lt*k-Ge*re,I[6]=lt*se+ue*re+Ge*G-He*k,I[7]=ue*se-Ge*k-He*G-lt*re,I},n.rotateY=function(I,b,N){var k=-b[0],G=-b[1],re=-b[2],se=b[3],ue=b[4],we=b[5],Te=b[6],je=b[7],Ge=ue*se+je*k+we*re-Te*G,He=we*se+je*G+Te*k-ue*re,lt=Te*se+je*re+ue*G-we*k;return ue=je*se-ue*k-we*G-Te*re,y.rotateY(I,b,N),k=I[0],G=I[1],re=I[2],se=I[3],I[4]=Ge*se+ue*k+He*re-lt*G,I[5]=He*se+ue*G+lt*k-Ge*re,I[6]=lt*se+ue*re+Ge*G-He*k,I[7]=ue*se-Ge*k-He*G-lt*re,I},n.rotateZ=function(I,b,N){var k=-b[0],G=-b[1],re=-b[2],se=b[3],ue=b[4],we=b[5],Te=b[6],je=b[7],Ge=ue*se+je*k+we*re-Te*G,He=we*se+je*G+Te*k-ue*re,lt=Te*se+je*re+ue*G-we*k;return ue=je*se-ue*k-we*G-Te*re,y.rotateZ(I,b,N),k=I[0],G=I[1],re=I[2],se=I[3],I[4]=Ge*se+ue*k+He*re-lt*G,I[5]=He*se+ue*G+lt*k-Ge*re,I[6]=lt*se+ue*re+Ge*G-He*k,I[7]=ue*se-Ge*k-He*G-lt*re,I},n.rotateByQuatAppend=function(I,b,N){var k=N[0],G=N[1],re=N[2];N=N[3];var se=b[0],ue=b[1],we=b[2],Te=b[3];return I[0]=se*N+Te*k+ue*re-we*G,I[1]=ue*N+Te*G+we*k-se*re,I[2]=we*N+Te*re+se*G-ue*k,I[3]=Te*N-se*k-ue*G-we*re,se=b[4],ue=b[5],we=b[6],Te=b[7],I[4]=se*N+Te*k+ue*re-we*G,I[5]=ue*N+Te*G+we*k-se*re,I[6]=we*N+Te*re+se*G-ue*k,I[7]=Te*N-se*k-ue*G-we*re,I},n.rotateByQuatPrepend=function(I,b,N){var k=b[0],G=b[1],re=b[2];b=b[3];var se=N[0],ue=N[1],we=N[2],Te=N[3];return I[0]=k*Te+b*se+G*we-re*ue,I[1]=G*Te+b*ue+re*se-k*we,I[2]=re*Te+b*we+k*ue-G*se,I[3]=b*Te-k*se-G*ue-re*we,se=N[4],ue=N[5],we=N[6],Te=N[7],I[4]=k*Te+b*se+G*we-re*ue,I[5]=G*Te+b*ue+re*se-k*we,I[6]=re*Te+b*we+k*ue-G*se,I[7]=b*Te-k*se-G*ue-re*we,I},n.rotateAroundAxis=function(I,b,N,k){if(Math.abs(k)<A.EPSILON)return v(I,b);var G=Math.sqrt(N[0]*N[0]+N[1]*N[1]+N[2]*N[2]);k*=.5;var re=Math.sin(k),se=re*N[0]/G,ue=re*N[1]/G;N=re*N[2]/G,k=Math.cos(k),G=b[0],re=b[1];var we=b[2],Te=b[3];return I[0]=G*k+Te*se+re*N-we*ue,I[1]=re*k+Te*ue+we*se-G*N,I[2]=we*k+Te*N+G*ue-re*se,I[3]=Te*k-G*se-re*ue-we*N,G=b[4],re=b[5],we=b[6],b=b[7],I[4]=G*k+b*se+re*N-we*ue,I[5]=re*k+b*ue+we*se-G*N,I[6]=we*k+b*N+G*ue-re*se,I[7]=b*k-G*se-re*ue-we*N,I},n.add=function(I,b,N){return I[0]=b[0]+N[0],I[1]=b[1]+N[1],I[2]=b[2]+N[2],I[3]=b[3]+N[3],I[4]=b[4]+N[4],I[5]=b[5]+N[5],I[6]=b[6]+N[6],I[7]=b[7]+N[7],I},n.multiply=g,n.scale=function(I,b,N){return I[0]=b[0]*N,I[1]=b[1]*N,I[2]=b[2]*N,I[3]=b[3]*N,I[4]=b[4]*N,I[5]=b[5]*N,I[6]=b[6]*N,I[7]=b[7]*N,I},n.lerp=function(I,b,N,k){var G=1-k;return 0>D(b,N)&&(k=-k),I[0]=b[0]*G+N[0]*k,I[1]=b[1]*G+N[1]*k,I[2]=b[2]*G+N[2]*k,I[3]=b[3]*G+N[3]*k,I[4]=b[4]*G+N[4]*k,I[5]=b[5]*G+N[5]*k,I[6]=b[6]*G+N[6]*k,I[7]=b[7]*G+N[7]*k,I},n.invert=function(I,b){var N=X(b);return I[0]=-b[0]/N,I[1]=-b[1]/N,I[2]=-b[2]/N,I[3]=b[3]/N,I[4]=-b[4]/N,I[5]=-b[5]/N,I[6]=-b[6]/N,I[7]=b[7]/N,I},n.conjugate=function(I,b){return I[0]=-b[0],I[1]=-b[1],I[2]=-b[2],I[3]=b[3],I[4]=-b[4],I[5]=-b[5],I[6]=-b[6],I[7]=b[7],I},n.normalize=function(I,b){var N=X(b);if(0<N){N=Math.sqrt(N);var k=b[0]/N,G=b[1]/N,re=b[2]/N,se=b[3]/N,ue=b[4],we=b[5],Te=b[6];b=b[7];var je=k*ue+G*we+re*Te+se*b;I[0]=k,I[1]=G,I[2]=re,I[3]=se,I[4]=(ue-k*je)/N,I[5]=(we-G*je)/N,I[6]=(Te-re*je)/N,I[7]=(b-se*je)/N}return I},n.str=function(I){return"quat2("+I[0]+", "+I[1]+", "+I[2]+", "+I[3]+", "+I[4]+", "+I[5]+", "+I[6]+", "+I[7]+")"},n.exactEquals=function(I,b){return I[0]===b[0]&&I[1]===b[1]&&I[2]===b[2]&&I[3]===b[3]&&I[4]===b[4]&&I[5]===b[5]&&I[6]===b[6]&&I[7]===b[7]},n.equals=function(I,b){var N=I[0],k=I[1],G=I[2],re=I[3],se=I[4],ue=I[5],we=I[6];I=I[7];var Te=b[0],je=b[1],Ge=b[2],He=b[3],lt=b[4],ht=b[5],It=b[6];return b=b[7],Math.abs(N-Te)<=A.EPSILON*Math.max(1,Math.abs(N),Math.abs(Te))&&Math.abs(k-je)<=A.EPSILON*Math.max(1,Math.abs(k),Math.abs(je))&&Math.abs(G-Ge)<=A.EPSILON*Math.max(1,Math.abs(G),Math.abs(Ge))&&Math.abs(re-He)<=A.EPSILON*Math.max(1,Math.abs(re),Math.abs(He))&&Math.abs(se-lt)<=A.EPSILON*Math.max(1,Math.abs(se),Math.abs(lt))&&Math.abs(ue-ht)<=A.EPSILON*Math.max(1,Math.abs(ue),Math.abs(ht))&&Math.abs(we-It)<=A.EPSILON*Math.max(1,Math.abs(we),Math.abs(It))&&Math.abs(I-b)<=A.EPSILON*Math.max(1,Math.abs(I),Math.abs(b))},n.sqrLen=n.squaredLength=n.len=n.length=n.dot=n.mul=n.setReal=n.getReal=void 0;var A=o(nh),y=o($I),T=o(KI);n.getReal=y.copy,n.setReal=y.copy,n.mul=g;var D=y.dot;n.dot=D,e=y.length,n.length=e,n.len=e;var X=y.squaredLength;n.squaredLength=X,n.sqrLen=X});m(Xb);var Yb=M(function(e,n){function o(){var I=new X.ARRAY_TYPE(2);return X.ARRAY_TYPE!=Float32Array&&(I[0]=0,I[1]=0),I}function c(I,b,N){return I[0]=b[0]-N[0],I[1]=b[1]-N[1],I}function v(I,b,N){return I[0]=b[0]*N[0],I[1]=b[1]*N[1],I}function g(I,b,N){return I[0]=b[0]/N[0],I[1]=b[1]/N[1],I}function A(I,b){var N=b[0]-I[0];return I=b[1]-I[1],Math.sqrt(N*N+I*I)}function y(I,b){var N=b[0]-I[0];return I=b[1]-I[1],N*N+I*I}function T(I){var b=I[0];return I=I[1],Math.sqrt(b*b+I*I)}function D(I){var b=I[0];return I=I[1],b*b+I*I}Object.defineProperty(n,"__esModule",{value:!0}),n.create=o,n.clone=function(I){var b=new X.ARRAY_TYPE(2);return b[0]=I[0],b[1]=I[1],b},n.fromValues=function(I,b){var N=new X.ARRAY_TYPE(2);return N[0]=I,N[1]=b,N},n.copy=function(I,b){return I[0]=b[0],I[1]=b[1],I},n.set=function(I,b,N){return I[0]=b,I[1]=N,I},n.add=function(I,b,N){return I[0]=b[0]+N[0],I[1]=b[1]+N[1],I},n.subtract=c,n.multiply=v,n.divide=g,n.ceil=function(I,b){return I[0]=Math.ceil(b[0]),I[1]=Math.ceil(b[1]),I},n.floor=function(I,b){return I[0]=Math.floor(b[0]),I[1]=Math.floor(b[1]),I},n.min=function(I,b,N){return I[0]=Math.min(b[0],N[0]),I[1]=Math.min(b[1],N[1]),I},n.max=function(I,b,N){return I[0]=Math.max(b[0],N[0]),I[1]=Math.max(b[1],N[1]),I},n.round=function(I,b){return I[0]=Math.round(b[0]),I[1]=Math.round(b[1]),I},n.scale=function(I,b,N){return I[0]=b[0]*N,I[1]=b[1]*N,I},n.scaleAndAdd=function(I,b,N,k){return I[0]=b[0]+N[0]*k,I[1]=b[1]+N[1]*k,I},n.distance=A,n.squaredDistance=y,n.length=T,n.squaredLength=D,n.negate=function(I,b){return I[0]=-b[0],I[1]=-b[1],I},n.inverse=function(I,b){return I[0]=1/b[0],I[1]=1/b[1],I},n.normalize=function(I,b){var N=b[0],k=b[1];return N=N*N+k*k,0<N&&(N=1/Math.sqrt(N)),I[0]=b[0]*N,I[1]=b[1]*N,I},n.dot=function(I,b){return I[0]*b[0]+I[1]*b[1]},n.cross=function(I,b,N){return b=b[0]*N[1]-b[1]*N[0],I[0]=I[1]=0,I[2]=b,I},n.lerp=function(I,b,N,k){var G=b[0];return b=b[1],I[0]=G+k*(N[0]-G),I[1]=b+k*(N[1]-b),I},n.random=function(I,b){b=b||1;var N=2*X.RANDOM()*Math.PI;return I[0]=Math.cos(N)*b,I[1]=Math.sin(N)*b,I},n.transformMat2=function(I,b,N){var k=b[0];return b=b[1],I[0]=N[0]*k+N[2]*b,I[1]=N[1]*k+N[3]*b,I},n.transformMat2d=function(I,b,N){var k=b[0];return b=b[1],I[0]=N[0]*k+N[2]*b+N[4],I[1]=N[1]*k+N[3]*b+N[5],I},n.transformMat3=function(I,b,N){var k=b[0];return b=b[1],I[0]=N[0]*k+N[3]*b+N[6],I[1]=N[1]*k+N[4]*b+N[7],I},n.transformMat4=function(I,b,N){var k=b[0];return b=b[1],I[0]=N[0]*k+N[4]*b+N[12],I[1]=N[1]*k+N[5]*b+N[13],I},n.rotate=function(I,b,N,k){var G=b[0]-N[0];b=b[1]-N[1];var re=Math.sin(k);return k=Math.cos(k),I[0]=G*k-b*re+N[0],I[1]=G*re+b*k+N[1],I},n.angle=function(I,b){var N=I[0];I=I[1];var k=b[0];b=b[1];var G=N*N+I*I;0<G&&(G=1/Math.sqrt(G));var re=k*k+b*b;return 0<re&&(re=1/Math.sqrt(re)),N=(N*k+I*b)*G*re,1<N?0:-1>N?Math.PI:Math.acos(N)},n.zero=function(I){return I[0]=0,I[1]=0,I},n.str=function(I){return"vec2("+I[0]+", "+I[1]+")"},n.exactEquals=function(I,b){return I[0]===b[0]&&I[1]===b[1]},n.equals=function(I,b){var N=I[0];I=I[1];var k=b[0];return b=b[1],Math.abs(N-k)<=X.EPSILON*Math.max(1,Math.abs(N),Math.abs(k))&&Math.abs(I-b)<=X.EPSILON*Math.max(1,Math.abs(I),Math.abs(b))},n.forEach=n.sqrLen=n.sqrDist=n.dist=n.div=n.mul=n.sub=n.len=void 0;var X=function(I){if(I&&I.__esModule)return I;var b={};if(I!=null){for(var N in I)if(Object.prototype.hasOwnProperty.call(I,N)){var k=va&&Da?Da(I,N):{};k.get||k.set?va(b,N,k):b[N]=I[N]}}return b.default=I,b}(nh);n.len=T,n.sub=c,n.mul=v,n.div=g,n.dist=A,n.sqrDist=y,n.sqrLen=D,e=function(){var I=o();return function(b,N,k,G,re,se){for(N||(N=2),k||(k=0),G=G?Math.min(G*N+k,b.length):b.length;k<G;k+=N)I[0]=b[k],I[1]=b[k+1],re(I,I,se),b[k]=I[0],b[k+1]=I[1];return b}}(),n.forEach=e});m(Yb);var Zb=M(function(e,n){function o(c){if(c&&c.__esModule)return c;var v={};if(c!=null){for(var g in c)if(Object.prototype.hasOwnProperty.call(c,g)){var A=va&&Da?Da(c,g):{};A.get||A.set?va(v,g,A):v[g]=c[g]}}return v.default=c,v}Object.defineProperty(n,"__esModule",{value:!0}),n.vec4=n.vec3=n.vec2=n.quat2=n.quat=n.mat4=n.mat3=n.mat2d=n.mat2=n.glMatrix=void 0,e=o(nh),n.glMatrix=e,e=o(Vb),n.mat2=e,e=o(Wb),n.mat2d=e,e=o(qI),n.mat3=e,e=o(KI),n.mat4=e,e=o($I),n.quat=e,e=o(Xb),n.quat2=e,e=o(Yb),n.vec2=e,e=o(JI),n.vec3=e,e=o(QI),n.vec4=e});m(Zb);var xs=Zb.mat4,lc=function(){function e(n,o,c){Fi(this,e),this.options=o,this.gl=n,c&&(this.map=c.map),c=this.getVertexShader(o.vertexShader);var v=this.getFragmentShader(o.fragmentShader);o=n.createShader(n.VERTEX_SHADER),n.shaderSource(o,c),n.compileShader(o),n.getShaderParameter(o,n.COMPILE_STATUS)?(c=n.createShader(n.FRAGMENT_SHADER),n.shaderSource(c,v),n.compileShader(c),n.getShaderParameter(c,n.COMPILE_STATUS)?(v=n.createProgram(),n.attachShader(v,o),n.attachShader(v,c),n.deleteShader(o),n.deleteShader(c),n.linkProgram(v),n.getProgramParameter(v,n.LINK_STATUS)?o=v:(o="Shader program failed to link.  The error log is:"+n.getProgramInfoLog(v),console.error(o),o=-1)):(o="Fragment shader failed to compile.  The error log is:"+n.getShaderInfoLog(c),console.error(o),o=-1)):(o="Vertex shader failed to compile.  The error log is:"+n.getShaderInfoLog(o),console.error(o),o=-1),o=this.program=o,c={},v=n.getProgramParameter(o,n.ACTIVE_ATTRIBUTES);for(var g=0;g<v;g++){var A=n.getActiveAttrib(o,g);c[A.name]=n.getAttribLocation(o,A.name)}g={},A={};for(var y=n.getProgramParameter(o,n.ACTIVE_UNIFORMS),T=0;T<y;T++){var D=n.getActiveUniform(o,T);g[D.name]=n.getUniformLocation(o,D.name),A[D.name]=D.type}this.parameter=n={attributes:c,numAttributes:v,uniformsType:A,uniforms:g},this.attributes=n.attributes,this.uniforms=n.uniforms,this.parameter=n}return mo(e,[{key:"getVertexShader",value:function(n){var o="";return this.map&&this.map.type==="cesium"&&(o=`#define LOG_DEPTH
`),o+=`#ifdef LOG_DEPTH
uniform float currentFrustumX;varying float v_depthFromNearPlusOne;
#endif
uniform vec2 MAPV_resolution;
#if defined(PICK)
uniform bool uIsPickRender;attribute vec3 aPickColor;uniform vec3 uPickedColor;varying vec4 vPickColor;uniform bool uEnablePicked;bool mapvIsPicked(){return uEnablePicked&&aPickColor==uPickedColor;}
#endif
void afterMain(){
#if defined(LOG_DEPTH)
v_depthFromNearPlusOne=(gl_Position.w-currentFrustumX)+1.0;gl_Position.z=clamp(gl_Position.z/gl_Position.w,-1.0,1.0)*gl_Position.w;
#endif
#if defined(PICK)
vPickColor=vec4(aPickColor,0.0);if(mapvIsPicked()){vPickColor.a=1.0;}
#endif
}`,n=this.getDefines()+o+n,n=n.replace("void main","void originMain"),n+"void main() {originMain(); afterMain();}"}},{key:"getFragmentShader",value:function(n){var o="";return this.map&&this.map.type==="cesium"&&(o=`#define LOG_DEPTH
`),o+=`#if defined(LOG_DEPTH)
#extension GL_EXT_frag_depth : enable
#endif
precision highp float;uniform vec2 MAPV_resolution;uniform bool uIsPickRender;
#if defined(PICK)
varying vec4 vPickColor;bool mapvIsPicked(){return vPickColor.a==1.0;}
#endif
#if defined(LOG_DEPTH)
uniform float oneOverLog2FarDepthFromNearPlusOne;uniform float farDepthFromNearPlusOne;varying float v_depthFromNearPlusOne;void writeLogDepth(float depth){if(depth<=0.9999999||depth>farDepthFromNearPlusOne){discard;}gl_FragDepthEXT=log2(depth)*oneOverLog2FarDepthFromNearPlusOne;}
#endif
void afterMain(){
#if defined(PICK)
if(uIsPickRender){gl_FragColor=vec4(vPickColor.rgb,1.0);return;}
#endif
#if defined(LOG_DEPTH)
writeLogDepth(v_depthFromNearPlusOne);
#endif
}`,n=this.getDefines()+o+n,n=n.replace("void main","void originMain"),n+"void main() {originMain(); afterMain();}"}},{key:"getDefines",value:function(){var n="",o=this.options.defines;if(o)for(var c=0;c<o.length;c++)n+="#define "+o[c]+`
`;return n}},{key:"use",value:function(n,o){this.gl=n,n.useProgram(this.program),this.map&&this.map.type==="cesium"&&this.setUniforms({currentFrustumX:this.map.map.scene.camera.frustum.near,oneOverLog2FarDepthFromNearPlusOne:this.map.map.scene.context.uniformState.oneOverLog2FarDepthFromNearPlusOne,farDepthFromNearPlusOne:this.map.map.scene.context.uniformState.farDepthFromNearPlusOne}),this.uniforms.MAPV_resolution&&this.setUniforms({MAPV_resolution:[n.canvas.width,n.canvas.height]})}},{key:"setUniform",value:function(n,o){var c=this.gl,v=this.uniforms[n];if(v)switch(this.parameter.uniformsType[n]){case c.FLOAT:c.uniform1f(v,o);break;case c.FLOAT_VEC2:c.uniform2f(v,o[0],o[1]);break;case c.FLOAT_VEC3:c.uniform3f(v,o[0],o[1],o[2]);break;case c.FLOAT_VEC4:c.uniform4f(v,o[0],o[1],o[2],o[3]);break;case c.SAMPLER_2D:case c.SAMPLER_CUBE:c.activeTexture(c["TEXTURE"+this.textureIndex]),c.uniform1i(v,this.textureIndex),c.bindTexture(c.TEXTURE_2D,o),this.textureIndex++;break;case c.INT:case c.BOOL:c.uniform1i(v,o);break;case c.INT_VEC2:case c.BOOL_VEC2:c.uniform2i(v,o[0],o[1]);break;case c.INT_VEC3:case c.BOOL_VEC3:c.uniform3i(v,o[0],o[1],o[2]);break;case c.INT_VEC4:case c.BOOL_VEC4:c.uniform4i(v,o[0],o[1],o[2],o[3]);break;case c.FLOAT_MAT2:c.uniformMatrix2fv(v,!1,o);break;case c.FLOAT_MAT3:c.uniformMatrix3fv(v,!1,o);break;case c.FLOAT_MAT4:c.uniformMatrix4fv(v,!1,o);break;default:console.error("Unrecognized uniform type: "+n)}else console.warn("Unrecognized uniform type: "+n)}},{key:"setUniforms",value:function(n){this.textureIndex=0;for(var o in n)this.setUniform(o,n[o])}}]),e}(),pd=function(e,n,o,c){var v=void 0;if(v!==void 0)return!!v;if(e===n)return!0;if((typeof e>"u"?"undefined":Jc(e))!=="object"||!e||(typeof n>"u"?"undefined":Jc(n))!=="object"||!n)return!1;var g=Hi(e),A=Hi(n);if(g.length!==A.length)return!1;A=Object.prototype.hasOwnProperty.bind(n);for(var y=0;y<g.length;y++){if(v=g[y],!A(v))return!1;var T=e[v],D=n[v];if(v=void 0,v===!1||v===void 0&&T!==D)return!1}return!0},JG=function(){function e(n){Fi(this,e),this.options=n,this.gl=n.gl,this.savedState=[],this.currentState=this.getDefaultState()}return mo(e,[{key:"setDefaultState",value:function(){this.setState()}},{key:"getDefaultState",value:function(){var n=this.gl;return{blend:!1,blendEquation:n.FUNC_ADD,blendFunc:[n.ONE,n.ZERO],depthMask:!0,depthTest:!0,depthFunc:n.LEQUAL,polygonOffset:[0,0],cullFace:!1,stencilTest:!1}}},{key:"getRealState",value:function(){var n=this.gl;return{blend:n.getParameter(n.BLEND),blendEquation:n.getParameter(n.BLEND_EQUATION),depthMask:n.getParameter(n.DEPTH_WRITEMASK),depthTest:n.getParameter(n.DEPTH_TEST),depthFunc:n.getParameter(n.DEPTH_FUNC),polygonOffset:[n.getParameter(n.POLYGON_OFFSET_FACTOR),n.getParameter(n.POLYGON_OFFSET_UNITS)],cullFace:n.getParameter(n.CULL_FACE),stencilTest:n.getParameter(n.STENCIL_TEST)}}},{key:"getCurrentState",value:function(){return this.currentState}},{key:"save",value:function(){this.savedState.push(this.getCurrentState())}},{key:"restore",value:function(){var n=this.savedState.pop();this.setState(n,{force:!0})}},{key:"setState",value:function(n){var o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};n=Pe(this.getDefaultState(),n),this.setBlend(n,o),this.setDepth(n,o),this.setCullFace(n,o),this.setPolygonOffset(n,o),this.setStencil(n,o),this.currentState=n}},{key:"setBlend",value:function(n,o){var c=this.gl,v=this.getCurrentState();((o=o.force)||!pd(n.blend,v.blend))&&(n.blend?c.enable(c.BLEND):c.disable(c.BLEND)),!o&&pd(n.blendEquation,v.blendEquation)||c.blendEquation(n.blendEquation),(o||!pd(n.blendFunc,v.blendFunc))&&(n.blendFunc.length===2?c.blendFunc(n.blendFunc[0],n.blendFunc[1]):n.blendFunc.length===4&&c.blendFuncSeparate(n.blendFunc[0],n.blendFunc[1],n.blendFunc[2],n.blendFunc[3]))}},{key:"setDepth",value:function(n,o){var c=this.gl,v=this.getCurrentState();((o=o.force)||!pd(n.depthTest,v.depthTest))&&(n.depthTest?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST)),(o||!pd(n.depthMask,v.depthMask))&&(n.depthMask?c.depthMask(!0):c.depthMask(!1)),!o&&pd(n.depthFunc,v.depthFunc)||c.depthFunc(n.depthFunc)}},{key:"setPolygonOffset",value:function(n,o){var c=this.gl,v=this.getCurrentState();(o.force||!pd(n.polygonOffset,v.polygonOffset))&&(n.polygonOffset[0]!==0&&n.polygonOffset[1]!==0?c.enable(c.POLYGON_OFFSET_FILL):c.disable(c.POLYGON_OFFSET_FILL),c.polygonOffset(n.polygonOffset[0],n.polygonOffset[1]))}},{key:"setCullFace",value:function(n,o){var c=this.gl,v=this.getCurrentState();(o.force||!pd(n.cullFace,v.cullFace))&&(n.cullFace?(c.enable(c.CULL_FACE),c.cullFace(c.BACK)):c.disable(c.CULL_FACE))}},{key:"setStencil",value:function(n,o){var c=this.gl,v=this.getCurrentState();(o.force||!pd(n.stencilTest,v.stencilTest))&&(n.stencilTest?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST))}}]),e}(),eA=function(){function e(n){Fi(this,e),this.options=n,this.gl=n.gl,this.buffer=this.gl.createBuffer(),n.data&&this.updateData(n.data)}return mo(e,[{key:"updateData",value:function(n){var o=this.options,c=this.gl;this.bind(),c.bufferData(c[o.target],n,c[o.usage])}},{key:"bind",value:function(n){n=n||this.gl,n.bindBuffer(n[this.options.target],this.buffer)}},{key:"unBind",value:function(n){n=n||this.gl,n.bindBuffer(n[this.options.target],null)}},{key:"destroy",value:function(){this.buffer=null}}]),e}(),QG={BYTE:1,UNSIGNED_BYTE:1,SHORT:2,UNSIGNED_SHORT:2,FLOAT:4},uM=function(){function e(n){for(Fi(this,e),this.options=n,this.attributes=n.attributes,this.gl=n.gl,this.program=n.program,n=this.stride=0;n<this.attributes.length;n++)this.stride+=QG[this.attributes[n].type]*this.attributes[n].size}return mo(e,[{key:"setVertexAttribPointers",value:function(){for(var n=this.gl,o=this.program,c=0;c<this.attributes.length;c++){var v=this.attributes[c],g=o.attributes[v.name];g!==void 0&&(v.buffer.bind(n),n.vertexAttribPointer(g,v.size,n[v.type],v.normalize||!1,v.stride!==void 0?v.stride:this.stride,v.offset),n.enableVertexAttribArray(g))}}},{key:"bind",value:function(){this.setVertexAttribPointers()}},{key:"destroy",value:function(){}}]),e}(),$s=function e(n,o,c){Fi(this,e),o=o||n.canvas.width,c=c||n.canvas.height;var v=n.createFramebuffer(),g=n.createTexture();n.bindTexture(n.TEXTURE_2D,g),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,o,c,0,n.RGBA,n.UNSIGNED_BYTE,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),v.texture=g;var A=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,A),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,o,c),v.depthBuffer=A,n.bindFramebuffer(n.FRAMEBUFFER,v),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,g,0),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,A),o=n.checkFramebufferStatus(n.FRAMEBUFFER),n.FRAMEBUFFER_COMPLETE===o&&(n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindTexture(n.TEXTURE_2D,null),n.bindRenderbuffer(n.RENDERBUFFER,null),this.framebuffer=v)},gy=function(){function e(n){Fi(this,e),this.options={},Pe(this.options,n),this.vertex=[-1,1,0,-1,-1,0,1,1,0,1,1,0,-1,-1,0,1,-1,0],this.sampleCoord=[0,1,0,0,1,1,1,1,0,0,1,0]}return mo(e,[{key:"getOptions",value:function(){return this.options}},{key:"onResize",value:function(n){}},{key:"render",value:function(n){var o=n.gl;n=n.texture;var c=this.programSample;o.useProgram(c.program);var v=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,v);var g=[-1,-1,0,-1,1,0,1,1,0,1,1,0,-1,-1,0,1,-1,0];o.bufferData(o.ARRAY_BUFFER,new Float32Array(g),o.STATIC_DRAW),o.enableVertexAttribArray(c.attributes.aPos),o.vertexAttribPointer(c.attributes.aPos,3,o.FLOAT,!1,0,0),v=o.createBuffer(),o.bindBuffer(o.ARRAY_BUFFER,v),o.bufferData(o.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,1,1,1,0,0,1,0]),o.STATIC_DRAW),o.enableVertexAttribArray(c.attributes.aTextureCoord),o.vertexAttribPointer(c.attributes.aTextureCoord,2,o.FLOAT,!1,0,0),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,n),o.uniform1i(c.uniforms.uSampler,0),o.drawArrays(o.TRIANGLES,0,g.length/3)}}]),e}();(function(e){function n(o){return Fi(this,n),sa(this,(n.__proto__||Pa(n)).call(this,o))}return Oa(n,e),mo(n,[{key:"getProgram",value:function(o){return this.programSample||(this.programSample=new lc(o,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(void){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision highp float;uniform sampler2D uSampler;uniform vec2 canvasSize;varying vec2 vTextureCoord;vec4 fxaa_2_0(sampler2D tex,vec2 fragCoord,vec2 resolution,vec2 v_rgbNW,vec2 v_rgbNE,vec2 v_rgbSW,vec2 v_rgbSE,vec2 v_rgbM){vec4 color;mediump vec2 inverseVP=vec2(1.0/resolution.x,1.0/resolution.y);vec3 rgbNW=texture2D(tex,v_rgbNW).xyz;vec3 rgbNE=texture2D(tex,v_rgbNE).xyz;vec3 rgbSW=texture2D(tex,v_rgbSW).xyz;vec3 rgbSE=texture2D(tex,v_rgbSE).xyz;vec4 texColor=texture2D(tex,v_rgbM);vec3 rgbM=texColor.xyz;vec3 luma=vec3(0.299,0.587,0.114);float lumaNW=dot(rgbNW,luma);float lumaNE=dot(rgbNE,luma);float lumaSW=dot(rgbSW,luma);float lumaSE=dot(rgbSE,luma);float lumaM=dot(rgbM,luma);float lumaMin=min(lumaM,min(min(lumaNW,lumaNE),min(lumaSW,lumaSE)));float lumaMax=max(lumaM,max(max(lumaNW,lumaNE),max(lumaSW,lumaSE)));mediump vec2 dir;dir.x=-((lumaNW+lumaNE)-(lumaSW+lumaSE));dir.y=((lumaNW+lumaSW)-(lumaNE+lumaSE));float dirReduce=max((lumaNW+lumaNE+lumaSW+lumaSE)*(0.25*1.0/8.0),1.0/128.0);float rcpDirMin=1.0/(min(abs(dir.x),abs(dir.y))+dirReduce);dir=min(vec2(8.0,8.0),max(vec2(-8.0,-8.0),dir*rcpDirMin))*inverseVP;vec3 rgbA=0.5*(texture2D(tex,fragCoord*inverseVP+dir*(1.0/3.0-0.5)).xyz+texture2D(tex,fragCoord*inverseVP+dir*(2.0/3.0-0.5)).xyz);vec3 rgbB=rgbA*0.5+0.25*(texture2D(tex,fragCoord*inverseVP+dir*-0.5).xyz+texture2D(tex,fragCoord*inverseVP+dir*0.5).xyz);float lumaB=dot(rgbB,luma);if((lumaB<lumaMin)||(lumaB>lumaMax)){color=vec4(rgbA,texColor.a);}else{color=vec4(rgbB,texColor.a);}return color;}void texcoords_3_1(vec2 fragCoord,vec2 resolution,out vec2 v_rgbNW,out vec2 v_rgbNE,out vec2 v_rgbSW,out vec2 v_rgbSE,out vec2 v_rgbM){vec2 inverseVP=1.0/resolution.xy;v_rgbNW=(fragCoord+vec2(-1.0,-1.0))*inverseVP;v_rgbNE=(fragCoord+vec2(1.0,-1.0))*inverseVP;v_rgbSW=(fragCoord+vec2(-1.0,1.0))*inverseVP;v_rgbSE=(fragCoord+vec2(1.0,1.0))*inverseVP;v_rgbM=vec2(fragCoord*inverseVP);}vec4 apply_1_2(sampler2D tex,vec2 fragCoord,vec2 resolution){mediump vec2 v_rgbNW;mediump vec2 v_rgbNE;mediump vec2 v_rgbSW;mediump vec2 v_rgbSE;mediump vec2 v_rgbM;texcoords_3_1(fragCoord,resolution,v_rgbNW,v_rgbNE,v_rgbSW,v_rgbSE,v_rgbM);return fxaa_2_0(tex,fragCoord,resolution,v_rgbNW,v_rgbNE,v_rgbSW,v_rgbSE,v_rgbM);}void main(void){vec2 fragCoord=vTextureCoord*canvasSize;gl_FragColor=apply_1_2(uSampler,fragCoord,canvasSize);}"})),this.programSample}},{key:"render",value:function(o){var c=o.gl;o=o.texture,this.getOptions(),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);var v=this.getProgram(c);c.useProgram(v.program);var g=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,g),c.bufferData(c.ARRAY_BUFFER,new Float32Array(this.vertex),c.STATIC_DRAW),c.enableVertexAttribArray(v.attributes.aPos),c.vertexAttribPointer(v.attributes.aPos,3,c.FLOAT,!1,0,0),g=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,g),c.bufferData(c.ARRAY_BUFFER,new Float32Array(this.sampleCoord),c.STATIC_DRAW),c.enableVertexAttribArray(v.attributes.aTextureCoord),c.vertexAttribPointer(v.attributes.aTextureCoord,2,c.FLOAT,!1,0,0),c.activeTexture(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,o),c.uniform1i(v.uniforms.uSampler,1),c.uniform2fv(v.uniforms.canvasSize,[c.canvas.width,c.canvas.height]),c.drawArrays(c.TRIANGLES,0,this.vertex.length/3),c.bindBuffer(c.ARRAY_BUFFER,null),c.useProgram(null)}}]),n})(gy),function(e){function n(o){return Fi(this,n),sa(this,(n.__proto__||Pa(n)).call(this,o))}return Oa(n,e),mo(n,[{key:"getProgram",value:function(o){if(this.program1||(this.program1=new lc(o,{vertexShader:"attribute vec3 position;attribute vec2 uv;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];void SMAAEdgeDetectionVS(vec2 texcoord){vOffset[0]=texcoord.xyxy+resolution.xyxy*vec4(-1.0,0.0,0.0,1.0);vOffset[1]=texcoord.xyxy+resolution.xyxy*vec4(1.0,0.0,0.0,-1.0);vOffset[2]=texcoord.xyxy+resolution.xyxy*vec4(-2.0,0.0,0.0,2.0);}void main(){vUv=uv;SMAAEdgeDetectionVS(vUv);gl_Position=vec4(position,1.0);}",fragmentShader:`precision highp float;
#define SMAA_THRESHOLD 0.1
uniform sampler2D tDiffuse;varying vec2 vUv;varying vec4 vOffset[3];vec4 SMAAColorEdgeDetectionPS(vec2 texcoord,vec4 offset[3],sampler2D colorTex){vec2 threshold=vec2(SMAA_THRESHOLD,SMAA_THRESHOLD);vec4 delta;vec3 C=texture2D(colorTex,texcoord).rgb;vec3 Cleft=texture2D(colorTex,offset[0].xy).rgb;vec3 t=abs(C-Cleft);delta.x=max(max(t.r,t.g),t.b);vec3 Ctop=texture2D(colorTex,offset[0].zw).rgb;t=abs(C-Ctop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0,1.0))==0.0)discard;vec3 Cright=texture2D(colorTex,offset[1].xy).rgb;t=abs(C-Cright);delta.z=max(max(t.r,t.g),t.b);vec3 Cbottom=texture2D(colorTex,offset[1].zw).rgb;t=abs(C-Cbottom);delta.w=max(max(t.r,t.g),t.b);float maxDelta=max(max(max(delta.x,delta.y),delta.z),delta.w);vec3 Cleftleft=texture2D(colorTex,offset[2].xy).rgb;t=abs(C-Cleftleft);delta.z=max(max(t.r,t.g),t.b);vec3 Ctoptop=texture2D(colorTex,offset[2].zw).rgb;t=abs(C-Ctoptop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(max(maxDelta,delta.z),delta.w);edges.xy*=step(0.5*maxDelta,delta.xy);return vec4(edges,0.0,0.0);}void main(){gl_FragColor=SMAAColorEdgeDetectionPS(vUv,vOffset,tDiffuse);}`})),this.program2||(this.program2=new lc(o,{vertexShader:`precision highp float;
#define SMAA_MAX_SEARCH_STEPS 8
#define SMAA_AREATEX_MAX_DISTANCE 16
#define SMAA_AREATEX_PIXEL_SIZE ( 1.0 / vec2( 160.0, 560.0 ) )
#define SMAA_AREATEX_SUBTEX_SIZE ( 1.0 / 7.0 )
attribute vec3 position;attribute vec2 uv;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixcoord;void SMAABlendingWeightCalculationVS(vec2 texcoord){vPixcoord=texcoord/resolution;vOffset[0]=texcoord.xyxy+resolution.xyxy*vec4(-0.25,0.125,1.25,0.125);vOffset[1]=texcoord.xyxy+resolution.xyxy*vec4(-0.125,0.25,-0.125,-1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*resolution.xxyy*float(SMAA_MAX_SEARCH_STEPS);}void main(){vUv=uv;SMAABlendingWeightCalculationVS(vUv);gl_Position=vec4(position,1.0);}`,fragmentShader:`precision highp float;
#define SMAA_MAX_SEARCH_STEPS 8
#define SMAA_AREATEX_MAX_DISTANCE 16
#define SMAA_AREATEX_PIXEL_SIZE ( 1.0 / vec2( 160.0, 560.0 ) )
#define SMAA_AREATEX_SUBTEX_SIZE ( 1.0 / 7.0 )
#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * resolution, 0.0 )
uniform sampler2D tDiffuse;uniform sampler2D tArea;uniform sampler2D tSearch;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixcoord;vec2 round(vec2 x){return sign(x)*floor(abs(x)+0.5);}float SMAASearchLength(sampler2D searchTex,vec2 e,float bias,float scale){e.r=bias+e.r*scale;return 255.0*texture2D(searchTex,e,0.0).r;}float SMAASearchXLeft(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){/***@PSEUDO_GATHER4*This texcoord has been offset by(-0.25,-0.125)in the vertex shader to*sample between edge,thus fetching four edges in a row.*Sampling with different offsets in each direction allows to disambiguate*which edges are active from the four fetched ones.*/vec2 e=vec2(0.0,1.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord-=vec2(2.0,0.0)*resolution;if(!(texcoord.x>end&&e.g>0.8281&&e.r==0.0))break;}texcoord.x+=0.25*resolution.x;texcoord.x+=resolution.x;texcoord.x+=2.0*resolution.x;texcoord.x-=resolution.x*SMAASearchLength(searchTex,e,0.0,0.5);return texcoord.x;}float SMAASearchXRight(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord+=vec2(2.0,0.0)*resolution;if(!(texcoord.x<end&&e.g>0.8281&&e.r==0.0))break;}texcoord.x-=0.25*resolution.x;texcoord.x-=resolution.x;texcoord.x-=2.0*resolution.x;texcoord.x+=resolution.x*SMAASearchLength(searchTex,e,0.5,0.5);return texcoord.x;}float SMAASearchYUp(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord+=vec2(0.0,2.0)*resolution;if(!(texcoord.y>end&&e.r>0.8281&&e.g==0.0))break;}texcoord.y-=0.25*resolution.y;texcoord.y-=resolution.y;texcoord.y-=2.0*resolution.y;texcoord.y+=resolution.y*SMAASearchLength(searchTex,e.gr,0.0,0.5);return texcoord.y;}float SMAASearchYDown(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord-=vec2(0.0,2.0)*resolution;if(!(texcoord.y<end&&e.r>0.8281&&e.g==0.0))break;}texcoord.y+=0.25*resolution.y;texcoord.y+=resolution.y;texcoord.y+=2.0*resolution.y;texcoord.y-=resolution.y*SMAASearchLength(searchTex,e.gr,0.5,0.5);return texcoord.y;}vec2 SMAAArea(sampler2D areaTex,vec2 dist,float e1,float e2,float offset){vec2 texcoord=float(SMAA_AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texcoord=SMAA_AREATEX_PIXEL_SIZE*texcoord+(0.5*SMAA_AREATEX_PIXEL_SIZE);texcoord.y+=SMAA_AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTex,texcoord,0.0).rg;}vec4 SMAABlendingWeightCalculationPS(vec2 texcoord,vec2 pixcoord,vec4 offset[3],sampler2D edgesTex,sampler2D areaTex,sampler2D searchTex,ivec4 subsampleIndices){vec4 weights=vec4(0.0,0.0,0.0,0.0);vec2 e=texture2D(edgesTex,texcoord).rg;if(e.g>0.0){vec2 d;vec2 coords;coords.x=SMAASearchXLeft(edgesTex,searchTex,offset[0].xy,offset[2].x);coords.y=offset[1].y;d.x=coords.x;float e1=texture2D(edgesTex,coords,0.0).r;coords.x=SMAASearchXRight(edgesTex,searchTex,offset[0].zw,offset[2].y);d.y=coords.x;d=d/resolution.x-pixcoord.x;vec2 sqrt_d=sqrt(abs(d));coords.y-=1.0*resolution.y;float e2=SMAASampleLevelZeroOffset(edgesTex,coords,ivec2(1,0)).r;weights.rg=SMAAArea(areaTex,sqrt_d,e1,e2,float(subsampleIndices.y));}if(e.r>0.0){vec2 d;vec2 coords;coords.y=SMAASearchYUp(edgesTex,searchTex,offset[1].xy,offset[2].z);coords.x=offset[0].x;d.x=coords.y;float e1=texture2D(edgesTex,coords,0.0).g;coords.y=SMAASearchYDown(edgesTex,searchTex,offset[1].zw,offset[2].w);d.y=coords.y;d=d/resolution.y-pixcoord.y;vec2 sqrt_d=sqrt(abs(d));coords.y-=1.0*resolution.y;float e2=SMAASampleLevelZeroOffset(edgesTex,coords,ivec2(0,1)).g;weights.ba=SMAAArea(areaTex,sqrt_d,e1,e2,float(subsampleIndices.x));}return weights;}void main(){gl_FragColor=SMAABlendingWeightCalculationPS(vUv,vPixcoord,vOffset,tDiffuse,tArea,tSearch,ivec4(0.0));}`})),this.program3||(this.program3=new lc(o,{vertexShader:"precision highp float;uniform vec2 resolution;attribute vec3 position;attribute vec2 uv;varying vec2 vUv;varying vec4 vOffset[2];void SMAANeighborhoodBlendingVS(vec2 texcoord){vOffset[0]=texcoord.xyxy+resolution.xyxy*vec4(-1.0,0.0,0.0,1.0);vOffset[1]=texcoord.xyxy+resolution.xyxy*vec4(1.0,0.0,0.0,-1.0);}void main(){vUv=uv;SMAANeighborhoodBlendingVS(vUv);gl_Position=vec4(position,1.0);}",fragmentShader:"precision highp float;uniform sampler2D tDiffuse;uniform sampler2D tColor;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[2];vec4 SMAANeighborhoodBlendingPS(vec2 texcoord,vec4 offset[2],sampler2D colorTex,sampler2D blendTex){vec4 a;a.xz=texture2D(blendTex,texcoord).xz;a.y=texture2D(blendTex,offset[1].zw).g;a.w=texture2D(blendTex,offset[1].xy).a;if(dot(a,vec4(1.0,1.0,1.0,1.0))<1e-5){return texture2D(colorTex,texcoord,0.0);}else{vec2 offset;offset.x=a.a>a.b ? a.a :-a.b;offset.y=a.g>a.r ?-a.g : a.r;if(abs(offset.x)>abs(offset.y)){offset.y=0.0;}else{offset.x=0.0;}vec4 C=texture2D(colorTex,texcoord,0.0);texcoord+=sign(offset)*resolution;vec4 Cop=texture2D(colorTex,texcoord,0.0);float s=abs(offset.x)>abs(offset.y)? abs(offset.x): abs(offset.y);C.xyz=pow(C.xyz,vec3(2.2));Cop.xyz=pow(Cop.xyz,vec3(2.2));vec4 mixed=mix(C,Cop,s);mixed.xyz=pow(mixed.xyz,vec3(1.0/2.2));return mixed;}}void main(){gl_FragColor=SMAANeighborhoodBlendingPS(vUv,vOffset,tColor,tDiffuse);}"})),!this.vertexBuffer||!this.sampleBuffer){this.vertexBuffer=new eA({gl:o,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.sampleBuffer=new eA({gl:o,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.vertexBuffer.updateData(new Float32Array(this.vertex)),this.sampleBuffer.updateData(new Float32Array(this.sampleCoord));var c=[{stride:12,name:"position",buffer:this.vertexBuffer,size:3,type:"FLOAT",offset:0},{stride:8,name:"uv",buffer:this.sampleBuffer,size:2,type:"FLOAT",offset:0}];this.vertexArray1=new uM({gl:o,program:this.program1,attributes:c}),this.vertexArray2=new uM({gl:o,program:this.program2,attributes:c}),this.vertexArray3=new uM({gl:o,program:this.program3,attributes:c})}return{program1:this.program1,program2:this.program2,program3:this.program3}}},{key:"onResize",value:function(o){this.collectBrightBuffer=new $s(o),this.bloomBuffer=new $s(o)}},{key:"getExtraFbo",value:function(o){return this.collectBrightBuffer||(this.collectBrightBuffer=new $s(o)),this.bloomBuffer||(this.bloomBuffer=new $s(o)),{collectBrightBuffer:this.collectBrightBuffer.framebuffer,bloomBuffer:this.bloomBuffer.framebuffer}}},{key:"render",value:function(o){var c=o.gl,v=o.texture;o=o.fbo,this.getOptions(),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);var g=this.getProgram(c),A=g.program1,y=g.program2;g=g.program3;var T=this.getExtraFbo(c),D=T.collectBrightBuffer;T=T.bloomBuffer;var X=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,X),c.bufferData(c.ARRAY_BUFFER,new Float32Array(this.vertex),c.STATIC_DRAW),c.enableVertexAttribArray(A.attributes.position),c.vertexAttribPointer(A.attributes.position,3,c.FLOAT,!1,0,0),c.enableVertexAttribArray(y.attributes.position),c.vertexAttribPointer(y.attributes.position,3,c.FLOAT,!1,0,0),c.enableVertexAttribArray(g.attributes.position),c.vertexAttribPointer(g.attributes.position,3,c.FLOAT,!1,0,0),X=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,X),c.bufferData(c.ARRAY_BUFFER,new Float32Array(this.sampleCoord),c.STATIC_DRAW),c.enableVertexAttribArray(A.attributes.uv),c.vertexAttribPointer(A.attributes.uv,2,c.FLOAT,!1,0,0),c.enableVertexAttribArray(y.attributes.uv),c.vertexAttribPointer(y.attributes.uv,2,c.FLOAT,!1,0,0),c.enableVertexAttribArray(g.attributes.uv),c.vertexAttribPointer(g.attributes.uv,2,c.FLOAT,!1,0,0),c.useProgram(A.program),c.bindFramebuffer(c.FRAMEBUFFER,D),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT),c.activeTexture(c.TEXTURE2),c.bindTexture(c.TEXTURE_2D,v),c.uniform1i(A.uniforms.tDiffuse,2),c.uniform2fv(A.uniforms.resolution,[c.canvas.width,c.canvas.height]),c.drawArrays(c.TRIANGLES,0,this.vertex.length/3),c.useProgram(y.program),c.bindFramebuffer(c.FRAMEBUFFER,T),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT),c.activeTexture(c.TEXTURE2),c.bindTexture(c.TEXTURE_2D,D.texture),c.uniform1i(y.uniforms.uSampler,2),c.uniform2fv(y.uniforms.resolution,[c.canvas.width,c.canvas.height]),c.drawArrays(c.TRIANGLES,0,this.vertex.length/3),c.useProgram(g.program),c.bindFramebuffer(c.FRAMEBUFFER,o),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT),c.activeTexture(c.TEXTURE2),c.bindTexture(c.TEXTURE_2D,v),c.uniform1i(g.uniforms.tDiffuse,2),c.activeTexture(c.TEXTURE3),c.bindTexture(c.TEXTURE_2D,T.texture),c.uniform1i(g.uniforms.tColor,3),c.uniform2fv(g.uniforms.resolution,[c.canvas.width,c.canvas.height]),c.drawArrays(c.TRIANGLES,0,this.vertex.length/3),c.bindBuffer(c.ARRAY_BUFFER,null),c.useProgram(null)}},{key:"getAreaTexture",value:function(){return"data:image/png;base64,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"}},{key:"getSearchTexture",value:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAIAAADiVupLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFZJREFUeNrs00EKgAAIRNEZ739mTQoiwmhRi4L/FiKiu9ERISkzbXdTVV3H4WhfOG6ehl1rNR7qDSF8hwkVcJXt+3A//I0Nv0GoCBUAAAAAAMA/LAIMAB+Dcg2OE2zsAAAAAElFTkSuQmCC"}}]),n}(gy),function(e){function n(o){return Fi(this,n),sa(this,(n.__proto__||Pa(n)).call(this,o))}return Oa(n,e),mo(n,[{key:"getProgram",value:function(o){return this.programSample||(this.programSample=new lc(o,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;varying vec2 vTextureCoord;void main(){float fStep=1.0/512.0;vec4 sample11=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample12=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t+1.0*fStep));vec4 sample13=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample21=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t));vec4 sample22=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t));vec4 sample23=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t));vec4 sample31=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 sample32=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t-1.0*fStep));vec4 sample33=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 blurSample=(sample11+sample12+sample13+sample21+2.0*sample22+sample23+sample31+sample32+sample33)/10.0;gl_FragColor=blurSample;}"}),this.vertexBuffer=new eA({gl:o,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.sampleBuffer=new eA({gl:o,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.vertexBuffer.updateData(new Float32Array(this.vertex)),this.sampleBuffer.updateData(new Float32Array(this.sampleCoord)),this.vertexArray=new uM({gl:o,program:this.programSample,attributes:[{stride:12,name:"aPos",buffer:this.vertexBuffer,size:3,type:"FLOAT",offset:0},{stride:8,name:"aTextureCoord",buffer:this.sampleBuffer,size:2,type:"FLOAT",offset:0}]})),this.programSample}},{key:"render",value:function(o){var c=o.gl;o=o.texture,c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);var v=this.getProgram(c);v.use(c),this.vertexArray.bind(),c.activeTexture(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,o),c.uniform1i(v.uniforms.uSampler,1),c.drawArrays(c.TRIANGLES,0,this.vertex.length/3)}}]),n}(gy),function(e){function n(o){return Fi(this,n),sa(this,(n.__proto__||Pa(n)).call(this,o))}return Oa(n,e),mo(n,[{key:"getProgram",value:function(o){return this.programBright||(this.programBright=new lc(o,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform float threshold;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(uSampler,vTextureCoord);vec4 lightColor=max(vec4(0.0),(color-(1.0-threshold)/5.0));float brightness=dot(color.rgb,vec3(0.2126,0.7152,0.0722));if(brightness>threshold){color=lightColor;}else{color=vec4(0.0);}gl_FragColor=color;}"})),this.programBloom||(this.programBloom=new lc(o,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform bool isVertical;uniform vec2 canvasSize;uniform float blurSize;uniform float devicePixelRatio;varying vec2 vTextureCoord;void main(){float weight[10];weight[0]=0.2270270270;weight[1]=0.1945945946;weight[2]=0.1216216216;weight[3]=0.1135135135;weight[4]=0.0972972973;weight[5]=0.0608108108;weight[6]=0.0540540541;weight[7]=0.0270270270;weight[8]=0.0162162162;weight[9]=0.0081081081;vec2 offset=vec2(blurSize/canvasSize.x,blurSize/canvasSize.y)*devicePixelRatio;vec4 result=texture2D(uSampler,vTextureCoord)*weight[0];if(isVertical){for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(0.0,offset.y*float(i)))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(0.0,offset.y*float(i)))*weight[i];}}else{for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(offset.x*float(i),0.0))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(offset.x*float(i),0.0))*weight[i];}}gl_FragColor=result;}"})),this.programResult||(this.programResult=new lc(o,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D originalTexture;uniform sampler2D bloomTexture;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(originalTexture,vTextureCoord);vec4 bloomColor=texture2D(bloomTexture,vTextureCoord);color+=bloomColor;gl_FragColor=color;}"})),{programBright:this.programBright,programBloom:this.programBloom,programResult:this.programResult}}},{key:"onResize",value:function(o){this.collectBrightBuffer=new $s(o),this.bloomBuffer=new $s(o)}},{key:"getExtraFbo",value:function(o){return this.collectBrightBuffer||(this.collectBrightBuffer=new $s(o)),this.bloomBuffer||(this.bloomBuffer=new $s(o)),{collectBrightBuffer:this.collectBrightBuffer.framebuffer,bloomBuffer:this.bloomBuffer.framebuffer}}},{key:"render",value:function(o){var c=o.gl,v=o.texture;o=o.fbo;var g=this.getOptions();c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);var A=this.getProgram(c),y=A.programBright,T=A.programBloom;A=A.programResult;var D=this.getExtraFbo(c),X=D.collectBrightBuffer;D=D.bloomBuffer;var I=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,I),c.bufferData(c.ARRAY_BUFFER,new Float32Array(this.vertex),c.STATIC_DRAW),c.enableVertexAttribArray(y.attributes.aPos),c.vertexAttribPointer(y.attributes.aPos,3,c.FLOAT,!1,0,0),c.enableVertexAttribArray(T.attributes.aPos),c.vertexAttribPointer(T.attributes.aPos,3,c.FLOAT,!1,0,0),c.enableVertexAttribArray(A.attributes.aPos),c.vertexAttribPointer(A.attributes.aPos,3,c.FLOAT,!1,0,0),I=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,I),c.bufferData(c.ARRAY_BUFFER,new Float32Array(this.sampleCoord),c.STATIC_DRAW),c.enableVertexAttribArray(y.attributes.aTextureCoord),c.vertexAttribPointer(y.attributes.aTextureCoord,2,c.FLOAT,!1,0,0),c.enableVertexAttribArray(T.attributes.aTextureCoord),c.vertexAttribPointer(T.attributes.aTextureCoord,2,c.FLOAT,!1,0,0),c.enableVertexAttribArray(A.attributes.aTextureCoord),c.vertexAttribPointer(A.attributes.aTextureCoord,2,c.FLOAT,!1,0,0),c.useProgram(y.program),c.bindFramebuffer(c.FRAMEBUFFER,X),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT),c.activeTexture(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,v),c.uniform1i(y.uniforms.uSampler,1),c.uniform1f(y.uniforms.threshold,g.threshold||0),c.drawArrays(c.TRIANGLES,0,this.vertex.length/3),c.useProgram(T.program),c.bindFramebuffer(c.FRAMEBUFFER,D),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT),c.activeTexture(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,X.texture),c.uniform1i(T.uniforms.uSampler,1),c.uniform1i(T.uniforms.isVertical,!0),c.uniform1f(T.uniforms.blurSize,g.blurSize||2),c.uniform1f(T.uniforms.devicePixelRatio,window.devicePixelRatio),c.uniform2fv(T.uniforms.canvasSize,[c.canvas.width,c.canvas.height]),c.drawArrays(c.TRIANGLES,0,this.vertex.length/3),c.useProgram(T.program),c.bindFramebuffer(c.FRAMEBUFFER,X),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT),c.activeTexture(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,D.texture),c.uniform1i(T.uniforms.uSampler,1),c.uniform1i(T.uniforms.isVertical,!1),c.uniform1f(T.uniforms.blurSize,g.blurSize||2),c.uniform1f(T.uniforms.devicePixelRatio,window.devicePixelRatio),c.uniform2fv(T.uniforms.canvasSize,[c.canvas.width,c.canvas.height]),c.drawArrays(c.TRIANGLES,0,this.vertex.length/3),c.useProgram(A.program),c.bindFramebuffer(c.FRAMEBUFFER,o),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT),c.activeTexture(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,v),c.uniform1i(A.uniforms.originalTexture,1),c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,X.texture),c.uniform1i(A.uniforms.bloomTexture,0),c.drawArrays(c.TRIANGLES,0,this.vertex.length/3),c.bindBuffer(c.ARRAY_BUFFER,null),c.useProgram(null)}}]),n}(gy),function(e){function n(o){return Fi(this,n),sa(this,(n.__proto__||Pa(n)).call(this,o))}return Oa(n,e),mo(n,[{key:"getProgram",value:function(o){return this.programBright||(this.programBright=new lc(o,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform float threshold;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(uSampler,vTextureCoord);vec4 lightColor=max(vec4(0.0),(color-threshold));gl_FragColor=lightColor;}"})),this.programBloom||(this.programBloom=new lc(o,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform bool isVertical;uniform vec2 canvasSize;uniform float blurSize;uniform float devicePixelRatio;varying vec2 vTextureCoord;void main(){float weight[10];weight[0]=0.2270270270;weight[1]=0.1945945946;weight[2]=0.1216216216;weight[3]=0.1135135135;weight[4]=0.0972972973;weight[5]=0.0608108108;weight[6]=0.0540540541;weight[7]=0.0270270270;weight[8]=0.0162162162;weight[9]=0.0081081081;vec2 offset=vec2(blurSize/canvasSize.x,blurSize/canvasSize.y)*devicePixelRatio;vec4 result=texture2D(uSampler,vTextureCoord)*weight[0];if(isVertical){for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(0.0,offset.y*float(i)))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(0.0,offset.y*float(i)))*weight[i];}}else{for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(offset.x*float(i),0.0))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(offset.x*float(i),0.0))*weight[i];}}gl_FragColor=result;}"})),this.programResult||(this.programResult=new lc(o,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D originalTexture;uniform sampler2D bloomTexture;uniform float toneScale;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(originalTexture,vTextureCoord)*toneScale;vec4 bloomColor=texture2D(bloomTexture,vTextureCoord);color+=bloomColor;gl_FragColor=color;}"})),{programBright:this.programBright,programBloom:this.programBloom,programResult:this.programResult}}},{key:"onResize",value:function(o){this.collectBrightBuffer=new $s(o),this.bloomBuffer=new $s(o)}},{key:"getExtraFbo",value:function(o){return this.collectBrightBuffer||(this.collectBrightBuffer=new $s(o)),this.bloomBuffer||(this.bloomBuffer=new $s(o)),{collectBrightBuffer:this.collectBrightBuffer.framebuffer,bloomBuffer:this.bloomBuffer.framebuffer}}},{key:"render",value:function(o){var c=o.gl,v=o.texture;o=o.fbo;var g=this.getOptions(),A="clarity"in g?g.clarity:1;A=Math.max(0,A),A=Math.min(1,A),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);var y=this.getProgram(c),T=y.programBright,D=y.programBloom;y=y.programResult;var X=this.getExtraFbo(c),I=X.collectBrightBuffer;X=X.bloomBuffer;var b=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,b),c.bufferData(c.ARRAY_BUFFER,new Float32Array(this.vertex),c.STATIC_DRAW),c.enableVertexAttribArray(T.attributes.aPos),c.vertexAttribPointer(T.attributes.aPos,3,c.FLOAT,!1,0,0),c.enableVertexAttribArray(D.attributes.aPos),c.vertexAttribPointer(D.attributes.aPos,3,c.FLOAT,!1,0,0),c.enableVertexAttribArray(y.attributes.aPos),c.vertexAttribPointer(y.attributes.aPos,3,c.FLOAT,!1,0,0),b=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,b),c.bufferData(c.ARRAY_BUFFER,new Float32Array(this.sampleCoord),c.STATIC_DRAW),c.enableVertexAttribArray(T.attributes.aTextureCoord),c.vertexAttribPointer(T.attributes.aTextureCoord,2,c.FLOAT,!1,0,0),c.enableVertexAttribArray(D.attributes.aTextureCoord),c.vertexAttribPointer(D.attributes.aTextureCoord,2,c.FLOAT,!1,0,0),c.enableVertexAttribArray(y.attributes.aTextureCoord),c.vertexAttribPointer(y.attributes.aTextureCoord,2,c.FLOAT,!1,0,0),c.useProgram(T.program),c.bindFramebuffer(c.FRAMEBUFFER,I),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT),c.activeTexture(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,v),c.uniform1i(T.uniforms.uSampler,1),c.uniform1f(T.uniforms.threshold,g.threshold||0),c.drawArrays(c.TRIANGLES,0,this.vertex.length/3),c.useProgram(D.program),c.bindFramebuffer(c.FRAMEBUFFER,X),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT),c.activeTexture(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,I.texture),c.uniform1i(D.uniforms.uSampler,1),c.uniform1i(D.uniforms.isVertical,!0),c.uniform1f(D.uniforms.blurSize,g.blurSize||2),c.uniform1f(D.uniforms.devicePixelRatio,window.devicePixelRatio),c.uniform2fv(D.uniforms.canvasSize,[c.canvas.width,c.canvas.height]),c.drawArrays(c.TRIANGLES,0,this.vertex.length/3),c.useProgram(D.program),c.bindFramebuffer(c.FRAMEBUFFER,I),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT),c.activeTexture(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,X.texture),c.uniform1i(D.uniforms.uSampler,1),c.uniform1i(D.uniforms.isVertical,!1),c.uniform1f(D.uniforms.blurSize,g.blurSize||2),c.uniform1f(D.uniforms.devicePixelRatio,window.devicePixelRatio),c.uniform2fv(D.uniforms.canvasSize,[c.canvas.width,c.canvas.height]),c.drawArrays(c.TRIANGLES,0,this.vertex.length/3),c.useProgram(y.program),c.bindFramebuffer(c.FRAMEBUFFER,o),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT),c.activeTexture(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,v),c.uniform1i(y.uniforms.originalTexture,1),c.uniform1f(y.uniforms.toneScale,A),c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,I.texture),c.uniform1i(y.uniforms.bloomTexture,0),c.drawArrays(c.TRIANGLES,0,this.vertex.length/3),c.bindBuffer(c.ARRAY_BUFFER,null),c.useProgram(null)}}]),n}(gy),function(e){function n(o){return Fi(this,n),sa(this,(n.__proto__||Pa(n)).call(this,o))}return Oa(n,e),mo(n,[{key:"getProgram",value:function(o){return this.programSample||(this.programSample=new lc(o,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform vec2 canvasSize;varying vec2 vTextureCoord;void main(){float fStep=1.0/312.0;vec4 sample11=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample12=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t+1.0*fStep));vec4 sample13=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample21=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t));vec4 sample22=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t));vec4 sample23=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t));vec4 sample31=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 sample32=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t-1.0*fStep));vec4 sample33=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 blurSample=(sample11+sample12+sample13+sample21+2.0*sample22+sample23+sample31+sample32+sample33)/10.0;float desX=abs((gl_FragCoord.x-canvasSize.x/2.0)/(canvasSize.x/2.0));float desY=abs((gl_FragCoord.y-canvasSize.y/2.0)/(canvasSize.y/2.0));float factor=max(desX,desY);gl_FragColor=(sample22*(1.0-factor)+blurSample*factor);}"})),this.programSample}},{key:"render",value:function(o){var c=o.gl;o=o.texture;var v=this.getProgram(c);c.useProgram(v.program);var g=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,g),c.bufferData(c.ARRAY_BUFFER,new Float32Array(this.vertex),c.STATIC_DRAW),c.enableVertexAttribArray(v.attributes.aPos),c.vertexAttribPointer(v.attributes.aPos,3,c.FLOAT,!1,0,0),g=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,g),c.bufferData(c.ARRAY_BUFFER,new Float32Array(this.sampleCoord),c.STATIC_DRAW),c.enableVertexAttribArray(v.attributes.aTextureCoord),c.vertexAttribPointer(v.attributes.aTextureCoord,2,c.FLOAT,!1,0,0),c.activeTexture(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,o),c.uniform1i(v.uniforms.uSampler,1),c.uniform2fv(v.uniforms.canvasSize,[c.canvas.width,c.canvas.height]),c.drawArrays(c.TRIANGLES,0,this.vertex.length/3)}}]),n}(gy);var $G=function(){function e(n){Fi(this,e),this.gl=n,this.effects=[],this.initFbo()}return mo(e,[{key:"addEffect",value:function(n){this.effects.push(n)}},{key:"removeEffect",value:function(n){}},{key:"setEffects",value:function(n){this.effects=n}},{key:"onResize",value:function(){this.initFbo();var n=this.gl,o=this.effects;if(o&&1<o.length)for(var c=1;c<o.length;c++){var v=o[c];v.onResize&&v.onResize(n)}}},{key:"initFbo",value:function(){var n=this.gl;n&&(this.fbo=[new $s(n),new $s(n)])}},{key:"destroy",value:function(){this.effects=[],this.fbo=[],this.gl=null}},{key:"render",value:function(){var n=this.gl,o=this.effects;if(o&&0<o.length)for(var c={},v=0;v<o.length;v++){var g=this.fbo[v%2].framebuffer;v===o.length-1&&(g=null),n.bindFramebuffer(n.FRAMEBUFFER,g);var A=[0,0,0,0];n.clearColor(A[0],A[1],A[2],A[3]),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),o[v].render({isPickRender:!1,gl:n,texture:c.texture,fbo:g}),c=g}}}]),e}(),tA=function(){function e(n,o){Fi(this,e),this.map=n,this.options=o||{},this.eventMap={}}return mo(e,[{key:"onResize",value:function(n){}},{key:"onUpdate",value:function(n){throw"未实现onUpdate方法"}},{key:"getContainer",value:function(){throw"未实现getContainer方法"}},{key:"getSize",value:function(){throw"未实现getSize方法"}},{key:"getTilt",value:function(){throw"未实现getTilt方法"}},{key:"getHeading",value:function(){throw"未实现getHeading方法"}},{key:"getZoomUnits",value:function(){throw"未实现getZoomUnits方法"}},{key:"getCenter",value:function(){throw"未实现getCenter方法"}},{key:"getMapType",value:function(){throw"未实现getMapType方法"}},{key:"lnglatToMercator",value:function(n,o){return this.options.coordinateSystem==="gcj02"?(o=o*Math.PI/180,o=31890685e-1*Math.log((1+Math.sin(o))/(1-Math.sin(o))),[parseFloat((n*Math.PI/180*6378137).toFixed(2)),parseFloat(o.toFixed(2))]):(n=qh.convertLL2MC({lng:n,lat:o}),[n.lng,n.lat])}}]),e}(),eV=function(e){function n(o){Fi(this,n);var c=sa(this,(n.__proto__||Pa(n)).call(this,o));return o._printLog&&o._printLog("mapvgl"),c.eventMap={},c}return Oa(n,e),mo(n,[{key:"onResize",value:function(o){this.map.addEventListener("resize",o),this.eventMap.resize=o}},{key:"onMousemove",value:function(o){o=this.extendCallback(o),this.map.addEventListener("mousemove",o),this.eventMap.mousemove=o}},{key:"onClick",value:function(o){o=this.extendCallback(o),this.map.addEventListener("click",o),this.eventMap.click=o}},{key:"onDblClick",value:function(o){o=this.extendCallback(o),this.map.addEventListener("dblclick",o),this.eventMap.dblclick=o}},{key:"onRightClick",value:function(o){o=this.extendCallback(o),this.map.addEventListener("rightclick",o),this.eventMap.rightclick=o}},{key:"onUpdate",value:function(o){this.map.addEventListener("update",o),this.map.addEventListener("onearthstatuschange",o),this.eventMap.update=o,this.eventMap.onearthstatuschange=o}},{key:"extendCallback",value:function(o){return function(c){o(Pe(c,{x:c.x,y:c.y}))}}},{key:"unbind",value:function(o){var c=this;this.eventMap[o]?(this.map.removeEventListener(o,this.eventMap[o]),delete this.eventMap[o]):(Hi(this.eventMap).forEach(function(v){c.map.removeEventListener(v,c.eventMap[v])}),this.eventMap={})}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getSize",value:function(){return this.map.getSize()}},{key:"getBounds",value:function(){return this.map.getBounds()}},{key:"getTilt",value:function(){return this.map.getTilt()}},{key:"getHeading",value:function(){return this.map.getHeading()}},{key:"getZoomUnits",value:function(){return this.map.getZoomUnits()}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"getCenter",value:function(){var o=this.map.getCenter();return-180<=o.lng&&180>=o.lng&&(o=this.map.lnglatToMercator(o.lng,o.lat),o={lng:o[0],lat:o[1]}),o}},{key:"getMapType",value:function(){return this.map.getMapType()}},{key:"lnglatToMercator",value:function(o,c){return this.map.lnglatToMercator(o,c)}},{key:"mercatorToLnglat",value:function(o,c){return this.map.mercatorToLnglat(o,c)}},{key:"pixelToPointIn",value:function(o){return o=this.map.pixelToPointIn(o),this.mercatorToLnglat(o.lng,o.lat)}}]),n}(tA),tV=function(e){function n(o){return Fi(this,n),o=sa(this,(n.__proto__||Pa(n)).call(this,o)),o.div=document.createElement("div"),o.div.style.position="absolute",o.div.style.userSelect="none",o.map.getPanes().mapPane.appendChild(o.div),o.eventMap={},o}return Oa(n,e),mo(n,[{key:"onResize",value:function(o){this.map.addEventListener("resize",o),this.eventMap.resize=o}},{key:"onMousemove",value:function(o){o=this.extendCallback(o),this.map.addEventListener("mousemove",o),this.eventMap.mousemove=o}},{key:"onClick",value:function(o){o=this.extendCallback(o),WG?(this.map.addEventListener("touchend",o),this.eventMap.touchend=o):(this.map.addEventListener("click",o),this.eventMap.click=o)}},{key:"onDblClick",value:function(o){o=this.extendCallback(o),this.map.addEventListener("dblclick",o),this.eventMap.dblclick=o}},{key:"onRightClick",value:function(o){o=this.extendCallback(o),this.map.addEventListener("rightclick",o),this.eventMap.rightclick=o}},{key:"changeCanvas",value:function(){var o=this.map,c=o.getSize(),v=o.getCenter();o=o.pointToOverlayPixel(v),this.div.style.left=o.x-c.width/2+"px",this.div.style.top=o.y-c.height/2+"px"}},{key:"onUpdate",value:function(o){var c=this,v=function(){c.changeCanvas(),o()};this.map.addEventListener("moveend",v),this.map.addEventListener("moving",v),this.map.addEventListener("zoomend",v),this.eventMap.moveend=v,this.eventMap.moving=v,this.eventMap.zoomend=v}},{key:"extendCallback",value:function(o){return function(c){o(Pe(c,{x:c.pixel.x,y:c.pixel.y}))}}},{key:"unbind",value:function(){var o=this;Hi(this.eventMap).forEach(function(c){o.map.removeEventListener(c,o.eventMap[c])}),this.eventMap={}}},{key:"getContainer",value:function(){return this.div}},{key:"getSize",value:function(){return this.map.getSize()}},{key:"getBounds",value:function(){return this.map.getBounds()}},{key:"getTilt",value:function(){return 0}},{key:"getHeading",value:function(){return 0}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"getZoomUnits",value:function(){var o=this.getZoom();return this.map.getMapType().getZoomUnits?this.map.getMapType().getZoomUnits(o):Math.pow(2,18-o)}},{key:"getCenter",value:function(){var o=this.map.getMapType().getProjection().lngLatToPoint(this.map.getCenter());return{lng:o.x,lat:o.y}}},{key:"lnglatToMercator",value:function(o,c){return o=this.map.getMapType().getProjection().lngLatToPoint({lng:o,lat:c}),[o.x,o.y]}},{key:"mercatorToLnglat",value:function(o,c){return o=this.map.getMapType().getProjection().pointToLngLat({lng:o,lat:c}),[o.lng,o.lat]}}]),n}(tA),rV=function(e){function n(o){return Fi(this,n),o=sa(this,(n.__proto__||Pa(n)).call(this,o)),o.eventMap={},o}return Oa(n,e),mo(n,[{key:"onResize",value:function(o){window.addEventListener("resize",o),this.eventMap.resize=o}},{key:"onUpdate",value:function(o){}},{key:"unbind",value:function(){var o=this;Hi(this.eventMap).forEach(function(c){window.removeEventListener(c,o.eventMap[c])}),this.eventMap={}}},{key:"getContainer",value:function(){return this.map.container.getElementsByClassName("cesium-widget")[0]}},{key:"getSize",value:function(){var o=this.map;return{width:o.canvas.clientWidth,height:o.canvas.clientHeight}}},{key:"getTilt",value:function(){return 180*this.map.camera.pitch/Math.PI+90}},{key:"getHeading",value:function(){return 360-180*this.map.camera.heading/Math.PI}},{key:"getZoomUnits",value:function(){var o=this.map;return 6.8*o.scene.globe.ellipsoid.cartesianToCartographic(o.camera.position).height/6500}},{key:"getZoom",value:function(){return 10}},{key:"getCenter",value:function(){var o=this.map;return o=o.camera.pickEllipsoid(new Cesium.Cartesian2(o.canvas.clientWidth/2,o.canvas.clientHeight/2)),o=Cesium.Ellipsoid.WGS84.cartesianToCartographic(o),o=this.getMercator([180*o.longitude/Math.PI,180*o.latitude/Math.PI]),{lng:o[0],lat:o[1]}}},{key:"getMercator",value:function(o){var c=[];return c[0]=o[0]*Math.PI/180*6378137,o=o[1]*Math.PI/180,c[1]=31890685e-1*Math.log((1+Math.sin(o))/(1-Math.sin(o))),c}}]),n}(tA),nV=function(e){function n(o){return Fi(this,n),o=sa(this,(n.__proto__||Pa(n)).call(this,o)),o.eventMap={},o}return Oa(n,e),mo(n,[{key:"onResize",value:function(o){window.addEventListener("resize",o),this.eventMap.resize=o}},{key:"onUpdate",value:function(o){}},{key:"unbind",value:function(){var o=this;Hi(this.eventMap).forEach(function(c){window.removeEventListener(c,o.eventMap[c])}),this.eventMap={}}},{key:"getContainer",value:function(){return this.map.container}},{key:"getSize",value:function(){return{width:this.map.container.clientWidth,height:this.map.container.clientHeight}}},{key:"getTilt",value:function(){return this.map.tilt}},{key:"getHeading",value:function(){return this.map.heading}},{key:"getZoomUnits",value:function(){return this.map.zoomUnits}},{key:"getZoom",value:function(){return this.map.zoom}},{key:"getCenter",value:function(){return this.map.center}}]),n}(tA),iV=function(e){function n(o,c){return Fi(this,n),o=sa(this,(n.__proto__||Pa(n)).call(this,o,c)),o.eventMap={},o}return Oa(n,e),mo(n,[{key:"onResize",value:function(o){window.addEventListener("resize",o),this.eventMap.resize=o}},{key:"onUpdate",value:function(o){}},{key:"unbind",value:function(){var o=this;Hi(this.eventMap).forEach(function(c){window.removeEventListener(c,o.eventMap[c])}),this.eventMap={}}},{key:"getContainer",value:function(){return this.map.container}},{key:"getSize",value:function(){return{width:this.map.container.clientWidth,height:this.map.container.clientHeight}}},{key:"getTilt",value:function(){return this.map.tilt}},{key:"getHeading",value:function(){return this.map.heading}},{key:"getZoomUnits",value:function(){return this.map.zoomUnits}},{key:"getCenter",value:function(){return this.map.center}}]),n}(tA),oV=function(){function e(n,o){var c=this;Fi(this,e),o=o||{},o.mapType==="bmap"?this.map=new tV(n,o):o.mapType==="blank"?this.map=new nV(n,o):o.mapType==="cesium"?this.map=new rV(n,o):o.mapType==="three"?this.map=new iV(n,o):(o.mapType="bmapgl",this.map=new eV(n,o)),this.map.type=o.mapType,this._dpr=window.devicePixelRatio,o.mapType==="bmapgl"&&(this._dpr=this.map.map.config.ratio),this.options=o||{},this.renderArr=[],(n=o.canvas)||(n=document.createElement("canvas")),this.canvas=n,this.gl=o.gl?o.gl:Tp(n,o),["OES_texture_float","OES_element_index_uint","WEBGL_color_buffer_float","EXT_float_blend"].forEach(function(v){c.gl.getExtension(v)}),this.changeSize(),this.projectionMatrix=xs.create(Float64Array),this.orthoMatrix=xs.create(Float64Array),this.matrix=xs.create(Float64Array),this.viewMatrix=xs.create(Float64Array),this.pointToPixelMatrix=xs.create(Float64Array),this.pixelToViewMatrix=xs.create(Float64Array),this.fovy=35,this.fps=Math.min(o.fps,60)||60,this.renderTime=new Date().valueOf(),this._animation=this.animation.bind(this),this._update=this.update.bind(this),this.onInitialize(this.options.onInitialize),this.options.onRender&&this.renderArr.push(this.options.onRender),this.stateManager=new JG({gl:this.gl}),this.pickFBO=new $s(this.gl),this.transferOptions={},this.bind()}return mo(e,[{key:"bind",value:function(){var n=this,o=this.map;o.onResize(function(){n.changeSize(),n.render()}),o.onUpdate(this._update),o.onClick&&o.onClick(function(c){n.onClick&&n.onClick(c)}),o.onDblClick&&o.onDblClick(function(c){n.onDblClick&&n.onDblClick(c)}),o.onRightClick&&o.onRightClick(function(c){n.onRightClick&&n.onRightClick(c)}),o.onMousemove&&o.onMousemove(function(c){n.onMousemove&&n.onMousemove(c)}),this.options.canvas||o.getContainer().appendChild(this.canvas)}},{key:"unbind",value:function(){var n=this.map;n.unbind&&n.unbind()}},{key:"setOptions",value:function(n){this.options=n}},{key:"onInitialize",value:function(n){n&&(this.transferOptions=n.bind(this)(this.gl)||{})}},{key:"bindFramebuffer",value:function(n){var o=this.gl;n?o.bindFramebuffer(o.FRAMEBUFFER,n.framebuffer):o.bindFramebuffer(o.FRAMEBUFFER,null)}},{key:"saveFramebuffer",value:function(){var n=this.gl;this.preFramebuffer=n.getParameter(n.FRAMEBUFFER_BINDING)}},{key:"restoreFramebuffer",value:function(){var n=this.gl;n.bindFramebuffer(n.FRAMEBUFFER,this.preFramebuffer)}},{key:"onRender",value:function(n){this.renderArr.push(n)}},{key:"changeSize",value:function(){var n=this.canvas,o=this.options;if(n){var c=n.style,v=this.map.getSize(),g=this._dpr;n.width=v.width*g,n.height=v.height*g,c.cssText="position: absolute;left:0;top:0;width:"+v.width+"px;height:"+v.height+"px;z-index:2;",o.mapType!=="cesium"||o.canvas||(c.pointerEvents="none"),this.gl.viewport(0,0,n.width,n.height),this.pickFBO=new $s(this.gl)}}},{key:"update",value:function(){this.options.autoUpdate===!1||this.isAnimation&&60<=this.fps||this.render()}},{key:"pixelToPointIn",value:function(n){return this.map.pixelToPointIn(n)}},{key:"render",value:function(){if(this.map&&this.gl){var n=this.options,o=this.projectionMatrix,c=this.viewMatrix;if(n.mapType==="three")c=this.map.map.camera,o=c.projectionMatrix.elements,c=c.matrixWorldInverse.elements;else if(n.mapType==="cesium"){c=this.map.map;var v=c.camera.frustum.projectionMatrix;o=new Float32Array([v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15]]),v=c.camera.viewMatrix,c=new Float32Array([v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15]])}else this.map.map.mapType==="B_EARTH_MAP"?(o=this.map.map.getEarth().scene._camera.getProjectionMatrix(),c=this.map.map.getEarth().scene._camera.getModelViewMatrix()):(this.updateProjectionMatrix(),this.updateModelViewMatrix());for(v=xs.multiply(this.matrix,o,c),Pe(this.transferOptions,{gl:this.gl,matrix:v,pointToPixelMatrix:this.pointToPixelMatrix,pixelToViewMatrix:this.pixelToViewMatrix,projectionMatrix:o,orthoMatrix:this.orthoMatrix,viewMatrix:c,stateManager:this.stateManager}),n.mapType!=="three"&&n.mapType!=="cesium"&&n.autoUpdate!==!1&&this.clear(),n=0;n<this.renderArr.length;n++)this.renderArr[n]&&this.renderArr[n].bind(this)(this.transferOptions)}}},{key:"clear",value:function(n){var o=this.gl,c=this.options.clearColor||[0,0,0,0];o.clearColor(c[0],c[1],c[2],c[3]),n&&(n instanceof Array||(n=kn(n).unitArray()),o.clearColor(n[0],n[1],n[2],n[3])),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT)}},{key:"updateProjectionMatrix",value:function(){var n=this.options.cameraNear||1,o=this.options.cameraFar||4e3;xs.perspective(this.projectionMatrix,this.fovy*Math.PI/180,this.gl.canvas.width/this.gl.canvas.height,n,o);var c=this.map.getSize();xs.ortho(this.orthoMatrix,-c.width/2,c.width/2,-c.height/2,c.height/2,n,o)}},{key:"updateModelViewMatrix",value:function(){var n=this.map,o=this.viewMatrix,c=this.pointToPixelMatrix,v=this.pixelToViewMatrix;xs.identity(o),xs.identity(c),xs.identity(v);var g=n.getSize();xs.translate(v,v,[0,0,Math.round(-g.height/(2*Math.tan(this.fovy*Math.PI/180/2)))]),xs.rotate(v,v,n.getTilt()*Math.PI/180,[-1,0,0]),xs.rotate(v,v,n.getHeading()*Math.PI/180,[0,0,-1]),g=n.getCenter();var A=this.options.pointOffset||[0,0];n=n.getZoomUnits(),xs.translate(c,c,[(A[0]-g.lng)/n,(A[1]-g.lat)/n,0]),n=1/n,xs.scale(c,c,[n,n,n]),xs.multiply(o,v,c)}},{key:"destroy",value:function(){this.stopAnimation(),this.unbind();var n=this.gl.getExtension("WEBGL_lose_context");n&&n.loseContext(),this.canvas.remove(),this.gl=this.canvas=null}},{key:"animation",value:function(){if(this.isAnimation){if(60<=this.fps)this.render();else{var n=new Date().valueOf(),o=Math.floor(1e3/this.fps),c=n-this.renderTime;c>o&&(this.render(),this.renderTime=n-c%o)}window.requestAnimationFrame(this._animation)}}},{key:"startAnimation",value:function(){this.isAnimation||(this.isAnimation=!0,window.requestAnimationFrame(this._animation))}},{key:"stopAnimation",value:function(){this.isAnimation=!1}}]),e}(),aV=function(){function e(n){Fi(this,e),this.layers=[],this.options=n,this.webglLayer=n.webglLayer}return mo(e,[{key:"addLayer",value:function(n){for(var o=!1,c=0;c<this.layers.length;c++)if(this.layers[c]===n){o=!0;break}o||(n.map=this.webglLayer.map,n.layerType==="threeLayer"?(n.setWebglLayer(this.webglLayer),o=n.getThreeLayer(),this.addLayer(o),n.initialize&&n.initialize(o)):(n.setWebglLayer(this.webglLayer),n.commonInitialize&&n.commonInitialize(this.webglLayer.gl),n.initialize&&n.initialize(this.webglLayer.gl),n.onOptionsChanged(n.getOptions(),{}),n.onDataChanged(n.getData()),n.onChanged(n.getOptions(),n.getData())),this.putInLayer(n)),this.options.autoUpdate&&(this.isRequestAnimation()?this.webglLayer.startAnimation():this.webglLayer.stopAnimation()),this.webglLayer.render()}},{key:"putInLayer",value:function(n){n.options.renderOrder===void 0&&(n.options.renderOrder=this.layers.length),this.layers.push(n),this.layers=this.layers.sort(function(o,c){return o.options.renderOrder-c.options.renderOrder})}},{key:"removeLayer",value:function(n){for(var o=0;o<this.layers.length;o++)this.layers[o]===n&&this.layers.splice(o,1);this.options.autoUpdate&&(this.isRequestAnimation()?this.webglLayer.startAnimation():this.webglLayer.stopAnimation()),this.webglLayer.render()}},{key:"showLayer",value:function(n){for(var o=0;o<this.layers.length;o++)this.layers[o]===n&&n.show();this.options.autoUpdate&&(this.isRequestAnimation()?this.webglLayer.startAnimation():this.webglLayer.stopAnimation()),this.webglLayer.render()}},{key:"hideLayer",value:function(n){for(var o=0;o<this.layers.length;o++)this.layers[o]===n&&n.hide();this.options.autoUpdate&&(this.isRequestAnimation()?this.webglLayer.startAnimation():this.webglLayer.stopAnimation()),this.webglLayer.render()}},{key:"removeAllLayers",value:function(){this.layers=[],this.webglLayer.stopAnimation(),this.webglLayer.render()}},{key:"destroyAllLayers",value:function(){for(var n=0;n<this.layers.length;n++){var o=this.layers[n];o.destroy&&o.destroy()}}},{key:"getAllLayers",value:function(){return this.layers}},{key:"getAllThreeLayers",value:function(){for(var n=[],o=0;o<this.layers.length;o++){var c=this.layers[o];c.layerType==="ThreeLayer"&&n.push(c)}return n}},{key:"isRequestAnimation",value:function(){for(var n=!1,o=0;o<this.layers.length;o++)if(this.layers[o].isRequestAnimation()){n=!0;break}return n}},{key:"beforeRender",value:function(n){n.gl&&this.webglLayer.stateManager.setDefaultState()}},{key:"afterRender",value:function(n){(n=n.gl)&&(n.bindBuffer(n.ARRAY_BUFFER,null),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null),n.useProgram(null))}},{key:"renderGLLayers",value:function(n){this.webglLayer.stateManager.save();for(var o=0;o<this.layers.length;o++){var c=this.layers[o];if(c._visible===!0&&c.layerType!=="threeLayer"&&c.layerType!=="ThreeLayer"){var v=c.map.getZoom(),g=c.getOptions().zoomThreshold;g&&(v<g[0]||v>=g[1])||(this.beforeRender(n),c.render(n),this.afterRender(n))}}this.webglLayer.stateManager.restore()}},{key:"renderThreeLayer",value:function(n){this.webglLayer.stateManager.save(),this.webglLayer.stateManager.setState({blendFunc:[n.gl.SRC_ALPHA,n.gl.ONE],depthMask:!1,depthTest:!0,depthFunc:n.gl.LESS,cullFace:!1});for(var o=0;o<this.layers.length;o++){var c=this.layers[o];if(c._visible===!0&&c.layerType==="ThreeLayer"){var v=c.map.getZoom(),g=c.getOptions().zoomThreshold;g&&(v<g[0]||v>=g[1])||c.render(n)}}this.webglLayer.stateManager.restore()}},{key:"renderThreeLayers",value:function(n){this.webglLayer.stateManager.save(),this.webglLayer.stateManager.setState({blendFunc:[n.gl.SRC_ALPHA,n.gl.ONE],depthMask:!1,depthTest:!0,depthFunc:n.gl.LESS,cullFace:!1});for(var o=0;o<this.layers.length;o++){var c=this.layers[o];if(c._visible===!0&&c.layerType==="threeLayer"){var v=c.map.getZoom(),g=c.getOptions().zoomThreshold;g&&(v<g[0]||v>=g[1])||c.render(n)}}this.webglLayer.stateManager.restore()}},{key:"onClick",value:function(n){for(var o=this.layers.length-1;0<=o;o--){var c=this.layers[o];if(c._visible===!0&&c.layerType!=="threeLayer"&&c.layerType!=="ThreeLayer"){var v=c.map.getZoom(),g=c.getOptions().zoomThreshold;if((!g||!(v<=g[0]||v>=g[1]))&&c.options.enablePicked&&c.options.onClick&&c.pick&&(v=c.pick(n.x,n.y,"onClick"),c.options.onClick(v,n),c.options.autoSelect&&this.webglLayer.render(),n.cancelBubble===!0))break}}}},{key:"onDblClick",value:function(n){for(var o=this.layers.length-1;0<=o;o--){var c=this.layers[o];if(c._visible===!0&&c.layerType!=="threeLayer"&&c.layerType!=="ThreeLayer"){var v=c.map.getZoom(),g=c.getOptions().zoomThreshold;if((!g||!(v<=g[0]||v>=g[1]))&&c.options.enablePicked&&c.options.onDblClick&&c.pick&&(v=c.pick(n.x,n.y,"onDblClick"),c.options.onDblClick(v,n),c.options.autoSelect&&this.webglLayer.render(),n.cancelBubble===!0))break}}}},{key:"onRightClick",value:function(n){for(var o=this.layers.length-1;0<=o;o--){var c=this.layers[o];if(c._visible===!0&&c.layerType!=="threeLayer"&&c.layerType!=="ThreeLayer"){var v=c.map.getZoom(),g=c.getOptions().zoomThreshold;if((!g||!(v<=g[0]||v>=g[1]))&&c.options.enablePicked&&c.options.onRightClick&&c.pick&&(v=c.pick(n.x,n.y,"onRightClick"),c.options.onRightClick(v,n),c.options.autoSelect&&this.webglLayer.render(),n.cancelBubble===!0))break}}}},{key:"onMousemove",value:function(n){for(var o=!1,c=!1,v=this.layers.length-1;0<=v;v--){var g=this.layers[v];if(g._visible===!0&&g.layerType!=="threeLayer"&&g.layerType!=="ThreeLayer"){var A=g.map.getZoom(),y=g.getOptions().zoomThreshold;if((!y||!(A<=y[0]||A>=y[1]))&&g.options.enablePicked&&g.pick&&(g.options.onMousemove||g.options.autoSelect)&&(A=g.pick(n.x,n.y,"onMousemove"),!c&&(this.webglLayer.map.map.platform.style.cursor="default",c=A.dataIndex!==-1)&&(this.webglLayer.map.map.platform.style.cursor="pointer"),g.options.onMousemove&&g.options.onMousemove(A,n),g.options.autoSelect&&(o=!0),n.cancelBubble===!0))break}}o&&(this.webglLayer.isAnimation||this.webglLayer.render())}},{key:"destroy",value:function(){this.destroyAllLayers(),this.removeAllLayers()}}]),e}();(function(){function e(n){var o=this;Fi(this,e),this.options={autoUpdate:!0},this._visible=!0,Pe(this.options,n);var c=n.pointOffset;this.webglLayer=n.webglLayer||new oV(n.map,this.options),this.layerManager=new aV({autoUpdate:this.options.autoUpdate,webglLayer:this.webglLayer}),this.effectManager=new $G(this.webglLayer.gl),this.webglRender={render:function(){}},this.options.effects&&this.effectManager.setEffects([this.webglRender].concat(this.options.effects)),this.webglLayer.onRender(function(v){o._render(v)}),this.webglLayer.onClick=function(v){o._visible&&o.layerManager.onClick(v)},this.webglLayer.onDblClick=function(v){o._visible&&o.layerManager.onDblClick(v)},this.webglLayer.onRightClick=function(v){o._visible&&o.layerManager.onRightClick(v)},this.webglLayer.onMousemove=function(v){o._visible&&o.layerManager.onMousemove(v)},c||this.webglLayer.options.mapType==="cesium"||(c=this.webglLayer.map.getCenter(),this.webglLayer.options.pointOffset=[c.lng,c.lat]),this.webglLayer.map.onResize(function(){o.effectManager.onResize()}),(this.postProcessing=n.postProcessing)&&(this.postProcessing.setWebglLayer(this.webglLayer),n=this.postProcessing.getThreeLayer(),this.addLayer(n),this.postProcessing.initialize(n),n.postProcessing=this.postProcessing)}return mo(e,[{key:"renderCanvas",value:function(n){var o=this;this.postProcessing?this.postProcessing.addRender(function(){o.layerManager.renderGLLayers(n)}):this.layerManager.renderGLLayers(n),this.layerManager.renderThreeLayers(n),this.layerManager.renderThreeLayer(n)}},{key:"render",value:function(){this.webglLayer&&this.webglLayer.render()}},{key:"_render",value:function(n){var o=this;if(this._visible){var c=this.options.effects;c&&0<c.length?(this.webglRender.render=function(){o.renderCanvas(n)},this.effectManager.render()):(this.webglLayer.saveFramebuffer(),this.renderCanvas(n),this.webglLayer.restoreFramebuffer())}}},{key:"onRender",value:function(n){this.webglLayer.onRender(n)}},{key:"destroy",value:function(){this.stopAnimation(),this.layerManager.destroy(),this.effectManager.destroy(),this.webglLayer.destroy()}},{key:"isRequestAnimation",value:function(){return this.layerManager.isRequestAnimation()}},{key:"startAnimation",value:function(){this.webglLayer.startAnimation()}},{key:"stopAnimation",value:function(){this.webglLayer.stopAnimation()}},{key:"show",value:function(){this._visible!==!0&&(this._visible=!0,this.webglLayer.render(),this.isRequestAnimation()&&this.startAnimation())}},{key:"hide",value:function(){this._visible!==!1&&(this._visible=!1,this.stopAnimation(),this.webglLayer.clear())}},{key:"showLayer",value:function(n){this.layerManager.showLayer(n)}},{key:"hideLayer",value:function(n){this.layerManager.hideLayer(n)}},{key:"add",value:function(n){this.addLayer(n)}},{key:"remove",value:function(n){this.removeLayer(n)}},{key:"addLayer",value:function(n){this.layerManager.addLayer(n)}},{key:"removeLayer",value:function(n){this.layerManager.removeLayer(n)}},{key:"removeAllLayers",value:function(){this.layerManager.removeAllLayers()}},{key:"getAllLayers",value:function(){return this.layerManager.getAllLayers()}},{key:"getAllThreeLayers",value:function(){return this.layerManager.getAllThreeLayers()}}]),e})();var qb=function(){function e(n){Fi(this,e),this._visible=!0,this.options=this.getCommonDefaultOptions(),this.options=Pe(this.options,this.getDefaultOptions()),this.autoUpdate=!1,this.options=Pe(this.options,n),this.options.data&&(this.data=this.options.data,delete this.options.data)}return mo(e,[{key:"getCommonDefaultOptions",value:function(){return{}}},{key:"getDefaultOptions",value:function(){return{}}},{key:"initialize",value:function(n){}},{key:"destroy",value:function(){this.onDestroy&&this.onDestroy()}},{key:"show",value:function(){this._visible=!0}},{key:"hide",value:function(){this._visible=!1}},{key:"render",value:function(){}},{key:"clear",value:function(){this.setData([])}},{key:"setData",value:function(n,o){o=o||{},this.data=n,this.onDataChanged&&this.onDataChanged(this.getData()),this.onChanged&&this.onChanged(this.getOptions(),this.getData(),o),o.autoRender!==!1&&this.webglLayer&&this.webglLayer.render()}},{key:"getData",value:function(){return this.data||[]}},{key:"setOptions",value:function(n,o){n=n||{},o=o||{};var c=Pe({},this.getOptions());Pe(this.options,n),this.onOptionsChanged&&this.onOptionsChanged(this.getOptions(),c),this.onChanged&&this.onChanged(this.getOptions(),this.getData(),o),n.data?(this.setData(n.data,o),delete n.data):o.autoRender!==!1&&this.webglLayer&&this.webglLayer.render()}},{key:"getOptions",value:function(){return this.options||{}}},{key:"onOptionsChanged",value:function(n,o){}},{key:"onDataChanged",value:function(n){}},{key:"onChanged",value:function(n,o){}},{key:"onDestroy",value:function(){}},{key:"lnglatToMercator",value:function(n,o){}},{key:"setWebglLayer",value:function(n){this.webglLayer=n}},{key:"getWebglLayer",value:function(){return this.webglLayer}},{key:"isRequestAnimation",value:function(){return this.autoUpdate}}]),e}(),sV=aa("iterator"),lV=Oi.isIterable=function(e){return e=Object(e),e[sV]!==void 0||"@@iterator"in e||Xl.hasOwnProperty(Yi(e))},rA=M(function(e){e.exports={default:lV,__esModule:!0}});m(rA);var uV=Oi.getIterator=function(e){var n=nf(e);if(typeof n!="function")throw TypeError(e+" is not iterable!");return Ra(n.call(e))},nA=M(function(e){e.exports={default:uV,__esModule:!0}});m(nA);var cV=M(function(e,n){n.__esModule=!0;var o=rA&&rA.__esModule?rA:{default:rA},c=nA&&nA.__esModule?nA:{default:nA};n.default=function(){return function(v,g){if(Array.isArray(v))return v;if((0,o.default)(Object(v))){var A=[],y=!0,T=!1,D=void 0;try{for(var X=(0,c.default)(v),I;!(y=(I=X.next()).done)&&(A.push(I.value),!g||A.length!==g);y=!0);}catch(b){T=!0,D=b}finally{try{!y&&X.return&&X.return()}finally{if(T)throw D}}return A}throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()}),eR=m(cV),hV=function(e){function n(o){return Fi(this,n),o=sa(this,(n.__proto__||Pa(n)).call(this,o)),o.pickedColor=[-1,-1,-1],o}return Oa(n,e),mo(n,[{key:"getCommonDefaultOptions",value:function(){return{pickWidth:1,pickHeight:1,blend:"default",zIndex:0,zoomThreshold:[0,30],repeat:!1,enablePicked:!1,autoSelect:!1,selectedIndex:-1,selectedColor:"rgba(20, 20, 200, 1.0)"}}},{key:"commonInitialize",value:function(o){var c=this.getOptions();this.gl=o,c.enablePicked&&(this.pickBuffer=new eA({gl:o,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}))}},{key:"getCommonAttributes",value:function(){var o=[];return this.getOptions().enablePicked&&o.push({name:"aPickColor",buffer:this.pickBuffer,size:3,type:"FLOAT",stride:12,offset:0}),o}},{key:"getProperty",value:function(o,c,v){return Object.prototype.toString.call(c)==="[object Function]"?c(v):(c=v[o]||c,"properties"in v&&o in v.properties&&(c=v.properties[o]),c)}},{key:"normizedColor",value:function(o){var c=o;return o instanceof Array||(c=kn(o).unitArray()),c[3]===void 0&&(c[3]=1),c}},{key:"normizedPoint",value:function(o){var c=this.getPointOffset();if(!o||o[0]===void 0||o[1]===void 0)return[c[0],c[1],0];var v=Number(o[0]),g=Number(o[1]);-180<=v&&180>=v&&-90<=g&&90>=g&&(g=this.webglLayer.map.lnglatToMercator(v,g),v=g[0],g=g[1]);var A=Number(o[2])||0;return this.webglLayer&&this.webglLayer.options.mapType==="cesium"&&window.Cesium?(v=this.convertLngLat([v,g]),A=window.Cesium.Cartesian3.fromDegrees(v[0],v[1],A),v=A.x,g=A.y,A=A.z):this.webglLayer&&this.webglLayer.options.mapType==="bmapgl"&&this.webglLayer.map.map.mapType==="B_EARTH_MAP"&&(v=this.convertLngLat([v,g]),A=this.webglLayer.map.map.getEarth().scene.fromLatLngToXYZ({lng:v[0],lat:v[1]}),v=A.x,g=A.y,A=A.z),3<o.length?[v-c[0],g-c[1],A].concat(jb(o.slice(3))):[v-c[0],g-c[1],A]}},{key:"convertLngLat",value:function(o){return[o[0]/2003750834e-2*180,180/Math.PI*(2*Math.atan(Math.exp(o[1]/2003750834e-2*180*Math.PI/180))-Math.PI/2)]}},{key:"getPointOffset",value:function(){var o=[0,0],c=this.getOptions();return this.webglLayer&&this.webglLayer.options.pointOffset?o=this.webglLayer.options.pointOffset:c.pointOffset&&(o=c.pointOffset),o}},{key:"indexToRgb",value:function(o){o++;var c=Math.floor(o/65536);o-=65536*c;var v=Math.floor(o/256);return[o-256*v,v,c]}},{key:"rgbToIndex",value:function(o){for(var c=o.length/4,v=Math.floor(c/2),g=function(X){return o[X]+256*o[X+1]+65536*o[X+2]-1},A=0;;A++){var y=v+A,T=v-A;if(y===T){if(y=g(4*y),-1<y)return y}else{if(y<c){var D=g(4*y);if(-1<D)return D}if(0<=T&&(D=g(4*T),-1<D))return D;if(y>=c&&0>T)break}}return-1}},{key:"getCommonUniforms",value:function(o){o=o.isPickRender;var c=this.getOptions(),v={};if(c.enablePicked){var g=0<=c.selectedIndex?c.selectedIndex:-1;g=c.autoSelect?this.pickedColor:this.indexToRgb(g),v=Pe(v,{uSelectedColor:this.normizedColor(c.selectedColor),uEnablePicked:c.enablePicked,uPickedColor:g.map(function(A){return A/255}),uIsPickRender:!!o})}return v}},{key:"pick",value:function(o,c,v){var g=this.getOptions(),A=this.gl,y=this.webglLayer._dpr;this.webglLayer.saveFramebuffer(),this.webglLayer.bindFramebuffer(this.webglLayer.pickFBO),this.webglLayer.clear(),this.render({gl:A,isPickRender:!0,matrix:this.webglLayer.matrix,projectionMatrix:this.webglLayer.projectionMatrix,viewMatrix:this.webglLayer.viewMatrix,orthoMatrix:this.webglLayer.orthoMatrix});var T=new Uint8Array(4*g.pickWidth*g.pickHeight);return A.readPixels(o*y-Math.floor(g.pickWidth/2),A.canvas.height-c*y-Math.floor(g.pickHeight/2),g.pickWidth,g.pickHeight,A.RGBA,A.UNSIGNED_BYTE,T),o=this.rgbToIndex(T),this.pickAfter&&(o=this.pickAfter(T,o+1)),this.setPickedIndex&&this.setPickedIndex(o,v),v=this.getData(),this.pickedColor=[T[0],T[1],T[2]],this.webglLayer.restoreFramebuffer(),{dataIndex:o,dataItem:v[o]}}},{key:"setGLState",value:function(o){this.webglLayer.stateManager.setState(o,this.options)}},{key:"addMultipleCoords",value:function(o,c,v){if(!this.options.repeat||!this.webglLayer||this.webglLayer.options.mapType!=="bmapgl"||this.webglLayer.map.map.mapType==="B_EARTH_MAP")return[o];var g=this.webglLayer.map.map;c=c||g.getZoom();var A=v?g.worldSize(c):4007545274461451e-8;if(c=function(N){return[[N[0]-A,N[1],N[2]||0],[N[0]+A,N[1],N[2]||0]]},o instanceof Array&&!(o[0]instanceof Array))return c=c(o),c=eR(c,2),[o,c[0],c[1]];if(o instanceof Array&&o[0]instanceof Array&&!(o[0][0]instanceof Array)){v=[],g=[];for(var y=0;y<o.length;y++){var T=c(o[y]);T=eR(T,2);var D=T[1];v.push(T[0]),g.push(D)}return[o,v,g]}for(v=[],g=[],y=0;y<o.length;y++){T=[],D=[];for(var X=0;X<o[y].length;X++){var I=c(o[y][X]);I=eR(I,2);var b=I[1];T.push(I[0]),D.push(b)}v.push(T),g.push(D)}return[o,v,g]}}]),n}(qb),Kb=M(function(e,n){(function(o,c){c(n)})(YC,function(o){function c(){}function v(r,l){this.x=r||0,this.y=l||0}function g(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function A(r,l,f,w,E,O,B,Y,K,$){Object.defineProperty(this,"id",{value:nW++}),this.uuid=ci.generateUUID(),this.name="",this.image=r!==void 0?r:A.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=l!==void 0?l:A.DEFAULT_MAPPING,this.wrapS=f!==void 0?f:1001,this.wrapT=w!==void 0?w:1001,this.magFilter=E!==void 0?E:1006,this.minFilter=O!==void 0?O:1008,this.anisotropy=K!==void 0?K:1,this.format=B!==void 0?B:1023,this.internalFormat=null,this.type=Y!==void 0?Y:1009,this.offset=new v(0,0),this.repeat=new v(1,1),this.center=new v(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new g,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=$!==void 0?$:3e3,this.version=0,this.onUpdate=null}function y(r,l,f,w){this.x=r||0,this.y=l||0,this.z=f||0,this.w=w!==void 0?w:1}function T(r,l,f){this.width=r,this.height=l,this.scissor=new y(0,0,r,l),this.scissorTest=!1,this.viewport=new y(0,0,r,l),f=f||{},this.texture=new A(void 0,f.mapping,f.wrapS,f.wrapT,f.magFilter,f.minFilter,f.format,f.type,f.anisotropy,f.encoding),this.texture.image={},this.texture.image.width=r,this.texture.image.height=l,this.texture.generateMipmaps=f.generateMipmaps!==void 0?f.generateMipmaps:!1,this.texture.minFilter=f.minFilter!==void 0?f.minFilter:1006,this.depthBuffer=f.depthBuffer!==void 0?f.depthBuffer:!0,this.stencilBuffer=f.stencilBuffer!==void 0?f.stencilBuffer:!0,this.depthTexture=f.depthTexture!==void 0?f.depthTexture:null}function D(r,l,f){T.call(this,r,l,f),this.samples=4}function X(r,l,f,w){this._x=r||0,this._y=l||0,this._z=f||0,this._w=w!==void 0?w:1}function I(r,l,f){this.x=r||0,this.y=l||0,this.z=f||0}function b(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function N(r,l,f,w){this._x=r||0,this._y=l||0,this._z=f||0,this._order=w||N.DefaultOrder}function k(){this.mask=1}function G(){Object.defineProperty(this,"id",{value:aW++}),this.uuid=ci.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=G.DefaultUp.clone();var r=new I,l=new N,f=new X,w=new I(1,1,1);l._onChange(function(){f.setFromEuler(l,!1)}),f._onChange(function(){l.setFromQuaternion(f,void 0,!1)}),Rn(this,{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:l},quaternion:{configurable:!0,enumerable:!0,value:f},scale:{configurable:!0,enumerable:!0,value:w},modelViewMatrix:{value:new b},normalMatrix:{value:new g}}),this.matrix=new b,this.matrixWorld=new b,this.matrixAutoUpdate=G.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new k,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function re(){G.call(this),this.type="Scene",this.overrideMaterial=this.fog=this.environment=this.background=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function se(r,l){this.min=r!==void 0?r:new I(1/0,1/0,1/0),this.max=l!==void 0?l:new I(-1/0,-1/0,-1/0)}function ue(r,l,f,w,E){var O,B=0;for(O=r.length-3;B<=O;B+=3){Cv.fromArray(r,B);var Y=E.x*Math.abs(Cv.x)+E.y*Math.abs(Cv.y)+E.z*Math.abs(Cv.z),K=l.dot(Cv),$=f.dot(Cv),pe=w.dot(Cv);if(Math.max(-Math.max(K,$,pe),Math.min(K,$,pe))>Y)return!1}return!0}function we(r,l){this.center=r!==void 0?r:new I,this.radius=l!==void 0?l:-1}function Te(r,l){this.origin=r!==void 0?r:new I,this.direction=l!==void 0?l:new I(0,0,-1)}function je(r,l){this.normal=r!==void 0?r:new I(1,0,0),this.constant=l!==void 0?l:0}function Ge(r,l,f){this.a=r!==void 0?r:new I,this.b=l!==void 0?l:new I,this.c=f!==void 0?f:new I}function He(r,l,f){return l===void 0&&f===void 0?this.set(r):this.setRGB(r,l,f)}function lt(r,l,f){return 0>f&&(f+=1),1<f&&--f,f<1/6?r+6*(l-r)*f:.5>f?l:f<2/3?r+6*(l-r)*(2/3-f):r}function ht(r){return .04045>r?.0773993808*r:Math.pow(.9478672986*r+.0521327014,2.4)}function It(r){return .0031308>r?12.92*r:1.055*Math.pow(r,.41666)-.055}function vt(r,l,f,w,E,O){this.a=r,this.b=l,this.c=f,this.normal=w&&w.isVector3?w:new I,this.vertexNormals=Array.isArray(w)?w:[],this.color=E&&E.isColor?E:new He,this.vertexColors=Array.isArray(E)?E:[],this.materialIndex=O!==void 0?O:0}function Et(){Object.defineProperty(this,"id",{value:pW++}),this.uuid=ci.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=this.flatShading=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null,this.depthFunc=3,this.depthWrite=this.depthTest=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilZPass=this.stencilZFail=this.stencilFail=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipShadows=this.clipIntersection=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.toneMapped=this.visible=!0,this.userData={},this.version=0}function xr(r){Et.call(this),this.type="MeshBasicMaterial",this.color=new He(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphTargets=this.skinning=!1,this.setValues(r)}function Nt(r,l,f){if(Array.isArray(r))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=r,this.itemSize=l,this.count=r!==void 0?r.length/l:0,this.normalized=f===!0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}function Pr(r,l,f){Nt.call(this,new Int8Array(r),l,f)}function qr(r,l,f){Nt.call(this,new Uint8Array(r),l,f)}function Fr(r,l,f){Nt.call(this,new Uint8ClampedArray(r),l,f)}function $n(r,l,f){Nt.call(this,new Int16Array(r),l,f)}function Gr(r,l,f){Nt.call(this,new Uint16Array(r),l,f)}function ze(r,l,f){Nt.call(this,new Int32Array(r),l,f)}function Ue(r,l,f){Nt.call(this,new Uint32Array(r),l,f)}function ke(r,l,f){Nt.call(this,new Float32Array(r),l,f)}function Je(r,l,f){Nt.call(this,new Float64Array(r),l,f)}function Ce(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function be(r){if(r.length===0)return-1/0;for(var l=r[0],f=1,w=r.length;f<w;++f)r[f]>l&&(l=r[f]);return l}function Fe(){Object.defineProperty(this,"id",{value:mW+=2}),this.uuid=ci.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingSphere=this.boundingBox=null,this.drawRange={start:0,count:1/0},this.userData={}}function Qe(r,l){G.call(this),this.type="Mesh",this.geometry=r!==void 0?r:new Fe,this.material=l!==void 0?l:new xr,this.updateMorphTargets()}function ft(r,l,f,w,E,O,B,Y){return(l.side===1?w.intersectTriangle(B,O,E,!0,Y):w.intersectTriangle(E,O,B,l.side!==2,Y))===null?null:(cS.copy(Y),cS.applyMatrix4(r.matrixWorld),l=f.ray.origin.distanceTo(cS),l<f.near||l>f.far?null:{distance:l,point:cS.clone(),object:r})}function Mt(r,l,f,w,E,O,B,Y,K,$,pe,fe){if(um.fromBufferAttribute(E,$),cm.fromBufferAttribute(E,pe),hm.fromBufferAttribute(E,fe),E=r.morphTargetInfluences,l.morphTargets&&O&&E){sS.set(0,0,0),lS.set(0,0,0),uS.set(0,0,0);for(var xe=0,ye=O.length;xe<ye;xe++){var Me=E[xe],Oe=O[xe];Me!==0&&(QR.fromBufferAttribute(Oe,$),$R.fromBufferAttribute(Oe,pe),eL.fromBufferAttribute(Oe,fe),B?(sS.addScaledVector(QR,Me),lS.addScaledVector($R,Me),uS.addScaledVector(eL,Me)):(sS.addScaledVector(QR.sub(um),Me),lS.addScaledVector($R.sub(cm),Me),uS.addScaledVector(eL.sub(hm),Me)))}um.add(sS),cm.add(lS),hm.add(uS)}return r.isSkinnedMesh&&(r.boneTransform($,um),r.boneTransform(pe,cm),r.boneTransform(fe,hm)),(r=ft(r,l,f,w,um,cm,hm,YA))&&(Y&&(e1.fromBufferAttribute(Y,$),t1.fromBufferAttribute(Y,pe),r1.fromBufferAttribute(Y,fe),r.uv=Ge.getUV(YA,um,cm,hm,e1,t1,r1,new v)),K&&(e1.fromBufferAttribute(K,$),t1.fromBufferAttribute(K,pe),r1.fromBufferAttribute(K,fe),r.uv2=Ge.getUV(YA,um,cm,hm,e1,t1,r1,new v)),Y=new vt($,pe,fe),Ge.getNormal(um,cm,hm,Y.normal),r.face=Y),r}function Ne(){Object.defineProperty(this,"id",{value:gW+=2}),this.uuid=ci.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function Gt(r){var l={},f;for(f in r){l[f]={};for(var w in r[f]){var E=r[f][w];E&&(E.isColor||E.isMatrix3||E.isMatrix4||E.isVector2||E.isVector3||E.isVector4||E.isTexture)?l[f][w]=E.clone():Array.isArray(E)?l[f][w]=E.slice():l[f][w]=E}}return l}function Yt(r){for(var l={},f=0;f<r.length;f++){var w=Gt(r[f]),E;for(E in w)l[E]=w[E]}return l}function kt(r){Et.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,this.fragmentShader=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,r!==void 0&&(r.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(r))}function Ot(){G.call(this),this.type="Camera",this.matrixWorldInverse=new b,this.projectionMatrix=new b,this.projectionMatrixInverse=new b}function Jt(r,l,f,w){Ot.call(this),this.type="PerspectiveCamera",this.fov=r!==void 0?r:50,this.zoom=1,this.near=f!==void 0?f:.1,this.far=w!==void 0?w:2e3,this.focus=10,this.aspect=l!==void 0?l:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Kr(r,l,f){if(G.call(this),this.type="CubeCamera",f.isWebGLCubeRenderTarget!==!0)console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");else{this.renderTarget=f;var w=new Jt(90,1,r,l);w.layers=this.layers,w.up.set(0,-1,0),w.lookAt(new I(1,0,0)),this.add(w);var E=new Jt(90,1,r,l);E.layers=this.layers,E.up.set(0,-1,0),E.lookAt(new I(-1,0,0)),this.add(E);var O=new Jt(90,1,r,l);O.layers=this.layers,O.up.set(0,0,1),O.lookAt(new I(0,1,0)),this.add(O);var B=new Jt(90,1,r,l);B.layers=this.layers,B.up.set(0,0,-1),B.lookAt(new I(0,-1,0)),this.add(B);var Y=new Jt(90,1,r,l);Y.layers=this.layers,Y.up.set(0,-1,0),Y.lookAt(new I(0,0,1)),this.add(Y);var K=new Jt(90,1,r,l);K.layers=this.layers,K.up.set(0,-1,0),K.lookAt(new I(0,0,-1)),this.add(K),this.update=function($,pe){this.parent===null&&this.updateMatrixWorld();var fe=$.xr.enabled,xe=$.getRenderTarget();$.xr.enabled=!1;var ye=f.texture.generateMipmaps;f.texture.generateMipmaps=!1,$.setRenderTarget(f,0),$.render(pe,w),$.setRenderTarget(f,1),$.render(pe,E),$.setRenderTarget(f,2),$.render(pe,O),$.setRenderTarget(f,3),$.render(pe,B),$.setRenderTarget(f,4),$.render(pe,Y),f.texture.generateMipmaps=ye,$.setRenderTarget(f,5),$.render(pe,K),$.setRenderTarget(xe),$.xr.enabled=fe},this.clear=function($,pe,fe,xe){for(var ye=$.getRenderTarget(),Me=0;6>Me;Me++)$.setRenderTarget(f,Me),$.clear(pe,fe,xe);$.setRenderTarget(ye)}}}function gn(r,l,f){kp(l)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),l=f),T.call(this,r,r,l)}function Zt(r,l,f,w,E,O,B,Y,K,$,pe,fe){A.call(this,null,O,B,Y,K,$,w,E,pe,fe),this.image={data:r||null,width:l||1,height:f||1},this.magFilter=K!==void 0?K:1003,this.minFilter=$!==void 0?$:1003,this.flipY=this.generateMipmaps=!1,this.unpackAlignment=1,this.needsUpdate=!0}function Nr(r,l,f,w,E,O){this.planes=[r!==void 0?r:new je,l!==void 0?l:new je,f!==void 0?f:new je,w!==void 0?w:new je,E!==void 0?E:new je,O!==void 0?O:new je]}function Ln(){function r(E,O){f!==!1&&(w(E,O),l.requestAnimationFrame(r))}var l=null,f=!1,w=null;return{start:function(){f!==!0&&w!==null&&(l.requestAnimationFrame(r),f=!0)},stop:function(){f=!1},setAnimationLoop:function(E){w=E},setContext:function(E){l=E}}}function Tr(r,l){function f(O,B){var Y=O.array,K=O.usage,$=r.createBuffer();return r.bindBuffer(B,$),r.bufferData(B,Y,K),O.onUploadCallback(),B=5126,Y instanceof Float32Array?B=5126:Y instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):Y instanceof Uint16Array?B=5123:Y instanceof Int16Array?B=5122:Y instanceof Uint32Array?B=5125:Y instanceof Int32Array?B=5124:Y instanceof Int8Array?B=5120:Y instanceof Uint8Array&&(B=5121),{buffer:$,type:B,bytesPerElement:Y.BYTES_PER_ELEMENT,version:O.version}}var w=l.isWebGL2,E=new co;return{get:function(O){return O.isInterleavedBufferAttribute&&(O=O.data),E.get(O)},remove:function(O){O.isInterleavedBufferAttribute&&(O=O.data);var B=E.get(O);B&&(r.deleteBuffer(B.buffer),E.delete(O))},update:function(O,B){O.isInterleavedBufferAttribute&&(O=O.data);var Y=E.get(O);if(Y===void 0)E.set(O,f(O,B));else if(Y.version<O.version){var K=O.array,$=O.updateRange;r.bindBuffer(B,Y.buffer),$.count===-1?r.bufferSubData(B,0,K):(w?r.bufferSubData(B,$.offset*K.BYTES_PER_ELEMENT,K,$.offset,$.count):r.bufferSubData(B,$.offset*K.BYTES_PER_ELEMENT,K.subarray($.offset,$.offset+$.count)),$.count=-1),Y.version=O.version}}}}function Qo(r,l,f,w){Ne.call(this),this.type="PlaneGeometry",this.parameters={width:r,height:l,widthSegments:f,heightSegments:w},this.fromBufferGeometry(new Ai(r,l,f,w)),this.mergeVertices()}function Ai(r,l,f,w){Fe.call(this),this.type="PlaneBufferGeometry",this.parameters={width:r,height:l,widthSegments:f,heightSegments:w},r=r||1,l=l||1;var E=r/2,O=l/2;f=Math.floor(f)||1,w=Math.floor(w)||1;var B=f+1,Y=w+1,K=r/f,$=l/w,pe=[],fe=[],xe=[],ye=[];for(r=0;r<Y;r++){var Me=r*$-O;for(l=0;l<B;l++)fe.push(l*K-E,-Me,0),xe.push(0,0,1),ye.push(l/f),ye.push(1-r/w)}for(r=0;r<w;r++)for(l=0;l<f;l++)E=l+B*(r+1),O=l+1+B*(r+1),Y=l+1+B*r,pe.push(l+B*r,E,Y),pe.push(E,O,Y);this.setIndex(pe),this.setAttribute("position",new ke(fe,3)),this.setAttribute("normal",new ke(xe,3)),this.setAttribute("uv",new ke(ye,2))}function Rs(r,l,f,w){function E(xe,ye){l.buffers.color.setClear(xe.r,xe.g,xe.b,ye,w)}var O=new He(0),B=0,Y,K,$=null,pe=0,fe=null;return{getClearColor:function(){return O},setClearColor:function(xe,ye){O.set(xe),B=ye!==void 0?ye:1,E(O,B)},getClearAlpha:function(){return B},setClearAlpha:function(xe){B=xe,E(O,B)},render:function(xe,ye,Me,Oe){ye=ye.background,Me=r.xr,(Me=Me.getSession&&Me.getSession())&&Me.environmentBlendMode==="additive"&&(ye=null),ye===null?E(O,B):ye&&ye.isColor&&(E(ye,1),Oe=!0),(r.autoClear||Oe)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),ye&&(ye.isCubeTexture||ye.isWebGLCubeRenderTarget||ye.mapping===306)?(K===void 0&&(K=new Qe(new ZA(1,1,1),new kt({type:"BackgroundCubeMaterial",uniforms:Gt(Af.cube.uniforms),vertexShader:Af.cube.vertexShader,fragmentShader:Af.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),K.geometry.deleteAttribute("normal"),K.geometry.deleteAttribute("uv"),K.onBeforeRender=function(it,xt,pt){this.matrixWorld.copyPosition(pt.matrixWorld)},Object.defineProperty(K.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),f.update(K)),Oe=ye.isWebGLCubeRenderTarget?ye.texture:ye,K.material.uniforms.envMap.value=Oe,K.material.uniforms.flipEnvMap.value=Oe.isCubeTexture?-1:1,($!==ye||pe!==Oe.version||fe!==r.toneMapping)&&(K.material.needsUpdate=!0,$=ye,pe=Oe.version,fe=r.toneMapping),xe.unshift(K,K.geometry,K.material,0,0,null)):ye&&ye.isTexture&&(Y===void 0&&(Y=new Qe(new Ai(2,2),new kt({type:"BackgroundMaterial",uniforms:Gt(Af.background.uniforms),vertexShader:Af.background.vertexShader,fragmentShader:Af.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),Y.geometry.deleteAttribute("normal"),Object.defineProperty(Y.material,"map",{get:function(){return this.uniforms.t2D.value}}),f.update(Y)),Y.material.uniforms.t2D.value=ye,ye.matrixAutoUpdate===!0&&ye.updateMatrix(),Y.material.uniforms.uvTransform.value.copy(ye.matrix),($!==ye||pe!==ye.version||fe!==r.toneMapping)&&(Y.material.needsUpdate=!0,$=ye,pe=ye.version,fe=r.toneMapping),xe.unshift(Y,Y.geometry,Y.material,0,0,null))}}}function uc(r,l,f,w){var E=w.isWebGL2,O;this.setMode=function(B){O=B},this.render=function(B,Y){r.drawArrays(O,B,Y),f.update(Y,O)},this.renderInstances=function(B,Y,K,$){if($!==0){if(E){B=r;var pe="drawArraysInstanced"}else if(B=l.get("ANGLE_instanced_arrays"),pe="drawArraysInstancedANGLE",B===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}B[pe](O,Y,K,$),f.update(K,O,$)}}}function md(r,l,f){function w(Lt){if(Lt==="highp"){if(0<r.getShaderPrecisionFormat(35633,36338).precision&&0<r.getShaderPrecisionFormat(35632,36338).precision)return"highp";Lt="mediump"}return Lt==="mediump"&&0<r.getShaderPrecisionFormat(35633,36337).precision&&0<r.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var E,O=typeof WebGL2RenderingContext<"u"&&r instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&r instanceof WebGL2ComputeRenderingContext,B=f.precision!==void 0?f.precision:"highp",Y=w(B);Y!==B&&(console.warn("THREE.WebGLRenderer:",B,"not supported, using",Y,"instead."),B=Y),f=f.logarithmicDepthBuffer===!0,Y=r.getParameter(34930);var K=r.getParameter(35660),$=r.getParameter(3379),pe=r.getParameter(34076),fe=r.getParameter(34921),xe=r.getParameter(36347),ye=r.getParameter(36348),Me=r.getParameter(36349),Oe=0<K,it=O||!!l.get("OES_texture_float"),xt=Oe&&it,pt=O?r.getParameter(36183):0;return{isWebGL2:O,getMaxAnisotropy:function(){if(E!==void 0)return E;var Lt=l.get("EXT_texture_filter_anisotropic");return E=Lt!==null?r.getParameter(Lt.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:w,precision:B,logarithmicDepthBuffer:f,maxTextures:Y,maxVertexTextures:K,maxTextureSize:$,maxCubemapSize:pe,maxAttributes:fe,maxVertexUniforms:xe,maxVaryings:ye,maxFragmentUniforms:Me,vertexTextures:Oe,floatFragmentTextures:it,floatVertexTextures:xt,maxSamples:pt}}function Jl(){function r(){$.value!==w&&($.value=w,$.needsUpdate=0<E),f.numPlanes=E,f.numIntersection=0}function l(pe,fe,xe,ye){var Me=pe!==null?pe.length:0,Oe=null;if(Me!==0){if(Oe=$.value,ye!==!0||Oe===null)for(ye=xe+4*Me,fe=fe.matrixWorldInverse,K.getNormalMatrix(fe),(Oe===null||Oe.length<ye)&&(Oe=new Float32Array(ye)),ye=0;ye!==Me;++ye,xe+=4)Y.copy(pe[ye]).applyMatrix4(fe,K),Y.normal.toArray(Oe,xe),Oe[xe+3]=Y.constant;$.value=Oe,$.needsUpdate=!0}return f.numPlanes=Me,f.numIntersection=0,Oe}var f=this,w=null,E=0,O=!1,B=!1,Y=new je,K=new g,$={value:null,needsUpdate:!1};this.uniform=$,this.numIntersection=this.numPlanes=0,this.init=function(pe,fe,xe){var ye=pe.length!==0||fe||E!==0||O;return O=fe,w=l(pe,xe,0),E=pe.length,ye},this.beginShadows=function(){B=!0,l(null)},this.endShadows=function(){B=!1,r()},this.setState=function(pe,fe,xe,ye,Me,Oe){if(!O||pe===null||pe.length===0||B&&!xe)B?l(null):r();else{xe=B?0:E;var it=4*xe,xt=Me.clippingState||null;for($.value=xt,xt=l(pe,ye,it,Oe),pe=0;pe!==it;++pe)xt[pe]=w[pe];Me.clippingState=xt,this.numIntersection=fe?this.numPlanes:0,this.numPlanes+=xe}}}function hf(r){var l={};return{get:function(f){if(l[f]!==void 0)return l[f];switch(f){case"WEBGL_depth_texture":var w=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":w=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":w=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":w=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:w=r.getExtension(f)}return w===null&&console.warn("THREE.WebGLRenderer: "+f+" extension not supported."),l[f]=w}}}function ff(r,l,f){function w(Y){var K=Y.target;Y=O.get(K),Y.index!==null&&l.remove(Y.index);for(var $ in Y.attributes)l.remove(Y.attributes[$]);K.removeEventListener("dispose",w),O.delete(K),($=B.get(Y))&&(l.remove($),B.delete(Y)),f.memory.geometries--}function E(Y){var K=[],$=Y.index,pe=Y.attributes.position;if($!==null){var fe=$.array;$=$.version,pe=0;for(var xe=fe.length;pe<xe;pe+=3){var ye=fe[pe+0],Me=fe[pe+1],Oe=fe[pe+2];K.push(ye,Me,Me,Oe,Oe,ye)}}else for(fe=pe.array,$=pe.version,pe=0,xe=fe.length/3-1;pe<xe;pe+=3)ye=pe+0,Me=pe+1,Oe=pe+2,K.push(ye,Me,Me,Oe,Oe,ye);K=new(65535<be(K)?Ue:Gr)(K,1),K.version=$,l.update(K,34963),(fe=B.get(Y))&&l.remove(fe),B.set(Y,K)}var O=new co,B=new co;return{get:function(Y,K){var $=O.get(K);return $||(K.addEventListener("dispose",w),K.isBufferGeometry?$=K:K.isGeometry&&(K._bufferGeometry===void 0&&(K._bufferGeometry=new Fe().setFromObject(Y)),$=K._bufferGeometry),O.set(K,$),f.memory.geometries++,$)},update:function(Y){var K=Y.index,$=Y.attributes;K!==null&&l.update(K,34963);for(var pe in $)l.update($[pe],34962);Y=Y.morphAttributes;for(pe in Y){K=Y[pe],$=0;for(var fe=K.length;$<fe;$++)l.update(K[$],34962)}},getWireframeAttribute:function(Y){var K=B.get(Y);if(K){var $=Y.index;$!==null&&K.version<$.version&&E(Y)}else E(Y);return B.get(Y)}}}function Cl(r,l,f,w){var E=w.isWebGL2,O,B,Y;this.setMode=function(K){O=K},this.setIndex=function(K){B=K.type,Y=K.bytesPerElement},this.render=function(K,$){r.drawElements(O,$,B,K*Y),f.update($,O)},this.renderInstances=function(K,$,pe,fe){if(fe!==0){if(E){K=r;var xe="drawElementsInstanced"}else if(K=l.get("ANGLE_instanced_arrays"),xe="drawElementsInstancedANGLE",K===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}K[xe](O,pe,B,$*Y,fe),f.update(pe,O,fe)}}}function ih(r){var l={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:l,programs:null,autoReset:!0,reset:function(){l.frame++,l.calls=0,l.triangles=0,l.points=0,l.lines=0},update:function(f,w,E){switch(E=E||1,l.calls++,w){case 4:l.triangles+=f/3*E;break;case 1:l.lines+=f/2*E;break;case 3:l.lines+=E*(f-1);break;case 2:l.lines+=E*f;break;case 0:l.points+=E*f;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",w)}}}}function As(r,l){return Math.abs(l[1])-Math.abs(r[1])}function dM(r){var l={},f=new Float32Array(8);return{update:function(w,E,O,B){var Y=w.morphTargetInfluences,K=Y===void 0?0:Y.length;if(w=l[E.id],w===void 0){w=[];for(var $=0;$<K;$++)w[$]=[$,0];l[E.id]=w}var pe=O.morphTargets&&E.morphAttributes.position;for(O=O.morphNormals&&E.morphAttributes.normal,$=0;$<K;$++){var fe=w[$];fe[1]!==0&&(pe&&E.deleteAttribute("morphTarget"+$),O&&E.deleteAttribute("morphNormal"+$))}for($=0;$<K;$++)fe=w[$],fe[0]=$,fe[1]=Y[$];for(w.sort(As),$=Y=0;8>$;$++){if((fe=w[$])&&(K=fe[0],fe=fe[1])){pe&&E.setAttribute("morphTarget"+$,pe[K]),O&&E.setAttribute("morphNormal"+$,O[K]),f[$]=fe,Y+=fe;continue}f[$]=0}E=E.morphTargetsRelative?1:1-Y,B.getUniforms().setValue(r,"morphTargetBaseInfluence",E),B.getUniforms().setValue(r,"morphTargetInfluences",f)}}}function pM(r,l,f,w){var E=new co;return{update:function(O){var B=w.render.frame,Y=O.geometry,K=l.get(O,Y);return E.get(K)!==B&&(Y.isGeometry&&K.updateFromObject(O),l.update(K),E.set(K,B)),O.isInstancedMesh&&f.update(O.instanceMatrix,34962),K},dispose:function(){E=new co}}}function cc(r,l,f,w,E,O,B,Y,K,$){r=r!==void 0?r:[],A.call(this,r,l!==void 0?l:301,f,w,E,O,B!==void 0?B:1022,Y,K,$),this.flipY=!1}function el(r,l,f,w){A.call(this,null),this.image={data:r||null,width:l||1,height:f||1,depth:w||1},this.minFilter=this.magFilter=1003,this.wrapR=1001,this.flipY=this.generateMipmaps=!1,this.needsUpdate=!0}function _l(r,l,f,w){A.call(this,null),this.image={data:r||null,width:l||1,height:f||1,depth:w||1},this.minFilter=this.magFilter=1003,this.wrapR=1001,this.flipY=this.generateMipmaps=!1,this.needsUpdate=!0}function gd(r,l,f){var w=r[0];if(0>=w||0<w)return r;var E=l*f,O=K6[E];if(O===void 0&&(O=new Float32Array(E),K6[E]=O),l!==0)for(w.toArray(O,0),w=1,E=0;w!==l;++w)E+=f,r[w].toArray(O,E);return O}function Ql(r,l){if(r.length!==l.length)return!1;for(var f=0,w=r.length;f<w;f++)if(r[f]!==l[f])return!1;return!0}function Ls(r,l){for(var f=0,w=l.length;f<w;f++)r[f]=l[f]}function ov(r,l){var f=J6[l];f===void 0&&(f=new Int32Array(l),J6[l]=f);for(var w=0;w!==l;++w)f[w]=r.allocateTextureUnit();return f}function qe(r,l){var f=this.cache;f[0]!==l&&(r.uniform1f(this.addr,l),f[0]=l)}function qt(r,l){var f=this.cache;l.x!==void 0?(f[0]!==l.x||f[1]!==l.y)&&(r.uniform2f(this.addr,l.x,l.y),f[0]=l.x,f[1]=l.y):Ql(f,l)||(r.uniform2fv(this.addr,l),Ls(f,l))}function wt(r,l){var f=this.cache;l.x!==void 0?(f[0]!==l.x||f[1]!==l.y||f[2]!==l.z)&&(r.uniform3f(this.addr,l.x,l.y,l.z),f[0]=l.x,f[1]=l.y,f[2]=l.z):l.r!==void 0?(f[0]!==l.r||f[1]!==l.g||f[2]!==l.b)&&(r.uniform3f(this.addr,l.r,l.g,l.b),f[0]=l.r,f[1]=l.g,f[2]=l.b):Ql(f,l)||(r.uniform3fv(this.addr,l),Ls(f,l))}function rr(r,l){var f=this.cache;l.x!==void 0?(f[0]!==l.x||f[1]!==l.y||f[2]!==l.z||f[3]!==l.w)&&(r.uniform4f(this.addr,l.x,l.y,l.z,l.w),f[0]=l.x,f[1]=l.y,f[2]=l.z,f[3]=l.w):Ql(f,l)||(r.uniform4fv(this.addr,l),Ls(f,l))}function Rr(r,l){var f=this.cache,w=l.elements;w===void 0?Ql(f,l)||(r.uniformMatrix2fv(this.addr,!1,l),Ls(f,l)):Ql(f,w)||(eF.set(w),r.uniformMatrix2fv(this.addr,!1,eF),Ls(f,w))}function ri(r,l){var f=this.cache,w=l.elements;w===void 0?Ql(f,l)||(r.uniformMatrix3fv(this.addr,!1,l),Ls(f,l)):Ql(f,w)||($6.set(w),r.uniformMatrix3fv(this.addr,!1,$6),Ls(f,w))}function Hr(r,l){var f=this.cache,w=l.elements;w===void 0?Ql(f,l)||(r.uniformMatrix4fv(this.addr,!1,l),Ls(f,l)):Ql(f,w)||(Q6.set(w),r.uniformMatrix4fv(this.addr,!1,Q6),Ls(f,w))}function _n(r,l,f){var w=this.cache,E=f.allocateTextureUnit();w[0]!==E&&(r.uniform1i(this.addr,E),w[0]=E),f.safeSetTexture2D(l||Z6,E)}function ei(r,l,f){var w=this.cache,E=f.allocateTextureUnit();w[0]!==E&&(r.uniform1i(this.addr,E),w[0]=E),f.setTexture2DArray(l||vW,E)}function Ni(r,l,f){var w=this.cache,E=f.allocateTextureUnit();w[0]!==E&&(r.uniform1i(this.addr,E),w[0]=E),f.setTexture3D(l||yW,E)}function wi(r,l,f){var w=this.cache,E=f.allocateTextureUnit();w[0]!==E&&(r.uniform1i(this.addr,E),w[0]=E),f.safeSetTextureCube(l||q6,E)}function hc(r,l){var f=this.cache;f[0]!==l&&(r.uniform1i(this.addr,l),f[0]=l)}function Lo(r,l){var f=this.cache;Ql(f,l)||(r.uniform2iv(this.addr,l),Ls(f,l))}function xa(r,l){var f=this.cache;Ql(f,l)||(r.uniform3iv(this.addr,l),Ls(f,l))}function oh(r,l){var f=this.cache;Ql(f,l)||(r.uniform4iv(this.addr,l),Ls(f,l))}function mM(r,l){var f=this.cache;f[0]!==l&&(r.uniform1ui(this.addr,l),f[0]=l)}function wu(r){switch(r){case 5126:return qe;case 35664:return qt;case 35665:return wt;case 35666:return rr;case 35674:return Rr;case 35675:return ri;case 35676:return Hr;case 5124:case 35670:return hc;case 35667:case 35671:return Lo;case 35668:case 35672:return xa;case 35669:case 35673:return oh;case 5125:return mM;case 35678:case 36198:case 36298:case 36306:case 35682:return _n;case 35679:case 36299:case 36307:return Ni;case 35680:case 36300:case 36308:case 36293:return wi;case 36289:case 36303:case 36311:case 36292:return ei}}function yy(r,l){r.uniform1fv(this.addr,l)}function vd(r,l){r.uniform1iv(this.addr,l)}function Kp(r,l){r.uniform2iv(this.addr,l)}function iR(r,l){r.uniform3iv(this.addr,l)}function yd(r,l){r.uniform4iv(this.addr,l)}function AV(r,l){l=gd(l,this.size,2),r.uniform2fv(this.addr,l)}function wV(r,l){l=gd(l,this.size,3),r.uniform3fv(this.addr,l)}function CV(r,l){l=gd(l,this.size,4),r.uniform4fv(this.addr,l)}function _V(r,l){l=gd(l,this.size,4),r.uniformMatrix2fv(this.addr,!1,l)}function MV(r,l){l=gd(l,this.size,9),r.uniformMatrix3fv(this.addr,!1,l)}function SV(r,l){l=gd(l,this.size,16),r.uniformMatrix4fv(this.addr,!1,l)}function TV(r,l,f){var w=l.length,E=ov(f,w);for(r.uniform1iv(this.addr,E),r=0;r!==w;++r)f.safeSetTexture2D(l[r]||Z6,E[r])}function EV(r,l,f){var w=l.length,E=ov(f,w);for(r.uniform1iv(this.addr,E),r=0;r!==w;++r)f.safeSetTextureCube(l[r]||q6,E[r])}function IV(r){switch(r){case 5126:return yy;case 35664:return AV;case 35665:return wV;case 35666:return CV;case 35674:return _V;case 35675:return MV;case 35676:return SV;case 5124:case 35670:return vd;case 35667:case 35671:return Kp;case 35668:case 35672:return iR;case 35669:case 35673:return yd;case 35678:case 36198:case 36298:case 36306:case 35682:return TV;case 35680:case 36300:case 36308:case 36293:return EV}}function RV(r,l,f){this.id=r,this.addr=f,this.cache=[],this.setValue=wu(l.type)}function t6(r,l,f){this.id=r,this.addr=f,this.cache=[],this.size=l.size,this.setValue=IV(l.type)}function r6(r){this.id=r,this.seq=[],this.map={}}function Jp(r,l){this.seq=[],this.map={};for(var f=r.getProgramParameter(l,35718),w=0;w<f;++w){var E=r.getActiveUniform(l,w),O=r.getUniformLocation(l,E.name),B=this,Y=E.name,K=Y.length;for(nL.lastIndex=0;;){var $=nL.exec(Y),pe=nL.lastIndex,fe=$[1],xe=$[3];if($[2]==="]"&&(fe|=0),xe===void 0||xe==="["&&pe+2===K){Y=B,E=xe===void 0?new RV(fe,E,O):new t6(fe,E,O),Y.seq.push(E),Y.map[E.id]=E;break}else xe=B.map[fe],xe===void 0&&(xe=new r6(fe),fe=B,B=xe,fe.seq.push(B),fe.map[B.id]=B),B=xe}}}function n6(r,l,f){return l=r.createShader(l),r.shaderSource(l,f),r.compileShader(l),l}function i6(r){switch(r){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:throw Error("unsupported encoding: "+r)}}function o6(r,l,f){var w=r.getShaderParameter(l,35713),E=r.getShaderInfoLog(l).trim();if(w&&E==="")return"";for(r=r.getShaderSource(l).split(`
`),l=0;l<r.length;l++)r[l]=l+1+": "+r[l];return r=r.join(`
`),"THREE.WebGLShader: gl.getShaderInfoLog() "+f+`
`+E+r}function aA(r,l){return l=i6(l),"vec4 "+r+"( vec4 value ) { return "+l[0]+"ToLinear"+l[1]+"; }"}function LV(r,l){return l=i6(l),"vec4 "+r+"( vec4 value ) { return LinearTo"+l[0]+l[1]+"; }"}function PV(r,l){switch(l){case 1:l="Linear";break;case 2:l="Reinhard";break;case 3:l="Uncharted2";break;case 4:l="OptimizedCineon";break;case 5:l="ACESFilmic";break;default:throw Error("unsupported toneMapping: "+l)}return"vec3 "+r+"( vec3 color ) { return "+l+"ToneMapping( color ); }"}function OV(r){var l=[],f;for(f in r){var w=r[f];w!==!1&&l.push("#define "+f+" "+w)}return l.join(`
`)}function sA(r){return r!==""}function a6(r,l){return r.replace(/NUM_DIR_LIGHTS/g,l.numDirLights).replace(/NUM_SPOT_LIGHTS/g,l.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,l.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,l.numPointLights).replace(/NUM_HEMI_LIGHTS/g,l.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,l.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,l.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,l.numPointLightShadows)}function s6(r,l){return r.replace(/NUM_CLIPPING_PLANES/g,l.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,l.numClippingPlanes-l.numClipIntersection)}function oR(r,l){if(r=Si[l],r===void 0)throw Error("Can not resolve #include <"+l+">");return r.replace(iL,oR)}function l6(r,l,f,w){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),aR(r,l,f,w)}function aR(r,l,f,w){for(r="",l=parseInt(l);l<parseInt(f);l++)r+=w.replace(/\[ i \]/g,"[ "+l+" ]").replace(/UNROLLED_LOOP_INDEX/g,l);return r}function u6(r){var l="precision "+r.precision+` float;
precision `+r.precision+" int;";return r.precision==="highp"?l+=`
#define HIGH_PRECISION`:r.precision==="mediump"?l+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(l+=`
#define LOW_PRECISION`),l}function DV(r){var l="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===1?l="SHADOWMAP_TYPE_PCF":r.shadowMapType===2?l="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===3&&(l="SHADOWMAP_TYPE_VSM"),l}function bV(r){var l="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case 301:case 302:l="ENVMAP_TYPE_CUBE";break;case 306:case 307:l="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:l="ENVMAP_TYPE_EQUIREC";break;case 305:l="ENVMAP_TYPE_SPHERE"}return l}function FV(r){var l="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case 302:case 304:l="ENVMAP_MODE_REFRACTION"}return l}function NV(r){var l="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case 0:l="ENVMAP_BLENDING_MULTIPLY";break;case 1:l="ENVMAP_BLENDING_MIX";break;case 2:l="ENVMAP_BLENDING_ADD"}return l}function BV(r,l,f){var w=r.getContext(),E=f.defines,O=f.vertexShader,B=f.fragmentShader,Y=DV(f),K=bV(f),$=FV(f),pe=NV(f),fe=0<r.gammaFactor?r.gammaFactor:1,xe=f.isWebGL2?"":[f.extensionDerivatives||f.envMapCubeUV||f.bumpMap||f.tangentSpaceNormalMap||f.clearcoatNormalMap||f.flatShading||f.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(f.extensionFragDepth||f.logarithmicDepthBuffer)&&f.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",f.extensionDrawBuffers&&f.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(f.extensionShaderTextureLOD||f.envMap)&&f.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(sA).join(`
`),ye=OV(E),Me=w.createProgram();f.isRawShaderMaterial?(E=[ye].filter(sA).join(`
`),0<E.length&&(E+=`
`),Y=[xe,ye].filter(sA).join(`
`),0<Y.length&&(Y+=`
`)):(E=[u6(f),"#define SHADER_NAME "+f.shaderName,ye,f.instancing?"#define USE_INSTANCING":"",f.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+fe,"#define MAX_BONES "+f.maxBones,f.useFog&&f.fog?"#define USE_FOG":"",f.useFog&&f.fogExp2?"#define FOG_EXP2":"",f.map?"#define USE_MAP":"",f.envMap?"#define USE_ENVMAP":"",f.envMap?"#define "+$:"",f.lightMap?"#define USE_LIGHTMAP":"",f.aoMap?"#define USE_AOMAP":"",f.emissiveMap?"#define USE_EMISSIVEMAP":"",f.bumpMap?"#define USE_BUMPMAP":"",f.normalMap?"#define USE_NORMALMAP":"",f.normalMap&&f.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",f.normalMap&&f.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",f.clearcoatMap?"#define USE_CLEARCOATMAP":"",f.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",f.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",f.displacementMap&&f.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",f.specularMap?"#define USE_SPECULARMAP":"",f.roughnessMap?"#define USE_ROUGHNESSMAP":"",f.metalnessMap?"#define USE_METALNESSMAP":"",f.alphaMap?"#define USE_ALPHAMAP":"",f.vertexTangents?"#define USE_TANGENT":"",f.vertexColors?"#define USE_COLOR":"",f.vertexUvs?"#define USE_UV":"",f.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",f.flatShading?"#define FLAT_SHADED":"",f.skinning?"#define USE_SKINNING":"",f.useVertexTexture?"#define BONE_TEXTURE":"",f.morphTargets?"#define USE_MORPHTARGETS":"",f.morphNormals&&f.flatShading===!1?"#define USE_MORPHNORMALS":"",f.doubleSided?"#define DOUBLE_SIDED":"",f.flipSided?"#define FLIP_SIDED":"",f.shadowMapEnabled?"#define USE_SHADOWMAP":"",f.shadowMapEnabled?"#define "+Y:"",f.sizeAttenuation?"#define USE_SIZEATTENUATION":"",f.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",f.logarithmicDepthBuffer&&f.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(sA).join(`
`),Y=[xe,u6(f),"#define SHADER_NAME "+f.shaderName,ye,f.alphaTest?"#define ALPHATEST "+f.alphaTest+(f.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+fe,f.useFog&&f.fog?"#define USE_FOG":"",f.useFog&&f.fogExp2?"#define FOG_EXP2":"",f.map?"#define USE_MAP":"",f.matcap?"#define USE_MATCAP":"",f.envMap?"#define USE_ENVMAP":"",f.envMap?"#define "+K:"",f.envMap?"#define "+$:"",f.envMap?"#define "+pe:"",f.lightMap?"#define USE_LIGHTMAP":"",f.aoMap?"#define USE_AOMAP":"",f.emissiveMap?"#define USE_EMISSIVEMAP":"",f.bumpMap?"#define USE_BUMPMAP":"",f.normalMap?"#define USE_NORMALMAP":"",f.normalMap&&f.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",f.normalMap&&f.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",f.clearcoatMap?"#define USE_CLEARCOATMAP":"",f.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",f.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",f.specularMap?"#define USE_SPECULARMAP":"",f.roughnessMap?"#define USE_ROUGHNESSMAP":"",f.metalnessMap?"#define USE_METALNESSMAP":"",f.alphaMap?"#define USE_ALPHAMAP":"",f.sheen?"#define USE_SHEEN":"",f.vertexTangents?"#define USE_TANGENT":"",f.vertexColors?"#define USE_COLOR":"",f.vertexUvs?"#define USE_UV":"",f.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",f.gradientMap?"#define USE_GRADIENTMAP":"",f.flatShading?"#define FLAT_SHADED":"",f.doubleSided?"#define DOUBLE_SIDED":"",f.flipSided?"#define FLIP_SIDED":"",f.shadowMapEnabled?"#define USE_SHADOWMAP":"",f.shadowMapEnabled?"#define "+Y:"",f.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",f.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",f.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",f.logarithmicDepthBuffer&&f.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(f.extensionShaderTextureLOD||f.envMap)&&f.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",f.toneMapping!==0?"#define TONE_MAPPING":"",f.toneMapping!==0?Si.tonemapping_pars_fragment:"",f.toneMapping!==0?PV("toneMapping",f.toneMapping):"",f.dithering?"#define DITHERING":"",f.outputEncoding||f.mapEncoding||f.matcapEncoding||f.envMapEncoding||f.emissiveMapEncoding||f.lightMapEncoding?Si.encodings_pars_fragment:"",f.mapEncoding?aA("mapTexelToLinear",f.mapEncoding):"",f.matcapEncoding?aA("matcapTexelToLinear",f.matcapEncoding):"",f.envMapEncoding?aA("envMapTexelToLinear",f.envMapEncoding):"",f.emissiveMapEncoding?aA("emissiveMapTexelToLinear",f.emissiveMapEncoding):"",f.lightMapEncoding?aA("lightMapTexelToLinear",f.lightMapEncoding):"",f.outputEncoding?LV("linearToOutputTexel",f.outputEncoding):"",f.depthPacking?"#define DEPTH_PACKING "+f.depthPacking:"",`
`].filter(sA).join(`
`)),O=O.replace(iL,oR),O=a6(O,f),O=s6(O,f),B=B.replace(iL,oR),B=a6(B,f),B=s6(B,f),O=O.replace(rF,aR).replace(tF,l6),B=B.replace(rF,aR).replace(tF,l6),f.isWebGL2&&!f.isRawShaderMaterial&&(K=!1,$=/^\s*#version\s+300\s+es\s*\n/,f.isShaderMaterial&&O.match($)!==null&&B.match($)!==null&&(K=!0,O=O.replace($,""),B=B.replace($,"")),E=`#version 300 es

#define attribute in
#define varying out
#define texture2D texture
`+E,Y=[`#version 300 es

#define varying in`,K?"":"out highp vec4 pc_fragColor;",K?"":"#define gl_FragColor pc_fragColor",`#define gl_FragDepthEXT gl_FragDepth
#define texture2D texture
#define textureCube texture
#define texture2DProj textureProj
#define texture2DLodEXT textureLod
#define texture2DProjLodEXT textureProjLod
#define textureCubeLodEXT textureLod
#define texture2DGradEXT textureGrad
#define texture2DProjGradEXT textureProjGrad
#define textureCubeGradEXT textureGrad`].join(`
`)+`
`+Y),B=Y+B,O=n6(w,35633,E+O),B=n6(w,35632,B),w.attachShader(Me,O),w.attachShader(Me,B),f.index0AttributeName!==void 0?w.bindAttribLocation(Me,0,f.index0AttributeName):f.morphTargets===!0&&w.bindAttribLocation(Me,0,"position"),w.linkProgram(Me),r.debug.checkShaderErrors&&(r=w.getProgramInfoLog(Me).trim(),K=w.getShaderInfoLog(O).trim(),$=w.getShaderInfoLog(B).trim(),fe=pe=!0,w.getProgramParameter(Me,35714)===!1?(pe=!1,xe=o6(w,O,"vertex"),ye=o6(w,B,"fragment"),console.error("THREE.WebGLProgram: shader error: ",w.getError(),"35715",w.getProgramParameter(Me,35715),"gl.getProgramInfoLog",r,xe,ye)):r!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",r):(K===""||$==="")&&(fe=!1),fe&&(this.diagnostics={runnable:pe,programLog:r,vertexShader:{log:K,prefix:E},fragmentShader:{log:$,prefix:Y}})),w.deleteShader(O),w.deleteShader(B);var Oe;this.getUniforms=function(){return Oe===void 0&&(Oe=new Jp(w,Me)),Oe};var it;return this.getAttributes=function(){if(it===void 0){for(var xt={},pt=w.getProgramParameter(Me,35721),Lt=0;Lt<pt;Lt++){var Ct=w.getActiveAttrib(Me,Lt).name;xt[Ct]=w.getAttribLocation(Me,Ct)}it=xt}return it},this.destroy=function(){w.deleteProgram(Me),this.program=void 0},this.name=f.shaderName,this.id=xW++,this.cacheKey=l,this.usedTimes=1,this.program=Me,this.vertexShader=O,this.fragmentShader=B,this}function zV(r,l,f){function w(ye){if(ye)ye.isTexture?Me=ye.encoding:ye.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),Me=ye.texture.encoding);else var Me=3e3;return Me}var E=[],O=f.isWebGL2,B=f.logarithmicDepthBuffer,Y=f.floatVertexTextures,K=f.precision,$=f.maxVertexUniforms,pe=f.vertexTextures,fe={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},xe="precision isWebGL2 supportsVertexTextures outputEncoding instancing map mapEncoding matcap matcapEncoding envMap envMapMode envMapEncoding envMapCubeUV lightMap lightMapEncoding aoMap emissiveMap emissiveMapEncoding bumpMap normalMap objectSpaceNormalMap tangentSpaceNormalMap clearcoatMap clearcoatRoughnessMap clearcoatNormalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors vertexTangents vertexUvs uvsVertexOnly fog useFog fogExp2 flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights numDirLightShadows numPointLightShadows numSpotLightShadows shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering sheen".split(" ");this.getParameters=function(ye,Me,Oe,it,xt,pt,Lt){var Ct=it.fog;it=ye.isMeshStandardMaterial?it.environment:null,it=ye.envMap||it;var Bt=fe[ye.type];if(Lt.isSkinnedMesh){var yt=Lt.skeleton.bones;if(Y)yt=1024;else{var Kt=Math.min(Math.floor(($-20)/4),yt.length);Kt<yt.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+yt.length+" bones. This GPU supports "+Kt+"."),yt=0):yt=Kt}}else yt=0;ye.precision!==null&&(K=f.getMaxPrecision(ye.precision),K!==ye.precision&&console.warn("THREE.WebGLProgram.getParameters:",ye.precision,"not supported, using",K,"instead.")),Bt?(Kt=Af[Bt],Kt={name:ye.type,uniforms:Y6.clone(Kt.uniforms),vertexShader:Kt.vertexShader,fragmentShader:Kt.fragmentShader}):Kt={name:ye.type,uniforms:ye.uniforms,vertexShader:ye.vertexShader,fragmentShader:ye.fragmentShader},ye.onBeforeCompile(Kt,r);var cr=r.getRenderTarget();return{isWebGL2:O,shaderID:Bt,shaderName:Kt.name,uniforms:Kt.uniforms,vertexShader:Kt.vertexShader,fragmentShader:Kt.fragmentShader,defines:ye.defines,isRawShaderMaterial:ye.isRawShaderMaterial,isShaderMaterial:ye.isShaderMaterial,precision:K,instancing:Lt.isInstancedMesh===!0,supportsVertexTextures:pe,outputEncoding:cr!==null?w(cr.texture):r.outputEncoding,map:!!ye.map,mapEncoding:w(ye.map),matcap:!!ye.matcap,matcapEncoding:w(ye.matcap),envMap:!!it,envMapMode:it&&it.mapping,envMapEncoding:w(it),envMapCubeUV:!!it&&(it.mapping===306||it.mapping===307),lightMap:!!ye.lightMap,lightMapEncoding:w(ye.lightMap),aoMap:!!ye.aoMap,emissiveMap:!!ye.emissiveMap,emissiveMapEncoding:w(ye.emissiveMap),bumpMap:!!ye.bumpMap,normalMap:!!ye.normalMap,objectSpaceNormalMap:ye.normalMapType===1,tangentSpaceNormalMap:ye.normalMapType===0,clearcoatMap:!!ye.clearcoatMap,clearcoatRoughnessMap:!!ye.clearcoatRoughnessMap,clearcoatNormalMap:!!ye.clearcoatNormalMap,displacementMap:!!ye.displacementMap,roughnessMap:!!ye.roughnessMap,metalnessMap:!!ye.metalnessMap,specularMap:!!ye.specularMap,alphaMap:!!ye.alphaMap,gradientMap:!!ye.gradientMap,sheen:!!ye.sheen,combine:ye.combine,vertexTangents:ye.normalMap&&ye.vertexTangents,vertexColors:ye.vertexColors,vertexUvs:!!ye.map||!!ye.bumpMap||!!ye.normalMap||!!ye.specularMap||!!ye.alphaMap||!!ye.emissiveMap||!!ye.roughnessMap||!!ye.metalnessMap||!!ye.clearcoatMap||!!ye.clearcoatRoughnessMap||!!ye.clearcoatNormalMap||!!ye.displacementMap,uvsVertexOnly:!(ye.map||ye.bumpMap||ye.normalMap||ye.specularMap||ye.alphaMap||ye.emissiveMap||ye.roughnessMap||ye.metalnessMap||ye.clearcoatNormalMap)&&!!ye.displacementMap,fog:!!Ct,useFog:ye.fog,fogExp2:Ct&&Ct.isFogExp2,flatShading:ye.flatShading,sizeAttenuation:ye.sizeAttenuation,logarithmicDepthBuffer:B,skinning:ye.skinning&&0<yt,maxBones:yt,useVertexTexture:Y,morphTargets:ye.morphTargets,morphNormals:ye.morphNormals,maxMorphTargets:r.maxMorphTargets,maxMorphNormals:r.maxMorphNormals,numDirLights:Me.directional.length,numPointLights:Me.point.length,numSpotLights:Me.spot.length,numRectAreaLights:Me.rectArea.length,numHemiLights:Me.hemi.length,numDirLightShadows:Me.directionalShadowMap.length,numPointLightShadows:Me.pointShadowMap.length,numSpotLightShadows:Me.spotShadowMap.length,numClippingPlanes:xt,numClipIntersection:pt,dithering:ye.dithering,shadowMapEnabled:r.shadowMap.enabled&&0<Oe.length,shadowMapType:r.shadowMap.type,toneMapping:ye.toneMapped?r.toneMapping:0,physicallyCorrectLights:r.physicallyCorrectLights,premultipliedAlpha:ye.premultipliedAlpha,alphaTest:ye.alphaTest,doubleSided:ye.side===2,flipSided:ye.side===1,depthPacking:ye.depthPacking!==void 0?ye.depthPacking:!1,index0AttributeName:ye.index0AttributeName,extensionDerivatives:ye.extensions&&ye.extensions.derivatives,extensionFragDepth:ye.extensions&&ye.extensions.fragDepth,extensionDrawBuffers:ye.extensions&&ye.extensions.drawBuffers,extensionShaderTextureLOD:ye.extensions&&ye.extensions.shaderTextureLOD,rendererExtensionFragDepth:O||l.get("EXT_frag_depth")!==null,rendererExtensionDrawBuffers:O||l.get("WEBGL_draw_buffers")!==null,rendererExtensionShaderTextureLod:O||l.get("EXT_shader_texture_lod")!==null,onBeforeCompile:ye.onBeforeCompile}},this.getProgramCacheKey=function(ye){var Me=[];if(ye.shaderID?Me.push(ye.shaderID):(Me.push(ye.fragmentShader),Me.push(ye.vertexShader)),ye.defines!==void 0)for(var Oe in ye.defines)Me.push(Oe),Me.push(ye.defines[Oe]);if(ye.isRawShaderMaterial===void 0){for(Oe=0;Oe<xe.length;Oe++)Me.push(ye[xe[Oe]]);Me.push(r.outputEncoding),Me.push(r.gammaFactor)}return Me.push(ye.onBeforeCompile.toString()),Me.join()},this.acquireProgram=function(ye,Me){for(var Oe,it=0,xt=E.length;it<xt;it++){var pt=E[it];if(pt.cacheKey===Me){Oe=pt,++Oe.usedTimes;break}}return Oe===void 0&&(Oe=new BV(r,Me,ye),E.push(Oe)),Oe},this.releaseProgram=function(ye){if(--ye.usedTimes===0){var Me=E.indexOf(ye);E[Me]=E[E.length-1],E.pop(),ye.destroy()}},this.programs=E}function UV(){var r=new co;return{get:function(l){var f=r.get(l);return f===void 0&&(f={},r.set(l,f)),f},remove:function(l){r.delete(l)},update:function(l,f,w){r.get(l)[f]=w},dispose:function(){r=new co}}}function kV(r,l){return r.groupOrder!==l.groupOrder?r.groupOrder-l.groupOrder:r.renderOrder!==l.renderOrder?r.renderOrder-l.renderOrder:r.program!==l.program?r.program.id-l.program.id:r.material.id!==l.material.id?r.material.id-l.material.id:r.z!==l.z?r.z-l.z:r.id-l.id}function HV(r,l){return r.groupOrder!==l.groupOrder?r.groupOrder-l.groupOrder:r.renderOrder!==l.renderOrder?r.renderOrder-l.renderOrder:r.z!==l.z?l.z-r.z:r.id-l.id}function c6(){function r(B,Y,K,$,pe,fe){var xe=l[f];return xe===void 0?(xe={id:B.id,object:B,geometry:Y,material:K,program:K.program||O,groupOrder:$,renderOrder:B.renderOrder,z:pe,group:fe},l[f]=xe):(xe.id=B.id,xe.object=B,xe.geometry=Y,xe.material=K,xe.program=K.program||O,xe.groupOrder=$,xe.renderOrder=B.renderOrder,xe.z=pe,xe.group=fe),f++,xe}var l=[],f=0,w=[],E=[],O={id:-1};return{opaque:w,transparent:E,init:function(){f=0,w.length=0,E.length=0},push:function(B,Y,K,$,pe,fe){B=r(B,Y,K,$,pe,fe),(K.transparent===!0?E:w).push(B)},unshift:function(B,Y,K,$,pe,fe){B=r(B,Y,K,$,pe,fe),(K.transparent===!0?E:w).unshift(B)},finish:function(){for(var B=f,Y=l.length;B<Y;B++){var K=l[B];if(K.id===null)break;K.id=null,K.object=null,K.geometry=null,K.material=null,K.program=null,K.group=null}},sort:function(B,Y){1<w.length&&w.sort(B||kV),1<E.length&&E.sort(Y||HV)}}}function jV(){function r(f){f=f.target,f.removeEventListener("dispose",r),l.delete(f)}var l=new co;return{get:function(f,w){var E=l.get(f);if(E===void 0){var O=new c6;l.set(f,new co),l.get(f).set(w,O),f.addEventListener("dispose",r)}else O=E.get(w),O===void 0&&(O=new c6,E.set(w,O));return O},dispose:function(){l=new co}}}function GV(){var r={};return{get:function(l){if(r[l.id]!==void 0)return r[l.id];switch(l.type){case"DirectionalLight":var f={direction:new I,color:new He};break;case"SpotLight":f={position:new I,direction:new I,color:new He,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":f={position:new I,color:new He,distance:0,decay:0};break;case"HemisphereLight":f={direction:new I,skyColor:new He,groundColor:new He};break;case"RectAreaLight":f={color:new He,position:new I,halfWidth:new I,halfHeight:new I}}return r[l.id]=f}}}function VV(){var r={};return{get:function(l){if(r[l.id]!==void 0)return r[l.id];switch(l.type){case"DirectionalLight":var f={shadowBias:0,shadowRadius:1,shadowMapSize:new v};break;case"SpotLight":f={shadowBias:0,shadowRadius:1,shadowMapSize:new v};break;case"PointLight":f={shadowBias:0,shadowRadius:1,shadowMapSize:new v,shadowCameraNear:1,shadowCameraFar:1e3}}return r[l.id]=f}}}function WV(r,l){return(l.castShadow?1:0)-(r.castShadow?1:0)}function XV(){for(var r=new GV,l=VV(),f={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},w=0;9>w;w++)f.probe.push(new I);var E=new I,O=new b,B=new b;return{setup:function(Y,K,$){for(var pe=0,fe=0,xe=0,ye=0;9>ye;ye++)f.probe[ye].set(0,0,0);var Me=K=0,Oe=0,it=0,xt=0,pt=0,Lt=0,Ct=0;$=$.matrixWorldInverse,Y.sort(WV),ye=0;for(var Bt=Y.length;ye<Bt;ye++){var yt=Y[ye],Kt=yt.color,cr=yt.intensity,zt=yt.distance,yr=yt.shadow&&yt.shadow.map?yt.shadow.map.texture:null;if(yt.isAmbientLight)pe+=Kt.r*cr,fe+=Kt.g*cr,xe+=Kt.b*cr;else if(yt.isLightProbe)for(yr=0;9>yr;yr++)f.probe[yr].addScaledVector(yt.sh.coefficients[yr],cr);else if(yt.isDirectionalLight){var ir=r.get(yt);ir.color.copy(yt.color).multiplyScalar(yt.intensity),ir.direction.setFromMatrixPosition(yt.matrixWorld),E.setFromMatrixPosition(yt.target.matrixWorld),ir.direction.sub(E),ir.direction.transformDirection($),yt.castShadow&&(cr=yt.shadow,Kt=l.get(yt),Kt.shadowBias=cr.bias,Kt.shadowRadius=cr.radius,Kt.shadowMapSize=cr.mapSize,f.directionalShadow[K]=Kt,f.directionalShadowMap[K]=yr,f.directionalShadowMatrix[K]=yt.shadow.matrix,pt++),f.directional[K]=ir,K++}else yt.isSpotLight?(ir=r.get(yt),ir.position.setFromMatrixPosition(yt.matrixWorld),ir.position.applyMatrix4($),ir.color.copy(Kt).multiplyScalar(cr),ir.distance=zt,ir.direction.setFromMatrixPosition(yt.matrixWorld),E.setFromMatrixPosition(yt.target.matrixWorld),ir.direction.sub(E),ir.direction.transformDirection($),ir.coneCos=Math.cos(yt.angle),ir.penumbraCos=Math.cos(yt.angle*(1-yt.penumbra)),ir.decay=yt.decay,yt.castShadow&&(cr=yt.shadow,Kt=l.get(yt),Kt.shadowBias=cr.bias,Kt.shadowRadius=cr.radius,Kt.shadowMapSize=cr.mapSize,f.spotShadow[Oe]=Kt,f.spotShadowMap[Oe]=yr,f.spotShadowMatrix[Oe]=yt.shadow.matrix,Ct++),f.spot[Oe]=ir,Oe++):yt.isRectAreaLight?(ir=r.get(yt),ir.color.copy(Kt).multiplyScalar(cr),ir.position.setFromMatrixPosition(yt.matrixWorld),ir.position.applyMatrix4($),B.identity(),O.copy(yt.matrixWorld),O.premultiply($),B.extractRotation(O),ir.halfWidth.set(.5*yt.width,0,0),ir.halfHeight.set(0,.5*yt.height,0),ir.halfWidth.applyMatrix4(B),ir.halfHeight.applyMatrix4(B),f.rectArea[it]=ir,it++):yt.isPointLight?(ir=r.get(yt),ir.position.setFromMatrixPosition(yt.matrixWorld),ir.position.applyMatrix4($),ir.color.copy(yt.color).multiplyScalar(yt.intensity),ir.distance=yt.distance,ir.decay=yt.decay,yt.castShadow&&(cr=yt.shadow,Kt=l.get(yt),Kt.shadowBias=cr.bias,Kt.shadowRadius=cr.radius,Kt.shadowMapSize=cr.mapSize,Kt.shadowCameraNear=cr.camera.near,Kt.shadowCameraFar=cr.camera.far,f.pointShadow[Me]=Kt,f.pointShadowMap[Me]=yr,f.pointShadowMatrix[Me]=yt.shadow.matrix,Lt++),f.point[Me]=ir,Me++):yt.isHemisphereLight&&(ir=r.get(yt),ir.direction.setFromMatrixPosition(yt.matrixWorld),ir.direction.transformDirection($),ir.direction.normalize(),ir.skyColor.copy(yt.color).multiplyScalar(cr),ir.groundColor.copy(yt.groundColor).multiplyScalar(cr),f.hemi[xt]=ir,xt++)}f.ambient[0]=pe,f.ambient[1]=fe,f.ambient[2]=xe,Y=f.hash,(Y.directionalLength!==K||Y.pointLength!==Me||Y.spotLength!==Oe||Y.rectAreaLength!==it||Y.hemiLength!==xt||Y.numDirectionalShadows!==pt||Y.numPointShadows!==Lt||Y.numSpotShadows!==Ct)&&(f.directional.length=K,f.spot.length=Oe,f.rectArea.length=it,f.point.length=Me,f.hemi.length=xt,f.directionalShadow.length=pt,f.directionalShadowMap.length=pt,f.pointShadow.length=Lt,f.pointShadowMap.length=Lt,f.spotShadow.length=Ct,f.spotShadowMap.length=Ct,f.directionalShadowMatrix.length=pt,f.pointShadowMatrix.length=Lt,f.spotShadowMatrix.length=Ct,Y.directionalLength=K,Y.pointLength=Me,Y.spotLength=Oe,Y.rectAreaLength=it,Y.hemiLength=xt,Y.numDirectionalShadows=pt,Y.numPointShadows=Lt,Y.numSpotShadows=Ct,f.version=AW++)},state:f}}function h6(){var r=new XV,l=[],f=[];return{init:function(){l.length=0,f.length=0},state:{lightsArray:l,shadowsArray:f,lights:r},setupLights:function(w){r.setup(l,f,w)},pushLight:function(w){l.push(w)},pushShadow:function(w){f.push(w)}}}function YV(){function r(f){f=f.target,f.removeEventListener("dispose",r),l.delete(f)}var l=new co;return{get:function(f,w){if(l.has(f)===!1){var E=new h6;l.set(f,new co),l.get(f).set(w,E),f.addEventListener("dispose",r)}else l.get(f).has(w)===!1?(E=new h6,l.get(f).set(w,E)):E=l.get(f).get(w);return E},dispose:function(){l=new co}}}function Qp(r){Et.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(r)}function $p(r){Et.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new I,this.nearDistance=1,this.farDistance=1e3,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(r)}function f6(r,l,f){function w(Ct,Bt,yt){yt=Ct<<0|Bt<<1|yt<<2;var Kt=fe[yt];return Kt===void 0&&(Kt=new Qp({depthPacking:3201,morphTargets:Ct,skinning:Bt}),fe[yt]=Kt),Kt}function E(Ct,Bt,yt){yt=Ct<<0|Bt<<1|yt<<2;var Kt=xe[yt];return Kt===void 0&&(Kt=new $p({morphTargets:Ct,skinning:Bt}),xe[yt]=Kt),Kt}function O(Ct,Bt,yt,Kt,cr,zt,yr){var ir=w,Jr=Ct.customDepthMaterial;return Kt.isPointLight===!0&&(ir=E,Jr=Ct.customDistanceMaterial),Jr===void 0?(Jr=!1,yt.morphTargets===!0&&(Jr=Bt.morphAttributes&&Bt.morphAttributes.position&&0<Bt.morphAttributes.position.length),Bt=!1,Ct.isSkinnedMesh===!0&&(yt.skinning===!0?Bt=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",Ct)),Ct=ir(Jr,Bt,Ct.isInstancedMesh===!0)):Ct=Jr,r.localClippingEnabled&&yt.clipShadows===!0&&yt.clippingPlanes.length!==0&&(Jr=Ct.uuid,ir=yt.uuid,Bt=ye[Jr],Bt===void 0&&(Bt={},ye[Jr]=Bt),Jr=Bt[ir],Jr===void 0&&(Jr=Ct.clone(),Bt[ir]=Jr),Ct=Jr),Ct.visible=yt.visible,Ct.wireframe=yt.wireframe,Ct.side=yr===3?yt.shadowSide!==null?yt.shadowSide:yt.side:yt.shadowSide!==null?yt.shadowSide:Me[yt.side],Ct.clipShadows=yt.clipShadows,Ct.clippingPlanes=yt.clippingPlanes,Ct.clipIntersection=yt.clipIntersection,Ct.wireframeLinewidth=yt.wireframeLinewidth,Ct.linewidth=yt.linewidth,Kt.isPointLight===!0&&Ct.isMeshDistanceMaterial===!0&&(Ct.referencePosition.setFromMatrixPosition(Kt.matrixWorld),Ct.nearDistance=cr,Ct.farDistance=zt),Ct}function B(Ct,Bt,yt,Kt,cr){if(Ct.visible!==!1){if(Ct.layers.test(Bt.layers)&&(Ct.isMesh||Ct.isLine||Ct.isPoints)&&(Ct.castShadow||Ct.receiveShadow&&cr===3)&&(!Ct.frustumCulled||Y.intersectsObject(Ct))){Ct.modelViewMatrix.multiplyMatrices(yt.matrixWorldInverse,Ct.matrixWorld);var zt=l.update(Ct),yr=Ct.material;if(Array.isArray(yr))for(var ir=zt.groups,Jr=0,Mn=ir.length;Jr<Mn;Jr++){var br=ir[Jr],vn=yr[br.materialIndex];vn&&vn.visible&&(vn=O(Ct,zt,vn,Kt,yt.near,yt.far,cr),r.renderBufferDirect(yt,null,zt,vn,Ct,br))}else yr.visible&&(vn=O(Ct,zt,yr,Kt,yt.near,yt.far,cr),r.renderBufferDirect(yt,null,zt,vn,Ct,null))}for(Ct=Ct.children,zt=0,yr=Ct.length;zt<yr;zt++)B(Ct[zt],Bt,yt,Kt,cr)}}var Y=new Nr,K=new v,$=new v,pe=new y,fe=[],xe=[],ye={},Me={0:1,1:0,2:2},Oe=new kt({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:.125},uniforms:{shadow_pass:{value:null},resolution:{value:new v},radius:{value:4}},vertexShader:`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragmentShader:`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
  float mean = 0.0;
  float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );
  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
    #ifdef HORIZONAL_PASS
      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
      mean += distribution.x;
      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
    #else
      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );
      mean += depth;
      squared_mean += depth * depth;
    #endif
  }
  mean = mean * HALF_SAMPLE_RATE;
  squared_mean = squared_mean * HALF_SAMPLE_RATE;
  float std_dev = sqrt( squared_mean - mean * mean );
  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`}),it=Oe.clone();it.defines.HORIZONAL_PASS=1;var xt=new Fe;xt.setAttribute("position",new Nt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var pt=new Qe(xt,Oe),Lt=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(Ct,Bt,yt){if(Lt.enabled!==!1&&(Lt.autoUpdate!==!1||Lt.needsUpdate!==!1)&&Ct.length!==0){var Kt=r.getRenderTarget(),cr=r.getActiveCubeFace(),zt=r.getActiveMipmapLevel(),yr=r.state;yr.setBlending(0),yr.buffers.color.setClear(1,1,1,1),yr.buffers.depth.setTest(!0),yr.setScissorTest(!1);for(var ir=0,Jr=Ct.length;ir<Jr;ir++){var Mn=Ct[ir],br=Mn.shadow;if(br===void 0)console.warn("THREE.WebGLShadowMap:",Mn,"has no shadow.");else{K.copy(br.mapSize);var vn=br.getFrameExtents();K.multiply(vn),$.copy(br.mapSize),(K.x>f||K.y>f)&&(K.x>f&&($.x=Math.floor(f/vn.x),K.x=$.x*vn.x,br.mapSize.x=$.x),K.y>f&&($.y=Math.floor(f/vn.y),K.y=$.y*vn.y,br.mapSize.y=$.y)),br.map!==null||br.isPointLightShadow||this.type!==3||(vn={minFilter:1006,magFilter:1006,format:1023},br.map=new T(K.x,K.y,vn),br.map.texture.name=Mn.name+".shadowMap",br.mapPass=new T(K.x,K.y,vn),br.camera.updateProjectionMatrix()),br.map===null&&(vn={minFilter:1003,magFilter:1003,format:1023},br.map=new T(K.x,K.y,vn),br.map.texture.name=Mn.name+".shadowMap",br.camera.updateProjectionMatrix()),r.setRenderTarget(br.map),r.clear(),vn=br.getViewportCount();for(var ni=0;ni<vn;ni++){var Hn=br.getViewport(ni);pe.set($.x*Hn.x,$.y*Hn.y,$.x*Hn.z,$.y*Hn.w),yr.viewport(pe),br.updateMatrices(Mn,ni),Y=br.getFrustum(),B(Bt,yt,br.camera,Mn,this.type)}br.isPointLightShadow||this.type!==3||(Mn=br,br=yt,vn=l.update(pt),Oe.uniforms.shadow_pass.value=Mn.map.texture,Oe.uniforms.resolution.value=Mn.mapSize,Oe.uniforms.radius.value=Mn.radius,r.setRenderTarget(Mn.mapPass),r.clear(),r.renderBufferDirect(br,null,vn,Oe,pt,null),it.uniforms.shadow_pass.value=Mn.mapPass.texture,it.uniforms.resolution.value=Mn.mapSize,it.uniforms.radius.value=Mn.radius,r.setRenderTarget(Mn.map),r.clear(),r.renderBufferDirect(br,null,vn,it,pt,null))}}Lt.needsUpdate=!1,r.setRenderTarget(Kt,cr,zt)}}}function ZV(r,l,f){function w(ut,Sr,Zr){var En=new Uint8Array(4),$r=r.createTexture();for(r.bindTexture(ut,$r),r.texParameteri(ut,10241,9728),r.texParameteri(ut,10240,9728),ut=0;ut<Zr;ut++)r.texImage2D(Sr+ut,0,6408,1,1,0,6408,5121,En);return $r}function E(ut,Sr){it[ut]=1,xt[ut]===0&&(r.enableVertexAttribArray(ut),xt[ut]=1),pt[ut]!==Sr&&((xe?r:l.get("ANGLE_instanced_arrays"))[xe?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](ut,Sr),pt[ut]=Sr)}function O(ut){Lt[ut]!==!0&&(r.enable(ut),Lt[ut]=!0)}function B(ut){Lt[ut]!==!1&&(r.disable(ut),Lt[ut]=!1)}function Y(ut,Sr,Zr,En,$r,zr,Ur,Wn){if(ut===0)Bt&&(B(3042),Bt=!1);else if(Bt||(O(3042),Bt=!0),ut!==5){if(ut!==yt||Wn!==Mn){if((Kt!==100||yr!==100)&&(r.blendEquation(32774),yr=Kt=100),Wn)switch(ut){case 1:r.blendFuncSeparate(1,771,1,771);break;case 2:r.blendFunc(1,1);break;case 3:r.blendFuncSeparate(0,0,769,771);break;case 4:r.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ut)}else switch(ut){case 1:r.blendFuncSeparate(770,771,1,771);break;case 2:r.blendFunc(770,1);break;case 3:r.blendFunc(0,769);break;case 4:r.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ut)}Jr=ir=zt=cr=null,yt=ut,Mn=Wn}}else $r=$r||Sr,zr=zr||Zr,Ur=Ur||En,(Sr!==Kt||$r!==yr)&&(r.blendEquationSeparate(jr[Sr],jr[$r]),Kt=Sr,yr=$r),(Zr!==cr||En!==zt||zr!==ir||Ur!==Jr)&&(r.blendFuncSeparate(tr[Zr],tr[En],tr[zr],tr[Ur]),cr=Zr,zt=En,ir=zr,Jr=Ur),yt=ut,Mn=null}function K(ut){br!==ut&&(ut?r.frontFace(2304):r.frontFace(2305),br=ut)}function $(ut){ut!==0?(O(2884),ut!==vn&&(ut===1?r.cullFace(1029):ut===2?r.cullFace(1028):r.cullFace(1032))):B(2884),vn=ut}function pe(ut,Sr,Zr){ut?(O(32823),(Hn!==Sr||Ci!==Zr)&&(r.polygonOffset(Sr,Zr),Hn=Sr,Ci=Zr)):B(32823)}function fe(ut){ut===void 0&&(ut=33984+si-1),go!==ut&&(r.activeTexture(ut),go=ut)}var xe=f.isWebGL2,ye=new function(){var ut=!1,Sr=new y,Zr=null,En=new y(0,0,0,0);return{setMask:function($r){Zr===$r||ut||(r.colorMask($r,$r,$r,$r),Zr=$r)},setLocked:function($r){ut=$r},setClear:function($r,zr,Ur,Wn,Vo){Vo===!0&&($r*=Wn,zr*=Wn,Ur*=Wn),Sr.set($r,zr,Ur,Wn),En.equals(Sr)===!1&&(r.clearColor($r,zr,Ur,Wn),En.copy(Sr))},reset:function(){ut=!1,Zr=null,En.set(-1,0,0,0)}}},Me=new function(){var ut=!1,Sr=null,Zr=null,En=null;return{setTest:function($r){$r?O(2929):B(2929)},setMask:function($r){Sr===$r||ut||(r.depthMask($r),Sr=$r)},setFunc:function($r){if(Zr!==$r){if($r)switch($r){case 0:r.depthFunc(512);break;case 1:r.depthFunc(519);break;case 2:r.depthFunc(513);break;case 3:r.depthFunc(515);break;case 4:r.depthFunc(514);break;case 5:r.depthFunc(518);break;case 6:r.depthFunc(516);break;case 7:r.depthFunc(517);break;default:r.depthFunc(515)}else r.depthFunc(515);Zr=$r}},setLocked:function($r){ut=$r},setClear:function($r){En!==$r&&(r.clearDepth($r),En=$r)},reset:function(){ut=!1,En=Zr=Sr=null}}},Oe=new function(){var ut=!1,Sr=null,Zr=null,En=null,$r=null,zr=null,Ur=null,Wn=null,Vo=null;return{setTest:function(Zn){ut||(Zn?O(2960):B(2960))},setMask:function(Zn){Sr===Zn||ut||(r.stencilMask(Zn),Sr=Zn)},setFunc:function(Zn,or,Xn){(Zr!==Zn||En!==or||$r!==Xn)&&(r.stencilFunc(Zn,or,Xn),Zr=Zn,En=or,$r=Xn)},setOp:function(Zn,or,Xn){(zr!==Zn||Ur!==or||Wn!==Xn)&&(r.stencilOp(Zn,or,Xn),zr=Zn,Ur=or,Wn=Xn)},setLocked:function(Zn){ut=Zn},setClear:function(Zn){Vo!==Zn&&(r.clearStencil(Zn),Vo=Zn)},reset:function(){ut=!1,Vo=Wn=Ur=zr=$r=En=Zr=Sr=null}}};f=r.getParameter(34921);var it=new Uint8Array(f),xt=new Uint8Array(f),pt=new Uint8Array(f),Lt={},Ct=null,Bt=null,yt=null,Kt=null,cr=null,zt=null,yr=null,ir=null,Jr=null,Mn=!1,br=null,vn=null,ni=null,Hn=null,Ci=null,si=r.getParameter(35661),to=!1;f=0,f=r.getParameter(7938),f.indexOf("WebGL")!==-1?(f=parseFloat(/^WebGL ([0-9])/.exec(f)[1]),to=1<=f):f.indexOf("OpenGL ES")!==-1&&(f=parseFloat(/^OpenGL ES ([0-9])/.exec(f)[1]),to=2<=f);var go=null,Ze={},st=new y,Vt=new y,Ar={};Ar[3553]=w(3553,3553,1),Ar[34067]=w(34067,34069,6),ye.setClear(0,0,0,1),Me.setClear(1),Oe.setClear(0),O(2929),Me.setFunc(3),K(!1),$(1),O(2884),Y(0);var jr={100:32774,101:32778,102:32779};xe?(jr[103]=32775,jr[104]=32776):(f=l.get("EXT_blend_minmax"),f!==null&&(jr[103]=f.MIN_EXT,jr[104]=f.MAX_EXT));var tr={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};return{buffers:{color:ye,depth:Me,stencil:Oe},initAttributes:function(){for(var ut=0,Sr=it.length;ut<Sr;ut++)it[ut]=0},enableAttribute:function(ut){E(ut,0)},enableAttributeAndDivisor:E,disableUnusedAttributes:function(){for(var ut=0,Sr=xt.length;ut!==Sr;++ut)xt[ut]!==it[ut]&&(r.disableVertexAttribArray(ut),xt[ut]=0)},vertexAttribPointer:function(ut,Sr,Zr,En,$r,zr){xe!==!0||Zr!==5124&&Zr!==5125?r.vertexAttribPointer(ut,Sr,Zr,En,$r,zr):r.vertexAttribIPointer(ut,Sr,Zr,En,$r,zr)},enable:O,disable:B,useProgram:function(ut){return Ct!==ut?(r.useProgram(ut),Ct=ut,!0):!1},setBlending:Y,setMaterial:function(ut,Sr){ut.side===2?B(2884):O(2884);var Zr=ut.side===1;Sr&&(Zr=!Zr),K(Zr),ut.blending===1&&ut.transparent===!1?Y(0):Y(ut.blending,ut.blendEquation,ut.blendSrc,ut.blendDst,ut.blendEquationAlpha,ut.blendSrcAlpha,ut.blendDstAlpha,ut.premultipliedAlpha),Me.setFunc(ut.depthFunc),Me.setTest(ut.depthTest),Me.setMask(ut.depthWrite),ye.setMask(ut.colorWrite),Sr=ut.stencilWrite,Oe.setTest(Sr),Sr&&(Oe.setMask(ut.stencilWriteMask),Oe.setFunc(ut.stencilFunc,ut.stencilRef,ut.stencilFuncMask),Oe.setOp(ut.stencilFail,ut.stencilZFail,ut.stencilZPass)),pe(ut.polygonOffset,ut.polygonOffsetFactor,ut.polygonOffsetUnits)},setFlipSided:K,setCullFace:$,setLineWidth:function(ut){ut!==ni&&(to&&r.lineWidth(ut),ni=ut)},setPolygonOffset:pe,setScissorTest:function(ut){ut?O(3089):B(3089)},activeTexture:fe,bindTexture:function(ut,Sr){go===null&&fe();var Zr=Ze[go];Zr===void 0&&(Zr={type:void 0,texture:void 0},Ze[go]=Zr),(Zr.type!==ut||Zr.texture!==Sr)&&(r.bindTexture(ut,Sr||Ar[ut]),Zr.type=ut,Zr.texture=Sr)},unbindTexture:function(){var ut=Ze[go];ut!==void 0&&ut.type!==void 0&&(r.bindTexture(ut.type,null),ut.type=void 0,ut.texture=void 0)},compressedTexImage2D:function(){try{r.compressedTexImage2D.apply(r,arguments)}catch(ut){console.error("THREE.WebGLState:",ut)}},texImage2D:function(){try{r.texImage2D.apply(r,arguments)}catch(ut){console.error("THREE.WebGLState:",ut)}},texImage3D:function(){try{r.texImage3D.apply(r,arguments)}catch(ut){console.error("THREE.WebGLState:",ut)}},scissor:function(ut){st.equals(ut)===!1&&(r.scissor(ut.x,ut.y,ut.z,ut.w),st.copy(ut))},viewport:function(ut){Vt.equals(ut)===!1&&(r.viewport(ut.x,ut.y,ut.z,ut.w),Vt.copy(ut))},reset:function(){for(var ut=0;ut<xt.length;ut++)xt[ut]===1&&(r.disableVertexAttribArray(ut),xt[ut]=0);Lt={},go=null,Ze={},vn=br=yt=Ct=null,ye.reset(),Me.reset(),Oe.reset()}}}function qV(r,l,f,w,E,O,B){function Y(Ze,st){return ni?new OffscreenCanvas(Ze,st):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function K(Ze,st,Vt,Ar){var jr=1;if((Ze.width>Ar||Ze.height>Ar)&&(jr=Ar/Math.max(Ze.width,Ze.height)),1>jr||st===!0){if(typeof HTMLImageElement<"u"&&Ze instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Ze instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Ze instanceof ImageBitmap)return Ar=st?ci.floorPowerOfTwo:Math.floor,st=Ar(jr*Ze.width),jr=Ar(jr*Ze.height),vn===void 0&&(vn=Y(st,jr)),Vt=Vt?Y(st,jr):vn,Vt.width=st,Vt.height=jr,Vt.getContext("2d").drawImage(Ze,0,0,st,jr),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ze.width+"x"+Ze.height+") to ("+st+"x"+jr+")."),Vt;"data"in Ze&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ze.width+"x"+Ze.height+").")}return Ze}function $(Ze){return ci.isPowerOfTwo(Ze.width)&&ci.isPowerOfTwo(Ze.height)}function pe(Ze,st){return Ze.generateMipmaps&&st&&Ze.minFilter!==1003&&Ze.minFilter!==1006}function fe(Ze,st,Vt,Ar){r.generateMipmap(Ze),w.get(st).__maxMipLevel=Math.log(Math.max(Vt,Ar))*Math.LOG2E}function xe(Ze,st,Vt){if(zt===!1)return st;if(Ze!==null){if(r[Ze]!==void 0)return r[Ze];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Ze+"'")}return Ze=st,st===6403&&(Vt===5126&&(Ze=33326),Vt===5131&&(Ze=33325),Vt===5121&&(Ze=33321)),st===6407&&(Vt===5126&&(Ze=34837),Vt===5131&&(Ze=34843),Vt===5121&&(Ze=32849)),st===6408&&(Vt===5126&&(Ze=34836),Vt===5131&&(Ze=34842),Vt===5121&&(Ze=32856)),Ze!==33325&&Ze!==33326&&Ze!==34842&&Ze!==34836||l.get("EXT_color_buffer_float"),Ze}function ye(Ze){return Ze===1003||Ze===1004||Ze===1005?9728:9729}function Me(Ze){Ze=Ze.target,Ze.removeEventListener("dispose",Me);var st=w.get(Ze);st.__webglInit!==void 0&&(r.deleteTexture(st.__webglTexture),w.remove(Ze)),Ze.isVideoTexture&&br.delete(Ze),B.memory.textures--}function Oe(Ze){Ze=Ze.target,Ze.removeEventListener("dispose",Oe);var st=w.get(Ze),Vt=w.get(Ze.texture);if(Ze){if(Vt.__webglTexture!==void 0&&r.deleteTexture(Vt.__webglTexture),Ze.depthTexture&&Ze.depthTexture.dispose(),Ze.isWebGLCubeRenderTarget)for(Vt=0;6>Vt;Vt++)r.deleteFramebuffer(st.__webglFramebuffer[Vt]),st.__webglDepthbuffer&&r.deleteRenderbuffer(st.__webglDepthbuffer[Vt]);else r.deleteFramebuffer(st.__webglFramebuffer),st.__webglDepthbuffer&&r.deleteRenderbuffer(st.__webglDepthbuffer),st.__webglMultisampledFramebuffer&&r.deleteFramebuffer(st.__webglMultisampledFramebuffer),st.__webglColorRenderbuffer&&r.deleteRenderbuffer(st.__webglColorRenderbuffer),st.__webglDepthRenderbuffer&&r.deleteRenderbuffer(st.__webglDepthRenderbuffer);w.remove(Ze.texture),w.remove(Ze)}B.memory.textures--}function it(Ze,st){var Vt=w.get(Ze);if(Ze.isVideoTexture){var Ar=B.render.frame;br.get(Ze)!==Ar&&(br.set(Ze,Ar),Ze.update())}if(0<Ze.version&&Vt.__version!==Ze.version)if(Ar=Ze.image,Ar===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(Ar.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Bt(Vt,Ze,st);return}f.activeTexture(33984+st),f.bindTexture(3553,Vt.__webglTexture)}function xt(Ze,st){if(Ze.image.length===6){var Vt=w.get(Ze);if(0<Ze.version&&Vt.__version!==Ze.version){Ct(Vt,Ze),f.activeTexture(33984+st),f.bindTexture(34067,Vt.__webglTexture),r.pixelStorei(37440,Ze.flipY);var Ar=Ze&&(Ze.isCompressedTexture||Ze.image[0].isCompressedTexture);st=Ze.image[0]&&Ze.image[0].isDataTexture;for(var jr=[],tr=0;6>tr;tr++)jr[tr]=Ar||st?st?Ze.image[tr].image:Ze.image[tr]:K(Ze.image[tr],!1,!0,ir);var ut=jr[0],Sr=$(ut)||zt,Zr=O.convert(Ze.format),En=O.convert(Ze.type),$r=xe(Ze.internalFormat,Zr,En);if(Lt(34067,Ze,Sr),Ar){for(tr=0;6>tr;tr++){var zr=jr[tr].mipmaps;for(Ar=0;Ar<zr.length;Ar++){var Ur=zr[Ar];Ze.format!==1023&&Ze.format!==1022?Zr!==null?f.compressedTexImage2D(34069+tr,Ar,$r,Ur.width,Ur.height,0,Ur.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):f.texImage2D(34069+tr,Ar,$r,Ur.width,Ur.height,0,Zr,En,Ur.data)}}Vt.__maxMipLevel=zr.length-1}else{for(zr=Ze.mipmaps,tr=0;6>tr;tr++)if(st)for(f.texImage2D(34069+tr,0,$r,jr[tr].width,jr[tr].height,0,Zr,En,jr[tr].data),Ar=0;Ar<zr.length;Ar++)Ur=zr[Ar],Ur=Ur.image[tr].image,f.texImage2D(34069+tr,Ar+1,$r,Ur.width,Ur.height,0,Zr,En,Ur.data);else for(f.texImage2D(34069+tr,0,$r,Zr,En,jr[tr]),Ar=0;Ar<zr.length;Ar++)Ur=zr[Ar],f.texImage2D(34069+tr,Ar+1,$r,Zr,En,Ur.image[tr]);Vt.__maxMipLevel=zr.length}pe(Ze,Sr)&&fe(34067,Ze,ut.width,ut.height),Vt.__version=Ze.version,Ze.onUpdate&&Ze.onUpdate(Ze)}else f.activeTexture(33984+st),f.bindTexture(34067,Vt.__webglTexture)}}function pt(Ze,st){f.activeTexture(33984+st),f.bindTexture(34067,w.get(Ze).__webglTexture)}function Lt(Ze,st,Vt){Vt?(r.texParameteri(Ze,10242,Ci[st.wrapS]),r.texParameteri(Ze,10243,Ci[st.wrapT]),Ze!==32879&&Ze!==35866||r.texParameteri(Ze,32882,Ci[st.wrapR]),r.texParameteri(Ze,10240,si[st.magFilter]),r.texParameteri(Ze,10241,si[st.minFilter])):(r.texParameteri(Ze,10242,33071),r.texParameteri(Ze,10243,33071),Ze!==32879&&Ze!==35866||r.texParameteri(Ze,32882,33071),st.wrapS===1001&&st.wrapT===1001||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),r.texParameteri(Ze,10240,ye(st.magFilter)),r.texParameteri(Ze,10241,ye(st.minFilter)),st.minFilter!==1003&&st.minFilter!==1006&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!(Vt=l.get("EXT_texture_filter_anisotropic"))||st.type===1015&&l.get("OES_texture_float_linear")===null||st.type===1016&&(zt||l.get("OES_texture_half_float_linear"))===null||!(1<st.anisotropy||w.get(st).__currentAnisotropy)||(r.texParameterf(Ze,Vt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(st.anisotropy,E.getMaxAnisotropy())),w.get(st).__currentAnisotropy=st.anisotropy)}function Ct(Ze,st){Ze.__webglInit===void 0&&(Ze.__webglInit=!0,st.addEventListener("dispose",Me),Ze.__webglTexture=r.createTexture(),B.memory.textures++)}function Bt(Ze,st,Vt){var Ar=3553;st.isDataTexture2DArray&&(Ar=35866),st.isDataTexture3D&&(Ar=32879),Ct(Ze,st),f.activeTexture(33984+Vt),f.bindTexture(Ar,Ze.__webglTexture),r.pixelStorei(37440,st.flipY),r.pixelStorei(37441,st.premultiplyAlpha),r.pixelStorei(3317,st.unpackAlignment),Vt=zt?!1:st.wrapS!==1001||st.wrapT!==1001||st.minFilter!==1003&&st.minFilter!==1006,Vt=Vt&&$(st.image)===!1,Vt=K(st.image,Vt,!1,Jr);var jr=$(Vt)||zt,tr=O.convert(st.format),ut=O.convert(st.type),Sr=xe(st.internalFormat,tr,ut);Lt(Ar,st,jr);var Zr=st.mipmaps;if(st.isDepthTexture)Sr=6402,zt?Sr=st.type===1015?36012:st.type===1014?33190:st.type===1020?35056:33189:st.type===1015&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),st.format===1026&&Sr===6402&&st.type!==1012&&st.type!==1014&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),st.type=1012,ut=O.convert(st.type)),st.format===1027&&Sr===6402&&(Sr=34041,st.type!==1020&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),st.type=1020,ut=O.convert(st.type))),f.texImage2D(3553,0,Sr,Vt.width,Vt.height,0,tr,ut,null);else if(st.isDataTexture)if(0<Zr.length&&jr){for(var En=0,$r=Zr.length;En<$r;En++){var zr=Zr[En];f.texImage2D(3553,En,Sr,zr.width,zr.height,0,tr,ut,zr.data)}st.generateMipmaps=!1,Ze.__maxMipLevel=Zr.length-1}else f.texImage2D(3553,0,Sr,Vt.width,Vt.height,0,tr,ut,Vt.data),Ze.__maxMipLevel=0;else if(st.isCompressedTexture){for(En=0,$r=Zr.length;En<$r;En++)zr=Zr[En],st.format!==1023&&st.format!==1022?tr!==null?f.compressedTexImage2D(3553,En,Sr,zr.width,zr.height,0,zr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):f.texImage2D(3553,En,Sr,zr.width,zr.height,0,tr,ut,zr.data);Ze.__maxMipLevel=Zr.length-1}else if(st.isDataTexture2DArray)f.texImage3D(35866,0,Sr,Vt.width,Vt.height,Vt.depth,0,tr,ut,Vt.data),Ze.__maxMipLevel=0;else if(st.isDataTexture3D)f.texImage3D(32879,0,Sr,Vt.width,Vt.height,Vt.depth,0,tr,ut,Vt.data),Ze.__maxMipLevel=0;else if(0<Zr.length&&jr){for(En=0,$r=Zr.length;En<$r;En++)zr=Zr[En],f.texImage2D(3553,En,Sr,tr,ut,zr);st.generateMipmaps=!1,Ze.__maxMipLevel=Zr.length-1}else f.texImage2D(3553,0,Sr,tr,ut,Vt),Ze.__maxMipLevel=0;pe(st,jr)&&fe(Ar,st,Vt.width,Vt.height),Ze.__version=st.version,st.onUpdate&&st.onUpdate(st)}function yt(Ze,st,Vt,Ar){var jr=O.convert(st.texture.format),tr=O.convert(st.texture.type),ut=xe(st.texture.internalFormat,jr,tr);f.texImage2D(Ar,0,ut,st.width,st.height,0,jr,tr,null),r.bindFramebuffer(36160,Ze),r.framebufferTexture2D(36160,Vt,Ar,w.get(st.texture).__webglTexture,0),r.bindFramebuffer(36160,null)}function Kt(Ze,st,Vt){if(r.bindRenderbuffer(36161,Ze),st.depthBuffer&&!st.stencilBuffer){var Ar=33189;Vt?((Vt=st.depthTexture)&&Vt.isDepthTexture&&(Vt.type===1015?Ar=36012:Vt.type===1014&&(Ar=33190)),Vt=cr(st),r.renderbufferStorageMultisample(36161,Vt,Ar,st.width,st.height)):r.renderbufferStorage(36161,Ar,st.width,st.height),r.framebufferRenderbuffer(36160,36096,36161,Ze)}else st.depthBuffer&&st.stencilBuffer?(Vt?(Vt=cr(st),r.renderbufferStorageMultisample(36161,Vt,35056,st.width,st.height)):r.renderbufferStorage(36161,34041,st.width,st.height),r.framebufferRenderbuffer(36160,33306,36161,Ze)):(Ze=O.convert(st.texture.format),Ar=O.convert(st.texture.type),Ar=xe(st.texture.internalFormat,Ze,Ar),Vt?(Vt=cr(st),r.renderbufferStorageMultisample(36161,Vt,Ar,st.width,st.height)):r.renderbufferStorage(36161,Ar,st.width,st.height));r.bindRenderbuffer(36161,null)}function cr(Ze){return zt&&Ze.isWebGLMultisampleRenderTarget?Math.min(Mn,Ze.samples):0}var zt=E.isWebGL2,yr=E.maxTextures,ir=E.maxCubemapSize,Jr=E.maxTextureSize,Mn=E.maxSamples,br=new co,vn,ni=!1;try{ni=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}var Hn=0,Ci={1e3:10497,1001:33071,1002:33648},si={1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987},to=!1,go=!1;this.allocateTextureUnit=function(){var Ze=Hn;return Ze>=yr&&console.warn("THREE.WebGLTextures: Trying to use "+Ze+" texture units while this GPU supports only "+yr),Hn+=1,Ze},this.resetTextureUnits=function(){Hn=0},this.setTexture2D=it,this.setTexture2DArray=function(Ze,st){var Vt=w.get(Ze);0<Ze.version&&Vt.__version!==Ze.version?Bt(Vt,Ze,st):(f.activeTexture(33984+st),f.bindTexture(35866,Vt.__webglTexture))},this.setTexture3D=function(Ze,st){var Vt=w.get(Ze);0<Ze.version&&Vt.__version!==Ze.version?Bt(Vt,Ze,st):(f.activeTexture(33984+st),f.bindTexture(32879,Vt.__webglTexture))},this.setTextureCube=xt,this.setTextureCubeDynamic=pt,this.setupRenderTarget=function(Ze){var st=w.get(Ze),Vt=w.get(Ze.texture);Ze.addEventListener("dispose",Oe),Vt.__webglTexture=r.createTexture(),B.memory.textures++;var Ar=Ze.isWebGLCubeRenderTarget===!0,jr=Ze.isWebGLMultisampleRenderTarget===!0,tr=$(Ze)||zt;if(!zt||Ze.texture.format!==1022||Ze.texture.type!==1015&&Ze.texture.type!==1016||(Ze.texture.format=1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Ar)for(st.__webglFramebuffer=[],jr=0;6>jr;jr++)st.__webglFramebuffer[jr]=r.createFramebuffer();else if(st.__webglFramebuffer=r.createFramebuffer(),jr)if(zt){st.__webglMultisampledFramebuffer=r.createFramebuffer(),st.__webglColorRenderbuffer=r.createRenderbuffer(),r.bindRenderbuffer(36161,st.__webglColorRenderbuffer),jr=O.convert(Ze.texture.format);var ut=O.convert(Ze.texture.type);jr=xe(Ze.texture.internalFormat,jr,ut),ut=cr(Ze),r.renderbufferStorageMultisample(36161,ut,jr,Ze.width,Ze.height),r.bindFramebuffer(36160,st.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(36160,36064,36161,st.__webglColorRenderbuffer),r.bindRenderbuffer(36161,null),Ze.depthBuffer&&(st.__webglDepthRenderbuffer=r.createRenderbuffer(),Kt(st.__webglDepthRenderbuffer,Ze,!0)),r.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Ar){for(f.bindTexture(34067,Vt.__webglTexture),Lt(34067,Ze.texture,tr),jr=0;6>jr;jr++)yt(st.__webglFramebuffer[jr],Ze,36064,34069+jr);pe(Ze.texture,tr)&&fe(34067,Ze.texture,Ze.width,Ze.height),f.bindTexture(34067,null)}else f.bindTexture(3553,Vt.__webglTexture),Lt(3553,Ze.texture,tr),yt(st.__webglFramebuffer,Ze,36064,3553),pe(Ze.texture,tr)&&fe(3553,Ze.texture,Ze.width,Ze.height),f.bindTexture(3553,null);if(Ze.depthBuffer){if(st=w.get(Ze),Vt=Ze.isWebGLCubeRenderTarget===!0,Ze.depthTexture){if(Vt)throw Error("target.depthTexture not supported in Cube render targets");if(Ze&&Ze.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(36160,st.__webglFramebuffer),!Ze.depthTexture||!Ze.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(w.get(Ze.depthTexture).__webglTexture&&Ze.depthTexture.image.width===Ze.width&&Ze.depthTexture.image.height===Ze.height||(Ze.depthTexture.image.width=Ze.width,Ze.depthTexture.image.height=Ze.height,Ze.depthTexture.needsUpdate=!0),it(Ze.depthTexture,0),st=w.get(Ze.depthTexture).__webglTexture,Ze.depthTexture.format===1026)r.framebufferTexture2D(36160,36096,3553,st,0);else if(Ze.depthTexture.format===1027)r.framebufferTexture2D(36160,33306,3553,st,0);else throw Error("Unknown depthTexture format")}else if(Vt)for(st.__webglDepthbuffer=[],Vt=0;6>Vt;Vt++)r.bindFramebuffer(36160,st.__webglFramebuffer[Vt]),st.__webglDepthbuffer[Vt]=r.createRenderbuffer(),Kt(st.__webglDepthbuffer[Vt],Ze,!1);else r.bindFramebuffer(36160,st.__webglFramebuffer),st.__webglDepthbuffer=r.createRenderbuffer(),Kt(st.__webglDepthbuffer,Ze,!1);r.bindFramebuffer(36160,null)}},this.updateRenderTargetMipmap=function(Ze){var st=Ze.texture,Vt=$(Ze)||zt;if(pe(st,Vt)){Vt=Ze.isWebGLCubeRenderTarget?34067:3553;var Ar=w.get(st).__webglTexture;f.bindTexture(Vt,Ar),fe(Vt,st,Ze.width,Ze.height),f.bindTexture(Vt,null)}},this.updateMultisampleRenderTarget=function(Ze){if(Ze.isWebGLMultisampleRenderTarget)if(zt){var st=w.get(Ze);r.bindFramebuffer(36008,st.__webglMultisampledFramebuffer),r.bindFramebuffer(36009,st.__webglFramebuffer);var Vt=Ze.width,Ar=Ze.height,jr=16384;Ze.depthBuffer&&(jr|=256),Ze.stencilBuffer&&(jr|=1024),r.blitFramebuffer(0,0,Vt,Ar,0,0,Vt,Ar,jr,9728),r.bindFramebuffer(36160,st.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(Ze,st){Ze&&Ze.isWebGLRenderTarget&&(to===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),to=!0),Ze=Ze.texture),it(Ze,st)},this.safeSetTextureCube=function(Ze,st){Ze&&Ze.isWebGLCubeRenderTarget&&(go===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),go=!0),Ze=Ze.texture),Ze&&Ze.isCubeTexture||Array.isArray(Ze.image)&&Ze.image.length===6?xt(Ze,st):pt(Ze,st)}}function d6(r,l,f){var w=f.isWebGL2;return{convert:function(E){if(E===1009)return 5121;if(E===1017)return 32819;if(E===1018)return 32820;if(E===1019)return 33635;if(E===1010)return 5120;if(E===1011)return 5122;if(E===1012)return 5123;if(E===1013)return 5124;if(E===1014)return 5125;if(E===1015)return 5126;if(E===1016){if(w)return 5131;var O=l.get("OES_texture_half_float");return O!==null?O.HALF_FLOAT_OES:null}if(E===1021)return 6406;if(E===1022)return 6407;if(E===1023)return 6408;if(E===1024)return 6409;if(E===1025)return 6410;if(E===1026)return 6402;if(E===1027)return 34041;if(E===1028)return 6403;if(E===1029)return 36244;if(E===1030)return 33319;if(E===1031)return 33320;if(E===1032)return 36248;if(E===1033)return 36249;if(E===33776||E===33777||E===33778||E===33779)if(O=l.get("WEBGL_compressed_texture_s3tc"),O!==null){if(E===33776)return O.COMPRESSED_RGB_S3TC_DXT1_EXT;if(E===33777)return O.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(E===33778)return O.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(E===33779)return O.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(E===35840||E===35841||E===35842||E===35843)if(O=l.get("WEBGL_compressed_texture_pvrtc"),O!==null){if(E===35840)return O.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(E===35841)return O.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(E===35842)return O.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(E===35843)return O.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(E===36196)return O=l.get("WEBGL_compressed_texture_etc1"),O!==null?O.COMPRESSED_RGB_ETC1_WEBGL:null;if((E===37492||E===37496)&&(O=l.get("WEBGL_compressed_texture_etc"),O!==null)){if(E===37492)return O.COMPRESSED_RGB8_ETC2;if(E===37496)return O.COMPRESSED_RGBA8_ETC2_EAC}if(E===37808||E===37809||E===37810||E===37811||E===37812||E===37813||E===37814||E===37815||E===37816||E===37817||E===37818||E===37819||E===37820||E===37821||E===37840||E===37841||E===37842||E===37843||E===37844||E===37845||E===37846||E===37847||E===37848||E===37849||E===37850||E===37851||E===37852||E===37853)return O=l.get("WEBGL_compressed_texture_astc"),O!==null?E:null;if(E===36492)return O=l.get("EXT_texture_compression_bptc"),O!==null?E:null;if(E===1020)return w?34042:(O=l.get("WEBGL_depth_texture"),O!==null?O.UNSIGNED_INT_24_8_WEBGL:null)}}}function gM(r){Jt.call(this),this.cameras=r||[]}function xy(){G.call(this),this.type="Group"}function vM(){this._grip=this._targetRay=null}function p6(r,l){function f(zt){var yr=Me.get(zt.inputSource);yr&&yr.dispatchEvent({type:zt.type})}function w(){Me.forEach(function(zt,yr){zt.disconnect(yr)}),Me.clear(),r.setFramebuffer(null),r.setRenderTarget(r.getRenderTarget()),cr.stop(),Y.isPresenting=!1,Y.dispatchEvent({type:"sessionend"})}function E(zt){pe=zt,cr.setContext(K),cr.start(),Y.isPresenting=!0,Y.dispatchEvent({type:"sessionstart"})}function O(zt){for(var yr=K.inputSources,ir=0;ir<ye.length;ir++)Me.set(yr[ir],ye[ir]);for(ir=0;ir<zt.removed.length;ir++){yr=zt.removed[ir];var Jr=Me.get(yr);Jr&&(Jr.dispatchEvent({type:"disconnected",data:yr}),Me.delete(yr))}for(ir=0;ir<zt.added.length;ir++)yr=zt.added[ir],(Jr=Me.get(yr))&&Jr.dispatchEvent({type:"connected",data:yr})}function B(zt,yr){yr===null?zt.matrixWorld.copy(zt.matrix):zt.matrixWorld.multiplyMatrices(yr.matrixWorld,zt.matrix),zt.matrixWorldInverse.getInverse(zt.matrixWorld)}var Y=this,K=null,$=1,pe=null,fe="local-floor",xe=null,ye=[],Me=new B2,Oe=new Jt;Oe.layers.enable(1),Oe.viewport=new y;var it=new Jt;it.layers.enable(2),it.viewport=new y;var xt=[Oe,it],pt=new gM;pt.layers.enable(1),pt.layers.enable(2);var Lt=null,Ct=null;this.isPresenting=this.enabled=!1,this.getController=function(zt){var yr=ye[zt];return yr===void 0&&(yr=new vM,ye[zt]=yr),yr.getTargetRaySpace()},this.getControllerGrip=function(zt){var yr=ye[zt];return yr===void 0&&(yr=new vM,ye[zt]=yr),yr.getGripSpace()},this.setFramebufferScaleFactor=function(zt){$=zt,Y.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(zt){fe=zt,Y.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return pe},this.getSession=function(){return K},this.setSession=function(zt){K=zt,K!==null&&(K.addEventListener("select",f),K.addEventListener("selectstart",f),K.addEventListener("selectend",f),K.addEventListener("squeeze",f),K.addEventListener("squeezestart",f),K.addEventListener("squeezeend",f),K.addEventListener("end",w),zt=l.getContextAttributes(),zt.xrCompatible!==!0&&l.makeXRCompatible(),zt=new XRWebGLLayer(K,l,{antialias:zt.antialias,alpha:zt.alpha,depth:zt.depth,stencil:zt.stencil,framebufferScaleFactor:$}),K.updateRenderState({baseLayer:zt}),K.requestReferenceSpace(fe).then(E),K.addEventListener("inputsourceschange",O))};var Bt=new I,yt=new I;this.getCamera=function(zt){pt.near=it.near=Oe.near=zt.near,pt.far=it.far=Oe.far=zt.far,(Lt!==pt.near||Ct!==pt.far)&&(K.updateRenderState({depthNear:pt.near,depthFar:pt.far}),Lt=pt.near,Ct=pt.far);var yr=zt.parent,ir=pt.cameras;B(pt,yr);for(var Jr=0;Jr<ir.length;Jr++)B(ir[Jr],yr);for(zt.matrixWorld.copy(pt.matrixWorld),zt=zt.children,Jr=0,yr=zt.length;Jr<yr;Jr++)zt[Jr].updateMatrixWorld(!0);if(ir.length===2){Bt.setFromMatrixPosition(Oe.matrixWorld),yt.setFromMatrixPosition(it.matrixWorld),ir=Bt.distanceTo(yt);var Mn=Oe.projectionMatrix.elements,br=it.projectionMatrix.elements,vn=Mn[14]/(Mn[10]-1);Jr=Mn[14]/(Mn[10]+1),zt=(Mn[9]+1)/Mn[5],yr=(Mn[9]-1)/Mn[5];var ni=(Mn[8]-1)/Mn[0],Hn=(br[8]+1)/br[0];br=vn*ni,Mn=vn*Hn,Hn=ir/(-ni+Hn),ni=Hn*-ni,Oe.matrixWorld.decompose(pt.position,pt.quaternion,pt.scale),pt.translateX(ni),pt.translateZ(Hn),pt.matrixWorld.compose(pt.position,pt.quaternion,pt.scale),pt.matrixWorldInverse.getInverse(pt.matrixWorld),vn+=Hn,Hn=Jr+Hn,pt.projectionMatrix.makePerspective(br-ni,Mn+(ir-ni),zt*Jr/Hn*vn,yr*Jr/Hn*vn,vn,Hn)}else pt.projectionMatrix.copy(Oe.projectionMatrix);return pt};var Kt=null,cr=new Ln;cr.setAnimationLoop(function(zt,yr){if(xe=yr.getViewerPose(pe),xe!==null){var ir=xe.views,Jr=K.renderState.baseLayer;r.setFramebuffer(Jr.framebuffer);var Mn=!1;ir.length!==pt.cameras.length&&(pt.cameras.length=0,Mn=!0);for(var br=0;br<ir.length;br++){var vn=ir[br],ni=Jr.getViewport(vn),Hn=xt[br];Hn.matrix.fromArray(vn.transform.matrix),Hn.projectionMatrix.fromArray(vn.projectionMatrix),Hn.viewport.set(ni.x,ni.y,ni.width,ni.height),br===0&&pt.matrix.copy(Hn.matrix),Mn===!0&&pt.cameras.push(Hn)}}for(ir=K.inputSources,br=0;br<ye.length;br++)ye[br].update(ir[br],yr,pe);Kt&&Kt(zt,yr)}),this.setAnimationLoop=function(zt){Kt=zt},this.dispose=function(){}}function KV(r){function l(w,E,O){if(w.opacity.value=E.opacity,E.color&&w.diffuse.value.copy(E.color),E.emissive&&w.emissive.value.copy(E.emissive).multiplyScalar(E.emissiveIntensity),E.map&&(w.map.value=E.map),E.alphaMap&&(w.alphaMap.value=E.alphaMap),E.specularMap&&(w.specularMap.value=E.specularMap),(O=E.envMap||O)&&(w.envMap.value=O,w.flipEnvMap.value=O.isCubeTexture?-1:1,w.reflectivity.value=E.reflectivity,w.refractionRatio.value=E.refractionRatio,w.maxMipLevel.value=r.get(O).__maxMipLevel),E.lightMap&&(w.lightMap.value=E.lightMap,w.lightMapIntensity.value=E.lightMapIntensity),E.aoMap&&(w.aoMap.value=E.aoMap,w.aoMapIntensity.value=E.aoMapIntensity),E.map)var B=E.map;else E.specularMap?B=E.specularMap:E.displacementMap?B=E.displacementMap:E.normalMap?B=E.normalMap:E.bumpMap?B=E.bumpMap:E.roughnessMap?B=E.roughnessMap:E.metalnessMap?B=E.metalnessMap:E.alphaMap?B=E.alphaMap:E.emissiveMap&&(B=E.emissiveMap);if(B!==void 0&&(B.isWebGLRenderTarget&&(B=B.texture),B.matrixAutoUpdate===!0&&B.updateMatrix(),w.uvTransform.value.copy(B.matrix)),E.aoMap)var Y=E.aoMap;else E.lightMap&&(Y=E.lightMap);Y!==void 0&&(Y.isWebGLRenderTarget&&(Y=Y.texture),Y.matrixAutoUpdate===!0&&Y.updateMatrix(),w.uv2Transform.value.copy(Y.matrix))}function f(w,E,O){w.roughness.value=E.roughness,w.metalness.value=E.metalness,E.roughnessMap&&(w.roughnessMap.value=E.roughnessMap),E.metalnessMap&&(w.metalnessMap.value=E.metalnessMap),E.emissiveMap&&(w.emissiveMap.value=E.emissiveMap),E.bumpMap&&(w.bumpMap.value=E.bumpMap,w.bumpScale.value=E.bumpScale,E.side===1&&(w.bumpScale.value*=-1)),E.normalMap&&(w.normalMap.value=E.normalMap,w.normalScale.value.copy(E.normalScale),E.side===1&&w.normalScale.value.negate()),E.displacementMap&&(w.displacementMap.value=E.displacementMap,w.displacementScale.value=E.displacementScale,w.displacementBias.value=E.displacementBias),(E.envMap||O)&&(w.envMapIntensity.value=E.envMapIntensity)}return{refreshFogUniforms:function(w,E){w.fogColor.value.copy(E.color),E.isFog?(w.fogNear.value=E.near,w.fogFar.value=E.far):E.isFogExp2&&(w.fogDensity.value=E.density)},refreshMaterialUniforms:function(w,E,O,B,Y){if(E.isMeshBasicMaterial)l(w,E);else if(E.isMeshLambertMaterial)l(w,E),E.emissiveMap&&(w.emissiveMap.value=E.emissiveMap);else if(E.isMeshToonMaterial)l(w,E),w.specular.value.copy(E.specular),w.shininess.value=Math.max(E.shininess,1e-4),E.gradientMap&&(w.gradientMap.value=E.gradientMap),E.emissiveMap&&(w.emissiveMap.value=E.emissiveMap),E.bumpMap&&(w.bumpMap.value=E.bumpMap,w.bumpScale.value=E.bumpScale,E.side===1&&(w.bumpScale.value*=-1)),E.normalMap&&(w.normalMap.value=E.normalMap,w.normalScale.value.copy(E.normalScale),E.side===1&&w.normalScale.value.negate()),E.displacementMap&&(w.displacementMap.value=E.displacementMap,w.displacementScale.value=E.displacementScale,w.displacementBias.value=E.displacementBias);else if(E.isMeshPhongMaterial)l(w,E),w.specular.value.copy(E.specular),w.shininess.value=Math.max(E.shininess,1e-4),E.emissiveMap&&(w.emissiveMap.value=E.emissiveMap),E.bumpMap&&(w.bumpMap.value=E.bumpMap,w.bumpScale.value=E.bumpScale,E.side===1&&(w.bumpScale.value*=-1)),E.normalMap&&(w.normalMap.value=E.normalMap,w.normalScale.value.copy(E.normalScale),E.side===1&&w.normalScale.value.negate()),E.displacementMap&&(w.displacementMap.value=E.displacementMap,w.displacementScale.value=E.displacementScale,w.displacementBias.value=E.displacementBias);else if(E.isMeshStandardMaterial)l(w,E,O),E.isMeshPhysicalMaterial?(f(w,E,O),w.reflectivity.value=E.reflectivity,w.clearcoat.value=E.clearcoat,w.clearcoatRoughness.value=E.clearcoatRoughness,E.sheen&&w.sheen.value.copy(E.sheen),E.clearcoatMap&&(w.clearcoatMap.value=E.clearcoatMap),E.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=E.clearcoatRoughnessMap),E.clearcoatNormalMap&&(w.clearcoatNormalScale.value.copy(E.clearcoatNormalScale),w.clearcoatNormalMap.value=E.clearcoatNormalMap,E.side===1&&w.clearcoatNormalScale.value.negate()),w.transparency.value=E.transparency):f(w,E,O);else if(E.isMeshMatcapMaterial)l(w,E),E.matcap&&(w.matcap.value=E.matcap),E.bumpMap&&(w.bumpMap.value=E.bumpMap,w.bumpScale.value=E.bumpScale,E.side===1&&(w.bumpScale.value*=-1)),E.normalMap&&(w.normalMap.value=E.normalMap,w.normalScale.value.copy(E.normalScale),E.side===1&&w.normalScale.value.negate()),E.displacementMap&&(w.displacementMap.value=E.displacementMap,w.displacementScale.value=E.displacementScale,w.displacementBias.value=E.displacementBias);else if(E.isMeshDepthMaterial)l(w,E),E.displacementMap&&(w.displacementMap.value=E.displacementMap,w.displacementScale.value=E.displacementScale,w.displacementBias.value=E.displacementBias);else if(E.isMeshDistanceMaterial)l(w,E),E.displacementMap&&(w.displacementMap.value=E.displacementMap,w.displacementScale.value=E.displacementScale,w.displacementBias.value=E.displacementBias),w.referencePosition.value.copy(E.referencePosition),w.nearDistance.value=E.nearDistance,w.farDistance.value=E.farDistance;else if(E.isMeshNormalMaterial)l(w,E),E.bumpMap&&(w.bumpMap.value=E.bumpMap,w.bumpScale.value=E.bumpScale,E.side===1&&(w.bumpScale.value*=-1)),E.normalMap&&(w.normalMap.value=E.normalMap,w.normalScale.value.copy(E.normalScale),E.side===1&&w.normalScale.value.negate()),E.displacementMap&&(w.displacementMap.value=E.displacementMap,w.displacementScale.value=E.displacementScale,w.displacementBias.value=E.displacementBias);else if(E.isLineBasicMaterial)w.diffuse.value.copy(E.color),w.opacity.value=E.opacity,E.isLineDashedMaterial&&(w.dashSize.value=E.dashSize,w.totalSize.value=E.dashSize+E.gapSize,w.scale.value=E.scale);else if(E.isPointsMaterial){if(w.diffuse.value.copy(E.color),w.opacity.value=E.opacity,w.size.value=E.size*B,w.scale.value=.5*Y,E.map&&(w.map.value=E.map),E.alphaMap&&(w.alphaMap.value=E.alphaMap),E.map)var K=E.map;else E.alphaMap&&(K=E.alphaMap);K!==void 0&&(K.matrixAutoUpdate===!0&&K.updateMatrix(),w.uvTransform.value.copy(K.matrix))}else if(E.isSpriteMaterial){if(w.diffuse.value.copy(E.color),w.opacity.value=E.opacity,w.rotation.value=E.rotation,E.map&&(w.map.value=E.map),E.alphaMap&&(w.alphaMap.value=E.alphaMap),E.map)var $=E.map;else E.alphaMap&&($=E.alphaMap);$!==void 0&&($.matrixAutoUpdate===!0&&$.updateMatrix(),w.uvTransform.value.copy($.matrix))}else E.isShadowMaterial?(w.color.value.copy(E.color),w.opacity.value=E.opacity):E.isShaderMaterial&&(E.uniformsNeedUpdate=!1)}}}function sR(r){var l;function f(){Xn=new hf(or),hi=new md(or,Xn,r),hi.isWebGL2===!1&&(Xn.get("WEBGL_depth_texture"),Xn.get("OES_texture_float"),Xn.get("OES_texture_half_float"),Xn.get("OES_texture_half_float_linear"),Xn.get("OES_standard_derivatives"),Xn.get("OES_element_index_uint"),Xn.get("ANGLE_instanced_arrays")),Xn.get("OES_texture_float_linear"),Pd=new d6(or,Xn,hi),In=new ZV(or,Xn,hi),In.scissor(Ze.copy(Zr).multiplyScalar(jr).floor()),In.viewport(go.copy(Sr).multiplyScalar(jr).floor()),nl=new ih,Wa=new UV,gh=new qV(or,Xn,In,Wa,hi,Pd,nl),u1=new Tr(or,hi),xL=new ff(or,u1,nl),c1=new pM(or,xL,u1,nl),DF=new dM(or),h1=new zV(zt,Xn,hi),AL=new KV(Wa),OS=new jV,f1=new YV,dm=new Rs(zt,In,c1,Lt),bF=new uc(or,Xn,nl,hi),FF=new Cl(or,Xn,nl,hi),nl.programs=h1.programs,zt.capabilities=hi,zt.extensions=Xn,zt.properties=Wa,zt.renderLists=OS,zt.state=In,zt.info=nl}function w(Ke){Ke.preventDefault(),yr=!0}function E(){yr=!1,f()}function O(Ke){Ke=Ke.target,Ke.removeEventListener("dispose",O),B(Ke),Wa.remove(Ke)}function B(Ke){var Qt=Wa.get(Ke).program;Ke.program=void 0,Qt!==void 0&&h1.releaseProgram(Qt)}function Y(Ke,Qt){Ke.render(function(Tt){zt.renderBufferImmediate(Tt,Qt)})}function K(Ke,Qt,Tt,nr){if(Ke.visible!==!1){if(Ke.layers.test(Qt.layers)){if(Ke.isGroup)Tt=Ke.renderOrder;else if(Ke.isLOD)Ke.autoUpdate===!0&&Ke.update(Qt);else if(Ke.isLight)cr.pushLight(Ke),Ke.castShadow&&cr.pushShadow(Ke);else if(Ke.isSprite){if(!Ke.frustumCulled||$r.intersectsSprite(Ke)){nr&&Zn.setFromMatrixPosition(Ke.matrixWorld).applyMatrix4(Vo);var Or=c1.update(Ke),fi=Ke.material;fi.visible&&Kt.push(Ke,Or,fi,Tt,Zn.z,null)}}else if(Ke.isImmediateRenderObject)nr&&Zn.setFromMatrixPosition(Ke.matrixWorld).applyMatrix4(Vo),Kt.push(Ke,null,Ke.material,Tt,Zn.z,null);else if((Ke.isMesh||Ke.isLine||Ke.isPoints)&&(Ke.isSkinnedMesh&&Ke.skeleton.frame!==nl.render.frame&&(Ke.skeleton.update(),Ke.skeleton.frame=nl.render.frame),!Ke.frustumCulled||$r.intersectsObject(Ke)))if(nr&&Zn.setFromMatrixPosition(Ke.matrixWorld).applyMatrix4(Vo),Or=c1.update(Ke),fi=Ke.material,Array.isArray(fi))for(var Yr=Or.groups,On=0,li=Yr.length;On<li;On++){var Ki=Yr[On],Ri=fi[Ki.materialIndex];Ri&&Ri.visible&&Kt.push(Ke,Or,Ri,Tt,Zn.z,Ki)}else fi.visible&&Kt.push(Ke,Or,fi,Tt,Zn.z,null)}for(Ke=Ke.children,On=0,li=Ke.length;On<li;On++)K(Ke[On],Qt,Tt,nr)}}function $(Ke,Qt,Tt,nr){for(var Or=0,fi=Ke.length;Or<fi;Or++){var Yr=Ke[Or],On=Yr.object,li=Yr.geometry,Ki=nr===void 0?Yr.material:nr;if(Yr=Yr.group,Tt.isArrayCamera){to=Tt;for(var Ri=Tt.cameras,_f=0,Wo=Ri.length;_f<Wo;_f++){var Xa=Ri[_f];On.layers.test(Xa.layers)&&(In.viewport(go.copy(Xa.viewport)),cr.setupLights(Xa),pe(On,Qt,Xa,li,Ki,Yr))}}else to=null,pe(On,Qt,Tt,li,Ki,Yr)}}function pe(Ke,Qt,Tt,nr,Or,fi){if(Ke.onBeforeRender(zt,Qt,Tt,nr,Or,fi),cr=f1.get(Qt,to||Tt),Ke.modelViewMatrix.multiplyMatrices(Tt.matrixWorldInverse,Ke.matrixWorld),Ke.normalMatrix.getNormalMatrix(Ke.modelViewMatrix),Ke.isImmediateRenderObject){var Yr=xe(Tt,Qt,Or,Ke);In.setMaterial(Or),Hn=l=null,Ci=!1,Y(Ke,Yr)}else zt.renderBufferDirect(Tt,Qt,nr,Or,Ke,fi);Ke.onAfterRender(zt,Qt,Tt,nr,Or,fi),cr=f1.get(Qt,to||Tt)}function fe(Ke,Qt,Tt){var nr=Wa.get(Ke),Or=cr.state.lights,fi=Or.state.version;Tt=h1.getParameters(Ke,Or.state,cr.state.shadowsArray,Qt,zr.numPlanes,zr.numIntersection,Tt);var Yr=h1.getProgramCacheKey(Tt),On=nr.program,li=!0;if(On===void 0)Ke.addEventListener("dispose",O);else if(On.cacheKey!==Yr)B(Ke);else{if(nr.lightsStateVersion!==fi)nr.lightsStateVersion=fi;else if(Tt.shaderID!==void 0)return;li=!1}if(li&&(On=h1.acquireProgram(Tt,Yr),nr.program=On,nr.uniforms=Tt.uniforms,nr.outputEncoding=Tt.outputEncoding,Ke.program=On),Tt=On.getAttributes(),Ke.morphTargets)for(Yr=Ke.numSupportedMorphTargets=0;Yr<zt.maxMorphTargets;Yr++)0<=Tt["morphTarget"+Yr]&&Ke.numSupportedMorphTargets++;if(Ke.morphNormals)for(Yr=Ke.numSupportedMorphNormals=0;Yr<zt.maxMorphNormals;Yr++)0<=Tt["morphNormal"+Yr]&&Ke.numSupportedMorphNormals++;Tt=nr.uniforms,(!Ke.isShaderMaterial&&!Ke.isRawShaderMaterial||Ke.clipping===!0)&&(nr.numClippingPlanes=zr.numPlanes,nr.numIntersection=zr.numIntersection,Tt.clippingPlanes=zr.uniform),nr.environment=Ke.isMeshStandardMaterial?Qt.environment:null,nr.fog=Qt.fog,nr.needsLights=Ke.isMeshLambertMaterial||Ke.isMeshToonMaterial||Ke.isMeshPhongMaterial||Ke.isMeshStandardMaterial||Ke.isShadowMaterial||Ke.isShaderMaterial&&Ke.lights===!0,nr.lightsStateVersion=fi,nr.needsLights&&(Tt.ambientLightColor.value=Or.state.ambient,Tt.lightProbe.value=Or.state.probe,Tt.directionalLights.value=Or.state.directional,Tt.directionalLightShadows.value=Or.state.directionalShadow,Tt.spotLights.value=Or.state.spot,Tt.spotLightShadows.value=Or.state.spotShadow,Tt.rectAreaLights.value=Or.state.rectArea,Tt.pointLights.value=Or.state.point,Tt.pointLightShadows.value=Or.state.pointShadow,Tt.hemisphereLights.value=Or.state.hemi,Tt.directionalShadowMap.value=Or.state.directionalShadowMap,Tt.directionalShadowMatrix.value=Or.state.directionalShadowMatrix,Tt.spotShadowMap.value=Or.state.spotShadowMap,Tt.spotShadowMatrix.value=Or.state.spotShadowMatrix,Tt.pointShadowMap.value=Or.state.pointShadowMap,Tt.pointShadowMatrix.value=Or.state.pointShadowMatrix),Ke=nr.program.getUniforms(),Ke=Jp.seqWithValue(Ke.seq,Tt),nr.uniformsList=Ke}function xe(Ke,Qt,Tt,nr){gh.resetTextureUnits();var Or=Qt.fog,fi=Tt.isMeshStandardMaterial?Qt.environment:null,Yr=br===null?zt.outputEncoding:br.texture.encoding,On=Wa.get(Tt),li=cr.state.lights;Ur&&(Wn||Ke!==si)&&zr.setState(Tt.clippingPlanes,Tt.clipIntersection,Tt.clipShadows,Ke,On,Ke===si&&Tt.id===ni),Tt.version===On.__version?On.program===void 0||Tt.fog&&On.fog!==Or||On.environment!==fi||On.needsLights&&On.lightsStateVersion!==li.state.version?fe(Tt,Qt,nr):On.numClippingPlanes===void 0||On.numClippingPlanes===zr.numPlanes&&On.numIntersection===zr.numIntersection?On.outputEncoding!==Yr&&fe(Tt,Qt,nr):fe(Tt,Qt,nr):(fe(Tt,Qt,nr),On.__version=Tt.version);var Ki=!1,Ri=!1,_f=!1;if(Qt=On.program,Yr=Qt.getUniforms(),li=On.uniforms,In.useProgram(Qt.program)&&(_f=Ri=Ki=!0),Tt.id!==ni&&(ni=Tt.id,Ri=!0),(Ki||si!==Ke)&&(Yr.setValue(or,"projectionMatrix",Ke.projectionMatrix),hi.logarithmicDepthBuffer&&Yr.setValue(or,"logDepthBufFC",2/(Math.log(Ke.far+1)/Math.LN2)),si!==Ke&&(si=Ke,_f=Ri=!0),(Tt.isShaderMaterial||Tt.isMeshPhongMaterial||Tt.isMeshToonMaterial||Tt.isMeshStandardMaterial||Tt.envMap)&&(Ki=Yr.map.cameraPosition,Ki!==void 0&&Ki.setValue(or,Zn.setFromMatrixPosition(Ke.matrixWorld))),(Tt.isMeshPhongMaterial||Tt.isMeshToonMaterial||Tt.isMeshLambertMaterial||Tt.isMeshBasicMaterial||Tt.isMeshStandardMaterial||Tt.isShaderMaterial)&&Yr.setValue(or,"isOrthographic",Ke.isOrthographicCamera===!0),(Tt.isMeshPhongMaterial||Tt.isMeshToonMaterial||Tt.isMeshLambertMaterial||Tt.isMeshBasicMaterial||Tt.isMeshStandardMaterial||Tt.isShaderMaterial||Tt.skinning)&&Yr.setValue(or,"viewMatrix",Ke.matrixWorldInverse)),Tt.skinning&&(Yr.setOptional(or,nr,"bindMatrix"),Yr.setOptional(or,nr,"bindMatrixInverse"),Ke=nr.skeleton))if(Ki=Ke.bones,hi.floatVertexTextures){if(Ke.boneTexture===void 0){Ki=Math.sqrt(4*Ki.length),Ki=ci.ceilPowerOfTwo(Ki),Ki=Math.max(Ki,4);var Wo=new Float32Array(Ki*Ki*4);Wo.set(Ke.boneMatrices);var Xa=new Zt(Wo,Ki,Ki,1023,1015);Ke.boneMatrices=Wo,Ke.boneTexture=Xa,Ke.boneTextureSize=Ki}Yr.setValue(or,"boneTexture",Ke.boneTexture,gh),Yr.setValue(or,"boneTextureSize",Ke.boneTextureSize)}else Yr.setOptional(or,Ke,"boneMatrices");return(Ri||On.receiveShadow!==nr.receiveShadow)&&(On.receiveShadow=nr.receiveShadow,Yr.setValue(or,"receiveShadow",nr.receiveShadow)),Ri&&(Yr.setValue(or,"toneMappingExposure",zt.toneMappingExposure),Yr.setValue(or,"toneMappingWhitePoint",zt.toneMappingWhitePoint),On.needsLights&&(Ri=_f,li.ambientLightColor.needsUpdate=Ri,li.lightProbe.needsUpdate=Ri,li.directionalLights.needsUpdate=Ri,li.directionalLightShadows.needsUpdate=Ri,li.pointLights.needsUpdate=Ri,li.pointLightShadows.needsUpdate=Ri,li.spotLights.needsUpdate=Ri,li.spotLightShadows.needsUpdate=Ri,li.rectAreaLights.needsUpdate=Ri,li.hemisphereLights.needsUpdate=Ri),Or&&Tt.fog&&AL.refreshFogUniforms(li,Or),AL.refreshMaterialUniforms(li,Tt,fi,jr,Ar),li.ltc_1!==void 0&&(li.ltc_1.value=Vr.LTC_1),li.ltc_2!==void 0&&(li.ltc_2.value=Vr.LTC_2),Jp.upload(or,On.uniformsList,li,gh)),Tt.isShaderMaterial&&Tt.uniformsNeedUpdate===!0&&(Jp.upload(or,On.uniformsList,li,gh),Tt.uniformsNeedUpdate=!1),Tt.isSpriteMaterial&&Yr.setValue(or,"center",nr.center),Yr.setValue(or,"modelViewMatrix",nr.modelViewMatrix),Yr.setValue(or,"normalMatrix",nr.normalMatrix),Yr.setValue(or,"modelMatrix",nr.matrixWorld),Qt}r=r||{};var ye=r.canvas!==void 0?r.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),Me=r.context!==void 0?r.context:null,Oe=r.alpha!==void 0?r.alpha:!1,it=r.depth!==void 0?r.depth:!0,xt=r.stencil!==void 0?r.stencil:!0,pt=r.antialias!==void 0?r.antialias:!1,Lt=r.premultipliedAlpha!==void 0?r.premultipliedAlpha:!0,Ct=r.preserveDrawingBuffer!==void 0?r.preserveDrawingBuffer:!1,Bt=r.powerPreference!==void 0?r.powerPreference:"default",yt=r.failIfMajorPerformanceCaveat!==void 0?r.failIfMajorPerformanceCaveat:!1,Kt=null,cr=null;this.domElement=ye,this.debug={checkShaderErrors:!0},this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=3e3,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingWhitePoint=this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var zt=this,yr=!1,ir=null,Jr=0,Mn=0,br=null,vn=null,ni=-1,Hn=l=null,Ci=!1,si=null,to=null,go=new y,Ze=new y,st=null,Vt=ye.width,Ar=ye.height,jr=1,tr=null,ut=null,Sr=new y(0,0,Vt,Ar),Zr=new y(0,0,Vt,Ar),En=!1,$r=new Nr,zr=new Jl,Ur=!1,Wn=!1,Vo=new b,Zn=new I;try{Oe={alpha:Oe,depth:it,stencil:xt,antialias:pt,premultipliedAlpha:Lt,preserveDrawingBuffer:Ct,powerPreference:Bt,failIfMajorPerformanceCaveat:yt},ye.addEventListener("webglcontextlost",w,!1),ye.addEventListener("webglcontextrestored",E,!1);var or=Me||ye.getContext("webgl",Oe)||ye.getContext("experimental-webgl",Oe);if(or===null)throw ye.getContext("webgl")!==null?Error("Error creating WebGL context with your selected attributes."):Error("Error creating WebGL context.");or.getShaderPrecisionFormat===void 0&&(or.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ke){throw console.error("THREE.WebGLRenderer: "+Ke.message),Ke}var Xn,hi,In,nl,Wa,gh,u1,xL,c1,h1,AL,OS,f1,dm,DF,bF,FF,Pd;f();var pm=new p6(zt,or);this.xr=pm;var NF=new f6(zt,c1,hi.maxTextureSize);this.shadowMap=NF,this.getContext=function(){return or},this.getContextAttributes=function(){return or.getContextAttributes()},this.forceContextLoss=function(){var Ke=Xn.get("WEBGL_lose_context");Ke&&Ke.loseContext()},this.forceContextRestore=function(){var Ke=Xn.get("WEBGL_lose_context");Ke&&Ke.restoreContext()},this.getPixelRatio=function(){return jr},this.setPixelRatio=function(Ke){Ke!==void 0&&(jr=Ke,this.setSize(Vt,Ar,!1))},this.getSize=function(Ke){return Ke===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),Ke=new v),Ke.set(Vt,Ar)},this.setSize=function(Ke,Qt,Tt){pm.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Vt=Ke,Ar=Qt,ye.width=Math.floor(Ke*jr),ye.height=Math.floor(Qt*jr),Tt!==!1&&(ye.style.width=Ke+"px",ye.style.height=Qt+"px"),this.setViewport(0,0,Ke,Qt))},this.getDrawingBufferSize=function(Ke){return Ke===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),Ke=new v),Ke.set(Vt*jr,Ar*jr).floor()},this.setDrawingBufferSize=function(Ke,Qt,Tt){Vt=Ke,Ar=Qt,jr=Tt,ye.width=Math.floor(Ke*Tt),ye.height=Math.floor(Qt*Tt),this.setViewport(0,0,Ke,Qt)},this.getCurrentViewport=function(Ke){return Ke===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),Ke=new y),Ke.copy(go)},this.getViewport=function(Ke){return Ke.copy(Sr)},this.setViewport=function(Ke,Qt,Tt,nr){Ke.isVector4?Sr.set(Ke.x,Ke.y,Ke.z,Ke.w):Sr.set(Ke,Qt,Tt,nr),In.viewport(go.copy(Sr).multiplyScalar(jr).floor())},this.getScissor=function(Ke){return Ke.copy(Zr)},this.setScissor=function(Ke,Qt,Tt,nr){Ke.isVector4?Zr.set(Ke.x,Ke.y,Ke.z,Ke.w):Zr.set(Ke,Qt,Tt,nr),In.scissor(Ze.copy(Zr).multiplyScalar(jr).floor())},this.getScissorTest=function(){return En},this.setScissorTest=function(Ke){In.setScissorTest(En=Ke)},this.setOpaqueSort=function(Ke){tr=Ke},this.setTransparentSort=function(Ke){ut=Ke},this.getClearColor=function(){return dm.getClearColor()},this.setClearColor=function(){dm.setClearColor.apply(dm,arguments)},this.getClearAlpha=function(){return dm.getClearAlpha()},this.setClearAlpha=function(){dm.setClearAlpha.apply(dm,arguments)},this.clear=function(Ke,Qt,Tt){var nr=0;(Ke===void 0||Ke)&&(nr|=16384),(Qt===void 0||Qt)&&(nr|=256),(Tt===void 0||Tt)&&(nr|=1024),or.clear(nr)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){ye.removeEventListener("webglcontextlost",w,!1),ye.removeEventListener("webglcontextrestored",E,!1),OS.dispose(),f1.dispose(),Wa.dispose(),c1.dispose(),pm.dispose(),DS.stop()},this.renderBufferImmediate=function(Ke,Qt){In.initAttributes();var Tt=Wa.get(Ke);Ke.hasPositions&&!Tt.position&&(Tt.position=or.createBuffer()),Ke.hasNormals&&!Tt.normal&&(Tt.normal=or.createBuffer()),Ke.hasUvs&&!Tt.uv&&(Tt.uv=or.createBuffer()),Ke.hasColors&&!Tt.color&&(Tt.color=or.createBuffer()),Qt=Qt.getAttributes(),Ke.hasPositions&&(or.bindBuffer(34962,Tt.position),or.bufferData(34962,Ke.positionArray,35048),In.enableAttribute(Qt.position),or.vertexAttribPointer(Qt.position,3,5126,!1,0,0)),Ke.hasNormals&&(or.bindBuffer(34962,Tt.normal),or.bufferData(34962,Ke.normalArray,35048),In.enableAttribute(Qt.normal),or.vertexAttribPointer(Qt.normal,3,5126,!1,0,0)),Ke.hasUvs&&(or.bindBuffer(34962,Tt.uv),or.bufferData(34962,Ke.uvArray,35048),In.enableAttribute(Qt.uv),or.vertexAttribPointer(Qt.uv,2,5126,!1,0,0)),Ke.hasColors&&(or.bindBuffer(34962,Tt.color),or.bufferData(34962,Ke.colorArray,35048),In.enableAttribute(Qt.color),or.vertexAttribPointer(Qt.color,3,5126,!1,0,0)),In.disableUnusedAttributes(),or.drawArrays(4,0,Ke.count),Ke.count=0};var BW=new re;this.renderBufferDirect=function(Ke,Qt,Tt,nr,Or,fi){Qt===null&&(Qt=BW);var Yr=Or.isMesh&&0>Or.matrixWorld.determinant(),On=xe(Ke,Qt,nr,Or);In.setMaterial(nr,Yr);var li=!1;if((l!==Tt.id||Hn!==On.id||Ci!==(nr.wireframe===!0))&&(l=Tt.id,Hn=On.id,Ci=nr.wireframe===!0,li=!0),(nr.morphTargets||nr.morphNormals)&&(DF.update(Or,Tt,nr,On),li=!0),Or.isInstancedMesh===!0&&(li=!0),Ke=Tt.index,Qt=Tt.attributes.position,Ke===null){if(Qt===void 0||Qt.count===0)return}else if(Ke.count===0)return;var Ki=1;if(nr.wireframe===!0&&(Ke=xL.getWireframeAttribute(Tt),Ki=2),Yr=bF,Ke!==null){var Ri=u1.get(Ke);Yr=FF,Yr.setIndex(Ri)}if(li){if(hi.isWebGL2!==!1||!Or.isInstancedMesh&&!Tt.isInstancedBufferGeometry||Xn.get("ANGLE_instanced_arrays")!==null){In.initAttributes(),li=Tt.attributes,On=On.getAttributes();var _f=nr.defaultAttributeValues;for(Ov in On){var Wo=On[Ov];if(0<=Wo){var Xa=li[Ov];if(Xa!==void 0){var Od=Xa.normalized,BF=Xa.itemSize,vh=u1.get(Xa);if(vh!==void 0){var bS=vh.buffer,Pv=vh.type;if(vh=vh.bytesPerElement,Xa.isInterleavedBufferAttribute){var d1=Xa.data,zW=d1.stride;Xa=Xa.offset,d1&&d1.isInstancedInterleavedBuffer?(In.enableAttributeAndDivisor(Wo,d1.meshPerAttribute),Tt._maxInstanceCount===void 0&&(Tt._maxInstanceCount=d1.meshPerAttribute*d1.count)):In.enableAttribute(Wo),or.bindBuffer(34962,bS),In.vertexAttribPointer(Wo,BF,Pv,Od,zW*vh,Xa*vh)}else Xa.isInstancedBufferAttribute?(In.enableAttributeAndDivisor(Wo,Xa.meshPerAttribute),Tt._maxInstanceCount===void 0&&(Tt._maxInstanceCount=Xa.meshPerAttribute*Xa.count)):In.enableAttribute(Wo),or.bindBuffer(34962,bS),In.vertexAttribPointer(Wo,BF,Pv,Od,0,0)}}else if(Ov==="instanceMatrix")vh=u1.get(Or.instanceMatrix),vh!==void 0&&(bS=vh.buffer,Pv=vh.type,In.enableAttributeAndDivisor(Wo+0,1),In.enableAttributeAndDivisor(Wo+1,1),In.enableAttributeAndDivisor(Wo+2,1),In.enableAttributeAndDivisor(Wo+3,1),or.bindBuffer(34962,bS),or.vertexAttribPointer(Wo+0,4,Pv,!1,64,0),or.vertexAttribPointer(Wo+1,4,Pv,!1,64,16),or.vertexAttribPointer(Wo+2,4,Pv,!1,64,32),or.vertexAttribPointer(Wo+3,4,Pv,!1,64,48));else if(_f!==void 0&&(Od=_f[Ov],Od!==void 0))switch(Od.length){case 2:or.vertexAttrib2fv(Wo,Od);break;case 3:or.vertexAttrib3fv(Wo,Od);break;case 4:or.vertexAttrib4fv(Wo,Od);break;default:or.vertexAttrib1fv(Wo,Od)}}}In.disableUnusedAttributes()}Ke!==null&&or.bindBuffer(34963,Ri.buffer)}var Ov=Tt.drawRange.start*Ki;li=fi!==null?fi.start*Ki:0,Ri=Math.max(Ov,li),fi=Math.max(0,Math.min(Ke!==null?Ke.count:Qt.count,Ov+Tt.drawRange.count*Ki,li+(fi!==null?fi.count*Ki:1/0))-1-Ri+1),fi!==0&&(Or.isMesh?nr.wireframe===!0?(In.setLineWidth(nr.wireframeLinewidth*(br===null?jr:1)),Yr.setMode(1)):Yr.setMode(4):Or.isLine?(nr=nr.linewidth,nr===void 0&&(nr=1),In.setLineWidth(nr*(br===null?jr:1)),Or.isLineSegments?Yr.setMode(1):Or.isLineLoop?Yr.setMode(2):Yr.setMode(3)):Or.isPoints?Yr.setMode(0):Or.isSprite&&Yr.setMode(4),Or.isInstancedMesh?Yr.renderInstances(Tt,Ri,fi,Or.count):Tt.isInstancedBufferGeometry?Yr.renderInstances(Tt,Ri,fi,Math.min(Tt.instanceCount,Tt._maxInstanceCount)):Yr.render(Ri,fi))},this.compile=function(Ke,Qt){cr=f1.get(Ke,Qt),cr.init(),Ke.traverse(function(nr){nr.isLight&&(cr.pushLight(nr),nr.castShadow&&cr.pushShadow(nr))}),cr.setupLights(Qt);var Tt={};Ke.traverse(function(nr){var Or=nr.material;if(Or)if(Array.isArray(Or))for(var fi=0;fi<Or.length;fi++){var Yr=Or[fi];!(Yr.uuid in Tt)&&(fe(Yr,Ke,nr),Tt[Yr.uuid]=!0)}else!(Or.uuid in Tt)&&(fe(Or,Ke,nr),Tt[Or.uuid]=!0)})};var wL=null,DS=new Ln;DS.setAnimationLoop(function(Ke){pm.isPresenting||wL&&wL(Ke)}),typeof window<"u"&&DS.setContext(window),this.setAnimationLoop=function(Ke){wL=Ke,pm.setAnimationLoop(Ke),DS.start()},this.render=function(Ke,Qt,Tt,nr){if(Tt!==void 0){console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.");var Or=Tt}if(nr!==void 0){console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.");var fi=nr}Qt&&Qt.isCamera?yr||(Hn=l=null,Ci=!1,ni=-1,si=null,Ke.autoUpdate===!0&&Ke.updateMatrixWorld(),Qt.parent===null&&Qt.updateMatrixWorld(),pm.enabled&&pm.isPresenting&&(Qt=pm.getCamera(Qt)),Ke.onBeforeRender(zt,Ke,Qt,Or||br),cr=f1.get(Ke,Qt),cr.init(),Vo.multiplyMatrices(Qt.projectionMatrix,Qt.matrixWorldInverse),$r.setFromProjectionMatrix(Vo),Wn=this.localClippingEnabled,Ur=zr.init(this.clippingPlanes,Wn,Qt),Kt=OS.get(Ke,Qt),Kt.init(),K(Ke,Qt,0,zt.sortObjects),Kt.finish(),zt.sortObjects===!0&&Kt.sort(tr,ut),Ur&&zr.beginShadows(),NF.render(cr.state.shadowsArray,Ke,Qt),cr.setupLights(Qt),Ur&&zr.endShadows(),this.info.autoReset&&this.info.reset(),Or!==void 0&&this.setRenderTarget(Or),dm.render(Kt,Ke,Qt,fi),Tt=Kt.opaque,nr=Kt.transparent,Ke.overrideMaterial?(Or=Ke.overrideMaterial,Tt.length&&$(Tt,Ke,Qt,Or),nr.length&&$(nr,Ke,Qt,Or)):(Tt.length&&$(Tt,Ke,Qt),nr.length&&$(nr,Ke,Qt)),Ke.onAfterRender(zt,Ke,Qt),br!==null&&(gh.updateRenderTargetMipmap(br),gh.updateMultisampleRenderTarget(br)),In.buffers.depth.setTest(!0),In.buffers.depth.setMask(!0),In.buffers.color.setMask(!0),In.setPolygonOffset(!1),cr=Kt=null):console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(Ke){ir!==Ke&&br===null&&or.bindFramebuffer(36160,Ke),ir=Ke},this.getActiveCubeFace=function(){return Jr},this.getActiveMipmapLevel=function(){return Mn},this.getRenderTarget=function(){return br},this.setRenderTarget=function(Ke,Qt,Tt){br=Ke,Jr=Qt,Mn=Tt,Ke&&Wa.get(Ke).__webglFramebuffer===void 0&&gh.setupRenderTarget(Ke);var nr=ir,Or=!1;Ke?(nr=Wa.get(Ke).__webglFramebuffer,Ke.isWebGLCubeRenderTarget?(nr=nr[Qt||0],Or=!0):nr=Ke.isWebGLMultisampleRenderTarget?Wa.get(Ke).__webglMultisampledFramebuffer:nr,go.copy(Ke.viewport),Ze.copy(Ke.scissor),st=Ke.scissorTest):(go.copy(Sr).multiplyScalar(jr).floor(),Ze.copy(Zr).multiplyScalar(jr).floor(),st=En),vn!==nr&&(or.bindFramebuffer(36160,nr),vn=nr),In.viewport(go),In.scissor(Ze),In.setScissorTest(st),Or&&(Ke=Wa.get(Ke.texture),or.framebufferTexture2D(36160,36064,34069+(Qt||0),Ke.__webglTexture,Tt||0))},this.readRenderTargetPixels=function(Ke,Qt,Tt,nr,Or,fi,Yr){if(Ke&&Ke.isWebGLRenderTarget){var On=Wa.get(Ke).__webglFramebuffer;if(Ke.isWebGLCubeRenderTarget&&Yr!==void 0&&(On=On[Yr]),On){Yr=!1,On!==vn&&(or.bindFramebuffer(36160,On),Yr=!0);try{var li=Ke.texture,Ki=li.format,Ri=li.type;Ki!==1023&&Pd.convert(Ki)!==or.getParameter(35739)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):Ri===1009||Pd.convert(Ri)===or.getParameter(35738)||Ri===1015&&(hi.isWebGL2||Xn.get("OES_texture_float")||Xn.get("WEBGL_color_buffer_float"))||Ri===1016&&(hi.isWebGL2?Xn.get("EXT_color_buffer_float"):Xn.get("EXT_color_buffer_half_float"))?or.checkFramebufferStatus(36160)===36053?0<=Qt&&Qt<=Ke.width-nr&&0<=Tt&&Tt<=Ke.height-Or&&or.readPixels(Qt,Tt,nr,Or,Pd.convert(Ki),Pd.convert(Ri),fi):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{Yr&&or.bindFramebuffer(36160,vn)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(Ke,Qt,Tt){Tt===void 0&&(Tt=0);var nr=Math.pow(2,-Tt),Or=Math.floor(Qt.image.width*nr);nr=Math.floor(Qt.image.height*nr);var fi=Pd.convert(Qt.format);gh.setTexture2D(Qt,0),or.copyTexImage2D(3553,Tt,fi,Ke.x,Ke.y,Or,nr,0),In.unbindTexture()},this.copyTextureToTexture=function(Ke,Qt,Tt,nr){nr===void 0&&(nr=0);var Or=Qt.image.width,fi=Qt.image.height,Yr=Pd.convert(Tt.format),On=Pd.convert(Tt.type);gh.setTexture2D(Tt,0),Qt.isDataTexture?or.texSubImage2D(3553,nr,Ke.x,Ke.y,Or,fi,Yr,On,Qt.image.data):Qt.isCompressedTexture?or.compressedTexSubImage2D(3553,nr,Ke.x,Ke.y,Qt.mipmaps[0].width,Qt.mipmaps[0].height,Yr,Qt.mipmaps[0].data):or.texSubImage2D(3553,nr,Ke.x,Ke.y,Yr,On,Qt.image),nr===0&&Tt.generateMipmaps&&or.generateMipmap(3553),In.unbindTexture()},this.initTexture=function(Ke){gh.setTexture2D(Ke,0),In.unbindTexture()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function yM(r,l){this.name="",this.color=new He(r),this.density=l!==void 0?l:25e-5}function xM(r,l,f){this.name="",this.color=new He(r),this.near=l!==void 0?l:1,this.far=f!==void 0?f:1e3}function xd(r,l){this.array=r,this.stride=l,this.count=r!==void 0?r.length/l:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}function lA(r,l,f,w){this.name="",this.data=r,this.itemSize=l,this.offset=f,this.normalized=w===!0}function em(r){Et.call(this),this.type="SpriteMaterial",this.color=new He(16777215),this.alphaMap=this.map=null,this.rotation=0,this.transparent=this.sizeAttenuation=!0,this.setValues(r)}function uA(r){if(G.call(this),this.type="Sprite",i1===void 0){i1=new Fe;var l=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);l=new xd(l,5),i1.setIndex([0,1,2,0,2,3]),i1.setAttribute("position",new lA(l,3,0,!1)),i1.setAttribute("uv",new lA(l,2,3,!1))}this.geometry=i1,this.material=r!==void 0?r:new em,this.center=new v(.5,.5)}function AM(r,l,f,w,E,O){s1.subVectors(r,f).addScalar(.5).multiply(w),E!==void 0?(KA.x=O*s1.x-E*s1.y,KA.y=E*s1.x+O*s1.y):KA.copy(s1),r.copy(l),r.x+=KA.x,r.y+=KA.y,r.applyMatrix4(nF)}function cA(){G.call(this),this._currentLevel=0,this.type="LOD",Rn(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function wM(r,l){r&&r.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Qe.call(this,r,l),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new b,this.bindMatrixInverse=new b}function CM(r,l){if(r=r||[],this.bones=r.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,l===void 0)this.calculateInverses();else if(this.bones.length===l.length)this.boneInverses=l.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[],r=0,l=this.bones.length;r<l;r++)this.boneInverses.push(new b)}function lR(){G.call(this),this.type="Bone"}function _M(r,l,f){Qe.call(this,r,l),this.instanceMatrix=new Nt(new Float32Array(16*f),16),this.count=f,this.frustumCulled=!1}function $o(r){Et.call(this),this.type="LineBasicMaterial",this.color=new He(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.morphTargets=!1,this.setValues(r)}function Cu(r,l,f){f===1&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),G.call(this),this.type="Line",this.geometry=r!==void 0?r:new Fe,this.material=l!==void 0?l:new $o,this.updateMorphTargets()}function ca(r,l){Cu.call(this,r,l),this.type="LineSegments"}function MM(r,l){Cu.call(this,r,l),this.type="LineLoop"}function ah(r){Et.call(this),this.type="PointsMaterial",this.color=new He(16777215),this.alphaMap=this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(r)}function Ay(r,l){G.call(this),this.type="Points",this.geometry=r!==void 0?r:new Fe,this.material=l!==void 0?l:new ah,this.updateMorphTargets()}function uR(r,l,f,w,E,O,B){var Y=aL.distanceSqToPoint(r);Y<f&&(f=new I,aL.closestPointToPoint(r,f),f.applyMatrix4(w),r=E.ray.origin.distanceTo(f),r<E.near||r>E.far||O.push({distance:r,distanceToRay:Math.sqrt(Y),point:f,index:l,face:null,object:B}))}function cR(r,l,f,w,E,O,B,Y,K){A.call(this,r,l,f,w,E,O,B,Y,K),this.format=B!==void 0?B:1022,this.minFilter=O!==void 0?O:1006,this.magFilter=E!==void 0?E:1006,this.generateMipmaps=!1}function wy(r,l,f,w,E,O,B,Y,K,$,pe,fe){A.call(this,null,O,B,Y,K,$,w,E,pe,fe),this.image={width:l,height:f},this.mipmaps=r,this.generateMipmaps=this.flipY=!1}function hA(r,l,f,w,E,O,B,Y,K){A.call(this,r,l,f,w,E,O,B,Y,K),this.needsUpdate=!0}function fA(r,l,f,w,E,O,B,Y,K,$){if($=$!==void 0?$:1026,$!==1026&&$!==1027)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");f===void 0&&$===1026&&(f=1012),f===void 0&&$===1027&&(f=1020),A.call(this,null,w,E,O,B,Y,$,f,K),this.image={width:r,height:l},this.magFilter=B!==void 0?B:1003,this.minFilter=Y!==void 0?Y:1003,this.generateMipmaps=this.flipY=!1}function Cy(r){Fe.call(this),this.type="WireframeGeometry";var l=[],f,w,E,O=[0,0],B={},Y=["a","b","c"];if(r&&r.isGeometry){var K=r.faces,$=0;for(w=K.length;$<w;$++){var pe=K[$];for(f=0;3>f;f++){var fe=pe[Y[f]],xe=pe[Y[(f+1)%3]];O[0]=Math.min(fe,xe),O[1]=Math.max(fe,xe),fe=O[0]+","+O[1],B[fe]===void 0&&(B[fe]={index1:O[0],index2:O[1]})}}for(fe in B)$=B[fe],Y=r.vertices[$.index1],l.push(Y.x,Y.y,Y.z),Y=r.vertices[$.index2],l.push(Y.x,Y.y,Y.z)}else if(r&&r.isBufferGeometry)if(Y=new I,r.index!==null){K=r.attributes.position,pe=r.index;var ye=r.groups;for(ye.length===0&&(ye=[{start:0,count:pe.count,materialIndex:0}]),r=0,E=ye.length;r<E;++r)for($=ye[r],f=$.start,w=$.count,$=f,w=f+w;$<w;$+=3)for(f=0;3>f;f++)fe=pe.getX($+f),xe=pe.getX($+(f+1)%3),O[0]=Math.min(fe,xe),O[1]=Math.max(fe,xe),fe=O[0]+","+O[1],B[fe]===void 0&&(B[fe]={index1:O[0],index2:O[1]});for(fe in B)$=B[fe],Y.fromBufferAttribute(K,$.index1),l.push(Y.x,Y.y,Y.z),Y.fromBufferAttribute(K,$.index2),l.push(Y.x,Y.y,Y.z)}else for(K=r.attributes.position,$=0,w=K.count/3;$<w;$++)for(f=0;3>f;f++)B=3*$+f,Y.fromBufferAttribute(K,B),l.push(Y.x,Y.y,Y.z),B=3*$+(f+1)%3,Y.fromBufferAttribute(K,B),l.push(Y.x,Y.y,Y.z);this.setAttribute("position",new ke(l,3))}function dA(r,l,f){Ne.call(this),this.type="ParametricGeometry",this.parameters={func:r,slices:l,stacks:f},this.fromBufferGeometry(new _y(r,l,f)),this.mergeVertices()}function _y(r,l,f){Fe.call(this),this.type="ParametricBufferGeometry",this.parameters={func:r,slices:l,stacks:f};var w=[],E=[],O=[],B=[],Y=new I,K=new I,$=new I,pe=new I,fe=new I,xe,ye;3>r.length&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var Me=l+1;for(xe=0;xe<=f;xe++){var Oe=xe/f;for(ye=0;ye<=l;ye++){var it=ye/l;r(it,Oe,K),E.push(K.x,K.y,K.z),0<=it-1e-5?(r(it-1e-5,Oe,$),pe.subVectors(K,$)):(r(it+1e-5,Oe,$),pe.subVectors($,K)),0<=Oe-1e-5?(r(it,Oe-1e-5,$),fe.subVectors(K,$)):(r(it,Oe+1e-5,$),fe.subVectors($,K)),Y.crossVectors(pe,fe).normalize(),O.push(Y.x,Y.y,Y.z),B.push(it,Oe)}}for(xe=0;xe<f;xe++)for(ye=0;ye<l;ye++)r=xe*Me+ye+1,Y=(xe+1)*Me+ye+1,K=(xe+1)*Me+ye,w.push(xe*Me+ye,r,K),w.push(r,Y,K);this.setIndex(w),this.setAttribute("position",new ke(E,3)),this.setAttribute("normal",new ke(O,3)),this.setAttribute("uv",new ke(B,2))}function pA(r,l,f,w){Ne.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:r,indices:l,radius:f,detail:w},this.fromBufferGeometry(new $l(r,l,f,w)),this.mergeVertices()}function $l(r,l,f,w){function E($){Y.push($.x,$.y,$.z)}function O($,pe){$*=3,pe.x=r[$+0],pe.y=r[$+1],pe.z=r[$+2]}function B($,pe,fe,xe){0>xe&&$.x===1&&(K[pe]=$.x-1),fe.x===0&&fe.z===0&&(K[pe]=xe/2/Math.PI+.5)}Fe.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:r,indices:l,radius:f,detail:w},f=f||1,w=w||0;var Y=[],K=[];(function($){for(var pe=new I,fe=new I,xe=new I,ye=0;ye<l.length;ye+=3){O(l[ye+0],pe),O(l[ye+1],fe),O(l[ye+2],xe);var Me,Oe,it=pe,xt=fe,pt=xe,Lt=Math.pow(2,$),Ct=[];for(Oe=0;Oe<=Lt;Oe++){Ct[Oe]=[];var Bt=it.clone().lerp(pt,Oe/Lt),yt=xt.clone().lerp(pt,Oe/Lt),Kt=Lt-Oe;for(Me=0;Me<=Kt;Me++)Ct[Oe][Me]=Me===0&&Oe===Lt?Bt:Bt.clone().lerp(yt,Me/Kt)}for(Oe=0;Oe<Lt;Oe++)for(Me=0;Me<2*(Lt-Oe)-1;Me++)it=Math.floor(Me/2),Me%2===0?(E(Ct[Oe][it+1]),E(Ct[Oe+1][it]),E(Ct[Oe][it])):(E(Ct[Oe][it+1]),E(Ct[Oe+1][it+1]),E(Ct[Oe+1][it]))}})(w),function($){for(var pe=new I,fe=0;fe<Y.length;fe+=3)pe.x=Y[fe+0],pe.y=Y[fe+1],pe.z=Y[fe+2],pe.normalize().multiplyScalar($),Y[fe+0]=pe.x,Y[fe+1]=pe.y,Y[fe+2]=pe.z}(f),function(){for(var $=new I,pe=0;pe<Y.length;pe+=3)$.x=Y[pe+0],$.y=Y[pe+1],$.z=Y[pe+2],K.push(Math.atan2($.z,-$.x)/2/Math.PI+.5,1-(Math.atan2(-$.y,Math.sqrt($.x*$.x+$.z*$.z))/Math.PI+.5));$=new I,pe=new I;for(var fe=new I,xe=new I,ye=new v,Me=new v,Oe=new v,it=0,xt=0;it<Y.length;it+=9,xt+=6){$.set(Y[it+0],Y[it+1],Y[it+2]),pe.set(Y[it+3],Y[it+4],Y[it+5]),fe.set(Y[it+6],Y[it+7],Y[it+8]),ye.set(K[xt+0],K[xt+1]),Me.set(K[xt+2],K[xt+3]),Oe.set(K[xt+4],K[xt+5]),xe.copy($).add(pe).add(fe).divideScalar(3);var pt=Math.atan2(xe.z,-xe.x);B(ye,xt+0,$,pt),B(Me,xt+2,pe,pt),B(Oe,xt+4,fe,pt)}for($=0;$<K.length;$+=6)pe=K[$+0],fe=K[$+2],xe=K[$+4],ye=Math.min(pe,fe,xe),.9<Math.max(pe,fe,xe)&&.1>ye&&(.2>pe&&(K[$+0]+=1),.2>fe&&(K[$+2]+=1),.2>xe&&(K[$+4]+=1))}(),this.setAttribute("position",new ke(Y,3)),this.setAttribute("normal",new ke(Y.slice(),3)),this.setAttribute("uv",new ke(K,2)),w===0?this.computeVertexNormals():this.normalizeNormals()}function mA(r,l){Ne.call(this),this.type="TetrahedronGeometry",this.parameters={radius:r,detail:l},this.fromBufferGeometry(new My(r,l)),this.mergeVertices()}function My(r,l){$l.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],r,l),this.type="TetrahedronBufferGeometry",this.parameters={radius:r,detail:l}}function gA(r,l){Ne.call(this),this.type="OctahedronGeometry",this.parameters={radius:r,detail:l},this.fromBufferGeometry(new av(r,l)),this.mergeVertices()}function av(r,l){$l.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],r,l),this.type="OctahedronBufferGeometry",this.parameters={radius:r,detail:l}}function vA(r,l){Ne.call(this),this.type="IcosahedronGeometry",this.parameters={radius:r,detail:l},this.fromBufferGeometry(new Sy(r,l)),this.mergeVertices()}function Sy(r,l){var f=(1+Math.sqrt(5))/2;$l.call(this,[-1,f,0,1,f,0,-1,-f,0,1,-f,0,0,-1,f,0,1,f,0,-1,-f,0,1,-f,f,0,-1,f,0,1,-f,0,-1,-f,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],r,l),this.type="IcosahedronBufferGeometry",this.parameters={radius:r,detail:l}}function yA(r,l){Ne.call(this),this.type="DodecahedronGeometry",this.parameters={radius:r,detail:l},this.fromBufferGeometry(new Ty(r,l)),this.mergeVertices()}function Ty(r,l){var f=(1+Math.sqrt(5))/2,w=1/f;$l.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-w,-f,0,-w,f,0,w,-f,0,w,f,-w,-f,0,-w,f,0,w,-f,0,w,f,0,-f,0,-w,f,0,-w,-f,0,w,f,0,w],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],r,l),this.type="DodecahedronBufferGeometry",this.parameters={radius:r,detail:l}}function xA(r,l,f,w,E,O){Ne.call(this),this.type="TubeGeometry",this.parameters={path:r,tubularSegments:l,radius:f,radialSegments:w,closed:E},O!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed."),r=new sv(r,l,f,w,E),this.tangents=r.tangents,this.normals=r.normals,this.binormals=r.binormals,this.fromBufferGeometry(r),this.mergeVertices()}function sv(r,l,f,w,E){function O(xt){pe=r.getPointAt(xt/l,pe);var pt=B.normals[xt];for(xt=B.binormals[xt],xe=0;xe<=w;xe++){var Lt=xe/w*Math.PI*2,Ct=Math.sin(Lt);Lt=-Math.cos(Lt),K.x=Lt*pt.x+Ct*xt.x,K.y=Lt*pt.y+Ct*xt.y,K.z=Lt*pt.z+Ct*xt.z,K.normalize(),Me.push(K.x,K.y,K.z),Y.x=pe.x+f*K.x,Y.y=pe.y+f*K.y,Y.z=pe.z+f*K.z,ye.push(Y.x,Y.y,Y.z)}}Fe.call(this),this.type="TubeBufferGeometry",this.parameters={path:r,tubularSegments:l,radius:f,radialSegments:w,closed:E},l=l||64,f=f||1,w=w||8,E=E||!1;var B=r.computeFrenetFrames(l,E);this.tangents=B.tangents,this.normals=B.normals,this.binormals=B.binormals;var Y=new I,K=new I,$=new v,pe=new I,fe,xe,ye=[],Me=[],Oe=[],it=[];for(fe=0;fe<l;fe++)O(fe);for(O(E===!1?l:0),fe=0;fe<=l;fe++)for(xe=0;xe<=w;xe++)$.x=fe/l,$.y=xe/w,Oe.push($.x,$.y);(function(){for(xe=1;xe<=l;xe++)for(fe=1;fe<=w;fe++){var xt=(w+1)*xe+(fe-1),pt=(w+1)*xe+fe,Lt=(w+1)*(xe-1)+fe;it.push((w+1)*(xe-1)+(fe-1),xt,Lt),it.push(xt,pt,Lt)}})(),this.setIndex(it),this.setAttribute("position",new ke(ye,3)),this.setAttribute("normal",new ke(Me,3)),this.setAttribute("uv",new ke(Oe,2))}function AA(r,l,f,w,E,O,B){Ne.call(this),this.type="TorusKnotGeometry",this.parameters={radius:r,tube:l,tubularSegments:f,radialSegments:w,p:E,q:O},B!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Ey(r,l,f,w,E,O)),this.mergeVertices()}function Ey(r,l,f,w,E,O){function B(yt,Kt,cr,zt,yr){var ir=Math.sin(yt);Kt=cr/Kt*yt,cr=Math.cos(Kt),yr.x=zt*(2+cr)*.5*Math.cos(yt),yr.y=zt*(2+cr)*ir*.5,yr.z=zt*Math.sin(Kt)*.5}Fe.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:r,tube:l,tubularSegments:f,radialSegments:w,p:E,q:O},r=r||1,l=l||.4,f=Math.floor(f)||64,w=Math.floor(w)||8,E=E||2,O=O||3;var Y=[],K=[],$=[],pe=[],fe,xe=new I,ye=new I,Me=new I,Oe=new I,it=new I,xt=new I,pt=new I;for(fe=0;fe<=f;++fe){var Lt=fe/f*E*Math.PI*2;for(B(Lt,E,O,r,Me),B(Lt+.01,E,O,r,Oe),xt.subVectors(Oe,Me),pt.addVectors(Oe,Me),it.crossVectors(xt,pt),pt.crossVectors(it,xt),it.normalize(),pt.normalize(),Lt=0;Lt<=w;++Lt){var Ct=Lt/w*Math.PI*2,Bt=-l*Math.cos(Ct);Ct=l*Math.sin(Ct),xe.x=Me.x+(Bt*pt.x+Ct*it.x),xe.y=Me.y+(Bt*pt.y+Ct*it.y),xe.z=Me.z+(Bt*pt.z+Ct*it.z),K.push(xe.x,xe.y,xe.z),ye.subVectors(xe,Me).normalize(),$.push(ye.x,ye.y,ye.z),pe.push(fe/f),pe.push(Lt/w)}}for(Lt=1;Lt<=f;Lt++)for(fe=1;fe<=w;fe++)r=(w+1)*Lt+(fe-1),l=(w+1)*Lt+fe,E=(w+1)*(Lt-1)+fe,Y.push((w+1)*(Lt-1)+(fe-1),r,E),Y.push(r,l,E);this.setIndex(Y),this.setAttribute("position",new ke(K,3)),this.setAttribute("normal",new ke($,3)),this.setAttribute("uv",new ke(pe,2))}function wA(r,l,f,w,E){Ne.call(this),this.type="TorusGeometry",this.parameters={radius:r,tube:l,radialSegments:f,tubularSegments:w,arc:E},this.fromBufferGeometry(new Iy(r,l,f,w,E)),this.mergeVertices()}function Iy(r,l,f,w,E){Fe.call(this),this.type="TorusBufferGeometry",this.parameters={radius:r,tube:l,radialSegments:f,tubularSegments:w,arc:E},r=r||1,l=l||.4,f=Math.floor(f)||8,w=Math.floor(w)||6,E=E||2*Math.PI;var O=[],B=[],Y=[],K=[],$=new I,pe=new I,fe=new I,xe,ye;for(xe=0;xe<=f;xe++)for(ye=0;ye<=w;ye++){var Me=ye/w*E,Oe=xe/f*Math.PI*2;pe.x=(r+l*Math.cos(Oe))*Math.cos(Me),pe.y=(r+l*Math.cos(Oe))*Math.sin(Me),pe.z=l*Math.sin(Oe),B.push(pe.x,pe.y,pe.z),$.x=r*Math.cos(Me),$.y=r*Math.sin(Me),fe.subVectors(pe,$).normalize(),Y.push(fe.x,fe.y,fe.z),K.push(ye/w),K.push(xe/f)}for(xe=1;xe<=f;xe++)for(ye=1;ye<=w;ye++)r=(w+1)*(xe-1)+ye-1,l=(w+1)*(xe-1)+ye,E=(w+1)*xe+ye,O.push((w+1)*xe+ye-1,r,E),O.push(r,l,E);this.setIndex(O),this.setAttribute("position",new ke(B,3)),this.setAttribute("normal",new ke(Y,3)),this.setAttribute("uv",new ke(K,2))}function m6(r,l,f,w,E){for(var O,B=0,Y=l,K=f-w;Y<f;Y+=w)B+=(r[K]-r[Y])*(r[Y+1]+r[K+1]),K=Y;if(E===0<B)for(E=l;E<f;E+=w)O=y6(E,r[E],r[E+1],O);else for(E=f-w;E>=l;E-=w)O=y6(E,r[E],r[E+1],O);return O&&SM(O,O.next)&&(MA(O),O=O.next),O}function tm(r,l){if(!r)return r;l||(l=r);do{var f=!1;if(r.steiner||!SM(r,r.next)&&ha(r.prev,r,r.next)!==0)r=r.next;else{if(MA(r),r=l=r.prev,r===r.next)break;f=!0}}while(f||r!==l);return l}function CA(r,l,f,w,E,O,B){if(r){if(!B&&O){var Y=r,K=Y;do K.z===null&&(K.z=hR(K.x,K.y,w,E,O)),K.prevZ=K.prev,K=K.nextZ=K.next;while(K!==Y);K.prevZ.nextZ=null,K.prevZ=null,Y=K;var $,pe,fe,xe,ye=1;do{K=Y;var Me=Y=null;for(pe=0;K;){pe++;var Oe=K;for($=fe=0;$<ye&&(fe++,Oe=Oe.nextZ,Oe);$++);for(xe=ye;0<fe||0<xe&&Oe;)fe!==0&&(xe===0||!Oe||K.z<=Oe.z)?($=K,K=K.nextZ,fe--):($=Oe,Oe=Oe.nextZ,xe--),Me?Me.nextZ=$:Y=$,$.prevZ=Me,Me=$;K=Oe}Me.nextZ=null,ye*=2}while(1<pe)}for(Y=r;r.prev!==r.next;){if(K=r.prev,Oe=r.next,O)Me=JV(r,w,E,O);else e:if(Me=r,pe=Me.prev,fe=Me,ye=Me.next,0<=ha(pe,fe,ye))Me=!1;else{for($=Me.next.next;$!==Me.prev;){if(Ry(pe.x,pe.y,fe.x,fe.y,ye.x,ye.y,$.x,$.y)&&0<=ha($.prev,$,$.next)){Me=!1;break e}$=$.next}Me=!0}if(Me)l.push(K.i/f),l.push(r.i/f),l.push(Oe.i/f),MA(r),Y=r=Oe.next;else if(r=Oe,r===Y){if(!B)CA(tm(r),l,f,w,E,O,1);else if(B===1){r=tm(r),B=l,Y=f,K=r;do Oe=K.prev,Me=K.next.next,!SM(Oe,Me)&&g6(Oe,K,K.next,Me)&&_A(Oe,Me)&&_A(Me,Oe)&&(B.push(Oe.i/Y),B.push(K.i/Y),B.push(Me.i/Y),MA(K),MA(K.next),K=r=Me),K=K.next;while(K!==r);r=tm(K),CA(r,l,f,w,E,O,2)}else if(B===2)e:{B=r;do{for(Y=B.next.next;Y!==B.prev;){if(K=B.i!==Y.i){if(K=B,Oe=Y,Me=K.next.i!==Oe.i&&K.prev.i!==Oe.i){t:{Me=K;do{if(Me.i!==K.i&&Me.next.i!==K.i&&Me.i!==Oe.i&&Me.next.i!==Oe.i&&g6(Me,Me.next,K,Oe)){Me=!0;break t}Me=Me.next}while(Me!==K);Me=!1}Me=!Me}if(Me){if(Me=_A(K,Oe)&&_A(Oe,K)){Me=K,pe=!1,fe=(K.x+Oe.x)/2,ye=(K.y+Oe.y)/2;do Me.y>ye!=Me.next.y>ye&&Me.next.y!==Me.y&&fe<(Me.next.x-Me.x)*(ye-Me.y)/(Me.next.y-Me.y)+Me.x&&(pe=!pe),Me=Me.next;while(Me!==K);Me=pe}Me=Me&&(ha(K.prev,K,Oe.prev)||ha(K,Oe.prev,Oe))||SM(K,Oe)&&0<ha(K.prev,K,K.next)&&0<ha(Oe.prev,Oe,Oe.next)}K=Me}if(K){r=v6(B,Y),B=tm(B,B.next),r=tm(r,r.next),CA(B,l,f,w,E,O),CA(r,l,f,w,E,O);break e}Y=Y.next}B=B.next}while(B!==r)}break}}}}function JV(r,l,f,w){var E=r.prev,O=r.next;if(0<=ha(E,r,O))return!1;var B=E.x>r.x?E.x>O.x?E.x:O.x:r.x>O.x?r.x:O.x,Y=E.y>r.y?E.y>O.y?E.y:O.y:r.y>O.y?r.y:O.y,K=hR(E.x<r.x?E.x<O.x?E.x:O.x:r.x<O.x?r.x:O.x,E.y<r.y?E.y<O.y?E.y:O.y:r.y<O.y?r.y:O.y,l,f,w);for(l=hR(B,Y,l,f,w),f=r.prevZ,w=r.nextZ;f&&f.z>=K&&w&&w.z<=l;){if(f!==r.prev&&f!==r.next&&Ry(E.x,E.y,r.x,r.y,O.x,O.y,f.x,f.y)&&0<=ha(f.prev,f,f.next)||(f=f.prevZ,w!==r.prev&&w!==r.next&&Ry(E.x,E.y,r.x,r.y,O.x,O.y,w.x,w.y)&&0<=ha(w.prev,w,w.next)))return!1;w=w.nextZ}for(;f&&f.z>=K;){if(f!==r.prev&&f!==r.next&&Ry(E.x,E.y,r.x,r.y,O.x,O.y,f.x,f.y)&&0<=ha(f.prev,f,f.next))return!1;f=f.prevZ}for(;w&&w.z<=l;){if(w!==r.prev&&w!==r.next&&Ry(E.x,E.y,r.x,r.y,O.x,O.y,w.x,w.y)&&0<=ha(w.prev,w,w.next))return!1;w=w.nextZ}return!0}function QV(r,l){return r.x-l.x}function $V(r,l){var f=l,w=r.x,E=r.y,O=-1/0;do{if(E<=f.y&&E>=f.next.y&&f.next.y!==f.y){var B=f.x+(E-f.y)*(f.next.x-f.x)/(f.next.y-f.y);if(B<=w&&B>O){if(O=B,B===w){if(E===f.y)return f;if(E===f.next.y)return f.next}var Y=f.x<f.next.x?f:f.next}}f=f.next}while(f!==l);if(!Y)return null;if(w===O)return Y;l=Y,B=Y.x;var K=Y.y,$=1/0;f=Y;do{if(w>=f.x&&f.x>=B&&w!==f.x&&Ry(E<K?w:O,E,B,K,E<K?O:w,E,f.x,f.y)){var pe=Math.abs(E-f.y)/(w-f.x),fe;if((fe=_A(f,r))&&!(fe=pe<$)&&(fe=pe===$)&&!(fe=f.x>Y.x)&&(fe=f.x===Y.x)){fe=Y;var xe=f;fe=0>ha(fe.prev,fe,xe.prev)&&0>ha(xe.next,fe,fe.next)}fe&&(Y=f,$=pe)}f=f.next}while(f!==l);return Y}function hR(r,l,f,w,E){return r=32767*(r-f)*E,l=32767*(l-w)*E,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,l=(l|l<<8)&16711935,l=(l|l<<4)&252645135,l=(l|l<<2)&858993459,(r|r<<1)&1431655765|((l|l<<1)&1431655765)<<1}function eW(r){var l=r,f=r;do(l.x<f.x||l.x===f.x&&l.y<f.y)&&(f=l),l=l.next;while(l!==r);return f}function Ry(r,l,f,w,E,O,B,Y){return 0<=(E-B)*(l-Y)-(r-B)*(O-Y)&&0<=(r-B)*(w-Y)-(f-B)*(l-Y)&&0<=(f-B)*(O-Y)-(E-B)*(w-Y)}function ha(r,l,f){return(l.y-r.y)*(f.x-l.x)-(l.x-r.x)*(f.y-l.y)}function SM(r,l){return r.x===l.x&&r.y===l.y}function g6(r,l,f,w){var E=EM(ha(r,l,f)),O=EM(ha(r,l,w)),B=EM(ha(f,w,r)),Y=EM(ha(f,w,l));return!!(E!==O&&B!==Y||E===0&&TM(r,f,l)||O===0&&TM(r,w,l)||B===0&&TM(f,r,w)||Y===0&&TM(f,l,w))}function TM(r,l,f){return l.x<=Math.max(r.x,f.x)&&l.x>=Math.min(r.x,f.x)&&l.y<=Math.max(r.y,f.y)&&l.y>=Math.min(r.y,f.y)}function EM(r){return 0<r?1:0>r?-1:0}function _A(r,l){return 0>ha(r.prev,r,r.next)?0<=ha(r,l,r.next)&&0<=ha(r,r.prev,l):0>ha(r,l,r.prev)||0>ha(r,r.next,l)}function v6(r,l){var f=new fR(r.i,r.x,r.y),w=new fR(l.i,l.x,l.y),E=r.next,O=l.prev;return r.next=l,l.prev=r,f.next=E,E.prev=f,w.next=f,f.prev=w,O.next=w,w.prev=O,w}function y6(r,l,f,w){return r=new fR(r,l,f),w?(r.next=w.next,r.prev=w,w.next.prev=r,w.next=r):(r.prev=r,r.next=r),r}function MA(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function fR(r,l,f){this.i=r,this.x=l,this.y=f,this.nextZ=this.prevZ=this.z=this.next=this.prev=null,this.steiner=!1}function x6(r){var l=r.length;2<l&&r[l-1].equals(r[0])&&r.pop()}function A6(r,l){for(var f=0;f<l.length;f++)r.push(l[f].x),r.push(l[f].y)}function lv(r,l){Ne.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:r,options:l},this.fromBufferGeometry(new df(r,l)),this.mergeVertices()}function df(r,l){function f(K){function $(Ur,Wn,Vo){return Wn||console.error("THREE.ExtrudeGeometry: vec does not exist"),Wn.clone().multiplyScalar(Vo).add(Ur)}function pe(Ur,Wn,Vo){var Zn=Ur.x-Wn.x,or=Ur.y-Wn.y,Xn=Vo.x-Ur.x,hi=Vo.y-Ur.y,In=Zn*Zn+or*or;if(Math.abs(Zn*hi-or*Xn)>Bo){var nl=Math.sqrt(In),Wa=Math.sqrt(Xn*Xn+hi*hi);if(In=Wn.x-or/nl,Wn=Wn.y+Zn/nl,hi=((Vo.x-hi/Wa-In)*hi-(Vo.y+Xn/Wa-Wn)*Xn)/(Zn*hi-or*Xn),Xn=In+Zn*hi-Ur.x,Zn=Wn+or*hi-Ur.y,or=Xn*Xn+Zn*Zn,2>=or)return new v(Xn,Zn);or=Math.sqrt(or/2)}else Ur=!1,Zn>Bo?Xn>Bo&&(Ur=!0):Zn<-Bo?Xn<-Bo&&(Ur=!0):lf(or)===lf(hi)&&(Ur=!0),Ur?(Xn=-or,or=Math.sqrt(In)):(Xn=Zn,Zn=or,or=Math.sqrt(In/2));return new v(Xn/or,Zn/or)}function fe(Ur,Wn){for(tr=Ur.length;0<=--tr;){var Vo=tr,Zn=tr-1;0>Zn&&(Zn=Ur.length-1);var or,Xn=pt+2*cr;for(or=0;or<Xn;or++){var hi=Vt*or,In=Vt*(or+1),nl=Wn+Zn+hi,Wa=Wn+Zn+In;In=Wn+Vo+In,Me(Wn+Vo+hi),Me(nl),Me(In),Me(nl),Me(Wa),Me(In),hi=E.length/3,hi=yr.generateSideWallUV(w,E,hi-6,hi-3,hi-2,hi-1),Oe(hi[0]),Oe(hi[1]),Oe(hi[3]),Oe(hi[1]),Oe(hi[2]),Oe(hi[3])}}}function xe(Ur,Wn,Vo){it.push(Ur),it.push(Wn),it.push(Vo)}function ye(Ur,Wn,Vo){Me(Ur),Me(Wn),Me(Vo),Ur=E.length/3,Ur=yr.generateTopUV(w,E,Ur-3,Ur-2,Ur-1),Oe(Ur[0]),Oe(Ur[1]),Oe(Ur[2])}function Me(Ur){E.push(it[3*Ur]),E.push(it[3*Ur+1]),E.push(it[3*Ur+2])}function Oe(Ur){O.push(Ur.x),O.push(Ur.y)}var it=[],xt=l.curveSegments!==void 0?l.curveSegments:12,pt=l.steps!==void 0?l.steps:1,Lt=l.depth!==void 0?l.depth:100,Ct=l.bevelEnabled!==void 0?l.bevelEnabled:!0,Bt=l.bevelThickness!==void 0?l.bevelThickness:6,yt=l.bevelSize!==void 0?l.bevelSize:Bt-2,Kt=l.bevelOffset!==void 0?l.bevelOffset:0,cr=l.bevelSegments!==void 0?l.bevelSegments:3,zt=l.extrudePath,yr=l.UVGenerator!==void 0?l.UVGenerator:_W;l.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),Lt=l.amount);var ir=!1;if(zt){var Jr=zt.getSpacedPoints(pt);ir=!0,Ct=!1;var Mn=zt.computeFrenetFrames(pt,!1),br=new I,vn=new I,ni=new I}Ct||(Kt=yt=Bt=cr=0);var Hn;xt=K.extractPoints(xt),K=xt.shape;var Ci=xt.holes;if(!Ld.isClockWise(K)){K=K.reverse();var si=0;for(Hn=Ci.length;si<Hn;si++){var to=Ci[si];Ld.isClockWise(to)&&(Ci[si]=to.reverse())}}var go=Ld.triangulateShape(K,Ci),Ze=K;for(si=0,Hn=Ci.length;si<Hn;si++)to=Ci[si],K=K.concat(to);var st,Vt=K.length,Ar,jr=go.length;xt=[];var tr=0,ut=Ze.length,Sr=ut-1;for(st=tr+1;tr<ut;tr++,Sr++,st++)Sr===ut&&(Sr=0),st===ut&&(st=0),xt[tr]=pe(Ze[tr],Ze[Sr],Ze[st]);zt=[];var Zr=xt.concat();for(si=0,Hn=Ci.length;si<Hn;si++){to=Ci[si];var En=[];for(tr=0,ut=to.length,Sr=ut-1,st=tr+1;tr<ut;tr++,Sr++,st++)Sr===ut&&(Sr=0),st===ut&&(st=0),En[tr]=pe(to[tr],to[Sr],to[st]);zt.push(En),Zr=Zr.concat(En)}for(Sr=0;Sr<cr;Sr++){ut=Sr/cr;var $r=Bt*Math.cos(ut*Math.PI/2);for(st=yt*Math.sin(ut*Math.PI/2)+Kt,tr=0,ut=Ze.length;tr<ut;tr++){var zr=$(Ze[tr],xt[tr],st);xe(zr.x,zr.y,-$r)}for(si=0,Hn=Ci.length;si<Hn;si++)for(to=Ci[si],En=zt[si],tr=0,ut=to.length;tr<ut;tr++)zr=$(to[tr],En[tr],st),xe(zr.x,zr.y,-$r)}for(st=yt+Kt,tr=0;tr<Vt;tr++)zr=Ct?$(K[tr],Zr[tr],st):K[tr],ir?(vn.copy(Mn.normals[0]).multiplyScalar(zr.x),br.copy(Mn.binormals[0]).multiplyScalar(zr.y),ni.copy(Jr[0]).add(vn).add(br),xe(ni.x,ni.y,ni.z)):xe(zr.x,zr.y,0);for(ut=1;ut<=pt;ut++)for(tr=0;tr<Vt;tr++)zr=Ct?$(K[tr],Zr[tr],st):K[tr],ir?(vn.copy(Mn.normals[ut]).multiplyScalar(zr.x),br.copy(Mn.binormals[ut]).multiplyScalar(zr.y),ni.copy(Jr[ut]).add(vn).add(br),xe(ni.x,ni.y,ni.z)):xe(zr.x,zr.y,Lt/pt*ut);for(Sr=cr-1;0<=Sr;Sr--){for(ut=Sr/cr,$r=Bt*Math.cos(ut*Math.PI/2),st=yt*Math.sin(ut*Math.PI/2)+Kt,tr=0,ut=Ze.length;tr<ut;tr++)zr=$(Ze[tr],xt[tr],st),xe(zr.x,zr.y,Lt+$r);for(si=0,Hn=Ci.length;si<Hn;si++)for(to=Ci[si],En=zt[si],tr=0,ut=to.length;tr<ut;tr++)zr=$(to[tr],En[tr],st),ir?xe(zr.x,zr.y+Jr[pt-1].y,Jr[pt-1].x+$r):xe(zr.x,zr.y,Lt+$r)}(function(){var Ur=E.length/3;if(Ct){var Wn=0*Vt;for(tr=0;tr<jr;tr++)Ar=go[tr],ye(Ar[2]+Wn,Ar[1]+Wn,Ar[0]+Wn);for(Wn=Vt*(pt+2*cr),tr=0;tr<jr;tr++)Ar=go[tr],ye(Ar[0]+Wn,Ar[1]+Wn,Ar[2]+Wn)}else{for(tr=0;tr<jr;tr++)Ar=go[tr],ye(Ar[2],Ar[1],Ar[0]);for(tr=0;tr<jr;tr++)Ar=go[tr],ye(Ar[0]+Vt*pt,Ar[1]+Vt*pt,Ar[2]+Vt*pt)}w.addGroup(Ur,E.length/3-Ur,0)})(),function(){var Ur=E.length/3,Wn=0;for(fe(Ze,Wn),Wn+=Ze.length,si=0,Hn=Ci.length;si<Hn;si++)to=Ci[si],fe(to,Wn),Wn+=to.length;w.addGroup(Ur,E.length/3-Ur,1)}()}Fe.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:r,options:l},r=Array.isArray(r)?r:[r];for(var w=this,E=[],O=[],B=0,Y=r.length;B<Y;B++)f(r[B]);this.setAttribute("position",new ke(E,3)),this.setAttribute("uv",new ke(O,2)),this.computeVertexNormals()}function w6(r,l,f){if(f.shapes=[],Array.isArray(r))for(var w=0,E=r.length;w<E;w++)f.shapes.push(r[w].uuid);else f.shapes.push(r.uuid);return l.extrudePath!==void 0&&(f.options.extrudePath=l.extrudePath.toJSON()),f}function SA(r,l){Ne.call(this),this.type="TextGeometry",this.parameters={text:r,parameters:l},this.fromBufferGeometry(new Ly(r,l)),this.mergeVertices()}function Ly(r,l){l=l||{};var f=l.font;if(!f||!f.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Ne;r=f.generateShapes(r,l.size),l.depth=l.height!==void 0?l.height:50,l.bevelThickness===void 0&&(l.bevelThickness=10),l.bevelSize===void 0&&(l.bevelSize=8),l.bevelEnabled===void 0&&(l.bevelEnabled=!1),df.call(this,r,l),this.type="TextBufferGeometry"}function TA(r,l,f,w,E,O,B){Ne.call(this),this.type="SphereGeometry",this.parameters={radius:r,widthSegments:l,heightSegments:f,phiStart:w,phiLength:E,thetaStart:O,thetaLength:B},this.fromBufferGeometry(new uv(r,l,f,w,E,O,B)),this.mergeVertices()}function uv(r,l,f,w,E,O,B){Fe.call(this),this.type="SphereBufferGeometry",this.parameters={radius:r,widthSegments:l,heightSegments:f,phiStart:w,phiLength:E,thetaStart:O,thetaLength:B},r=r||1,l=Math.max(3,Math.floor(l)||8),f=Math.max(2,Math.floor(f)||6),w=w!==void 0?w:0,E=E!==void 0?E:2*Math.PI,O=O!==void 0?O:0,B=B!==void 0?B:Math.PI;var Y=Math.min(O+B,Math.PI),K,$,pe=0,fe=[],xe=new I,ye=new I,Me=[],Oe=[],it=[],xt=[];for($=0;$<=f;$++){var pt=[],Lt=$/f,Ct=0;for($==0&&O==0?Ct=.5/l:$==f&&Y==Math.PI&&(Ct=-.5/l),K=0;K<=l;K++){var Bt=K/l;xe.x=-r*Math.cos(w+Bt*E)*Math.sin(O+Lt*B),xe.y=r*Math.cos(O+Lt*B),xe.z=r*Math.sin(w+Bt*E)*Math.sin(O+Lt*B),Oe.push(xe.x,xe.y,xe.z),ye.copy(xe).normalize(),it.push(ye.x,ye.y,ye.z),xt.push(Bt+Ct,1-Lt),pt.push(pe++)}fe.push(pt)}for($=0;$<f;$++)for(K=0;K<l;K++)r=fe[$][K+1],w=fe[$][K],E=fe[$+1][K],B=fe[$+1][K+1],($!==0||0<O)&&Me.push(r,w,B),($!==f-1||Y<Math.PI)&&Me.push(w,E,B);this.setIndex(Me),this.setAttribute("position",new ke(Oe,3)),this.setAttribute("normal",new ke(it,3)),this.setAttribute("uv",new ke(xt,2))}function EA(r,l,f,w,E,O){Ne.call(this),this.type="RingGeometry",this.parameters={innerRadius:r,outerRadius:l,thetaSegments:f,phiSegments:w,thetaStart:E,thetaLength:O},this.fromBufferGeometry(new Py(r,l,f,w,E,O)),this.mergeVertices()}function Py(r,l,f,w,E,O){Fe.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:r,outerRadius:l,thetaSegments:f,phiSegments:w,thetaStart:E,thetaLength:O},r=r||.5,l=l||1,E=E!==void 0?E:0,O=O!==void 0?O:2*Math.PI,f=f!==void 0?Math.max(3,f):8,w=w!==void 0?Math.max(1,w):1;var B=[],Y=[],K=[],$=[],pe=r,fe=(l-r)/w,xe=new I,ye=new v,Me,Oe;for(Me=0;Me<=w;Me++){for(Oe=0;Oe<=f;Oe++)r=E+Oe/f*O,xe.x=pe*Math.cos(r),xe.y=pe*Math.sin(r),Y.push(xe.x,xe.y,xe.z),K.push(0,0,1),ye.x=(xe.x/l+1)/2,ye.y=(xe.y/l+1)/2,$.push(ye.x,ye.y);pe+=fe}for(Me=0;Me<w;Me++)for(l=Me*(f+1),Oe=0;Oe<f;Oe++)r=Oe+l,E=r+f+1,O=r+f+2,pe=r+1,B.push(r,E,pe),B.push(E,O,pe);this.setIndex(B),this.setAttribute("position",new ke(Y,3)),this.setAttribute("normal",new ke(K,3)),this.setAttribute("uv",new ke($,2))}function IA(r,l,f,w){Ne.call(this),this.type="LatheGeometry",this.parameters={points:r,segments:l,phiStart:f,phiLength:w},this.fromBufferGeometry(new Oy(r,l,f,w)),this.mergeVertices()}function Oy(r,l,f,w){Fe.call(this),this.type="LatheBufferGeometry",this.parameters={points:r,segments:l,phiStart:f,phiLength:w},l=Math.floor(l)||12,f=f||0,w=w||2*Math.PI,w=ci.clamp(w,0,2*Math.PI);var E=[],O=[],B=[],Y=1/l,K=new I,$=new v,pe;for(pe=0;pe<=l;pe++){var fe=f+pe*Y*w,xe=Math.sin(fe),ye=Math.cos(fe);for(fe=0;fe<=r.length-1;fe++)K.x=r[fe].x*xe,K.y=r[fe].y,K.z=r[fe].x*ye,O.push(K.x,K.y,K.z),$.x=pe/l,$.y=fe/(r.length-1),B.push($.x,$.y)}for(pe=0;pe<l;pe++)for(fe=0;fe<r.length-1;fe++)f=fe+pe*r.length,Y=f+r.length,K=f+r.length+1,$=f+1,E.push(f,Y,$),E.push(Y,K,$);if(this.setIndex(E),this.setAttribute("position",new ke(O,3)),this.setAttribute("uv",new ke(B,2)),this.computeVertexNormals(),w===2*Math.PI)for(w=this.attributes.normal.array,E=new I,O=new I,B=new I,f=l*r.length*3,fe=pe=0;pe<r.length;pe++,fe+=3)E.x=w[fe+0],E.y=w[fe+1],E.z=w[fe+2],O.x=w[f+fe+0],O.y=w[f+fe+1],O.z=w[f+fe+2],B.addVectors(E,O).normalize(),w[fe+0]=w[f+fe+0]=B.x,w[fe+1]=w[f+fe+1]=B.y,w[fe+2]=w[f+fe+2]=B.z}function cv(r,l){Ne.call(this),this.type="ShapeGeometry",(typeof l>"u"?"undefined":Jc(l))==="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),l=l.curveSegments),this.parameters={shapes:r,curveSegments:l},this.fromBufferGeometry(new hv(r,l)),this.mergeVertices()}function hv(r,l){function f(pe){var fe,xe=E.length/3;pe=pe.extractPoints(l);var ye=pe.shape,Me=pe.holes;for(Ld.isClockWise(ye)===!1&&(ye=ye.reverse()),pe=0,fe=Me.length;pe<fe;pe++){var Oe=Me[pe];Ld.isClockWise(Oe)===!0&&(Me[pe]=Oe.reverse())}var it=Ld.triangulateShape(ye,Me);for(pe=0,fe=Me.length;pe<fe;pe++)Oe=Me[pe],ye=ye.concat(Oe);for(pe=0,fe=ye.length;pe<fe;pe++)Oe=ye[pe],E.push(Oe.x,Oe.y,0),O.push(0,0,1),B.push(Oe.x,Oe.y);for(pe=0,fe=it.length;pe<fe;pe++)ye=it[pe],w.push(ye[0]+xe,ye[1]+xe,ye[2]+xe),K+=3}Fe.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:r,curveSegments:l},l=l||12;var w=[],E=[],O=[],B=[],Y=0,K=0;if(Array.isArray(r)===!1)f(r);else for(var $=0;$<r.length;$++)f(r[$]),this.addGroup(Y,K,$),Y+=K,K=0;this.setIndex(w),this.setAttribute("position",new ke(E,3)),this.setAttribute("normal",new ke(O,3)),this.setAttribute("uv",new ke(B,2))}function C6(r,l){if(l.shapes=[],Array.isArray(r))for(var f=0,w=r.length;f<w;f++)l.shapes.push(r[f].uuid);else l.shapes.push(r.uuid);return l}function Dy(r,l){Fe.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:l};var f=[];l=Math.cos(ci.DEG2RAD*(l!==void 0?l:1));var w=[0,0],E={},O=["a","b","c"];if(r.isBufferGeometry){var B=new Ne;B.fromBufferGeometry(r)}else B=r.clone();B.mergeVertices(),B.computeFaceNormals(),r=B.vertices,B=B.faces;for(var Y=0,K=B.length;Y<K;Y++)for(var $=B[Y],pe=0;3>pe;pe++){var fe=$[O[pe]],xe=$[O[(pe+1)%3]];w[0]=Math.min(fe,xe),w[1]=Math.max(fe,xe),fe=w[0]+","+w[1],E[fe]===void 0?E[fe]={index1:w[0],index2:w[1],face1:Y,face2:void 0}:E[fe].face2=Y}for(fe in E)w=E[fe],(w.face2===void 0||B[w.face1].normal.dot(B[w.face2].normal)<=l)&&(O=r[w.index1],f.push(O.x,O.y,O.z),O=r[w.index2],f.push(O.x,O.y,O.z));this.setAttribute("position",new ke(f,3))}function fv(r,l,f,w,E,O,B,Y){Ne.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:r,radiusBottom:l,height:f,radialSegments:w,heightSegments:E,openEnded:O,thetaStart:B,thetaLength:Y},this.fromBufferGeometry(new Ad(r,l,f,w,E,O,B,Y)),this.mergeVertices()}function Ad(r,l,f,w,E,O,B,Y){function K(pt){var Lt,Ct=new v,Bt=new I,yt=0,Kt=pt===!0?r:l,cr=pt===!0?1:-1,zt=Me;for(Lt=1;Lt<=w;Lt++)fe.push(0,it*cr,0),xe.push(0,cr,0),ye.push(.5,.5),Me++;var yr=Me;for(Lt=0;Lt<=w;Lt++){var ir=Lt/w*Y+B,Jr=Math.cos(ir);ir=Math.sin(ir),Bt.x=Kt*ir,Bt.y=it*cr,Bt.z=Kt*Jr,fe.push(Bt.x,Bt.y,Bt.z),xe.push(0,cr,0),Ct.x=.5*Jr+.5,Ct.y=.5*ir*cr+.5,ye.push(Ct.x,Ct.y),Me++}for(Lt=0;Lt<w;Lt++)Ct=zt+Lt,Bt=yr+Lt,pt===!0?pe.push(Bt,Bt+1,Ct):pe.push(Bt+1,Bt,Ct),yt+=3;$.addGroup(xt,yt,pt===!0?1:2),xt+=yt}Fe.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:r,radiusBottom:l,height:f,radialSegments:w,heightSegments:E,openEnded:O,thetaStart:B,thetaLength:Y};var $=this;r=r!==void 0?r:1,l=l!==void 0?l:1,f=f||1,w=Math.floor(w)||8,E=Math.floor(E)||1,O=O!==void 0?O:!1,B=B!==void 0?B:0,Y=Y!==void 0?Y:2*Math.PI;var pe=[],fe=[],xe=[],ye=[],Me=0,Oe=[],it=f/2,xt=0;(function(){var pt,Lt,Ct=new I,Bt=new I,yt=0,Kt=(l-r)/f;for(Lt=0;Lt<=E;Lt++){var cr=[],zt=Lt/E,yr=zt*(l-r)+r;for(pt=0;pt<=w;pt++){var ir=pt/w,Jr=ir*Y+B,Mn=Math.sin(Jr);Jr=Math.cos(Jr),Bt.x=yr*Mn,Bt.y=-zt*f+it,Bt.z=yr*Jr,fe.push(Bt.x,Bt.y,Bt.z),Ct.set(Mn,Kt,Jr).normalize(),xe.push(Ct.x,Ct.y,Ct.z),ye.push(ir,1-zt),cr.push(Me++)}Oe.push(cr)}for(pt=0;pt<w;pt++)for(Lt=0;Lt<E;Lt++)Ct=Oe[Lt+1][pt],Bt=Oe[Lt+1][pt+1],Kt=Oe[Lt][pt+1],pe.push(Oe[Lt][pt],Ct,Kt),pe.push(Ct,Bt,Kt),yt+=6;$.addGroup(xt,yt,0),xt+=yt})(),O===!1&&(0<r&&K(!0),0<l&&K(!1)),this.setIndex(pe),this.setAttribute("position",new ke(fe,3)),this.setAttribute("normal",new ke(xe,3)),this.setAttribute("uv",new ke(ye,2))}function RA(r,l,f,w,E,O,B){fv.call(this,0,r,l,f,w,E,O,B),this.type="ConeGeometry",this.parameters={radius:r,height:l,radialSegments:f,heightSegments:w,openEnded:E,thetaStart:O,thetaLength:B}}function LA(r,l,f,w,E,O,B){Ad.call(this,0,r,l,f,w,E,O,B),this.type="ConeBufferGeometry",this.parameters={radius:r,height:l,radialSegments:f,heightSegments:w,openEnded:E,thetaStart:O,thetaLength:B}}function PA(r,l,f,w){Ne.call(this),this.type="CircleGeometry",this.parameters={radius:r,segments:l,thetaStart:f,thetaLength:w},this.fromBufferGeometry(new by(r,l,f,w)),this.mergeVertices()}function by(r,l,f,w){Fe.call(this),this.type="CircleBufferGeometry",this.parameters={radius:r,segments:l,thetaStart:f,thetaLength:w},r=r||1,l=l!==void 0?Math.max(3,l):8,f=f!==void 0?f:0,w=w!==void 0?w:2*Math.PI;var E=[],O=[],B=[],Y=[],K,$=new I,pe=new v;O.push(0,0,0),B.push(0,0,1),Y.push(.5,.5);var fe=0;for(K=3;fe<=l;fe++,K+=3){var xe=f+fe/l*w;$.x=r*Math.cos(xe),$.y=r*Math.sin(xe),O.push($.x,$.y,$.z),B.push(0,0,1),pe.x=(O[K]/r+1)/2,pe.y=(O[K+1]/r+1)/2,Y.push(pe.x,pe.y)}for(K=1;K<=l;K++)E.push(K,K+1,0);this.setIndex(E),this.setAttribute("position",new ke(O,3)),this.setAttribute("normal",new ke(B,3)),this.setAttribute("uv",new ke(Y,2))}function dv(r){Et.call(this),this.type="ShadowMaterial",this.color=new He(0),this.transparent=!0,this.setValues(r)}function wd(r){kt.call(this,r),this.type="RawShaderMaterial"}function pf(r){Et.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new He(16777215),this.roughness=1,this.metalness=0,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new He(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new v(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexTangents=this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(r)}function pv(r){pf.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new v(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(r)}function rm(r){Et.call(this),this.type="MeshPhongMaterial",this.color=new He(16777215),this.specular=new He(1118481),this.shininess=30,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new He(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new v(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(r)}function mv(r){Et.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new He(16777215),this.specular=new He(1118481),this.shininess=30,this.lightMap=this.gradientMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new He(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new v(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=this.specularMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(r)}function gv(r){Et.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new v(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.fog=!1,this.setValues(r)}function vv(r){Et.call(this),this.type="MeshLambertMaterial",this.color=new He(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new He(0),this.emissiveIntensity=1,this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(r)}function yv(r){Et.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new He(16777215),this.bumpMap=this.map=this.matcap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new v(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(r)}function xv(r){$o.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(r)}function _u(r,l,f,w){this.parameterPositions=r,this._cachedIndex=0,this.resultBuffer=w!==void 0?w:new l.constructor(f),this.sampleValues=l,this.valueSize=f}function IM(r,l,f,w){_u.call(this,r,l,f,w),this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function OA(r,l,f,w){_u.call(this,r,l,f,w)}function RM(r,l,f,w){_u.call(this,r,l,f,w)}function Ps(r,l,f,w){if(r===void 0)throw Error("THREE.KeyframeTrack: track name is undefined");if(l===void 0||l.length===0)throw Error("THREE.KeyframeTrack: no keyframes in track named "+r);this.name=r,this.times=ea.convertArray(l,this.TimeBufferType),this.values=ea.convertArray(f,this.ValueBufferType),this.setInterpolation(w||this.DefaultInterpolation)}function LM(r,l,f){Ps.call(this,r,l,f)}function PM(r,l,f,w){Ps.call(this,r,l,f,w)}function Fy(r,l,f,w){Ps.call(this,r,l,f,w)}function OM(r,l,f,w){_u.call(this,r,l,f,w)}function DA(r,l,f,w){Ps.call(this,r,l,f,w)}function DM(r,l,f,w){Ps.call(this,r,l,f,w)}function Ny(r,l,f,w){Ps.call(this,r,l,f,w)}function fc(r,l,f,w){this.name=r,this.tracks=f,this.duration=l!==void 0?l:-1,this.blendMode=w!==void 0?w:2500,this.uuid=ci.generateUUID(),0>this.duration&&this.resetDuration()}function tW(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Fy;case"vector":case"vector2":case"vector3":case"vector4":return Ny;case"color":return PM;case"quaternion":return DA;case"bool":case"boolean":return LM;case"string":return DM}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function rW(r){if(r.type===void 0)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var l=tW(r.type);if(r.times===void 0){var f=[],w=[];ea.flattenJSON(r.keys,f,w,"value"),r.times=f,r.values=w}return l.parse!==void 0?l.parse(r):new l(r.name,r.times,r.values,r.interpolation)}function dR(r,l,f){var w=this,E=!1,O=0,B=0,Y=void 0,K=[];this.onStart=void 0,this.onLoad=r,this.onProgress=l,this.onError=f,this.itemStart=function($){B++,E===!1&&w.onStart!==void 0&&w.onStart($,O,B),E=!0},this.itemEnd=function($){O++,w.onProgress!==void 0&&w.onProgress($,O,B),O===B&&(E=!1,w.onLoad!==void 0)&&w.onLoad()},this.itemError=function($){w.onError!==void 0&&w.onError($)},this.resolveURL=function($){return Y?Y($):$},this.setURLModifier=function($){return Y=$,this},this.addHandler=function($,pe){return K.push($,pe),this},this.removeHandler=function($){return $=K.indexOf($),$!==-1&&K.splice($,2),this},this.getHandler=function($){for(var pe=0,fe=K.length;pe<fe;pe+=2){var xe=K[pe],ye=K[pe+1];if(xe.global&&(xe.lastIndex=0),xe.test($))return ye}return null}}function fo(r){this.manager=r!==void 0?r:pF,this.crossOrigin="anonymous",this.resourcePath=this.path="",this.requestHeader={}}function dc(r){fo.call(this,r)}function pR(r){fo.call(this,r)}function mR(r){fo.call(this,r)}function bM(r){fo.call(this,r)}function By(r){fo.call(this,r)}function FM(r){fo.call(this,r)}function NM(r){fo.call(this,r)}function Pn(){this.type="Curve",this.arcLengthDivisions=200}function Mu(r,l,f,w,E,O,B,Y){Pn.call(this),this.type="EllipseCurve",this.aX=r||0,this.aY=l||0,this.xRadius=f||1,this.yRadius=w||1,this.aStartAngle=E||0,this.aEndAngle=O||2*Math.PI,this.aClockwise=B||!1,this.aRotation=Y||0}function zy(r,l,f,w,E,O){Mu.call(this,r,l,f,f,w,E,O),this.type="ArcCurve"}function gR(){var r=0,l=0,f=0,w=0;return{initCatmullRom:function(E,O,B,Y,K){E=K*(B-E),Y=K*(Y-O),r=O,l=E,f=-3*O+3*B-2*E-Y,w=2*O-2*B+E+Y},initNonuniformCatmullRom:function(E,O,B,Y,K,$,pe){E=((O-E)/K-(B-E)/(K+$)+(B-O)/$)*$,Y=((B-O)/$-(Y-O)/($+pe)+(Y-B)/pe)*$,r=O,l=E,f=-3*O+3*B-2*E-Y,w=2*O-2*B+E+Y},calc:function(E){var O=E*E;return r+l*E+f*O+w*O*E}}}function tl(r,l,f,w){Pn.call(this),this.type="CatmullRomCurve3",this.points=r||[],this.closed=l||!1,this.curveType=f||"centripetal",this.tension=w||.5}function _6(r,l,f,w,E){l=.5*(w-l),E=.5*(E-f);var O=r*r;return(2*f-2*w+l+E)*r*O+(-3*f+3*w-2*l-E)*O+l*r+f}function bA(r,l,f,w){var E=1-r;return E*E*l+2*(1-r)*r*f+r*r*w}function FA(r,l,f,w,E){var O=1-r,B=1-r;return O*O*O*l+3*B*B*r*f+3*(1-r)*r*r*w+r*r*r*E}function sh(r,l,f,w){Pn.call(this),this.type="CubicBezierCurve",this.v0=r||new v,this.v1=l||new v,this.v2=f||new v,this.v3=w||new v}function mf(r,l,f,w){Pn.call(this),this.type="CubicBezierCurve3",this.v0=r||new I,this.v1=l||new I,this.v2=f||new I,this.v3=w||new I}function eu(r,l){Pn.call(this),this.type="LineCurve",this.v1=r||new v,this.v2=l||new v}function lh(r,l){Pn.call(this),this.type="LineCurve3",this.v1=r||new I,this.v2=l||new I}function uh(r,l,f){Pn.call(this),this.type="QuadraticBezierCurve",this.v0=r||new v,this.v1=l||new v,this.v2=f||new v}function gf(r,l,f){Pn.call(this),this.type="QuadraticBezierCurve3",this.v0=r||new I,this.v1=l||new I,this.v2=f||new I}function ch(r){Pn.call(this),this.type="SplineCurve",this.points=r||[]}function Cd(){Pn.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function hh(r){Cd.call(this),this.type="Path",this.currentPoint=new v,r&&this.setFromPoints(r)}function nm(r){hh.call(this,r),this.uuid=ci.generateUUID(),this.type="Shape",this.holes=[]}function zo(r,l){G.call(this),this.type="Light",this.color=new He(r),this.intensity=l!==void 0?l:1,this.receiveShadow=void 0}function BM(r,l,f){zo.call(this,r,f),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(G.DefaultUp),this.updateMatrix(),this.groundColor=new He(l)}function vf(r){this.camera=r,this.bias=0,this.radius=1,this.mapSize=new v(512,512),this.mapPass=this.map=null,this.matrix=new b,this._frustum=new Nr,this._frameExtents=new v(1,1),this._viewportCount=1,this._viewports=[new y(0,0,1,1)]}function zM(){vf.call(this,new Jt(50,1,.5,500))}function UM(r,l,f,w,E,O){zo.call(this,r,l),this.type="SpotLight",this.position.copy(G.DefaultUp),this.updateMatrix(),this.target=new G,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(B){this.intensity=B/Math.PI}}),this.distance=f!==void 0?f:0,this.angle=w!==void 0?w:Math.PI/3,this.penumbra=E!==void 0?E:0,this.decay=O!==void 0?O:1,this.shadow=new zM}function vR(){vf.call(this,new Jt(90,1,.5,500)),this._frameExtents=new v(4,2),this._viewportCount=6,this._viewports=[new y(2,1,1,1),new y(0,1,1,1),new y(3,1,1,1),new y(1,1,1,1),new y(3,0,1,1),new y(1,0,1,1)],this._cubeDirections=[new I(1,0,0),new I(-1,0,0),new I(0,0,1),new I(0,0,-1),new I(0,1,0),new I(0,-1,0)],this._cubeUps=[new I(0,1,0),new I(0,1,0),new I(0,1,0),new I(0,1,0),new I(0,0,1),new I(0,0,-1)]}function kM(r,l,f,w){zo.call(this,r,l),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(E){this.intensity=E/(4*Math.PI)}}),this.distance=f!==void 0?f:0,this.decay=w!==void 0?w:1,this.shadow=new vR}function Uy(r,l,f,w,E,O){Ot.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=r!==void 0?r:-1,this.right=l!==void 0?l:1,this.top=f!==void 0?f:1,this.bottom=w!==void 0?w:-1,this.near=E!==void 0?E:.1,this.far=O!==void 0?O:2e3,this.updateProjectionMatrix()}function HM(){vf.call(this,new Uy(-5,5,5,-5,.5,500))}function jM(r,l){zo.call(this,r,l),this.type="DirectionalLight",this.position.copy(G.DefaultUp),this.updateMatrix(),this.target=new G,this.shadow=new HM}function GM(r,l){zo.call(this,r,l),this.type="AmbientLight",this.castShadow=void 0}function VM(r,l,f,w){zo.call(this,r,l),this.type="RectAreaLight",this.width=f!==void 0?f:10,this.height=w!==void 0?w:10}function WM(){this.coefficients=[];for(var r=0;9>r;r++)this.coefficients.push(new I)}function pc(r,l){zo.call(this,void 0,l),this.type="LightProbe",this.sh=r!==void 0?r:new WM}function XM(r){fo.call(this,r),this.textures={}}function NA(){Fe.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function YM(r,l,f,w){typeof f=="number"&&(w=f,f=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Nt.call(this,r,l,f),this.meshPerAttribute=w||1}function ZM(r){fo.call(this,r)}function qM(r){fo.call(this,r)}function yR(r){typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),fo.call(this,r),this.options=void 0}function xR(){this.type="ShapePath",this.color=new He,this.subPaths=[],this.currentPath=null}function AR(r){this.type="Font",this.data=r}function wR(r){fo.call(this,r)}function KM(r){fo.call(this,r)}function CR(r,l,f){pc.call(this,void 0,f),r=new He().set(r),f=new He().set(l),l=new I(r.r,r.g,r.b),r=new I(f.r,f.g,f.b),f=Math.sqrt(Math.PI);var w=f*Math.sqrt(.75);this.sh.coefficients[0].copy(l).add(r).multiplyScalar(f),this.sh.coefficients[1].copy(l).sub(r).multiplyScalar(w)}function _R(r,l){pc.call(this,void 0,l),r=new He().set(r),this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}function M6(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Jt,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Jt,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function MR(r){this.autoStart=r!==void 0?r:!0,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1}function SR(){G.call(this),this.type="AudioListener",this.context=dL.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new MR}function ky(r){G.call(this),this.type="Audio",this.listener=r,this.context=r.context,this.gain=this.context.createGain(),this.gain.connect(r.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.offset=this.loopEnd=this.loopStart=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._progress=this._startedAt=0,this.filters=[]}function TR(r){ky.call(this,r),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function ER(r,l){this.analyser=r.context.createAnalyser(),this.analyser.fftSize=l!==void 0?l:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),r.getOutput().connect(this.analyser)}function IR(r,l,f){switch(this.binding=r,this.valueSize=f,l){case"quaternion":r=this._slerp,l=this._slerpAdditive;var w=this._setAdditiveIdentityQuaternion;this.buffer=new Float64Array(6*f),this._workIndex=5;break;case"string":case"bool":l=r=this._select,w=this._setAdditiveIdentityOther,this.buffer=Array(5*f);break;default:r=this._lerp,l=this._lerpAdditive,w=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*f)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=l,this._setIdentity=w,this._origIndex=3,this._addIndex=4,this.referenceCount=this.useCount=this.cumulativeWeightAdditive=this.cumulativeWeight=0}function S6(r,l,f){f=f||rl.parseTrackName(l),this._targetGroup=r,this._bindings=r.subscribe_(l,f)}function rl(r,l,f){this.path=l,this.parsedPath=f||rl.parseTrackName(l),this.node=rl.findNode(r,this.parsedPath.nodeName)||r,this.rootNode=r}function T6(){this.uuid=ci.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var r={};this._indicesByUUID=r;for(var l=0,f=arguments.length;l!==f;++l)r[arguments[l].uuid]=l;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var w=this;this.stats={objects:{get total(){return w._objects.length},get inUse(){return this.total-w.nCachedObjects_}},get bindingsPerObject(){return w._bindings.length}}}function E6(r,l,f,w){this._mixer=r,this._clip=l,this._localRoot=f||null,this.blendMode=w||l.blendMode,r=l.tracks,l=r.length,f=Array(l),w={endingStart:2400,endingEnd:2400};for(var E=0;E!==l;++E){var O=r[E].createInterpolant(null);f[E]=O,O.settings=w}this._interpolantSettings=w,this._interpolants=f,this._propertyBindings=Array(l),this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function RR(r){this._root=r,this._initMemoryManager(),this.time=this._accuIndex=0,this.timeScale=1}function JM(r,l){typeof r=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),r=l),this.value=r}function LR(r,l,f){xd.call(this,r,l),this.meshPerAttribute=f||1}function PR(r,l,f,w){this.ray=new Te(r,l),this.near=f||0,this.far=w||1/0,this.camera=null,this.layers=new k,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Rn(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function I6(r,l){return r.distance-l.distance}function OR(r,l,f,w){if(r.layers.test(l.layers)&&r.raycast(l,f),w===!0){r=r.children,w=0;for(var E=r.length;w<E;w++)OR(r[w],l,f,!0)}}function R6(r,l,f){return this.radius=r!==void 0?r:1,this.phi=l!==void 0?l:0,this.theta=f!==void 0?f:0,this}function L6(r,l,f){return this.radius=r!==void 0?r:1,this.theta=l!==void 0?l:0,this.y=f!==void 0?f:0,this}function DR(r,l){this.min=r!==void 0?r:new v(1/0,1/0),this.max=l!==void 0?l:new v(-1/0,-1/0)}function bR(r,l){this.start=r!==void 0?r:new I,this.end=l!==void 0?l:new I}function BA(r){G.call(this),this.material=r,this.render=function(){},this.hasUvs=this.hasColors=this.hasNormals=this.hasPositions=!1,this.uvArray=this.colorArray=this.normalArray=this.positionArray=null,this.count=0}function Hy(r,l){G.call(this),this.light=r,this.light.updateMatrixWorld(),this.matrix=r.matrixWorld,this.matrixAutoUpdate=!1,this.color=l,r=new Fe,l=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var f=0,w=1;32>f;f++,w++){var E=f/32*Math.PI*2,O=w/32*Math.PI*2;l.push(Math.cos(E),Math.sin(E),1,Math.cos(O),Math.sin(O),1)}r.setAttribute("position",new ke(l,3)),l=new $o({fog:!1,toneMapped:!1}),this.cone=new ca(r,l),this.add(this.cone),this.update()}function P6(r){var l=[];r&&r.isBone&&l.push(r);for(var f=0;f<r.children.length;f++)l.push.apply(l,P6(r.children[f]));return l}function Av(r){for(var l=P6(r),f=new Fe,w=[],E=[],O=new He(0,0,1),B=new He(0,1,0),Y=0;Y<l.length;Y++){var K=l[Y];K.parent&&K.parent.isBone&&(w.push(0,0,0),w.push(0,0,0),E.push(O.r,O.g,O.b),E.push(B.r,B.g,B.b))}f.setAttribute("position",new ke(w,3)),f.setAttribute("color",new ke(E,3)),w=new $o({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0}),ca.call(this,f,w),this.type="SkeletonHelper",this.root=r,this.bones=l,this.matrix=r.matrixWorld,this.matrixAutoUpdate=!1}function jy(r,l,f){this.light=r,this.light.updateMatrixWorld(),this.color=f,r=new uv(l,4,2),l=new xr({wireframe:!0,fog:!1,toneMapped:!1}),Qe.call(this,r,l),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Gy(r,l,f){G.call(this),this.light=r,this.light.updateMatrixWorld(),this.matrix=r.matrixWorld,this.matrixAutoUpdate=!1,this.color=f,r=new av(l),r.rotateY(.5*Math.PI),this.material=new xr({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0),l=r.getAttribute("position"),l=new Float32Array(3*l.count),r.setAttribute("color",new Nt(l,3)),this.add(new Qe(r,this.material)),this.update()}function QM(r,l,f,w){r=r||10,l=l||10,f=new He(f!==void 0?f:4473924),w=new He(w!==void 0?w:8947848);var E=l/2,O=r/l,B=r/2;r=[];for(var Y=[],K=0,$=0,pe=-B;K<=l;K++,pe+=O){r.push(-B,0,pe,B,0,pe),r.push(pe,0,-B,pe,0,B);var fe=K===E?f:w;fe.toArray(Y,$),$+=3,fe.toArray(Y,$),$+=3,fe.toArray(Y,$),$+=3,fe.toArray(Y,$),$+=3}l=new Fe,l.setAttribute("position",new ke(r,3)),l.setAttribute("color",new ke(Y,3)),f=new $o({vertexColors:!0,toneMapped:!1}),ca.call(this,l,f),this.type="GridHelper"}function $M(r,l,f,w,E,O){r=r||10,l=l||16,f=f||8,w=w||64,E=new He(E!==void 0?E:4473924),O=new He(O!==void 0?O:8947848);var B=[],Y=[],K;for(K=0;K<=l;K++){var $=K/l*2*Math.PI,pe=Math.sin($)*r;$=Math.cos($)*r,B.push(0,0,0),B.push(pe,0,$);var fe=K&1?E:O;Y.push(fe.r,fe.g,fe.b),Y.push(fe.r,fe.g,fe.b)}for(K=0;K<=f;K++){fe=K&1?E:O;var xe=r-r/f*K;for(l=0;l<w;l++)$=l/w*2*Math.PI,pe=Math.sin($)*xe,$=Math.cos($)*xe,B.push(pe,0,$),Y.push(fe.r,fe.g,fe.b),$=(l+1)/w*2*Math.PI,pe=Math.sin($)*xe,$=Math.cos($)*xe,B.push(pe,0,$),Y.push(fe.r,fe.g,fe.b)}r=new Fe,r.setAttribute("position",new ke(B,3)),r.setAttribute("color",new ke(Y,3)),B=new $o({vertexColors:!0,toneMapped:!1}),ca.call(this,r,B),this.type="PolarGridHelper"}function Vy(r,l,f){G.call(this),this.light=r,this.light.updateMatrixWorld(),this.matrix=r.matrixWorld,this.matrixAutoUpdate=!1,this.color=f,l===void 0&&(l=1),r=new Fe,r.setAttribute("position",new ke([-l,l,0,l,l,0,l,-l,0,-l,-l,0,-l,l,0],3)),l=new $o({fog:!1,toneMapped:!1}),this.lightPlane=new Cu(r,l),this.add(this.lightPlane),r=new Fe,r.setAttribute("position",new ke([0,0,0,0,0,1],3)),this.targetLine=new Cu(r,l),this.add(this.targetLine),this.update()}function zA(r){function l(ye,Me,Oe){f(ye,Oe),f(Me,Oe)}function f(ye,Me){O.push(0,0,0),B.push(Me.r,Me.g,Me.b),Y[ye]===void 0&&(Y[ye]=[]),Y[ye].push(O.length/3-1)}var w=new Fe,E=new $o({color:16777215,vertexColors:!0,toneMapped:!1}),O=[],B=[],Y={},K=new He(16755200),$=new He(16711680),pe=new He(43775),fe=new He(16777215),xe=new He(3355443);l("n1","n2",K),l("n2","n4",K),l("n4","n3",K),l("n3","n1",K),l("f1","f2",K),l("f2","f4",K),l("f4","f3",K),l("f3","f1",K),l("n1","f1",K),l("n2","f2",K),l("n3","f3",K),l("n4","f4",K),l("p","n1",$),l("p","n2",$),l("p","n3",$),l("p","n4",$),l("u1","u2",pe),l("u2","u3",pe),l("u3","u1",pe),l("c","t",fe),l("p","c",xe),l("cn1","cn2",xe),l("cn3","cn4",xe),l("cf1","cf2",xe),l("cf3","cf4",xe),w.setAttribute("position",new ke(O,3)),w.setAttribute("color",new ke(B,3)),ca.call(this,w,E),this.type="CameraHelper",this.camera=r,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=r.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=Y,this.update()}function ba(r,l,f,w,E,O,B){if(IS.set(E,O,B).unproject(w),r=l[r],r!==void 0)for(f=f.getAttribute("position"),l=0,w=r.length;l<w;l++)f.setXYZ(r[l],IS.x,IS.y,IS.z)}function _d(r,l){this.object=r,l===void 0&&(l=16776960),r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var f=new Float32Array(24),w=new Fe;w.setIndex(new Nt(r,1)),w.setAttribute("position",new Nt(f,3)),ca.call(this,w,new $o({color:l,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}function UA(r,l){this.type="Box3Helper",this.box=r,l=l||16776960,r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var f=new Fe;f.setIndex(new Nt(r,1)),f.setAttribute("position",new ke([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),ca.call(this,f,new $o({color:l,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}function kA(r,l,f){this.plane=r,this.size=l===void 0?1:l,r=f!==void 0?f:16776960,l=new Fe,l.setAttribute("position",new ke([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),l.computeBoundingSphere(),Cu.call(this,l,new $o({color:r,toneMapped:!1})),this.type="PlaneHelper",l=new Fe,l.setAttribute("position",new ke([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),l.computeBoundingSphere(),this.add(new Qe(l,new xr({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}function Md(r,l,f,w,E,O){G.call(this),this.type="ArrowHelper",r===void 0&&(r=new I(0,0,1)),l===void 0&&(l=new I(0,0,0)),f===void 0&&(f=1),w===void 0&&(w=16776960),E===void 0&&(E=.2*f),O===void 0&&(O=.2*E),LS===void 0&&(LS=new Fe,LS.setAttribute("position",new ke([0,0,0,0,1,0],3)),mL=new Ad(0,.5,1,5,1),mL.translate(0,-.5,0)),this.position.copy(l),this.line=new Cu(LS,new $o({color:w,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Qe(mL,new xr({color:w,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(r),this.setLength(f,E,O)}function HA(r){r=r||1;var l=[0,0,0,r,0,0,0,0,0,0,r,0,0,0,0,0,0,r];r=new Fe,r.setAttribute("position",new ke(l,3)),r.setAttribute("color",new ke([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),l=new $o({vertexColors:!0,toneMapped:!1}),ca.call(this,r,l),this.type="AxesHelper"}function FR(r){this._renderer=r,this._pingPongRenderTarget=null,r=new Float32Array(20);var l=new I(0,1,0);r=new wd({defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:l},inputEncoding:{value:Cf[3e3]},outputEncoding:{value:Cf[3e3]}},vertexShader:BR(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform int samples;
uniform float weights[n];
uniform bool latitudinal;
uniform float dTheta;
uniform float mipInt;
uniform vec3 poleAxis;

`+zR()+`

#define ENVMAP_TYPE_CUBE_UV
#include <cube_uv_reflection_fragment>

vec3 getSample(float theta, vec3 axis) {
	float cosTheta = cos(theta);
	// Rodrigues' axis-angle rotation
	vec3 sampleDirection = vOutputDirection * cosTheta
		+ cross(axis, vOutputDirection) * sin(theta)
		+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);
	return bilinearCubeUV(envMap, sampleDirection, mipInt);
}

void main() {
	vec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);
	if (all(equal(axis, vec3(0.0))))
		axis = vec3(vOutputDirection.z, 0.0, - vOutputDirection.x);
	axis = normalize(axis);
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb += weights[0] * getSample(0.0, axis);
	for (int i = 1; i < n; i++) {
		if (i >= samples)
			break;
		float theta = dTheta * float(i);
		gl_FragColor.rgb += weights[i] * getSample(-1.0 * theta, axis);
		gl_FragColor.rgb += weights[i] * getSample(theta, axis);
	}
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:0,depthTest:!1,depthWrite:!1}),r.type="SphericalGaussianBlur",this._blurMaterial=r,this._cubemapShader=this._equirectShader=null,this._compileMaterial(this._blurMaterial)}function O6(r){return r=new T(3*wf,3*wf,r),r.texture.mapping=306,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function NR(r,l,f,w,E){r.viewport.set(l,f,w,E),r.scissor.set(l,f,w,E)}function D6(){var r=new v(1,1);return r=new wd({uniforms:{envMap:{value:null},texelSize:{value:r},inputEncoding:{value:Cf[3e3]},outputEncoding:{value:Cf[3e3]}},vertexShader:BR(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform vec2 texelSize;

`+zR()+`

#include <common>

void main() {
	gl_FragColor = vec4(0.0);
	vec3 outputDirection = normalize(vOutputDirection);
	vec2 uv = equirectUv( outputDirection );
	vec2 f = fract(uv / texelSize - 0.5);
	uv -= f * texelSize;
	vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x += texelSize.x;
	vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.y += texelSize.y;
	vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x -= texelSize.x;
	vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	vec3 tm = mix(tl, tr, f.x);
	vec3 bm = mix(bl, br, f.x);
	gl_FragColor.rgb = mix(tm, bm, f.y);
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:0,depthTest:!1,depthWrite:!1}),r.type="EquirectangularToCubeUV",r}function b6(){var r=new wd({uniforms:{envMap:{value:null},inputEncoding:{value:Cf[3e3]},outputEncoding:{value:Cf[3e3]}},vertexShader:BR(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform samplerCube envMap;

`+zR()+`

void main() {
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:0,depthTest:!1,depthWrite:!1});return r.type="CubemapToCubeUV",r}function BR(){return`
precision mediump float;
precision mediump int;
attribute vec3 position;
attribute vec2 uv;
attribute float faceIndex;
varying vec3 vOutputDirection;

// RH coordinate system; PMREM face-indexing convention
vec3 getDirection(vec2 uv, float face) {
	uv = 2.0 * uv - 1.0;
	vec3 direction = vec3(uv, 1.0);
	if (face == 0.0) {
		direction = direction.zyx; // ( 1, v, u ) pos x
	} else if (face == 1.0) {
		direction = direction.xzy;
		direction.xz *= -1.0; // ( -u, 1, -v ) pos y
	} else if (face == 2.0) {
		direction.x *= -1.0; // ( -u, v, 1 ) pos z
	} else if (face == 3.0) {
		direction = direction.zyx;
		direction.xz *= -1.0; // ( -1, v, -u ) neg x
	} else if (face == 4.0) {
		direction = direction.xzy;
		direction.xy *= -1.0; // ( -u, -1, v ) neg y
	} else if (face == 5.0) {
		direction.z *= -1.0; // ( u, v, -1 ) neg z
	}
	return direction;
}

void main() {
	vOutputDirection = getDirection(uv, faceIndex);
	gl_Position = vec4( position, 1.0 );
}
	`}function zR(){return`
uniform int inputEncoding;
uniform int outputEncoding;

#include <encodings_pars_fragment>

vec4 inputTexelToLinear(vec4 value){
	if(inputEncoding == 0){
		return value;
	}else if(inputEncoding == 1){
		return sRGBToLinear(value);
	}else if(inputEncoding == 2){
		return RGBEToLinear(value);
	}else if(inputEncoding == 3){
		return RGBMToLinear(value, 7.0);
	}else if(inputEncoding == 4){
		return RGBMToLinear(value, 16.0);
	}else if(inputEncoding == 5){
		return RGBDToLinear(value, 256.0);
	}else{
		return GammaToLinear(value, 2.2);
	}
}

vec4 linearToOutputTexel(vec4 value){
	if(outputEncoding == 0){
		return value;
	}else if(outputEncoding == 1){
		return LinearTosRGB(value);
	}else if(outputEncoding == 2){
		return LinearToRGBE(value);
	}else if(outputEncoding == 3){
		return LinearToRGBM(value, 7.0);
	}else if(outputEncoding == 4){
		return LinearToRGBM(value, 16.0);
	}else if(outputEncoding == 5){
		return LinearToRGBD(value, 256.0);
	}else{
		return LinearToGamma(value, 2.2);
	}
}

vec4 envMapTexelToLinear(vec4 color) {
	return inputTexelToLinear(color);
}
	`}function F6(r){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),tl.call(this,r),this.type="catmullrom",this.closed=!0}function N6(r){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),tl.call(this,r),this.type="catmullrom"}function UR(r){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),tl.call(this,r),this.type="catmullrom"}Bo===void 0&&(Number.EPSILON=Math.pow(2,-52)),kp===void 0&&(Number.isInteger=function(r){return typeof r=="number"&&isFinite(r)&&Math.floor(r)===r}),lf===void 0&&(Math.sign=function(r){return 0>r?-1:0<r?1:+r}),!("name"in Function.prototype)&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),Pe===void 0&&(Object.assign=function(r){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var l=Object(r),f=1;f<arguments.length;f++){var w=arguments[f];if(w!=null)for(var E in w)Object.prototype.hasOwnProperty.call(w,E)&&(l[E]=w[E])}return l}),Pe(c.prototype,{addEventListener:function(r,l){this._listeners===void 0&&(this._listeners={});var f=this._listeners;f[r]===void 0&&(f[r]=[]),f[r].indexOf(l)===-1&&f[r].push(l)},hasEventListener:function(r,l){if(this._listeners===void 0)return!1;var f=this._listeners;return f[r]!==void 0&&f[r].indexOf(l)!==-1},removeEventListener:function(r,l){this._listeners!==void 0&&(r=this._listeners[r],r!==void 0&&(l=r.indexOf(l),l!==-1&&r.splice(l,1)))},dispatchEvent:function(r){if(this._listeners!==void 0){var l=this._listeners[r.type];if(l!==void 0){r.target=this,l=l.slice(0);for(var f=0,w=l.length;f<w;f++)l[f].call(this,r)}}}});for(var Os=[],jA=0;256>jA;jA++)Os[jA]=(16>jA?"0":"")+jA.toString(16);var ci={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var r=4294967295*Math.random()|0,l=4294967295*Math.random()|0,f=4294967295*Math.random()|0,w=4294967295*Math.random()|0;return(Os[r&255]+Os[r>>8&255]+Os[r>>16&255]+Os[r>>24&255]+"-"+Os[l&255]+Os[l>>8&255]+"-"+Os[l>>16&15|64]+Os[l>>24&255]+"-"+Os[f&63|128]+Os[f>>8&255]+"-"+Os[f>>16&255]+Os[f>>24&255]+Os[w&255]+Os[w>>8&255]+Os[w>>16&255]+Os[w>>24&255]).toUpperCase()},clamp:function(r,l,f){return Math.max(l,Math.min(f,r))},euclideanModulo:function(r,l){return(r%l+l)%l},mapLinear:function(r,l,f,w,E){return w+(r-l)*(E-w)/(f-l)},lerp:function(r,l,f){return(1-f)*r+f*l},smoothstep:function(r,l,f){return r<=l?0:r>=f?1:(r=(r-l)/(f-l),r*r*(3-2*r))},smootherstep:function(r,l,f){return r<=l?0:r>=f?1:(r=(r-l)/(f-l),r*r*r*(r*(6*r-15)+10))},randInt:function(r,l){return r+Math.floor(Math.random()*(l-r+1))},randFloat:function(r,l){return r+Math.random()*(l-r)},randFloatSpread:function(r){return r*(.5-Math.random())},degToRad:function(r){return r*ci.DEG2RAD},radToDeg:function(r){return r*ci.RAD2DEG},isPowerOfTwo:function(r){return(r&r-1)===0&&r!==0},ceilPowerOfTwo:function(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))},floorPowerOfTwo:function(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))},setQuaternionFromProperEuler:function(r,l,f,w,E){var O=Math.cos,B=Math.sin,Y=O(f/2);f=B(f/2);var K=O((l+w)/2),$=B((l+w)/2),pe=O((l-w)/2),fe=B((l-w)/2);switch(O=O((w-l)/2),l=B((w-l)/2),E){case"XYX":r.set(Y*$,f*pe,f*fe,Y*K);break;case"YZY":r.set(f*fe,Y*$,f*pe,Y*K);break;case"ZXZ":r.set(f*pe,f*fe,Y*$,Y*K);break;case"XZX":r.set(Y*$,f*l,f*O,Y*K);break;case"YXY":r.set(f*O,Y*$,f*l,Y*K);break;case"ZYZ":r.set(f*l,f*O,Y*$,Y*K);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+E)}}};Rn(v.prototype,{width:{get:function(){return this.x},set:function(r){this.x=r}},height:{get:function(){return this.y},set:function(r){this.y=r}}}),Pe(v.prototype,{isVector2:!0,set:function(r,l){return this.x=r,this.y=l,this},setScalar:function(r){return this.y=this.x=r,this},setX:function(r){return this.x=r,this},setY:function(r){return this.y=r,this},setComponent:function(r,l){switch(r){case 0:this.x=l;break;case 1:this.y=l;break;default:throw Error("index is out of range: "+r)}return this},getComponent:function(r){switch(r){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+r)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(r){return this.x=r.x,this.y=r.y,this},add:function(r,l){return l!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(r,l)):(this.x+=r.x,this.y+=r.y,this)},addScalar:function(r){return this.x+=r,this.y+=r,this},addVectors:function(r,l){return this.x=r.x+l.x,this.y=r.y+l.y,this},addScaledVector:function(r,l){return this.x+=r.x*l,this.y+=r.y*l,this},sub:function(r,l){return l!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(r,l)):(this.x-=r.x,this.y-=r.y,this)},subScalar:function(r){return this.x-=r,this.y-=r,this},subVectors:function(r,l){return this.x=r.x-l.x,this.y=r.y-l.y,this},multiply:function(r){return this.x*=r.x,this.y*=r.y,this},multiplyScalar:function(r){return this.x*=r,this.y*=r,this},divide:function(r){return this.x/=r.x,this.y/=r.y,this},divideScalar:function(r){return this.multiplyScalar(1/r)},applyMatrix3:function(r){var l=this.x,f=this.y;return r=r.elements,this.x=r[0]*l+r[3]*f+r[6],this.y=r[1]*l+r[4]*f+r[7],this},min:function(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this},max:function(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this},clamp:function(r,l){return this.x=Math.max(r.x,Math.min(l.x,this.x)),this.y=Math.max(r.y,Math.min(l.y,this.y)),this},clampScalar:function(r,l){return this.x=Math.max(r,Math.min(l,this.x)),this.y=Math.max(r,Math.min(l,this.y)),this},clampLength:function(r,l){var f=this.length();return this.divideScalar(f||1).multiplyScalar(Math.max(r,Math.min(l,f)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(r){return this.x*r.x+this.y*r.y},cross:function(r){return this.x*r.y-this.y*r.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){return Math.atan2(-this.y,-this.x)+Math.PI},distanceTo:function(r){return Math.sqrt(this.distanceToSquared(r))},distanceToSquared:function(r){var l=this.x-r.x;return r=this.y-r.y,l*l+r*r},manhattanDistanceTo:function(r){return Math.abs(this.x-r.x)+Math.abs(this.y-r.y)},setLength:function(r){return this.normalize().multiplyScalar(r)},lerp:function(r,l){return this.x+=(r.x-this.x)*l,this.y+=(r.y-this.y)*l,this},lerpVectors:function(r,l,f){return this.x=r.x+(l.x-r.x)*f,this.y=r.y+(l.y-r.y)*f,this},equals:function(r){return r.x===this.x&&r.y===this.y},fromArray:function(r,l){return l===void 0&&(l=0),this.x=r[l],this.y=r[l+1],this},toArray:function(r,l){return r===void 0&&(r=[]),l===void 0&&(l=0),r[l]=this.x,r[l+1]=this.y,r},fromBufferAttribute:function(r,l,f){return f!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=r.getX(l),this.y=r.getY(l),this},rotateAround:function(r,l){var f=Math.cos(l);l=Math.sin(l);var w=this.x-r.x,E=this.y-r.y;return this.x=w*f-E*l+r.x,this.y=w*l+E*f+r.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}}),Pe(g.prototype,{isMatrix3:!0,set:function(r,l,f,w,E,O,B,Y,K){var $=this.elements;return $[0]=r,$[1]=w,$[2]=B,$[3]=l,$[4]=E,$[5]=Y,$[6]=f,$[7]=O,$[8]=K,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(r){var l=this.elements;return r=r.elements,l[0]=r[0],l[1]=r[1],l[2]=r[2],l[3]=r[3],l[4]=r[4],l[5]=r[5],l[6]=r[6],l[7]=r[7],l[8]=r[8],this},extractBasis:function(r,l,f){return r.setFromMatrix3Column(this,0),l.setFromMatrix3Column(this,1),f.setFromMatrix3Column(this,2),this},setFromMatrix4:function(r){return r=r.elements,this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this},multiply:function(r){return this.multiplyMatrices(this,r)},premultiply:function(r){return this.multiplyMatrices(r,this)},multiplyMatrices:function(r,l){var f=r.elements,w=l.elements;l=this.elements,r=f[0];var E=f[3],O=f[6],B=f[1],Y=f[4],K=f[7],$=f[2],pe=f[5];f=f[8];var fe=w[0],xe=w[3],ye=w[6],Me=w[1],Oe=w[4],it=w[7],xt=w[2],pt=w[5];return w=w[8],l[0]=r*fe+E*Me+O*xt,l[3]=r*xe+E*Oe+O*pt,l[6]=r*ye+E*it+O*w,l[1]=B*fe+Y*Me+K*xt,l[4]=B*xe+Y*Oe+K*pt,l[7]=B*ye+Y*it+K*w,l[2]=$*fe+pe*Me+f*xt,l[5]=$*xe+pe*Oe+f*pt,l[8]=$*ye+pe*it+f*w,this},multiplyScalar:function(r){var l=this.elements;return l[0]*=r,l[3]*=r,l[6]*=r,l[1]*=r,l[4]*=r,l[7]*=r,l[2]*=r,l[5]*=r,l[8]*=r,this},determinant:function(){var r=this.elements,l=r[0],f=r[1],w=r[2],E=r[3],O=r[4],B=r[5],Y=r[6],K=r[7];return r=r[8],l*O*r-l*B*K-f*E*r+f*B*Y+w*E*K-w*O*Y},getInverse:function(r,l){l!==void 0&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var f=r.elements;r=this.elements,l=f[0];var w=f[1],E=f[2],O=f[3],B=f[4],Y=f[5],K=f[6],$=f[7];f=f[8];var pe=f*B-Y*$,fe=Y*K-f*O,xe=$*O-B*K,ye=l*pe+w*fe+E*xe;return ye===0?this.set(0,0,0,0,0,0,0,0,0):(ye=1/ye,r[0]=pe*ye,r[1]=(E*$-f*w)*ye,r[2]=(Y*w-E*B)*ye,r[3]=fe*ye,r[4]=(f*l-E*K)*ye,r[5]=(E*O-Y*l)*ye,r[6]=xe*ye,r[7]=(w*K-$*l)*ye,r[8]=(B*l-w*O)*ye,this)},transpose:function(){var r=this.elements,l=r[1];return r[1]=r[3],r[3]=l,l=r[2],r[2]=r[6],r[6]=l,l=r[5],r[5]=r[7],r[7]=l,this},getNormalMatrix:function(r){return this.setFromMatrix4(r).getInverse(this).transpose()},transposeIntoArray:function(r){var l=this.elements;return r[0]=l[0],r[1]=l[3],r[2]=l[6],r[3]=l[1],r[4]=l[4],r[5]=l[7],r[6]=l[2],r[7]=l[5],r[8]=l[8],this},setUvTransform:function(r,l,f,w,E,O,B){var Y=Math.cos(E);E=Math.sin(E),this.set(f*Y,f*E,-f*(Y*O+E*B)+O+r,-w*E,w*Y,-w*(-E*O+Y*B)+B+l,0,0,1)},scale:function(r,l){var f=this.elements;return f[0]*=r,f[3]*=r,f[6]*=r,f[1]*=l,f[4]*=l,f[7]*=l,this},rotate:function(r){var l=Math.cos(r);r=Math.sin(r);var f=this.elements,w=f[0],E=f[3],O=f[6],B=f[1],Y=f[4],K=f[7];return f[0]=l*w+r*B,f[3]=l*E+r*Y,f[6]=l*O+r*K,f[1]=-r*w+l*B,f[4]=-r*E+l*Y,f[7]=-r*O+l*K,this},translate:function(r,l){var f=this.elements;return f[0]+=r*f[2],f[3]+=r*f[5],f[6]+=r*f[8],f[1]+=l*f[2],f[4]+=l*f[5],f[7]+=l*f[8],this},equals:function(r){var l=this.elements;r=r.elements;for(var f=0;9>f;f++)if(l[f]!==r[f])return!1;return!0},fromArray:function(r,l){l===void 0&&(l=0);for(var f=0;9>f;f++)this.elements[f]=r[f+l];return this},toArray:function(r,l){r===void 0&&(r=[]),l===void 0&&(l=0);var f=this.elements;return r[l]=f[0],r[l+1]=f[1],r[l+2]=f[2],r[l+3]=f[3],r[l+4]=f[4],r[l+5]=f[5],r[l+6]=f[6],r[l+7]=f[7],r[l+8]=f[8],r}});var Wy,im={getDataURL:function(r){if(typeof HTMLCanvasElement>"u")return r.src;if(!(r instanceof HTMLCanvasElement)){Wy===void 0&&(Wy=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Wy.width=r.width,Wy.height=r.height;var l=Wy.getContext("2d");r instanceof ImageData?l.putImageData(r,0,0):l.drawImage(r,0,0,r.width,r.height),r=Wy}return 2048<r.width||2048<r.height?r.toDataURL("image/jpeg",.6):r.toDataURL("image/png")}},nW=0;A.DEFAULT_IMAGE=void 0,A.DEFAULT_MAPPING=300,A.prototype=Pe(Le(c.prototype),{constructor:A,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.name=r.name,this.image=r.image,this.mipmaps=r.mipmaps.slice(0),this.mapping=r.mapping,this.wrapS=r.wrapS,this.wrapT=r.wrapT,this.magFilter=r.magFilter,this.minFilter=r.minFilter,this.anisotropy=r.anisotropy,this.format=r.format,this.internalFormat=r.internalFormat,this.type=r.type,this.offset.copy(r.offset),this.repeat.copy(r.repeat),this.center.copy(r.center),this.rotation=r.rotation,this.matrixAutoUpdate=r.matrixAutoUpdate,this.matrix.copy(r.matrix),this.generateMipmaps=r.generateMipmaps,this.premultiplyAlpha=r.premultiplyAlpha,this.flipY=r.flipY,this.unpackAlignment=r.unpackAlignment,this.encoding=r.encoding,this},toJSON:function(r){var l=r===void 0||typeof r=="string";if(!l&&r.textures[this.uuid]!==void 0)return r.textures[this.uuid];var f={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){var w=this.image;if(w.uuid===void 0&&(w.uuid=ci.generateUUID()),!l&&r.images[w.uuid]===void 0){if(Array.isArray(w))for(var E=[],O=0,B=w.length;O<B;O++)E.push(im.getDataURL(w[O]));else E=im.getDataURL(w);r.images[w.uuid]={uuid:w.uuid,url:E}}f.image=w.uuid}return l||(r.textures[this.uuid]=f),f},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(r){if(this.mapping!==300)return r;if(r.applyMatrix3(this.matrix),0>r.x||1<r.x)switch(this.wrapS){case 1e3:r.x-=Math.floor(r.x);break;case 1001:r.x=0>r.x?0:1;break;case 1002:r.x=Math.abs(Math.floor(r.x)%2)===1?Math.ceil(r.x)-r.x:r.x-Math.floor(r.x)}if(0>r.y||1<r.y)switch(this.wrapT){case 1e3:r.y-=Math.floor(r.y);break;case 1001:r.y=0>r.y?0:1;break;case 1002:r.y=Math.abs(Math.floor(r.y)%2)===1?Math.ceil(r.y)-r.y:r.y-Math.floor(r.y)}return this.flipY&&(r.y=1-r.y),r}}),Object.defineProperty(A.prototype,"needsUpdate",{set:function(r){r===!0&&this.version++}}),Rn(y.prototype,{width:{get:function(){return this.z},set:function(r){this.z=r}},height:{get:function(){return this.w},set:function(r){this.w=r}}}),Pe(y.prototype,{isVector4:!0,set:function(r,l,f,w){return this.x=r,this.y=l,this.z=f,this.w=w,this},setScalar:function(r){return this.w=this.z=this.y=this.x=r,this},setX:function(r){return this.x=r,this},setY:function(r){return this.y=r,this},setZ:function(r){return this.z=r,this},setW:function(r){return this.w=r,this},setComponent:function(r,l){switch(r){case 0:this.x=l;break;case 1:this.y=l;break;case 2:this.z=l;break;case 3:this.w=l;break;default:throw Error("index is out of range: "+r)}return this},getComponent:function(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+r)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(r){return this.x=r.x,this.y=r.y,this.z=r.z,this.w=r.w!==void 0?r.w:1,this},add:function(r,l){return l!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(r,l)):(this.x+=r.x,this.y+=r.y,this.z+=r.z,this.w+=r.w,this)},addScalar:function(r){return this.x+=r,this.y+=r,this.z+=r,this.w+=r,this},addVectors:function(r,l){return this.x=r.x+l.x,this.y=r.y+l.y,this.z=r.z+l.z,this.w=r.w+l.w,this},addScaledVector:function(r,l){return this.x+=r.x*l,this.y+=r.y*l,this.z+=r.z*l,this.w+=r.w*l,this},sub:function(r,l){return l!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(r,l)):(this.x-=r.x,this.y-=r.y,this.z-=r.z,this.w-=r.w,this)},subScalar:function(r){return this.x-=r,this.y-=r,this.z-=r,this.w-=r,this},subVectors:function(r,l){return this.x=r.x-l.x,this.y=r.y-l.y,this.z=r.z-l.z,this.w=r.w-l.w,this},multiplyScalar:function(r){return this.x*=r,this.y*=r,this.z*=r,this.w*=r,this},applyMatrix4:function(r){var l=this.x,f=this.y,w=this.z,E=this.w;return r=r.elements,this.x=r[0]*l+r[4]*f+r[8]*w+r[12]*E,this.y=r[1]*l+r[5]*f+r[9]*w+r[13]*E,this.z=r[2]*l+r[6]*f+r[10]*w+r[14]*E,this.w=r[3]*l+r[7]*f+r[11]*w+r[15]*E,this},divideScalar:function(r){return this.multiplyScalar(1/r)},setAxisAngleFromQuaternion:function(r){this.w=2*Math.acos(r.w);var l=Math.sqrt(1-r.w*r.w);return 1e-4>l?(this.x=1,this.z=this.y=0):(this.x=r.x/l,this.y=r.y/l,this.z=r.z/l),this},setAxisAngleFromRotationMatrix:function(r){r=r.elements;var l=r[0],f=r[4],w=r[8],E=r[1],O=r[5],B=r[9],Y=r[2],K=r[6],$=r[10];return .01>Math.abs(f-E)&&.01>Math.abs(w-Y)&&.01>Math.abs(B-K)?.1>Math.abs(f+E)&&.1>Math.abs(w+Y)&&.1>Math.abs(B+K)&&.1>Math.abs(l+O+$-3)?(this.set(1,0,0,0),this):(r=Math.PI,l=(l+1)/2,O=(O+1)/2,$=($+1)/2,f=(f+E)/4,w=(w+Y)/4,B=(B+K)/4,l>O&&l>$?.01>l?(K=0,f=Y=.707106781):(K=Math.sqrt(l),Y=f/K,f=w/K):O>$?.01>O?(K=.707106781,Y=0,f=.707106781):(Y=Math.sqrt(O),K=f/Y,f=B/Y):.01>$?(Y=K=.707106781,f=0):(f=Math.sqrt($),K=w/f,Y=B/f),this.set(K,Y,f,r),this):(r=Math.sqrt((K-B)*(K-B)+(w-Y)*(w-Y)+(E-f)*(E-f)),.001>Math.abs(r)&&(r=1),this.x=(K-B)/r,this.y=(w-Y)/r,this.z=(E-f)/r,this.w=Math.acos((l+O+$-1)/2),this)},min:function(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this.w=Math.min(this.w,r.w),this},max:function(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this.w=Math.max(this.w,r.w),this},clamp:function(r,l){return this.x=Math.max(r.x,Math.min(l.x,this.x)),this.y=Math.max(r.y,Math.min(l.y,this.y)),this.z=Math.max(r.z,Math.min(l.z,this.z)),this.w=Math.max(r.w,Math.min(l.w,this.w)),this},clampScalar:function(r,l){return this.x=Math.max(r,Math.min(l,this.x)),this.y=Math.max(r,Math.min(l,this.y)),this.z=Math.max(r,Math.min(l,this.z)),this.w=Math.max(r,Math.min(l,this.w)),this},clampLength:function(r,l){var f=this.length();return this.divideScalar(f||1).multiplyScalar(Math.max(r,Math.min(l,f)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(r){return this.x*r.x+this.y*r.y+this.z*r.z+this.w*r.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(r){return this.normalize().multiplyScalar(r)},lerp:function(r,l){return this.x+=(r.x-this.x)*l,this.y+=(r.y-this.y)*l,this.z+=(r.z-this.z)*l,this.w+=(r.w-this.w)*l,this},lerpVectors:function(r,l,f){return this.x=r.x+(l.x-r.x)*f,this.y=r.y+(l.y-r.y)*f,this.z=r.z+(l.z-r.z)*f,this.w=r.w+(l.w-r.w)*f,this},equals:function(r){return r.x===this.x&&r.y===this.y&&r.z===this.z&&r.w===this.w},fromArray:function(r,l){return l===void 0&&(l=0),this.x=r[l],this.y=r[l+1],this.z=r[l+2],this.w=r[l+3],this},toArray:function(r,l){return r===void 0&&(r=[]),l===void 0&&(l=0),r[l]=this.x,r[l+1]=this.y,r[l+2]=this.z,r[l+3]=this.w,r},fromBufferAttribute:function(r,l,f){return f!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=r.getX(l),this.y=r.getY(l),this.z=r.getZ(l),this.w=r.getW(l),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}),T.prototype=Pe(Le(c.prototype),{constructor:T,isWebGLRenderTarget:!0,setSize:function(r,l){(this.width!==r||this.height!==l)&&(this.width=r,this.height=l,this.texture.image.width=r,this.texture.image.height=l,this.dispose()),this.viewport.set(0,0,r,l),this.scissor.set(0,0,r,l)},clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.width=r.width,this.height=r.height,this.viewport.copy(r.viewport),this.texture=r.texture.clone(),this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),D.prototype=Pe(Le(T.prototype),{constructor:D,isWebGLMultisampleRenderTarget:!0,copy:function(r){return T.prototype.copy.call(this,r),this.samples=r.samples,this}}),Pe(X,{slerp:function(r,l,f,w){return f.copy(r).slerp(l,w)},slerpFlat:function(r,l,f,w,E,O,B){var Y=f[w+0],K=f[w+1],$=f[w+2];f=f[w+3],w=E[O+0];var pe=E[O+1],fe=E[O+2];if(E=E[O+3],f!==E||Y!==w||K!==pe||$!==fe){O=1-B;var xe=Y*w+K*pe+$*fe+f*E,ye=0<=xe?1:-1,Me=1-xe*xe;Me>Bo&&(Me=Math.sqrt(Me),xe=Math.atan2(Me,xe*ye),O=Math.sin(O*xe)/Me,B=Math.sin(B*xe)/Me),ye*=B,Y=Y*O+w*ye,K=K*O+pe*ye,$=$*O+fe*ye,f=f*O+E*ye,O===1-B&&(B=1/Math.sqrt(Y*Y+K*K+$*$+f*f),Y*=B,K*=B,$*=B,f*=B)}r[l]=Y,r[l+1]=K,r[l+2]=$,r[l+3]=f},multiplyQuaternionsFlat:function(r,l,f,w,E,O){var B=f[w],Y=f[w+1],K=f[w+2];f=f[w+3],w=E[O];var $=E[O+1],pe=E[O+2];return E=E[O+3],r[l]=B*E+f*w+Y*pe-K*$,r[l+1]=Y*E+f*$+K*w-B*pe,r[l+2]=K*E+f*pe+B*$-Y*w,r[l+3]=f*E-B*w-Y*$-K*pe,r}}),Rn(X.prototype,{x:{get:function(){return this._x},set:function(r){this._x=r,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(r){this._y=r,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(r){this._z=r,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(r){this._w=r,this._onChangeCallback()}}}),Pe(X.prototype,{isQuaternion:!0,set:function(r,l,f,w){return this._x=r,this._y=l,this._z=f,this._w=w,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(r){return this._x=r.x,this._y=r.y,this._z=r.z,this._w=r.w,this._onChangeCallback(),this},setFromEuler:function(r,l){if(!r||!r.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var f=r._x,w=r._y,E=r._z;r=r.order;var O=Math.cos,B=Math.sin,Y=O(f/2),K=O(w/2);switch(O=O(E/2),f=B(f/2),w=B(w/2),E=B(E/2),r){case"XYZ":this._x=f*K*O+Y*w*E,this._y=Y*w*O-f*K*E,this._z=Y*K*E+f*w*O,this._w=Y*K*O-f*w*E;break;case"YXZ":this._x=f*K*O+Y*w*E,this._y=Y*w*O-f*K*E,this._z=Y*K*E-f*w*O,this._w=Y*K*O+f*w*E;break;case"ZXY":this._x=f*K*O-Y*w*E,this._y=Y*w*O+f*K*E,this._z=Y*K*E+f*w*O,this._w=Y*K*O-f*w*E;break;case"ZYX":this._x=f*K*O-Y*w*E,this._y=Y*w*O+f*K*E,this._z=Y*K*E-f*w*O,this._w=Y*K*O+f*w*E;break;case"YZX":this._x=f*K*O+Y*w*E,this._y=Y*w*O+f*K*E,this._z=Y*K*E-f*w*O,this._w=Y*K*O-f*w*E;break;case"XZY":this._x=f*K*O-Y*w*E,this._y=Y*w*O-f*K*E,this._z=Y*K*E+f*w*O,this._w=Y*K*O+f*w*E;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+r)}return l!==!1&&this._onChangeCallback(),this},setFromAxisAngle:function(r,l){l/=2;var f=Math.sin(l);return this._x=r.x*f,this._y=r.y*f,this._z=r.z*f,this._w=Math.cos(l),this._onChangeCallback(),this},setFromRotationMatrix:function(r){var l=r.elements,f=l[0];r=l[4];var w=l[8],E=l[1],O=l[5],B=l[9],Y=l[2],K=l[6];l=l[10];var $=f+O+l;return 0<$?(f=.5/Math.sqrt($+1),this._w=.25/f,this._x=(K-B)*f,this._y=(w-Y)*f,this._z=(E-r)*f):f>O&&f>l?(f=2*Math.sqrt(1+f-O-l),this._w=(K-B)/f,this._x=.25*f,this._y=(r+E)/f,this._z=(w+Y)/f):O>l?(f=2*Math.sqrt(1+O-f-l),this._w=(w-Y)/f,this._x=(r+E)/f,this._y=.25*f,this._z=(B+K)/f):(f=2*Math.sqrt(1+l-f-O),this._w=(E-r)/f,this._x=(w+Y)/f,this._y=(B+K)/f,this._z=.25*f),this._onChangeCallback(),this},setFromUnitVectors:function(r,l){var f=r.dot(l)+1;return 1e-6>f?(f=0,Math.abs(r.x)>Math.abs(r.z)?(this._x=-r.y,this._y=r.x,this._z=0):(this._x=0,this._y=-r.z,this._z=r.y)):(this._x=r.y*l.z-r.z*l.y,this._y=r.z*l.x-r.x*l.z,this._z=r.x*l.y-r.y*l.x),this._w=f,this.normalize()},angleTo:function(r){return 2*Math.acos(Math.abs(ci.clamp(this.dot(r),-1,1)))},rotateTowards:function(r,l){var f=this.angleTo(r);return f===0?this:(this.slerp(r,Math.min(1,l/f)),this)},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(r){return this._x*r._x+this._y*r._y+this._z*r._z+this._w*r._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var r=this.length();return r===0?(this._z=this._y=this._x=0,this._w=1):(r=1/r,this._x*=r,this._y*=r,this._z*=r,this._w*=r),this._onChangeCallback(),this},multiply:function(r,l){return l!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(r,l)):this.multiplyQuaternions(this,r)},premultiply:function(r){return this.multiplyQuaternions(r,this)},multiplyQuaternions:function(r,l){var f=r._x,w=r._y,E=r._z;r=r._w;var O=l._x,B=l._y,Y=l._z;return l=l._w,this._x=f*l+r*O+w*Y-E*B,this._y=w*l+r*B+E*O-f*Y,this._z=E*l+r*Y+f*B-w*O,this._w=r*l-f*O-w*B-E*Y,this._onChangeCallback(),this},slerp:function(r,l){if(l===0)return this;if(l===1)return this.copy(r);var f=this._x,w=this._y,E=this._z,O=this._w,B=O*r._w+f*r._x+w*r._y+E*r._z;if(0>B?(this._w=-r._w,this._x=-r._x,this._y=-r._y,this._z=-r._z,B=-B):this.copy(r),1<=B)return this._w=O,this._x=f,this._y=w,this._z=E,this;if(r=1-B*B,r<=Bo)return B=1-l,this._w=B*O+l*this._w,this._x=B*f+l*this._x,this._y=B*w+l*this._y,this._z=B*E+l*this._z,this.normalize(),this._onChangeCallback(),this;r=Math.sqrt(r);var Y=Math.atan2(r,B);return B=Math.sin((1-l)*Y)/r,l=Math.sin(l*Y)/r,this._w=O*B+this._w*l,this._x=f*B+this._x*l,this._y=w*B+this._y*l,this._z=E*B+this._z*l,this._onChangeCallback(),this},equals:function(r){return r._x===this._x&&r._y===this._y&&r._z===this._z&&r._w===this._w},fromArray:function(r,l){return l===void 0&&(l=0),this._x=r[l],this._y=r[l+1],this._z=r[l+2],this._w=r[l+3],this._onChangeCallback(),this},toArray:function(r,l){return r===void 0&&(r=[]),l===void 0&&(l=0),r[l]=this._x,r[l+1]=this._y,r[l+2]=this._z,r[l+3]=this._w,r},fromBufferAttribute:function(r,l){return this._x=r.getX(l),this._y=r.getY(l),this._z=r.getZ(l),this._w=r.getW(l),this},_onChange:function(r){return this._onChangeCallback=r,this},_onChangeCallback:function(){}});var kR=new I,B6=new X;Pe(I.prototype,{isVector3:!0,set:function(r,l,f){return this.x=r,this.y=l,this.z=f,this},setScalar:function(r){return this.z=this.y=this.x=r,this},setX:function(r){return this.x=r,this},setY:function(r){return this.y=r,this},setZ:function(r){return this.z=r,this},setComponent:function(r,l){switch(r){case 0:this.x=l;break;case 1:this.y=l;break;case 2:this.z=l;break;default:throw Error("index is out of range: "+r)}return this},getComponent:function(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+r)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(r){return this.x=r.x,this.y=r.y,this.z=r.z,this},add:function(r,l){return l!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(r,l)):(this.x+=r.x,this.y+=r.y,this.z+=r.z,this)},addScalar:function(r){return this.x+=r,this.y+=r,this.z+=r,this},addVectors:function(r,l){return this.x=r.x+l.x,this.y=r.y+l.y,this.z=r.z+l.z,this},addScaledVector:function(r,l){return this.x+=r.x*l,this.y+=r.y*l,this.z+=r.z*l,this},sub:function(r,l){return l!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(r,l)):(this.x-=r.x,this.y-=r.y,this.z-=r.z,this)},subScalar:function(r){return this.x-=r,this.y-=r,this.z-=r,this},subVectors:function(r,l){return this.x=r.x-l.x,this.y=r.y-l.y,this.z=r.z-l.z,this},multiply:function(r,l){return l!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(r,l)):(this.x*=r.x,this.y*=r.y,this.z*=r.z,this)},multiplyScalar:function(r){return this.x*=r,this.y*=r,this.z*=r,this},multiplyVectors:function(r,l){return this.x=r.x*l.x,this.y=r.y*l.y,this.z=r.z*l.z,this},applyEuler:function(r){return r&&r.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(B6.setFromEuler(r))},applyAxisAngle:function(r,l){return this.applyQuaternion(B6.setFromAxisAngle(r,l))},applyMatrix3:function(r){var l=this.x,f=this.y,w=this.z;return r=r.elements,this.x=r[0]*l+r[3]*f+r[6]*w,this.y=r[1]*l+r[4]*f+r[7]*w,this.z=r[2]*l+r[5]*f+r[8]*w,this},applyNormalMatrix:function(r){return this.applyMatrix3(r).normalize()},applyMatrix4:function(r){var l=this.x,f=this.y,w=this.z;r=r.elements;var E=1/(r[3]*l+r[7]*f+r[11]*w+r[15]);return this.x=(r[0]*l+r[4]*f+r[8]*w+r[12])*E,this.y=(r[1]*l+r[5]*f+r[9]*w+r[13])*E,this.z=(r[2]*l+r[6]*f+r[10]*w+r[14])*E,this},applyQuaternion:function(r){var l=this.x,f=this.y,w=this.z,E=r.x,O=r.y,B=r.z;r=r.w;var Y=r*l+O*w-B*f,K=r*f+B*l-E*w,$=r*w+E*f-O*l;return l=-E*l-O*f-B*w,this.x=Y*r+l*-E+K*-B-$*-O,this.y=K*r+l*-O+$*-E-Y*-B,this.z=$*r+l*-B+Y*-O-K*-E,this},project:function(r){return this.applyMatrix4(r.matrixWorldInverse).applyMatrix4(r.projectionMatrix)},unproject:function(r){return this.applyMatrix4(r.projectionMatrixInverse).applyMatrix4(r.matrixWorld)},transformDirection:function(r){var l=this.x,f=this.y,w=this.z;return r=r.elements,this.x=r[0]*l+r[4]*f+r[8]*w,this.y=r[1]*l+r[5]*f+r[9]*w,this.z=r[2]*l+r[6]*f+r[10]*w,this.normalize()},divide:function(r){return this.x/=r.x,this.y/=r.y,this.z/=r.z,this},divideScalar:function(r){return this.multiplyScalar(1/r)},min:function(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this},max:function(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this},clamp:function(r,l){return this.x=Math.max(r.x,Math.min(l.x,this.x)),this.y=Math.max(r.y,Math.min(l.y,this.y)),this.z=Math.max(r.z,Math.min(l.z,this.z)),this},clampScalar:function(r,l){return this.x=Math.max(r,Math.min(l,this.x)),this.y=Math.max(r,Math.min(l,this.y)),this.z=Math.max(r,Math.min(l,this.z)),this},clampLength:function(r,l){var f=this.length();return this.divideScalar(f||1).multiplyScalar(Math.max(r,Math.min(l,f)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(r){return this.x*r.x+this.y*r.y+this.z*r.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(r){return this.normalize().multiplyScalar(r)},lerp:function(r,l){return this.x+=(r.x-this.x)*l,this.y+=(r.y-this.y)*l,this.z+=(r.z-this.z)*l,this},lerpVectors:function(r,l,f){return this.x=r.x+(l.x-r.x)*f,this.y=r.y+(l.y-r.y)*f,this.z=r.z+(l.z-r.z)*f,this},cross:function(r,l){return l!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(r,l)):this.crossVectors(this,r)},crossVectors:function(r,l){var f=r.x,w=r.y;r=r.z;var E=l.x,O=l.y;return l=l.z,this.x=w*l-r*O,this.y=r*E-f*l,this.z=f*O-w*E,this},projectOnVector:function(r){var l=r.lengthSq();return l===0?this.set(0,0,0):(l=r.dot(this)/l,this.copy(r).multiplyScalar(l))},projectOnPlane:function(r){return kR.copy(this).projectOnVector(r),this.sub(kR)},reflect:function(r){return this.sub(kR.copy(r).multiplyScalar(2*this.dot(r)))},angleTo:function(r){var l=Math.sqrt(this.lengthSq()*r.lengthSq());return l===0?Math.PI/2:(r=this.dot(r)/l,Math.acos(ci.clamp(r,-1,1)))},distanceTo:function(r){return Math.sqrt(this.distanceToSquared(r))},distanceToSquared:function(r){var l=this.x-r.x,f=this.y-r.y;return r=this.z-r.z,l*l+f*f+r*r},manhattanDistanceTo:function(r){return Math.abs(this.x-r.x)+Math.abs(this.y-r.y)+Math.abs(this.z-r.z)},setFromSpherical:function(r){return this.setFromSphericalCoords(r.radius,r.phi,r.theta)},setFromSphericalCoords:function(r,l,f){var w=Math.sin(l)*r;return this.x=w*Math.sin(f),this.y=Math.cos(l)*r,this.z=w*Math.cos(f),this},setFromCylindrical:function(r){return this.setFromCylindricalCoords(r.radius,r.theta,r.y)},setFromCylindricalCoords:function(r,l,f){return this.x=r*Math.sin(l),this.y=f,this.z=r*Math.cos(l),this},setFromMatrixPosition:function(r){return r=r.elements,this.x=r[12],this.y=r[13],this.z=r[14],this},setFromMatrixScale:function(r){var l=this.setFromMatrixColumn(r,0).length(),f=this.setFromMatrixColumn(r,1).length();return r=this.setFromMatrixColumn(r,2).length(),this.x=l,this.y=f,this.z=r,this},setFromMatrixColumn:function(r,l){return this.fromArray(r.elements,4*l)},setFromMatrix3Column:function(r,l){return this.fromArray(r.elements,3*l)},equals:function(r){return r.x===this.x&&r.y===this.y&&r.z===this.z},fromArray:function(r,l){return l===void 0&&(l=0),this.x=r[l],this.y=r[l+1],this.z=r[l+2],this},toArray:function(r,l){return r===void 0&&(r=[]),l===void 0&&(l=0),r[l]=this.x,r[l+1]=this.y,r[l+2]=this.z,r},fromBufferAttribute:function(r,l,f){return f!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=r.getX(l),this.y=r.getY(l),this.z=r.getZ(l),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var Xy=new I,fh=new b,iW=new I(0,0,0),oW=new I(1,1,1),om=new I,eS=new I,Su=new I;Pe(b.prototype,{isMatrix4:!0,set:function(r,l,f,w,E,O,B,Y,K,$,pe,fe,xe,ye,Me,Oe){var it=this.elements;return it[0]=r,it[4]=l,it[8]=f,it[12]=w,it[1]=E,it[5]=O,it[9]=B,it[13]=Y,it[2]=K,it[6]=$,it[10]=pe,it[14]=fe,it[3]=xe,it[7]=ye,it[11]=Me,it[15]=Oe,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new b().fromArray(this.elements)},copy:function(r){var l=this.elements;return r=r.elements,l[0]=r[0],l[1]=r[1],l[2]=r[2],l[3]=r[3],l[4]=r[4],l[5]=r[5],l[6]=r[6],l[7]=r[7],l[8]=r[8],l[9]=r[9],l[10]=r[10],l[11]=r[11],l[12]=r[12],l[13]=r[13],l[14]=r[14],l[15]=r[15],this},copyPosition:function(r){var l=this.elements;return r=r.elements,l[12]=r[12],l[13]=r[13],l[14]=r[14],this},extractBasis:function(r,l,f){return r.setFromMatrixColumn(this,0),l.setFromMatrixColumn(this,1),f.setFromMatrixColumn(this,2),this},makeBasis:function(r,l,f){return this.set(r.x,l.x,f.x,0,r.y,l.y,f.y,0,r.z,l.z,f.z,0,0,0,0,1),this},extractRotation:function(r){var l=this.elements,f=r.elements,w=1/Xy.setFromMatrixColumn(r,0).length(),E=1/Xy.setFromMatrixColumn(r,1).length();return r=1/Xy.setFromMatrixColumn(r,2).length(),l[0]=f[0]*w,l[1]=f[1]*w,l[2]=f[2]*w,l[3]=0,l[4]=f[4]*E,l[5]=f[5]*E,l[6]=f[6]*E,l[7]=0,l[8]=f[8]*r,l[9]=f[9]*r,l[10]=f[10]*r,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,this},makeRotationFromEuler:function(r){r&&r.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var l=this.elements,f=r.x,w=r.y,E=r.z,O=Math.cos(f);f=Math.sin(f);var B=Math.cos(w);w=Math.sin(w);var Y=Math.cos(E);if(E=Math.sin(E),r.order==="XYZ"){r=O*Y;var K=O*E,$=f*Y,pe=f*E;l[0]=B*Y,l[4]=-B*E,l[8]=w,l[1]=K+$*w,l[5]=r-pe*w,l[9]=-f*B,l[2]=pe-r*w,l[6]=$+K*w,l[10]=O*B}else r.order==="YXZ"?(r=B*Y,K=B*E,$=w*Y,pe=w*E,l[0]=r+pe*f,l[4]=$*f-K,l[8]=O*w,l[1]=O*E,l[5]=O*Y,l[9]=-f,l[2]=K*f-$,l[6]=pe+r*f,l[10]=O*B):r.order==="ZXY"?(r=B*Y,K=B*E,$=w*Y,pe=w*E,l[0]=r-pe*f,l[4]=-O*E,l[8]=$+K*f,l[1]=K+$*f,l[5]=O*Y,l[9]=pe-r*f,l[2]=-O*w,l[6]=f,l[10]=O*B):r.order==="ZYX"?(r=O*Y,K=O*E,$=f*Y,pe=f*E,l[0]=B*Y,l[4]=$*w-K,l[8]=r*w+pe,l[1]=B*E,l[5]=pe*w+r,l[9]=K*w-$,l[2]=-w,l[6]=f*B,l[10]=O*B):r.order==="YZX"?(r=O*B,K=O*w,$=f*B,pe=f*w,l[0]=B*Y,l[4]=pe-r*E,l[8]=$*E+K,l[1]=E,l[5]=O*Y,l[9]=-f*Y,l[2]=-w*Y,l[6]=K*E+$,l[10]=r-pe*E):r.order==="XZY"&&(r=O*B,K=O*w,$=f*B,pe=f*w,l[0]=B*Y,l[4]=-E,l[8]=w*Y,l[1]=r*E+pe,l[5]=O*Y,l[9]=K*E-$,l[2]=$*E-K,l[6]=f*Y,l[10]=pe*E+r);return l[3]=0,l[7]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,this},makeRotationFromQuaternion:function(r){return this.compose(iW,r,oW)},lookAt:function(r,l,f){var w=this.elements;return Su.subVectors(r,l),Su.lengthSq()===0&&(Su.z=1),Su.normalize(),om.crossVectors(f,Su),om.lengthSq()===0&&(Math.abs(f.z)===1?Su.x+=1e-4:Su.z+=1e-4,Su.normalize(),om.crossVectors(f,Su)),om.normalize(),eS.crossVectors(Su,om),w[0]=om.x,w[4]=eS.x,w[8]=Su.x,w[1]=om.y,w[5]=eS.y,w[9]=Su.y,w[2]=om.z,w[6]=eS.z,w[10]=Su.z,this},multiply:function(r,l){return l!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(r,l)):this.multiplyMatrices(this,r)},premultiply:function(r){return this.multiplyMatrices(r,this)},multiplyMatrices:function(r,l){var f=r.elements,w=l.elements;l=this.elements,r=f[0];var E=f[4],O=f[8],B=f[12],Y=f[1],K=f[5],$=f[9],pe=f[13],fe=f[2],xe=f[6],ye=f[10],Me=f[14],Oe=f[3],it=f[7],xt=f[11];f=f[15];var pt=w[0],Lt=w[4],Ct=w[8],Bt=w[12],yt=w[1],Kt=w[5],cr=w[9],zt=w[13],yr=w[2],ir=w[6],Jr=w[10],Mn=w[14],br=w[3],vn=w[7],ni=w[11];return w=w[15],l[0]=r*pt+E*yt+O*yr+B*br,l[4]=r*Lt+E*Kt+O*ir+B*vn,l[8]=r*Ct+E*cr+O*Jr+B*ni,l[12]=r*Bt+E*zt+O*Mn+B*w,l[1]=Y*pt+K*yt+$*yr+pe*br,l[5]=Y*Lt+K*Kt+$*ir+pe*vn,l[9]=Y*Ct+K*cr+$*Jr+pe*ni,l[13]=Y*Bt+K*zt+$*Mn+pe*w,l[2]=fe*pt+xe*yt+ye*yr+Me*br,l[6]=fe*Lt+xe*Kt+ye*ir+Me*vn,l[10]=fe*Ct+xe*cr+ye*Jr+Me*ni,l[14]=fe*Bt+xe*zt+ye*Mn+Me*w,l[3]=Oe*pt+it*yt+xt*yr+f*br,l[7]=Oe*Lt+it*Kt+xt*ir+f*vn,l[11]=Oe*Ct+it*cr+xt*Jr+f*ni,l[15]=Oe*Bt+it*zt+xt*Mn+f*w,this},multiplyScalar:function(r){var l=this.elements;return l[0]*=r,l[4]*=r,l[8]*=r,l[12]*=r,l[1]*=r,l[5]*=r,l[9]*=r,l[13]*=r,l[2]*=r,l[6]*=r,l[10]*=r,l[14]*=r,l[3]*=r,l[7]*=r,l[11]*=r,l[15]*=r,this},determinant:function(){var r=this.elements,l=r[0],f=r[4],w=r[8],E=r[12],O=r[1],B=r[5],Y=r[9],K=r[13],$=r[2],pe=r[6],fe=r[10],xe=r[14];return r[3]*(+E*Y*pe-w*K*pe-E*B*fe+f*K*fe+w*B*xe-f*Y*xe)+r[7]*(+l*Y*xe-l*K*fe+E*O*fe-w*O*xe+w*K*$-E*Y*$)+r[11]*(+l*K*pe-l*B*xe-E*O*pe+f*O*xe+E*B*$-f*K*$)+r[15]*(-w*B*$-l*Y*pe+l*B*fe+w*O*pe-f*O*fe+f*Y*$)},transpose:function(){var r=this.elements,l=r[1];return r[1]=r[4],r[4]=l,l=r[2],r[2]=r[8],r[8]=l,l=r[6],r[6]=r[9],r[9]=l,l=r[3],r[3]=r[12],r[12]=l,l=r[7],r[7]=r[13],r[13]=l,l=r[11],r[11]=r[14],r[14]=l,this},setPosition:function(r,l,f){var w=this.elements;return r.isVector3?(w[12]=r.x,w[13]=r.y,w[14]=r.z):(w[12]=r,w[13]=l,w[14]=f),this},getInverse:function(r,l){l!==void 0&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate."),l=this.elements;var f=r.elements;r=f[0];var w=f[1],E=f[2],O=f[3],B=f[4],Y=f[5],K=f[6],$=f[7],pe=f[8],fe=f[9],xe=f[10],ye=f[11],Me=f[12],Oe=f[13],it=f[14];f=f[15];var xt=fe*it*$-Oe*xe*$+Oe*K*ye-Y*it*ye-fe*K*f+Y*xe*f,pt=Me*xe*$-pe*it*$-Me*K*ye+B*it*ye+pe*K*f-B*xe*f,Lt=pe*Oe*$-Me*fe*$+Me*Y*ye-B*Oe*ye-pe*Y*f+B*fe*f,Ct=Me*fe*K-pe*Oe*K-Me*Y*xe+B*Oe*xe+pe*Y*it-B*fe*it,Bt=r*xt+w*pt+E*Lt+O*Ct;return Bt===0?this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0):(Bt=1/Bt,l[0]=xt*Bt,l[1]=(Oe*xe*O-fe*it*O-Oe*E*ye+w*it*ye+fe*E*f-w*xe*f)*Bt,l[2]=(Y*it*O-Oe*K*O+Oe*E*$-w*it*$-Y*E*f+w*K*f)*Bt,l[3]=(fe*K*O-Y*xe*O-fe*E*$+w*xe*$+Y*E*ye-w*K*ye)*Bt,l[4]=pt*Bt,l[5]=(pe*it*O-Me*xe*O+Me*E*ye-r*it*ye-pe*E*f+r*xe*f)*Bt,l[6]=(Me*K*O-B*it*O-Me*E*$+r*it*$+B*E*f-r*K*f)*Bt,l[7]=(B*xe*O-pe*K*O+pe*E*$-r*xe*$-B*E*ye+r*K*ye)*Bt,l[8]=Lt*Bt,l[9]=(Me*fe*O-pe*Oe*O-Me*w*ye+r*Oe*ye+pe*w*f-r*fe*f)*Bt,l[10]=(B*Oe*O-Me*Y*O+Me*w*$-r*Oe*$-B*w*f+r*Y*f)*Bt,l[11]=(pe*Y*O-B*fe*O-pe*w*$+r*fe*$+B*w*ye-r*Y*ye)*Bt,l[12]=Ct*Bt,l[13]=(pe*Oe*E-Me*fe*E+Me*w*xe-r*Oe*xe-pe*w*it+r*fe*it)*Bt,l[14]=(Me*Y*E-B*Oe*E-Me*w*K+r*Oe*K+B*w*it-r*Y*it)*Bt,l[15]=(B*fe*E-pe*Y*E+pe*w*K-r*fe*K-B*w*xe+r*Y*xe)*Bt,this)},scale:function(r){var l=this.elements,f=r.x,w=r.y;return r=r.z,l[0]*=f,l[4]*=w,l[8]*=r,l[1]*=f,l[5]*=w,l[9]*=r,l[2]*=f,l[6]*=w,l[10]*=r,l[3]*=f,l[7]*=w,l[11]*=r,this},getMaxScaleOnAxis:function(){var r=this.elements;return Math.sqrt(Math.max(r[0]*r[0]+r[1]*r[1]+r[2]*r[2],r[4]*r[4]+r[5]*r[5]+r[6]*r[6],r[8]*r[8]+r[9]*r[9]+r[10]*r[10]))},makeTranslation:function(r,l,f){return this.set(1,0,0,r,0,1,0,l,0,0,1,f,0,0,0,1),this},makeRotationX:function(r){var l=Math.cos(r);return r=Math.sin(r),this.set(1,0,0,0,0,l,-r,0,0,r,l,0,0,0,0,1),this},makeRotationY:function(r){var l=Math.cos(r);return r=Math.sin(r),this.set(l,0,r,0,0,1,0,0,-r,0,l,0,0,0,0,1),this},makeRotationZ:function(r){var l=Math.cos(r);return r=Math.sin(r),this.set(l,-r,0,0,r,l,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(r,l){var f=Math.cos(l);l=Math.sin(l);var w=1-f,E=r.x,O=r.y;r=r.z;var B=w*E,Y=w*O;return this.set(B*E+f,B*O-l*r,B*r+l*O,0,B*O+l*r,Y*O+f,Y*r-l*E,0,B*r-l*O,Y*r+l*E,w*r*r+f,0,0,0,0,1),this},makeScale:function(r,l,f){return this.set(r,0,0,0,0,l,0,0,0,0,f,0,0,0,0,1),this},makeShear:function(r,l,f){return this.set(1,l,f,0,r,1,f,0,r,l,1,0,0,0,0,1),this},compose:function(r,l,f){var w=this.elements,E=l._x,O=l._y,B=l._z,Y=l._w,K=E+E,$=O+O,pe=B+B;l=E*K;var fe=E*$;E*=pe;var xe=O*$;O*=pe,B*=pe,K*=Y,$*=Y,Y*=pe,pe=f.x;var ye=f.y;return f=f.z,w[0]=(1-(xe+B))*pe,w[1]=(fe+Y)*pe,w[2]=(E-$)*pe,w[3]=0,w[4]=(fe-Y)*ye,w[5]=(1-(l+B))*ye,w[6]=(O+K)*ye,w[7]=0,w[8]=(E+$)*f,w[9]=(O-K)*f,w[10]=(1-(l+xe))*f,w[11]=0,w[12]=r.x,w[13]=r.y,w[14]=r.z,w[15]=1,this},decompose:function(r,l,f){var w=this.elements,E=Xy.set(w[0],w[1],w[2]).length(),O=Xy.set(w[4],w[5],w[6]).length(),B=Xy.set(w[8],w[9],w[10]).length();0>this.determinant()&&(E=-E),r.x=w[12],r.y=w[13],r.z=w[14],fh.copy(this),r=1/E,w=1/O;var Y=1/B;return fh.elements[0]*=r,fh.elements[1]*=r,fh.elements[2]*=r,fh.elements[4]*=w,fh.elements[5]*=w,fh.elements[6]*=w,fh.elements[8]*=Y,fh.elements[9]*=Y,fh.elements[10]*=Y,l.setFromRotationMatrix(fh),f.x=E,f.y=O,f.z=B,this},makePerspective:function(r,l,f,w,E,O){O===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var B=this.elements;return B[0]=2*E/(l-r),B[4]=0,B[8]=(l+r)/(l-r),B[12]=0,B[1]=0,B[5]=2*E/(f-w),B[9]=(f+w)/(f-w),B[13]=0,B[2]=0,B[6]=0,B[10]=-(O+E)/(O-E),B[14]=-2*O*E/(O-E),B[3]=0,B[7]=0,B[11]=-1,B[15]=0,this},makeOrthographic:function(r,l,f,w,E,O){var B=this.elements,Y=1/(l-r),K=1/(f-w),$=1/(O-E);return B[0]=2*Y,B[4]=0,B[8]=0,B[12]=-((l+r)*Y),B[1]=0,B[5]=2*K,B[9]=0,B[13]=-((f+w)*K),B[2]=0,B[6]=0,B[10]=-2*$,B[14]=-((O+E)*$),B[3]=0,B[7]=0,B[11]=0,B[15]=1,this},equals:function(r){var l=this.elements;r=r.elements;for(var f=0;16>f;f++)if(l[f]!==r[f])return!1;return!0},fromArray:function(r,l){l===void 0&&(l=0);for(var f=0;16>f;f++)this.elements[f]=r[f+l];return this},toArray:function(r,l){r===void 0&&(r=[]),l===void 0&&(l=0);var f=this.elements;return r[l]=f[0],r[l+1]=f[1],r[l+2]=f[2],r[l+3]=f[3],r[l+4]=f[4],r[l+5]=f[5],r[l+6]=f[6],r[l+7]=f[7],r[l+8]=f[8],r[l+9]=f[9],r[l+10]=f[10],r[l+11]=f[11],r[l+12]=f[12],r[l+13]=f[13],r[l+14]=f[14],r[l+15]=f[15],r}});var z6=new b,U6=new X;N.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),N.DefaultOrder="XYZ",Rn(N.prototype,{x:{get:function(){return this._x},set:function(r){this._x=r,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(r){this._y=r,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(r){this._z=r,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(r){this._order=r,this._onChangeCallback()}}}),Pe(N.prototype,{isEuler:!0,set:function(r,l,f,w){return this._x=r,this._y=l,this._z=f,this._order=w||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(r){return this._x=r._x,this._y=r._y,this._z=r._z,this._order=r._order,this._onChangeCallback(),this},setFromRotationMatrix:function(r,l,f){var w=ci.clamp,E=r.elements;r=E[0];var O=E[4],B=E[8],Y=E[1],K=E[5],$=E[9],pe=E[2],fe=E[6];switch(E=E[10],l=l||this._order,l){case"XYZ":this._y=Math.asin(w(B,-1,1)),.9999999>Math.abs(B)?(this._x=Math.atan2(-$,E),this._z=Math.atan2(-O,r)):(this._x=Math.atan2(fe,K),this._z=0);break;case"YXZ":this._x=Math.asin(-w($,-1,1)),.9999999>Math.abs($)?(this._y=Math.atan2(B,E),this._z=Math.atan2(Y,K)):(this._y=Math.atan2(-pe,r),this._z=0);break;case"ZXY":this._x=Math.asin(w(fe,-1,1)),.9999999>Math.abs(fe)?(this._y=Math.atan2(-pe,E),this._z=Math.atan2(-O,K)):(this._y=0,this._z=Math.atan2(Y,r));break;case"ZYX":this._y=Math.asin(-w(pe,-1,1)),.9999999>Math.abs(pe)?(this._x=Math.atan2(fe,E),this._z=Math.atan2(Y,r)):(this._x=0,this._z=Math.atan2(-O,K));break;case"YZX":this._z=Math.asin(w(Y,-1,1)),.9999999>Math.abs(Y)?(this._x=Math.atan2(-$,K),this._y=Math.atan2(-pe,r)):(this._x=0,this._y=Math.atan2(B,E));break;case"XZY":this._z=Math.asin(-w(O,-1,1)),.9999999>Math.abs(O)?(this._x=Math.atan2(fe,K),this._y=Math.atan2(B,r)):(this._x=Math.atan2(-$,E),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+l)}return this._order=l,f!==!1&&this._onChangeCallback(),this},setFromQuaternion:function(r,l,f){return z6.makeRotationFromQuaternion(r),this.setFromRotationMatrix(z6,l,f)},setFromVector3:function(r,l){return this.set(r.x,r.y,r.z,l||this._order)},reorder:function(r){return U6.setFromEuler(this),this.setFromQuaternion(U6,r)},equals:function(r){return r._x===this._x&&r._y===this._y&&r._z===this._z&&r._order===this._order},fromArray:function(r){return this._x=r[0],this._y=r[1],this._z=r[2],r[3]!==void 0&&(this._order=r[3]),this._onChangeCallback(),this},toArray:function(r,l){return r===void 0&&(r=[]),l===void 0&&(l=0),r[l]=this._x,r[l+1]=this._y,r[l+2]=this._z,r[l+3]=this._order,r},toVector3:function(r){return r?r.set(this._x,this._y,this._z):new I(this._x,this._y,this._z)},_onChange:function(r){return this._onChangeCallback=r,this},_onChangeCallback:function(){}}),Pe(k.prototype,{set:function(r){this.mask=1<<r|0},enable:function(r){this.mask=this.mask|1<<r|0},enableAll:function(){this.mask=-1},toggle:function(r){this.mask^=1<<r|0},disable:function(r){this.mask&=~(1<<r|0)},disableAll:function(){this.mask=0},test:function(r){return(this.mask&r.mask)!==0}});var aW=0,k6=new I,Yy=new X,Sd=new b,tS=new I,GA=new I,sW=new I,lW=new X,H6=new I(1,0,0),j6=new I(0,1,0),G6=new I(0,0,1),uW={type:"added"},cW={type:"removed"};G.DefaultUp=new I(0,1,0),G.DefaultMatrixAutoUpdate=!0,G.prototype=Pe(Le(c.prototype),{constructor:G,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(r){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(r),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(r){return this.quaternion.premultiply(r),this},setRotationFromAxisAngle:function(r,l){this.quaternion.setFromAxisAngle(r,l)},setRotationFromEuler:function(r){this.quaternion.setFromEuler(r,!0)},setRotationFromMatrix:function(r){this.quaternion.setFromRotationMatrix(r)},setRotationFromQuaternion:function(r){this.quaternion.copy(r)},rotateOnAxis:function(r,l){return Yy.setFromAxisAngle(r,l),this.quaternion.multiply(Yy),this},rotateOnWorldAxis:function(r,l){return Yy.setFromAxisAngle(r,l),this.quaternion.premultiply(Yy),this},rotateX:function(r){return this.rotateOnAxis(H6,r)},rotateY:function(r){return this.rotateOnAxis(j6,r)},rotateZ:function(r){return this.rotateOnAxis(G6,r)},translateOnAxis:function(r,l){return k6.copy(r).applyQuaternion(this.quaternion),this.position.add(k6.multiplyScalar(l)),this},translateX:function(r){return this.translateOnAxis(H6,r)},translateY:function(r){return this.translateOnAxis(j6,r)},translateZ:function(r){return this.translateOnAxis(G6,r)},localToWorld:function(r){return r.applyMatrix4(this.matrixWorld)},worldToLocal:function(r){return r.applyMatrix4(Sd.getInverse(this.matrixWorld))},lookAt:function(r,l,f){r.isVector3?tS.copy(r):tS.set(r,l,f),r=this.parent,this.updateWorldMatrix(!0,!1),GA.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Sd.lookAt(GA,tS,this.up):Sd.lookAt(tS,GA,this.up),this.quaternion.setFromRotationMatrix(Sd),r&&(Sd.extractRotation(r.matrixWorld),Yy.setFromRotationMatrix(Sd),this.quaternion.premultiply(Yy.inverse()))},add:function(r){if(1<arguments.length){for(var l=0;l<arguments.length;l++)this.add(arguments[l]);return this}return r===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",r),this):(r&&r.isObject3D?(r.parent!==null&&r.parent.remove(r),r.parent=this,this.children.push(r),r.dispatchEvent(uW)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",r),this)},remove:function(r){if(1<arguments.length){for(var l=0;l<arguments.length;l++)this.remove(arguments[l]);return this}return l=this.children.indexOf(r),l!==-1&&(r.parent=null,this.children.splice(l,1),r.dispatchEvent(cW)),this},attach:function(r){return this.updateWorldMatrix(!0,!1),Sd.getInverse(this.matrixWorld),r.parent!==null&&(r.parent.updateWorldMatrix(!0,!1),Sd.multiply(r.parent.matrixWorld)),r.applyMatrix4(Sd),r.updateWorldMatrix(!1,!1),this.add(r),this},getObjectById:function(r){return this.getObjectByProperty("id",r)},getObjectByName:function(r){return this.getObjectByProperty("name",r)},getObjectByProperty:function(r,l){if(this[r]===l)return this;for(var f=0,w=this.children.length;f<w;f++){var E=this.children[f].getObjectByProperty(r,l);if(E!==void 0)return E}},getWorldPosition:function(r){return r===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),r=new I),this.updateMatrixWorld(!0),r.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(r){return r===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),r=new X),this.updateMatrixWorld(!0),this.matrixWorld.decompose(GA,r,sW),r},getWorldScale:function(r){return r===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),r=new I),this.updateMatrixWorld(!0),this.matrixWorld.decompose(GA,lW,r),r},getWorldDirection:function(r){r===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),r=new I),this.updateMatrixWorld(!0);var l=this.matrixWorld.elements;return r.set(l[8],l[9],l[10]).normalize()},raycast:function(){},traverse:function(r){r(this);for(var l=this.children,f=0,w=l.length;f<w;f++)l[f].traverse(r)},traverseVisible:function(r){if(this.visible!==!1){r(this);for(var l=this.children,f=0,w=l.length;f<w;f++)l[f].traverseVisible(r)}},traverseAncestors:function(r){var l=this.parent;l!==null&&(r(l),l.traverseAncestors(r))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(r){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||r)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,r=!0);for(var l=this.children,f=0,w=l.length;f<w;f++)l[f].updateMatrixWorld(r)},updateWorldMatrix:function(r,l){var f=this.parent;if(r===!0&&f!==null&&f.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),l===!0)for(r=this.children,l=0,f=r.length;l<f;l++)r[l].updateWorldMatrix(!1,!0)},toJSON:function(r){function l(pe,fe){return pe[fe.uuid]===void 0&&(pe[fe.uuid]=fe.toJSON(r)),fe.uuid}function f(pe){var fe=[],xe;for(xe in pe){var ye=pe[xe];delete ye.metadata,fe.push(ye)}return fe}var w=r===void 0||typeof r=="string",E={};w&&(r={geometries:{},materials:{},textures:{},images:{},shapes:{}},E.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var O={};if(O.uuid=this.uuid,O.type=this.type,this.name!==""&&(O.name=this.name),this.castShadow===!0&&(O.castShadow=!0),this.receiveShadow===!0&&(O.receiveShadow=!0),this.visible===!1&&(O.visible=!1),this.frustumCulled===!1&&(O.frustumCulled=!1),this.renderOrder!==0&&(O.renderOrder=this.renderOrder),yu(this.userData)!=="{}"&&(O.userData=this.userData),O.layers=this.layers.mask,O.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(O.matrixAutoUpdate=!1),this.isInstancedMesh&&(O.type="InstancedMesh",O.count=this.count,O.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){O.geometry=l(r.geometries,this.geometry);var B=this.geometry.parameters;if(B!==void 0&&B.shapes!==void 0)if(B=B.shapes,Array.isArray(B))for(var Y=0,K=B.length;Y<K;Y++)l(r.shapes,B[Y]);else l(r.shapes,B)}if(this.material!==void 0)if(Array.isArray(this.material)){for(B=[],Y=0,K=this.material.length;Y<K;Y++)B.push(l(r.materials,this.material[Y]));O.material=B}else O.material=l(r.materials,this.material);if(0<this.children.length)for(O.children=[],Y=0;Y<this.children.length;Y++)O.children.push(this.children[Y].toJSON(r).object);if(w){w=f(r.geometries),Y=f(r.materials),K=f(r.textures);var $=f(r.images);B=f(r.shapes),0<w.length&&(E.geometries=w),0<Y.length&&(E.materials=Y),0<K.length&&(E.textures=K),0<$.length&&(E.images=$),0<B.length&&(E.shapes=B)}return E.object=O,E},clone:function(r){return new this.constructor().copy(this,r)},copy:function(r,l){if(l===void 0&&(l=!0),this.name=r.name,this.up.copy(r.up),this.position.copy(r.position),this.quaternion.copy(r.quaternion),this.scale.copy(r.scale),this.matrix.copy(r.matrix),this.matrixWorld.copy(r.matrixWorld),this.matrixAutoUpdate=r.matrixAutoUpdate,this.matrixWorldNeedsUpdate=r.matrixWorldNeedsUpdate,this.layers.mask=r.layers.mask,this.visible=r.visible,this.castShadow=r.castShadow,this.receiveShadow=r.receiveShadow,this.frustumCulled=r.frustumCulled,this.renderOrder=r.renderOrder,this.userData=JSON.parse(yu(r.userData)),l===!0)for(l=0;l<r.children.length;l++)this.add(r.children[l].clone());return this}}),re.prototype=Pe(Le(G.prototype),{constructor:re,isScene:!0,copy:function(r,l){return G.prototype.copy.call(this,r,l),r.background!==null&&(this.background=r.background.clone()),r.environment!==null&&(this.environment=r.environment.clone()),r.fog!==null&&(this.fog=r.fog.clone()),r.overrideMaterial!==null&&(this.overrideMaterial=r.overrideMaterial.clone()),this.autoUpdate=r.autoUpdate,this.matrixAutoUpdate=r.matrixAutoUpdate,this},toJSON:function(r){var l=G.prototype.toJSON.call(this,r);return this.background!==null&&(l.object.background=this.background.toJSON(r)),this.environment!==null&&(l.object.environment=this.environment.toJSON(r)),this.fog!==null&&(l.object.fog=this.fog.toJSON()),l},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Td=[new I,new I,new I,new I,new I,new I,new I,new I],VA=new I,HR=new se,Zy=new I,qy=new I,Ky=new I,am=new I,sm=new I,wv=new I,WA=new I,rS=new I,nS=new I,Cv=new I;Pe(se.prototype,{isBox3:!0,set:function(r,l){return this.min.copy(r),this.max.copy(l),this},setFromArray:function(r){for(var l=1/0,f=1/0,w=1/0,E=-1/0,O=-1/0,B=-1/0,Y=0,K=r.length;Y<K;Y+=3){var $=r[Y],pe=r[Y+1],fe=r[Y+2];$<l&&(l=$),pe<f&&(f=pe),fe<w&&(w=fe),$>E&&(E=$),pe>O&&(O=pe),fe>B&&(B=fe)}return this.min.set(l,f,w),this.max.set(E,O,B),this},setFromBufferAttribute:function(r){for(var l=1/0,f=1/0,w=1/0,E=-1/0,O=-1/0,B=-1/0,Y=0,K=r.count;Y<K;Y++){var $=r.getX(Y),pe=r.getY(Y),fe=r.getZ(Y);$<l&&(l=$),pe<f&&(f=pe),fe<w&&(w=fe),$>E&&(E=$),pe>O&&(O=pe),fe>B&&(B=fe)}return this.min.set(l,f,w),this.max.set(E,O,B),this},setFromPoints:function(r){this.makeEmpty();for(var l=0,f=r.length;l<f;l++)this.expandByPoint(r[l]);return this},setFromCenterAndSize:function(r,l){return l=VA.copy(l).multiplyScalar(.5),this.min.copy(r).sub(l),this.max.copy(r).add(l),this},setFromObject:function(r){return this.makeEmpty(),this.expandByObject(r)},clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.min.copy(r.min),this.max.copy(r.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(r){return r===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),r=new I),this.isEmpty()?r.set(0,0,0):r.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(r){return r===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),r=new I),this.isEmpty()?r.set(0,0,0):r.subVectors(this.max,this.min)},expandByPoint:function(r){return this.min.min(r),this.max.max(r),this},expandByVector:function(r){return this.min.sub(r),this.max.add(r),this},expandByScalar:function(r){return this.min.addScalar(-r),this.max.addScalar(r),this},expandByObject:function(r){r.updateWorldMatrix(!1,!1);var l=r.geometry;l!==void 0&&(l.boundingBox===null&&l.computeBoundingBox(),HR.copy(l.boundingBox),HR.applyMatrix4(r.matrixWorld),this.union(HR)),r=r.children,l=0;for(var f=r.length;l<f;l++)this.expandByObject(r[l]);return this},containsPoint:function(r){return!(r.x<this.min.x||r.x>this.max.x||r.y<this.min.y||r.y>this.max.y||r.z<this.min.z||r.z>this.max.z)},containsBox:function(r){return this.min.x<=r.min.x&&r.max.x<=this.max.x&&this.min.y<=r.min.y&&r.max.y<=this.max.y&&this.min.z<=r.min.z&&r.max.z<=this.max.z},getParameter:function(r,l){return l===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),l=new I),l.set((r.x-this.min.x)/(this.max.x-this.min.x),(r.y-this.min.y)/(this.max.y-this.min.y),(r.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(r){return!(r.max.x<this.min.x||r.min.x>this.max.x||r.max.y<this.min.y||r.min.y>this.max.y||r.max.z<this.min.z||r.min.z>this.max.z)},intersectsSphere:function(r){return this.clampPoint(r.center,VA),VA.distanceToSquared(r.center)<=r.radius*r.radius},intersectsPlane:function(r){if(0<r.normal.x)var l=r.normal.x*this.min.x,f=r.normal.x*this.max.x;else l=r.normal.x*this.max.x,f=r.normal.x*this.min.x;return 0<r.normal.y?(l+=r.normal.y*this.min.y,f+=r.normal.y*this.max.y):(l+=r.normal.y*this.max.y,f+=r.normal.y*this.min.y),0<r.normal.z?(l+=r.normal.z*this.min.z,f+=r.normal.z*this.max.z):(l+=r.normal.z*this.max.z,f+=r.normal.z*this.min.z),l<=-r.constant&&f>=-r.constant},intersectsTriangle:function(r){return this.isEmpty()||(this.getCenter(WA),rS.subVectors(this.max,WA),Zy.subVectors(r.a,WA),qy.subVectors(r.b,WA),Ky.subVectors(r.c,WA),am.subVectors(qy,Zy),sm.subVectors(Ky,qy),wv.subVectors(Zy,Ky),r=[0,-am.z,am.y,0,-sm.z,sm.y,0,-wv.z,wv.y,am.z,0,-am.x,sm.z,0,-sm.x,wv.z,0,-wv.x,-am.y,am.x,0,-sm.y,sm.x,0,-wv.y,wv.x,0],!ue(r,Zy,qy,Ky,rS))||(r=[1,0,0,0,1,0,0,0,1],!ue(r,Zy,qy,Ky,rS))?!1:(nS.crossVectors(am,sm),r=[nS.x,nS.y,nS.z],ue(r,Zy,qy,Ky,rS))},clampPoint:function(r,l){return l===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),l=new I),l.copy(r).clamp(this.min,this.max)},distanceToPoint:function(r){return VA.copy(r).clamp(this.min,this.max).sub(r).length()},getBoundingSphere:function(r){return r===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(r.center),r.radius=.5*this.getSize(VA).length(),r},intersect:function(r){return this.min.max(r.min),this.max.min(r.max),this.isEmpty()&&this.makeEmpty(),this},union:function(r){return this.min.min(r.min),this.max.max(r.max),this},applyMatrix4:function(r){return this.isEmpty()?this:(Td[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(r),Td[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(r),Td[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(r),Td[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(r),Td[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(r),Td[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(r),Td[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(r),Td[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(r),this.setFromPoints(Td),this)},translate:function(r){return this.min.add(r),this.max.add(r),this},equals:function(r){return r.min.equals(this.min)&&r.max.equals(this.max)}});var hW=new se;Pe(we.prototype,{set:function(r,l){return this.center.copy(r),this.radius=l,this},setFromPoints:function(r,l){var f=this.center;l!==void 0?f.copy(l):hW.setFromPoints(r).getCenter(f);for(var w=l=0,E=r.length;w<E;w++)l=Math.max(l,f.distanceToSquared(r[w]));return this.radius=Math.sqrt(l),this},clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.center.copy(r.center),this.radius=r.radius,this},isEmpty:function(){return 0>this.radius},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(r){return r.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(r){return r.distanceTo(this.center)-this.radius},intersectsSphere:function(r){var l=this.radius+r.radius;return r.center.distanceToSquared(this.center)<=l*l},intersectsBox:function(r){return r.intersectsSphere(this)},intersectsPlane:function(r){return Math.abs(r.distanceToPoint(this.center))<=this.radius},clampPoint:function(r,l){var f=this.center.distanceToSquared(r);return l===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),l=new I),l.copy(r),f>this.radius*this.radius&&(l.sub(this.center).normalize(),l.multiplyScalar(this.radius).add(this.center)),l},getBoundingBox:function(r){return r===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),r=new se),this.isEmpty()?(r.makeEmpty(),r):(r.set(this.center,this.center),r.expandByScalar(this.radius),r)},applyMatrix4:function(r){return this.center.applyMatrix4(r),this.radius*=r.getMaxScaleOnAxis(),this},translate:function(r){return this.center.add(r),this},equals:function(r){return r.center.equals(this.center)&&r.radius===this.radius}});var Ed=new I,jR=new I,iS=new I,lm=new I,GR=new I,oS=new I,VR=new I;Pe(Te.prototype,{set:function(r,l){return this.origin.copy(r),this.direction.copy(l),this},clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.origin.copy(r.origin),this.direction.copy(r.direction),this},at:function(r,l){return l===void 0&&(console.warn("THREE.Ray: .at() target is now required"),l=new I),l.copy(this.direction).multiplyScalar(r).add(this.origin)},lookAt:function(r){return this.direction.copy(r).sub(this.origin).normalize(),this},recast:function(r){return this.origin.copy(this.at(r,Ed)),this},closestPointToPoint:function(r,l){return l===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),l=new I),l.subVectors(r,this.origin),r=l.dot(this.direction),0>r?l.copy(this.origin):l.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(r){return Math.sqrt(this.distanceSqToPoint(r))},distanceSqToPoint:function(r){var l=Ed.subVectors(r,this.origin).dot(this.direction);return 0>l?this.origin.distanceToSquared(r):(Ed.copy(this.direction).multiplyScalar(l).add(this.origin),Ed.distanceToSquared(r))},distanceSqToSegment:function(r,l,f,w){jR.copy(r).add(l).multiplyScalar(.5),iS.copy(l).sub(r).normalize(),lm.copy(this.origin).sub(jR);var E=.5*r.distanceTo(l),O=-this.direction.dot(iS),B=lm.dot(this.direction),Y=-lm.dot(iS),K=lm.lengthSq(),$=Math.abs(1-O*O);if(0<$){r=O*Y-B,l=O*B-Y;var pe=E*$;0<=r?l>=-pe?l<=pe?(E=1/$,r*=E,l*=E,O=r*(r+O*l+2*B)+l*(O*r+l+2*Y)+K):(l=E,r=Math.max(0,-(O*l+B)),O=-r*r+l*(l+2*Y)+K):(l=-E,r=Math.max(0,-(O*l+B)),O=-r*r+l*(l+2*Y)+K):l<=-pe?(r=Math.max(0,-(-O*E+B)),l=0<r?-E:Math.min(Math.max(-E,-Y),E),O=-r*r+l*(l+2*Y)+K):l<=pe?(r=0,l=Math.min(Math.max(-E,-Y),E),O=l*(l+2*Y)+K):(r=Math.max(0,-(O*E+B)),l=0<r?E:Math.min(Math.max(-E,-Y),E),O=-r*r+l*(l+2*Y)+K)}else l=0<O?-E:E,r=Math.max(0,-(O*l+B)),O=-r*r+l*(l+2*Y)+K;return f&&f.copy(this.direction).multiplyScalar(r).add(this.origin),w&&w.copy(iS).multiplyScalar(l).add(jR),O},intersectSphere:function(r,l){Ed.subVectors(r.center,this.origin);var f=Ed.dot(this.direction),w=Ed.dot(Ed)-f*f;return r=r.radius*r.radius,w>r?null:(r=Math.sqrt(r-w),w=f-r,f+=r,0>w&&0>f?null:0>w?this.at(f,l):this.at(w,l))},intersectsSphere:function(r){return this.distanceSqToPoint(r.center)<=r.radius*r.radius},distanceToPlane:function(r){var l=r.normal.dot(this.direction);return l===0?r.distanceToPoint(this.origin)===0?0:null:(r=-(this.origin.dot(r.normal)+r.constant)/l,0<=r?r:null)},intersectPlane:function(r,l){return r=this.distanceToPlane(r),r===null?null:this.at(r,l)},intersectsPlane:function(r){var l=r.distanceToPoint(this.origin);return l===0||0>r.normal.dot(this.direction)*l},intersectBox:function(r,l){var f=1/this.direction.x,w=1/this.direction.y,E=1/this.direction.z,O=this.origin;if(0<=f){var B=(r.min.x-O.x)*f;f*=r.max.x-O.x}else B=(r.max.x-O.x)*f,f*=r.min.x-O.x;if(0<=w){var Y=(r.min.y-O.y)*w;w*=r.max.y-O.y}else Y=(r.max.y-O.y)*w,w*=r.min.y-O.y;return B>w||Y>f||((Y>B||B!==B)&&(B=Y),(w<f||f!==f)&&(f=w),0<=E?(Y=(r.min.z-O.z)*E,r=(r.max.z-O.z)*E):(Y=(r.max.z-O.z)*E,r=(r.min.z-O.z)*E),B>r||Y>f)?null:((Y>B||B!==B)&&(B=Y),(r<f||f!==f)&&(f=r),0>f?null:this.at(0<=B?B:f,l))},intersectsBox:function(r){return this.intersectBox(r,Ed)!==null},intersectTriangle:function(r,l,f,w,E){if(GR.subVectors(l,r),oS.subVectors(f,r),VR.crossVectors(GR,oS),l=this.direction.dot(VR),0<l){if(w)return null;w=1}else if(0>l)w=-1,l=-l;else return null;return lm.subVectors(this.origin,r),r=w*this.direction.dot(oS.crossVectors(lm,oS)),0>r||(f=w*this.direction.dot(GR.cross(lm)),0>f||r+f>l)?null:(r=-w*lm.dot(VR),0>r?null:this.at(r/l,E))},applyMatrix4:function(r){return this.origin.applyMatrix4(r),this.direction.transformDirection(r),this},equals:function(r){return r.origin.equals(this.origin)&&r.direction.equals(this.direction)}});var WR=new I,fW=new I,dW=new g;Pe(je.prototype,{isPlane:!0,set:function(r,l){return this.normal.copy(r),this.constant=l,this},setComponents:function(r,l,f,w){return this.normal.set(r,l,f),this.constant=w,this},setFromNormalAndCoplanarPoint:function(r,l){return this.normal.copy(r),this.constant=-l.dot(this.normal),this},setFromCoplanarPoints:function(r,l,f){return l=WR.subVectors(f,l).cross(fW.subVectors(r,l)).normalize(),this.setFromNormalAndCoplanarPoint(l,r),this},clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.normal.copy(r.normal),this.constant=r.constant,this},normalize:function(){var r=1/this.normal.length();return this.normal.multiplyScalar(r),this.constant*=r,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(r){return this.normal.dot(r)+this.constant},distanceToSphere:function(r){return this.distanceToPoint(r.center)-r.radius},projectPoint:function(r,l){return l===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),l=new I),l.copy(this.normal).multiplyScalar(-this.distanceToPoint(r)).add(r)},intersectLine:function(r,l){l===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),l=new I);var f=r.delta(WR),w=this.normal.dot(f);if(w===0){if(this.distanceToPoint(r.start)===0)return l.copy(r.start)}else if(w=-(r.start.dot(this.normal)+this.constant)/w,!(0>w||1<w))return l.copy(f).multiplyScalar(w).add(r.start)},intersectsLine:function(r){var l=this.distanceToPoint(r.start);return r=this.distanceToPoint(r.end),0>l&&0<r||0>r&&0<l},intersectsBox:function(r){return r.intersectsPlane(this)},intersectsSphere:function(r){return r.intersectsPlane(this)},coplanarPoint:function(r){return r===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),r=new I),r.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(r,l){return l=l||dW.getNormalMatrix(r),r=this.coplanarPoint(WR).applyMatrix4(r),l=this.normal.applyMatrix3(l).normalize(),this.constant=-r.dot(l),this},translate:function(r){return this.constant-=r.dot(this.normal),this},equals:function(r){return r.normal.equals(this.normal)&&r.constant===this.constant}});var dh=new I,Id=new I,XR=new I,Rd=new I,Jy=new I,Qy=new I,V6=new I,YR=new I,ZR=new I,qR=new I;Pe(Ge,{getNormal:function(r,l,f,w){return w===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),w=new I),w.subVectors(f,l),dh.subVectors(r,l),w.cross(dh),r=w.lengthSq(),0<r?w.multiplyScalar(1/Math.sqrt(r)):w.set(0,0,0)},getBarycoord:function(r,l,f,w,E){dh.subVectors(w,l),Id.subVectors(f,l),XR.subVectors(r,l),r=dh.dot(dh),l=dh.dot(Id),f=dh.dot(XR);var O=Id.dot(Id);w=Id.dot(XR);var B=r*O-l*l;return E===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),E=new I),B===0?E.set(-2,-1,-1):(B=1/B,O=(O*f-l*w)*B,r=(r*w-l*f)*B,E.set(1-O-r,r,O))},containsPoint:function(r,l,f,w){return Ge.getBarycoord(r,l,f,w,Rd),0<=Rd.x&&0<=Rd.y&&1>=Rd.x+Rd.y},getUV:function(r,l,f,w,E,O,B,Y){return this.getBarycoord(r,l,f,w,Rd),Y.set(0,0),Y.addScaledVector(E,Rd.x),Y.addScaledVector(O,Rd.y),Y.addScaledVector(B,Rd.z),Y},isFrontFacing:function(r,l,f,w){return dh.subVectors(f,l),Id.subVectors(r,l),0>dh.cross(Id).dot(w)}}),Pe(Ge.prototype,{set:function(r,l,f){return this.a.copy(r),this.b.copy(l),this.c.copy(f),this},setFromPointsAndIndices:function(r,l,f,w){return this.a.copy(r[l]),this.b.copy(r[f]),this.c.copy(r[w]),this},clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.a.copy(r.a),this.b.copy(r.b),this.c.copy(r.c),this},getArea:function(){return dh.subVectors(this.c,this.b),Id.subVectors(this.a,this.b),.5*dh.cross(Id).length()},getMidpoint:function(r){return r===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),r=new I),r.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(r){return Ge.getNormal(this.a,this.b,this.c,r)},getPlane:function(r){return r===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),r=new je),r.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(r,l){return Ge.getBarycoord(r,this.a,this.b,this.c,l)},getUV:function(r,l,f,w,E){return Ge.getUV(r,this.a,this.b,this.c,l,f,w,E)},containsPoint:function(r){return Ge.containsPoint(r,this.a,this.b,this.c)},isFrontFacing:function(r){return Ge.isFrontFacing(this.a,this.b,this.c,r)},intersectsBox:function(r){return r.intersectsTriangle(this)},closestPointToPoint:function(r,l){l===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),l=new I);var f=this.a,w=this.b,E=this.c;Jy.subVectors(w,f),Qy.subVectors(E,f),YR.subVectors(r,f);var O=Jy.dot(YR),B=Qy.dot(YR);if(0>=O&&0>=B)return l.copy(f);ZR.subVectors(r,w);var Y=Jy.dot(ZR),K=Qy.dot(ZR);if(0<=Y&&K<=Y)return l.copy(w);var $=O*K-Y*B;if(0>=$&&0<=O&&0>=Y)return w=O/(O-Y),l.copy(f).addScaledVector(Jy,w);qR.subVectors(r,E),r=Jy.dot(qR);var pe=Qy.dot(qR);return 0<=pe&&r<=pe?l.copy(E):(O=r*B-O*pe,0>=O&&0<=B&&0>=pe?($=B/(B-pe),l.copy(f).addScaledVector(Qy,$)):(B=Y*pe-r*K,0>=B&&0<=K-Y&&0<=r-pe?(V6.subVectors(E,w),$=(K-Y)/(K-Y+(r-pe)),l.copy(w).addScaledVector(V6,$)):(E=1/(B+O+$),w=O*E,$*=E,l.copy(f).addScaledVector(Jy,w).addScaledVector(Qy,$))))},equals:function(r){return r.a.equals(this.a)&&r.b.equals(this.b)&&r.c.equals(this.c)}});var W6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ph={h:0,s:0,l:0},aS={h:0,s:0,l:0};Pe(He.prototype,{isColor:!0,r:1,g:1,b:1,set:function(r){return r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r),this},setScalar:function(r){return this.b=this.g=this.r=r,this},setHex:function(r){return r=Math.floor(r),this.r=(r>>16&255)/255,this.g=(r>>8&255)/255,this.b=(r&255)/255,this},setRGB:function(r,l,f){return this.r=r,this.g=l,this.b=f,this},setHSL:function(r,l,f){return r=ci.euclideanModulo(r,1),l=ci.clamp(l,0,1),f=ci.clamp(f,0,1),l===0?this.r=this.g=this.b=f:(l=.5>=f?f*(1+l):f+l-f*l,f=2*f-l,this.r=lt(f,l,r+1/3),this.g=lt(f,l,r),this.b=lt(f,l,r-1/3)),this},setStyle:function(r){function l(B){B!==void 0&&1>parseFloat(B)&&console.warn("THREE.Color: Alpha component of "+r+" will be ignored.")}var f;if(f=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(r)){var w=f[2];switch(f[1]){case"rgb":case"rgba":if(f=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(w))return this.r=Math.min(255,parseInt(f[1],10))/255,this.g=Math.min(255,parseInt(f[2],10))/255,this.b=Math.min(255,parseInt(f[3],10))/255,l(f[5]),this;if(f=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(w))return this.r=Math.min(100,parseInt(f[1],10))/100,this.g=Math.min(100,parseInt(f[2],10))/100,this.b=Math.min(100,parseInt(f[3],10))/100,l(f[5]),this;break;case"hsl":case"hsla":if(f=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(w)){w=parseFloat(f[1])/360;var E=parseInt(f[2],10)/100,O=parseInt(f[3],10)/100;return l(f[5]),this.setHSL(w,E,O)}}}else if(f=/^#([A-Fa-f0-9]+)$/.exec(r)){if(f=f[1],w=f.length,w===3)return this.r=parseInt(f.charAt(0)+f.charAt(0),16)/255,this.g=parseInt(f.charAt(1)+f.charAt(1),16)/255,this.b=parseInt(f.charAt(2)+f.charAt(2),16)/255,this;if(w===6)return this.r=parseInt(f.charAt(0)+f.charAt(1),16)/255,this.g=parseInt(f.charAt(2)+f.charAt(3),16)/255,this.b=parseInt(f.charAt(4)+f.charAt(5),16)/255,this}return r&&0<r.length?this.setColorName(r):this},setColorName:function(r){var l=W6[r];return l!==void 0?this.setHex(l):console.warn("THREE.Color: Unknown color "+r),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(r){return this.r=r.r,this.g=r.g,this.b=r.b,this},copyGammaToLinear:function(r,l){return l===void 0&&(l=2),this.r=Math.pow(r.r,l),this.g=Math.pow(r.g,l),this.b=Math.pow(r.b,l),this},copyLinearToGamma:function(r,l){return l===void 0&&(l=2),l=0<l?1/l:1,this.r=Math.pow(r.r,l),this.g=Math.pow(r.g,l),this.b=Math.pow(r.b,l),this},convertGammaToLinear:function(r){return this.copyGammaToLinear(this,r),this},convertLinearToGamma:function(r){return this.copyLinearToGamma(this,r),this},copySRGBToLinear:function(r){return this.r=ht(r.r),this.g=ht(r.g),this.b=ht(r.b),this},copyLinearToSRGB:function(r){return this.r=It(r.r),this.g=It(r.g),this.b=It(r.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(r){r===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),r={h:0,s:0,l:0});var l=this.r,f=this.g,w=this.b,E=Math.max(l,f,w),O=Math.min(l,f,w),B,Y=(O+E)/2;if(O===E)O=B=0;else{var K=E-O;switch(O=.5>=Y?K/(E+O):K/(2-E-O),E){case l:B=(f-w)/K+(f<w?6:0);break;case f:B=(w-l)/K+2;break;case w:B=(l-f)/K+4}B/=6}return r.h=B,r.s=O,r.l=Y,r},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(r,l,f){return this.getHSL(ph),ph.h+=r,ph.s+=l,ph.l+=f,this.setHSL(ph.h,ph.s,ph.l),this},add:function(r){return this.r+=r.r,this.g+=r.g,this.b+=r.b,this},addColors:function(r,l){return this.r=r.r+l.r,this.g=r.g+l.g,this.b=r.b+l.b,this},addScalar:function(r){return this.r+=r,this.g+=r,this.b+=r,this},sub:function(r){return this.r=Math.max(0,this.r-r.r),this.g=Math.max(0,this.g-r.g),this.b=Math.max(0,this.b-r.b),this},multiply:function(r){return this.r*=r.r,this.g*=r.g,this.b*=r.b,this},multiplyScalar:function(r){return this.r*=r,this.g*=r,this.b*=r,this},lerp:function(r,l){return this.r+=(r.r-this.r)*l,this.g+=(r.g-this.g)*l,this.b+=(r.b-this.b)*l,this},lerpHSL:function(r,l){this.getHSL(ph),r.getHSL(aS),r=ci.lerp(ph.h,aS.h,l);var f=ci.lerp(ph.s,aS.s,l);return l=ci.lerp(ph.l,aS.l,l),this.setHSL(r,f,l),this},equals:function(r){return r.r===this.r&&r.g===this.g&&r.b===this.b},fromArray:function(r,l){return l===void 0&&(l=0),this.r=r[l],this.g=r[l+1],this.b=r[l+2],this},toArray:function(r,l){return r===void 0&&(r=[]),l===void 0&&(l=0),r[l]=this.r,r[l+1]=this.g,r[l+2]=this.b,r},toJSON:function(){return this.getHex()}}),He.NAMES=W6,Pe(vt.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(r){this.a=r.a,this.b=r.b,this.c=r.c,this.normal.copy(r.normal),this.color.copy(r.color),this.materialIndex=r.materialIndex;for(var l=0,f=r.vertexNormals.length;l<f;l++)this.vertexNormals[l]=r.vertexNormals[l].clone();for(l=0,f=r.vertexColors.length;l<f;l++)this.vertexColors[l]=r.vertexColors[l].clone();return this}});var pW=0;Et.prototype=Pe(Le(c.prototype),{constructor:Et,isMaterial:!0,onBeforeCompile:function(){},setValues:function(r){if(r!==void 0)for(var l in r){var f=r[l];if(f===void 0)console.warn("THREE.Material: '"+l+"' parameter is undefined.");else if(l==="shading")console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=f===1;else{var w=this[l];w===void 0?console.warn("THREE."+this.type+": '"+l+"' is not a property of this material."):w&&w.isColor?w.set(f):w&&w.isVector3&&f&&f.isVector3?w.copy(f):this[l]=f}}},toJSON:function(r){function l(E){var O=[],B;for(B in E){var Y=E[B];delete Y.metadata,O.push(Y)}return O}var f=r===void 0||typeof r=="string";f&&(r={textures:{},images:{}});var w={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};return w.uuid=this.uuid,w.type=this.type,this.name!==""&&(w.name=this.name),this.color&&this.color.isColor&&(w.color=this.color.getHex()),this.roughness!==void 0&&(w.roughness=this.roughness),this.metalness!==void 0&&(w.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(w.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(w.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(w.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(w.specular=this.specular.getHex()),this.shininess!==void 0&&(w.shininess=this.shininess),this.clearcoat!==void 0&&(w.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(w.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(w.clearcoatMap=this.clearcoatMap.toJSON(r).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(w.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(r).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(w.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(r).uuid,w.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(w.map=this.map.toJSON(r).uuid),this.matcap&&this.matcap.isTexture&&(w.matcap=this.matcap.toJSON(r).uuid),this.alphaMap&&this.alphaMap.isTexture&&(w.alphaMap=this.alphaMap.toJSON(r).uuid),this.lightMap&&this.lightMap.isTexture&&(w.lightMap=this.lightMap.toJSON(r).uuid),this.aoMap&&this.aoMap.isTexture&&(w.aoMap=this.aoMap.toJSON(r).uuid,w.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(w.bumpMap=this.bumpMap.toJSON(r).uuid,w.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(w.normalMap=this.normalMap.toJSON(r).uuid,w.normalMapType=this.normalMapType,w.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(w.displacementMap=this.displacementMap.toJSON(r).uuid,w.displacementScale=this.displacementScale,w.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(w.roughnessMap=this.roughnessMap.toJSON(r).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(w.metalnessMap=this.metalnessMap.toJSON(r).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(w.emissiveMap=this.emissiveMap.toJSON(r).uuid),this.specularMap&&this.specularMap.isTexture&&(w.specularMap=this.specularMap.toJSON(r).uuid),this.envMap&&this.envMap.isTexture&&(w.envMap=this.envMap.toJSON(r).uuid,w.reflectivity=this.reflectivity,w.refractionRatio=this.refractionRatio,this.combine!==void 0&&(w.combine=this.combine),this.envMapIntensity!==void 0&&(w.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(w.gradientMap=this.gradientMap.toJSON(r).uuid),this.size!==void 0&&(w.size=this.size),this.sizeAttenuation!==void 0&&(w.sizeAttenuation=this.sizeAttenuation),this.blending!==1&&(w.blending=this.blending),this.flatShading===!0&&(w.flatShading=this.flatShading),this.side!==0&&(w.side=this.side),this.vertexColors&&(w.vertexColors=!0),1>this.opacity&&(w.opacity=this.opacity),this.transparent===!0&&(w.transparent=this.transparent),w.depthFunc=this.depthFunc,w.depthTest=this.depthTest,w.depthWrite=this.depthWrite,w.stencilWrite=this.stencilWrite,w.stencilWriteMask=this.stencilWriteMask,w.stencilFunc=this.stencilFunc,w.stencilRef=this.stencilRef,w.stencilFuncMask=this.stencilFuncMask,w.stencilFail=this.stencilFail,w.stencilZFail=this.stencilZFail,w.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(w.rotation=this.rotation),this.polygonOffset===!0&&(w.polygonOffset=!0),this.polygonOffsetFactor!==0&&(w.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(w.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(w.linewidth=this.linewidth),this.dashSize!==void 0&&(w.dashSize=this.dashSize),this.gapSize!==void 0&&(w.gapSize=this.gapSize),this.scale!==void 0&&(w.scale=this.scale),this.dithering===!0&&(w.dithering=!0),0<this.alphaTest&&(w.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(w.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(w.wireframe=this.wireframe),1<this.wireframeLinewidth&&(w.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(w.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(w.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(w.morphTargets=!0),this.morphNormals===!0&&(w.morphNormals=!0),this.skinning===!0&&(w.skinning=!0),this.visible===!1&&(w.visible=!1),this.toneMapped===!1&&(w.toneMapped=!1),yu(this.userData)!=="{}"&&(w.userData=this.userData),f&&(f=l(r.textures),r=l(r.images),0<f.length&&(w.textures=f),0<r.length&&(w.images=r)),w},clone:function(){return new this.constructor().copy(this)},copy:function(r){this.name=r.name,this.fog=r.fog,this.blending=r.blending,this.side=r.side,this.flatShading=r.flatShading,this.vertexColors=r.vertexColors,this.opacity=r.opacity,this.transparent=r.transparent,this.blendSrc=r.blendSrc,this.blendDst=r.blendDst,this.blendEquation=r.blendEquation,this.blendSrcAlpha=r.blendSrcAlpha,this.blendDstAlpha=r.blendDstAlpha,this.blendEquationAlpha=r.blendEquationAlpha,this.depthFunc=r.depthFunc,this.depthTest=r.depthTest,this.depthWrite=r.depthWrite,this.stencilWriteMask=r.stencilWriteMask,this.stencilFunc=r.stencilFunc,this.stencilRef=r.stencilRef,this.stencilFuncMask=r.stencilFuncMask,this.stencilFail=r.stencilFail,this.stencilZFail=r.stencilZFail,this.stencilZPass=r.stencilZPass,this.stencilWrite=r.stencilWrite;var l=r.clippingPlanes,f=null;if(l!==null){var w=l.length;f=Array(w);for(var E=0;E!==w;++E)f[E]=l[E].clone()}return this.clippingPlanes=f,this.clipIntersection=r.clipIntersection,this.clipShadows=r.clipShadows,this.shadowSide=r.shadowSide,this.colorWrite=r.colorWrite,this.precision=r.precision,this.polygonOffset=r.polygonOffset,this.polygonOffsetFactor=r.polygonOffsetFactor,this.polygonOffsetUnits=r.polygonOffsetUnits,this.dithering=r.dithering,this.alphaTest=r.alphaTest,this.premultipliedAlpha=r.premultipliedAlpha,this.visible=r.visible,this.toneMapped=r.toneMapped,this.userData=JSON.parse(yu(r.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Et.prototype,"needsUpdate",{set:function(r){r===!0&&this.version++}}),xr.prototype=Le(Et.prototype),xr.prototype.constructor=xr,xr.prototype.isMeshBasicMaterial=!0,xr.prototype.copy=function(r){return Et.prototype.copy.call(this,r),this.color.copy(r.color),this.map=r.map,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.specularMap=r.specularMap,this.alphaMap=r.alphaMap,this.envMap=r.envMap,this.combine=r.combine,this.reflectivity=r.reflectivity,this.refractionRatio=r.refractionRatio,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this};var Mo=new I;Object.defineProperty(Nt.prototype,"needsUpdate",{set:function(r){r===!0&&this.version++}}),Pe(Nt.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(r){return this.usage=r,this},copy:function(r){return this.name=r.name,this.array=new r.array.constructor(r.array),this.itemSize=r.itemSize,this.count=r.count,this.normalized=r.normalized,this.usage=r.usage,this},copyAt:function(r,l,f){r*=this.itemSize,f*=l.itemSize;for(var w=0,E=this.itemSize;w<E;w++)this.array[r+w]=l.array[f+w];return this},copyArray:function(r){return this.array.set(r),this},copyColorsArray:function(r){for(var l=this.array,f=0,w=0,E=r.length;w<E;w++){var O=r[w];O===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",w),O=new He),l[f++]=O.r,l[f++]=O.g,l[f++]=O.b}return this},copyVector2sArray:function(r){for(var l=this.array,f=0,w=0,E=r.length;w<E;w++){var O=r[w];O===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",w),O=new v),l[f++]=O.x,l[f++]=O.y}return this},copyVector3sArray:function(r){for(var l=this.array,f=0,w=0,E=r.length;w<E;w++){var O=r[w];O===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",w),O=new I),l[f++]=O.x,l[f++]=O.y,l[f++]=O.z}return this},copyVector4sArray:function(r){for(var l=this.array,f=0,w=0,E=r.length;w<E;w++){var O=r[w];O===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",w),O=new y),l[f++]=O.x,l[f++]=O.y,l[f++]=O.z,l[f++]=O.w}return this},applyMatrix3:function(r){for(var l=0,f=this.count;l<f;l++)Mo.x=this.getX(l),Mo.y=this.getY(l),Mo.z=this.getZ(l),Mo.applyMatrix3(r),this.setXYZ(l,Mo.x,Mo.y,Mo.z);return this},applyMatrix4:function(r){for(var l=0,f=this.count;l<f;l++)Mo.x=this.getX(l),Mo.y=this.getY(l),Mo.z=this.getZ(l),Mo.applyMatrix4(r),this.setXYZ(l,Mo.x,Mo.y,Mo.z);return this},applyNormalMatrix:function(r){for(var l=0,f=this.count;l<f;l++)Mo.x=this.getX(l),Mo.y=this.getY(l),Mo.z=this.getZ(l),Mo.applyNormalMatrix(r),this.setXYZ(l,Mo.x,Mo.y,Mo.z);return this},transformDirection:function(r){for(var l=0,f=this.count;l<f;l++)Mo.x=this.getX(l),Mo.y=this.getY(l),Mo.z=this.getZ(l),Mo.transformDirection(r),this.setXYZ(l,Mo.x,Mo.y,Mo.z);return this},set:function(r,l){return l===void 0&&(l=0),this.array.set(r,l),this},getX:function(r){return this.array[r*this.itemSize]},setX:function(r,l){return this.array[r*this.itemSize]=l,this},getY:function(r){return this.array[r*this.itemSize+1]},setY:function(r,l){return this.array[r*this.itemSize+1]=l,this},getZ:function(r){return this.array[r*this.itemSize+2]},setZ:function(r,l){return this.array[r*this.itemSize+2]=l,this},getW:function(r){return this.array[r*this.itemSize+3]},setW:function(r,l){return this.array[r*this.itemSize+3]=l,this},setXY:function(r,l,f){return r*=this.itemSize,this.array[r+0]=l,this.array[r+1]=f,this},setXYZ:function(r,l,f,w){return r*=this.itemSize,this.array[r+0]=l,this.array[r+1]=f,this.array[r+2]=w,this},setXYZW:function(r,l,f,w,E){return r*=this.itemSize,this.array[r+0]=l,this.array[r+1]=f,this.array[r+2]=w,this.array[r+3]=E,this},onUpload:function(r){return this.onUploadCallback=r,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),Pr.prototype=Le(Nt.prototype),Pr.prototype.constructor=Pr,qr.prototype=Le(Nt.prototype),qr.prototype.constructor=qr,Fr.prototype=Le(Nt.prototype),Fr.prototype.constructor=Fr,$n.prototype=Le(Nt.prototype),$n.prototype.constructor=$n,Gr.prototype=Le(Nt.prototype),Gr.prototype.constructor=Gr,ze.prototype=Le(Nt.prototype),ze.prototype.constructor=ze,Ue.prototype=Le(Nt.prototype),Ue.prototype.constructor=Ue,ke.prototype=Le(Nt.prototype),ke.prototype.constructor=ke,Je.prototype=Le(Nt.prototype),Je.prototype.constructor=Je,Pe(Ce.prototype,{computeGroups:function(r){var l=[],f=void 0;r=r.faces;for(var w=0;w<r.length;w++){var E=r[w];if(E.materialIndex!==f){f=E.materialIndex,O!==void 0&&(O.count=3*w-O.start,l.push(O));var O={start:3*w,materialIndex:f}}}O!==void 0&&(O.count=3*w-O.start,l.push(O)),this.groups=l},fromGeometry:function(r){var l=r.faces,f=r.vertices,w=r.faceVertexUvs,E=w[0]&&0<w[0].length,O=w[1]&&0<w[1].length,B=r.morphTargets,Y=B.length;if(0<Y){for(var K=[],$=0;$<Y;$++)K[$]={name:B[$].name,data:[]};this.morphTargets.position=K}var pe=r.morphNormals,fe=pe.length;if(0<fe){var xe=[];for($=0;$<fe;$++)xe[$]={name:pe[$].name,data:[]};this.morphTargets.normal=xe}var ye=r.skinIndices,Me=r.skinWeights,Oe=ye.length===f.length,it=Me.length===f.length;for(0<f.length&&l.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),$=0;$<l.length;$++){var xt=l[$];this.vertices.push(f[xt.a],f[xt.b],f[xt.c]);var pt=xt.vertexNormals;for(pt.length===3?this.normals.push(pt[0],pt[1],pt[2]):(pt=xt.normal,this.normals.push(pt,pt,pt)),pt=xt.vertexColors,pt.length===3?this.colors.push(pt[0],pt[1],pt[2]):(pt=xt.color,this.colors.push(pt,pt,pt)),E===!0&&(pt=w[0][$],pt!==void 0?this.uvs.push(pt[0],pt[1],pt[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",$),this.uvs.push(new v,new v,new v))),O===!0&&(pt=w[1][$],pt!==void 0?this.uvs2.push(pt[0],pt[1],pt[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",$),this.uvs2.push(new v,new v,new v))),pt=0;pt<Y;pt++){var Lt=B[pt].vertices;K[pt].data.push(Lt[xt.a],Lt[xt.b],Lt[xt.c])}for(pt=0;pt<fe;pt++)Lt=pe[pt].vertexNormals[$],xe[pt].data.push(Lt.a,Lt.b,Lt.c);Oe&&this.skinIndices.push(ye[xt.a],ye[xt.b],ye[xt.c]),it&&this.skinWeights.push(Me[xt.a],Me[xt.b],Me[xt.c])}return this.computeGroups(r),this.verticesNeedUpdate=r.verticesNeedUpdate,this.normalsNeedUpdate=r.normalsNeedUpdate,this.colorsNeedUpdate=r.colorsNeedUpdate,this.uvsNeedUpdate=r.uvsNeedUpdate,this.groupsNeedUpdate=r.groupsNeedUpdate,r.boundingSphere!==null&&(this.boundingSphere=r.boundingSphere.clone()),r.boundingBox!==null&&(this.boundingBox=r.boundingBox.clone()),this}});var mW=1,yf=new b,KR=new G,$y=new I,Tu=new se,XA=new se,Va=new I;Fe.prototype=Pe(Le(c.prototype),{constructor:Fe,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(r){Array.isArray(r)?this.index=new(65535<be(r)?Ue:Gr)(r,1):this.index=r},getAttribute:function(r){return this.attributes[r]},setAttribute:function(r,l){return this.attributes[r]=l,this},deleteAttribute:function(r){return delete this.attributes[r],this},addGroup:function(r,l,f){this.groups.push({start:r,count:l,materialIndex:f!==void 0?f:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(r,l){this.drawRange.start=r,this.drawRange.count=l},applyMatrix4:function(r){var l=this.attributes.position;if(l!==void 0&&(l.applyMatrix4(r),l.needsUpdate=!0),l=this.attributes.normal,l!==void 0){var f=new g().getNormalMatrix(r);l.applyNormalMatrix(f),l.needsUpdate=!0}return l=this.attributes.tangent,l!==void 0&&(l.transformDirection(r),l.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(r){return yf.makeRotationX(r),this.applyMatrix4(yf),this},rotateY:function(r){return yf.makeRotationY(r),this.applyMatrix4(yf),this},rotateZ:function(r){return yf.makeRotationZ(r),this.applyMatrix4(yf),this},translate:function(r,l,f){return yf.makeTranslation(r,l,f),this.applyMatrix4(yf),this},scale:function(r,l,f){return yf.makeScale(r,l,f),this.applyMatrix4(yf),this},lookAt:function(r){return KR.lookAt(r),KR.updateMatrix(),this.applyMatrix4(KR.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter($y).negate(),this.translate($y.x,$y.y,$y.z),this},setFromObject:function(r){var l=r.geometry;if(r.isPoints||r.isLine){r=new ke(3*l.vertices.length,3);var f=new ke(3*l.colors.length,3);this.setAttribute("position",r.copyVector3sArray(l.vertices)),this.setAttribute("color",f.copyColorsArray(l.colors)),l.lineDistances&&l.lineDistances.length===l.vertices.length&&(r=new ke(l.lineDistances.length,1),this.setAttribute("lineDistance",r.copyArray(l.lineDistances))),l.boundingSphere!==null&&(this.boundingSphere=l.boundingSphere.clone()),l.boundingBox!==null&&(this.boundingBox=l.boundingBox.clone())}else r.isMesh&&l&&l.isGeometry&&this.fromGeometry(l);return this},setFromPoints:function(r){for(var l=[],f=0,w=r.length;f<w;f++){var E=r[f];l.push(E.x,E.y,E.z||0)}return this.setAttribute("position",new ke(l,3)),this},updateFromObject:function(r){var l=r.geometry;if(r.isMesh){var f=l.__directGeometry;if(l.elementsNeedUpdate===!0&&(f=void 0,l.elementsNeedUpdate=!1),f===void 0)return this.fromGeometry(l);f.verticesNeedUpdate=l.verticesNeedUpdate,f.normalsNeedUpdate=l.normalsNeedUpdate,f.colorsNeedUpdate=l.colorsNeedUpdate,f.uvsNeedUpdate=l.uvsNeedUpdate,f.groupsNeedUpdate=l.groupsNeedUpdate,l.verticesNeedUpdate=!1,l.normalsNeedUpdate=!1,l.colorsNeedUpdate=!1,l.uvsNeedUpdate=!1,l.groupsNeedUpdate=!1,l=f}return l.verticesNeedUpdate===!0&&(f=this.attributes.position,f!==void 0&&(f.copyVector3sArray(l.vertices),f.needsUpdate=!0),l.verticesNeedUpdate=!1),l.normalsNeedUpdate===!0&&(f=this.attributes.normal,f!==void 0&&(f.copyVector3sArray(l.normals),f.needsUpdate=!0),l.normalsNeedUpdate=!1),l.colorsNeedUpdate===!0&&(f=this.attributes.color,f!==void 0&&(f.copyColorsArray(l.colors),f.needsUpdate=!0),l.colorsNeedUpdate=!1),l.uvsNeedUpdate&&(f=this.attributes.uv,f!==void 0&&(f.copyVector2sArray(l.uvs),f.needsUpdate=!0),l.uvsNeedUpdate=!1),l.lineDistancesNeedUpdate&&(f=this.attributes.lineDistance,f!==void 0&&(f.copyArray(l.lineDistances),f.needsUpdate=!0),l.lineDistancesNeedUpdate=!1),l.groupsNeedUpdate&&(l.computeGroups(r.geometry),this.groups=l.groups,l.groupsNeedUpdate=!1),this},fromGeometry:function(r){return r.__directGeometry=new Ce().fromGeometry(r),this.fromDirectGeometry(r.__directGeometry)},fromDirectGeometry:function(r){var l=new Float32Array(3*r.vertices.length);this.setAttribute("position",new Nt(l,3).copyVector3sArray(r.vertices)),0<r.normals.length&&(l=new Float32Array(3*r.normals.length),this.setAttribute("normal",new Nt(l,3).copyVector3sArray(r.normals))),0<r.colors.length&&(l=new Float32Array(3*r.colors.length),this.setAttribute("color",new Nt(l,3).copyColorsArray(r.colors))),0<r.uvs.length&&(l=new Float32Array(2*r.uvs.length),this.setAttribute("uv",new Nt(l,2).copyVector2sArray(r.uvs))),0<r.uvs2.length&&(l=new Float32Array(2*r.uvs2.length),this.setAttribute("uv2",new Nt(l,2).copyVector2sArray(r.uvs2))),this.groups=r.groups;for(var f in r.morphTargets){l=[];for(var w=r.morphTargets[f],E=0,O=w.length;E<O;E++){var B=w[E],Y=new ke(3*B.data.length,3);Y.name=B.name,l.push(Y.copyVector3sArray(B.data))}this.morphAttributes[f]=l}return 0<r.skinIndices.length&&(f=new ke(4*r.skinIndices.length,4),this.setAttribute("skinIndex",f.copyVector4sArray(r.skinIndices))),0<r.skinWeights.length&&(f=new ke(4*r.skinWeights.length,4),this.setAttribute("skinWeight",f.copyVector4sArray(r.skinWeights))),r.boundingSphere!==null&&(this.boundingSphere=r.boundingSphere.clone()),r.boundingBox!==null&&(this.boundingBox=r.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new se);var r=this.attributes.position,l=this.morphAttributes.position;if(r!==void 0){if(this.boundingBox.setFromBufferAttribute(r),l){r=0;for(var f=l.length;r<f;r++)Tu.setFromBufferAttribute(l[r]),this.morphTargetsRelative?(Va.addVectors(this.boundingBox.min,Tu.min),this.boundingBox.expandByPoint(Va),Va.addVectors(this.boundingBox.max,Tu.max),this.boundingBox.expandByPoint(Va)):(this.boundingBox.expandByPoint(Tu.min),this.boundingBox.expandByPoint(Tu.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new we);var r=this.attributes.position,l=this.morphAttributes.position;if(r){var f=this.boundingSphere.center;if(Tu.setFromBufferAttribute(r),l)for(var w=0,E=l.length;w<E;w++){var O=l[w];XA.setFromBufferAttribute(O),this.morphTargetsRelative?(Va.addVectors(Tu.min,XA.min),Tu.expandByPoint(Va),Va.addVectors(Tu.max,XA.max),Tu.expandByPoint(Va)):(Tu.expandByPoint(XA.min),Tu.expandByPoint(XA.max))}Tu.getCenter(f);var B=0;for(w=0,E=r.count;w<E;w++)Va.fromBufferAttribute(r,w),B=Math.max(B,f.distanceToSquared(Va));if(l)for(w=0,E=l.length;w<E;w++){O=l[w];for(var Y=this.morphTargetsRelative,K=0,$=O.count;K<$;K++)Va.fromBufferAttribute(O,K),Y&&($y.fromBufferAttribute(r,K),Va.add($y)),B=Math.max(B,f.distanceToSquared(Va))}this.boundingSphere.radius=Math.sqrt(B),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var r=this.index,l=this.attributes;if(l.position){var f=l.position.array;if(l.normal===void 0)this.setAttribute("normal",new Nt(new Float32Array(f.length),3));else for(var w=l.normal.array,E=0,O=w.length;E<O;E++)w[E]=0;w=l.normal.array;var B=new I,Y=new I,K=new I,$=new I,pe=new I;if(r){var fe=r.array;for(E=0,O=r.count;E<O;E+=3){r=3*fe[E+0];var xe=3*fe[E+1],ye=3*fe[E+2];B.fromArray(f,r),Y.fromArray(f,xe),K.fromArray(f,ye),$.subVectors(K,Y),pe.subVectors(B,Y),$.cross(pe),w[r]+=$.x,w[r+1]+=$.y,w[r+2]+=$.z,w[xe]+=$.x,w[xe+1]+=$.y,w[xe+2]+=$.z,w[ye]+=$.x,w[ye+1]+=$.y,w[ye+2]+=$.z}}else for(E=0,O=f.length;E<O;E+=9)B.fromArray(f,E),Y.fromArray(f,E+3),K.fromArray(f,E+6),$.subVectors(K,Y),pe.subVectors(B,Y),$.cross(pe),w[E]=$.x,w[E+1]=$.y,w[E+2]=$.z,w[E+3]=$.x,w[E+4]=$.y,w[E+5]=$.z,w[E+6]=$.x,w[E+7]=$.y,w[E+8]=$.z;this.normalizeNormals(),l.normal.needsUpdate=!0}},merge:function(r,l){if(r&&r.isBufferGeometry){l===void 0&&(l=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var f=this.attributes,w;for(w in f)if(r.attributes[w]!==void 0){var E=f[w].array,O=r.attributes[w],B=O.array,Y=O.itemSize*l;O=Math.min(B.length,E.length-Y);for(var K=0;K<O;K++,Y++)E[Y]=B[K]}return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",r)},normalizeNormals:function(){for(var r=this.attributes.normal,l=0,f=r.count;l<f;l++)Va.x=r.getX(l),Va.y=r.getY(l),Va.z=r.getZ(l),Va.normalize(),r.setXYZ(l,Va.x,Va.y,Va.z)},toNonIndexed:function(){function r(pe,fe){var xe=pe.array,ye=pe.itemSize;pe=pe.normalized;for(var Me=new xe.constructor(fe.length*ye),Oe,it=0,xt=0,pt=fe.length;xt<pt;xt++){Oe=fe[xt]*ye;for(var Lt=0;Lt<ye;Lt++)Me[it++]=xe[Oe++]}return new Nt(Me,ye,pe)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var l=new Fe,f=this.index.array,w=this.attributes,E;for(E in w){var O=w[E];O=r(O,f),l.setAttribute(E,O)}var B=this.morphAttributes;for(E in B){var Y=[],K=B[E];w=0;for(var $=K.length;w<$;w++)O=K[w],O=r(O,f),Y.push(O);l.morphAttributes[E]=Y}for(l.morphTargetsRelative=this.morphTargetsRelative,f=this.groups,w=0,E=f.length;w<E;w++)O=f[w],l.addGroup(O.start,O.count,O.materialIndex);return l},toJSON:function(){var r={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),0<Hi(this.userData).length&&(r.userData=this.userData),this.parameters!==void 0){var l=this.parameters;for($ in l)l[$]!==void 0&&(r[$]=l[$]);return r}r.data={attributes:{}},l=this.index,l!==null&&(r.data.index={type:l.array.constructor.name,array:Array.prototype.slice.call(l.array)});var f=this.attributes;for($ in f){l=f[$];var w=l.toJSON();l.name!==""&&(w.name=l.name),r.data.attributes[$]=w}f={};var E=!1;for($ in this.morphAttributes){for(var O=this.morphAttributes[$],B=[],Y=0,K=O.length;Y<K;Y++)l=O[Y],w=l.toJSON(),l.name!==""&&(w.name=l.name),B.push(w);0<B.length&&(f[$]=B,E=!0)}E&&(r.data.morphAttributes=f,r.data.morphTargetsRelative=this.morphTargetsRelative);var $=this.groups;return 0<$.length&&(r.data.groups=JSON.parse(yu($))),$=this.boundingSphere,$!==null&&(r.data.boundingSphere={center:$.center.toArray(),radius:$.radius}),r},clone:function(){return new Fe().copy(this)},copy:function(r){var l;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.name=r.name;var f=r.index;f!==null&&this.setIndex(f.clone()),f=r.attributes;for(B in f)this.setAttribute(B,f[B].clone());var w=r.morphAttributes;for(B in w){var E=[],O=w[B];for(f=0,l=O.length;f<l;f++)E.push(O[f].clone());this.morphAttributes[B]=E}this.morphTargetsRelative=r.morphTargetsRelative;var B=r.groups;for(f=0,l=B.length;f<l;f++)w=B[f],this.addGroup(w.start,w.count,w.materialIndex);return B=r.boundingBox,B!==null&&(this.boundingBox=B.clone()),B=r.boundingSphere,B!==null&&(this.boundingSphere=B.clone()),this.drawRange.start=r.drawRange.start,this.drawRange.count=r.drawRange.count,this.userData=r.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var X6=new b,_v=new Te,JR=new we,um=new I,cm=new I,hm=new I,QR=new I,$R=new I,eL=new I,sS=new I,lS=new I,uS=new I,e1=new v,t1=new v,r1=new v,YA=new I,cS=new I;Qe.prototype=Pe(Le(G.prototype),{constructor:Qe,isMesh:!0,copy:function(r){return G.prototype.copy.call(this,r),r.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=r.morphTargetInfluences.slice()),r.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Pe({},r.morphTargetDictionary)),this},updateMorphTargets:function(){var r=this.geometry;if(r.isBufferGeometry){r=r.morphAttributes;var l=Hi(r);if(0<l.length){var f=r[l[0]];if(f!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},r=0,l=f.length;r<l;r++){var w=f[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[w]=r}}}else r=r.morphTargets,r!==void 0&&0<r.length&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},raycast:function(r,l){var f=this.geometry,w=this.material,E=this.matrixWorld;if(w!==void 0&&(f.boundingSphere===null&&f.computeBoundingSphere(),JR.copy(f.boundingSphere),JR.applyMatrix4(E),r.ray.intersectsSphere(JR)!==!1&&(X6.getInverse(E),_v.copy(r.ray).applyMatrix4(X6),f.boundingBox===null||_v.intersectsBox(f.boundingBox)!==!1))){if(f.isBufferGeometry){var O=f.index;E=f.attributes.position;var B=f.morphAttributes.position,Y=f.morphTargetsRelative,K=f.attributes.uv,$=f.attributes.uv2,pe=f.groups,fe=f.drawRange,xe,ye;if(O!==null)if(Array.isArray(w)){var Me=0;for(xe=pe.length;Me<xe;Me++){var Oe=pe[Me],it=w[Oe.materialIndex],xt=Math.max(Oe.start,fe.start);for(ye=f=Math.min(Oe.start+Oe.count,fe.start+fe.count);xt<ye;xt+=3){f=O.getX(xt);var pt=O.getX(xt+1),Lt=O.getX(xt+2);(f=Mt(this,it,r,_v,E,B,Y,K,$,f,pt,Lt))&&(f.faceIndex=Math.floor(xt/3),f.face.materialIndex=Oe.materialIndex,l.push(f))}}}else for(xt=Math.max(0,fe.start),f=Math.min(O.count,fe.start+fe.count),Me=xt,xe=f;Me<xe;Me+=3)f=O.getX(Me),pt=O.getX(Me+1),Lt=O.getX(Me+2),(f=Mt(this,w,r,_v,E,B,Y,K,$,f,pt,Lt))&&(f.faceIndex=Math.floor(Me/3),l.push(f));else if(E!==void 0)if(Array.isArray(w))for(Me=0,xe=pe.length;Me<xe;Me++)for(Oe=pe[Me],it=w[Oe.materialIndex],xt=Math.max(Oe.start,fe.start),ye=f=Math.min(Oe.start+Oe.count,fe.start+fe.count);xt<ye;xt+=3)f=xt,pt=xt+1,Lt=xt+2,(f=Mt(this,it,r,_v,E,B,Y,K,$,f,pt,Lt))&&(f.faceIndex=Math.floor(xt/3),f.face.materialIndex=Oe.materialIndex,l.push(f));else for(xt=Math.max(0,fe.start),f=Math.min(E.count,fe.start+fe.count),Me=xt,xe=f;Me<xe;Me+=3)f=Me,pt=Me+1,Lt=Me+2,(f=Mt(this,w,r,_v,E,B,Y,K,$,f,pt,Lt))&&(f.faceIndex=Math.floor(Me/3),l.push(f))}else if(f.isGeometry)for(E=Array.isArray(w),B=f.vertices,Y=f.faces,f=f.faceVertexUvs[0],0<f.length&&(O=f),fe=0,Me=Y.length;fe<Me;fe++)xe=Y[fe],f=E?w[xe.materialIndex]:w,f!==void 0&&(K=B[xe.a],$=B[xe.b],pe=B[xe.c],f=ft(this,f,r,_v,K,$,pe,YA))&&(O&&O[fe]&&(Oe=O[fe],e1.copy(Oe[0]),t1.copy(Oe[1]),r1.copy(Oe[2]),f.uv=Ge.getUV(YA,K,$,pe,e1,t1,r1,new v)),f.face=xe,f.faceIndex=fe,l.push(f))}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var gW=0,xf=new b,tL=new G,hS=new I;Ne.prototype=Pe(Le(c.prototype),{constructor:Ne,isGeometry:!0,applyMatrix4:function(r){for(var l=new g().getNormalMatrix(r),f=0,w=this.vertices.length;f<w;f++)this.vertices[f].applyMatrix4(r);for(f=0,w=this.faces.length;f<w;f++){r=this.faces[f],r.normal.applyMatrix3(l).normalize();for(var E=0,O=r.vertexNormals.length;E<O;E++)r.vertexNormals[E].applyMatrix3(l).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.normalsNeedUpdate=this.verticesNeedUpdate=!0,this},rotateX:function(r){return xf.makeRotationX(r),this.applyMatrix4(xf),this},rotateY:function(r){return xf.makeRotationY(r),this.applyMatrix4(xf),this},rotateZ:function(r){return xf.makeRotationZ(r),this.applyMatrix4(xf),this},translate:function(r,l,f){return xf.makeTranslation(r,l,f),this.applyMatrix4(xf),this},scale:function(r,l,f){return xf.makeScale(r,l,f),this.applyMatrix4(xf),this},lookAt:function(r){return tL.lookAt(r),tL.updateMatrix(),this.applyMatrix4(tL.matrix),this},fromBufferGeometry:function(r){function l(ye,Me,Oe,it){var xt=Y===void 0?[]:[f.colors[ye].clone(),f.colors[Me].clone(),f.colors[Oe].clone()],pt=B===void 0?[]:[new I().fromArray(B,3*ye),new I().fromArray(B,3*Me),new I().fromArray(B,3*Oe)];it=new vt(ye,Me,Oe,pt,xt,it),f.faces.push(it),K!==void 0&&f.faceVertexUvs[0].push([new v().fromArray(K,2*ye),new v().fromArray(K,2*Me),new v().fromArray(K,2*Oe)]),$!==void 0&&f.faceVertexUvs[1].push([new v().fromArray($,2*ye),new v().fromArray($,2*Me),new v().fromArray($,2*Oe)])}var f=this,w=r.index!==null?r.index.array:void 0,E=r.attributes;if(E.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var O=E.position.array,B=E.normal!==void 0?E.normal.array:void 0,Y=E.color!==void 0?E.color.array:void 0,K=E.uv!==void 0?E.uv.array:void 0,$=E.uv2!==void 0?E.uv2.array:void 0;for($!==void 0&&(this.faceVertexUvs[1]=[]),E=0;E<O.length;E+=3)f.vertices.push(new I().fromArray(O,E)),Y!==void 0&&f.colors.push(new He().fromArray(Y,E));var pe=r.groups;if(0<pe.length)for(E=0;E<pe.length;E++){O=pe[E];var fe=O.start,xe=fe;for(fe+=O.count;xe<fe;xe+=3)w!==void 0?l(w[xe],w[xe+1],w[xe+2],O.materialIndex):l(xe,xe+1,xe+2,O.materialIndex)}else if(w!==void 0)for(E=0;E<w.length;E+=3)l(w[E],w[E+1],w[E+2]);else for(E=0;E<O.length/3;E+=3)l(E,E+1,E+2);return this.computeFaceNormals(),r.boundingBox!==null&&(this.boundingBox=r.boundingBox.clone()),r.boundingSphere!==null&&(this.boundingSphere=r.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(hS).negate(),this.translate(hS.x,hS.y,hS.z),this},normalize:function(){this.computeBoundingSphere();var r=this.boundingSphere.center,l=this.boundingSphere.radius;l=l===0?1:1/l;var f=new b;return f.set(l,0,0,-l*r.x,0,l,0,-l*r.y,0,0,l,-l*r.z,0,0,0,1),this.applyMatrix4(f),this},computeFaceNormals:function(){for(var r=new I,l=new I,f=0,w=this.faces.length;f<w;f++){var E=this.faces[f],O=this.vertices[E.a],B=this.vertices[E.b];r.subVectors(this.vertices[E.c],B),l.subVectors(O,B),r.cross(l),r.normalize(),E.normal.copy(r)}},computeVertexNormals:function(r){r===void 0&&(r=!0);var l,f=Array(this.vertices.length),w=0;for(l=this.vertices.length;w<l;w++)f[w]=new I;if(r){var E=new I,O=new I;for(r=0,w=this.faces.length;r<w;r++){l=this.faces[r];var B=this.vertices[l.a],Y=this.vertices[l.b],K=this.vertices[l.c];E.subVectors(K,Y),O.subVectors(B,Y),E.cross(O),f[l.a].add(E),f[l.b].add(E),f[l.c].add(E)}}else for(this.computeFaceNormals(),r=0,w=this.faces.length;r<w;r++)l=this.faces[r],f[l.a].add(l.normal),f[l.b].add(l.normal),f[l.c].add(l.normal);for(w=0,l=this.vertices.length;w<l;w++)f[w].normalize();for(r=0,w=this.faces.length;r<w;r++)l=this.faces[r],B=l.vertexNormals,B.length===3?(B[0].copy(f[l.a]),B[1].copy(f[l.b]),B[2].copy(f[l.c])):(B[0]=f[l.a].clone(),B[1]=f[l.b].clone(),B[2]=f[l.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var r;this.computeFaceNormals();var l=0;for(r=this.faces.length;l<r;l++){var f=this.faces[l],w=f.vertexNormals;w.length===3?(w[0].copy(f.normal),w[1].copy(f.normal),w[2].copy(f.normal)):(w[0]=f.normal.clone(),w[1]=f.normal.clone(),w[2]=f.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var r,l,f=0;for(l=this.faces.length;f<l;f++){var w=this.faces[f];w.__originalFaceNormal?w.__originalFaceNormal.copy(w.normal):w.__originalFaceNormal=w.normal.clone(),w.__originalVertexNormals||(w.__originalVertexNormals=[]);var E=0;for(r=w.vertexNormals.length;E<r;E++)w.__originalVertexNormals[E]?w.__originalVertexNormals[E].copy(w.vertexNormals[E]):w.__originalVertexNormals[E]=w.vertexNormals[E].clone()}var O=new Ne;for(O.faces=this.faces,E=0,r=this.morphTargets.length;E<r;E++){if(!this.morphNormals[E]){this.morphNormals[E]={},this.morphNormals[E].faceNormals=[],this.morphNormals[E].vertexNormals=[],w=this.morphNormals[E].faceNormals;var B=this.morphNormals[E].vertexNormals;for(f=0,l=this.faces.length;f<l;f++){var Y=new I,K={a:new I,b:new I,c:new I};w.push(Y),B.push(K)}}for(B=this.morphNormals[E],O.vertices=this.morphTargets[E].vertices,O.computeFaceNormals(),O.computeVertexNormals(),f=0,l=this.faces.length;f<l;f++)w=this.faces[f],Y=B.faceNormals[f],K=B.vertexNormals[f],Y.copy(w.normal),K.a.copy(w.vertexNormals[0]),K.b.copy(w.vertexNormals[1]),K.c.copy(w.vertexNormals[2])}for(f=0,l=this.faces.length;f<l;f++)w=this.faces[f],w.normal=w.__originalFaceNormal,w.vertexNormals=w.__originalVertexNormals},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new se),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new we),this.boundingSphere.setFromPoints(this.vertices)},merge:function(r,l,f){if(r&&r.isGeometry){var w,E=this.vertices.length,O=this.vertices,B=r.vertices,Y=this.faces,K=r.faces,$=this.colors,pe=r.colors;f===void 0&&(f=0),l!==void 0&&(w=new g().getNormalMatrix(l));for(var fe=0,xe=B.length;fe<xe;fe++){var ye=B[fe].clone();l!==void 0&&ye.applyMatrix4(l),O.push(ye)}for(fe=0,xe=pe.length;fe<xe;fe++)$.push(pe[fe].clone());for(fe=0,xe=K.length;fe<xe;fe++){B=K[fe];var Me=B.vertexNormals;for(pe=B.vertexColors,$=new vt(B.a+E,B.b+E,B.c+E),$.normal.copy(B.normal),w!==void 0&&$.normal.applyMatrix3(w).normalize(),l=0,O=Me.length;l<O;l++)ye=Me[l].clone(),w!==void 0&&ye.applyMatrix3(w).normalize(),$.vertexNormals.push(ye);for($.color.copy(B.color),l=0,O=pe.length;l<O;l++)ye=pe[l],$.vertexColors.push(ye.clone());$.materialIndex=B.materialIndex+f,Y.push($)}for(fe=0,xe=r.faceVertexUvs.length;fe<xe;fe++)for(f=r.faceVertexUvs[fe],this.faceVertexUvs[fe]===void 0&&(this.faceVertexUvs[fe]=[]),l=0,O=f.length;l<O;l++){for(w=f[l],E=[],Y=0,K=w.length;Y<K;Y++)E.push(w[Y].clone());this.faceVertexUvs[fe].push(E)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",r)},mergeMesh:function(r){r&&r.isMesh?(r.matrixAutoUpdate&&r.updateMatrix(),this.merge(r.geometry,r.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",r)},mergeVertices:function(){var r={},l=[],f=[],w=Math.pow(10,4),E,O=0;for(E=this.vertices.length;O<E;O++){var B=this.vertices[O];B=Math.round(B.x*w)+"_"+Math.round(B.y*w)+"_"+Math.round(B.z*w),r[B]===void 0?(r[B]=O,l.push(this.vertices[O]),f[O]=l.length-1):f[O]=f[r[B]]}for(r=[],O=0,E=this.faces.length;O<E;O++)for(w=this.faces[O],w.a=f[w.a],w.b=f[w.b],w.c=f[w.c],w=[w.a,w.b,w.c],B=0;3>B;B++)if(w[B]===w[(B+1)%3]){r.push(O);break}for(O=r.length-1;0<=O;O--)for(w=r[O],this.faces.splice(w,1),f=0,E=this.faceVertexUvs.length;f<E;f++)this.faceVertexUvs[f].splice(w,1);return O=this.vertices.length-l.length,this.vertices=l,O},setFromPoints:function(r){this.vertices=[];for(var l=0,f=r.length;l<f;l++){var w=r[l];this.vertices.push(new I(w.x,w.y,w.z||0))}return this},sortFacesByMaterialIndex:function(){for(var r=this.faces,l=r.length,f=0;f<l;f++)r[f]._id=f;r.sort(function(K,$){return K.materialIndex-$.materialIndex});var w=this.faceVertexUvs[0],E=this.faceVertexUvs[1],O,B;for(w&&w.length===l&&(O=[]),E&&E.length===l&&(B=[]),f=0;f<l;f++){var Y=r[f]._id;O&&O.push(w[Y]),B&&B.push(E[Y])}O&&(this.faceVertexUvs[0]=O),B&&(this.faceVertexUvs[1]=B)},toJSON:function(){function r(Bt,yt,Kt){return Kt?Bt|1<<yt:Bt&~(1<<yt)}function l(Bt){var yt=Bt.x.toString()+Bt.y.toString()+Bt.z.toString();return $[yt]!==void 0||($[yt]=K.length/3,K.push(Bt.x,Bt.y,Bt.z)),$[yt]}function f(Bt){var yt=Bt.r.toString()+Bt.g.toString()+Bt.b.toString();return fe[yt]!==void 0||(fe[yt]=pe.length,pe.push(Bt.getHex())),fe[yt]}function w(Bt){var yt=Bt.x.toString()+Bt.y.toString();return ye[yt]!==void 0||(ye[yt]=xe.length/2,xe.push(Bt.x,Bt.y)),ye[yt]}var E={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(E.uuid=this.uuid,E.type=this.type,this.name!==""&&(E.name=this.name),this.parameters!==void 0){var O=this.parameters,B;for(B in O)O[B]!==void 0&&(E[B]=O[B]);return E}for(O=[],B=0;B<this.vertices.length;B++){var Y=this.vertices[B];O.push(Y.x,Y.y,Y.z)}Y=[];var K=[],$={},pe=[],fe={},xe=[],ye={};for(B=0;B<this.faces.length;B++){var Me=this.faces[B],Oe=this.faceVertexUvs[0][B]!==void 0,it=0<Me.normal.length(),xt=0<Me.vertexNormals.length,pt=Me.color.r!==1||Me.color.g!==1||Me.color.b!==1,Lt=0<Me.vertexColors.length,Ct=0;Ct=r(Ct,0,0),Ct=r(Ct,1,!0),Ct=r(Ct,2,!1),Ct=r(Ct,3,Oe),Ct=r(Ct,4,it),Ct=r(Ct,5,xt),Ct=r(Ct,6,pt),Ct=r(Ct,7,Lt),Y.push(Ct),Y.push(Me.a,Me.b,Me.c),Y.push(Me.materialIndex),Oe&&(Oe=this.faceVertexUvs[0][B],Y.push(w(Oe[0]),w(Oe[1]),w(Oe[2]))),it&&Y.push(l(Me.normal)),xt&&(it=Me.vertexNormals,Y.push(l(it[0]),l(it[1]),l(it[2]))),pt&&Y.push(f(Me.color)),Lt&&(Me=Me.vertexColors,Y.push(f(Me[0]),f(Me[1]),f(Me[2])))}return E.data={},E.data.vertices=O,E.data.normals=K,0<pe.length&&(E.data.colors=pe),0<xe.length&&(E.data.uvs=[xe]),E.data.faces=Y,E},clone:function(){return new Ne().copy(this)},copy:function(r){var l,f,w;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.name=r.name;var E=r.vertices,O=0;for(l=E.length;O<l;O++)this.vertices.push(E[O].clone());for(E=r.colors,O=0,l=E.length;O<l;O++)this.colors.push(E[O].clone());for(E=r.faces,O=0,l=E.length;O<l;O++)this.faces.push(E[O].clone());for(O=0,l=r.faceVertexUvs.length;O<l;O++){var B=r.faceVertexUvs[O];for(this.faceVertexUvs[O]===void 0&&(this.faceVertexUvs[O]=[]),E=0,f=B.length;E<f;E++){var Y=B[E],K=[],$=0;for(w=Y.length;$<w;$++)K.push(Y[$].clone());this.faceVertexUvs[O].push(K)}}for($=r.morphTargets,O=0,l=$.length;O<l;O++){if(w={},w.name=$[O].name,$[O].vertices!==void 0)for(w.vertices=[],E=0,f=$[O].vertices.length;E<f;E++)w.vertices.push($[O].vertices[E].clone());if($[O].normals!==void 0)for(w.normals=[],E=0,f=$[O].normals.length;E<f;E++)w.normals.push($[O].normals[E].clone());this.morphTargets.push(w)}for($=r.morphNormals,O=0,l=$.length;O<l;O++){if(w={},$[O].vertexNormals!==void 0)for(w.vertexNormals=[],E=0,f=$[O].vertexNormals.length;E<f;E++)B=$[O].vertexNormals[E],Y={},Y.a=B.a.clone(),Y.b=B.b.clone(),Y.c=B.c.clone(),w.vertexNormals.push(Y);if($[O].faceNormals!==void 0)for(w.faceNormals=[],E=0,f=$[O].faceNormals.length;E<f;E++)w.faceNormals.push($[O].faceNormals[E].clone());this.morphNormals.push(w)}for(E=r.skinWeights,O=0,l=E.length;O<l;O++)this.skinWeights.push(E[O].clone());for(E=r.skinIndices,O=0,l=E.length;O<l;O++)this.skinIndices.push(E[O].clone());for(E=r.lineDistances,O=0,l=E.length;O<l;O++)this.lineDistances.push(E[O]);return O=r.boundingBox,O!==null&&(this.boundingBox=O.clone()),O=r.boundingSphere,O!==null&&(this.boundingSphere=O.clone()),this.elementsNeedUpdate=r.elementsNeedUpdate,this.verticesNeedUpdate=r.verticesNeedUpdate,this.uvsNeedUpdate=r.uvsNeedUpdate,this.normalsNeedUpdate=r.normalsNeedUpdate,this.colorsNeedUpdate=r.colorsNeedUpdate,this.lineDistancesNeedUpdate=r.lineDistancesNeedUpdate,this.groupsNeedUpdate=r.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var rL=function(r){function l(f,w,E,O,B,Y){r.call(this),this.type="BoxGeometry",this.parameters={width:f,height:w,depth:E,widthSegments:O,heightSegments:B,depthSegments:Y},this.fromBufferGeometry(new ZA(f,w,E,O,B,Y)),this.mergeVertices()}return r&&(l.__proto__=r),l.prototype=Le(r&&r.prototype),l.prototype.constructor=l}(Ne),ZA=function(r){function l(f,w,E,O,B,Y){function K(it,xt,pt,Lt,Ct,Bt,yt,Kt,cr,zt,yr){var ir=Bt/cr,Jr=yt/zt,Mn=Bt/2,br=yt/2,vn=Kt/2;yt=cr+1;for(var ni=zt+1,Hn=Bt=0,Ci=new I,si=0;si<ni;si++)for(var to=si*Jr-br,go=0;go<yt;go++)Ci[it]=(go*ir-Mn)*Lt,Ci[xt]=to*Ct,Ci[pt]=vn,fe.push(Ci.x,Ci.y,Ci.z),Ci[it]=0,Ci[xt]=0,Ci[pt]=0<Kt?1:-1,xe.push(Ci.x,Ci.y,Ci.z),ye.push(go/cr),ye.push(1-si/zt),Bt+=1;for(it=0;it<zt;it++)for(xt=0;xt<cr;xt++)pt=Me+xt+yt*(it+1),Lt=Me+(xt+1)+yt*(it+1),Ct=Me+(xt+1)+yt*it,pe.push(Me+xt+yt*it,pt,Ct),pe.push(pt,Lt,Ct),Hn+=6;$.addGroup(Oe,Hn,yr),Oe+=Hn,Me+=Bt}r.call(this),this.type="BoxBufferGeometry",this.parameters={width:f,height:w,depth:E,widthSegments:O,heightSegments:B,depthSegments:Y};var $=this;f=f||1,w=w||1,E=E||1,O=Math.floor(O)||1,B=Math.floor(B)||1,Y=Math.floor(Y)||1;var pe=[],fe=[],xe=[],ye=[],Me=0,Oe=0;K("z","y","x",-1,-1,E,w,f,Y,B,0),K("z","y","x",1,-1,E,w,-f,Y,B,1),K("x","z","y",1,1,f,E,w,O,Y,2),K("x","z","y",1,-1,f,E,-w,O,Y,3),K("x","y","z",1,-1,f,w,E,O,B,4),K("x","y","z",-1,-1,f,w,-E,O,B,5),this.setIndex(pe),this.setAttribute("position",new ke(fe,3)),this.setAttribute("normal",new ke(xe,3)),this.setAttribute("uv",new ke(ye,2))}return r&&(l.__proto__=r),l.prototype=Le(r&&r.prototype),l.prototype.constructor=l}(Fe),Y6={clone:Gt,merge:Yt};kt.prototype=Le(Et.prototype),kt.prototype.constructor=kt,kt.prototype.isShaderMaterial=!0,kt.prototype.copy=function(r){return Et.prototype.copy.call(this,r),this.fragmentShader=r.fragmentShader,this.vertexShader=r.vertexShader,this.uniforms=Gt(r.uniforms),this.defines=Pe({},r.defines),this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.lights=r.lights,this.clipping=r.clipping,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.morphNormals=r.morphNormals,this.extensions=Pe({},r.extensions),this},kt.prototype.toJSON=function(r){var l=Et.prototype.toJSON.call(this,r);l.uniforms={};for(var f in this.uniforms){var w=this.uniforms[f].value;l.uniforms[f]=w&&w.isTexture?{type:"t",value:w.toJSON(r).uuid}:w&&w.isColor?{type:"c",value:w.getHex()}:w&&w.isVector2?{type:"v2",value:w.toArray()}:w&&w.isVector3?{type:"v3",value:w.toArray()}:w&&w.isVector4?{type:"v4",value:w.toArray()}:w&&w.isMatrix3?{type:"m3",value:w.toArray()}:w&&w.isMatrix4?{type:"m4",value:w.toArray()}:{value:w}}0<Hi(this.defines).length&&(l.defines=this.defines),l.vertexShader=this.vertexShader,l.fragmentShader=this.fragmentShader,r={};for(var E in this.extensions)this.extensions[E]===!0&&(r[E]=!0);return 0<Hi(r).length&&(l.extensions=r),l},Ot.prototype=Pe(Le(G.prototype),{constructor:Ot,isCamera:!0,copy:function(r,l){return G.prototype.copy.call(this,r,l),this.matrixWorldInverse.copy(r.matrixWorldInverse),this.projectionMatrix.copy(r.projectionMatrix),this.projectionMatrixInverse.copy(r.projectionMatrixInverse),this},getWorldDirection:function(r){r===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),r=new I),this.updateMatrixWorld(!0);var l=this.matrixWorld.elements;return r.set(-l[8],-l[9],-l[10]).normalize()},updateMatrixWorld:function(r){G.prototype.updateMatrixWorld.call(this,r),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(r,l){G.prototype.updateWorldMatrix.call(this,r,l),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}}),Jt.prototype=Pe(Le(Ot.prototype),{constructor:Jt,isPerspectiveCamera:!0,copy:function(r,l){return Ot.prototype.copy.call(this,r,l),this.fov=r.fov,this.zoom=r.zoom,this.near=r.near,this.far=r.far,this.focus=r.focus,this.aspect=r.aspect,this.view=r.view===null?null:Pe({},r.view),this.filmGauge=r.filmGauge,this.filmOffset=r.filmOffset,this},setFocalLength:function(r){r=.5*this.getFilmHeight()/r,this.fov=2*ci.RAD2DEG*Math.atan(r),this.updateProjectionMatrix()},getFocalLength:function(){var r=Math.tan(.5*ci.DEG2RAD*this.fov);return .5*this.getFilmHeight()/r},getEffectiveFOV:function(){return 2*ci.RAD2DEG*Math.atan(Math.tan(.5*ci.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(r,l,f,w,E,O){this.aspect=r/l,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=r,this.view.fullHeight=l,this.view.offsetX=f,this.view.offsetY=w,this.view.width=E,this.view.height=O,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var r=this.near,l=r*Math.tan(.5*ci.DEG2RAD*this.fov)/this.zoom,f=2*l,w=this.aspect*f,E=-.5*w,O=this.view;if(this.view!==null&&this.view.enabled){var B=O.fullWidth,Y=O.fullHeight;E+=O.offsetX*w/B,l-=O.offsetY*f/Y,w*=O.width/B,f*=O.height/Y}O=this.filmOffset,O!==0&&(E+=r*O/this.getFilmWidth()),this.projectionMatrix.makePerspective(E,E+w,l,l-f,r,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(r){return r=G.prototype.toJSON.call(this,r),r.object.fov=this.fov,r.object.zoom=this.zoom,r.object.near=this.near,r.object.far=this.far,r.object.focus=this.focus,r.object.aspect=this.aspect,this.view!==null&&(r.object.view=Pe({},this.view)),r.object.filmGauge=this.filmGauge,r.object.filmOffset=this.filmOffset,r}}),Kr.prototype=Le(G.prototype),Kr.prototype.constructor=Kr,gn.prototype=Le(T.prototype),gn.prototype.constructor=gn,gn.prototype.isWebGLCubeRenderTarget=!0,gn.prototype.fromEquirectangularTexture=function(r,l){this.texture.type=l.type,this.texture.format=l.format,this.texture.encoding=l.encoding;var f=new re,w=new kt({type:"CubemapFromEquirect",uniforms:Gt({tEquirect:{value:null}}),vertexShader:`varying vec3 vWorldDirection;
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragmentShader:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
}`,side:1,blending:0});return w.uniforms.tEquirect.value=l,l=new Qe(new ZA(5,5,5),w),f.add(l),new Kr(1,10,this).update(r,f),l.geometry.dispose(),l.material.dispose(),this},Zt.prototype=Le(A.prototype),Zt.prototype.constructor=Zt,Zt.prototype.isDataTexture=!0;var n1=new we,fS=new I;Pe(Nr.prototype,{set:function(r,l,f,w,E,O){var B=this.planes;return B[0].copy(r),B[1].copy(l),B[2].copy(f),B[3].copy(w),B[4].copy(E),B[5].copy(O),this},clone:function(){return new this.constructor().copy(this)},copy:function(r){for(var l=this.planes,f=0;6>f;f++)l[f].copy(r.planes[f]);return this},setFromProjectionMatrix:function(r){var l=this.planes,f=r.elements;r=f[0];var w=f[1],E=f[2],O=f[3],B=f[4],Y=f[5],K=f[6],$=f[7],pe=f[8],fe=f[9],xe=f[10],ye=f[11],Me=f[12],Oe=f[13],it=f[14];return f=f[15],l[0].setComponents(O-r,$-B,ye-pe,f-Me).normalize(),l[1].setComponents(O+r,$+B,ye+pe,f+Me).normalize(),l[2].setComponents(O+w,$+Y,ye+fe,f+Oe).normalize(),l[3].setComponents(O-w,$-Y,ye-fe,f-Oe).normalize(),l[4].setComponents(O-E,$-K,ye-xe,f-it).normalize(),l[5].setComponents(O+E,$+K,ye+xe,f+it).normalize(),this},intersectsObject:function(r){var l=r.geometry;return l.boundingSphere===null&&l.computeBoundingSphere(),n1.copy(l.boundingSphere).applyMatrix4(r.matrixWorld),this.intersectsSphere(n1)},intersectsSprite:function(r){return n1.center.set(0,0,0),n1.radius=.7071067811865476,n1.applyMatrix4(r.matrixWorld),this.intersectsSphere(n1)},intersectsSphere:function(r){var l=this.planes,f=r.center;r=-r.radius;for(var w=0;6>w;w++)if(l[w].distanceToPoint(f)<r)return!1;return!0},intersectsBox:function(r){for(var l=this.planes,f=0;6>f;f++){var w=l[f];if(fS.x=0<w.normal.x?r.max.x:r.min.x,fS.y=0<w.normal.y?r.max.y:r.min.y,fS.z=0<w.normal.z?r.max.z:r.min.z,0>w.distanceToPoint(fS))return!1}return!0},containsPoint:function(r){for(var l=this.planes,f=0;6>f;f++)if(0>l[f].distanceToPoint(r))return!1;return!0}});var Vr={common:{diffuse:{value:new He(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new g},uv2Transform:{value:new g},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new v(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new He(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new He(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new g}},sprite:{diffuse:{value:new He(15658734)},opacity:{value:1},center:{value:new v(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new g}}};Qo.prototype=Le(Ne.prototype),Qo.prototype.constructor=Qo,Ai.prototype=Le(Fe.prototype),Ai.prototype.constructor=Ai;var Si={alphamap_fragment:`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment:`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment:`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,aomap_fragment:`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,aomap_pars_fragment:`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs:`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS  = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha  = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,bumpmap_pars_fragment:`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment:`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment:`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex:`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex:`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment:`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment:`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_pars_vertex:`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_vertex:`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,common:`#define PI 3.14159265359
#define PI2 6.28318530718
#define PI_HALF 1.5707963267949
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
  return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cube_uv_reflection_fragment:`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_maxMipLevel 8.0
#define cubeUV_minMipLevel 4.0
#define cubeUV_maxTileSize 256.0
#define cubeUV_minTileSize 16.0
float getFace(vec3 direction) {
    vec3 absDirection = abs(direction);
    float face = -1.0;
    if (absDirection.x > absDirection.z) {
      if (absDirection.x > absDirection.y)
        face = direction.x > 0.0 ? 0.0 : 3.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    } else {
      if (absDirection.z > absDirection.y)
        face = direction.z > 0.0 ? 2.0 : 5.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    }
    return face;
}
vec2 getUV(vec3 direction, float face) {
    vec2 uv;
    if (face == 0.0) {
      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {
      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {
      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {
      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {
      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {
      uv = vec2(direction.x, direction.y) / abs(direction.z);    }
    return 0.5 * (uv + 1.0);
}
vec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
  float face = getFace(direction);
  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
  mipInt = max(mipInt, cubeUV_minMipLevel);
  float faceSize = exp2(mipInt);
  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
  vec2 uv = getUV(direction, face) * (faceSize - 1.0);
  vec2 f = fract(uv);
  uv += 0.5 - f;
  if (face > 2.0) {
    uv.y += faceSize;
    face -= 3.0;
  }
  uv.x += face * faceSize;
  if(mipInt < cubeUV_maxMipLevel){
    uv.y += 2.0 * cubeUV_maxTileSize;
  }
  uv.y += filterInt * 2.0 * cubeUV_minTileSize;
  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
  uv *= texelSize;
  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x += texelSize;
  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.y += texelSize;
  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x -= texelSize;
  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  vec3 tm = mix(tl, tr, f.x);
  vec3 bm = mix(bl, br, f.x);
  return mix(tm, bm, f.y);
}
#define r0 1.0
#define v0 0.339
#define m0 -2.0
#define r1 0.8
#define v1 0.276
#define m1 -1.0
#define r4 0.4
#define v4 0.046
#define m4 2.0
#define r5 0.305
#define v5 0.016
#define m5 3.0
#define r6 0.21
#define v6 0.0038
#define m6 4.0
float roughnessToMip(float roughness) {
  float mip = 0.0;
  if (roughness >= r1) {
    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
  } else if (roughness >= r4) {
    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
  } else if (roughness >= r5) {
    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
  } else if (roughness >= r6) {
    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
  } else {
    mip = -2.0 * log2(1.16 * roughness);  }
  return mip;
}
vec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {
  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);
  float mipF = fract(mip);
  float mipInt = floor(mip);
  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);
  if (mipF == 0.0) {
    return vec4(color0, 1.0);
  } else {
    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);
    return vec4(mix(color0, color1, mipF), 1.0);
  }
}
#endif`,defaultnormal_vertex:`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex:`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex:`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment:`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment:`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,envmap_fragment:`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		}  else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		reflectVec = normalize( reflectVec );
		vec2 sampleUV = equirectUv( reflectVec );
		vec4 envColor = texture2D( envMap, sampleUV );
	#elif defined( ENVMAP_TYPE_SPHERE )
		reflectVec = normalize( reflectVec );
		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment:`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment:`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex:`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_physical_pars_fragment:`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
		  vec3 reflectVec = reflect( -viewDir, normal );
		  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
		  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV = equirectUv( reflectVec );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_SPHERE )
			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,envmap_vertex:`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) { 
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex:`#ifdef USE_FOG
	fogDepth = -mvPosition.z;
#endif`,fog_pars_vertex:`#ifdef USE_FOG
	varying float fogDepth;
#endif`,fog_fragment:`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment:`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment:`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,lightmap_fragment:`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,lightmap_pars_fragment:`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_vertex:`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,lights_pars_begin:`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
		struct PointLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,lights_toon_fragment:`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_toon_pars_fragment:`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,lights_phong_fragment:`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment:`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,lights_physical_fragment:`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,lights_physical_pars_fragment:`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin:`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps:`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,lights_fragment_end:`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment:`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment:`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex:`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex:`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment:`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,map_pars_fragment:`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment:`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment:`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment:`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment:`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphnormal_vertex:`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,morphtarget_pars_vertex:`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,morphtarget_vertex:`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += morphTarget4 * morphTargetInfluences[ 4 ];
	transformed += morphTarget5 * morphTargetInfluences[ 5 ];
	transformed += morphTarget6 * morphTargetInfluences[ 6 ];
	transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,normal_fragment_begin:`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps:`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,normalmap_pars_fragment:`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,clearcoat_normal_fragment_begin:`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps:`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,clearcoat_pars_fragment:`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,packing:`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment:`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex:`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment:`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment:`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment:`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment:`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,shadowmask_pars_fragment:`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex:`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex:`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,skinning_vertex:`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex:`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment:`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment:`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment:`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment:`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );
}`,uv_pars_fragment:`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uv_pars_vertex:`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uv_vertex:`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,uv2_vertex:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,worldpos_vertex:`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,background_frag:`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,background_vert:`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,cube_frag:`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,depth_vert:`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,distanceRGBA_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,distanceRGBA_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,equirect_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshbasic_vert:`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag:`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert:`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshmatcap_frag:`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert:`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshtoon_frag:`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert:`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphysical_frag:`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSPARENCY
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSPARENCY
	uniform float transparency;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSPARENCY
		diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert:`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,normal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,normal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,shadow_vert:`#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sprite_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sprite_vert:`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`},Af={basic:{uniforms:Yt([Vr.common,Vr.specularmap,Vr.envmap,Vr.aomap,Vr.lightmap,Vr.fog]),vertexShader:Si.meshbasic_vert,fragmentShader:Si.meshbasic_frag},lambert:{uniforms:Yt([Vr.common,Vr.specularmap,Vr.envmap,Vr.aomap,Vr.lightmap,Vr.emissivemap,Vr.fog,Vr.lights,{emissive:{value:new He(0)}}]),vertexShader:Si.meshlambert_vert,fragmentShader:Si.meshlambert_frag},phong:{uniforms:Yt([Vr.common,Vr.specularmap,Vr.envmap,Vr.aomap,Vr.lightmap,Vr.emissivemap,Vr.bumpmap,Vr.normalmap,Vr.displacementmap,Vr.fog,Vr.lights,{emissive:{value:new He(0)},specular:{value:new He(1118481)},shininess:{value:30}}]),vertexShader:Si.meshphong_vert,fragmentShader:Si.meshphong_frag},standard:{uniforms:Yt([Vr.common,Vr.envmap,Vr.aomap,Vr.lightmap,Vr.emissivemap,Vr.bumpmap,Vr.normalmap,Vr.displacementmap,Vr.roughnessmap,Vr.metalnessmap,Vr.fog,Vr.lights,{emissive:{value:new He(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Si.meshphysical_vert,fragmentShader:Si.meshphysical_frag},toon:{uniforms:Yt([Vr.common,Vr.specularmap,Vr.aomap,Vr.lightmap,Vr.emissivemap,Vr.bumpmap,Vr.normalmap,Vr.displacementmap,Vr.gradientmap,Vr.fog,Vr.lights,{emissive:{value:new He(0)},specular:{value:new He(1118481)},shininess:{value:30}}]),vertexShader:Si.meshtoon_vert,fragmentShader:Si.meshtoon_frag},matcap:{uniforms:Yt([Vr.common,Vr.bumpmap,Vr.normalmap,Vr.displacementmap,Vr.fog,{matcap:{value:null}}]),vertexShader:Si.meshmatcap_vert,fragmentShader:Si.meshmatcap_frag},points:{uniforms:Yt([Vr.points,Vr.fog]),vertexShader:Si.points_vert,fragmentShader:Si.points_frag},dashed:{uniforms:Yt([Vr.common,Vr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Si.linedashed_vert,fragmentShader:Si.linedashed_frag},depth:{uniforms:Yt([Vr.common,Vr.displacementmap]),vertexShader:Si.depth_vert,fragmentShader:Si.depth_frag},normal:{uniforms:Yt([Vr.common,Vr.bumpmap,Vr.normalmap,Vr.displacementmap,{opacity:{value:1}}]),vertexShader:Si.normal_vert,fragmentShader:Si.normal_frag},sprite:{uniforms:Yt([Vr.sprite,Vr.fog]),vertexShader:Si.sprite_vert,fragmentShader:Si.sprite_frag},background:{uniforms:{uvTransform:{value:new g},t2D:{value:null}},vertexShader:Si.background_vert,fragmentShader:Si.background_frag},cube:{uniforms:Yt([Vr.envmap,{opacity:{value:1}}]),vertexShader:Si.cube_vert,fragmentShader:Si.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Si.equirect_vert,fragmentShader:Si.equirect_frag},distanceRGBA:{uniforms:Yt([Vr.common,Vr.displacementmap,{referencePosition:{value:new I},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Si.distanceRGBA_vert,fragmentShader:Si.distanceRGBA_frag},shadow:{uniforms:Yt([Vr.lights,Vr.fog,{color:{value:new He(0)},opacity:{value:1}}]),vertexShader:Si.shadow_vert,fragmentShader:Si.shadow_frag}};Af.physical={uniforms:Yt([Af.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new v(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new He(0)},transparency:{value:0}}]),vertexShader:Si.meshphysical_vert,fragmentShader:Si.meshphysical_frag},cc.prototype=Le(A.prototype),cc.prototype.constructor=cc,cc.prototype.isCubeTexture=!0,Object.defineProperty(cc.prototype,"images",{get:function(){return this.image},set:function(r){this.image=r}}),el.prototype=Le(A.prototype),el.prototype.constructor=el,el.prototype.isDataTexture2DArray=!0,_l.prototype=Le(A.prototype),_l.prototype.constructor=_l,_l.prototype.isDataTexture3D=!0;var Z6=new A,vW=new el,yW=new _l,q6=new cc,K6=[],J6=[],Q6=new Float32Array(16),$6=new Float32Array(9),eF=new Float32Array(4);t6.prototype.updateCache=function(r){var l=this.cache;r instanceof Float32Array&&l.length!==r.length&&(this.cache=new Float32Array(r.length)),Ls(l,r)},r6.prototype.setValue=function(r,l,f){for(var w=this.seq,E=0,O=w.length;E!==O;++E){var B=w[E];B.setValue(r,l[B.id],f)}};var nL=/([\w\d_]+)(\])?(\[|\.)?/g;Jp.prototype.setValue=function(r,l,f,w){l=this.map[l],l!==void 0&&l.setValue(r,f,w)},Jp.prototype.setOptional=function(r,l,f){l=l[f],l!==void 0&&this.setValue(r,f,l)},Jp.upload=function(r,l,f,w){for(var E=0,O=l.length;E!==O;++E){var B=l[E],Y=f[B.id];Y.needsUpdate!==!1&&B.setValue(r,Y.value,w)}},Jp.seqWithValue=function(r,l){for(var f=[],w=0,E=r.length;w!==E;++w){var O=r[w];O.id in l&&f.push(O)}return f};var xW=0,iL=/^[ \t]*#include +<([\w\d./]+)>/gm,tF=/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,rF=/#pragma unroll_loop_start[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g,AW=0;Qp.prototype=Le(Et.prototype),Qp.prototype.constructor=Qp,Qp.prototype.isMeshDepthMaterial=!0,Qp.prototype.copy=function(r){return Et.prototype.copy.call(this,r),this.depthPacking=r.depthPacking,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.map=r.map,this.alphaMap=r.alphaMap,this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this},$p.prototype=Le(Et.prototype),$p.prototype.constructor=$p,$p.prototype.isMeshDistanceMaterial=!0,$p.prototype.copy=function(r){return Et.prototype.copy.call(this,r),this.referencePosition.copy(r.referencePosition),this.nearDistance=r.nearDistance,this.farDistance=r.farDistance,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.map=r.map,this.alphaMap=r.alphaMap,this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this},gM.prototype=Pe(Le(Jt.prototype),{constructor:gM,isArrayCamera:!0}),xy.prototype=Pe(Le(G.prototype),{constructor:xy,isGroup:!0}),Pe(vM.prototype,{constructor:vM,getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new xy,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new xy,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(r){return this._targetRay!==null&&this._targetRay.dispatchEvent(r),this._grip!==null&&this._grip.dispatchEvent(r),this},disconnect:function(r){return this.dispatchEvent({type:"disconnected",data:r}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this},update:function(r,l,f){var w=null,E=null,O=this._targetRay,B=this._grip;return r&&(O!==null&&(w=l.getPose(r.targetRaySpace,f),w!==null&&(O.matrix.fromArray(w.transform.matrix),O.matrix.decompose(O.position,O.rotation,O.scale))),B!==null&&r.gripSpace&&(E=l.getPose(r.gripSpace,f),E!==null&&(B.matrix.fromArray(E.transform.matrix),B.matrix.decompose(B.position,B.rotation,B.scale)))),O!==null&&(O.visible=w!==null),B!==null&&(B.visible=E!==null),this}}),Pe(p6.prototype,c.prototype),Pe(yM.prototype,{isFogExp2:!0,clone:function(){return new yM(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Pe(xM.prototype,{isFog:!0,clone:function(){return new xM(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(xd.prototype,"needsUpdate",{set:function(r){r===!0&&this.version++}}),Pe(xd.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(r){return this.usage=r,this},copy:function(r){return this.array=new r.array.constructor(r.array),this.count=r.count,this.stride=r.stride,this.usage=r.usage,this},copyAt:function(r,l,f){r*=this.stride,f*=l.stride;for(var w=0,E=this.stride;w<E;w++)this.array[r+w]=l.array[f+w];return this},set:function(r,l){return l===void 0&&(l=0),this.array.set(r,l),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(r){return this.onUploadCallback=r,this}});var Mv=new I;Rn(lA.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Pe(lA.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(r){for(var l=0,f=this.data.count;l<f;l++)Mv.x=this.getX(l),Mv.y=this.getY(l),Mv.z=this.getZ(l),Mv.applyMatrix4(r),this.setXYZ(l,Mv.x,Mv.y,Mv.z);return this},setX:function(r,l){return this.data.array[r*this.data.stride+this.offset]=l,this},setY:function(r,l){return this.data.array[r*this.data.stride+this.offset+1]=l,this},setZ:function(r,l){return this.data.array[r*this.data.stride+this.offset+2]=l,this},setW:function(r,l){return this.data.array[r*this.data.stride+this.offset+3]=l,this},getX:function(r){return this.data.array[r*this.data.stride+this.offset]},getY:function(r){return this.data.array[r*this.data.stride+this.offset+1]},getZ:function(r){return this.data.array[r*this.data.stride+this.offset+2]},getW:function(r){return this.data.array[r*this.data.stride+this.offset+3]},setXY:function(r,l,f){return r=r*this.data.stride+this.offset,this.data.array[r+0]=l,this.data.array[r+1]=f,this},setXYZ:function(r,l,f,w){return r=r*this.data.stride+this.offset,this.data.array[r+0]=l,this.data.array[r+1]=f,this.data.array[r+2]=w,this},setXYZW:function(r,l,f,w,E){return r=r*this.data.stride+this.offset,this.data.array[r+0]=l,this.data.array[r+1]=f,this.data.array[r+2]=w,this.data.array[r+3]=E,this},clone:function(){for(var r=[],l=0;l<this.count;l++)for(var f=l*this.data.stride+this.offset,w=0;w<this.itemSize;w++)r.push(this.data.array[f+w]);return new Nt(new this.array.constructor(r),this.itemSize,this.normalized)},toJSON:function(){for(var r=[],l=0;l<this.count;l++)for(var f=l*this.data.stride+this.offset,w=0;w<this.itemSize;w++)r.push(this.data.array[f+w]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:r,normalized:this.normalized}}}),em.prototype=Le(Et.prototype),em.prototype.constructor=em,em.prototype.isSpriteMaterial=!0,em.prototype.copy=function(r){return Et.prototype.copy.call(this,r),this.color.copy(r.color),this.map=r.map,this.alphaMap=r.alphaMap,this.rotation=r.rotation,this.sizeAttenuation=r.sizeAttenuation,this};var i1,qA=new I,o1=new I,a1=new I,s1=new v,KA=new v,nF=new b,dS=new I,JA=new I,pS=new I,iF=new v,oL=new v,oF=new v;uA.prototype=Pe(Le(G.prototype),{constructor:uA,isSprite:!0,raycast:function(r,l){r.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),o1.setFromMatrixScale(this.matrixWorld),nF.copy(r.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(r.camera.matrixWorldInverse,this.matrixWorld),a1.setFromMatrixPosition(this.modelViewMatrix),r.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&o1.multiplyScalar(-a1.z);var f=this.material.rotation;if(f!==0)var w=Math.cos(f),E=Math.sin(f);f=this.center,AM(dS.set(-.5,-.5,0),a1,f,o1,E,w),AM(JA.set(.5,-.5,0),a1,f,o1,E,w),AM(pS.set(.5,.5,0),a1,f,o1,E,w),iF.set(0,0),oL.set(1,0),oF.set(1,1);var O=r.ray.intersectTriangle(dS,JA,pS,!1,qA);O===null&&(AM(JA.set(-.5,.5,0),a1,f,o1,E,w),oL.set(0,1),O=r.ray.intersectTriangle(dS,pS,JA,!1,qA),O===null)||(E=r.ray.origin.distanceTo(qA),E<r.near||E>r.far||l.push({distance:E,point:qA.clone(),uv:Ge.getUV(qA,dS,JA,pS,iF,oL,oF,new v),face:null,object:this}))},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(r){return G.prototype.copy.call(this,r),r.center!==void 0&&this.center.copy(r.center),this}});var mS=new I,aF=new I;cA.prototype=Pe(Le(G.prototype),{constructor:cA,isLOD:!0,copy:function(r){G.prototype.copy.call(this,r,!1);for(var l=r.levels,f=0,w=l.length;f<w;f++){var E=l[f];this.addLevel(E.object.clone(),E.distance)}return this.autoUpdate=r.autoUpdate,this},addLevel:function(r,l){l===void 0&&(l=0),l=Math.abs(l);for(var f=this.levels,w=0;w<f.length&&!(l<f[w].distance);w++);return f.splice(w,0,{distance:l,object:r}),this.add(r),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(r){var l=this.levels;if(0<l.length){for(var f=1,w=l.length;f<w&&!(r<l[f].distance);f++);return l[f-1].object}return null},raycast:function(r,l){if(0<this.levels.length){mS.setFromMatrixPosition(this.matrixWorld);var f=r.ray.origin.distanceTo(mS);this.getObjectForDistance(f).raycast(r,l)}},update:function(r){var l=this.levels;if(1<l.length){mS.setFromMatrixPosition(r.matrixWorld),aF.setFromMatrixPosition(this.matrixWorld),r=mS.distanceTo(aF)/r.zoom,l[0].object.visible=!0;for(var f=1,w=l.length;f<w&&r>=l[f].distance;f++)l[f-1].object.visible=!1,l[f].object.visible=!0;for(this._currentLevel=f-1;f<w;f++)l[f].object.visible=!1}},toJSON:function(r){r=G.prototype.toJSON.call(this,r),this.autoUpdate===!1&&(r.object.autoUpdate=!1),r.object.levels=[];for(var l=this.levels,f=0,w=l.length;f<w;f++){var E=l[f];r.object.levels.push({object:E.object.uuid,distance:E.distance})}return r}}),wM.prototype=Pe(Le(Qe.prototype),{constructor:wM,isSkinnedMesh:!0,bind:function(r,l){this.skeleton=r,l===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),l=this.matrixWorld),this.bindMatrix.copy(l),this.bindMatrixInverse.getInverse(l)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var r=new y,l=this.geometry.attributes.skinWeight,f=0,w=l.count;f<w;f++){r.x=l.getX(f),r.y=l.getY(f),r.z=l.getZ(f),r.w=l.getW(f);var E=1/r.manhattanLength();E!==1/0?r.multiplyScalar(E):r.set(1,0,0,0),l.setXYZW(f,r.x,r.y,r.z,r.w)}},updateMatrixWorld:function(r){Qe.prototype.updateMatrixWorld.call(this,r),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)},boneTransform:function(){var r=new I,l=new y,f=new y,w=new I,E=new b;return function(O,B){var Y=this.skeleton,K=this.geometry;for(l.fromBufferAttribute(K.attributes.skinIndex,O),f.fromBufferAttribute(K.attributes.skinWeight,O),r.fromBufferAttribute(K.attributes.position,O).applyMatrix4(this.bindMatrix),B.set(0,0,0),O=0;4>O;O++)if(K=f.getComponent(O),K!==0){var $=l.getComponent(O);E.multiplyMatrices(Y.bones[$].matrixWorld,Y.boneInverses[$]),B.addScaledVector(w.copy(r).applyMatrix4(E),K)}return B.applyMatrix4(this.bindMatrixInverse)}}()});var sF=new b,wW=new b;Pe(CM.prototype,{calculateInverses:function(){this.boneInverses=[];for(var r=0,l=this.bones.length;r<l;r++){var f=new b;this.bones[r]&&f.getInverse(this.bones[r].matrixWorld),this.boneInverses.push(f)}},pose:function(){var r,l,f=0;for(l=this.bones.length;f<l;f++)(r=this.bones[f])&&r.matrixWorld.getInverse(this.boneInverses[f]);for(f=0,l=this.bones.length;f<l;f++)(r=this.bones[f])&&(r.parent&&r.parent.isBone?(r.matrix.getInverse(r.parent.matrixWorld),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))},update:function(){for(var r=this.bones,l=this.boneInverses,f=this.boneMatrices,w=this.boneTexture,E=0,O=r.length;E<O;E++)sF.multiplyMatrices(r[E]?r[E].matrixWorld:wW,l[E]),sF.toArray(f,16*E);w!==void 0&&(w.needsUpdate=!0)},clone:function(){return new CM(this.bones,this.boneInverses)},getBoneByName:function(r){for(var l=0,f=this.bones.length;l<f;l++){var w=this.bones[l];if(w.name===r)return w}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),lR.prototype=Pe(Le(G.prototype),{constructor:lR,isBone:!0});var lF=new b,uF=new b,gS=[],QA=new Qe;_M.prototype=Pe(Le(Qe.prototype),{constructor:_M,isInstancedMesh:!0,getMatrixAt:function(r,l){l.fromArray(this.instanceMatrix.array,16*r)},raycast:function(r,l){var f=this.matrixWorld,w=this.count;if(QA.geometry=this.geometry,QA.material=this.material,QA.material!==void 0)for(var E=0;E<w;E++){this.getMatrixAt(E,lF),uF.multiplyMatrices(f,lF),QA.matrixWorld=uF,QA.raycast(r,gS);for(var O=0,B=gS.length;O<B;O++){var Y=gS[O];Y.instanceId=E,Y.object=this,l.push(Y)}gS.length=0}},setMatrixAt:function(r,l){l.toArray(this.instanceMatrix.array,16*r)},updateMorphTargets:function(){}}),$o.prototype=Le(Et.prototype),$o.prototype.constructor=$o,$o.prototype.isLineBasicMaterial=!0,$o.prototype.copy=function(r){return Et.prototype.copy.call(this,r),this.color.copy(r.color),this.linewidth=r.linewidth,this.linecap=r.linecap,this.linejoin=r.linejoin,this.morphTargets=r.morphTargets,this};var cF=new I,hF=new I,fF=new b,vS=new Te,yS=new we;Cu.prototype=Pe(Le(G.prototype),{constructor:Cu,isLine:!0,computeLineDistances:function(){var r=this.geometry;if(r.isBufferGeometry)if(r.index===null){for(var l=r.attributes.position,f=[0],w=1,E=l.count;w<E;w++)cF.fromBufferAttribute(l,w-1),hF.fromBufferAttribute(l,w),f[w]=f[w-1],f[w]+=cF.distanceTo(hF);r.setAttribute("lineDistance",new ke(f,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(r.isGeometry)for(l=r.vertices,f=r.lineDistances,f[0]=0,w=1,E=l.length;w<E;w++)f[w]=f[w-1],f[w]+=l[w-1].distanceTo(l[w]);return this},raycast:function(r,l){var f=this.geometry,w=this.matrixWorld,E=r.params.Line.threshold;if(f.boundingSphere===null&&f.computeBoundingSphere(),yS.copy(f.boundingSphere),yS.applyMatrix4(w),yS.radius+=E,r.ray.intersectsSphere(yS)!==!1){fF.getInverse(w),vS.copy(r.ray).applyMatrix4(fF),w=E/((this.scale.x+this.scale.y+this.scale.z)/3),w*=w;var O=new I,B=new I;E=new I;var Y=new I,K=this&&this.isLineSegments?2:1;if(f.isBufferGeometry){var $=f.index,pe=f.attributes.position.array;if($!==null){$=$.array,f=0;for(var fe=$.length-1;f<fe;f+=K){var xe=$[f+1];O.fromArray(pe,3*$[f]),B.fromArray(pe,3*xe),xe=vS.distanceSqToSegment(O,B,Y,E),xe>w||(Y.applyMatrix4(this.matrixWorld),xe=r.ray.origin.distanceTo(Y),xe<r.near||xe>r.far||l.push({distance:xe,point:E.clone().applyMatrix4(this.matrixWorld),index:f,face:null,faceIndex:null,object:this}))}}else for(f=0,fe=pe.length/3-1;f<fe;f+=K)O.fromArray(pe,3*f),B.fromArray(pe,3*f+3),xe=vS.distanceSqToSegment(O,B,Y,E),xe>w||(Y.applyMatrix4(this.matrixWorld),xe=r.ray.origin.distanceTo(Y),xe<r.near||xe>r.far||l.push({distance:xe,point:E.clone().applyMatrix4(this.matrixWorld),index:f,face:null,faceIndex:null,object:this}))}else if(f.isGeometry)for(O=f.vertices,B=O.length,f=0;f<B-1;f+=K)xe=vS.distanceSqToSegment(O[f],O[f+1],Y,E),xe>w||(Y.applyMatrix4(this.matrixWorld),xe=r.ray.origin.distanceTo(Y),xe<r.near||xe>r.far||l.push({distance:xe,point:E.clone().applyMatrix4(this.matrixWorld),index:f,face:null,faceIndex:null,object:this}))}},updateMorphTargets:function(){var r=this.geometry;if(r.isBufferGeometry){r=r.morphAttributes;var l=Hi(r);if(0<l.length){var f=r[l[0]];if(f!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},r=0,l=f.length;r<l;r++){var w=f[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[w]=r}}}else r=r.morphTargets,r!==void 0&&0<r.length&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var xS=new I,AS=new I;ca.prototype=Pe(Le(Cu.prototype),{constructor:ca,isLineSegments:!0,computeLineDistances:function(){var r=this.geometry;if(r.isBufferGeometry)if(r.index===null){for(var l=r.attributes.position,f=[],w=0,E=l.count;w<E;w+=2)xS.fromBufferAttribute(l,w),AS.fromBufferAttribute(l,w+1),f[w]=w===0?0:f[w-1],f[w+1]=f[w]+xS.distanceTo(AS);r.setAttribute("lineDistance",new ke(f,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(r.isGeometry)for(l=r.vertices,f=r.lineDistances,w=0,E=l.length;w<E;w+=2)xS.copy(l[w]),AS.copy(l[w+1]),f[w]=w===0?0:f[w-1],f[w+1]=f[w]+xS.distanceTo(AS);return this}}),MM.prototype=Pe(Le(Cu.prototype),{constructor:MM,isLineLoop:!0}),ah.prototype=Le(Et.prototype),ah.prototype.constructor=ah,ah.prototype.isPointsMaterial=!0,ah.prototype.copy=function(r){return Et.prototype.copy.call(this,r),this.color.copy(r.color),this.map=r.map,this.alphaMap=r.alphaMap,this.size=r.size,this.sizeAttenuation=r.sizeAttenuation,this.morphTargets=r.morphTargets,this};var dF=new b,aL=new Te,wS=new we,CS=new I;Ay.prototype=Pe(Le(G.prototype),{constructor:Ay,isPoints:!0,raycast:function(r,l){var f=this.geometry,w=this.matrixWorld,E=r.params.Points.threshold;if(f.boundingSphere===null&&f.computeBoundingSphere(),wS.copy(f.boundingSphere),wS.applyMatrix4(w),wS.radius+=E,r.ray.intersectsSphere(wS)!==!1)if(dF.getInverse(w),aL.copy(r.ray).applyMatrix4(dF),E/=(this.scale.x+this.scale.y+this.scale.z)/3,E*=E,f.isBufferGeometry){var O=f.index;if(f=f.attributes.position.array,O!==null){var B=O.array;O=0;for(var Y=B.length;O<Y;O++){var K=B[O];CS.fromArray(f,3*K),uR(CS,K,E,w,r,l,this)}}else for(O=0,B=f.length/3;O<B;O++)CS.fromArray(f,3*O),uR(CS,O,E,w,r,l,this)}else for(f=f.vertices,O=0,B=f.length;O<B;O++)uR(f[O],O,E,w,r,l,this)},updateMorphTargets:function(){var r=this.geometry;if(r.isBufferGeometry){r=r.morphAttributes;var l=Hi(r);if(0<l.length){var f=r[l[0]];if(f!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},r=0,l=f.length;r<l;r++){var w=f[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[w]=r}}}else r=r.morphTargets,r!==void 0&&0<r.length&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),cR.prototype=Pe(Le(A.prototype),{constructor:cR,isVideoTexture:!0,update:function(){var r=this.image;r.readyState>=r.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),wy.prototype=Le(A.prototype),wy.prototype.constructor=wy,wy.prototype.isCompressedTexture=!0,hA.prototype=Le(A.prototype),hA.prototype.constructor=hA,hA.prototype.isCanvasTexture=!0,fA.prototype=Le(A.prototype),fA.prototype.constructor=fA,fA.prototype.isDepthTexture=!0,Cy.prototype=Le(Fe.prototype),Cy.prototype.constructor=Cy,dA.prototype=Le(Ne.prototype),dA.prototype.constructor=dA,_y.prototype=Le(Fe.prototype),_y.prototype.constructor=_y,pA.prototype=Le(Ne.prototype),pA.prototype.constructor=pA,$l.prototype=Le(Fe.prototype),$l.prototype.constructor=$l,mA.prototype=Le(Ne.prototype),mA.prototype.constructor=mA,My.prototype=Le($l.prototype),My.prototype.constructor=My,gA.prototype=Le(Ne.prototype),gA.prototype.constructor=gA,av.prototype=Le($l.prototype),av.prototype.constructor=av,vA.prototype=Le(Ne.prototype),vA.prototype.constructor=vA,Sy.prototype=Le($l.prototype),Sy.prototype.constructor=Sy,yA.prototype=Le(Ne.prototype),yA.prototype.constructor=yA,Ty.prototype=Le($l.prototype),Ty.prototype.constructor=Ty,xA.prototype=Le(Ne.prototype),xA.prototype.constructor=xA,sv.prototype=Le(Fe.prototype),sv.prototype.constructor=sv,sv.prototype.toJSON=function(){var r=Fe.prototype.toJSON.call(this);return r.path=this.parameters.path.toJSON(),r},AA.prototype=Le(Ne.prototype),AA.prototype.constructor=AA,Ey.prototype=Le(Fe.prototype),Ey.prototype.constructor=Ey,wA.prototype=Le(Ne.prototype),wA.prototype.constructor=wA,Iy.prototype=Le(Fe.prototype),Iy.prototype.constructor=Iy;var CW={triangulate:function(r,l,f){f=f||2;var w=l&&l.length,E=w?l[0]*f:r.length,O=m6(r,0,E,f,!0),B=[];if(!O||O.next===O.prev)return B;var Y;if(w){var K=f;w=[];var $,pe=0;for($=l.length;pe<$;pe++){var fe=l[pe]*K,xe=pe<$-1?l[pe+1]*K:r.length;fe=m6(r,fe,xe,K,!1),fe===fe.next&&(fe.steiner=!0),w.push(eW(fe))}for(w.sort(QV),pe=0;pe<w.length;pe++)K=w[pe],l=O,(l=$V(K,l))&&(K=v6(l,K),tm(l,l.next),tm(K,K.next)),O=tm(O,O.next)}if(r.length>80*f){var ye=Y=r[0],Me=w=r[1];for(K=f;K<E;K+=f)pe=r[K],l=r[K+1],pe<ye&&(ye=pe),l<Me&&(Me=l),pe>Y&&(Y=pe),l>w&&(w=l);Y=Math.max(Y-ye,w-Me),Y=Y!==0?1/Y:0}return CA(O,B,f,ye,Me,Y),B}},Ld={area:function(r){for(var l=r.length,f=0,w=l-1,E=0;E<l;w=E++)f+=r[w].x*r[E].y-r[E].x*r[w].y;return .5*f},isClockWise:function(r){return 0>Ld.area(r)},triangulateShape:function(r,l){var f=[],w=[],E=[];x6(r),A6(f,r);var O=r.length;for(l.forEach(x6),r=0;r<l.length;r++)w.push(O),O+=l[r].length,A6(f,l[r]);for(l=CW.triangulate(f,w),r=0;r<l.length;r+=3)E.push(l.slice(r,r+3));return E}};lv.prototype=Le(Ne.prototype),lv.prototype.constructor=lv,lv.prototype.toJSON=function(){var r=Ne.prototype.toJSON.call(this);return w6(this.parameters.shapes,this.parameters.options,r)},df.prototype=Le(Fe.prototype),df.prototype.constructor=df,df.prototype.toJSON=function(){var r=Fe.prototype.toJSON.call(this);return w6(this.parameters.shapes,this.parameters.options,r)};var _W={generateTopUV:function(r,l,f,w,E){r=l[3*w],w=l[3*w+1];var O=l[3*E];return E=l[3*E+1],[new v(l[3*f],l[3*f+1]),new v(r,w),new v(O,E)]},generateSideWallUV:function(r,l,f,w,E,O){r=l[3*f];var B=l[3*f+1];f=l[3*f+2];var Y=l[3*w],K=l[3*w+1];w=l[3*w+2];var $=l[3*E],pe=l[3*E+1];E=l[3*E+2];var fe=l[3*O],xe=l[3*O+1];return l=l[3*O+2],.01>Math.abs(B-K)?[new v(r,1-f),new v(Y,1-w),new v($,1-E),new v(fe,1-l)]:[new v(B,1-f),new v(K,1-w),new v(pe,1-E),new v(xe,1-l)]}};SA.prototype=Le(Ne.prototype),SA.prototype.constructor=SA,Ly.prototype=Le(df.prototype),Ly.prototype.constructor=Ly,TA.prototype=Le(Ne.prototype),TA.prototype.constructor=TA,uv.prototype=Le(Fe.prototype),uv.prototype.constructor=uv,EA.prototype=Le(Ne.prototype),EA.prototype.constructor=EA,Py.prototype=Le(Fe.prototype),Py.prototype.constructor=Py,IA.prototype=Le(Ne.prototype),IA.prototype.constructor=IA,Oy.prototype=Le(Fe.prototype),Oy.prototype.constructor=Oy,cv.prototype=Le(Ne.prototype),cv.prototype.constructor=cv,cv.prototype.toJSON=function(){var r=Ne.prototype.toJSON.call(this);return C6(this.parameters.shapes,r)},hv.prototype=Le(Fe.prototype),hv.prototype.constructor=hv,hv.prototype.toJSON=function(){var r=Fe.prototype.toJSON.call(this);return C6(this.parameters.shapes,r)},Dy.prototype=Le(Fe.prototype),Dy.prototype.constructor=Dy,fv.prototype=Le(Ne.prototype),fv.prototype.constructor=fv,Ad.prototype=Le(Fe.prototype),Ad.prototype.constructor=Ad,RA.prototype=Le(fv.prototype),RA.prototype.constructor=RA,LA.prototype=Le(Ad.prototype),LA.prototype.constructor=LA,PA.prototype=Le(Ne.prototype),PA.prototype.constructor=PA,by.prototype=Le(Fe.prototype),by.prototype.constructor=by;var Ml=rc({__proto__:null,WireframeGeometry:Cy,ParametricGeometry:dA,ParametricBufferGeometry:_y,TetrahedronGeometry:mA,TetrahedronBufferGeometry:My,OctahedronGeometry:gA,OctahedronBufferGeometry:av,IcosahedronGeometry:vA,IcosahedronBufferGeometry:Sy,DodecahedronGeometry:yA,DodecahedronBufferGeometry:Ty,PolyhedronGeometry:pA,PolyhedronBufferGeometry:$l,TubeGeometry:xA,TubeBufferGeometry:sv,TorusKnotGeometry:AA,TorusKnotBufferGeometry:Ey,TorusGeometry:wA,TorusBufferGeometry:Iy,TextGeometry:SA,TextBufferGeometry:Ly,SphereGeometry:TA,SphereBufferGeometry:uv,RingGeometry:EA,RingBufferGeometry:Py,PlaneGeometry:Qo,PlaneBufferGeometry:Ai,LatheGeometry:IA,LatheBufferGeometry:Oy,ShapeGeometry:cv,ShapeBufferGeometry:hv,ExtrudeGeometry:lv,ExtrudeBufferGeometry:df,EdgesGeometry:Dy,ConeGeometry:RA,ConeBufferGeometry:LA,CylinderGeometry:fv,CylinderBufferGeometry:Ad,CircleGeometry:PA,CircleBufferGeometry:by,BoxGeometry:rL,BoxBufferGeometry:ZA});dv.prototype=Le(Et.prototype),dv.prototype.constructor=dv,dv.prototype.isShadowMaterial=!0,dv.prototype.copy=function(r){return Et.prototype.copy.call(this,r),this.color.copy(r.color),this},wd.prototype=Le(kt.prototype),wd.prototype.constructor=wd,wd.prototype.isRawShaderMaterial=!0,pf.prototype=Le(Et.prototype),pf.prototype.constructor=pf,pf.prototype.isMeshStandardMaterial=!0,pf.prototype.copy=function(r){return Et.prototype.copy.call(this,r),this.defines={STANDARD:""},this.color.copy(r.color),this.roughness=r.roughness,this.metalness=r.metalness,this.map=r.map,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.emissive.copy(r.emissive),this.emissiveMap=r.emissiveMap,this.emissiveIntensity=r.emissiveIntensity,this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalMapType=r.normalMapType,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.roughnessMap=r.roughnessMap,this.metalnessMap=r.metalnessMap,this.alphaMap=r.alphaMap,this.envMap=r.envMap,this.envMapIntensity=r.envMapIntensity,this.refractionRatio=r.refractionRatio,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.morphNormals=r.morphNormals,this.vertexTangents=r.vertexTangents,this},pv.prototype=Le(pf.prototype),pv.prototype.constructor=pv,pv.prototype.isMeshPhysicalMaterial=!0,pv.prototype.copy=function(r){return pf.prototype.copy.call(this,r),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=r.clearcoat,this.clearcoatMap=r.clearcoatMap,this.clearcoatRoughness=r.clearcoatRoughness,this.clearcoatRoughnessMap=r.clearcoatRoughnessMap,this.clearcoatNormalMap=r.clearcoatNormalMap,this.clearcoatNormalScale.copy(r.clearcoatNormalScale),this.reflectivity=r.reflectivity,this.sheen=r.sheen?(this.sheen||new He).copy(r.sheen):null,this.transparency=r.transparency,this},rm.prototype=Le(Et.prototype),rm.prototype.constructor=rm,rm.prototype.isMeshPhongMaterial=!0,rm.prototype.copy=function(r){return Et.prototype.copy.call(this,r),this.color.copy(r.color),this.specular.copy(r.specular),this.shininess=r.shininess,this.map=r.map,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.emissive.copy(r.emissive),this.emissiveMap=r.emissiveMap,this.emissiveIntensity=r.emissiveIntensity,this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalMapType=r.normalMapType,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.specularMap=r.specularMap,this.alphaMap=r.alphaMap,this.envMap=r.envMap,this.combine=r.combine,this.reflectivity=r.reflectivity,this.refractionRatio=r.refractionRatio,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.morphNormals=r.morphNormals,this},mv.prototype=Le(Et.prototype),mv.prototype.constructor=mv,mv.prototype.isMeshToonMaterial=!0,mv.prototype.copy=function(r){return Et.prototype.copy.call(this,r),this.color.copy(r.color),this.specular.copy(r.specular),this.shininess=r.shininess,this.map=r.map,this.gradientMap=r.gradientMap,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.emissive.copy(r.emissive),this.emissiveMap=r.emissiveMap,this.emissiveIntensity=r.emissiveIntensity,this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalMapType=r.normalMapType,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.specularMap=r.specularMap,this.alphaMap=r.alphaMap,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.morphNormals=r.morphNormals,this},gv.prototype=Le(Et.prototype),gv.prototype.constructor=gv,gv.prototype.isMeshNormalMaterial=!0,gv.prototype.copy=function(r){return Et.prototype.copy.call(this,r),this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalMapType=r.normalMapType,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.morphNormals=r.morphNormals,this},vv.prototype=Le(Et.prototype),vv.prototype.constructor=vv,vv.prototype.isMeshLambertMaterial=!0,vv.prototype.copy=function(r){return Et.prototype.copy.call(this,r),this.color.copy(r.color),this.map=r.map,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.emissive.copy(r.emissive),this.emissiveMap=r.emissiveMap,this.emissiveIntensity=r.emissiveIntensity,this.specularMap=r.specularMap,this.alphaMap=r.alphaMap,this.envMap=r.envMap,this.combine=r.combine,this.reflectivity=r.reflectivity,this.refractionRatio=r.refractionRatio,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.morphNormals=r.morphNormals,this},yv.prototype=Le(Et.prototype),yv.prototype.constructor=yv,yv.prototype.isMeshMatcapMaterial=!0,yv.prototype.copy=function(r){return Et.prototype.copy.call(this,r),this.defines={MATCAP:""},this.color.copy(r.color),this.matcap=r.matcap,this.map=r.map,this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalMapType=r.normalMapType,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.alphaMap=r.alphaMap,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.morphNormals=r.morphNormals,this},xv.prototype=Le($o.prototype),xv.prototype.constructor=xv,xv.prototype.isLineDashedMaterial=!0,xv.prototype.copy=function(r){return $o.prototype.copy.call(this,r),this.scale=r.scale,this.dashSize=r.dashSize,this.gapSize=r.gapSize,this};var MW=rc({__proto__:null,ShadowMaterial:dv,SpriteMaterial:em,RawShaderMaterial:wd,ShaderMaterial:kt,PointsMaterial:ah,MeshPhysicalMaterial:pv,MeshStandardMaterial:pf,MeshPhongMaterial:rm,MeshToonMaterial:mv,MeshNormalMaterial:gv,MeshLambertMaterial:vv,MeshDepthMaterial:Qp,MeshDistanceMaterial:$p,MeshBasicMaterial:xr,MeshMatcapMaterial:yv,LineDashedMaterial:xv,LineBasicMaterial:$o,Material:Et}),ea={arraySlice:function(r,l,f){return ea.isTypedArray(r)?new r.constructor(r.subarray(l,f!==void 0?f:r.length)):r.slice(l,f)},convertArray:function(r,l,f){return!r||!f&&r.constructor===l?r:typeof l.BYTES_PER_ELEMENT=="number"?new l(r):Array.prototype.slice.call(r)},isTypedArray:function(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)},getKeyframeOrder:function(r){for(var l=r.length,f=Array(l),w=0;w!==l;++w)f[w]=w;return f.sort(function(E,O){return r[E]-r[O]}),f},sortedArray:function(r,l,f){for(var w=r.length,E=new r.constructor(w),O=0,B=0;B!==w;++O)for(var Y=f[O]*l,K=0;K!==l;++K)E[B++]=r[Y+K];return E},flattenJSON:function(r,l,f,w){for(var E=1,O=r[0];O!==void 0&&O[w]===void 0;)O=r[E++];if(O!==void 0){var B=O[w];if(B!==void 0)if(Array.isArray(B))do B=O[w],B!==void 0&&(l.push(O.time),f.push.apply(f,B)),O=r[E++];while(O!==void 0);else if(B.toArray!==void 0)do B=O[w],B!==void 0&&(l.push(O.time),B.toArray(f,f.length)),O=r[E++];while(O!==void 0);else do B=O[w],B!==void 0&&(l.push(O.time),f.push(B)),O=r[E++];while(O!==void 0)}},subclip:function(r,l,f,w,E){E=E||30,r=r.clone(),r.name=l;var O=[];for(l=0;l<r.tracks.length;++l){for(var B=r.tracks[l],Y=B.getValueSize(),K=[],$=[],pe=0;pe<B.times.length;++pe){var fe=B.times[pe]*E;if(!(fe<f||fe>=w))for(K.push(B.times[pe]),fe=0;fe<Y;++fe)$.push(B.values[pe*Y+fe])}K.length!==0&&(B.times=ea.convertArray(K,B.times.constructor),B.values=ea.convertArray($,B.values.constructor),O.push(B))}for(r.tracks=O,f=1/0,l=0;l<r.tracks.length;++l)f>r.tracks[l].times[0]&&(f=r.tracks[l].times[0]);for(l=0;l<r.tracks.length;++l)r.tracks[l].shift(-1*f);return r.resetDuration(),r},makeClipAdditive:function(r,l,f,w){l===void 0&&(l=0),f===void 0&&(f=r),(w===void 0||0>=w)&&(w=30);var E=r.tracks.length;for(l/=w,w=0;w<E;++w){var O=f.tracks[w],B=O.ValueTypeName;if(B!=="bool"&&B!=="string"){var Y=r.tracks.find(function(Me){return Me.name===O.name&&Me.ValueTypeName===B});if(Y!==void 0){var K=O.getValueSize(),$=O.times.length-1;l<=O.times[0]?$=ea.arraySlice(O.values,0,O.valueSize):l>=O.times[$]?$=ea.arraySlice(O.values,$*K):($=O.createInterpolant(),$.evaluate(l),$=$.resultBuffer),B==="quaternion"&&new X($[0],$[1],$[2],$[3]).normalize().conjugate().toArray($);for(var pe=Y.times.length,fe=0;fe<pe;++fe){var xe=fe*K;if(B==="quaternion")X.multiplyQuaternionsFlat(Y.values,xe,$,0,Y.values,xe);else for(var ye=0;ye<K;++ye)Y.values[xe+ye]-=$[ye]}}}}return r.blendMode=2501,r}};Pe(_u.prototype,{evaluate:function(r){var l=this.parameterPositions,f=this._cachedIndex,w=l[f],E=l[f-1];e:{t:{r:{n:if(!(r<w)){for(var O=f+2;;){if(w===void 0){if(r<E)break n;return this._cachedIndex=f=l.length,this.afterEnd_(f-1,r,E)}if(f===O)break;if(E=w,w=l[++f],r<w)break t}w=l.length;break r}if(r>=E)break e;for(O=l[1],r<O&&(f=2,E=O),O=f-2;;){if(E===void 0)return this._cachedIndex=0,this.beforeStart_(0,r,w);if(f===O)break;if(w=E,E=l[--f-1],r>=E)break t}w=f,f=0}for(;f<w;)E=f+w>>>1,r<l[E]?w=E:f=E+1;if(w=l[f],E=l[f-1],E===void 0)return this._cachedIndex=0,this.beforeStart_(0,r,w);if(w===void 0)return this._cachedIndex=f=l.length,this.afterEnd_(f-1,E,r)}this._cachedIndex=f,this.intervalChanged_(f,E,w)}return this.interpolate_(f,E,r,w)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(r){var l=this.resultBuffer,f=this.sampleValues,w=this.valueSize;r*=w;for(var E=0;E!==w;++E)l[E]=f[r+E];return l},interpolate_:function(){throw Error("call to abstract method")},intervalChanged_:function(){}}),Pe(_u.prototype,{beforeStart_:_u.prototype.copySampleValue_,afterEnd_:_u.prototype.copySampleValue_}),IM.prototype=Pe(Le(_u.prototype),{constructor:IM,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(r,l,f){var w=this.parameterPositions,E=r-2,O=r+1,B=w[E],Y=w[O];if(B===void 0)switch(this.getSettings_().endingStart){case 2401:E=r,B=2*l-f;break;case 2402:E=w.length-2,B=l+w[E]-w[E+1];break;default:E=r,B=f}if(Y===void 0)switch(this.getSettings_().endingEnd){case 2401:O=r,Y=2*f-l;break;case 2402:O=1,Y=f+w[1]-w[0];break;default:O=r-1,Y=l}r=.5*(f-l),w=this.valueSize,this._weightPrev=r/(l-B),this._weightNext=r/(Y-f),this._offsetPrev=E*w,this._offsetNext=O*w},interpolate_:function(r,l,f,w){var E=this.resultBuffer,O=this.sampleValues,B=this.valueSize;r*=B;var Y=r-B,K=this._offsetPrev,$=this._offsetNext,pe=this._weightPrev,fe=this._weightNext,xe=(f-l)/(w-l);for(f=xe*xe,w=f*xe,l=-pe*w+2*pe*f-pe*xe,pe=(1+pe)*w+(-1.5-2*pe)*f+(-.5+pe)*xe+1,xe=(-1-fe)*w+(1.5+fe)*f+.5*xe,fe=fe*w-fe*f,f=0;f!==B;++f)E[f]=l*O[K+f]+pe*O[Y+f]+xe*O[r+f]+fe*O[$+f];return E}}),OA.prototype=Pe(Le(_u.prototype),{constructor:OA,interpolate_:function(r,l,f,w){var E=this.resultBuffer,O=this.sampleValues,B=this.valueSize;r*=B;var Y=r-B;for(l=(f-l)/(w-l),f=1-l,w=0;w!==B;++w)E[w]=O[Y+w]*f+O[r+w]*l;return E}}),RM.prototype=Pe(Le(_u.prototype),{constructor:RM,interpolate_:function(r){return this.copySampleValue_(r-1)}}),Pe(Ps,{toJSON:function(r){var l=r.constructor;if(l.toJSON!==void 0)l=l.toJSON(r);else{l={name:r.name,times:ea.convertArray(r.times,Array),values:ea.convertArray(r.values,Array)};var f=r.getInterpolation();f!==r.DefaultInterpolation&&(l.interpolation=f)}return l.type=r.ValueTypeName,l}}),Pe(Ps.prototype,{constructor:Ps,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(r){return new RM(this.times,this.values,this.getValueSize(),r)},InterpolantFactoryMethodLinear:function(r){return new OA(this.times,this.values,this.getValueSize(),r)},InterpolantFactoryMethodSmooth:function(r){return new IM(this.times,this.values,this.getValueSize(),r)},setInterpolation:function(r){switch(r){case 2300:var l=this.InterpolantFactoryMethodDiscrete;break;case 2301:l=this.InterpolantFactoryMethodLinear;break;case 2302:l=this.InterpolantFactoryMethodSmooth}if(l===void 0){if(l="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name,this.createInterpolant===void 0)if(r!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(l);return console.warn("THREE.KeyframeTrack:",l),this}return this.createInterpolant=l,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(r){if(r!==0)for(var l=this.times,f=0,w=l.length;f!==w;++f)l[f]+=r;return this},scale:function(r){if(r!==1)for(var l=this.times,f=0,w=l.length;f!==w;++f)l[f]*=r;return this},trim:function(r,l){for(var f=this.times,w=f.length,E=0,O=w-1;E!==w&&f[E]<r;)++E;for(;O!==-1&&f[O]>l;)--O;return++O,(E!==0||O!==w)&&(E>=O&&(O=Math.max(O,1),E=O-1),r=this.getValueSize(),this.times=ea.arraySlice(f,E,O),this.values=ea.arraySlice(this.values,E*r,O*r)),this},validate:function(){var r=!0,l=this.getValueSize();l-Math.floor(l)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),r=!1);var f=this.times;l=this.values;var w=f.length;w===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),r=!1);for(var E=null,O=0;O!==w;O++){var B=f[O];if(typeof B=="number"&&isNaN(B)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,O,B),r=!1;break}if(E!==null&&E>B){console.error("THREE.KeyframeTrack: Out of order keys.",this,O,B,E),r=!1;break}E=B}if(l!==void 0&&ea.isTypedArray(l)){for(O=0,f=l.length;O!==f;++O)if(w=l[O],isNaN(w)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,O,w),r=!1;break}}return r},optimize:function(){for(var r=ea.arraySlice(this.times),l=ea.arraySlice(this.values),f=this.getValueSize(),w=this.getInterpolation()===2302,E=1,O=r.length-1,B=1;B<O;++B){var Y=!1,K=r[B];if(K!==r[B+1]&&(B!==1||K!==K[0]))if(w)Y=!0;else{var $=B*f,pe=$-f,fe=$+f;for(K=0;K!==f;++K){var xe=l[$+K];if(xe!==l[pe+K]||xe!==l[fe+K]){Y=!0;break}}}if(Y){if(B!==E)for(r[E]=r[B],Y=B*f,$=E*f,K=0;K!==f;++K)l[$+K]=l[Y+K];++E}}if(0<O){for(r[E]=r[O],Y=O*f,$=E*f,K=0;K!==f;++K)l[$+K]=l[Y+K];++E}return E!==r.length?(this.times=ea.arraySlice(r,0,E),this.values=ea.arraySlice(l,0,E*f)):(this.times=r,this.values=l),this},clone:function(){var r=ea.arraySlice(this.times,0),l=ea.arraySlice(this.values,0);return r=new this.constructor(this.name,r,l),r.createInterpolant=this.createInterpolant,r}}),LM.prototype=Pe(Le(Ps.prototype),{constructor:LM,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),PM.prototype=Pe(Le(Ps.prototype),{constructor:PM,ValueTypeName:"color"}),Fy.prototype=Pe(Le(Ps.prototype),{constructor:Fy,ValueTypeName:"number"}),OM.prototype=Pe(Le(_u.prototype),{constructor:OM,interpolate_:function(r,l,f,w){var E=this.resultBuffer,O=this.sampleValues,B=this.valueSize;for(r*=B,l=(f-l)/(w-l),f=r+B;r!==f;r+=4)X.slerpFlat(E,0,O,r-B,O,r,l);return E}}),DA.prototype=Pe(Le(Ps.prototype),{constructor:DA,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(r){return new OM(this.times,this.values,this.getValueSize(),r)},InterpolantFactoryMethodSmooth:void 0}),DM.prototype=Pe(Le(Ps.prototype),{constructor:DM,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Ny.prototype=Pe(Le(Ps.prototype),{constructor:Ny,ValueTypeName:"vector"}),Pe(fc,{parse:function(r){for(var l=[],f=r.tracks,w=1/(r.fps||1),E=0,O=f.length;E!==O;++E)l.push(rW(f[E]).scale(w));return new fc(r.name,r.duration,l,r.blendMode)},toJSON:function(r){var l=[],f=r.tracks;r={name:r.name,duration:r.duration,tracks:l,uuid:r.uuid,blendMode:r.blendMode};for(var w=0,E=f.length;w!==E;++w)l.push(Ps.toJSON(f[w]));return r},CreateFromMorphTargetSequence:function(r,l,f,w){for(var E=l.length,O=[],B=0;B<E;B++){var Y=[],K=[];Y.push((B+E-1)%E,B,(B+1)%E),K.push(0,1,0);var $=ea.getKeyframeOrder(Y);Y=ea.sortedArray(Y,1,$),K=ea.sortedArray(K,1,$),w||Y[0]!==0||(Y.push(E),K.push(K[0])),O.push(new Fy(".morphTargetInfluences["+l[B].name+"]",Y,K).scale(1/f))}return new fc(r,-1,O)},findByName:function(r,l){var f=r;for(Array.isArray(r)||(f=r.geometry&&r.geometry.animations||r.animations),r=0;r<f.length;r++)if(f[r].name===l)return f[r];return null},CreateClipsFromMorphTargetSequences:function(r,l,f){for(var w={},E=/^([\w-]*?)([\d]+)$/,O=0,B=r.length;O<B;O++){var Y=r[O],K=Y.name.match(E);if(K&&1<K.length){var $=K[1];(K=w[$])||(w[$]=K=[]),K.push(Y)}}r=[];for($ in w)r.push(fc.CreateFromMorphTargetSequence($,w[$],l,f));return r},parseAnimation:function(r,l){if(!r)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var f=function(it,xt,pt,Lt,Ct){if(pt.length!==0){var Bt=[],yt=[];ea.flattenJSON(pt,Bt,yt,Lt),Bt.length!==0&&Ct.push(new it(xt,Bt,yt))}},w=[],E=r.name||"default",O=r.length||-1,B=r.fps||30,Y=r.blendMode;r=r.hierarchy||[];for(var K=0;K<r.length;K++){var $=r[K].keys;if($&&$.length!==0)if($[0].morphTargets){O={};for(var pe=0;pe<$.length;pe++)if($[pe].morphTargets)for(var fe=0;fe<$[pe].morphTargets.length;fe++)O[$[pe].morphTargets[fe]]=-1;for(var xe in O){var ye=[],Me=[];for(fe=0;fe!==$[pe].morphTargets.length;++fe){var Oe=$[pe];ye.push(Oe.time),Me.push(Oe.morphTarget===xe?1:0)}w.push(new Fy(".morphTargetInfluence["+xe+"]",ye,Me))}O=O.length*(B||1)}else pe=".bones["+l[K].name+"]",f(Ny,pe+".position",$,"pos",w),f(DA,pe+".quaternion",$,"rot",w),f(Ny,pe+".scale",$,"scl",w)}return w.length===0?null:new fc(E,O,w,Y)}}),Pe(fc.prototype,{resetDuration:function(){for(var r=0,l=0,f=this.tracks.length;l!==f;++l){var w=this.tracks[l];r=Math.max(r,w.times[w.times.length-1])}return this.duration=r,this},trim:function(){for(var r=0;r<this.tracks.length;r++)this.tracks[r].trim(0,this.duration);return this},validate:function(){for(var r=!0,l=0;l<this.tracks.length;l++)r=r&&this.tracks[l].validate();return r},optimize:function(){for(var r=0;r<this.tracks.length;r++)this.tracks[r].optimize();return this},clone:function(){for(var r=[],l=0;l<this.tracks.length;l++)r.push(this.tracks[l].clone());return new fc(this.name,this.duration,r,this.blendMode)}});var Sv={enabled:!1,files:{},add:function(r,l){this.enabled!==!1&&(this.files[r]=l)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}},pF=new dR;Pe(fo.prototype,{load:function(){},loadAsync:function(r,l){var f=this;return new vi(function(w,E){f.load(r,w,l,E)})},parse:function(){},setCrossOrigin:function(r){return this.crossOrigin=r,this},setPath:function(r){return this.path=r,this},setResourcePath:function(r){return this.resourcePath=r,this},setRequestHeader:function(r){return this.requestHeader=r,this}});var mh={};dc.prototype=Pe(Le(fo.prototype),{constructor:dc,load:function(r,l,f,w){r===void 0&&(r=""),this.path!==void 0&&(r=this.path+r),r=this.manager.resolveURL(r);var E=this,O=Sv.get(r);if(O!==void 0)return E.manager.itemStart(r),setTimeout(function(){l&&l(O),E.manager.itemEnd(r)},0),O;if(mh[r]!==void 0)mh[r].push({onLoad:l,onProgress:f,onError:w});else{var B=r.match(/^data:(.*?)(;base64)?,(.*)$/);if(B){f=B[1];var Y=!!B[2];B=B[3],B=decodeURIComponent(B),Y&&(B=atob(B));try{var K=(this.responseType||"").toLowerCase();switch(K){case"arraybuffer":case"blob":var $=new Uint8Array(B.length);for(Y=0;Y<B.length;Y++)$[Y]=B.charCodeAt(Y);var pe=K==="blob"?new Blob([$.buffer],{type:f}):$.buffer;break;case"document":pe=new DOMParser().parseFromString(B,f);break;case"json":pe=JSON.parse(B);break;default:pe=B}setTimeout(function(){l&&l(pe),E.manager.itemEnd(r)},0)}catch(xe){setTimeout(function(){w&&w(xe),E.manager.itemError(r),E.manager.itemEnd(r)},0)}}else{mh[r]=[],mh[r].push({onLoad:l,onProgress:f,onError:w});var fe=new XMLHttpRequest;fe.open("GET",r,!0),fe.addEventListener("load",function(xe){var ye=this.response,Me=mh[r];if(delete mh[r],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Sv.add(r,ye);for(var Oe=0,it=Me.length;Oe<it;Oe++){var xt=Me[Oe];xt.onLoad&&xt.onLoad(ye)}}else{for(Oe=0,it=Me.length;Oe<it;Oe++)xt=Me[Oe],xt.onError&&xt.onError(xe);E.manager.itemError(r)}E.manager.itemEnd(r)},!1),fe.addEventListener("progress",function(xe){for(var ye=mh[r],Me=0,Oe=ye.length;Me<Oe;Me++){var it=ye[Me];it.onProgress&&it.onProgress(xe)}},!1),fe.addEventListener("error",function(xe){var ye=mh[r];delete mh[r];for(var Me=0,Oe=ye.length;Me<Oe;Me++){var it=ye[Me];it.onError&&it.onError(xe)}E.manager.itemError(r),E.manager.itemEnd(r)},!1),fe.addEventListener("abort",function(xe){var ye=mh[r];delete mh[r];for(var Me=0,Oe=ye.length;Me<Oe;Me++){var it=ye[Me];it.onError&&it.onError(xe)}E.manager.itemError(r),E.manager.itemEnd(r)},!1),this.responseType!==void 0&&(fe.responseType=this.responseType),this.withCredentials!==void 0&&(fe.withCredentials=this.withCredentials),fe.overrideMimeType&&fe.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(Y in this.requestHeader)fe.setRequestHeader(Y,this.requestHeader[Y]);fe.send(null)}return E.manager.itemStart(r),fe}},setResponseType:function(r){return this.responseType=r,this},setWithCredentials:function(r){return this.withCredentials=r,this},setMimeType:function(r){return this.mimeType=r,this}}),pR.prototype=Pe(Le(fo.prototype),{constructor:pR,load:function(r,l,f,w){var E=this,O=new dc(E.manager);O.setPath(E.path),O.load(r,function(B){try{l(E.parse(JSON.parse(B)))}catch(Y){w?w(Y):console.error(Y),E.manager.itemError(r)}},f,w)},parse:function(r){for(var l=[],f=0;f<r.length;f++){var w=fc.parse(r[f]);l.push(w)}return l}}),mR.prototype=Pe(Le(fo.prototype),{constructor:mR,load:function(r,l,f,w){function E(xe){K.load(r[xe],function(ye){ye=O.parse(ye,!0),B[xe]={width:ye.width,height:ye.height,format:ye.format,mipmaps:ye.mipmaps},$+=1,$===6&&(ye.mipmapCount===1&&(Y.minFilter=1006),Y.format=ye.format,Y.needsUpdate=!0,l&&l(Y))},f,w)}var O=this,B=[],Y=new wy;Y.image=B;var K=new dc(this.manager);if(K.setPath(this.path),K.setResponseType("arraybuffer"),Array.isArray(r))for(var $=0,pe=0,fe=r.length;pe<fe;++pe)E(pe);else K.load(r,function(xe){if(xe=O.parse(xe,!0),xe.isCubemap)for(var ye=xe.mipmaps.length/xe.mipmapCount,Me=0;Me<ye;Me++){B[Me]={mipmaps:[]};for(var Oe=0;Oe<xe.mipmapCount;Oe++)B[Me].mipmaps.push(xe.mipmaps[Me*xe.mipmapCount+Oe]),B[Me].format=xe.format,B[Me].width=xe.width,B[Me].height=xe.height}else Y.image.width=xe.width,Y.image.height=xe.height,Y.mipmaps=xe.mipmaps;xe.mipmapCount===1&&(Y.minFilter=1006),Y.format=xe.format,Y.needsUpdate=!0,l&&l(Y)},f,w);return Y}}),bM.prototype=Pe(Le(fo.prototype),{constructor:bM,load:function(r,l,f,w){var E=this,O=new Zt,B=new dc(this.manager);return B.setResponseType("arraybuffer"),B.setPath(this.path),B.load(r,function(Y){(Y=E.parse(Y))&&(Y.image!==void 0?O.image=Y.image:Y.data!==void 0&&(O.image.width=Y.width,O.image.height=Y.height,O.image.data=Y.data),O.wrapS=Y.wrapS!==void 0?Y.wrapS:1001,O.wrapT=Y.wrapT!==void 0?Y.wrapT:1001,O.magFilter=Y.magFilter!==void 0?Y.magFilter:1006,O.minFilter=Y.minFilter!==void 0?Y.minFilter:1006,O.anisotropy=Y.anisotropy!==void 0?Y.anisotropy:1,Y.format!==void 0&&(O.format=Y.format),Y.type!==void 0&&(O.type=Y.type),Y.mipmaps!==void 0&&(O.mipmaps=Y.mipmaps,O.minFilter=1008),Y.mipmapCount===1&&(O.minFilter=1006),O.needsUpdate=!0,l&&l(O,Y))},f,w),O}}),By.prototype=Pe(Le(fo.prototype),{constructor:By,load:function(r,l,f,w){function E(){K.removeEventListener("load",E,!1),K.removeEventListener("error",O,!1),Sv.add(r,this),l&&l(this),B.manager.itemEnd(r)}function O($){K.removeEventListener("load",E,!1),K.removeEventListener("error",O,!1),w&&w($),B.manager.itemError(r),B.manager.itemEnd(r)}this.path!==void 0&&(r=this.path+r),r=this.manager.resolveURL(r);var B=this,Y=Sv.get(r);if(Y!==void 0)return B.manager.itemStart(r),setTimeout(function(){l&&l(Y),B.manager.itemEnd(r)},0),Y;var K=document.createElementNS("http://www.w3.org/1999/xhtml","img");return K.addEventListener("load",E,!1),K.addEventListener("error",O,!1),r.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(K.crossOrigin=this.crossOrigin),B.manager.itemStart(r),K.src=r,K}}),FM.prototype=Pe(Le(fo.prototype),{constructor:FM,load:function(r,l,f,w){function E(K){B.load(r[K],function($){O.images[K]=$,Y++,Y===6&&(O.needsUpdate=!0,l&&l(O))},void 0,w)}var O=new cc,B=new By(this.manager);B.setCrossOrigin(this.crossOrigin),B.setPath(this.path);var Y=0;for(f=0;f<r.length;++f)E(f);return O}}),NM.prototype=Pe(Le(fo.prototype),{constructor:NM,load:function(r,l,f,w){var E=new A,O=new By(this.manager);return O.setCrossOrigin(this.crossOrigin),O.setPath(this.path),O.load(r,function(B){E.image=B,B=0<r.search(/\.jpe?g($|\?)/i)||r.search(/^data:image\/jpeg/)===0,E.format=B?1022:1023,E.needsUpdate=!0,l!==void 0&&l(E)},f,w),E}}),Pe(Pn.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(r,l){return r=this.getUtoTmapping(r),this.getPoint(r,l)},getPoints:function(r){r===void 0&&(r=5);for(var l=[],f=0;f<=r;f++)l.push(this.getPoint(f/r));return l},getSpacedPoints:function(r){r===void 0&&(r=5);for(var l=[],f=0;f<=r;f++)l.push(this.getPointAt(f/r));return l},getLength:function(){var r=this.getLengths();return r[r.length-1]},getLengths:function(r){if(r===void 0&&(r=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===r+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var l=[],f=this.getPoint(0),w,E=0;for(l.push(0),w=1;w<=r;w++){var O=this.getPoint(w/r);E+=O.distanceTo(f),l.push(E),f=O}return this.cacheArcLengths=l},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(r,l){var f=this.getLengths(),w=f.length;l=l||r*f[w-1];for(var E=0,O=w-1,B;E<=O;)if(r=Math.floor(E+(O-E)/2),B=f[r]-l,0>B)E=r+1;else if(0<B)O=r-1;else{O=r;break}return r=O,f[r]===l?r/(w-1):(E=f[r],(r+(l-E)/(f[r+1]-E))/(w-1))},getTangent:function(r,l){var f=r-1e-4;return r+=1e-4,0>f&&(f=0),1<r&&(r=1),f=this.getPoint(f),r=this.getPoint(r),l=l||(f.isVector2?new v:new I),l.copy(r).sub(f).normalize(),l},getTangentAt:function(r,l){return r=this.getUtoTmapping(r),this.getTangent(r,l)},computeFrenetFrames:function(r,l){var f=new I,w=[],E=[],O=[],B=new I,Y=new b,K;for(K=0;K<=r;K++){var $=K/r;w[K]=this.getTangentAt($,new I),w[K].normalize()}E[0]=new I,O[0]=new I,K=Number.MAX_VALUE,$=Math.abs(w[0].x);var pe=Math.abs(w[0].y),fe=Math.abs(w[0].z);for($<=K&&(K=$,f.set(1,0,0)),pe<=K&&(K=pe,f.set(0,1,0)),fe<=K&&f.set(0,0,1),B.crossVectors(w[0],f).normalize(),E[0].crossVectors(w[0],B),O[0].crossVectors(w[0],E[0]),K=1;K<=r;K++)E[K]=E[K-1].clone(),O[K]=O[K-1].clone(),B.crossVectors(w[K-1],w[K]),B.length()>Bo&&(B.normalize(),f=Math.acos(ci.clamp(w[K-1].dot(w[K]),-1,1)),E[K].applyMatrix4(Y.makeRotationAxis(B,f))),O[K].crossVectors(w[K],E[K]);if(l===!0)for(f=Math.acos(ci.clamp(E[0].dot(E[r]),-1,1)),f/=r,0<w[0].dot(B.crossVectors(E[0],E[r]))&&(f=-f),K=1;K<=r;K++)E[K].applyMatrix4(Y.makeRotationAxis(w[K],f*K)),O[K].crossVectors(w[K],E[K]);return{tangents:w,normals:E,binormals:O}},clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.arcLengthDivisions=r.arcLengthDivisions,this},toJSON:function(){var r={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return r.arcLengthDivisions=this.arcLengthDivisions,r.type=this.type,r},fromJSON:function(r){return this.arcLengthDivisions=r.arcLengthDivisions,this}}),Mu.prototype=Le(Pn.prototype),Mu.prototype.constructor=Mu,Mu.prototype.isEllipseCurve=!0,Mu.prototype.getPoint=function(r,l){l=l||new v;for(var f=2*Math.PI,w=this.aEndAngle-this.aStartAngle,E=Math.abs(w)<Bo;0>w;)w+=f;for(;w>f;)w-=f;w<Bo&&(w=E?0:f),this.aClockwise!==!0||E||(w=w===f?-f:w-f),f=this.aStartAngle+r*w,r=this.aX+this.xRadius*Math.cos(f);var O=this.aY+this.yRadius*Math.sin(f);return this.aRotation!==0&&(f=Math.cos(this.aRotation),w=Math.sin(this.aRotation),E=r-this.aX,O-=this.aY,r=E*f-O*w+this.aX,O=E*w+O*f+this.aY),l.set(r,O)},Mu.prototype.copy=function(r){return Pn.prototype.copy.call(this,r),this.aX=r.aX,this.aY=r.aY,this.xRadius=r.xRadius,this.yRadius=r.yRadius,this.aStartAngle=r.aStartAngle,this.aEndAngle=r.aEndAngle,this.aClockwise=r.aClockwise,this.aRotation=r.aRotation,this},Mu.prototype.toJSON=function(){var r=Pn.prototype.toJSON.call(this);return r.aX=this.aX,r.aY=this.aY,r.xRadius=this.xRadius,r.yRadius=this.yRadius,r.aStartAngle=this.aStartAngle,r.aEndAngle=this.aEndAngle,r.aClockwise=this.aClockwise,r.aRotation=this.aRotation,r},Mu.prototype.fromJSON=function(r){return Pn.prototype.fromJSON.call(this,r),this.aX=r.aX,this.aY=r.aY,this.xRadius=r.xRadius,this.yRadius=r.yRadius,this.aStartAngle=r.aStartAngle,this.aEndAngle=r.aEndAngle,this.aClockwise=r.aClockwise,this.aRotation=r.aRotation,this},zy.prototype=Le(Mu.prototype),zy.prototype.constructor=zy,zy.prototype.isArcCurve=!0;var _S=new I,sL=new gR,lL=new gR,uL=new gR;tl.prototype=Le(Pn.prototype),tl.prototype.constructor=tl,tl.prototype.isCatmullRomCurve3=!0,tl.prototype.getPoint=function(r,l){l=l||new I;var f=this.points,w=f.length;r*=w-(this.closed?0:1);var E=Math.floor(r);if(r-=E,this.closed?E+=0<E?0:(Math.floor(Math.abs(E)/w)+1)*w:r===0&&E===w-1&&(E=w-2,r=1),this.closed||0<E)var O=f[(E-1)%w];else _S.subVectors(f[0],f[1]).add(f[0]),O=_S;var B=f[E%w],Y=f[(E+1)%w];if(this.closed||E+2<w?f=f[(E+2)%w]:(_S.subVectors(f[w-1],f[w-2]).add(f[w-1]),f=_S),this.curveType==="centripetal"||this.curveType==="chordal"){var K=this.curveType==="chordal"?.5:.25;w=Math.pow(O.distanceToSquared(B),K),E=Math.pow(B.distanceToSquared(Y),K),K=Math.pow(Y.distanceToSquared(f),K),1e-4>E&&(E=1),1e-4>w&&(w=E),1e-4>K&&(K=E),sL.initNonuniformCatmullRom(O.x,B.x,Y.x,f.x,w,E,K),lL.initNonuniformCatmullRom(O.y,B.y,Y.y,f.y,w,E,K),uL.initNonuniformCatmullRom(O.z,B.z,Y.z,f.z,w,E,K)}else this.curveType==="catmullrom"&&(sL.initCatmullRom(O.x,B.x,Y.x,f.x,this.tension),lL.initCatmullRom(O.y,B.y,Y.y,f.y,this.tension),uL.initCatmullRom(O.z,B.z,Y.z,f.z,this.tension));return l.set(sL.calc(r),lL.calc(r),uL.calc(r)),l},tl.prototype.copy=function(r){Pn.prototype.copy.call(this,r),this.points=[];for(var l=0,f=r.points.length;l<f;l++)this.points.push(r.points[l].clone());return this.closed=r.closed,this.curveType=r.curveType,this.tension=r.tension,this},tl.prototype.toJSON=function(){var r=Pn.prototype.toJSON.call(this);r.points=[];for(var l=0,f=this.points.length;l<f;l++)r.points.push(this.points[l].toArray());return r.closed=this.closed,r.curveType=this.curveType,r.tension=this.tension,r},tl.prototype.fromJSON=function(r){Pn.prototype.fromJSON.call(this,r),this.points=[];for(var l=0,f=r.points.length;l<f;l++){var w=r.points[l];this.points.push(new I().fromArray(w))}return this.closed=r.closed,this.curveType=r.curveType,this.tension=r.tension,this},sh.prototype=Le(Pn.prototype),sh.prototype.constructor=sh,sh.prototype.isCubicBezierCurve=!0,sh.prototype.getPoint=function(r,l){l=l||new v;var f=this.v0,w=this.v1,E=this.v2,O=this.v3;return l.set(FA(r,f.x,w.x,E.x,O.x),FA(r,f.y,w.y,E.y,O.y)),l},sh.prototype.copy=function(r){return Pn.prototype.copy.call(this,r),this.v0.copy(r.v0),this.v1.copy(r.v1),this.v2.copy(r.v2),this.v3.copy(r.v3),this},sh.prototype.toJSON=function(){var r=Pn.prototype.toJSON.call(this);return r.v0=this.v0.toArray(),r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r.v3=this.v3.toArray(),r},sh.prototype.fromJSON=function(r){return Pn.prototype.fromJSON.call(this,r),this.v0.fromArray(r.v0),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this.v3.fromArray(r.v3),this},mf.prototype=Le(Pn.prototype),mf.prototype.constructor=mf,mf.prototype.isCubicBezierCurve3=!0,mf.prototype.getPoint=function(r,l){l=l||new I;var f=this.v0,w=this.v1,E=this.v2,O=this.v3;return l.set(FA(r,f.x,w.x,E.x,O.x),FA(r,f.y,w.y,E.y,O.y),FA(r,f.z,w.z,E.z,O.z)),l},mf.prototype.copy=function(r){return Pn.prototype.copy.call(this,r),this.v0.copy(r.v0),this.v1.copy(r.v1),this.v2.copy(r.v2),this.v3.copy(r.v3),this},mf.prototype.toJSON=function(){var r=Pn.prototype.toJSON.call(this);return r.v0=this.v0.toArray(),r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r.v3=this.v3.toArray(),r},mf.prototype.fromJSON=function(r){return Pn.prototype.fromJSON.call(this,r),this.v0.fromArray(r.v0),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this.v3.fromArray(r.v3),this},eu.prototype=Le(Pn.prototype),eu.prototype.constructor=eu,eu.prototype.isLineCurve=!0,eu.prototype.getPoint=function(r,l){return l=l||new v,r===1?l.copy(this.v2):(l.copy(this.v2).sub(this.v1),l.multiplyScalar(r).add(this.v1)),l},eu.prototype.getPointAt=function(r,l){return this.getPoint(r,l)},eu.prototype.getTangent=function(r,l){return r=l||new v,r=r.copy(this.v2).sub(this.v1).normalize()},eu.prototype.copy=function(r){return Pn.prototype.copy.call(this,r),this.v1.copy(r.v1),this.v2.copy(r.v2),this},eu.prototype.toJSON=function(){var r=Pn.prototype.toJSON.call(this);return r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r},eu.prototype.fromJSON=function(r){return Pn.prototype.fromJSON.call(this,r),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this},lh.prototype=Le(Pn.prototype),lh.prototype.constructor=lh,lh.prototype.isLineCurve3=!0,lh.prototype.getPoint=function(r,l){return l=l||new I,r===1?l.copy(this.v2):(l.copy(this.v2).sub(this.v1),l.multiplyScalar(r).add(this.v1)),l},lh.prototype.getPointAt=function(r,l){return this.getPoint(r,l)},lh.prototype.copy=function(r){return Pn.prototype.copy.call(this,r),this.v1.copy(r.v1),this.v2.copy(r.v2),this},lh.prototype.toJSON=function(){var r=Pn.prototype.toJSON.call(this);return r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r},lh.prototype.fromJSON=function(r){return Pn.prototype.fromJSON.call(this,r),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this},uh.prototype=Le(Pn.prototype),uh.prototype.constructor=uh,uh.prototype.isQuadraticBezierCurve=!0,uh.prototype.getPoint=function(r,l){l=l||new v;var f=this.v0,w=this.v1,E=this.v2;return l.set(bA(r,f.x,w.x,E.x),bA(r,f.y,w.y,E.y)),l},uh.prototype.copy=function(r){return Pn.prototype.copy.call(this,r),this.v0.copy(r.v0),this.v1.copy(r.v1),this.v2.copy(r.v2),this},uh.prototype.toJSON=function(){var r=Pn.prototype.toJSON.call(this);return r.v0=this.v0.toArray(),r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r},uh.prototype.fromJSON=function(r){return Pn.prototype.fromJSON.call(this,r),this.v0.fromArray(r.v0),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this},gf.prototype=Le(Pn.prototype),gf.prototype.constructor=gf,gf.prototype.isQuadraticBezierCurve3=!0,gf.prototype.getPoint=function(r,l){l=l||new I;var f=this.v0,w=this.v1,E=this.v2;return l.set(bA(r,f.x,w.x,E.x),bA(r,f.y,w.y,E.y),bA(r,f.z,w.z,E.z)),l},gf.prototype.copy=function(r){return Pn.prototype.copy.call(this,r),this.v0.copy(r.v0),this.v1.copy(r.v1),this.v2.copy(r.v2),this},gf.prototype.toJSON=function(){var r=Pn.prototype.toJSON.call(this);return r.v0=this.v0.toArray(),r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r},gf.prototype.fromJSON=function(r){return Pn.prototype.fromJSON.call(this,r),this.v0.fromArray(r.v0),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this},ch.prototype=Le(Pn.prototype),ch.prototype.constructor=ch,ch.prototype.isSplineCurve=!0,ch.prototype.getPoint=function(r,l){l=l||new v;var f=this.points,w=(f.length-1)*r;r=Math.floor(w),w-=r;var E=f[r===0?r:r-1],O=f[r],B=f[r>f.length-2?f.length-1:r+1];return f=f[r>f.length-3?f.length-1:r+2],l.set(_6(w,E.x,O.x,B.x,f.x),_6(w,E.y,O.y,B.y,f.y)),l},ch.prototype.copy=function(r){Pn.prototype.copy.call(this,r),this.points=[];for(var l=0,f=r.points.length;l<f;l++)this.points.push(r.points[l].clone());return this},ch.prototype.toJSON=function(){var r=Pn.prototype.toJSON.call(this);r.points=[];for(var l=0,f=this.points.length;l<f;l++)r.points.push(this.points[l].toArray());return r},ch.prototype.fromJSON=function(r){Pn.prototype.fromJSON.call(this,r),this.points=[];for(var l=0,f=r.points.length;l<f;l++){var w=r.points[l];this.points.push(new v().fromArray(w))}return this};var cL=rc({__proto__:null,ArcCurve:zy,CatmullRomCurve3:tl,CubicBezierCurve:sh,CubicBezierCurve3:mf,EllipseCurve:Mu,LineCurve:eu,LineCurve3:lh,QuadraticBezierCurve:uh,QuadraticBezierCurve3:gf,SplineCurve:ch});Cd.prototype=Pe(Le(Pn.prototype),{constructor:Cd,add:function(r){this.curves.push(r)},closePath:function(){var r=this.curves[0].getPoint(0),l=this.curves[this.curves.length-1].getPoint(1);r.equals(l)||this.curves.push(new eu(l,r))},getPoint:function(r){var l=r*this.getLength(),f=this.getCurveLengths();for(r=0;r<f.length;){if(f[r]>=l)return l=f[r]-l,r=this.curves[r],f=r.getLength(),r.getPointAt(f===0?0:1-l/f);r++}return null},getLength:function(){var r=this.getCurveLengths();return r[r.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var r=[],l=0,f=0,w=this.curves.length;f<w;f++)l+=this.curves[f].getLength(),r.push(l);return this.cacheLengths=r},getSpacedPoints:function(r){r===void 0&&(r=40);for(var l=[],f=0;f<=r;f++)l.push(this.getPoint(f/r));return this.autoClose&&l.push(l[0]),l},getPoints:function(r){r=r||12;for(var l=[],f,w=0,E=this.curves;w<E.length;w++){var O=E[w];O=O.getPoints(O&&O.isEllipseCurve?2*r:O&&(O.isLineCurve||O.isLineCurve3)?1:O&&O.isSplineCurve?r*O.points.length:r);for(var B=0;B<O.length;B++){var Y=O[B];f&&f.equals(Y)||(l.push(Y),f=Y)}}return this.autoClose&&1<l.length&&!l[l.length-1].equals(l[0])&&l.push(l[0]),l},copy:function(r){Pn.prototype.copy.call(this,r),this.curves=[];for(var l=0,f=r.curves.length;l<f;l++)this.curves.push(r.curves[l].clone());return this.autoClose=r.autoClose,this},toJSON:function(){var r=Pn.prototype.toJSON.call(this);r.autoClose=this.autoClose,r.curves=[];for(var l=0,f=this.curves.length;l<f;l++)r.curves.push(this.curves[l].toJSON());return r},fromJSON:function(r){Pn.prototype.fromJSON.call(this,r),this.autoClose=r.autoClose,this.curves=[];for(var l=0,f=r.curves.length;l<f;l++){var w=r.curves[l];this.curves.push(new cL[w.type]().fromJSON(w))}return this}}),hh.prototype=Pe(Le(Cd.prototype),{constructor:hh,setFromPoints:function(r){this.moveTo(r[0].x,r[0].y);for(var l=1,f=r.length;l<f;l++)this.lineTo(r[l].x,r[l].y);return this},moveTo:function(r,l){return this.currentPoint.set(r,l),this},lineTo:function(r,l){var f=new eu(this.currentPoint.clone(),new v(r,l));return this.curves.push(f),this.currentPoint.set(r,l),this},quadraticCurveTo:function(r,l,f,w){return r=new uh(this.currentPoint.clone(),new v(r,l),new v(f,w)),this.curves.push(r),this.currentPoint.set(f,w),this},bezierCurveTo:function(r,l,f,w,E,O){return r=new sh(this.currentPoint.clone(),new v(r,l),new v(f,w),new v(E,O)),this.curves.push(r),this.currentPoint.set(E,O),this},splineThru:function(r){var l=[this.currentPoint.clone()].concat(r);return l=new ch(l),this.curves.push(l),this.currentPoint.copy(r[r.length-1]),this},arc:function(r,l,f,w,E,O){return this.absarc(r+this.currentPoint.x,l+this.currentPoint.y,f,w,E,O),this},absarc:function(r,l,f,w,E,O){return this.absellipse(r,l,f,f,w,E,O),this},ellipse:function(r,l,f,w,E,O,B,Y){return this.absellipse(r+this.currentPoint.x,l+this.currentPoint.y,f,w,E,O,B,Y),this},absellipse:function(r,l,f,w,E,O,B,Y){return r=new Mu(r,l,f,w,E,O,B,Y),0<this.curves.length&&(l=r.getPoint(0),l.equals(this.currentPoint)||this.lineTo(l.x,l.y)),this.curves.push(r),r=r.getPoint(1),this.currentPoint.copy(r),this},copy:function(r){return Cd.prototype.copy.call(this,r),this.currentPoint.copy(r.currentPoint),this},toJSON:function(){var r=Cd.prototype.toJSON.call(this);return r.currentPoint=this.currentPoint.toArray(),r},fromJSON:function(r){return Cd.prototype.fromJSON.call(this,r),this.currentPoint.fromArray(r.currentPoint),this}}),nm.prototype=Pe(Le(hh.prototype),{constructor:nm,getPointsHoles:function(r){for(var l=[],f=0,w=this.holes.length;f<w;f++)l[f]=this.holes[f].getPoints(r);return l},extractPoints:function(r){return{shape:this.getPoints(r),holes:this.getPointsHoles(r)}},copy:function(r){hh.prototype.copy.call(this,r),this.holes=[];for(var l=0,f=r.holes.length;l<f;l++)this.holes.push(r.holes[l].clone());return this},toJSON:function(){var r=hh.prototype.toJSON.call(this);r.uuid=this.uuid,r.holes=[];for(var l=0,f=this.holes.length;l<f;l++)r.holes.push(this.holes[l].toJSON());return r},fromJSON:function(r){hh.prototype.fromJSON.call(this,r),this.uuid=r.uuid,this.holes=[];for(var l=0,f=r.holes.length;l<f;l++){var w=r.holes[l];this.holes.push(new hh().fromJSON(w))}return this}}),zo.prototype=Pe(Le(G.prototype),{constructor:zo,isLight:!0,copy:function(r){return G.prototype.copy.call(this,r),this.color.copy(r.color),this.intensity=r.intensity,this},toJSON:function(r){return r=G.prototype.toJSON.call(this,r),r.object.color=this.color.getHex(),r.object.intensity=this.intensity,this.groundColor!==void 0&&(r.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(r.object.distance=this.distance),this.angle!==void 0&&(r.object.angle=this.angle),this.decay!==void 0&&(r.object.decay=this.decay),this.penumbra!==void 0&&(r.object.penumbra=this.penumbra),this.shadow!==void 0&&(r.object.shadow=this.shadow.toJSON()),r}}),BM.prototype=Pe(Le(zo.prototype),{constructor:BM,isHemisphereLight:!0,copy:function(r){return zo.prototype.copy.call(this,r),this.groundColor.copy(r.groundColor),this}}),Pe(vf.prototype,{_projScreenMatrix:new b,_lightPositionWorld:new I,_lookTarget:new I,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(r){var l=this.camera,f=this.matrix,w=this._projScreenMatrix,E=this._lookTarget,O=this._lightPositionWorld;O.setFromMatrixPosition(r.matrixWorld),l.position.copy(O),E.setFromMatrixPosition(r.target.matrixWorld),l.lookAt(E),l.updateMatrixWorld(),w.multiplyMatrices(l.projectionMatrix,l.matrixWorldInverse),this._frustum.setFromProjectionMatrix(w),f.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),f.multiply(l.projectionMatrix),f.multiply(l.matrixWorldInverse)},getViewport:function(r){return this._viewports[r]},getFrameExtents:function(){return this._frameExtents},copy:function(r){return this.camera=r.camera.clone(),this.bias=r.bias,this.radius=r.radius,this.mapSize.copy(r.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var r={};return this.bias!==0&&(r.bias=this.bias),this.radius!==1&&(r.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(r.mapSize=this.mapSize.toArray()),r.camera=this.camera.toJSON(!1).object,delete r.camera.matrix,r}}),zM.prototype=Pe(Le(vf.prototype),{constructor:zM,isSpotLightShadow:!0,updateMatrices:function(r){var l=this.camera,f=2*ci.RAD2DEG*r.angle,w=this.mapSize.width/this.mapSize.height,E=r.distance||l.far;(f!==l.fov||w!==l.aspect||E!==l.far)&&(l.fov=f,l.aspect=w,l.far=E,l.updateProjectionMatrix()),vf.prototype.updateMatrices.call(this,r)}}),UM.prototype=Pe(Le(zo.prototype),{constructor:UM,isSpotLight:!0,copy:function(r){return zo.prototype.copy.call(this,r),this.distance=r.distance,this.angle=r.angle,this.penumbra=r.penumbra,this.decay=r.decay,this.target=r.target.clone(),this.shadow=r.shadow.clone(),this}}),vR.prototype=Pe(Le(vf.prototype),{constructor:vR,isPointLightShadow:!0,updateMatrices:function(r,l){l===void 0&&(l=0);var f=this.camera,w=this.matrix,E=this._lightPositionWorld,O=this._lookTarget,B=this._projScreenMatrix;E.setFromMatrixPosition(r.matrixWorld),f.position.copy(E),O.copy(f.position),O.add(this._cubeDirections[l]),f.up.copy(this._cubeUps[l]),f.lookAt(O),f.updateMatrixWorld(),w.makeTranslation(-E.x,-E.y,-E.z),B.multiplyMatrices(f.projectionMatrix,f.matrixWorldInverse),this._frustum.setFromProjectionMatrix(B)}}),kM.prototype=Pe(Le(zo.prototype),{constructor:kM,isPointLight:!0,copy:function(r){return zo.prototype.copy.call(this,r),this.distance=r.distance,this.decay=r.decay,this.shadow=r.shadow.clone(),this}}),Uy.prototype=Pe(Le(Ot.prototype),{constructor:Uy,isOrthographicCamera:!0,copy:function(r,l){return Ot.prototype.copy.call(this,r,l),this.left=r.left,this.right=r.right,this.top=r.top,this.bottom=r.bottom,this.near=r.near,this.far=r.far,this.zoom=r.zoom,this.view=r.view===null?null:Pe({},r.view),this},setViewOffset:function(r,l,f,w,E,O){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=r,this.view.fullHeight=l,this.view.offsetX=f,this.view.offsetY=w,this.view.width=E,this.view.height=O,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var r=(this.right-this.left)/(2*this.zoom),l=(this.top-this.bottom)/(2*this.zoom),f=(this.right+this.left)/2,w=(this.top+this.bottom)/2,E=f-r;f+=r,r=w+l,l=w-l,this.view!==null&&this.view.enabled&&(w=(this.right-this.left)/this.view.fullWidth/this.zoom,l=(this.top-this.bottom)/this.view.fullHeight/this.zoom,E+=w*this.view.offsetX,f=E+w*this.view.width,r-=l*this.view.offsetY,l=r-l*this.view.height),this.projectionMatrix.makeOrthographic(E,f,r,l,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(r){return r=G.prototype.toJSON.call(this,r),r.object.zoom=this.zoom,r.object.left=this.left,r.object.right=this.right,r.object.top=this.top,r.object.bottom=this.bottom,r.object.near=this.near,r.object.far=this.far,this.view!==null&&(r.object.view=Pe({},this.view)),r}}),HM.prototype=Pe(Le(vf.prototype),{constructor:HM,isDirectionalLightShadow:!0,updateMatrices:function(r){vf.prototype.updateMatrices.call(this,r)}}),jM.prototype=Pe(Le(zo.prototype),{constructor:jM,isDirectionalLight:!0,copy:function(r){return zo.prototype.copy.call(this,r),this.target=r.target.clone(),this.shadow=r.shadow.clone(),this}}),GM.prototype=Pe(Le(zo.prototype),{constructor:GM,isAmbientLight:!0}),VM.prototype=Pe(Le(zo.prototype),{constructor:VM,isRectAreaLight:!0,copy:function(r){return zo.prototype.copy.call(this,r),this.width=r.width,this.height=r.height,this},toJSON:function(r){return r=zo.prototype.toJSON.call(this,r),r.object.width=this.width,r.object.height=this.height,r}}),Pe(WM.prototype,{isSphericalHarmonics3:!0,set:function(r){for(var l=0;9>l;l++)this.coefficients[l].copy(r[l]);return this},zero:function(){for(var r=0;9>r;r++)this.coefficients[r].set(0,0,0);return this},getAt:function(r,l){var f=r.x,w=r.y;r=r.z;var E=this.coefficients;return l.copy(E[0]).multiplyScalar(.282095),l.addScaledVector(E[1],.488603*w),l.addScaledVector(E[2],.488603*r),l.addScaledVector(E[3],.488603*f),l.addScaledVector(E[4],1.092548*f*w),l.addScaledVector(E[5],1.092548*w*r),l.addScaledVector(E[6],.315392*(3*r*r-1)),l.addScaledVector(E[7],1.092548*f*r),l.addScaledVector(E[8],.546274*(f*f-w*w)),l},getIrradianceAt:function(r,l){var f=r.x,w=r.y;r=r.z;var E=this.coefficients;return l.copy(E[0]).multiplyScalar(.886227),l.addScaledVector(E[1],1.023328*w),l.addScaledVector(E[2],1.023328*r),l.addScaledVector(E[3],1.023328*f),l.addScaledVector(E[4],.858086*f*w),l.addScaledVector(E[5],.858086*w*r),l.addScaledVector(E[6],.743125*r*r-.247708),l.addScaledVector(E[7],.858086*f*r),l.addScaledVector(E[8],.429043*(f*f-w*w)),l},add:function(r){for(var l=0;9>l;l++)this.coefficients[l].add(r.coefficients[l]);return this},addScaledSH:function(r,l){for(var f=0;9>f;f++)this.coefficients[f].addScaledVector(r.coefficients[f],l);return this},scale:function(r){for(var l=0;9>l;l++)this.coefficients[l].multiplyScalar(r);return this},lerp:function(r,l){for(var f=0;9>f;f++)this.coefficients[f].lerp(r.coefficients[f],l);return this},equals:function(r){for(var l=0;9>l;l++)if(!this.coefficients[l].equals(r.coefficients[l]))return!1;return!0},copy:function(r){return this.set(r.coefficients)},clone:function(){return new this.constructor().copy(this)},fromArray:function(r,l){l===void 0&&(l=0);for(var f=this.coefficients,w=0;9>w;w++)f[w].fromArray(r,l+3*w);return this},toArray:function(r,l){r===void 0&&(r=[]),l===void 0&&(l=0);for(var f=this.coefficients,w=0;9>w;w++)f[w].toArray(r,l+3*w);return r}}),Pe(WM,{getBasisAt:function(r,l){var f=r.x,w=r.y;r=r.z,l[0]=.282095,l[1]=.488603*w,l[2]=.488603*r,l[3]=.488603*f,l[4]=1.092548*f*w,l[5]=1.092548*w*r,l[6]=.315392*(3*r*r-1),l[7]=1.092548*f*r,l[8]=.546274*(f*f-w*w)}}),pc.prototype=Pe(Le(zo.prototype),{constructor:pc,isLightProbe:!0,copy:function(r){return zo.prototype.copy.call(this,r),this.sh.copy(r.sh),this},fromJSON:function(r){return this.intensity=r.intensity,this.sh.fromArray(r.sh),this},toJSON:function(r){return r=zo.prototype.toJSON.call(this,r),r.object.sh=this.sh.toArray(),r}}),XM.prototype=Pe(Le(fo.prototype),{constructor:XM,load:function(r,l,f,w){var E=this,O=new dc(E.manager);O.setPath(E.path),O.load(r,function(B){try{l(E.parse(JSON.parse(B)))}catch(Y){w?w(Y):console.error(Y),E.manager.itemError(r)}},f,w)},parse:function(r){function l(Y){return f[Y]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",Y),f[Y]}var f=this.textures,w=new MW[r.type];if(r.uuid!==void 0&&(w.uuid=r.uuid),r.name!==void 0&&(w.name=r.name),r.color!==void 0&&w.color.setHex(r.color),r.roughness!==void 0&&(w.roughness=r.roughness),r.metalness!==void 0&&(w.metalness=r.metalness),r.sheen!==void 0&&(w.sheen=new He().setHex(r.sheen)),r.emissive!==void 0&&w.emissive.setHex(r.emissive),r.specular!==void 0&&w.specular.setHex(r.specular),r.shininess!==void 0&&(w.shininess=r.shininess),r.clearcoat!==void 0&&(w.clearcoat=r.clearcoat),r.clearcoatRoughness!==void 0&&(w.clearcoatRoughness=r.clearcoatRoughness),r.fog!==void 0&&(w.fog=r.fog),r.flatShading!==void 0&&(w.flatShading=r.flatShading),r.blending!==void 0&&(w.blending=r.blending),r.combine!==void 0&&(w.combine=r.combine),r.side!==void 0&&(w.side=r.side),r.opacity!==void 0&&(w.opacity=r.opacity),r.transparent!==void 0&&(w.transparent=r.transparent),r.alphaTest!==void 0&&(w.alphaTest=r.alphaTest),r.depthTest!==void 0&&(w.depthTest=r.depthTest),r.depthWrite!==void 0&&(w.depthWrite=r.depthWrite),r.colorWrite!==void 0&&(w.colorWrite=r.colorWrite),r.stencilWrite!==void 0&&(w.stencilWrite=r.stencilWrite),r.stencilWriteMask!==void 0&&(w.stencilWriteMask=r.stencilWriteMask),r.stencilFunc!==void 0&&(w.stencilFunc=r.stencilFunc),r.stencilRef!==void 0&&(w.stencilRef=r.stencilRef),r.stencilFuncMask!==void 0&&(w.stencilFuncMask=r.stencilFuncMask),r.stencilFail!==void 0&&(w.stencilFail=r.stencilFail),r.stencilZFail!==void 0&&(w.stencilZFail=r.stencilZFail),r.stencilZPass!==void 0&&(w.stencilZPass=r.stencilZPass),r.wireframe!==void 0&&(w.wireframe=r.wireframe),r.wireframeLinewidth!==void 0&&(w.wireframeLinewidth=r.wireframeLinewidth),r.wireframeLinecap!==void 0&&(w.wireframeLinecap=r.wireframeLinecap),r.wireframeLinejoin!==void 0&&(w.wireframeLinejoin=r.wireframeLinejoin),r.rotation!==void 0&&(w.rotation=r.rotation),r.linewidth!==1&&(w.linewidth=r.linewidth),r.dashSize!==void 0&&(w.dashSize=r.dashSize),r.gapSize!==void 0&&(w.gapSize=r.gapSize),r.scale!==void 0&&(w.scale=r.scale),r.polygonOffset!==void 0&&(w.polygonOffset=r.polygonOffset),r.polygonOffsetFactor!==void 0&&(w.polygonOffsetFactor=r.polygonOffsetFactor),r.polygonOffsetUnits!==void 0&&(w.polygonOffsetUnits=r.polygonOffsetUnits),r.skinning!==void 0&&(w.skinning=r.skinning),r.morphTargets!==void 0&&(w.morphTargets=r.morphTargets),r.morphNormals!==void 0&&(w.morphNormals=r.morphNormals),r.dithering!==void 0&&(w.dithering=r.dithering),r.vertexTangents!==void 0&&(w.vertexTangents=r.vertexTangents),r.visible!==void 0&&(w.visible=r.visible),r.toneMapped!==void 0&&(w.toneMapped=r.toneMapped),r.userData!==void 0&&(w.userData=r.userData),r.vertexColors!==void 0&&(w.vertexColors=typeof r.vertexColors=="number"?0<r.vertexColors:r.vertexColors),r.uniforms!==void 0)for(var E in r.uniforms){var O=r.uniforms[E];switch(w.uniforms[E]={},O.type){case"t":w.uniforms[E].value=l(O.value);break;case"c":w.uniforms[E].value=new He().setHex(O.value);break;case"v2":w.uniforms[E].value=new v().fromArray(O.value);break;case"v3":w.uniforms[E].value=new I().fromArray(O.value);break;case"v4":w.uniforms[E].value=new y().fromArray(O.value);break;case"m3":w.uniforms[E].value=new g().fromArray(O.value);case"m4":w.uniforms[E].value=new b().fromArray(O.value);break;default:w.uniforms[E].value=O.value}}if(r.defines!==void 0&&(w.defines=r.defines),r.vertexShader!==void 0&&(w.vertexShader=r.vertexShader),r.fragmentShader!==void 0&&(w.fragmentShader=r.fragmentShader),r.extensions!==void 0)for(var B in r.extensions)w.extensions[B]=r.extensions[B];return r.shading!==void 0&&(w.flatShading=r.shading===1),r.size!==void 0&&(w.size=r.size),r.sizeAttenuation!==void 0&&(w.sizeAttenuation=r.sizeAttenuation),r.map!==void 0&&(w.map=l(r.map)),r.matcap!==void 0&&(w.matcap=l(r.matcap)),r.alphaMap!==void 0&&(w.alphaMap=l(r.alphaMap)),r.bumpMap!==void 0&&(w.bumpMap=l(r.bumpMap)),r.bumpScale!==void 0&&(w.bumpScale=r.bumpScale),r.normalMap!==void 0&&(w.normalMap=l(r.normalMap)),r.normalMapType!==void 0&&(w.normalMapType=r.normalMapType),r.normalScale!==void 0&&(E=r.normalScale,Array.isArray(E)===!1&&(E=[E,E]),w.normalScale=new v().fromArray(E)),r.displacementMap!==void 0&&(w.displacementMap=l(r.displacementMap)),r.displacementScale!==void 0&&(w.displacementScale=r.displacementScale),r.displacementBias!==void 0&&(w.displacementBias=r.displacementBias),r.roughnessMap!==void 0&&(w.roughnessMap=l(r.roughnessMap)),r.metalnessMap!==void 0&&(w.metalnessMap=l(r.metalnessMap)),r.emissiveMap!==void 0&&(w.emissiveMap=l(r.emissiveMap)),r.emissiveIntensity!==void 0&&(w.emissiveIntensity=r.emissiveIntensity),r.specularMap!==void 0&&(w.specularMap=l(r.specularMap)),r.envMap!==void 0&&(w.envMap=l(r.envMap)),r.envMapIntensity!==void 0&&(w.envMapIntensity=r.envMapIntensity),r.reflectivity!==void 0&&(w.reflectivity=r.reflectivity),r.refractionRatio!==void 0&&(w.refractionRatio=r.refractionRatio),r.lightMap!==void 0&&(w.lightMap=l(r.lightMap)),r.lightMapIntensity!==void 0&&(w.lightMapIntensity=r.lightMapIntensity),r.aoMap!==void 0&&(w.aoMap=l(r.aoMap)),r.aoMapIntensity!==void 0&&(w.aoMapIntensity=r.aoMapIntensity),r.gradientMap!==void 0&&(w.gradientMap=l(r.gradientMap)),r.clearcoatMap!==void 0&&(w.clearcoatMap=l(r.clearcoatMap)),r.clearcoatRoughnessMap!==void 0&&(w.clearcoatRoughnessMap=l(r.clearcoatRoughnessMap)),r.clearcoatNormalMap!==void 0&&(w.clearcoatNormalMap=l(r.clearcoatNormalMap)),r.clearcoatNormalScale!==void 0&&(w.clearcoatNormalScale=new v().fromArray(r.clearcoatNormalScale)),w},setTextures:function(r){return this.textures=r,this}});var hL={decodeText:function(r){if(typeof TextDecoder<"u")return new TextDecoder().decode(r);for(var l="",f=0,w=r.length;f<w;f++)l+=String.fromCharCode(r[f]);try{return decodeURIComponent(escape(l))}catch{return l}},extractUrlBase:function(r){var l=r.lastIndexOf("/");return l===-1?"./":r.substr(0,l+1)}};NA.prototype=Pe(Le(Fe.prototype),{constructor:NA,isInstancedBufferGeometry:!0,copy:function(r){return Fe.prototype.copy.call(this,r),this.instanceCount=r.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var r=Fe.prototype.toJSON.call(this);return r.instanceCount=this.instanceCount,r.isInstancedBufferGeometry=!0,r}}),YM.prototype=Pe(Le(Nt.prototype),{constructor:YM,isInstancedBufferAttribute:!0,copy:function(r){return Nt.prototype.copy.call(this,r),this.meshPerAttribute=r.meshPerAttribute,this},toJSON:function(){var r=Nt.prototype.toJSON.call(this);return r.meshPerAttribute=this.meshPerAttribute,r.isInstancedBufferAttribute=!0,r}}),ZM.prototype=Pe(Le(fo.prototype),{constructor:ZM,load:function(r,l,f,w){var E=this,O=new dc(E.manager);O.setPath(E.path),O.load(r,function(B){try{l(E.parse(JSON.parse(B)))}catch(Y){w?w(Y):console.error(Y),E.manager.itemError(r)}},f,w)},parse:function(r){var l=r.isInstancedBufferGeometry?new NA:new Fe,f=r.data.index;if(f!==void 0){var w=new fL[f.type](f.array);l.setIndex(new Nt(w,1))}f=r.data.attributes;for(var E in f){var O=f[E];w=new fL[O.type](O.array),w=new(O.isInstancedBufferAttribute?YM:Nt)(w,O.itemSize,O.normalized),O.name!==void 0&&(w.name=O.name),l.setAttribute(E,w)}var B=r.data.morphAttributes;if(B)for(E in B){var Y=B[E],K=[];f=0;for(var $=Y.length;f<$;f++)O=Y[f],w=new fL[O.type](O.array),w=new Nt(w,O.itemSize,O.normalized),O.name!==void 0&&(w.name=O.name),K.push(w);l.morphAttributes[E]=K}if(r.data.morphTargetsRelative&&(l.morphTargetsRelative=!0),E=r.data.groups||r.data.drawcalls||r.data.offsets,E!==void 0)for(f=0,O=E.length;f!==O;++f)w=E[f],l.addGroup(w.start,w.count,w.materialIndex);return f=r.data.boundingSphere,f!==void 0&&(E=new I,f.center!==void 0&&E.fromArray(f.center),l.boundingSphere=new we(E,f.radius)),r.name&&(l.name=r.name),r.userData&&(l.userData=r.userData),l}});var fL={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray<"u"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};qM.prototype=Pe(Le(fo.prototype),{constructor:qM,load:function(r,l,f,w){var E=this,O=this.path===""?hL.extractUrlBase(r):this.path;this.resourcePath=this.resourcePath||O,O=new dc(E.manager),O.setPath(this.path),O.load(r,function(B){var Y=null;try{Y=JSON.parse(B)}catch(K){w!==void 0&&w(K),console.error("THREE:ObjectLoader: Can't parse "+r+".",K.message);return}B=Y.metadata,B===void 0||B.type===void 0||B.type.toLowerCase()==="geometry"?console.error("THREE.ObjectLoader: Can't load "+r):E.parse(Y,l)},f,w)},parse:function(r,l){var f=this.parseShape(r.shapes);f=this.parseGeometries(r.geometries,f);var w=this.parseImages(r.images,function(){l!==void 0&&l(E)});w=this.parseTextures(r.textures,w),w=this.parseMaterials(r.materials,w);var E=this.parseObject(r.object,f,w);return r.animations&&(E.animations=this.parseAnimations(r.animations)),r.images!==void 0&&r.images.length!==0||l===void 0||l(E),E},parseShape:function(r){var l={};if(r!==void 0)for(var f=0,w=r.length;f<w;f++){var E=new nm().fromJSON(r[f]);l[E.uuid]=E}return l},parseGeometries:function(r,l){var f={};if(r!==void 0)for(var w=new ZM,E=0,O=r.length;E<O;E++){var B=r[E];switch(B.type){case"PlaneGeometry":case"PlaneBufferGeometry":var Y=new Ml[B.type](B.width,B.height,B.widthSegments,B.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":Y=new Ml[B.type](B.width,B.height,B.depth,B.widthSegments,B.heightSegments,B.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":Y=new Ml[B.type](B.radius,B.segments,B.thetaStart,B.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":Y=new Ml[B.type](B.radiusTop,B.radiusBottom,B.height,B.radialSegments,B.heightSegments,B.openEnded,B.thetaStart,B.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":Y=new Ml[B.type](B.radius,B.height,B.radialSegments,B.heightSegments,B.openEnded,B.thetaStart,B.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":Y=new Ml[B.type](B.radius,B.widthSegments,B.heightSegments,B.phiStart,B.phiLength,B.thetaStart,B.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":Y=new Ml[B.type](B.radius,B.detail);break;case"RingGeometry":case"RingBufferGeometry":Y=new Ml[B.type](B.innerRadius,B.outerRadius,B.thetaSegments,B.phiSegments,B.thetaStart,B.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":Y=new Ml[B.type](B.radius,B.tube,B.radialSegments,B.tubularSegments,B.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":Y=new Ml[B.type](B.radius,B.tube,B.tubularSegments,B.radialSegments,B.p,B.q);break;case"TubeGeometry":case"TubeBufferGeometry":Y=new Ml[B.type](new cL[B.path.type]().fromJSON(B.path),B.tubularSegments,B.radius,B.radialSegments,B.closed);break;case"LatheGeometry":case"LatheBufferGeometry":Y=new Ml[B.type](B.points,B.segments,B.phiStart,B.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":Y=new Ml[B.type](B.vertices,B.indices,B.radius,B.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":Y=[];for(var K=0,$=B.shapes.length;K<$;K++){var pe=l[B.shapes[K]];Y.push(pe)}Y=new Ml[B.type](Y,B.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(Y=[],K=0,$=B.shapes.length;K<$;K++)pe=l[B.shapes[K]],Y.push(pe);K=B.options.extrudePath,K!==void 0&&(B.options.extrudePath=new cL[K.type]().fromJSON(K)),Y=new Ml[B.type](Y,B.options);break;case"BufferGeometry":case"InstancedBufferGeometry":Y=w.parse(B);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+B.type+'"');continue}Y.uuid=B.uuid,B.name!==void 0&&(Y.name=B.name),Y.isBufferGeometry===!0&&B.userData!==void 0&&(Y.userData=B.userData),f[B.uuid]=Y}return f},parseMaterials:function(r,l){var f={},w={};if(r!==void 0){var E=new XM;E.setTextures(l),l=0;for(var O=r.length;l<O;l++){var B=r[l];if(B.type==="MultiMaterial"){for(var Y=[],K=0;K<B.materials.length;K++){var $=B.materials[K];f[$.uuid]===void 0&&(f[$.uuid]=E.parse($)),Y.push(f[$.uuid])}w[B.uuid]=Y}else f[B.uuid]===void 0&&(f[B.uuid]=E.parse(B)),w[B.uuid]=f[B.uuid]}}return w},parseAnimations:function(r){for(var l=[],f=0;f<r.length;f++){var w=r[f],E=fc.parse(w);w.uuid!==void 0&&(E.uuid=w.uuid),l.push(E)}return l},parseImages:function(r,l){function f(xe){return w.manager.itemStart(xe),O.load(xe,function(){w.manager.itemEnd(xe)},void 0,function(){w.manager.itemError(xe),w.manager.itemEnd(xe)})}var w=this,E={};if(r!==void 0&&0<r.length){l=new dR(l);var O=new By(l);O.setCrossOrigin(this.crossOrigin),l=0;for(var B=r.length;l<B;l++){var Y=r[l],K=Y.url;if(Array.isArray(K)){E[Y.uuid]=[];for(var $=0,pe=K.length;$<pe;$++){var fe=K[$];fe=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(fe)?fe:w.resourcePath+fe,E[Y.uuid].push(f(fe))}}else fe=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Y.url)?Y.url:w.resourcePath+Y.url,E[Y.uuid]=f(fe)}}return E},parseTextures:function(r,l){function f(K,$){return typeof K=="number"?K:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",K),$[K])}var w={};if(r!==void 0)for(var E=0,O=r.length;E<O;E++){var B=r[E];B.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',B.uuid),l[B.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",B.image);var Y=Array.isArray(l[B.image])?new cc(l[B.image]):new A(l[B.image]);Y.needsUpdate=!0,Y.uuid=B.uuid,B.name!==void 0&&(Y.name=B.name),B.mapping!==void 0&&(Y.mapping=f(B.mapping,SW)),B.offset!==void 0&&Y.offset.fromArray(B.offset),B.repeat!==void 0&&Y.repeat.fromArray(B.repeat),B.center!==void 0&&Y.center.fromArray(B.center),B.rotation!==void 0&&(Y.rotation=B.rotation),B.wrap!==void 0&&(Y.wrapS=f(B.wrap[0],mF),Y.wrapT=f(B.wrap[1],mF)),B.format!==void 0&&(Y.format=B.format),B.type!==void 0&&(Y.type=B.type),B.encoding!==void 0&&(Y.encoding=B.encoding),B.minFilter!==void 0&&(Y.minFilter=f(B.minFilter,gF)),B.magFilter!==void 0&&(Y.magFilter=f(B.magFilter,gF)),B.anisotropy!==void 0&&(Y.anisotropy=B.anisotropy),B.flipY!==void 0&&(Y.flipY=B.flipY),B.premultiplyAlpha!==void 0&&(Y.premultiplyAlpha=B.premultiplyAlpha),B.unpackAlignment!==void 0&&(Y.unpackAlignment=B.unpackAlignment),w[B.uuid]=Y}return w},parseObject:function(r,l,f){function w($){return l[$]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",$),l[$]}function E($){if($!==void 0){if(Array.isArray($)){for(var pe=[],fe=0,xe=$.length;fe<xe;fe++){var ye=$[fe];f[ye]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",ye),pe.push(f[ye])}return pe}return f[$]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",$),f[$]}}switch(r.type){case"Scene":var O=new re;r.background!==void 0&&kp(r.background)&&(O.background=new He(r.background)),r.fog!==void 0&&(r.fog.type==="Fog"?O.fog=new xM(r.fog.color,r.fog.near,r.fog.far):r.fog.type==="FogExp2"&&(O.fog=new yM(r.fog.color,r.fog.density)));break;case"PerspectiveCamera":O=new Jt(r.fov,r.aspect,r.near,r.far),r.focus!==void 0&&(O.focus=r.focus),r.zoom!==void 0&&(O.zoom=r.zoom),r.filmGauge!==void 0&&(O.filmGauge=r.filmGauge),r.filmOffset!==void 0&&(O.filmOffset=r.filmOffset),r.view!==void 0&&(O.view=Pe({},r.view));break;case"OrthographicCamera":O=new Uy(r.left,r.right,r.top,r.bottom,r.near,r.far),r.zoom!==void 0&&(O.zoom=r.zoom),r.view!==void 0&&(O.view=Pe({},r.view));break;case"AmbientLight":O=new GM(r.color,r.intensity);break;case"DirectionalLight":O=new jM(r.color,r.intensity);break;case"PointLight":O=new kM(r.color,r.intensity,r.distance,r.decay);break;case"RectAreaLight":O=new VM(r.color,r.intensity,r.width,r.height);break;case"SpotLight":O=new UM(r.color,r.intensity,r.distance,r.angle,r.penumbra,r.decay);break;case"HemisphereLight":O=new BM(r.color,r.groundColor,r.intensity);break;case"LightProbe":O=new pc().fromJSON(r);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":O=w(r.geometry);var B=E(r.material);O=new Qe(O,B);break;case"InstancedMesh":O=w(r.geometry),B=E(r.material);var Y=r.instanceMatrix;O=new _M(O,B,r.count),O.instanceMatrix=new Nt(new Float32Array(Y.array),16);break;case"LOD":O=new cA;break;case"Line":O=new Cu(w(r.geometry),E(r.material),r.mode);break;case"LineLoop":O=new MM(w(r.geometry),E(r.material));break;case"LineSegments":O=new ca(w(r.geometry),E(r.material));break;case"PointCloud":case"Points":O=new Ay(w(r.geometry),E(r.material));break;case"Sprite":O=new uA(E(r.material));break;case"Group":O=new xy;break;default:O=new G}if(O.uuid=r.uuid,r.name!==void 0&&(O.name=r.name),r.matrix!==void 0?(O.matrix.fromArray(r.matrix),r.matrixAutoUpdate!==void 0&&(O.matrixAutoUpdate=r.matrixAutoUpdate),O.matrixAutoUpdate&&O.matrix.decompose(O.position,O.quaternion,O.scale)):(r.position!==void 0&&O.position.fromArray(r.position),r.rotation!==void 0&&O.rotation.fromArray(r.rotation),r.quaternion!==void 0&&O.quaternion.fromArray(r.quaternion),r.scale!==void 0&&O.scale.fromArray(r.scale)),r.castShadow!==void 0&&(O.castShadow=r.castShadow),r.receiveShadow!==void 0&&(O.receiveShadow=r.receiveShadow),r.shadow&&(r.shadow.bias!==void 0&&(O.shadow.bias=r.shadow.bias),r.shadow.radius!==void 0&&(O.shadow.radius=r.shadow.radius),r.shadow.mapSize!==void 0&&O.shadow.mapSize.fromArray(r.shadow.mapSize),r.shadow.camera!==void 0&&(O.shadow.camera=this.parseObject(r.shadow.camera))),r.visible!==void 0&&(O.visible=r.visible),r.frustumCulled!==void 0&&(O.frustumCulled=r.frustumCulled),r.renderOrder!==void 0&&(O.renderOrder=r.renderOrder),r.userData!==void 0&&(O.userData=r.userData),r.layers!==void 0&&(O.layers.mask=r.layers),r.children!==void 0)for(Y=r.children,B=0;B<Y.length;B++)O.add(this.parseObject(Y[B],l,f));if(r.type==="LOD")for(r.autoUpdate!==void 0&&(O.autoUpdate=r.autoUpdate),r=r.levels,Y=0;Y<r.length;Y++){B=r[Y];var K=O.getObjectByProperty("uuid",B.object);K!==void 0&&O.addLevel(K,B.distance)}return O}});var SW={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},mF={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},gF={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:1006,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008};yR.prototype=Pe(Le(fo.prototype),{constructor:yR,setOptions:function(r){return this.options=r,this},load:function(r,l,f,w){r===void 0&&(r=""),this.path!==void 0&&(r=this.path+r),r=this.manager.resolveURL(r);var E=this,O=Sv.get(r);if(O!==void 0)return E.manager.itemStart(r),setTimeout(function(){l&&l(O),E.manager.itemEnd(r)},0),O;fetch(r).then(function(B){return B.blob()}).then(function(B){return E.options===void 0?createImageBitmap(B):createImageBitmap(B,E.options)}).then(function(B){Sv.add(r,B),l&&l(B),E.manager.itemEnd(r)}).catch(function(B){w&&w(B),E.manager.itemError(r),E.manager.itemEnd(r)}),E.manager.itemStart(r)}}),Pe(xR.prototype,{moveTo:function(r,l){return this.currentPath=new hh,this.subPaths.push(this.currentPath),this.currentPath.moveTo(r,l),this},lineTo:function(r,l){return this.currentPath.lineTo(r,l),this},quadraticCurveTo:function(r,l,f,w){return this.currentPath.quadraticCurveTo(r,l,f,w),this},bezierCurveTo:function(r,l,f,w,E,O){return this.currentPath.bezierCurveTo(r,l,f,w,E,O),this},splineThru:function(r){return this.currentPath.splineThru(r),this},toShapes:function(r,l){function f(it){for(var xt=[],pt=0,Lt=it.length;pt<Lt;pt++){var Ct=it[pt],Bt=new nm;Bt.curves=Ct.curves,xt.push(Bt)}return xt}function w(it,xt){for(var pt=xt.length,Lt=!1,Ct=pt-1,Bt=0;Bt<pt;Ct=Bt++){var yt=xt[Ct],Kt=xt[Bt],cr=Kt.x-yt.x,zt=Kt.y-yt.y;if(Math.abs(zt)>Bo){if(0>zt&&(yt=xt[Bt],cr=-cr,Kt=xt[Ct],zt=-zt),!(it.y<yt.y||it.y>Kt.y))if(it.y===yt.y){if(it.x===yt.x)return!0}else{if(Ct=zt*(it.x-yt.x)-cr*(it.y-yt.y),Ct===0)return!0;0>Ct||(Lt=!Lt)}}else if(it.y===yt.y&&(Kt.x<=it.x&&it.x<=yt.x||yt.x<=it.x&&it.x<=Kt.x))return!0}return Lt}var E=Ld.isClockWise,O=this.subPaths;if(O.length===0)return[];if(l===!0)return f(O);if(l=[],O.length===1){var B=O[0],Y=new nm;return Y.curves=B.curves,l.push(Y),l}var K=!E(O[0].getPoints());K=r?!K:K,Y=[];var $=[],pe=[],fe=0;$[fe]=void 0,pe[fe]=[];for(var xe=0,ye=O.length;xe<ye;xe++){B=O[xe];var Me=B.getPoints(),Oe=E(Me);(Oe=r?!Oe:Oe)?(!K&&$[fe]&&fe++,$[fe]={s:new nm,p:Me},$[fe].s.curves=B.curves,K&&fe++,pe[fe]=[]):pe[fe].push({h:B,p:Me[0]})}if(!$[0])return f(O);if(1<$.length){for(xe=!1,r=[],E=0,O=$.length;E<O;E++)Y[E]=[];for(E=0,O=$.length;E<O;E++)for(B=pe[E],Oe=0;Oe<B.length;Oe++){for(K=B[Oe],fe=!0,Me=0;Me<$.length;Me++)w(K.p,$[Me].p)&&(E!==Me&&r.push({froms:E,tos:Me,hole:Oe}),fe?(fe=!1,Y[Me].push(K)):xe=!0);fe&&Y[E].push(K)}0<r.length&&(xe||(pe=Y))}for(xe=0,E=$.length;xe<E;xe++)for(Y=$[xe].s,l.push(Y),r=pe[xe],O=0,B=r.length;O<B;O++)Y.holes.push(r[O].h);return l}}),Pe(AR.prototype,{isFont:!0,generateShapes:function(r,l){l===void 0&&(l=100);var f=[],w=l;l=this.data;var E=U0?U0(r):String(r).split("");w/=l.resolution;var O=(l.boundingBox.yMax-l.boundingBox.yMin+l.underlineThickness)*w;r=[];for(var B=0,Y=0,K=0;K<E.length;K++){var $=E[K];if($===`
`)B=0,Y-=O;else{var pe=$;$=w;var fe=B,xe=Y,ye=l,Me=ye.glyphs[pe]||ye.glyphs["?"];if(Me){if(pe=new xR,Me.o){ye=Me._cachedOutline||(Me._cachedOutline=Me.o.split(" "));for(var Oe=0,it=ye.length;Oe<it;)switch(ye[Oe++]){case"m":var xt=ye[Oe++]*$+fe,pt=ye[Oe++]*$+xe;pe.moveTo(xt,pt);break;case"l":xt=ye[Oe++]*$+fe,pt=ye[Oe++]*$+xe,pe.lineTo(xt,pt);break;case"q":var Lt=ye[Oe++]*$+fe,Ct=ye[Oe++]*$+xe,Bt=ye[Oe++]*$+fe,yt=ye[Oe++]*$+xe;pe.quadraticCurveTo(Bt,yt,Lt,Ct);break;case"b":Lt=ye[Oe++]*$+fe,Ct=ye[Oe++]*$+xe,Bt=ye[Oe++]*$+fe,yt=ye[Oe++]*$+xe,xt=ye[Oe++]*$+fe,pt=ye[Oe++]*$+xe,pe.bezierCurveTo(Bt,yt,xt,pt,Lt,Ct)}}$={offsetX:Me.ha*$,path:pe}}else console.error('THREE.Font: character "'+pe+'" does not exists in font family '+ye.familyName+"."),$=void 0;B+=$.offsetX,r.push($.path)}}for(l=0,E=r.length;l<E;l++)Array.prototype.push.apply(f,r[l].toShapes());return f}}),wR.prototype=Pe(Le(fo.prototype),{constructor:wR,load:function(r,l,f,w){var E=this,O=new dc(this.manager);O.setPath(this.path),O.load(r,function(B){try{var Y=JSON.parse(B)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),Y=JSON.parse(B.substring(65,B.length-2))}B=E.parse(Y),l&&l(B)},f,w)},parse:function(r){return new AR(r)}});var MS,dL={getContext:function(){return MS===void 0&&(MS=new(window.AudioContext||window.webkitAudioContext)),MS},setContext:function(r){MS=r}};KM.prototype=Pe(Le(fo.prototype),{constructor:KM,load:function(r,l,f,w){var E=this,O=new dc(E.manager);O.setResponseType("arraybuffer"),O.setPath(E.path),O.load(r,function(B){try{var Y=B.slice(0);dL.getContext().decodeAudioData(Y,function(K){l(K)})}catch(K){w?w(K):console.error(K),E.manager.itemError(r)}},f,w)}}),CR.prototype=Pe(Le(pc.prototype),{constructor:CR,isHemisphereLightProbe:!0,copy:function(r){return pc.prototype.copy.call(this,r),this},toJSON:function(r){return pc.prototype.toJSON.call(this,r)}}),_R.prototype=Pe(Le(pc.prototype),{constructor:_R,isAmbientLightProbe:!0,copy:function(r){return pc.prototype.copy.call(this,r),this},toJSON:function(r){return pc.prototype.toJSON.call(this,r)}});var vF=new b,yF=new b;Pe(M6.prototype,{update:function(r){var l=this._cache;if(l.focus!==r.focus||l.fov!==r.fov||l.aspect!==r.aspect*this.aspect||l.near!==r.near||l.far!==r.far||l.zoom!==r.zoom||l.eyeSep!==this.eyeSep){l.focus=r.focus,l.fov=r.fov,l.aspect=r.aspect*this.aspect,l.near=r.near,l.far=r.far,l.zoom=r.zoom,l.eyeSep=this.eyeSep;var f=r.projectionMatrix.clone(),w=l.eyeSep/2,E=w*l.near/l.focus,O=l.near*Math.tan(ci.DEG2RAD*l.fov*.5)/l.zoom;yF.elements[12]=-w,vF.elements[12]=w,w=-O*l.aspect+E;var B=O*l.aspect+E;f.elements[0]=2*l.near/(B-w),f.elements[8]=(B+w)/(B-w),this.cameraL.projectionMatrix.copy(f),w=-O*l.aspect-E,B=O*l.aspect-E,f.elements[0]=2*l.near/(B-w),f.elements[8]=(B+w)/(B-w),this.cameraR.projectionMatrix.copy(f)}this.cameraL.matrixWorld.copy(r.matrixWorld).multiply(yF),this.cameraR.matrixWorld.copy(r.matrixWorld).multiply(vF)}}),Pe(MR.prototype,{start:function(){this.oldTime=this.startTime=(typeof performance>"u"?Date:performance).now(),this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.autoStart=this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var r=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var l=(typeof performance>"u"?Date:performance).now();r=(l-this.oldTime)/1e3,this.oldTime=l,this.elapsedTime+=r}return r}});var Tv=new I,xF=new X,TW=new I,Ev=new I;SR.prototype=Pe(Le(G.prototype),{constructor:SR,getInput:function(){return this.gain},removeFilter:function(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(r){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=r,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(r){return this.gain.gain.setTargetAtTime(r,this.context.currentTime,.01),this},updateMatrixWorld:function(r){G.prototype.updateMatrixWorld.call(this,r),r=this.context.listener;var l=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Tv,xF,TW),Ev.set(0,0,-1).applyQuaternion(xF),r.positionX){var f=this.context.currentTime+this.timeDelta;r.positionX.linearRampToValueAtTime(Tv.x,f),r.positionY.linearRampToValueAtTime(Tv.y,f),r.positionZ.linearRampToValueAtTime(Tv.z,f),r.forwardX.linearRampToValueAtTime(Ev.x,f),r.forwardY.linearRampToValueAtTime(Ev.y,f),r.forwardZ.linearRampToValueAtTime(Ev.z,f),r.upX.linearRampToValueAtTime(l.x,f),r.upY.linearRampToValueAtTime(l.y,f),r.upZ.linearRampToValueAtTime(l.z,f)}else r.setPosition(Tv.x,Tv.y,Tv.z),r.setOrientation(Ev.x,Ev.y,Ev.z,l.x,l.y,l.z)}}),ky.prototype=Pe(Le(G.prototype),{constructor:ky,getOutput:function(){return this.gain},setNodeSource:function(r){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=r,this.connect(),this},setMediaElementSource:function(r){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(r),this.connect(),this},setMediaStreamSource:function(r){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(r),this.connect(),this},setBuffer:function(r){return this.buffer=r,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(r){if(r===void 0&&(r=0),this.isPlaying===!0)console.warn("THREE.Audio: Audio is already playing.");else if(this.hasPlaybackControl===!1)console.warn("THREE.Audio: this Audio has no playback control.");else return this._startedAt=this.context.currentTime+r,r=this.context.createBufferSource(),r.buffer=this.buffer,r.loop=this.loop,r.loopStart=this.loopStart,r.loopEnd=this.loopEnd,r.onended=this.onEnded.bind(this),r.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=r,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()},pause:function(){if(this.hasPlaybackControl===!1)console.warn("THREE.Audio: this Audio has no playback control.");else return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress%=this.duration||this.buffer.duration),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this},stop:function(){if(this.hasPlaybackControl===!1)console.warn("THREE.Audio: this Audio has no playback control.");else return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var r=1,l=this.filters.length;r<l;r++)this.filters[r-1].connect(this.filters[r]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var r=1,l=this.filters.length;r<l;r++)this.filters[r-1].disconnect(this.filters[r]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(r){return r||(r=[]),this.isPlaying===!0?(this.disconnect(),this.filters=r,this.connect()):this.filters=r,this},setDetune:function(r){if(this.detune=r,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(r){return this.setFilters(r?[r]:[])},setPlaybackRate:function(r){if(this.hasPlaybackControl===!1)console.warn("THREE.Audio: this Audio has no playback control.");else return this.playbackRate=r,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(r){if(this.hasPlaybackControl===!1)console.warn("THREE.Audio: this Audio has no playback control.");else return this.loop=r,this.isPlaying===!0&&(this.source.loop=this.loop),this},setLoopStart:function(r){return this.loopStart=r,this},setLoopEnd:function(r){return this.loopEnd=r,this},getVolume:function(){return this.gain.gain.value},setVolume:function(r){return this.gain.gain.setTargetAtTime(r,this.context.currentTime,.01),this}});var Iv=new I,AF=new X,EW=new I,Rv=new I;TR.prototype=Pe(Le(ky.prototype),{constructor:TR,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(r){return this.panner.refDistance=r,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(r){return this.panner.rolloffFactor=r,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(r){return this.panner.distanceModel=r,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(r){return this.panner.maxDistance=r,this},setDirectionalCone:function(r,l,f){return this.panner.coneInnerAngle=r,this.panner.coneOuterAngle=l,this.panner.coneOuterGain=f,this},updateMatrixWorld:function(r){if(G.prototype.updateMatrixWorld.call(this,r),this.hasPlaybackControl!==!0||this.isPlaying!==!1)if(this.matrixWorld.decompose(Iv,AF,EW),Rv.set(0,0,1).applyQuaternion(AF),r=this.panner,r.positionX){var l=this.context.currentTime+this.listener.timeDelta;r.positionX.linearRampToValueAtTime(Iv.x,l),r.positionY.linearRampToValueAtTime(Iv.y,l),r.positionZ.linearRampToValueAtTime(Iv.z,l),r.orientationX.linearRampToValueAtTime(Rv.x,l),r.orientationY.linearRampToValueAtTime(Rv.y,l),r.orientationZ.linearRampToValueAtTime(Rv.z,l)}else r.setPosition(Iv.x,Iv.y,Iv.z),r.setOrientation(Rv.x,Rv.y,Rv.z)}}),Pe(ER.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var r=0,l=this.getFrequencyData(),f=0;f<l.length;f++)r+=l[f];return r/l.length}}),Pe(IR.prototype,{accumulate:function(r,l){var f=this.buffer,w=this.valueSize;r=r*w+w;var E=this.cumulativeWeight;if(E===0){for(E=0;E!==w;++E)f[r+E]=f[E];E=l}else E+=l,this._mixBufferRegion(f,r,0,l/E,w);this.cumulativeWeight=E},accumulateAdditive:function(r){var l=this.buffer,f=this.valueSize,w=f*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(l,w,0,r,f),this.cumulativeWeightAdditive+=r},apply:function(r){var l=this.valueSize,f=this.buffer;r=r*l+l;var w=this.cumulativeWeight,E=this.cumulativeWeightAdditive,O=this.binding;for(this.cumulativeWeightAdditive=this.cumulativeWeight=0,1>w&&this._mixBufferRegion(f,r,l*this._origIndex,1-w,l),0<E&&this._mixBufferRegionAdditive(f,r,this._addIndex*l,1,l),w=l,E=l+l;w!==E;++w)if(f[w]!==f[w+l]){O.setValue(f,r);break}},saveOriginalState:function(){var r=this.buffer,l=this.valueSize,f=l*this._origIndex;this.binding.getValue(r,f);for(var w=l;w!==f;++w)r[w]=r[f+w%l];this._setIdentity(),this.cumulativeWeightAdditive=this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_setAdditiveIdentityNumeric:function(){for(var r=this._addIndex*this.valueSize,l=r+this.valueSize;r<l;r++)this.buffer[r]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[4*this._addIndex+3]=1},_setAdditiveIdentityOther:function(){for(var r=this._origIndex*this.valueSize,l=this._addIndex*this.valueSize,f=0;f<this.valueSize;f++)this.buffer[l+f]=this.buffer[r+f]},_select:function(r,l,f,w,E){if(.5<=w)for(w=0;w!==E;++w)r[l+w]=r[f+w]},_slerp:function(r,l,f,w){X.slerpFlat(r,l,r,l,r,f,w)},_slerpAdditive:function(r,l,f,w,E){E*=this._workIndex,X.multiplyQuaternionsFlat(r,E,r,l,r,f),X.slerpFlat(r,l,r,l,r,E,w)},_lerp:function(r,l,f,w,E){for(var O=1-w,B=0;B!==E;++B){var Y=l+B;r[Y]=r[Y]*O+r[f+B]*w}},_lerpAdditive:function(r,l,f,w,E){for(var O=0;O!==E;++O){var B=l+O;r[B]+=r[f+O]*w}}});var IW=/[\[\]\.:\/]/g,RW="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",LW=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),PW=/(WCOD+)?/.source.replace("WCOD",RW),OW=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),DW=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),bW=new RegExp("^"+LW+PW+OW+DW+"$"),FW=["material","materials","bones"];Pe(S6.prototype,{getValue:function(r,l){this.bind();var f=this._bindings[this._targetGroup.nCachedObjects_];f!==void 0&&f.getValue(r,l)},setValue:function(r,l){for(var f=this._bindings,w=this._targetGroup.nCachedObjects_,E=f.length;w!==E;++w)f[w].setValue(r,l)},bind:function(){for(var r=this._bindings,l=this._targetGroup.nCachedObjects_,f=r.length;l!==f;++l)r[l].bind()},unbind:function(){for(var r=this._bindings,l=this._targetGroup.nCachedObjects_,f=r.length;l!==f;++l)r[l].unbind()}}),Pe(rl,{Composite:S6,create:function(r,l,f){return r&&r.isAnimationObjectGroup?new rl.Composite(r,l,f):new rl(r,l,f)},sanitizeNodeName:function(r){return r.replace(/\s/g,"_").replace(IW,"")},parseTrackName:function(r){var l=bW.exec(r);if(!l)throw Error("PropertyBinding: Cannot parse trackName: "+r);l={nodeName:l[2],objectName:l[3],objectIndex:l[4],propertyName:l[5],propertyIndex:l[6]};var f=l.nodeName&&l.nodeName.lastIndexOf(".");if(f!==void 0&&f!==-1){var w=l.nodeName.substring(f+1);FW.indexOf(w)!==-1&&(l.nodeName=l.nodeName.substring(0,f),l.objectName=w)}if(l.propertyName===null||l.propertyName.length===0)throw Error("PropertyBinding: can not parse propertyName from trackName: "+r);return l},findNode:function(r,l){if(!l||l===""||l==="."||l===-1||l===r.name||l===r.uuid)return r;if(r.skeleton){var f=r.skeleton.getBoneByName(l);if(f!==void 0)return f}return r.children&&(r=function w(E){for(var O=0;O<E.length;O++){var B=E[O];if(B.name===l||B.uuid===l||(B=w(B.children)))return B}return null}(r.children))?r:null}}),Pe(rl.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(r,l){r[l]=this.node[this.propertyName]},function(r,l){for(var f=this.resolvedProperty,w=0,E=f.length;w!==E;++w)r[l++]=f[w]},function(r,l){r[l]=this.resolvedProperty[this.propertyIndex]},function(r,l){this.resolvedProperty.toArray(r,l)}],SetterByBindingTypeAndVersioning:[[function(r,l){this.targetObject[this.propertyName]=r[l]},function(r,l){this.targetObject[this.propertyName]=r[l],this.targetObject.needsUpdate=!0},function(r,l){this.targetObject[this.propertyName]=r[l],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(r,l){for(var f=this.resolvedProperty,w=0,E=f.length;w!==E;++w)f[w]=r[l++]},function(r,l){for(var f=this.resolvedProperty,w=0,E=f.length;w!==E;++w)f[w]=r[l++];this.targetObject.needsUpdate=!0},function(r,l){for(var f=this.resolvedProperty,w=0,E=f.length;w!==E;++w)f[w]=r[l++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(r,l){this.resolvedProperty[this.propertyIndex]=r[l]},function(r,l){this.resolvedProperty[this.propertyIndex]=r[l],this.targetObject.needsUpdate=!0},function(r,l){this.resolvedProperty[this.propertyIndex]=r[l],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(r,l){this.resolvedProperty.fromArray(r,l)},function(r,l){this.resolvedProperty.fromArray(r,l),this.targetObject.needsUpdate=!0},function(r,l){this.resolvedProperty.fromArray(r,l),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(r,l){this.bind(),this.getValue(r,l)},setValue:function(r,l){this.bind(),this.setValue(r,l)},bind:function(){var r=this.node,l=this.parsedPath,f=l.objectName,w=l.propertyName,E=l.propertyIndex;if(r||(this.node=r=rl.findNode(this.rootNode,l.nodeName)||this.rootNode),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,r){if(f){var O=l.objectIndex;switch(f){case"materials":if(!r.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!r.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}r=r.material.materials;break;case"bones":if(!r.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}for(r=r.skeleton.bones,f=0;f<r.length;f++)if(r[f].name===O){O=f;break}break;default:if(r[f]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}r=r[f]}if(O!==void 0){if(r[O]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,r);return}r=r[O]}}if(O=r[w],O===void 0)console.error("THREE.PropertyBinding: Trying to update property for track: "+l.nodeName+"."+w+" but it wasn't found.",r);else{if(l=this.Versioning.None,this.targetObject=r,r.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:r.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate),f=this.BindingType.Direct,E!==void 0){if(w==="morphTargetInfluences"){if(!r.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(r.geometry.isBufferGeometry){if(!r.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}r.morphTargetDictionary[E]!==void 0&&(E=r.morphTargetDictionary[E])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}f=this.BindingType.ArrayElement,this.resolvedProperty=O,this.propertyIndex=E}else O.fromArray!==void 0&&O.toArray!==void 0?(f=this.BindingType.HasFromToArray,this.resolvedProperty=O):Array.isArray(O)?(f=this.BindingType.EntireArray,this.resolvedProperty=O):this.propertyName=w;this.getValue=this.GetterByBindingType[f],this.setValue=this.SetterByBindingTypeAndVersioning[f][l]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Pe(rl.prototype,{_getValue_unbound:rl.prototype.getValue,_setValue_unbound:rl.prototype.setValue}),Pe(T6.prototype,{isAnimationObjectGroup:!0,add:function(){for(var r=this._objects,l=r.length,f=this.nCachedObjects_,w=this._indicesByUUID,E=this._paths,O=this._parsedPaths,B=this._bindings,Y=B.length,K=void 0,$=0,pe=arguments.length;$!==pe;++$){var fe=arguments[$],xe=fe.uuid,ye=w[xe];if(ye===void 0){ye=l++,w[xe]=ye,r.push(fe),xe=0;for(var Me=Y;xe!==Me;++xe)B[xe].push(new rl(fe,E[xe],O[xe]))}else if(ye<f){K=r[ye];var Oe=--f;for(Me=r[Oe],w[Me.uuid]=ye,r[ye]=Me,w[xe]=Oe,r[Oe]=fe,xe=0,Me=Y;xe!==Me;++xe){var it=B[xe],xt=it[ye];it[ye]=it[Oe],xt===void 0&&(xt=new rl(fe,E[xe],O[xe])),it[Oe]=xt}}else r[ye]!==K&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f},remove:function(){for(var r=this._objects,l=this.nCachedObjects_,f=this._indicesByUUID,w=this._bindings,E=w.length,O=0,B=arguments.length;O!==B;++O){var Y=arguments[O],K=Y.uuid,$=f[K];if($!==void 0&&$>=l){var pe=l++,fe=r[pe];for(f[fe.uuid]=$,r[$]=fe,f[K]=pe,r[pe]=Y,Y=0,K=E;Y!==K;++Y){fe=w[Y];var xe=fe[$];fe[$]=fe[pe],fe[pe]=xe}}}this.nCachedObjects_=l},uncache:function(){for(var r=this._objects,l=r.length,f=this.nCachedObjects_,w=this._indicesByUUID,E=this._bindings,O=E.length,B=0,Y=arguments.length;B!==Y;++B){var K=arguments[B].uuid,$=w[K];if($!==void 0)if(delete w[K],$<f){K=--f;var pe=r[K],fe=--l,xe=r[fe];for(w[pe.uuid]=$,r[$]=pe,w[xe.uuid]=K,r[K]=xe,r.pop(),pe=0,xe=O;pe!==xe;++pe){var ye=E[pe],Me=ye[fe];ye[$]=ye[K],ye[K]=Me,ye.pop()}}else for(fe=--l,xe=r[fe],w[xe.uuid]=$,r[$]=xe,r.pop(),pe=0,xe=O;pe!==xe;++pe)ye=E[pe],ye[$]=ye[fe],ye.pop()}this.nCachedObjects_=f},subscribe_:function(r,l){var f=this._bindingsIndicesByPath,w=f[r],E=this._bindings;if(w!==void 0)return E[w];var O=this._paths,B=this._parsedPaths,Y=this._objects,K=this.nCachedObjects_,$=Array(Y.length);for(w=E.length,f[r]=w,O.push(r),B.push(l),E.push($),f=K,w=Y.length;f!==w;++f)$[f]=new rl(Y[f],r,l);return $},unsubscribe_:function(r){var l=this._bindingsIndicesByPath,f=l[r];if(f!==void 0){var w=this._paths,E=this._parsedPaths,O=this._bindings,B=O.length-1,Y=O[B];l[r[B]]=f,O[f]=Y,O.pop(),E[f]=E[B],E.pop(),w[f]=w[B],w.pop()}}}),Pe(E6.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(r){return this._startTime=r,this},setLoop:function(r,l){return this.loop=r,this.repetitions=l,this},setEffectiveWeight:function(r){return this.weight=r,this._effectiveWeight=this.enabled?r:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(r){return this._scheduleFading(r,0,1)},fadeOut:function(r){return this._scheduleFading(r,1,0)},crossFadeFrom:function(r,l,f){if(r.fadeOut(l),this.fadeIn(l),f){f=this._clip.duration;var w=r._clip.duration,E=f/w;r.warp(1,w/f,l),this.warp(E,1,l)}return this},crossFadeTo:function(r,l,f){return r.crossFadeFrom(this,l,f)},stopFading:function(){var r=this._weightInterpolant;return r!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(r)),this},setEffectiveTimeScale:function(r){return this.timeScale=r,this._effectiveTimeScale=this.paused?0:r,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(r){return this.timeScale=this._clip.duration/r,this.stopWarping()},syncWith:function(r){return this.time=r.time,this.timeScale=r.timeScale,this.stopWarping()},halt:function(r){return this.warp(this._effectiveTimeScale,0,r)},warp:function(r,l,f){var w=this._mixer,E=w.time,O=this._timeScaleInterpolant,B=this.timeScale;return O===null&&(this._timeScaleInterpolant=O=w._lendControlInterpolant()),w=O.parameterPositions,O=O.sampleValues,w[0]=E,w[1]=E+f,O[0]=r/B,O[1]=l/B,this},stopWarping:function(){var r=this._timeScaleInterpolant;return r!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(r)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(r,l,f,w){if(this.enabled){var E=this._startTime;if(E!==null){if(l=(r-E)*f,0>l||f===0)return;this._startTime=null,l*=f}if(l*=this._updateTimeScale(r),f=this._updateTime(l),r=this._updateWeight(r),0<r)switch(l=this._interpolants,E=this._propertyBindings,this.blendMode){case 2501:for(var O=0,B=l.length;O!==B;++O)l[O].evaluate(f),E[O].accumulateAdditive(r);break;default:for(O=0,B=l.length;O!==B;++O)l[O].evaluate(f),E[O].accumulate(w,r)}}else this._updateWeight(r)},_updateWeight:function(r){var l=0;if(this.enabled){l=this.weight;var f=this._weightInterpolant;if(f!==null){var w=f.evaluate(r)[0];l*=w,r>f.parameterPositions[1]&&(this.stopFading(),w===0&&(this.enabled=!1))}}return this._effectiveWeight=l},_updateTimeScale:function(r){var l=0;if(!this.paused){l=this.timeScale;var f=this._timeScaleInterpolant;if(f!==null){var w=f.evaluate(r)[0];l*=w,r>f.parameterPositions[1]&&(this.stopWarping(),l===0?this.paused=!0:this.timeScale=l)}}return this._effectiveTimeScale=l},_updateTime:function(r){var l=this.time+r,f=this._clip.duration,w=this.loop,E=this._loopCount,O=w===2202;if(r===0)return E===-1?l:O&&(E&1)===1?f-l:l;if(w===2200)e:{if(E===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1)),l>=f)l=f;else if(0>l)l=0;else{this.time=l;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=l,this._mixer.dispatchEvent({type:"finished",action:this,direction:0>r?-1:1})}else{if(E===-1&&(0<=r?(E=0,this._setEndings(!0,this.repetitions===0,O)):this._setEndings(this.repetitions===0,!0,O)),l>=f||0>l){w=Math.floor(l/f),l-=f*w,E+=Math.abs(w);var B=this.repetitions-E;0>=B?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=l=0<r?f:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<r?1:-1})):(B===1?(r=0>r,this._setEndings(r,!r,O)):this._setEndings(!1,!1,O),this._loopCount=E,this.time=l,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:w}))}else this.time=l;if(O&&(E&1)===1)return f-l}return l},_setEndings:function(r,l,f){var w=this._interpolantSettings;f?(w.endingStart=2401,w.endingEnd=2401):(w.endingStart=r?this.zeroSlopeAtStart?2401:2400:2402,w.endingEnd=l?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(r,l,f){var w=this._mixer,E=w.time,O=this._weightInterpolant;return O===null&&(this._weightInterpolant=O=w._lendControlInterpolant()),w=O.parameterPositions,O=O.sampleValues,w[0]=E,O[0]=l,w[1]=E+r,O[1]=f,this}}),RR.prototype=Pe(Le(c.prototype),{constructor:RR,_bindAction:function(r,l){var f=r._localRoot||this._root,w=r._clip.tracks,E=w.length,O=r._propertyBindings;r=r._interpolants;var B=f.uuid,Y=this._bindingsByRootAndName,K=Y[B];for(K===void 0&&(K={},Y[B]=K),Y=0;Y!==E;++Y){var $=w[Y],pe=$.name,fe=K[pe];if(fe===void 0){if(fe=O[Y],fe!==void 0){fe._cacheIndex===null&&(++fe.referenceCount,this._addInactiveBinding(fe,B,pe));continue}fe=new IR(rl.create(f,pe,l&&l._propertyBindings[Y].binding.parsedPath),$.ValueTypeName,$.getValueSize()),++fe.referenceCount,this._addInactiveBinding(fe,B,pe)}O[Y]=fe,r[Y].resultBuffer=fe.buffer}},_activateAction:function(r){if(!this._isActiveAction(r)){if(r._cacheIndex===null){var l=(r._localRoot||this._root).uuid,f=r._clip.uuid,w=this._actionsByClip[f];this._bindAction(r,w&&w.knownActions[0]),this._addInactiveAction(r,f,l)}for(l=r._propertyBindings,f=0,w=l.length;f!==w;++f){var E=l[f];E.useCount++===0&&(this._lendBinding(E),E.saveOriginalState())}this._lendAction(r)}},_deactivateAction:function(r){if(this._isActiveAction(r)){for(var l=r._propertyBindings,f=0,w=l.length;f!==w;++f){var E=l[f];--E.useCount===0&&(E.restoreOriginalState(),this._takeBackBinding(E))}this._takeBackAction(r)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var r=this;this.stats={actions:{get total(){return r._actions.length},get inUse(){return r._nActiveActions}},bindings:{get total(){return r._bindings.length},get inUse(){return r._nActiveBindings}},controlInterpolants:{get total(){return r._controlInterpolants.length},get inUse(){return r._nActiveControlInterpolants}}}},_isActiveAction:function(r){return r=r._cacheIndex,r!==null&&r<this._nActiveActions},_addInactiveAction:function(r,l,f){var w=this._actions,E=this._actionsByClip,O=E[l];O===void 0?(O={knownActions:[r],actionByRoot:{}},r._byClipCacheIndex=0,E[l]=O):(l=O.knownActions,r._byClipCacheIndex=l.length,l.push(r)),r._cacheIndex=w.length,w.push(r),O.actionByRoot[f]=r},_removeInactiveAction:function(r){var l=this._actions,f=l[l.length-1],w=r._cacheIndex;f._cacheIndex=w,l[w]=f,l.pop(),r._cacheIndex=null,l=r._clip.uuid,f=this._actionsByClip,w=f[l];var E=w.knownActions,O=E[E.length-1],B=r._byClipCacheIndex;O._byClipCacheIndex=B,E[B]=O,E.pop(),r._byClipCacheIndex=null,delete w.actionByRoot[(r._localRoot||this._root).uuid],E.length===0&&delete f[l],this._removeInactiveBindingsForAction(r)},_removeInactiveBindingsForAction:function(r){r=r._propertyBindings;for(var l=0,f=r.length;l!==f;++l){var w=r[l];--w.referenceCount===0&&this._removeInactiveBinding(w)}},_lendAction:function(r){var l=this._actions,f=r._cacheIndex,w=this._nActiveActions++,E=l[w];r._cacheIndex=w,l[w]=r,E._cacheIndex=f,l[f]=E},_takeBackAction:function(r){var l=this._actions,f=r._cacheIndex,w=--this._nActiveActions,E=l[w];r._cacheIndex=w,l[w]=r,E._cacheIndex=f,l[f]=E},_addInactiveBinding:function(r,l,f){var w=this._bindingsByRootAndName,E=w[l],O=this._bindings;E===void 0&&(E={},w[l]=E),E[f]=r,r._cacheIndex=O.length,O.push(r)},_removeInactiveBinding:function(r){var l=this._bindings,f=r.binding,w=f.rootNode.uuid;f=f.path;var E=this._bindingsByRootAndName,O=E[w],B=l[l.length-1];r=r._cacheIndex,B._cacheIndex=r,l[r]=B,l.pop(),delete O[f],Hi(O).length===0&&delete E[w]},_lendBinding:function(r){var l=this._bindings,f=r._cacheIndex,w=this._nActiveBindings++,E=l[w];r._cacheIndex=w,l[w]=r,E._cacheIndex=f,l[f]=E},_takeBackBinding:function(r){var l=this._bindings,f=r._cacheIndex,w=--this._nActiveBindings,E=l[w];r._cacheIndex=w,l[w]=r,E._cacheIndex=f,l[f]=E},_lendControlInterpolant:function(){var r=this._controlInterpolants,l=this._nActiveControlInterpolants++,f=r[l];return f===void 0&&(f=new OA(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),f.__cacheIndex=l,r[l]=f),f},_takeBackControlInterpolant:function(r){var l=this._controlInterpolants,f=r.__cacheIndex,w=--this._nActiveControlInterpolants,E=l[w];r.__cacheIndex=w,l[w]=r,E.__cacheIndex=f,l[f]=E},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(r,l,f){var w=l||this._root,E=w.uuid;w=typeof r=="string"?fc.findByName(w,r):r,r=w!==null?w.uuid:r;var O=this._actionsByClip[r],B=null;if(f===void 0&&(f=w!==null?w.blendMode:2500),O!==void 0){if(B=O.actionByRoot[E],B!==void 0&&B.blendMode===f)return B;B=O.knownActions[0],w===null&&(w=B._clip)}return w===null?null:(l=new E6(this,w,l,f),this._bindAction(l,B),this._addInactiveAction(l,r,E),l)},existingAction:function(r,l){var f=l||this._root;return l=f.uuid,f=typeof r=="string"?fc.findByName(f,r):r,r=this._actionsByClip[f?f.uuid:r],r!==void 0&&r.actionByRoot[l]||null},stopAllAction:function(){for(var r=this._actions,l=this._nActiveActions-1;0<=l;--l)r[l].stop();return this},update:function(r){r*=this.timeScale;for(var l=this._actions,f=this._nActiveActions,w=this.time+=r,E=lf(r),O=this._accuIndex^=1,B=0;B!==f;++B)l[B]._update(w,r,E,O);for(r=this._bindings,l=this._nActiveBindings,B=0;B!==l;++B)r[B].apply(O);return this},setTime:function(r){for(var l=this.time=0;l<this._actions.length;l++)this._actions[l].time=0;return this.update(r)},getRoot:function(){return this._root},uncacheClip:function(r){var l=this._actions;r=r.uuid;var f=this._actionsByClip,w=f[r];if(w!==void 0){w=w.knownActions;for(var E=0,O=w.length;E!==O;++E){var B=w[E];this._deactivateAction(B);var Y=B._cacheIndex,K=l[l.length-1];B._cacheIndex=null,B._byClipCacheIndex=null,K._cacheIndex=Y,l[Y]=K,l.pop(),this._removeInactiveBindingsForAction(B)}delete f[r]}},uncacheRoot:function(r){r=r.uuid;var l=this._actionsByClip;for(w in l){var f=l[w].actionByRoot[r];f!==void 0&&(this._deactivateAction(f),this._removeInactiveAction(f))}var w=this._bindingsByRootAndName[r];if(w!==void 0)for(var E in w)r=w[E],r.restoreOriginalState(),this._removeInactiveBinding(r)},uncacheAction:function(r,l){r=this.existingAction(r,l),r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}),JM.prototype.clone=function(){return new JM(this.value.clone===void 0?this.value:this.value.clone())},LR.prototype=Pe(Le(xd.prototype),{constructor:LR,isInstancedInterleavedBuffer:!0,copy:function(r){return xd.prototype.copy.call(this,r),this.meshPerAttribute=r.meshPerAttribute,this}}),Pe(PR.prototype,{set:function(r,l){this.ray.set(r,l)},setFromCamera:function(r,l){l&&l.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(l.matrixWorld),this.ray.direction.set(r.x,r.y,.5).unproject(l).sub(this.ray.origin).normalize(),this.camera=l):l&&l.isOrthographicCamera?(this.ray.origin.set(r.x,r.y,(l.near+l.far)/(l.near-l.far)).unproject(l),this.ray.direction.set(0,0,-1).transformDirection(l.matrixWorld),this.camera=l):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(r,l,f){return f=f||[],OR(r,this,f,l),f.sort(I6),f},intersectObjects:function(r,l,f){if(f=f||[],Array.isArray(r)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),f;for(var w=0,E=r.length;w<E;w++)OR(r[w],this,f,l);return f.sort(I6),f}}),Pe(R6.prototype,{set:function(r,l,f){return this.radius=r,this.phi=l,this.theta=f,this},clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.radius=r.radius,this.phi=r.phi,this.theta=r.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(r){return this.setFromCartesianCoords(r.x,r.y,r.z)},setFromCartesianCoords:function(r,l,f){return this.radius=Math.sqrt(r*r+l*l+f*f),this.radius===0?this.phi=this.theta=0:(this.theta=Math.atan2(r,f),this.phi=Math.acos(ci.clamp(l/this.radius,-1,1))),this}}),Pe(L6.prototype,{set:function(r,l,f){return this.radius=r,this.theta=l,this.y=f,this},clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.radius=r.radius,this.theta=r.theta,this.y=r.y,this},setFromVector3:function(r){return this.setFromCartesianCoords(r.x,r.y,r.z)},setFromCartesianCoords:function(r,l,f){return this.radius=Math.sqrt(r*r+f*f),this.theta=Math.atan2(r,f),this.y=l,this}});var wF=new v;Pe(DR.prototype,{set:function(r,l){return this.min.copy(r),this.max.copy(l),this},setFromPoints:function(r){this.makeEmpty();for(var l=0,f=r.length;l<f;l++)this.expandByPoint(r[l]);return this},setFromCenterAndSize:function(r,l){return l=wF.copy(l).multiplyScalar(.5),this.min.copy(r).sub(l),this.max.copy(r).add(l),this},clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.min.copy(r.min),this.max.copy(r.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(r){return r===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),r=new v),this.isEmpty()?r.set(0,0):r.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(r){return r===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),r=new v),this.isEmpty()?r.set(0,0):r.subVectors(this.max,this.min)},expandByPoint:function(r){return this.min.min(r),this.max.max(r),this},expandByVector:function(r){return this.min.sub(r),this.max.add(r),this},expandByScalar:function(r){return this.min.addScalar(-r),this.max.addScalar(r),this},containsPoint:function(r){return!(r.x<this.min.x||r.x>this.max.x||r.y<this.min.y||r.y>this.max.y)},containsBox:function(r){return this.min.x<=r.min.x&&r.max.x<=this.max.x&&this.min.y<=r.min.y&&r.max.y<=this.max.y},getParameter:function(r,l){return l===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),l=new v),l.set((r.x-this.min.x)/(this.max.x-this.min.x),(r.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(r){return!(r.max.x<this.min.x||r.min.x>this.max.x||r.max.y<this.min.y||r.min.y>this.max.y)},clampPoint:function(r,l){return l===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),l=new v),l.copy(r).clamp(this.min,this.max)},distanceToPoint:function(r){return wF.copy(r).clamp(this.min,this.max).sub(r).length()},intersect:function(r){return this.min.max(r.min),this.max.min(r.max),this},union:function(r){return this.min.min(r.min),this.max.max(r.max),this},translate:function(r){return this.min.add(r),this.max.add(r),this},equals:function(r){return r.min.equals(this.min)&&r.max.equals(this.max)}});var CF=new I,SS=new I;Pe(bR.prototype,{set:function(r,l){return this.start.copy(r),this.end.copy(l),this},clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.start.copy(r.start),this.end.copy(r.end),this},getCenter:function(r){return r===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),r=new I),r.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(r){return r===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),r=new I),r.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(r,l){return l===void 0&&(console.warn("THREE.Line3: .at() target is now required"),l=new I),this.delta(l).multiplyScalar(r).add(this.start)},closestPointToPointParameter:function(r,l){return CF.subVectors(r,this.start),SS.subVectors(this.end,this.start),r=SS.dot(SS),r=SS.dot(CF)/r,l&&(r=ci.clamp(r,0,1)),r},closestPointToPoint:function(r,l,f){return r=this.closestPointToPointParameter(r,l),f===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),f=new I),this.delta(f).multiplyScalar(r).add(this.start)},applyMatrix4:function(r){return this.start.applyMatrix4(r),this.end.applyMatrix4(r),this},equals:function(r){return r.start.equals(this.start)&&r.end.equals(this.end)}}),BA.prototype=Le(G.prototype),BA.prototype.constructor=BA,BA.prototype.isImmediateRenderObject=!0;var _F=new I;Hy.prototype=Le(G.prototype),Hy.prototype.constructor=Hy,Hy.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Hy.prototype.update=function(){this.light.updateMatrixWorld();var r=this.light.distance?this.light.distance:1e3,l=r*Math.tan(this.light.angle);this.cone.scale.set(l,l,r),_F.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_F),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var fm=new I,TS=new b,pL=new b;Av.prototype=Le(ca.prototype),Av.prototype.constructor=Av,Av.prototype.isSkeletonHelper=!0,Av.prototype.updateMatrixWorld=function(r){var l=this.bones,f=this.geometry,w=f.getAttribute("position");pL.getInverse(this.root.matrixWorld);for(var E=0,O=0;E<l.length;E++){var B=l[E];B.parent&&B.parent.isBone&&(TS.multiplyMatrices(pL,B.matrixWorld),fm.setFromMatrixPosition(TS),w.setXYZ(O,fm.x,fm.y,fm.z),TS.multiplyMatrices(pL,B.parent.matrixWorld),fm.setFromMatrixPosition(TS),w.setXYZ(O+1,fm.x,fm.y,fm.z),O+=2)}f.getAttribute("position").needsUpdate=!0,G.prototype.updateMatrixWorld.call(this,r)},jy.prototype=Le(Qe.prototype),jy.prototype.constructor=jy,jy.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},jy.prototype.update=function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var NW=new I,MF=new He,SF=new He;Gy.prototype=Le(G.prototype),Gy.prototype.constructor=Gy,Gy.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Gy.prototype.update=function(){var r=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var l=r.geometry.getAttribute("color");MF.copy(this.light.color),SF.copy(this.light.groundColor);for(var f=0,w=l.count;f<w;f++){var E=f<w/2?MF:SF;l.setXYZ(f,E.r,E.g,E.b)}l.needsUpdate=!0}r.lookAt(NW.setFromMatrixPosition(this.light.matrixWorld).negate())},QM.prototype=Pe(Le(ca.prototype),{constructor:QM,copy:function(r){return ca.prototype.copy.call(this,r),this.geometry.copy(r.geometry),this.material.copy(r.material),this},clone:function(){return new this.constructor().copy(this)}}),$M.prototype=Le(ca.prototype),$M.prototype.constructor=$M;var TF=new I,ES=new I,EF=new I;Vy.prototype=Le(G.prototype),Vy.prototype.constructor=Vy,Vy.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Vy.prototype.update=function(){TF.setFromMatrixPosition(this.light.matrixWorld),ES.setFromMatrixPosition(this.light.target.matrixWorld),EF.subVectors(ES,TF),this.lightPlane.lookAt(ES),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(ES),this.targetLine.scale.z=EF.length()};var IS=new I,Aa=new Ot;zA.prototype=Le(ca.prototype),zA.prototype.constructor=zA,zA.prototype.update=function(){var r=this.geometry,l=this.pointMap;Aa.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ba("c",l,r,Aa,0,0,-1),ba("t",l,r,Aa,0,0,1),ba("n1",l,r,Aa,-1,-1,-1),ba("n2",l,r,Aa,1,-1,-1),ba("n3",l,r,Aa,-1,1,-1),ba("n4",l,r,Aa,1,1,-1),ba("f1",l,r,Aa,-1,-1,1),ba("f2",l,r,Aa,1,-1,1),ba("f3",l,r,Aa,-1,1,1),ba("f4",l,r,Aa,1,1,1),ba("u1",l,r,Aa,.7,1.1,-1),ba("u2",l,r,Aa,-.7,1.1,-1),ba("u3",l,r,Aa,0,2,-1),ba("cf1",l,r,Aa,-1,0,1),ba("cf2",l,r,Aa,1,0,1),ba("cf3",l,r,Aa,0,-1,1),ba("cf4",l,r,Aa,0,1,1),ba("cn1",l,r,Aa,-1,0,-1),ba("cn2",l,r,Aa,1,0,-1),ba("cn3",l,r,Aa,0,-1,-1),ba("cn4",l,r,Aa,0,1,-1),r.getAttribute("position").needsUpdate=!0};var RS=new se;_d.prototype=Le(ca.prototype),_d.prototype.constructor=_d,_d.prototype.update=function(r){if(r!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&RS.setFromObject(this.object),!RS.isEmpty()){r=RS.min;var l=RS.max,f=this.geometry.attributes.position,w=f.array;w[0]=l.x,w[1]=l.y,w[2]=l.z,w[3]=r.x,w[4]=l.y,w[5]=l.z,w[6]=r.x,w[7]=r.y,w[8]=l.z,w[9]=l.x,w[10]=r.y,w[11]=l.z,w[12]=l.x,w[13]=l.y,w[14]=r.z,w[15]=r.x,w[16]=l.y,w[17]=r.z,w[18]=r.x,w[19]=r.y,w[20]=r.z,w[21]=l.x,w[22]=r.y,w[23]=r.z,f.needsUpdate=!0,this.geometry.computeBoundingSphere()}},_d.prototype.setFromObject=function(r){return this.object=r,this.update(),this},_d.prototype.copy=function(r){return ca.prototype.copy.call(this,r),this.object=r.object,this},_d.prototype.clone=function(){return new this.constructor().copy(this)},UA.prototype=Le(ca.prototype),UA.prototype.constructor=UA,UA.prototype.updateMatrixWorld=function(r){var l=this.box;l.isEmpty()||(l.getCenter(this.position),l.getSize(this.scale),this.scale.multiplyScalar(.5),G.prototype.updateMatrixWorld.call(this,r))},kA.prototype=Le(Cu.prototype),kA.prototype.constructor=kA,kA.prototype.updateMatrixWorld=function(r){var l=-this.plane.constant;1e-8>Math.abs(l)&&(l=1e-8),this.scale.set(.5*this.size,.5*this.size,l),this.children[0].material.side=0>l?1:0,this.lookAt(this.plane.normal),G.prototype.updateMatrixWorld.call(this,r)};var IF=new I,LS,mL;Md.prototype=Le(G.prototype),Md.prototype.constructor=Md,Md.prototype.setDirection=function(r){.99999<r.y?this.quaternion.set(0,0,0,1):-.99999>r.y?this.quaternion.set(1,0,0,0):(IF.set(r.z,0,-r.x).normalize(),this.quaternion.setFromAxisAngle(IF,Math.acos(r.y)))},Md.prototype.setLength=function(r,l,f){l===void 0&&(l=.2*r),f===void 0&&(f=.2*l),this.line.scale.set(1,Math.max(1e-4,r-l),1),this.line.updateMatrix(),this.cone.scale.set(f,l,f),this.cone.position.y=r,this.cone.updateMatrix()},Md.prototype.setColor=function(r){this.line.material.color.set(r),this.cone.material.color.set(r)},Md.prototype.copy=function(r){return G.prototype.copy.call(this,r,!1),this.line.copy(r.line),this.cone.copy(r.cone),this},Md.prototype.clone=function(){return new this.constructor().copy(this)},HA.prototype=Le(ca.prototype),HA.prototype.constructor=HA;var wf=Math.pow(2,8),RF=[.125,.215,.35,.446,.526,.582],LF=5+RF.length,Cf={3e3:0,3001:1,3002:2,3004:3,3005:4,3006:5,3007:6},gL=new Uy,vL=function(){for(var r=[],l=[],f=[],w=8,E=0;E<LF;E++){var O=Math.pow(2,w);l.push(O);var B=1/O;4<E?B=RF[E-8+4-1]:E==0&&(B=0),f.push(B),B=1/(O-1),O=-B/2,B=1+B/2;var Y=[O,O,B,O,B,B,O,O,B,B,O,B];O=new Float32Array(108),B=new Float32Array(72);for(var K=new Float32Array(36),$=0;6>$;$++){var pe=$%3*2/3-1,fe=2<$?0:-1;O.set([pe,fe,0,pe+2/3,fe,0,pe+2/3,fe+1,0,pe,fe,0,pe+2/3,fe+1,0,pe,fe+1,0],18*$),B.set(Y,12*$),K.set([$,$,$,$,$,$],6*$)}Y=new Fe,Y.setAttribute("position",new Nt(O,3)),Y.setAttribute("uv",new Nt(B,2)),Y.setAttribute("faceIndex",new Nt(K,1)),r.push(Y),4<w&&w--}return{_lodPlanes:r,_sizeLods:l,_sigmas:f}}(),$A=vL._lodPlanes,PF=vL._sizeLods,PS=vL._sigmas,yL=null,Lv=(1+Math.sqrt(5))/2,l1=1/Lv,OF=[new I(1,1,1),new I(-1,1,1),new I(1,1,-1),new I(-1,1,-1),new I(0,Lv,l1),new I(0,Lv,-l1),new I(l1,0,Lv),new I(-l1,0,Lv),new I(Lv,l1,0),new I(-Lv,l1,0)];FR.prototype={constructor:FR,fromScene:function(r,l,f,w){l===void 0&&(l=0),f===void 0&&(f=.1),w===void 0&&(w=100),yL=this._renderer.getRenderTarget();var E=this._allocateTargets();return this._sceneToCubeUV(r,f,w,E),0<l&&this._blur(E,0,0,l),this._applyPMREM(E),this._cleanup(E),E},fromEquirectangular:function(r){return r.magFilter=1003,r.minFilter=1003,r.generateMipmaps=!1,this.fromCubemap(r)},fromCubemap:function(r){yL=this._renderer.getRenderTarget();var l=this._allocateTargets(r);return this._textureToCubeUV(r,l),this._applyPMREM(l),this._cleanup(l),l},compileCubemapShader:function(){this._cubemapShader===null&&(this._cubemapShader=b6(),this._compileMaterial(this._cubemapShader))},compileEquirectangularShader:function(){this._equirectShader===null&&(this._equirectShader=D6(),this._compileMaterial(this._equirectShader))},dispose:function(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(var r=0;r<$A.length;r++)$A[r].dispose()},_cleanup:function(r){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(yL),r.scissorTest=!1,r.setSize(r.width,r.height)},_allocateTargets:function(r){var l=r===void 0||r.type!==1009?!1:r.encoding===3e3||r.encoding===3001||r.encoding===3007;l={magFilter:1003,minFilter:1003,generateMipmaps:!1,type:1009,format:1023,encoding:l?r.encoding:3002,depthBuffer:!1,stencilBuffer:!1};var f=O6(l);return f.depthBuffer=!r,this._pingPongRenderTarget=O6(l),f},_compileMaterial:function(r){r=new Qe($A[0],r),this._renderer.compile(r,gL)},_sceneToCubeUV:function(r,l,f,w){l=new Jt(90,1,l,f),f=[1,-1,1,1,1,1];var E=[1,1,1,-1,-1,-1],O=this._renderer,B=O.outputEncoding,Y=O.toneMapping,K=O.toneMappingExposure,$=O.getClearColor(),pe=O.getClearAlpha();O.toneMapping=1,O.toneMappingExposure=1,O.outputEncoding=3e3;var fe=r.background;if(fe&&fe.isColor){fe.convertSRGBToLinear();var xe=Math.min(Math.max(Math.ceil(i2(Math.max(fe.r,fe.g,fe.b))),-128),127);fe=fe.multiplyScalar(Math.pow(2,-xe)),O.setClearColor(fe,(xe+128)/255),r.background=null}for(fe=0;6>fe;fe++)xe=fe%3,xe==0?(l.up.set(0,f[fe],0),l.lookAt(E[fe],0,0)):xe==1?(l.up.set(0,0,f[fe]),l.lookAt(0,E[fe],0)):(l.up.set(0,f[fe],0),l.lookAt(0,0,E[fe])),NR(w,xe*wf,2<fe?wf:0,wf,wf),O.setRenderTarget(w),O.render(r,l);O.toneMapping=Y,O.toneMappingExposure=K,O.outputEncoding=B,O.setClearColor($,pe)},_textureToCubeUV:function(r,l){var f=this._renderer;r.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=b6()):this._equirectShader==null&&(this._equirectShader=D6());var w=r.isCubeTexture?this._cubemapShader:this._equirectShader,E=new Qe($A[0],w);w=w.uniforms,w.envMap.value=r,r.isCubeTexture||w.texelSize.value.set(1/r.image.width,1/r.image.height),w.inputEncoding.value=Cf[r.encoding],w.outputEncoding.value=Cf[l.texture.encoding],NR(l,0,0,3*wf,2*wf),f.setRenderTarget(l),f.render(E,gL)},_applyPMREM:function(r){var l=this._renderer,f=l.autoClear;l.autoClear=!1;for(var w=1;w<LF;w++)this._blur(r,w-1,w,Math.sqrt(PS[w]*PS[w]-PS[w-1]*PS[w-1]),OF[(w-1)%OF.length]);l.autoClear=f},_blur:function(r,l,f,w,E){var O=this._pingPongRenderTarget;this._halfBlur(r,O,l,f,w,"latitudinal",E),this._halfBlur(O,r,f,f,w,"longitudinal",E)},_halfBlur:function(r,l,f,w,E,O,B){var Y=this._renderer,K=this._blurMaterial;O!=="latitudinal"&&O!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");var $=new Qe($A[w],K);K=K.uniforms;var pe=PF[f]-1;pe=isFinite(E)?Math.PI/(2*pe):2*Math.PI/39;var fe=E/pe,xe=isFinite(E)?1+Math.floor(3*fe):20;20<xe&&console.warn("sigmaRadians, "+E+", is too large and will clip, as it requested "+xe+" samples when the maximum is set to 20"),E=[];for(var ye=0,Me=0;20>Me;++Me){var Oe=Me/fe;Oe=Math.exp(-Oe*Oe/2),E.push(Oe),Me==0?ye+=Oe:Me<xe&&(ye+=2*Oe)}for(Me=0;Me<E.length;Me++)E[Me]/=ye;K.envMap.value=r.texture,K.samples.value=xe,K.weights.value=E,K.latitudinal.value=O==="latitudinal",B&&(K.poleAxis.value=B),K.dTheta.value=pe,K.mipInt.value=8-f,K.inputEncoding.value=Cf[r.texture.encoding],K.outputEncoding.value=Cf[r.texture.encoding],r=PF[w],Oe=3*Math.max(0,wf-2*r),NR(l,Oe,(w===0?0:2*wf)+2*r*(4<w?w-8+4:0),3*r,2*r),Y.setRenderTarget(l),Y.render($,gL)}},Pn.create=function(r,l){return r.prototype=Le(Pn.prototype),r.prototype.constructor=r,r.prototype.getPoint=l,r},Pe(Cd.prototype,{createPointsGeometry:function(r){return console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),r=this.getPoints(r),this.createGeometry(r)},createSpacedPointsGeometry:function(r){return console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),r=this.getSpacedPoints(r),this.createGeometry(r)},createGeometry:function(r){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var l=new Ne,f=0,w=r.length;f<w;f++){var E=r[f];l.vertices.push(new I(E.x,E.y,E.z||0))}return l}}),Pe(hh.prototype,{fromPoints:function(r){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(r)}}),F6.prototype=Le(tl.prototype),N6.prototype=Le(tl.prototype),UR.prototype=Le(tl.prototype),Pe(UR.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),QM.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Av.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Pe(fo.prototype,{extractUrlBase:function(r){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),hL.extractUrlBase(r)}}),fo.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Pe(qM.prototype,{setTexturePath:function(r){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(r)}}),Pe(DR.prototype,{center:function(r){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(r)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(r){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(r)},size:function(r){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(r)}}),Pe(se.prototype,{center:function(r){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(r)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(r){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(r)},isIntersectionSphere:function(r){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(r)},size:function(r){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(r)}}),Pe(we.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),Nr.prototype.setFromMatrix=function(r){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(r)},bR.prototype.center=function(r){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(r)},Pe(ci,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(r){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),ci.floorPowerOfTwo(r)},nextPowerOfTwo:function(r){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),ci.ceilPowerOfTwo(r)}}),Pe(g.prototype,{flattenToArrayOffset:function(r,l){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(r,l)},multiplyVector3:function(r){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),r.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(r){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),r.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Pe(b.prototype,{extractPosition:function(r){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(r)},flattenToArrayOffset:function(r,l){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(r,l)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new I().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(r){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(r)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(r){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),r.applyMatrix4(this)},multiplyVector4:function(r){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),r.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(r){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),r.transformDirection(this)},crossVector:function(r){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),r.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(r){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),r.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(r,l,f,w,E,O){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(r,l,w,f,E,O)}}),je.prototype.isIntersectionLine=function(r){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(r)},X.prototype.multiplyVector3=function(r){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),r.applyQuaternion(this)},Pe(Te.prototype,{isIntersectionBox:function(r){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(r)},isIntersectionPlane:function(r){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(r)},isIntersectionSphere:function(r){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(r)}}),Pe(Ge.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(r,l){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(r,l)},midpoint:function(r){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(r)},normal:function(r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(r)},plane:function(r){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(r)}}),Pe(Ge,{barycoordFromPoint:function(r,l,f,w,E){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Ge.getBarycoord(r,l,f,w,E)},normal:function(r,l,f,w){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Ge.getNormal(r,l,f,w)}}),Pe(nm.prototype,{extractAllPoints:function(r){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(r)},extrude:function(r){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new lv(this,r)},makeGeometry:function(r){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new cv(this,r)}}),Pe(v.prototype,{fromAttribute:function(r,l,f){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(r,l,f)},distanceToManhattan:function(r){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(r)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Pe(I.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(r){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(r)},getScaleFromMatrix:function(r){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(r)},getColumnFromMatrix:function(r,l){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(l,r)},applyProjection:function(r){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(r)},fromAttribute:function(r,l,f){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(r,l,f)},distanceToManhattan:function(r){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(r)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Pe(y.prototype,{fromAttribute:function(r,l,f){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(r,l,f)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Pe(Ne.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(r){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(r)}}),Pe(G.prototype,{getChildByName:function(r){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(r)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(r,l){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(l,r)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(r){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(r)}}),Rn(G.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(r){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=r}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Pe(Qe.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Rn(Qe.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Rn(cA.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(CM.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),wM.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Pn.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(r){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=r}}),Jt.prototype.setLens=function(r,l){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),l!==void 0&&(this.filmGauge=l),this.setFocalLength(r)},Rn(zo.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(r){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=r}},shadowCameraLeft:{set:function(r){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=r}},shadowCameraRight:{set:function(r){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=r}},shadowCameraTop:{set:function(r){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=r}},shadowCameraBottom:{set:function(r){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=r}},shadowCameraNear:{set:function(r){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=r}},shadowCameraFar:{set:function(r){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=r}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(r){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=r}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(r){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=r}},shadowMapHeight:{set:function(r){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=r}}}),Rn(Nt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===35048},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(35048)}}}),Pe(Nt.prototype,{setDynamic:function(r){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(r===!0?35048:35044),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Pe(Fe.prototype,{addIndex:function(r){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(r)},addAttribute:function(r,l,f){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),l&&l.isBufferAttribute||l&&l.isInterleavedBufferAttribute?r==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(l),this):this.setAttribute(r,l):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(r,new Nt(l,f)))},addDrawCall:function(r,l,f){f!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(r,l)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(r){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(r)},applyMatrix:function(r){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(r)}}),Rn(Fe.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Rn(NA.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(r){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=r}}}),Rn(PR.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(r){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=r}}}),Rn(xd.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===35048},set:function(r){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(r)}}}),Pe(xd.prototype,{setDynamic:function(r){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(r===!0?35048:35044),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Pe(df.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Rn(JM.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Rn(Et.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new He}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(r){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=r===1}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(r){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=r}}}),Rn(rm.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Rn(kt.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(r){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=r}}}),Pe(sR.prototype,{clearTarget:function(r,l,f,w){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(r),this.clear(l,f,w)},animate:function(r){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(r)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(r){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(r)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Rn(sR.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(r){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=r}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(r){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=r}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(r){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=r===!0?3001:3e3}}}),Rn(f6.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Rn(T.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(r){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=r}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(r){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=r}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(r){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=r}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(r){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=r}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(r){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=r}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(r){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=r}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(r){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=r}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(r){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=r}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(r){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=r}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(r){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=r}}}),Rn(ky.prototype,{load:{value:function(r){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var l=this;return new KM().load(r,function(f){l.setBuffer(f)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),ER.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Kr.prototype.updateCubeMap=function(r,l){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(r,l)},im.crossOrigin=void 0,im.loadTexture=function(r,l,f,w){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var E=new NM;return E.setCrossOrigin(this.crossOrigin),r=E.load(r,f,void 0,w),l&&(r.mapping=l),r},im.loadTextureCube=function(r,l,f,w){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var E=new FM;return E.setCrossOrigin(this.crossOrigin),r=E.load(r,f,void 0,w),l&&(r.mapping=l),r},im.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},im.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"117"}})),o.ACESFilmicToneMapping=5,o.AddEquation=100,o.AddOperation=2,o.AdditiveAnimationBlendMode=2501,o.AdditiveBlending=2,o.AlphaFormat=1021,o.AlwaysDepth=1,o.AlwaysStencilFunc=519,o.AmbientLight=GM,o.AmbientLightProbe=_R,o.AnimationClip=fc,o.AnimationLoader=pR,o.AnimationMixer=RR,o.AnimationObjectGroup=T6,o.AnimationUtils=ea,o.ArcCurve=zy,o.ArrayCamera=gM,o.ArrowHelper=Md,o.Audio=ky,o.AudioAnalyser=ER,o.AudioContext=dL,o.AudioListener=SR,o.AudioLoader=KM,o.AxesHelper=HA,o.AxisHelper=function(r){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new HA(r)},o.BackSide=1,o.BasicDepthPacking=3200,o.BasicShadowMap=0,o.BinaryTextureLoader=function(r){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new bM(r)},o.Bone=lR,o.BooleanKeyframeTrack=LM,o.BoundingBoxHelper=function(r,l){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new _d(r,l)},o.Box2=DR,o.Box3=se,o.Box3Helper=UA,o.BoxBufferGeometry=ZA,o.BoxGeometry=rL,o.BoxHelper=_d,o.BufferAttribute=Nt,o.BufferGeometry=Fe,o.BufferGeometryLoader=ZM,o.ByteType=1010,o.Cache=Sv,o.Camera=Ot,o.CameraHelper=zA,o.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")},o.CanvasTexture=hA,o.CatmullRomCurve3=tl,o.CineonToneMapping=4,o.CircleBufferGeometry=by,o.CircleGeometry=PA,o.ClampToEdgeWrapping=1001,o.Clock=MR,o.ClosedSplineCurve3=F6,o.Color=He,o.ColorKeyframeTrack=PM,o.CompressedTexture=wy,o.CompressedTextureLoader=mR,o.ConeBufferGeometry=LA,o.ConeGeometry=RA,o.CubeCamera=Kr,o.CubeGeometry=rL,o.CubeReflectionMapping=301,o.CubeRefractionMapping=302,o.CubeTexture=cc,o.CubeTextureLoader=FM,o.CubeUVReflectionMapping=306,o.CubeUVRefractionMapping=307,o.CubicBezierCurve=sh,o.CubicBezierCurve3=mf,o.CubicInterpolant=IM,o.CullFaceBack=1,o.CullFaceFront=2,o.CullFaceFrontBack=3,o.CullFaceNone=0,o.Curve=Pn,o.CurvePath=Cd,o.CustomBlending=5,o.CylinderBufferGeometry=Ad,o.CylinderGeometry=fv,o.Cylindrical=L6,o.DataTexture=Zt,o.DataTexture2DArray=el,o.DataTexture3D=_l,o.DataTextureLoader=bM,o.DecrementStencilOp=7683,o.DecrementWrapStencilOp=34056,o.DefaultLoadingManager=pF,o.DepthFormat=1026,o.DepthStencilFormat=1027,o.DepthTexture=fA,o.DirectionalLight=jM,o.DirectionalLightHelper=Vy,o.DirectionalLightShadow=HM,o.DiscreteInterpolant=RM,o.DodecahedronBufferGeometry=Ty,o.DodecahedronGeometry=yA,o.DoubleSide=2,o.DstAlphaFactor=206,o.DstColorFactor=208,o.DynamicBufferAttribute=function(r,l){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new Nt(r,l).setUsage(35048)},o.DynamicCopyUsage=35050,o.DynamicDrawUsage=35048,o.DynamicReadUsage=35049,o.EdgesGeometry=Dy,o.EdgesHelper=function(r,l){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new ca(new Dy(r.geometry),new $o({color:l!==void 0?l:16777215}))},o.EllipseCurve=Mu,o.EqualDepth=4,o.EqualStencilFunc=514,o.EquirectangularReflectionMapping=303,o.EquirectangularRefractionMapping=304,o.Euler=N,o.EventDispatcher=c,o.ExtrudeBufferGeometry=df,o.ExtrudeGeometry=lv,o.Face3=vt,o.Face4=function(r,l,f,w,E,O,B){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new vt(r,l,f,E,O,B)},o.FaceColors=1,o.FileLoader=dc,o.FlatShading=1,o.Float32Attribute=function(r,l){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new ke(r,l)},o.Float32BufferAttribute=ke,o.Float64Attribute=function(r,l){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Je(r,l)},o.Float64BufferAttribute=Je,o.FloatType=1015,o.Fog=xM,o.FogExp2=yM,o.Font=AR,o.FontLoader=wR,o.FrontFaceDirectionCCW=1,o.FrontFaceDirectionCW=0,o.FrontSide=0,o.Frustum=Nr,o.GammaEncoding=3007,o.Geometry=Ne,o.GeometryUtils={merge:function(r,l,f){if(console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),l.isMesh){l.matrixAutoUpdate&&l.updateMatrix();var w=l.matrix;l=l.geometry}r.merge(l,w,f)},center:function(r){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),r.center()}},o.GreaterDepth=6,o.GreaterEqualDepth=5,o.GreaterEqualStencilFunc=518,o.GreaterStencilFunc=516,o.GridHelper=QM,o.Group=xy,o.HalfFloatType=1016,o.HemisphereLight=BM,o.HemisphereLightHelper=Gy,o.HemisphereLightProbe=CR,o.IcosahedronBufferGeometry=Sy,o.IcosahedronGeometry=vA,o.ImageBitmapLoader=yR,o.ImageLoader=By,o.ImageUtils=im,o.ImmediateRenderObject=BA,o.IncrementStencilOp=7682,o.IncrementWrapStencilOp=34055,o.InstancedBufferAttribute=YM,o.InstancedBufferGeometry=NA,o.InstancedInterleavedBuffer=LR,o.InstancedMesh=_M,o.Int16Attribute=function(r,l){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new $n(r,l)},o.Int16BufferAttribute=$n,o.Int32Attribute=function(r,l){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new ze(r,l)},o.Int32BufferAttribute=ze,o.Int8Attribute=function(r,l){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Pr(r,l)},o.Int8BufferAttribute=Pr,o.IntType=1013,o.InterleavedBuffer=xd,o.InterleavedBufferAttribute=lA,o.Interpolant=_u,o.InterpolateDiscrete=2300,o.InterpolateLinear=2301,o.InterpolateSmooth=2302,o.InvertStencilOp=5386,o.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")},o.KeepStencilOp=7680,o.KeyframeTrack=Ps,o.LOD=cA,o.LatheBufferGeometry=Oy,o.LatheGeometry=IA,o.Layers=k,o.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")},o.LessDepth=2,o.LessEqualDepth=3,o.LessEqualStencilFunc=515,o.LessStencilFunc=513,o.Light=zo,o.LightProbe=pc,o.LightShadow=vf,o.Line=Cu,o.Line3=bR,o.LineBasicMaterial=$o,o.LineCurve=eu,o.LineCurve3=lh,o.LineDashedMaterial=xv,o.LineLoop=MM,o.LinePieces=1,o.LineSegments=ca,o.LineStrip=0,o.LinearEncoding=3e3,o.LinearFilter=1006,o.LinearInterpolant=OA,o.LinearMipMapLinearFilter=1008,o.LinearMipMapNearestFilter=1007,o.LinearMipmapLinearFilter=1008,o.LinearMipmapNearestFilter=1007,o.LinearToneMapping=1,o.Loader=fo,o.LoaderUtils=hL,o.LoadingManager=dR,o.LogLuvEncoding=3003,o.LoopOnce=2200,o.LoopPingPong=2202,o.LoopRepeat=2201,o.LuminanceAlphaFormat=1025,o.LuminanceFormat=1024,o.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o.Material=Et,o.MaterialLoader=XM,o.Math=ci,o.MathUtils=ci,o.Matrix3=g,o.Matrix4=b,o.MaxEquation=104,o.Mesh=Qe,o.MeshBasicMaterial=xr,o.MeshDepthMaterial=Qp,o.MeshDistanceMaterial=$p,o.MeshFaceMaterial=function(r){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),r},o.MeshLambertMaterial=vv,o.MeshMatcapMaterial=yv,o.MeshNormalMaterial=gv,o.MeshPhongMaterial=rm,o.MeshPhysicalMaterial=pv,o.MeshStandardMaterial=pf,o.MeshToonMaterial=mv,o.MinEquation=103,o.MirroredRepeatWrapping=1002,o.MixOperation=1,o.MultiMaterial=function(r){return r===void 0&&(r=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),r.isMultiMaterial=!0,r.materials=r,r.clone=function(){return r.slice()},r},o.MultiplyBlending=4,o.MultiplyOperation=0,o.NearestFilter=1003,o.NearestMipMapLinearFilter=1005,o.NearestMipMapNearestFilter=1004,o.NearestMipmapLinearFilter=1005,o.NearestMipmapNearestFilter=1004,o.NeverDepth=0,o.NeverStencilFunc=512,o.NoBlending=0,o.NoColors=0,o.NoToneMapping=0,o.NormalAnimationBlendMode=2500,o.NormalBlending=1,o.NotEqualDepth=7,o.NotEqualStencilFunc=517,o.NumberKeyframeTrack=Fy,o.Object3D=G,o.ObjectLoader=qM,o.ObjectSpaceNormalMap=1,o.OctahedronBufferGeometry=av,o.OctahedronGeometry=gA,o.OneFactor=201,o.OneMinusDstAlphaFactor=207,o.OneMinusDstColorFactor=209,o.OneMinusSrcAlphaFactor=205,o.OneMinusSrcColorFactor=203,o.OrthographicCamera=Uy,o.PCFShadowMap=1,o.PCFSoftShadowMap=2,o.PMREMGenerator=FR,o.ParametricBufferGeometry=_y,o.ParametricGeometry=dA,o.Particle=function(r){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new uA(r)},o.ParticleBasicMaterial=function(r){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new ah(r)},o.ParticleSystem=function(r,l){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Ay(r,l)},o.ParticleSystemMaterial=function(r){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new ah(r)},o.Path=hh,o.PerspectiveCamera=Jt,o.Plane=je,o.PlaneBufferGeometry=Ai,o.PlaneGeometry=Qo,o.PlaneHelper=kA,o.PointCloud=function(r,l){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Ay(r,l)},o.PointCloudMaterial=function(r){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new ah(r)},o.PointLight=kM,o.PointLightHelper=jy,o.Points=Ay,o.PointsMaterial=ah,o.PolarGridHelper=$M,o.PolyhedronBufferGeometry=$l,o.PolyhedronGeometry=pA,o.PositionalAudio=TR,o.PropertyBinding=rl,o.PropertyMixer=IR,o.QuadraticBezierCurve=uh,o.QuadraticBezierCurve3=gf,o.Quaternion=X,o.QuaternionKeyframeTrack=DA,o.QuaternionLinearInterpolant=OM,o.REVISION="117",o.RGBADepthPacking=3201,o.RGBAFormat=1023,o.RGBAIntegerFormat=1033,o.RGBA_ASTC_10x10_Format=37819,o.RGBA_ASTC_10x5_Format=37816,o.RGBA_ASTC_10x6_Format=37817,o.RGBA_ASTC_10x8_Format=37818,o.RGBA_ASTC_12x10_Format=37820,o.RGBA_ASTC_12x12_Format=37821,o.RGBA_ASTC_4x4_Format=37808,o.RGBA_ASTC_5x4_Format=37809,o.RGBA_ASTC_5x5_Format=37810,o.RGBA_ASTC_6x5_Format=37811,o.RGBA_ASTC_6x6_Format=37812,o.RGBA_ASTC_8x5_Format=37813,o.RGBA_ASTC_8x6_Format=37814,o.RGBA_ASTC_8x8_Format=37815,o.RGBA_BPTC_Format=36492,o.RGBA_ETC2_EAC_Format=37496,o.RGBA_PVRTC_2BPPV1_Format=35843,o.RGBA_PVRTC_4BPPV1_Format=35842,o.RGBA_S3TC_DXT1_Format=33777,o.RGBA_S3TC_DXT3_Format=33778,o.RGBA_S3TC_DXT5_Format=33779,o.RGBDEncoding=3006,o.RGBEEncoding=3002,o.RGBEFormat=1023,o.RGBFormat=1022,o.RGBIntegerFormat=1032,o.RGBM16Encoding=3005,o.RGBM7Encoding=3004,o.RGB_ETC1_Format=36196,o.RGB_ETC2_Format=37492,o.RGB_PVRTC_2BPPV1_Format=35841,o.RGB_PVRTC_4BPPV1_Format=35840,o.RGB_S3TC_DXT1_Format=33776,o.RGFormat=1030,o.RGIntegerFormat=1031,o.RawShaderMaterial=wd,o.Ray=Te,o.Raycaster=PR,o.RectAreaLight=VM,o.RedFormat=1028,o.RedIntegerFormat=1029,o.ReinhardToneMapping=2,o.RepeatWrapping=1e3,o.ReplaceStencilOp=7681,o.ReverseSubtractEquation=102,o.RingBufferGeometry=Py,o.RingGeometry=EA,o.SRGB8_ALPHA8_ASTC_10x10_Format=37851,o.SRGB8_ALPHA8_ASTC_10x5_Format=37848,o.SRGB8_ALPHA8_ASTC_10x6_Format=37849,o.SRGB8_ALPHA8_ASTC_10x8_Format=37850,o.SRGB8_ALPHA8_ASTC_12x10_Format=37852,o.SRGB8_ALPHA8_ASTC_12x12_Format=37853,o.SRGB8_ALPHA8_ASTC_4x4_Format=37840,o.SRGB8_ALPHA8_ASTC_5x4_Format=37841,o.SRGB8_ALPHA8_ASTC_5x5_Format=37842,o.SRGB8_ALPHA8_ASTC_6x5_Format=37843,o.SRGB8_ALPHA8_ASTC_6x6_Format=37844,o.SRGB8_ALPHA8_ASTC_8x5_Format=37845,o.SRGB8_ALPHA8_ASTC_8x6_Format=37846,o.SRGB8_ALPHA8_ASTC_8x8_Format=37847,o.Scene=re,o.SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}},o.ShaderChunk=Si,o.ShaderLib=Af,o.ShaderMaterial=kt,o.ShadowMaterial=dv,o.Shape=nm,o.ShapeBufferGeometry=hv,o.ShapeGeometry=cv,o.ShapePath=xR,o.ShapeUtils=Ld,o.ShortType=1011,o.Skeleton=CM,o.SkeletonHelper=Av,o.SkinnedMesh=wM,o.SmoothShading=2,o.Sphere=we,o.SphereBufferGeometry=uv,o.SphereGeometry=TA,o.Spherical=R6,o.SphericalHarmonics3=WM,o.SphericalReflectionMapping=305,o.Spline=UR,o.SplineCurve=ch,o.SplineCurve3=N6,o.SpotLight=UM,o.SpotLightHelper=Hy,o.SpotLightShadow=zM,o.Sprite=uA,o.SpriteMaterial=em,o.SrcAlphaFactor=204,o.SrcAlphaSaturateFactor=210,o.SrcColorFactor=202,o.StaticCopyUsage=35046,o.StaticDrawUsage=35044,o.StaticReadUsage=35045,o.StereoCamera=M6,o.StreamCopyUsage=35042,o.StreamDrawUsage=35040,o.StreamReadUsage=35041,o.StringKeyframeTrack=DM,o.SubtractEquation=101,o.SubtractiveBlending=3,o.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},o.TangentSpaceNormalMap=0,o.TetrahedronBufferGeometry=My,o.TetrahedronGeometry=mA,o.TextBufferGeometry=Ly,o.TextGeometry=SA,o.Texture=A,o.TextureLoader=NM,o.TorusBufferGeometry=Iy,o.TorusGeometry=wA,o.TorusKnotBufferGeometry=Ey,o.TorusKnotGeometry=AA,o.Triangle=Ge,o.TriangleFanDrawMode=2,o.TriangleStripDrawMode=1,o.TrianglesDrawMode=0,o.TubeBufferGeometry=sv,o.TubeGeometry=xA,o.UVMapping=300,o.Uint16Attribute=function(r,l){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Gr(r,l)},o.Uint16BufferAttribute=Gr,o.Uint32Attribute=function(r,l){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Ue(r,l)},o.Uint32BufferAttribute=Ue,o.Uint8Attribute=function(r,l){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new qr(r,l)},o.Uint8BufferAttribute=qr,o.Uint8ClampedAttribute=function(r,l){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Fr(r,l)},o.Uint8ClampedBufferAttribute=Fr,o.Uncharted2ToneMapping=3,o.Uniform=JM,o.UniformsLib=Vr,o.UniformsUtils=Y6,o.UnsignedByteType=1009,o.UnsignedInt248Type=1020,o.UnsignedIntType=1014,o.UnsignedShort4444Type=1017,o.UnsignedShort5551Type=1018,o.UnsignedShort565Type=1019,o.UnsignedShortType=1012,o.VSMShadowMap=3,o.Vector2=v,o.Vector3=I,o.Vector4=y,o.VectorKeyframeTrack=Ny,o.Vertex=function(r,l,f){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new I(r,l,f)},o.VertexColors=2,o.VideoTexture=cR,o.WebGLCubeRenderTarget=gn,o.WebGLMultisampleRenderTarget=D,o.WebGLRenderTarget=T,o.WebGLRenderTargetCube=function(r,l,f){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new gn(r,f)},o.WebGLRenderer=sR,o.WebGLUtils=d6,o.WireframeGeometry=Cy,o.WireframeHelper=function(r,l){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new ca(new Cy(r.geometry),new $o({color:l!==void 0?l:16777215}))},o.WrapAroundEnding=2402,o.XHRLoader=function(r){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new dc(r)},o.ZeroCurvatureEnding=2400,o.ZeroFactor=200,o.ZeroSlopeEnding=2401,o.ZeroStencilOp=0,o.sRGBEncoding=3001,Object.defineProperty(o,"__esModule",{value:!0})})}),eo=m(Kb),Jb=function(e){function n(o){return Fi(this,n),o=sa(this,(n.__proto__||Pa(n)).call(this,o)),o.layerType="ThreeLayer",o}return Oa(n,e),mo(n,[{key:"initialize",value:function(o){this.getOptions();var c=this.webglLayer.map.map;this.webglLayer.map.type==="three"?(this.camera=c.camera,this.scene=c.scene):(this.camera=new eo.PerspectiveCamera,this.scene=new eo.Scene),this.world=new eo.Group,this.scene.add(this.world),this.webglLayer.map.type!=="three"&&(this.camera.matrixAutoUpdate=!1,this.world.matrixAutoUpdate=!1,this.renderer=new eo.WebGLRenderer({alpha:!0,antialias:!0,canvas:o.canvas,context:o}),this.renderer.autoClear=!1,this.renderer.outputEncoding=eo.sRGBEncoding)}},{key:"_add",value:function(o,c){var v=[0,0];if(this.getOptions().enabledPointOffset===!0&&(v=this.getPointOffset()),c){var g=new eo.Group;return g.isGeoGroup=!0,g.object=o,g.point=c,g.add(o),g.position.x=c.lng-v[0],g.position.y=c.lat-v[1],g.position.z=o.position.z,this.world.add(g),g}return this.world.add(o),o}},{key:"add",value:function(o,c){return o=this._add(o,c),this.update(),o}},{key:"update",value:function(){this.webglLayer.render()}},{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getRenderer",value:function(){return this.renderer}},{key:"getWorld",value:function(){return this.world}},{key:"updatePoint",value:function(o,c){for(var v=this.world.children,g=0;g<v.length;g++)if(v[g].isGeoGroup&&v[g].object===o){var A=v[g];A.position.x=c.lng,A.position.y=c.lat,A.position.z=o.position.z}}},{key:"remove",value:function(o){this.world.remove(o);for(var c=this.world.children,v=0;v<c.length;v++)c[v].children&&0<c[v].children.length&&c[v].children[0]===o&&this.world.remove(c[v]);this.update()}},{key:"updateCamera",value:function(){if(!this.getOptions().notUpdateSize){var o=this.world,c=this.map.getZoomUnits();o=o.children;for(var v=0;v<o.length;v++)o[v].point&&o[v].scale.set(c,c,c)}}},{key:"render",value:function(o){var c=this.getOptions();if(o){if(!this.webglLayer.map.map.camera){this.updateCamera();var v=this.getPointOffset(),g=new eo.Matrix4().fromArray(o.viewMatrix);this.camera.projectionMatrix=new eo.Matrix4().fromArray(o.projectionMatrix),this.camera.projectionMatrixInverse.getInverse(this.camera.projectionMatrix),c.enabledPointOffset===!0?this.world.matrix=g:(o=new eo.Matrix4().makeTranslation(-v[0],-v[1],0),this.world.matrix=g.multiply(o)),this.renderer.state.reset(),this.postProcessing?this.postProcessing.render():this.renderer.render(this.scene,this.camera)}}else this.update()}}]),n}(hV),tR=function(e){function n(o){Fi(this,n);var c=sa(this,(n.__proto__||Pa(n)).call(this,o));return c.layerType="threeLayer",c.setOptions(o),c}return Oa(n,e),mo(n,[{key:"getCommonDefaultOptions",value:function(){return{zIndex:0,zoomThreshold:[0,30]}}},{key:"setWebglLayer",value:function(o){o.threeLayer||(o.threeLayer=new Jb({enabledPointOffset:!0,webglLayer:o})),this.threeLayer=o.threeLayer}},{key:"getPointOffset",value:function(){return this.threeLayer.getPointOffset()}},{key:"getThreeLayer",value:function(){return this.threeLayer}}]),n}(qb),vy={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`varying vec2 vUv;
void main() {
	vUv = uv;
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,fragmentShader:`uniform float opacity;
uniform sampler2D tDiffuse;
varying vec2 vUv;
void main() {
	vec4 texel = texture2D( tDiffuse, vUv );
	gl_FragColor = opacity * texel;
}`};Pe(rs.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),rs.FullScreenQuad=function(){var e=new kc(-1,1,1,-1,0,1),n=new pi(2,2),o=function(c){this._mesh=new _r(n,c)};return Object.defineProperty(o.prototype,"material",{get:function(){return this._mesh.material},set:function(c){this._mesh.material=c}}),Pe(o.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(c){c.render(this._mesh,e)}}),o}();var cM=function(e,n){rs.call(this),this.textureID=n!==void 0?n:"tDiffuse",e instanceof en?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Kg.clone(e.uniforms),this.material=new en({defines:Pe({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new rs.FullScreenQuad(this.material)};cM.prototype=Pe(Le(rs.prototype),{constructor:cM,render:function(e,n,o){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=o.texture),this.fsQuad.material=this.material,this.renderToScreen?e.setRenderTarget(null):(e.setRenderTarget(n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil)),this.fsQuad.render(e)}});var hM=function(e,n){rs.call(this),this.scene=e,this.camera=n,this.clear=!0,this.inverse=this.needsSwap=!1};hM.prototype=Pe(Le(rs.prototype),{constructor:hM,render:function(e,n,o){var c=e.getContext(),v=e.state;if(v.buffers.color.setMask(!1),v.buffers.depth.setMask(!1),v.buffers.color.setLocked(!0),v.buffers.depth.setLocked(!0),this.inverse)var g=0,A=1;else g=1,A=0;v.buffers.stencil.setTest(!0),v.buffers.stencil.setOp(c.REPLACE,c.REPLACE,c.REPLACE),v.buffers.stencil.setFunc(c.ALWAYS,g,4294967295),v.buffers.stencil.setClear(A),v.buffers.stencil.setLocked(!0),e.setRenderTarget(o),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),v.buffers.color.setLocked(!1),v.buffers.depth.setLocked(!1),v.buffers.stencil.setLocked(!1),v.buffers.stencil.setFunc(c.EQUAL,1,4294967295),v.buffers.stencil.setOp(c.KEEP,c.KEEP,c.KEEP),v.buffers.stencil.setLocked(!0)}});var rR=function(){rs.call(this),this.needsSwap=!1};rR.prototype=Le(rs.prototype),Pe(rR.prototype,{render:function(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}});var Qb=function(e,n){this.renderer=e,n===void 0?(n=e.getSize(new U),this._pixelRatio=e.getPixelRatio(),this._width=n.width,this._height=n.height,n=new ae(this._width*this._pixelRatio,this._height*this._pixelRatio,{minFilter:1006,magFilter:1006,format:1023,stencilBuffer:!1}),n.texture.name="EffectComposer.rt1"):(this._pixelRatio=1,this._width=n.width,this._height=n.height),this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],vy===void 0&&console.error("THREE.EffectComposer relies on CopyShader"),cM===void 0&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new cM(vy),this.clock=new S0};Pe(Qb.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},insertPass:function(e,n){this.passes.splice(n,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},isLastEnabledPass:function(e){for(e+=1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0},render:function(e){e===void 0&&(e=this.clock.getDelta());var n=this.renderer.getRenderTarget(),o=!1,c,v=this.passes.length;for(c=0;c<v;c++){var g=this.passes[c];if(g.enabled!==!1){if(g.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(c),g.render(this.renderer,this.writeBuffer,this.readBuffer,e,o),g.needsSwap){if(o){var A=this.renderer.getContext(),y=this.renderer.state.buffers.stencil;y.setFunc(A.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),y.setFunc(A.EQUAL,1,4294967295)}this.swapBuffers()}hM!==void 0&&(g instanceof hM?o=!0:g instanceof rR&&(o=!1))}}this.renderer.setRenderTarget(n)},reset:function(e){e===void 0&&(e=this.renderer.getSize(new U),this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)),this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,n){this._width=e,this._height=n,e=this._width*this._pixelRatio,n=this._height*this._pixelRatio,this.renderTarget1.setSize(e,n),this.renderTarget2.setSize(e,n);for(var o=0;o<this.passes.length;o++)this.passes[o].setSize(e,n)},setPixelRatio:function(e){this._pixelRatio=e,this.setSize(this._width,this._height)}});var $b=function(){this.needsSwap=this.enabled=!0,this.renderToScreen=this.clear=!1};Pe($b.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),$b.FullScreenQuad=function(){var e=new kc(-1,1,1,-1,0,1),n=new pi(2,2),o=function(c){this._mesh=new _r(n,c)};return Object.defineProperty(o.prototype,"material",{get:function(){return this._mesh.material},set:function(c){this._mesh.material=c}}),Pe(o.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(c){c.render(this._mesh,e)}}),o}();var iA=function(e,n,o,c,v){rs.call(this),this.scene=e,this.camera=n,this.overrideMaterial=o,this.clearColor=c,this.clearAlpha=v!==void 0?v:0,this.clear=!0,this.needsSwap=this.clearDepth=!1};iA.prototype=Pe(Le(rs.prototype),{constructor:iA,render:function(e,n,o){if(n=e.autoClear,e.autoClear=!1,this.overrideMaterial!==void 0){var c=this.scene.overrideMaterial;this.scene.overrideMaterial=this.overrideMaterial}if(this.clearColor){var v=e.getClearColor().getHex(),g=e.getClearAlpha();e.setClearColor(this.clearColor,this.clearAlpha)}this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:o),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(v,g),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=c),e.autoClear=n}});var oA={defines:{SMAA_THRESHOLD:"0.1"},uniforms:{tDiffuse:{value:null},resolution:{value:new U(1/1024,1/512)}},vertexShader:`uniform vec2 resolution;
varying vec2 vUv;
varying vec4 vOffset[ 3 ];
void SMAAEdgeDetectionVS( vec2 texcoord ) {
	vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0,  1.0 );
	vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4(  1.0, 0.0, 0.0, -1.0 );
	vOffset[ 2 ] = texcoord.xyxy + resolution.xyxy * vec4( -2.0, 0.0, 0.0,  2.0 );
}
void main() {
	vUv = uv;
	SMAAEdgeDetectionVS( vUv );
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,fragmentShader:`uniform sampler2D tDiffuse;
varying vec2 vUv;
varying vec4 vOffset[ 3 ];
vec4 SMAAColorEdgeDetectionPS( vec2 texcoord, vec4 offset[3], sampler2D colorTex ) {
	vec2 threshold = vec2( SMAA_THRESHOLD, SMAA_THRESHOLD );
	vec4 delta;
	vec3 C = texture2D( colorTex, texcoord ).rgb;
	vec3 Cleft = texture2D( colorTex, offset[0].xy ).rgb;
	vec3 t = abs( C - Cleft );
	delta.x = max( max( t.r, t.g ), t.b );
	vec3 Ctop = texture2D( colorTex, offset[0].zw ).rgb;
	t = abs( C - Ctop );
	delta.y = max( max( t.r, t.g ), t.b );
	vec2 edges = step( threshold, delta.xy );
	if ( dot( edges, vec2( 1.0, 1.0 ) ) == 0.0 )
		discard;
	vec3 Cright = texture2D( colorTex, offset[1].xy ).rgb;
	t = abs( C - Cright );
	delta.z = max( max( t.r, t.g ), t.b );
	vec3 Cbottom  = texture2D( colorTex, offset[1].zw ).rgb;
	t = abs( C - Cbottom );
	delta.w = max( max( t.r, t.g ), t.b );
	float maxDelta = max( max( max( delta.x, delta.y ), delta.z ), delta.w );
	vec3 Cleftleft  = texture2D( colorTex, offset[2].xy ).rgb;
	t = abs( C - Cleftleft );
	delta.z = max( max( t.r, t.g ), t.b );
	vec3 Ctoptop = texture2D( colorTex, offset[2].zw ).rgb;
	t = abs( C - Ctoptop );
	delta.w = max( max( t.r, t.g ), t.b );
	maxDelta = max( max( maxDelta, delta.z ), delta.w );
	edges.xy *= step( 0.5 * maxDelta, delta.xy );
	return vec4( edges, 0.0, 0.0 );
}
void main() {
	gl_FragColor = SMAAColorEdgeDetectionPS( vUv, vOffset, tDiffuse );
}`},fV={SMAA_MAX_SEARCH_STEPS:"8",SMAA_AREATEX_MAX_DISTANCE:"16",SMAA_AREATEX_PIXEL_SIZE:"( 1.0 / vec2( 160.0, 560.0 ) )",SMAA_AREATEX_SUBTEX_SIZE:"( 1.0 / 7.0 )"},dV={tDiffuse:{value:null},tArea:{value:null},tSearch:{value:null},resolution:{value:new U(1/1024,1/512)}},pV={tDiffuse:{value:null},tColor:{value:null},resolution:{value:new U(1/1024,1/512)}},nR=function(e,n){rs.call(this),this.edgesRT=new ae(e,n,{depthBuffer:!1,stencilBuffer:!1,generateMipmaps:!1,minFilter:1006,format:1022}),this.edgesRT.texture.name="SMAAPass.edges",this.weightsRT=new ae(e,n,{depthBuffer:!1,stencilBuffer:!1,generateMipmaps:!1,minFilter:1006,format:1023}),this.weightsRT.texture.name="SMAAPass.weights";var o=this,c=new Image;c.src=this.getAreaTexture(),c.onload=function(){o.areaTexture.needsUpdate=!0},this.areaTexture=new J,this.areaTexture.name="SMAAPass.area",this.areaTexture.image=c,this.areaTexture.format=1022,this.areaTexture.minFilter=1006,this.areaTexture.generateMipmaps=!1,this.areaTexture.flipY=!1,c=new Image,c.src=this.getSearchTexture(),c.onload=function(){o.searchTexture.needsUpdate=!0},this.searchTexture=new J,this.searchTexture.name="SMAAPass.search",this.searchTexture.image=c,this.searchTexture.magFilter=1003,this.searchTexture.minFilter=1003,this.searchTexture.generateMipmaps=!1,this.searchTexture.flipY=!1,oA===void 0&&console.error("SMAAPass relies on SMAAShader"),this.uniformsEdges=Kg.clone(oA.uniforms),this.uniformsEdges.resolution.value.set(1/e,1/n),this.materialEdges=new en({defines:Pe({},oA.defines),uniforms:this.uniformsEdges,vertexShader:oA.vertexShader,fragmentShader:oA.fragmentShader}),this.uniformsWeights=Kg.clone(dV),this.uniformsWeights.resolution.value.set(1/e,1/n),this.uniformsWeights.tDiffuse.value=this.edgesRT.texture,this.uniformsWeights.tArea.value=this.areaTexture,this.uniformsWeights.tSearch.value=this.searchTexture,this.materialWeights=new en({defines:Pe({},fV),uniforms:this.uniformsWeights,vertexShader:`uniform vec2 resolution;
varying vec2 vUv;
varying vec4 vOffset[ 3 ];
varying vec2 vPixcoord;
void SMAABlendingWeightCalculationVS( vec2 texcoord ) {
	vPixcoord = texcoord / resolution;
	vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.25, 0.125, 1.25, 0.125 );
	vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.125, 0.25, -0.125, -1.25 );
	vOffset[ 2 ] = vec4( vOffset[ 0 ].xz, vOffset[ 1 ].yw ) + vec4( -2.0, 2.0, -2.0, 2.0 ) * resolution.xxyy * float( SMAA_MAX_SEARCH_STEPS );
}
void main() {
	vUv = uv;
	SMAABlendingWeightCalculationVS( vUv );
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,fragmentShader:`#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * resolution, 0.0 )
uniform sampler2D tDiffuse;
uniform sampler2D tArea;
uniform sampler2D tSearch;
uniform vec2 resolution;
varying vec2 vUv;
varying vec4 vOffset[3];
varying vec2 vPixcoord;
#if __VERSION__ == 100
vec2 round( vec2 x ) {
	return sign( x ) * floor( abs( x ) + 0.5 );
}
#endif
float SMAASearchLength( sampler2D searchTex, vec2 e, float bias, float scale ) {
	e.r = bias + e.r * scale;
	return 255.0 * texture2D( searchTex, e, 0.0 ).r;
}
float SMAASearchXLeft( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
	vec2 e = vec2( 0.0, 1.0 );
	for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {
		e = texture2D( edgesTex, texcoord, 0.0 ).rg;
		texcoord -= vec2( 2.0, 0.0 ) * resolution;
		if ( ! ( texcoord.x > end && e.g > 0.8281 && e.r == 0.0 ) ) break;
	}
	texcoord.x += 0.25 * resolution.x;
	texcoord.x += resolution.x;
	texcoord.x += 2.0 * resolution.x;
	texcoord.x -= resolution.x * SMAASearchLength(searchTex, e, 0.0, 0.5);
	return texcoord.x;
}
float SMAASearchXRight( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
	vec2 e = vec2( 0.0, 1.0 );
	for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {
		e = texture2D( edgesTex, texcoord, 0.0 ).rg;
		texcoord += vec2( 2.0, 0.0 ) * resolution;
		if ( ! ( texcoord.x < end && e.g > 0.8281 && e.r == 0.0 ) ) break;
	}
	texcoord.x -= 0.25 * resolution.x;
	texcoord.x -= resolution.x;
	texcoord.x -= 2.0 * resolution.x;
	texcoord.x += resolution.x * SMAASearchLength( searchTex, e, 0.5, 0.5 );
	return texcoord.x;
}
float SMAASearchYUp( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
	vec2 e = vec2( 1.0, 0.0 );
	for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {
		e = texture2D( edgesTex, texcoord, 0.0 ).rg;
		texcoord += vec2( 0.0, 2.0 ) * resolution;
		if ( ! ( texcoord.y > end && e.r > 0.8281 && e.g == 0.0 ) ) break;
	}
	texcoord.y -= 0.25 * resolution.y;
	texcoord.y -= resolution.y;
	texcoord.y -= 2.0 * resolution.y;
	texcoord.y += resolution.y * SMAASearchLength( searchTex, e.gr, 0.0, 0.5 );
	return texcoord.y;
}
float SMAASearchYDown( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
	vec2 e = vec2( 1.0, 0.0 );
	for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {
		e = texture2D( edgesTex, texcoord, 0.0 ).rg;
		texcoord -= vec2( 0.0, 2.0 ) * resolution;
		if ( ! ( texcoord.y < end && e.r > 0.8281 && e.g == 0.0 ) ) break;
	}
	texcoord.y += 0.25 * resolution.y;
	texcoord.y += resolution.y;
	texcoord.y += 2.0 * resolution.y;
	texcoord.y -= resolution.y * SMAASearchLength( searchTex, e.gr, 0.5, 0.5 );
	return texcoord.y;
}
vec2 SMAAArea( sampler2D areaTex, vec2 dist, float e1, float e2, float offset ) {
	vec2 texcoord = float( SMAA_AREATEX_MAX_DISTANCE ) * round( 4.0 * vec2( e1, e2 ) ) + dist;
	texcoord = SMAA_AREATEX_PIXEL_SIZE * texcoord + ( 0.5 * SMAA_AREATEX_PIXEL_SIZE );
	texcoord.y += SMAA_AREATEX_SUBTEX_SIZE * offset;
	return texture2D( areaTex, texcoord, 0.0 ).rg;
}
vec4 SMAABlendingWeightCalculationPS( vec2 texcoord, vec2 pixcoord, vec4 offset[ 3 ], sampler2D edgesTex, sampler2D areaTex, sampler2D searchTex, ivec4 subsampleIndices ) {
	vec4 weights = vec4( 0.0, 0.0, 0.0, 0.0 );
	vec2 e = texture2D( edgesTex, texcoord ).rg;
	if ( e.g > 0.0 ) {
		vec2 d;
		vec2 coords;
		coords.x = SMAASearchXLeft( edgesTex, searchTex, offset[ 0 ].xy, offset[ 2 ].x );
		coords.y = offset[ 1 ].y;
		d.x = coords.x;
		float e1 = texture2D( edgesTex, coords, 0.0 ).r;
		coords.x = SMAASearchXRight( edgesTex, searchTex, offset[ 0 ].zw, offset[ 2 ].y );
		d.y = coords.x;
		d = d / resolution.x - pixcoord.x;
		vec2 sqrt_d = sqrt( abs( d ) );
		coords.y -= 1.0 * resolution.y;
		float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 1, 0 ) ).r;
		weights.rg = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.y ) );
	}
	if ( e.r > 0.0 ) {
		vec2 d;
		vec2 coords;
		coords.y = SMAASearchYUp( edgesTex, searchTex, offset[ 1 ].xy, offset[ 2 ].z );
		coords.x = offset[ 0 ].x;
		d.x = coords.y;
		float e1 = texture2D( edgesTex, coords, 0.0 ).g;
		coords.y = SMAASearchYDown( edgesTex, searchTex, offset[ 1 ].zw, offset[ 2 ].w );
		d.y = coords.y;
		d = d / resolution.y - pixcoord.y;
		vec2 sqrt_d = sqrt( abs( d ) );
		coords.y -= 1.0 * resolution.y;
		float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 0, 1 ) ).g;
		weights.ba = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.x ) );
	}
	return weights;
}
void main() {
	gl_FragColor = SMAABlendingWeightCalculationPS( vUv, vPixcoord, vOffset, tDiffuse, tArea, tSearch, ivec4( 0.0 ) );
}`}),this.uniformsBlend=Kg.clone(pV),this.uniformsBlend.resolution.value.set(1/e,1/n),this.uniformsBlend.tDiffuse.value=this.weightsRT.texture,this.materialBlend=new en({uniforms:this.uniformsBlend,vertexShader:`uniform vec2 resolution;
varying vec2 vUv;
varying vec4 vOffset[ 2 ];
void SMAANeighborhoodBlendingVS( vec2 texcoord ) {
	vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0, 1.0 );
	vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( 1.0, 0.0, 0.0, -1.0 );
}
void main() {
	vUv = uv;
	SMAANeighborhoodBlendingVS( vUv );
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,fragmentShader:`uniform sampler2D tDiffuse;
uniform sampler2D tColor;
uniform vec2 resolution;
varying vec2 vUv;
varying vec4 vOffset[ 2 ];
vec4 SMAANeighborhoodBlendingPS( vec2 texcoord, vec4 offset[ 2 ], sampler2D colorTex, sampler2D blendTex ) {
	vec4 a;
	a.xz = texture2D( blendTex, texcoord ).xz;
	a.y = texture2D( blendTex, offset[ 1 ].zw ).g;
	a.w = texture2D( blendTex, offset[ 1 ].xy ).a;
	if ( dot(a, vec4( 1.0, 1.0, 1.0, 1.0 )) < 1e-5 ) {
		return texture2D( colorTex, texcoord, 0.0 );
	} else {
		vec2 offset;
		offset.x = a.a > a.b ? a.a : -a.b;
		offset.y = a.g > a.r ? -a.g : a.r;
		if ( abs( offset.x ) > abs( offset.y )) {
			offset.y = 0.0;
		} else {
			offset.x = 0.0;
		}
		vec4 C = texture2D( colorTex, texcoord, 0.0 );
		texcoord += sign( offset ) * resolution;
		vec4 Cop = texture2D( colorTex, texcoord, 0.0 );
		float s = abs( offset.x ) > abs( offset.y ) ? abs( offset.x ) : abs( offset.y );
		C.xyz = pow(C.xyz, vec3(2.2));
		Cop.xyz = pow(Cop.xyz, vec3(2.2));
		vec4 mixed = mix(C, Cop, s);
		mixed.xyz = pow(mixed.xyz, vec3(1.0 / 2.2));
		return mixed;
	}
}
void main() {
	gl_FragColor = SMAANeighborhoodBlendingPS( vUv, vOffset, tColor, tDiffuse );
}`}),this.needsSwap=!1,this.fsQuad=new rs.FullScreenQuad(null)};nR.prototype=Pe(Le(rs.prototype),{constructor:nR,render:function(e,n,o){this.uniformsEdges.tDiffuse.value=o.texture,this.fsQuad.material=this.materialEdges,e.setRenderTarget(this.edgesRT),this.clear&&e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialWeights,e.setRenderTarget(this.weightsRT),this.clear&&e.clear(),this.fsQuad.render(e),this.uniformsBlend.tColor.value=o.texture,this.fsQuad.material=this.materialBlend,this.renderToScreen?e.setRenderTarget(null):(e.setRenderTarget(n),this.clear&&e.clear()),this.fsQuad.render(e)},setSize:function(e,n){this.edgesRT.setSize(e,n),this.weightsRT.setSize(e,n),this.materialEdges.uniforms.resolution.value.set(1/e,1/n),this.materialWeights.uniforms.resolution.value.set(1/e,1/n),this.materialBlend.uniforms.resolution.value.set(1/e,1/n)},getAreaTexture:function(){return"data:image/png;base64,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"},getSearchTexture:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAAAAABIXyLAAAAAOElEQVRIx2NgGAWjYBSMglEwEICREYRgFBZBqDCSLA2MGPUIVQETE9iNUAqLR5gIeoQKRgwXjwAAGn4AtaFeYLEAAAAASUVORK5CYII="}});var fM={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new Ye(0)},defaultOpacity:{value:0}},vertexShader:`varying vec2 vUv;
void main() {
	vUv = uv;
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,fragmentShader:`uniform sampler2D tDiffuse;
uniform vec3 defaultColor;
uniform float defaultOpacity;
uniform float luminosityThreshold;
uniform float smoothWidth;
varying vec2 vUv;
void main() {
	vec4 texel = texture2D( tDiffuse, vUv );
	vec3 luma = vec3( 0.299, 0.587, 0.114 );
	float v = dot( texel.xyz, luma );
	vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );
	float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );
	gl_FragColor = mix( outputColor, texel, alpha );
}`},qp=function(e,n,o,c){rs.call(this),this.strength=n!==void 0?n:1,this.radius=o,this.threshold=c,this.resolution=e!==void 0?new U(e.x,e.y):new U(256,256),this.clearColor=new Ye(0,0,0);var v={minFilter:1006,magFilter:1006,format:1023};this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5,e=Math.round(this.resolution.x/2),o=Math.round(this.resolution.y/2),this.renderTargetBright=new ae(e,o,v),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(var g=0;g<this.nMips;g++){var A=new ae(e,o,v);A.texture.name="UnrealBloomPass.h"+g,A.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(A),A=new ae(e,o,v),A.texture.name="UnrealBloomPass.v"+g,A.texture.generateMipmaps=!1,this.renderTargetsVertical.push(A),e=Math.round(e/2),o=Math.round(o/2)}for(fM===void 0&&console.error("UnrealBloomPass relies on LuminosityHighPassShader"),this.highPassUniforms=Kg.clone(fM.uniforms),this.highPassUniforms.luminosityThreshold.value=c,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new en({uniforms:this.highPassUniforms,vertexShader:fM.vertexShader,fragmentShader:fM.fragmentShader,defines:{}}),this.separableBlurMaterials=[],c=[3,5,7,9,11],e=Math.round(this.resolution.x/2),o=Math.round(this.resolution.y/2),g=0;g<this.nMips;g++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(c[g])),this.separableBlurMaterials[g].uniforms.texSize.value=new U(e,o),e=Math.round(e/2),o=Math.round(o/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=n,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0,this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new oe(1,1,1),new oe(1,1,1),new oe(1,1,1),new oe(1,1,1),new oe(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,vy===void 0&&console.error("UnrealBloomPass relies on CopyShader"),this.copyUniforms=Kg.clone(vy.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new en({uniforms:this.copyUniforms,vertexShader:vy.vertexShader,fragmentShader:vy.fragmentShader,blending:2,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new Ye,this.oldClearAlpha=1,this.basic=new tt,this.fsQuad=new rs.FullScreenQuad(null)};qp.prototype=Pe(Le(rs.prototype),{constructor:qp,dispose:function(){for(var e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()},setSize:function(e,n){e=Math.round(e/2),n=Math.round(n/2),this.renderTargetBright.setSize(e,n);for(var o=0;o<this.nMips;o++)this.renderTargetsHorizontal[o].setSize(e,n),this.renderTargetsVertical[o].setSize(e,n),this.separableBlurMaterials[o].uniforms.texSize.value=new U(e,n),e=Math.round(e/2),n=Math.round(n/2)},render:function(e,n,o,c,v){this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha(),n=e.autoClear,e.autoClear=!1,e.setClearColor(this.clearColor,0),v&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=o.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=o.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e),c=this.renderTargetBright;for(var g=0;g<this.nMips;g++)this.fsQuad.material=this.separableBlurMaterials[g],this.separableBlurMaterials[g].uniforms.colorTexture.value=c.texture,this.separableBlurMaterials[g].uniforms.direction.value=qp.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[g]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[g].uniforms.colorTexture.value=this.renderTargetsHorizontal[g].texture,this.separableBlurMaterials[g].uniforms.direction.value=qp.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[g]),e.clear(),this.fsQuad.render(e),c=this.renderTargetsVertical[g];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,v&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?e.setRenderTarget(null):e.setRenderTarget(o),this.fsQuad.render(e),e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=n},getSeperableBlurMaterial:function(e){return new en({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new U(.5,.5)},direction:{value:new U(.5,.5)}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;				uniform vec2 direction;								float gaussianPdf(in float x, in float sigma) {					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;				}				void main() {
					vec2 invSize = 1.0 / texSize;					float fSigma = float(SIGMA);					float weightSum = gaussianPdf(0.0, fSigma);					vec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {						float x = float(i);						float w = gaussianPdf(x, fSigma);						vec2 uvOffset = direction * invSize * x;						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;						diffuseSum += (sample1 + sample2) * w;						weightSum += 2.0 * w;					}					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})},getCompositeMaterial:function(e){return new en({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:"varying vec2 vUv;				uniform sampler2D blurTexture1;				uniform sampler2D blurTexture2;				uniform sampler2D blurTexture3;				uniform sampler2D blurTexture4;				uniform sampler2D blurTexture5;				uniform sampler2D dirtTexture;				uniform float bloomStrength;				uniform float bloomRadius;				uniform float bloomFactors[NUM_MIPS];				uniform vec3 bloomTintColors[NUM_MIPS];								float lerpBloomFactor(const in float factor) { 					float mirrorFactor = 1.2 - factor;					return mix(factor, mirrorFactor, bloomRadius);				}								void main() {					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + 													 lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + 													 lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + 													 lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + 													 lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );				}"})}}),qp.BlurDirectionX=new U(1,0),qp.BlurDirectionY=new U(0,1);var mV=function(e){function n(o){return Fi(this,n),sa(this,(n.__proto__||Pa(n)).call(this,o))}return Oa(n,e),mo(n,[{key:"initialize",value:function(o){var c=o.camera,v=o.renderer;if(!this._initialize){if(this.scene=o.scene,this.camera=c,this.renderer=v,o=this.options.passes,this._initialize=!0,this.renderScene=new iA(this.scene,this.camera),c=new Qb(this.renderer),c.addPass(this.renderScene),this.passes=[],o)for(var g=0;g<o.length;g++){var A=o[g],y=void 0;switch(A.name){case"unrealBloom":y=A.strength||1;var T=A.radius||0,D=A.threshold||.5;y=new qp(new Yp.Vector2(window.innerWidth*v.getPixelRatio(),window.innerHeight*v.getPixelRatio()),y,T,D);break;case"SMAA":y=new nR(window.innerWidth*v.getPixelRatio(),window.innerHeight*v.getPixelRatio())}if(y){for(var X in A)y[X]=A[X];c.addPass(y)}}this.composer=c}}},{key:"addRender",value:function(o){this.renderScene&&this.renderScene.addRender(o)}},{key:"render",value:function(){this.composer.render(this.scene,this.camera)}}]),n}(tR);qp.prototype.getSeperableBlurMaterial=function(e){return new Yp.ShaderMaterial({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new Yp.Vector2(.5,.5)},direction:{value:new Yp.Vector2(.5,.5)}},vertexShader:`varying vec2 vUv;
            void main() {
                vUv = uv;
                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
            }`,fragmentShader:`#include <common>            varying vec2 vUv;
            uniform sampler2D colorTexture;
            uniform vec2 texSize;            uniform vec2 direction;                        float gaussianPdf(in float x, in float sigma) {                return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;            }            void main() {
                vec2 invSize = 1.0 / texSize;                float fSigma = float(SIGMA);                float weightSum = gaussianPdf(0.0, fSigma);                vec4 diffuseSum = texture2D( colorTexture, vUv).rgba * weightSum;                for( int i = 1; i < KERNEL_RADIUS; i ++ ) {                    float x = float(i);                    float w = gaussianPdf(x, fSigma);                    vec2 uvOffset = direction * invSize * x;                    vec4 sample1 = texture2D( colorTexture, vUv + uvOffset).rgba;                    vec4 sample2 = texture2D( colorTexture, vUv - uvOffset).rgba;                    diffuseSum += (sample1 + sample2) * w;                    weightSum += 2.0 * w;                }                gl_FragColor = vec4(diffuseSum/weightSum);
            }`})},iA.prototype.addRender=function(e){this.renderCbk=e},iA.prototype.render=function(e,n,o){if(n=e.autoClear,e.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial,this.clearColor){var c=e.getClearColor().getHex(),v=e.getClearAlpha();e.setClearColor(this.clearColor,this.clearAlpha)}this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:o),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.renderCbk&&this.renderCbk(),this.clearColor&&e.setClearColor(c,v),this.scene.overrideMaterial=null,e.autoClear=n};var gV=function(e){function n(o){return Fi(this,n),o=sa(this,(n.__proto__||Pa(n)).call(this,o)),o.time=0,o.autoUpdate=!0,o}return Oa(n,e),mo(n,[{key:"getDefaultOptions",value:function(){return{totalRadian:Math.PI,color:16711680,radius:50,step:.1}}},{key:"initialize",value:function(o){this.threeLayer=o,this.addOverlay()}},{key:"onChanged",value:function(o,c){this.threeLayer&&(this.removeOverlay(),this.addOverlay())}},{key:"onDestroy",value:function(){this.removeOverlay()}},{key:"render",value:function(){this.time+=this.options.step/10,1<this.time&&(this.time=0);for(var o=this.shapeMarker.children,c=0;c<o.length;c++)o[c].material.uniforms.periodRatio.value=this.time}},{key:"removeOverlay",value:function(){this.threeLayer.remove(this.shapeMarker)}},{key:"addOverlay",value:function(){this.shapeMarker=new eo.Group;for(var o=this.threeLayer,c=this.getData(),v=0;v<c.length;v++){var g=o.normizedPoint(c[v].geometry.coordinates);g=this.create3dCanvasRipple({originalData:c[v],normizedData:g}),this.shapeMarker.add(g)}o.add(this.shapeMarker)}},{key:"create3dCanvasRipple",value:function(o){var c=this.options,v=c.totalRadian,g=c.color;c=c.size;var A=o.originalData;o=o.normizedData,Object.prototype.toString.call(g)==="[object Function]"&&(g=g(A)),c=Object.prototype.toString.call(c)==="[object Function]"?c(A):Number(c),A={totalRadian:{type:"f",value:v},glowColor:{type:"c",value:new eo.Color(g)},radius:{type:"f",value:c},periodRatio:{type:"f",value:0}},g=new eo.Geometry;for(var y=v/(c/2),T=y;T<=v;T+=y){var D=c*Math.sin(T),X=c*Math.cos(T);g.vertices.push(new eo.Vector3(0,0,T/v)),g.vertices.push(new eo.Vector3(X,D,T/v))}for(v=0,c=g.vertices.length;v<c-2;++v)g.faces.push(new eo.Face3(v,v+1,v+3));return v=new eo.ShaderMaterial({uniforms:A,vertexShader:"varying vec4 vFragColor;varying vec4 vPosition;uniform float radius;uniform float totalRadian;uniform float periodRatio;uniform vec3 glowColor;void main(){float radian=radians(360.0*periodRatio);float s=sin(radian);float c=cos(radian);vec2 rotatedPostion=vec2(position.x*s+position.y*c,position.y*s-position.x*c);gl_Position=projectionMatrix*modelViewMatrix*vec4(rotatedPostion,0,1.0);vFragColor=vec4(glowColor,pow(position.z,1.3));}",fragmentShader:"varying vec4 vFragColor;void main(){gl_FragColor=vFragColor;}",blending:eo.NormalBlending,transparent:!0,depthWrite:!1}),v=new eo.Mesh(g,v),v.position.set(o[0],o[1],o[2]||0),v}}]),n}(tR),e6=M(function(e,n){(function(){function o(){this.positions=[],this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[],this.counters=[],this.geometry=new g.BufferGeometry,this.widthCallback=null,this.matrixWorld=new g.Matrix4}function c(A,y,T,D,X){if(A=A.subarray||A.slice?A:A.buffer,T=T.subarray||T.slice?T:T.buffer,A=y?A.subarray?A.subarray(y,X&&y+X):A.slice(y,X&&y+X):A,T.set)T.set(A,D);else for(y=0;y<A.length;y++)T[y+D]=A[y];return T}function v(A){g.ShaderMaterial.call(this,{uniforms:Pe({},g.UniformsLib.fog,{lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new g.Color(16777215)},opacity:{value:1},resolution:{value:new g.Vector2(1,1)},sizeAttenuation:{value:1},near:{value:1},far:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new g.Vector2(1,1)}}),vertexShader:g.ShaderChunk.meshline_vert,fragmentShader:g.ShaderChunk.meshline_frag}),this.type="MeshLineMaterial",Rn(this,{lineWidth:{enumerable:!0,get:function(){return this.uniforms.lineWidth.value},set:function(y){this.uniforms.lineWidth.value=y}},map:{enumerable:!0,get:function(){return this.uniforms.map.value},set:function(y){this.uniforms.map.value=y}},useMap:{enumerable:!0,get:function(){return this.uniforms.useMap.value},set:function(y){this.uniforms.useMap.value=y}},alphaMap:{enumerable:!0,get:function(){return this.uniforms.alphaMap.value},set:function(y){this.uniforms.alphaMap.value=y}},useAlphaMap:{enumerable:!0,get:function(){return this.uniforms.useAlphaMap.value},set:function(y){this.uniforms.useAlphaMap.value=y}},color:{enumerable:!0,get:function(){return this.uniforms.color.value},set:function(y){this.uniforms.color.value=y}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(y){this.uniforms.opacity.value=y}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(y){this.uniforms.resolution.value.copy(y)}},sizeAttenuation:{enumerable:!0,get:function(){return this.uniforms.sizeAttenuation.value},set:function(y){this.uniforms.sizeAttenuation.value=y}},near:{enumerable:!0,get:function(){return this.uniforms.near.value},set:function(y){this.uniforms.near.value=y}},far:{enumerable:!0,get:function(){return this.uniforms.far.value},set:function(y){this.uniforms.far.value=y}},dashArray:{enumerable:!0,get:function(){return this.uniforms.dashArray.value},set:function(y){this.uniforms.dashArray.value=y,this.useDash=y!==0?1:0}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(y){this.uniforms.dashOffset.value=y}},dashRatio:{enumerable:!0,get:function(){return this.uniforms.dashRatio.value},set:function(y){this.uniforms.dashRatio.value=y}},useDash:{enumerable:!0,get:function(){return this.uniforms.useDash.value},set:function(y){this.uniforms.useDash.value=y}},visibility:{enumerable:!0,get:function(){return this.uniforms.visibility.value},set:function(y){this.uniforms.visibility.value=y}},alphaTest:{enumerable:!0,get:function(){return this.uniforms.alphaTest.value},set:function(y){this.uniforms.alphaTest.value=y}},repeat:{enumerable:!0,get:function(){return this.uniforms.repeat.value},set:function(y){this.uniforms.repeat.value.copy(y)}}}),this.setValues(A)}var g=typeof u<"u"&&Kb||this.THREE;if(!g)throw Error("MeshLine requires three.js");o.prototype.setMatrixWorld=function(A){this.matrixWorld=A},o.prototype.setGeometry=function(A,y){if(this.widthCallback=y,this.positions=[],this.counters=[],A instanceof g.Geometry)for(var T=0;T<A.vertices.length;T++){var D=A.vertices[T];y=T/A.vertices.length,this.positions.push(D.x,D.y,D.z),this.positions.push(D.x,D.y,D.z),this.counters.push(y),this.counters.push(y)}if(A instanceof Float32Array||A instanceof Array)for(T=0;T<A.length;T+=3)y=T/A.length,this.positions.push(A[T],A[T+1],A[T+2]),this.positions.push(A[T],A[T+1],A[T+2]),this.counters.push(y),this.counters.push(y);this.process()},o.prototype.raycast=function(){var A=new g.Matrix4,y=new g.Ray,T=new g.Sphere;return function(D,X){var I=D.linePrecision;I*=I;var b=this.geometry;if(b.boundingSphere===null&&b.computeBoundingSphere(),T.copy(b.boundingSphere),T.applyMatrix4(this.matrixWorld),D.ray.intersectSphere(T)!==!1){A.getInverse(this.matrixWorld),y.copy(D.ray).applyMatrix4(A);var N=new g.Vector3,k=new g.Vector3,G=new g.Vector3,re=new g.Vector3,se=this instanceof g.LineSegments?2:1;if(b instanceof g.BufferGeometry){var ue=b.index,we=b.attributes;if(ue!==null){b=ue.array,we=we.position.array,ue=0;for(var Te=b.length-1;ue<Te;ue+=se){var je=b[ue+1];N.fromArray(we,3*b[ue]),k.fromArray(we,3*je),je=y.distanceSqToSegment(N,k,re,G),je>I||(re.applyMatrix4(this.matrixWorld),je=D.ray.origin.distanceTo(re),je<D.near||je>D.far||X.push({distance:je,point:G.clone().applyMatrix4(this.matrixWorld),index:ue,face:null,faceIndex:null,object:this}))}}else for(we=we.position.array,ue=0,Te=we.length/3-1;ue<Te;ue+=se)N.fromArray(we,3*ue),k.fromArray(we,3*ue+3),je=y.distanceSqToSegment(N,k,re,G),je>I||(re.applyMatrix4(this.matrixWorld),je=D.ray.origin.distanceTo(re),je<D.near||je>D.far||X.push({distance:je,point:G.clone().applyMatrix4(this.matrixWorld),index:ue,face:null,faceIndex:null,object:this}))}else if(b instanceof g.Geometry)for(N=b.vertices,k=N.length,ue=0;ue<k-1;ue+=se)je=y.distanceSqToSegment(N[ue],N[ue+1],re,G),je>I||(re.applyMatrix4(this.matrixWorld),je=D.ray.origin.distanceTo(re),je<D.near||je>D.far||X.push({distance:je,point:G.clone().applyMatrix4(this.matrixWorld),index:ue,face:null,faceIndex:null,object:this}))}}}(),o.prototype.compareV3=function(A,y){return A*=6,y*=6,this.positions[A]===this.positions[y]&&this.positions[A+1]===this.positions[y+1]&&this.positions[A+2]===this.positions[y+2]},o.prototype.copyV3=function(A){return A*=6,[this.positions[A],this.positions[A+1],this.positions[A+2]]},o.prototype.process=function(){var A=this.positions.length/6;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[];for(var y=0;y<A;y++)this.side.push(1),this.side.push(-1);for(y=0;y<A;y++){var T=this.widthCallback?this.widthCallback(y/(A-1)):1;this.width.push(T),this.width.push(T)}for(y=0;y<A;y++)this.uvs.push(y/(A-1),0),this.uvs.push(y/(A-1),1);for(T=this.compareV3(0,A-1)?this.copyV3(A-2):this.copyV3(0),this.previous.push(T[0],T[1],T[2]),this.previous.push(T[0],T[1],T[2]),y=0;y<A-1;y++)T=this.copyV3(y),this.previous.push(T[0],T[1],T[2]),this.previous.push(T[0],T[1],T[2]);for(y=1;y<A;y++)T=this.copyV3(y),this.next.push(T[0],T[1],T[2]),this.next.push(T[0],T[1],T[2]);for(T=this.compareV3(A-1,0)?this.copyV3(1):this.copyV3(A-1),this.next.push(T[0],T[1],T[2]),this.next.push(T[0],T[1],T[2]),y=0;y<A-1;y++)T=2*y,this.indices_array.push(T,T+1,T+2),this.indices_array.push(T+2,T+1,T+3);this.attributes?(this.attributes.position.copyArray(new Float32Array(this.positions)),this.attributes.position.needsUpdate=!0,this.attributes.previous.copyArray(new Float32Array(this.previous)),this.attributes.previous.needsUpdate=!0,this.attributes.next.copyArray(new Float32Array(this.next)),this.attributes.next.needsUpdate=!0,this.attributes.side.copyArray(new Float32Array(this.side)),this.attributes.side.needsUpdate=!0,this.attributes.width.copyArray(new Float32Array(this.width)),this.attributes.width.needsUpdate=!0,this.attributes.uv.copyArray(new Float32Array(this.uvs)),this.attributes.uv.needsUpdate=!0,this.attributes.index.copyArray(new Uint16Array(this.indices_array)),this.attributes.index.needsUpdate=!0):this.attributes={position:new g.BufferAttribute(new Float32Array(this.positions),3),previous:new g.BufferAttribute(new Float32Array(this.previous),3),next:new g.BufferAttribute(new Float32Array(this.next),3),side:new g.BufferAttribute(new Float32Array(this.side),1),width:new g.BufferAttribute(new Float32Array(this.width),1),uv:new g.BufferAttribute(new Float32Array(this.uvs),2),index:new g.BufferAttribute(new Uint16Array(this.indices_array),1),counters:new g.BufferAttribute(new Float32Array(this.counters),1)},this.geometry.setAttribute("position",this.attributes.position),this.geometry.setAttribute("previous",this.attributes.previous),this.geometry.setAttribute("next",this.attributes.next),this.geometry.setAttribute("side",this.attributes.side),this.geometry.setAttribute("width",this.attributes.width),this.geometry.setAttribute("uv",this.attributes.uv),this.geometry.setAttribute("counters",this.attributes.counters),this.geometry.setIndex(this.attributes.index)},o.prototype.advance=function(A){var y=this.attributes.position.array,T=this.attributes.next.array,D=y.length;c(y,0,this.attributes.previous.array,0,D),c(y,6,y,0,D-6),y[D-6]=A.x,y[D-5]=A.y,y[D-4]=A.z,y[D-3]=A.x,y[D-2]=A.y,y[D-1]=A.z,c(y,6,T,0,D-6),T[D-6]=A.x,T[D-5]=A.y,T[D-4]=A.z,T[D-3]=A.x,T[D-2]=A.y,T[D-1]=A.z,this.attributes.position.needsUpdate=!0,this.attributes.previous.needsUpdate=!0,this.attributes.next.needsUpdate=!0},g.ShaderChunk.meshline_vert=["",g.ShaderChunk.logdepthbuf_pars_vertex,g.ShaderChunk.fog_pars_vertex,`\r
attribute vec3 previous;\r
attribute vec3 next;\r
attribute float side;\r
attribute float width;\r
attribute float counters;\r
\r
uniform vec2 resolution;\r
uniform float lineWidth;\r
uniform vec3 color;\r
uniform float opacity;\r
uniform float near;\r
uniform float far;\r
uniform float sizeAttenuation;\r
\r
varying vec2 vUV;\r
varying vec4 vColor;\r
varying float vCounters;\r
\r
vec2 fix( vec4 i, float aspect ) {\r
\r
    vec2 res = i.xy / i.w;\r
    res.x *= aspect;\r
	 vCounters = counters;\r
    return res;\r
\r
}\r
\r
void main() {\r
\r
    float aspect = resolution.x / resolution.y;\r
    float pixelWidthRatio = 1. / (resolution.x * projectionMatrix[0][0]);\r
\r
    vColor = vec4( color, opacity );\r
    vUV = uv;\r
\r
    mat4 m = projectionMatrix * modelViewMatrix;\r
    vec4 finalPosition = m * vec4( position, 1.0 );\r
    vec4 prevPos = m * vec4( previous, 1.0 );\r
    vec4 nextPos = m * vec4( next, 1.0 );\r
\r
    vec2 currentP = fix( finalPosition, aspect );\r
    vec2 prevP = fix( prevPos, aspect );\r
    vec2 nextP = fix( nextPos, aspect );\r
\r
    float pixelWidth = finalPosition.w * pixelWidthRatio;\r
    float w = 1.8 * pixelWidth * lineWidth * width;\r
\r
    if( sizeAttenuation == 1. ) {\r
        w = 1.8 * lineWidth * width;\r
    }\r
\r
    vec2 dir;\r
    if( nextP == currentP ) dir = normalize( currentP - prevP );\r
    else if( prevP == currentP ) dir = normalize( nextP - currentP );\r
    else {\r
        vec2 dir1 = normalize( currentP - prevP );\r
        vec2 dir2 = normalize( nextP - currentP );\r
        dir = normalize( dir1 + dir2 );\r
\r
        vec2 perp = vec2( -dir1.y, dir1.x );\r
        vec2 miter = vec2( -dir.y, dir.x );\r
        //w = clamp( w / dot( miter, perp ), 0., 4. * lineWidth * width );\r
\r
    }\r
\r
    //vec2 normal = ( cross( vec3( dir, 0. ), vec3( 0., 0., 1. ) ) ).xy;\r
    vec2 normal = vec2( -dir.y, dir.x );\r
    normal.x /= aspect;\r
    normal *= .5 * w;\r
\r
    vec4 offset = vec4( normal * side, 0.0, 1.0 );\r
    finalPosition.xy += offset.xy;\r
\r
    gl_Position = finalPosition;\r
`,g.ShaderChunk.logdepthbuf_vertex,g.ShaderChunk.fog_vertex&&"    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",g.ShaderChunk.fog_vertex,"}"].join(`\r
`),g.ShaderChunk.meshline_frag=["",g.ShaderChunk.fog_pars_fragment,g.ShaderChunk.logdepthbuf_pars_fragment,`\r
uniform sampler2D map;\r
uniform sampler2D alphaMap;\r
uniform float useMap;\r
uniform float useAlphaMap;\r
uniform float useDash;\r
uniform float dashArray;\r
uniform float dashOffset;\r
uniform float dashRatio;\r
uniform float visibility;\r
uniform float alphaTest;\r
uniform vec2 repeat;\r
\r
varying vec2 vUV;\r
varying vec4 vColor;\r
varying float vCounters;\r
\r
void main() {\r
`,g.ShaderChunk.logdepthbuf_fragment,`\r
    vec4 c = vColor;\r
    if( useMap == 1. ) c *= texture2D( map, vUV * repeat );\r
    if( useAlphaMap == 1. ) c.a *= texture2D( alphaMap, vUV * repeat ).a;\r
    if( c.a < alphaTest ) discard;\r
    if( useDash == 1. ){\r
        c.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));\r
    }\r
    gl_FragColor = c;\r
    gl_FragColor.a *= step(vCounters, visibility);\r
`,g.ShaderChunk.fog_fragment,"}"].join(`\r
`),v.prototype=Le(g.ShaderMaterial.prototype),v.prototype.constructor=v,v.prototype.isMeshLineMaterial=!0,v.prototype.copy=function(A){return g.ShaderMaterial.prototype.copy.call(this,A),this.lineWidth=A.lineWidth,this.map=A.map,this.useMap=A.useMap,this.alphaMap=A.alphaMap,this.useAlphaMap=A.useAlphaMap,this.color.copy(A.color),this.opacity=A.opacity,this.resolution.copy(A.resolution),this.sizeAttenuation=A.sizeAttenuation,this.near=A.near,this.far=A.far,this.dashArray.copy(A.dashArray),this.dashOffset.copy(A.dashOffset),this.dashRatio.copy(A.dashRatio),this.useDash=A.useDash,this.visibility=A.visibility,this.alphaTest=A.alphaTest,this.repeat.copy(A.repeat),this},e.exports&&(n=e.exports={MeshLine:o,MeshLineMaterial:v}),n.MeshLine=o,n.MeshLineMaterial=v}).call(YC)}),vV=e6.MeshLine,yV=e6.MeshLineMaterial,xV=function(e){function n(o){return Fi(this,n),o=sa(this,(n.__proto__||Pa(n)).call(this,o)),o.staticDashArray=2,o.time=0,o.autoUpdate=!0,o}return Oa(n,e),mo(n,[{key:"getDefaultOptions",value:function(){return{color:16777215,textureColor:16777215,textureWidth:10,textureLength:30,step:.1}}},{key:"initialize",value:function(o){this.threeLayer=o,this.addOverlay()}},{key:"onChanged",value:function(o,c){this.threeLayer&&(this.removeOverlay(),this.addOverlay())}},{key:"onDestroy",value:function(){this.removeOverlay()}},{key:"render",value:function(){var o=this.getOptions(),c=o.textureWidth,v=o.style;o=o.step/10,this.time+=o,2<this.time&&(this.time=0);for(var g=this.flyLine.children,A=0;A<g.length;A++){var y=g[A],T=y.hash;y.children[0].material.uniforms.lineWidth.value=c*(1+.2*Math.sin(5*this.time)),y.children[0].material.uniforms.dashOffset.value=v==="chaos"?y.children[0].material.uniforms.dashOffset.value-o:(this.staticDashArray+T)*(1-this.time/2)}}},{key:"removeOverlay",value:function(){this.threeLayer.remove(this.flyLine)}},{key:"addOverlay",value:function(){var o=this;this.flyLine=new eo.Group;var c=this.threeLayer,v=new eo.TextureLoader,g=this.getData();v.load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFkAAABZCAQAAAD/AkAkAAAACXBIWXMAAAsTAAALEwEAmpwYAAADGWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjaY2BgnuDo4uTKJMDAUFBUUuQe5BgZERmlwH6egY2BmYGBgYGBITG5uMAxIMCHgYGBIS8/L5UBA3y7xsDIwMDAcFnX0cXJlYE0wJpcUFTCwMBwgIGBwSgltTiZgYHhCwMDQ3p5SUEJAwNjDAMDg0hSdkEJAwNjAQMDg0h2SJAzAwNjCwMDE09JakUJAwMDg3N+QWVRZnpGiYKhpaWlgmNKflKqQnBlcUlqbrGCZ15yflFBflFiSWoKAwMD1A4GBgYGXpf8EgX3xMw8BUNTVQYqg4jIKAX08EGIIUByaVEZhMXIwMDAIMCgxeDHUMmwiuEBozRjFOM8xqdMhkwNTJeYNZgbme+y2LDMY2VmzWa9yubEtoldhX0mhwBHJycrZzMXM1cbNzf3RB4pnqW8xryH+IL5nvFXCwgJrBZ0E3wk1CisKHxYJF2UV3SrWJw4p/hWiRRJYcmjUhXSutJPZObIhsoJyp2V71HwUeRVvKA0RTlKRUnltepWtUZ1Pw1Zjbea+7QmaqfqWOsK6b7SO6I/36DGMMrI0ljS+LfJPdPDZivM+y0qLBOtfKwtbFRtRexY7L7aP3e47XjB6ZjzXpetruvdVrov9VjkudBrgfdCn8W+y/xW+a8P2Bq4N+hY8PmQW6HPwr5EMEUKRilFG8e4xUbF5cW3JMxO3Jx0Nvl5KlOaXLpNRlRmVdas7D059/KY8tULfAqLi2YXHy55WyZR7lJRWDmv6mz131q9uvj6SQ3HGn83G7Skt85ru94h2Ond1d59uJehz76/bsK+if8nO05pnXpiOu+M4JmzZj2aozW3ZN6+BVwLwxYtXvxxqcOyCcsfrjRe1br65lrddU3rb2402NSx+cFWq21Tt3/Y6btr1R6Oven7jh9QP9h56PURv6Obj4ufqD355LT3mS3nZM+3X/h0Ke7yqasW15bdEL3ZeuvrnfS7N+/7PDjwyPTx6qeKz2a+EHzZ9Zr5Td3bn+9LP3z6VPD53de8b+9+5P/88Lv4z7d/Vf//AwAqvx2K829RWwAAOGtpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+Cjx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgICAgICAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICAgICAgICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgICAgICAgICAgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iCiAgICAgICAgICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+QWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCk8L3htcDpDcmVhdG9yVG9vbD4KICAgICAgICAgPHhtcDpDcmVhdGVEYXRlPjIwMTktMDYtMjdUMTk6MzE6MTUrMDg6MDA8L3htcDpDcmVhdGVEYXRlPgogICAgICAgICA8eG1wOk1vZGlmeURhdGU+MjAxOS0wOC0xOVQxNjo1Nzo1MCswODowMDwveG1wOk1vZGlmeURhdGU+CiAgICAgICAgIDx4bXA6TWV0YWRhdGFEYXRlPjIwMTktMDgtMTlUMTY6NTc6NTArMDg6MDA8L3htcDpNZXRhZGF0YURhdGU+CiAgICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2UvcG5nPC9kYzpmb3JtYXQ+CiAgICAgICAgIDxwaG90b3Nob3A6Q29sb3JNb2RlPjE8L3Bob3Rvc2hvcDpDb2xvck1vZGU+CiAgICAgICAgIDxwaG90b3Nob3A6SUNDUHJvZmlsZT5Eb3QgR2FpbiAxNSU8L3Bob3Rvc2hvcDpJQ0NQcm9maWxlPgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjQ5MmI1NTQ1LWIwNmQtNGI0Yi1iMWExLTZiN2NiNzExNzA5MjwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+eG1wLmRpZDo0OTJiNTU0NS1iMDZkLTRiNGItYjFhMS02YjdjYjcxMTcwOTI8L3htcE1NOkRvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+eG1wLmRpZDo0OTJiNTU0NS1iMDZkLTRiNGItYjFhMS02YjdjYjcxMTcwOTI8L3htcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkhpc3Rvcnk+CiAgICAgICAgICAgIDxyZGY6U2VxPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5jcmVhdGVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6NDkyYjU1NDUtYjA2ZC00YjRiLWIxYTEtNmI3Y2I3MTE3MDkyPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE5LTA2LTI3VDE5OjMxOjE1KzA4OjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNyAoTWFjaW50b3NoKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOlNlcT4KICAgICAgICAgPC94bXBNTTpIaXN0b3J5PgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpYUmVzb2x1dGlvbj43MjAwMDAvMTAwMDA8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOllSZXNvbHV0aW9uPjcyMDAwMC8xMDAwMDwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICAgICAgICAgPGV4aWY6Q29sb3JTcGFjZT42NTUzNTwvZXhpZjpDb2xvclNwYWNlPgogICAgICAgICA8ZXhpZjpQaXhlbFhEaW1lbnNpb24+ODk8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+ODk8L2V4aWY6UGl4ZWxZRGltZW5zaW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0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",function(A){for(var y=0;y<g.length;y++){var T=g[y].geometry.coordinates.map(function(D){return new(Function.prototype.bind.apply(eo.Vector3,[null].concat(jb(c.normizedPoint(D)))))});T=o.createFlyLine({originalData:g[y],curveData:T,texture:A}),o.flyLine.add(T)}c.add(o.flyLine)})}},{key:"createFlyLine",value:function(o){var c=this.options,v=c.color,g=c.textureColor,A=c.textureWidth,y=o.originalData,T=o.curveData;o=o.texture;var D=Math.random();c=Math.min(1,1-c.textureLength/100),c=Math.max(0,c),Object.prototype.toString.call(v)==="[object Function]"&&(v=v(y)),Object.prototype.toString.call(g)==="[object Function]"&&(g=g(y)),y=new eo.Geometry,y.vertices=T,y.verticesNeedUpdate=!0,v=new eo.LineBasicMaterial({linewidth:1,color:new eo.Color(v),blending:eo.AdditiveBlending,depthTest:!0,depthWrite:!1,transparent:!0,opacity:.3,linecap:"round",linejoin:"round"}),v=new eo.Line(y,v),v.renderDepth=!1,v.hash=D,y=new vV;for(var X=new eo.Geometry,I=0;I<T.length;I++){var b=T[I];X.vertices.push(new eo.Vector3(b.x,b.y,b.z))}return y.setGeometry(X,function(N){return 1-N}),g=new yV({map:o,useMap:!0,color:new eo.Color(g),opacity:1,dashArray:this.staticDashArray+D,dashOffset:0,dashRatio:c,sizeAttenuation:!0,lineWidth:A,depthWrite:!1,depthTest:!0,alphaTest:!1,transparent:!0,blending:eo.AdditiveBlending,side:eo.DoubleSide}),g=new eo.Mesh(y.geometry,g),v.add(g),v}}]),n}(tR);a.THREELoader=Yp,a.PostProcessing=mV,a.FanLayer=gV,a.FlyLineLayer=xV,a.ThreeLayer=Jb,Object.defineProperty(a,"__esModule",{value:!0})})}(vT,vT.exports)),vT.exports}Object.defineProperty(kD,"__esModule",{value:!0});var HD=xo,T5=HD.__importStar(B3),n8=HD.__importStar(xse()),Ase=dl,wse=UD,Cse=function(t){HD.__extends(i,t);function i(a){var u=t.call(this,a)||this;u._createLayer=!1;var m=u;return u.props.getMethods&&u.props.getMethods({setViewport:u.setViewport.bind(m)}),u}return i.prototype.componentDidMount=function(){this.initialize()},i.prototype.componentWillUnmount=function(){this.destroy()},i.prototype.componentDidUpdate=function(a){var u=this.props,m=u.type,M=u.data,L=u.options,z=u.autoViewport,U=a.type,W=a.data,J=a.options,te=a.autoViewport;if(!this.map||!this.layer){this.initialize();return}if(m!==U){this.destroy(),this.initialize();return}JSON.stringify(J)!==JSON.stringify(L)&&this.layer.setOptions(L),JSON.stringify(W)!==JSON.stringify(M)&&this.layer.setData(M),z&&(JSON.stringify(W)!==JSON.stringify(M)||z!==te)&&this.setViewport()},i.prototype.destroy=function(){this.layer&&this.view&&(this._createLayer=!1,this.view.removeLayer(this.layer),this.layer.destroy(),this.layer=null)},i.prototype.initialize=function(){var a=this.map=this.getMap(),u=this.view=this.props.view||this.context.view;!a||!u||(this._createLayer||this.createLayers(),this.layer.setData(this.props.data),this.props.autoViewport&&this.setViewport())},i.prototype.setViewport=function(){var a=this.props.coordType==="bd09mc",u=function(M){var L=new BMapGL.Point(M[0],M[1]);return a?BMapGL.Projection.convertMC2LL(L):L},m=[];this.props.data.forEach(function(M){M.geometry.type==="Point"?m.push(u(M.geometry.coordinates)):M.geometry.type==="LineString"?M.geometry.coordinates.forEach(function(L){m.push(u(L))}):M.geometry.type==="Polygon"?M.geometry.coordinates[0].forEach(function(L){m.push(u(L))}):M.geometry.type==="MultiPolygon"&&M.geometry.coordinates.forEach(function(L){L[0].forEach(function(z){m.push(u(z))})})}),m.length>0&&this.map.setViewport(m,this.props.viewportOptions||{})},i.prototype.createLayers=function(){if(T5[this.props.type]||n8[this.props.type]){this._createLayer=!0;var a=T5[this.props.type]?T5:n8;this.layer=new a[this.props.type](this.props.options),this.view.addLayer(this.layer)}else console.error("mapvgl doesn't have layer "+this.props.type+"!")},i.prototype.render=function(){return null},i.contextType=wse.ViewContext,i}(Ase.Component);kD.default=Cse;var jD={};Object.defineProperty(jD,"__esModule",{value:!0});var _se=xo,Mse=Uu,Sse=dl,Tse=function(t){_se.__extends(i,t);function i(a){var u=t.call(this,a)||this;return u._showLayer=!1,u}return i.prototype.componentDidMount=function(){this.initialize()},i.prototype.componentDidUpdate=function(a){this.initialize()},i.prototype.componentWillUnmount=function(){this._showLayer&&this.map&&!this.map._destroyed&&(this.map.setTrafficOff(),this._showLayer=!1)},i.prototype.initialize=function(){var a=this.map=this.getMap();a&&(this._showLayer||(a.setTrafficOn(),this._showLayer=!0))},i.prototype.render=function(){return null},i.contextType=Mse.MapContext,i}(Sse.Component);jD.default=Tse;var GD={};Object.defineProperty(GD,"__esModule",{value:!0});var Ese=xo,Ise=Uu,Rse=dl,Lse=function(t){Ese.__extends(i,t);function i(a){return t.call(this,a)||this}return i.prototype.componentDidMount=function(){this.initialize()},i.prototype.componentDidUpdate=function(a){this.initialize()},i.prototype.componentWillUnmount=function(){this.destroy()},i.prototype.destroy=function(){this.tilelayer&&this.map&&!this.map._destroyed&&(this.map.removeTileLayer(this.tilelayer),this.tilelayer=void 0)},i.prototype.initialize=function(){var a=this.map=this.getMap();if(a){this.destroy();var u="pl",m="20190102",M=this.tilelayer=new BMapGL.TileLayer({transparentPng:!0});M.zIndex=110,M.getTilesUrl=function(L,z){if(!L||z<0)return"";var U=L.x,W=L.y,J="//mapsv0.bdimg.com/tile/?udt="+m+"&qt=tile&styles="+u+"&x="+U+"&y="+W+"&z="+z;return J},a.addTileLayer(this.tilelayer)}},i.prototype.render=function(){return null},i.contextType=Ise.MapContext,i}(Rse.Component);GD.default=Lse;var VD={},Hm={};Object.defineProperty(Hm,"__esModule",{value:!0});Hm.requireScript=Hm.requireCss=void 0;var kE=document.head||document.getElementsByTagName("head")[0],Bw={};function Pse(t){return new Promise(function(i,a){if(t in Bw){i();return}var u=document.createElement("link");u.type="text/css",u.rel="stylesheet",u.href=t,u.onerror=function(m){kE.removeChild(u),a(new URIError("The css "+t+" is no accessible."))},u.onload=function(){Bw[t]=!0,i()},kE.appendChild(u)})}Hm.requireCss=Pse;function Ose(t){return new Promise(function(i,a){if(t in Bw){i();return}var u=document.createElement("script");u.type="text/javascript",u.src=t,u.onerror=function(m){kE.removeChild(u),a(new URIError("The Script "+t+" is no accessible."))},Dse(u)?u.onload=function(){Bw[t]=!0,i()}:u.onreadystatechange=function(){(u.readyState=="loaded"||u.readyState=="complete")&&(u.onreadystatechange=null,Bw[t]=!0,i())},kE.appendChild(u)})}Hm.requireScript=Ose;function Dse(t){return t=t||document.createElement("script"),"onload"in t?!0:(t.setAttribute("onload",""),typeof t.onload=="function")}Object.defineProperty(VD,"__esModule",{value:!0});var WD=xo,i8=WD.__importDefault(ie),bse=dl,o8=Hm,S4=WD.__importStar(zs),Fse=Uu,Lj=["overlaycomplete","overlaycancel"],Pj={enableCalculate:["enableCalculate","disableCalculate"],enableSorption:["enableSorption","disableSorption"],enableGpc:["enableGpc","disableGpc"]},Nse={strokeColor:"#5E87DB",fillColor:"#5E87DB",strokeWeight:2,strokeOpacity:1,fillOpacity:.2},Bse={borderRadius:"2px",background:"#FFFBCC",border:"1px solid #E1E1E1",color:"#703A04",fontSize:"12px",letterSpacing:"0",padding:"5px"},Oj=function(t){WD.__extends(i,t);function i(a){var u=t.call(this,a)||this;return u.el=i8.default.createRef(),u.options=["isOpen","drawingMode","enableDrawingTool","enableCalculate","enableSorption","enableGpc","enableLimit","sorptionDistance","limitOptions","drawingToolOptions","markerOptions","circleOptions","polylineOptions","polygonOptions","rectangleOptions","labelOptions"],u}return i.prototype.componentDidMount=function(){this.initialize()},i.prototype.componentWillUnmount=function(){this.destroy()},i.prototype.destroy=function(){this.drawingmanager&&(this.drawingmanager.close(),this.instance=this.drawingmanager=void 0)},i.prototype.initialize=function(){var a=this,u=this.map=this.getMap();if(u){this.destroy();for(var m=this.getOptions(),M=["circleOptions","polylineOptions","polygonOptions","rectangleOptions"],L=0;L<M.length;L++){var z=M[L];m[z]||(m[z]=Nse)}if(m.labelOptions||(m.labelOptions=Bse),m.drawingToolOptions.customContainer=this.el.current,window.BMapGLLib&&BMapGLLib.DrawingManager&&(this.instance=this.drawingmanager=new BMapGLLib.DrawingManager(u,m)),!window.BMapGLLib||!BMapGLLib.DrawingManager){var U=this.props.cssUrl||"//mapopen.bj.bcebos.com/github/BMapGLLib/DrawingManager/src/DrawingManager.min.css",W=this.props.scriptUrl||"//mapopen.bj.bcebos.com/github/BMapGLLib/DrawingManager/src/DrawingManager.min.js";o8.requireCss(U).then(function(){}),o8.requireScript(W).then(function(){a.instance=a.drawingmanager=new BMapGLLib.DrawingManager(u,m),S4.registerEvents(a,a.getInstance(a),Lj),S4.toggleMethods(a,a.getInstance(a),Pj)})}}},i.prototype.render=function(){return i8.default.createElement("div",{className:"react-bmapgl-drawingmanager",ref:this.el,style:this.props.style})},i.contextType=Fse.MapContext,i}(bse.Component);Oj.defaultProps={isOpen:!1,enableDrawingTool:!0,enableCalculate:!1,enableSorption:!1,enableGpc:!1,enableLimit:!1,sorptionDistance:20,limitOptions:{area:5e7,distance:3e4},drawingToolOptions:{},style:{position:"absolute",left:0,top:0,width:360}};VD.default=S4.default(Oj,Lj,Pj);var XD={};Object.defineProperty(XD,"__esModule",{value:!0});var Dj=xo,zse=dl,Use=Hm,T4=Dj.__importStar(zs),kse=Uu,bj=["drawend","addpoint","removepolyline"],Fj={},Nj=function(t){Dj.__extends(i,t);function i(a){var u=t.call(this,a)||this;return u.options=["tips","followText","unit","lineColor","lineStroke","opacity","lineStyle","cursor","secIcon","closeIcon"],u}return i.prototype.componentDidMount=function(){this.initialize()},i.prototype.componentWillUnmount=function(){this.destroy()},i.prototype.destroy=function(){this.distancetool&&(this.distancetool.close(),this.instance=this.distancetool=void 0)},i.prototype.initialize=function(){var a=this,u=this.map=this.getMap();if(u){this.destroy();var m=this.getOptions();if(window.BMapGLLib&&BMapGLLib.DistanceTool&&(this.instance=this.distancetool=new BMapGLLib.DistanceTool(u,m),this.props.defaultOpen&&this.distancetool.open()),!window.BMapGLLib||!BMapGLLib.DistanceTool){var M=this.props.scriptUrl||"//mapopen.bj.bcebos.com/github/BMapGLLib/DistanceTool/src/DistanceTool.js";Use.requireScript(M).then(function(){a.instance=a.distancetool=new BMapGLLib.DistanceTool(u,m),T4.registerEvents(a,a.getInstance(a),bj),T4.toggleMethods(a,a.getInstance(a),Fj),a.props.defaultOpen&&a.distancetool.open()})}}},i.prototype.render=function(){return null},i.contextType=kse.MapContext,i}(zse.Component);Nj.defaultProps={defaultOpen:!0};XD.default=T4.default(Nj,bj,Fj);var YD={};Object.defineProperty(YD,"__esModule",{value:!0});var ZD=xo,yT=ZD.__importStar(ie),Hse=dl,jse=ZD.__importDefault(zs),Gse=["confirm","highlight"],Vse={},Bj=function(t){ZD.__extends(i,t);function i(a){var u=t.call(this,a)||this;return u.el=yT.default.createRef(),u.options=["location","onSearchComplete","input","types"],u}return i.prototype.componentDidMount=function(){this.initialize()},i.prototype.componentWillUnmount=function(){this.destroy()},i.prototype.destroy=function(){this.ac&&(this.ac.dispose(),this.instance=this.ac=void 0)},i.prototype.initialize=function(){this.destroy();var a=this.getOptions();a.input||(a.input=this.el.current),this.ac=this.instance=new BMapGL.Autocomplete(a)},i.prototype.render=function(){return yT.default.createElement(yT.Fragment,null,!this.props.input&&yT.default.createElement("input",{className:"react-bmapgl-autocomplete",ref:this.el,style:this.props.style}))},i}(Hse.Component);Bj.defaultProps={};YD.default=jse.default(Bj,Gse,Vse);var qD={};Object.defineProperty(qD,"__esModule",{value:!0});var WT=xo,Sf=B3,Wse=WT.__importDefault(Dh()),Xse=dl,E5="rgba(60, 50, 200, 0.9)",Yse=function(t){WT.__extends(i,t);function i(a){var u=t.call(this,a)||this;return u._createLayer=!1,u}return i.prototype.componentDidMount=function(){this.initialize()},i.prototype.componentDidUpdate=function(a){Wse.default(this.props,a)||this.initialize()},i.prototype.componentWillUnmount=function(){this.destroy()},i.prototype.destroy=function(){this._createLayer=!1,this.view.destroy(),this.view=void 0,this.linelayer=void 0,this.arrowlayer=void 0,this.flowlayer=void 0,this.pointlayer=void 0,this.textlayer=void 0,this.colorarrowlayers=[]},i.prototype.initialize=function(){var a=this,u=this.map=this.getMap();if(u){this._createLayer||this.createLayers();var m=[],M=[],L=new Map;if(this.colorarrowlayers&&this.colorarrowlayers.length)for(var z=0;z<this.colorarrowlayers.length;z++){var U=this.colorarrowlayers[z];this.view.removeLayer(U)}if(this.colorarrowlayers=[],this.props.data){var W=[],J=new Sf.OdCurve;this.props.data.forEach(function(te){var ae=te.from.point||Sf.utilCity.getCenterByCityName(te.from.city),ve=te.to.point||Sf.utilCity.getCenterByCityName(te.to.city);ae=new BMapGL.Point(ae.lng,ae.lat),ve=new BMapGL.Point(ve.lng,ve.lat),J.setOptions({points:[ae,ve]});var he=J.getPoints();a.props.coordType==="bd09mc"?(W.push(BMapGL.Projection.convertMC2LL(ae)),W.push(BMapGL.Projection.convertMC2LL(ve))):(W.push(ae),W.push(ve)),m.push({geometry:{type:"LineString",coordinates:he},color:te.color});var oe=L.get(te.color)||[];oe.push({geometry:{type:"LineString",coordinates:he}}),L.set(te.color,oe),a.props.showEndPoint!==!1&&M.push({geometry:{type:"Point",coordinates:[ve.lng,ve.lat]},color:te.color,properties:{text:te.to.name||te.to.city}}),a.props.showStartPoint!==!1&&M.push({geometry:{type:"Point",coordinates:[ae.lng,ae.lat]},color:te.color,properties:{text:te.from.name||te.from.city}}),W.length>0&&a.props.autoViewport===!0&&u.setViewport(W,a.props.viewportOptions||{})})}this.linelayer.setData(m),this.props.lineOptions&&this.linelayer.setOptions(this.props.lineOptions),this.pointlayer.setData(M),this.props.pointOptions&&this.pointlayer.setOptions(this.props.pointOptions),this.textlayer.setData(M),this.props.textOptions&&this.textlayer.setOptions(this.props.textOptions),Array.from(L.keys()).forEach(function(te){if(te===void 0)a.arrowlayer.setData(L.get(void 0)),a.props.arrowOptions&&a.arrowlayer.setOptions(a.props.arrowOptions);else{var ae=new Sf.LineLayer(WT.__assign(WT.__assign({blend:"lighter",width:10},a.props.arrowOptions),{style:"arrow",color:"rgba(255, 255, 255, 0)",styleOptions:{color:te}}));a.view.addLayer(ae),ae.setData(L.get(te)),a.colorarrowlayers.push(ae)}}),this.props.enableAnimation&&(this.flowlayer.setData(m),this.props.animationOptions&&this.flowlayer.setOptions(this.props.animationOptions))}},i.prototype.createLayers=function(){this._createLayer=!0;var a=this.map,u=this.view=new Sf.View({map:a}),m=this.linelayer=new Sf.LineLayer({blend:"lighter",color:E5,width:4});u.addLayer(m);var M=this.arrowlayer=new Sf.LineLayer({blend:"lighter",width:10,style:"arrow",color:"rgba(255, 255, 255, 0)",styleOptions:{color:E5}});u.addLayer(M);var L=this.pointlayer=new Sf.PointLayer({blend:"lighter",depthTest:!1,color:E5,size:10});u.addLayer(L);var z=this.textlayer=new Sf.TextLayer({offset:[0,15],depthTest:!1,color:"#333"});u.addLayer(z);var U=this.flowlayer=new Sf.LineLayer({blend:"lighter",color:function(){return"rgb(240, 200, 200)"},width:2,animation:!0,interval:.4,duration:1,trailLength:.8});u.addLayer(U)},i.prototype.render=function(){return null},i.defaultProps={enableAnimation:!0,showStartPoint:!0,showEndPoint:!0},i}(Xse.Component);qD.default=Yse;var I5={},a8;function Zse(){return a8||(a8=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var i=xo;i.__exportStar(Hm,t);var a=yj();Object.defineProperty(t,"isString",{enumerable:!0,get:function(){return a.default}});var u=xj();Object.defineProperty(t,"getDisplayName",{enumerable:!0,get:function(){return u.default}})}(I5)),I5}(function(t){Object.defineProperty(t,"__esModule",{value:!0});var i=xo,a=Uu;Object.defineProperty(t,"Map",{enumerable:!0,get:function(){return a.default}});var u=N3;Object.defineProperty(t,"MapApiLoaderHOC",{enumerable:!0,get:function(){return u.default}});var m=xD;Object.defineProperty(t,"MapTypeControl",{enumerable:!0,get:function(){return m.default}});var M=AD;Object.defineProperty(t,"ScaleControl",{enumerable:!0,get:function(){return M.default}});var L=wD;Object.defineProperty(t,"ZoomControl",{enumerable:!0,get:function(){return L.default}});var z=CD;Object.defineProperty(t,"NavigationControl",{enumerable:!0,get:function(){return z.default}});var U=_D;Object.defineProperty(t,"CityListControl",{enumerable:!0,get:function(){return U.default}});var W=MD;Object.defineProperty(t,"PanoramaControl",{enumerable:!0,get:function(){return W.default}});var J=SD;Object.defineProperty(t,"Marker",{enumerable:!0,get:function(){return J.default}});var te=ED;Object.defineProperty(t,"Polyline",{enumerable:!0,get:function(){return te.default}});var ae=LD;Object.defineProperty(t,"Polygon",{enumerable:!0,get:function(){return ae.default}});var ve=OD;Object.defineProperty(t,"Circle",{enumerable:!0,get:function(){return ve.default}});var he=bD;Object.defineProperty(t,"InfoWindow",{enumerable:!0,get:function(){return he.default}});var oe=FD;Object.defineProperty(t,"Label",{enumerable:!0,get:function(){return oe.default}});var me=BD;Object.defineProperty(t,"CustomOverlay",{enumerable:!0,get:function(){return me.default}});var ge=UD;Object.defineProperty(t,"MapvglView",{enumerable:!0,get:function(){return ge.default}});var de=kD;Object.defineProperty(t,"MapvglLayer",{enumerable:!0,get:function(){return de.default}});var ce=jD;Object.defineProperty(t,"TrafficLayer",{enumerable:!0,get:function(){return ce.default}});var _e=GD;Object.defineProperty(t,"PanoramaLayer",{enumerable:!0,get:function(){return _e.default}});var Re=VD;Object.defineProperty(t,"DrawingManager",{enumerable:!0,get:function(){return Re.default}});var Ee=XD;Object.defineProperty(t,"DistanceTool",{enumerable:!0,get:function(){return Ee.default}});var De=YD;Object.defineProperty(t,"AutoComplete",{enumerable:!0,get:function(){return De.default}});var We=qD;Object.defineProperty(t,"Arc",{enumerable:!0,get:function(){return We.default}}),t.mapvgl=i.__importStar(B3),i.__exportStar(Zse(),t)})(ww);const qse=()=>rn.jsx("div",{className:"home",children:rn.jsxs(ww.Map,{style:{width:"100%",height:"1000px"},center:new window.BMapGL.Point(110,35),className:"mapContainer",mapType:"earth",zoom:5,heading:0,tilt:40,onClick:t=>console.log(t),enableScrollWheelZoom:!0,children:[rn.jsx(ww.CityListControl,{anchor:"BMAP_ANCHOR_TOP_LEFT",offset:new window.BMapGL.Size(1e3,10)}),rn.jsx(ww.MapTypeControl,{}),rn.jsx(ww.ZoomControl,{})]})});var Kse={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 140H96c-17.7 0-32 14.3-32 32v496c0 17.7 14.3 32 32 32h380v112H304c-8.8 0-16 7.2-16 16v48c0 4.4 3.6 8 8 8h432c4.4 0 8-3.6 8-8v-48c0-8.8-7.2-16-16-16H548V700h380c17.7 0 32-14.3 32-32V172c0-17.7-14.3-32-32-32zm-40 488H136V212h752v416z"}}]},name:"desktop",theme:"outlined"},Jse=function(i,a){return ie.createElement(Ka,Sn({},i,{ref:a,icon:Kse}))},Qse=ie.forwardRef(Jse),$se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 518H506V160c0-4.4-3.6-8-8-8h-26a398.46 398.46 0 00-282.8 117.1 398.19 398.19 0 00-85.7 127.1A397.61 397.61 0 0072 552a398.46 398.46 0 00117.1 282.8c36.7 36.7 79.5 65.6 127.1 85.7A397.61 397.61 0 00472 952a398.46 398.46 0 00282.8-117.1c36.7-36.7 65.6-79.5 85.7-127.1A397.61 397.61 0 00872 552v-26c0-4.4-3.6-8-8-8zM705.7 787.8A331.59 331.59 0 01470.4 884c-88.1-.4-170.9-34.9-233.2-97.2C174.5 724.1 140 640.7 140 552c0-88.7 34.5-172.1 97.2-234.8 54.6-54.6 124.9-87.9 200.8-95.5V586h364.3c-7.7 76.3-41.3 147-96.6 201.8zM952 462.4l-2.6-28.2c-8.5-92.1-49.4-179-115.2-244.6A399.4 399.4 0 00589 74.6L560.7 72c-4.7-.4-8.7 3.2-8.7 7.9V464c0 4.4 3.6 8 8 8l384-1c4.7 0 8.4-4 8-8.6zm-332.2-58.2V147.6a332.24 332.24 0 01166.4 89.8c45.7 45.6 77 103.6 90 166.1l-256.4.7z"}}]},name:"pie-chart",theme:"outlined"},ele=function(i,a){return ie.createElement(Ka,Sn({},i,{ref:a,icon:$se}))},tle=ie.forwardRef(ele),rle={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"},nle=function(i,a){return ie.createElement(Ka,Sn({},i,{ref:a,icon:rle}))},s8=ie.forwardRef(nle);const l8=[{label:"账号信息",key:"/test/accountInfo",icon:rn.jsx(tle,{})},{label:"收藏路线",key:"/test/planLine",icon:rn.jsx(Qse,{})},{label:"收藏地点",key:"/test/willGo",icon:rn.jsx(C5,{})},{label:"曾使用",key:"onceGo",icon:rn.jsx(s8,{}),children:[{label:"曾使用地点",key:"/test/onceGo/site",icon:rn.jsx(C5,{})}]},{label:"系统",key:"System",icon:rn.jsx(s8,{}),children:[{label:"用户管理",key:"/test/System/UserManege",icon:rn.jsx(C5,{})}]}],ile=()=>{let t="";const i=l0(),a=s0();a.pathname==="/test/about"&&(a.pathname="/test/accountInfo");function u(U){return U.key===a.pathname}l8.map(U=>{let W=U.children;W&&W.length>0&&W.find(u)&&(t=U.key)});const[m,M]=ie.useState([t]),L=U=>{i(U.key)},z=U=>{M([U[U.length-1]]),console.log(U)};return rn.jsx(PC,{theme:"dark",defaultSelectedKeys:[a.pathname],mode:"inline",items:l8,onClick:L,onOpenChange:z,openKeys:m})},ole="/test/wordLevel.svg",{Header:Nce,Content:ale,Footer:sle,Sider:lle}=km,u8=()=>{const[t,i]=ie.useState(!1);return gae.useToken(),l0(),rn.jsxs(km,{style:{minHeight:"100vh"},children:[rn.jsxs(lle,{collapsible:!0,collapsed:t,onCollapse:a=>i(a),children:[rn.jsx("div",{className:"demo-logo-vertical",children:rn.jsx(yH,{src:rn.jsx("img",{src:ole,alt:"avatar"})})}),rn.jsx(ile,{})]}),rn.jsxs(km,{children:[rn.jsx(ale,{style:{margin:"16px 16px 0"},className:"site-layout-background",children:rn.jsx(eq,{})}),rn.jsxs(sle,{style:{textAlign:"center",padding:0,lineHeight:"48px"},children:["Design ©",new Date().getFullYear()," Created by ZZP"]})]})]})},ule="_loginPage_1iqqa_1",cle="_loginBox_1iqqa_4",hle="_title_1iqqa_22",xT={loginPage:ule,loginBox:cle,title:hle};function c8(){document.documentElement.clientWidth||document.body.clientWidth,document.documentElement.clientHeight||document.body.clientHeight;let t=document.getElementById("canvas"),i=t.getContext("2d"),a=t.width=window.innerWidth,u=t.height=window.innerHeight,m=217,M=[],L=0,z=500;const U=document.createElement("canvas"),W=U.getContext("2d");U.width=100,U.height=100;const J=U.width/2,te=W.createRadialGradient(J,J,0,J,J,J);te.addColorStop(.025,"#fff"),te.addColorStop(.1,"hsl("+m+", 61%, 33%)"),te.addColorStop(.25,"hsl("+m+", 64%, 6%)"),te.addColorStop(1,"transparent"),W.fillStyle=te,W.beginPath(),W.arc(J,J,J,0,Math.PI*2),W.fill();function ae(me,ge){if(arguments.length<2&&(ge=me,me=0),me>ge){var de=ge;ge=me,me=de}return Math.floor(Math.random()*(ge-me+1))+me}function ve(me,ge){const de=Math.max(me,ge);return Math.round(Math.sqrt(de*de+de*de))/2}const he=function(){this.orbitRadius=ae(ve(a,u)),this.radius=ae(60,this.orbitRadius)/12,this.orbitX=a/2,this.orbitY=u/2,this.timePassed=ae(0,z),this.speed=ae(this.orbitRadius)/5e5,this.alpha=ae(2,10)/10,L++,M[L]=this};he.prototype.draw=function(){const me=Math.sin(this.timePassed)*this.orbitRadius+this.orbitX,ge=Math.cos(this.timePassed)*this.orbitRadius+this.orbitY,de=ae(10);de===1&&this.alpha>0?this.alpha-=.05:de===2&&this.alpha<1&&(this.alpha+=.05),i.globalAlpha=this.alpha,i.drawImage(U,me-this.radius/2,ge-this.radius/2,this.radius,this.radius),this.timePassed+=this.speed};for(let me=0;me<z;me++)new he;function oe(){i.globalCompositeOperation="source-over",i.globalAlpha=.5,i.fillStyle="hsla("+m+", 64%, 6%, 1)",i.fillRect(0,0,a,u),i.globalCompositeOperation="lighter";let me=1,ge=M.length;for(;me<ge;me++)M[me].draw();window.requestAnimationFrame(oe)}oe()}function zj(t,i){return function(){return t.apply(i,arguments)}}const{toString:fle}=Object.prototype,{getPrototypeOf:KD}=Object,z3=(t=>i=>{const a=fle.call(i);return t[a]||(t[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),bh=t=>(t=t.toLowerCase(),i=>z3(i)===t),U3=t=>i=>typeof i===t,{isArray:_x}=Array,gC=U3("undefined");function dle(t){return t!==null&&!gC(t)&&t.constructor!==null&&!gC(t.constructor)&&_c(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Uj=bh("ArrayBuffer");function ple(t){let i;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?i=ArrayBuffer.isView(t):i=t&&t.buffer&&Uj(t.buffer),i}const mle=U3("string"),_c=U3("function"),kj=U3("number"),k3=t=>t!==null&&typeof t=="object",gle=t=>t===!0||t===!1,XT=t=>{if(z3(t)!=="object")return!1;const i=KD(t);return(i===null||i===Object.prototype||Object.getPrototypeOf(i)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},vle=bh("Date"),yle=bh("File"),xle=bh("Blob"),Ale=bh("FileList"),wle=t=>k3(t)&&_c(t.pipe),Cle=t=>{let i;return t&&(typeof FormData=="function"&&t instanceof FormData||_c(t.append)&&((i=z3(t))==="formdata"||i==="object"&&_c(t.toString)&&t.toString()==="[object FormData]"))},_le=bh("URLSearchParams"),[Mle,Sle,Tle,Ele]=["ReadableStream","Request","Response","Headers"].map(bh),Ile=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function OC(t,i,{allOwnKeys:a=!1}={}){if(t===null||typeof t>"u")return;let u,m;if(typeof t!="object"&&(t=[t]),_x(t))for(u=0,m=t.length;u<m;u++)i.call(null,t[u],u,t);else{const M=a?Object.getOwnPropertyNames(t):Object.keys(t),L=M.length;let z;for(u=0;u<L;u++)z=M[u],i.call(null,t[z],z,t)}}function Hj(t,i){i=i.toLowerCase();const a=Object.keys(t);let u=a.length,m;for(;u-- >0;)if(m=a[u],i===m.toLowerCase())return m;return null}const jj=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Gj=t=>!gC(t)&&t!==jj;function E4(){const{caseless:t}=Gj(this)&&this||{},i={},a=(u,m)=>{const M=t&&Hj(i,m)||m;XT(i[M])&&XT(u)?i[M]=E4(i[M],u):XT(u)?i[M]=E4({},u):_x(u)?i[M]=u.slice():i[M]=u};for(let u=0,m=arguments.length;u<m;u++)arguments[u]&&OC(arguments[u],a);return i}const Rle=(t,i,a,{allOwnKeys:u}={})=>(OC(i,(m,M)=>{a&&_c(m)?t[M]=zj(m,a):t[M]=m},{allOwnKeys:u}),t),Lle=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Ple=(t,i,a,u)=>{t.prototype=Object.create(i.prototype,u),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:i.prototype}),a&&Object.assign(t.prototype,a)},Ole=(t,i,a,u)=>{let m,M,L;const z={};if(i=i||{},t==null)return i;do{for(m=Object.getOwnPropertyNames(t),M=m.length;M-- >0;)L=m[M],(!u||u(L,t,i))&&!z[L]&&(i[L]=t[L],z[L]=!0);t=a!==!1&&KD(t)}while(t&&(!a||a(t,i))&&t!==Object.prototype);return i},Dle=(t,i,a)=>{t=String(t),(a===void 0||a>t.length)&&(a=t.length),a-=i.length;const u=t.indexOf(i,a);return u!==-1&&u===a},ble=t=>{if(!t)return null;if(_x(t))return t;let i=t.length;if(!kj(i))return null;const a=new Array(i);for(;i-- >0;)a[i]=t[i];return a},Fle=(t=>i=>t&&i instanceof t)(typeof Uint8Array<"u"&&KD(Uint8Array)),Nle=(t,i)=>{const u=(t&&t[Symbol.iterator]).call(t);let m;for(;(m=u.next())&&!m.done;){const M=m.value;i.call(t,M[0],M[1])}},Ble=(t,i)=>{let a;const u=[];for(;(a=t.exec(i))!==null;)u.push(a);return u},zle=bh("HTMLFormElement"),Ule=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,u,m){return u.toUpperCase()+m}),h8=(({hasOwnProperty:t})=>(i,a)=>t.call(i,a))(Object.prototype),kle=bh("RegExp"),Vj=(t,i)=>{const a=Object.getOwnPropertyDescriptors(t),u={};OC(a,(m,M)=>{let L;(L=i(m,M,t))!==!1&&(u[M]=L||m)}),Object.defineProperties(t,u)},Hle=t=>{Vj(t,(i,a)=>{if(_c(t)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const u=t[a];if(_c(u)){if(i.enumerable=!1,"writable"in i){i.writable=!1;return}i.set||(i.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},jle=(t,i)=>{const a={},u=m=>{m.forEach(M=>{a[M]=!0})};return _x(t)?u(t):u(String(t).split(i)),a},Gle=()=>{},Vle=(t,i)=>t!=null&&Number.isFinite(t=+t)?t:i,R5="abcdefghijklmnopqrstuvwxyz",f8="0123456789",Wj={DIGIT:f8,ALPHA:R5,ALPHA_DIGIT:R5+R5.toUpperCase()+f8},Wle=(t=16,i=Wj.ALPHA_DIGIT)=>{let a="";const{length:u}=i;for(;t--;)a+=i[Math.random()*u|0];return a};function Xle(t){return!!(t&&_c(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const Yle=t=>{const i=new Array(10),a=(u,m)=>{if(k3(u)){if(i.indexOf(u)>=0)return;if(!("toJSON"in u)){i[m]=u;const M=_x(u)?[]:{};return OC(u,(L,z)=>{const U=a(L,m+1);!gC(U)&&(M[z]=U)}),i[m]=void 0,M}}return u};return a(t,0)},Zle=bh("AsyncFunction"),qle=t=>t&&(k3(t)||_c(t))&&_c(t.then)&&_c(t.catch),Wt={isArray:_x,isArrayBuffer:Uj,isBuffer:dle,isFormData:Cle,isArrayBufferView:ple,isString:mle,isNumber:kj,isBoolean:gle,isObject:k3,isPlainObject:XT,isReadableStream:Mle,isRequest:Sle,isResponse:Tle,isHeaders:Ele,isUndefined:gC,isDate:vle,isFile:yle,isBlob:xle,isRegExp:kle,isFunction:_c,isStream:wle,isURLSearchParams:_le,isTypedArray:Fle,isFileList:Ale,forEach:OC,merge:E4,extend:Rle,trim:Ile,stripBOM:Lle,inherits:Ple,toFlatObject:Ole,kindOf:z3,kindOfTest:bh,endsWith:Dle,toArray:ble,forEachEntry:Nle,matchAll:Ble,isHTMLForm:zle,hasOwnProperty:h8,hasOwnProp:h8,reduceDescriptors:Vj,freezeMethods:Hle,toObjectSet:jle,toCamelCase:Ule,noop:Gle,toFiniteNumber:Vle,findKey:Hj,global:jj,isContextDefined:Gj,ALPHABET:Wj,generateString:Wle,isSpecCompliantForm:Xle,toJSONObject:Yle,isAsyncFn:Zle,isThenable:qle};function di(t,i,a,u,m){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",i&&(this.code=i),a&&(this.config=a),u&&(this.request=u),m&&(this.response=m)}Wt.inherits(di,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Wt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Xj=di.prototype,Yj={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Yj[t]={value:t}});Object.defineProperties(di,Yj);Object.defineProperty(Xj,"isAxiosError",{value:!0});di.from=(t,i,a,u,m,M)=>{const L=Object.create(Xj);return Wt.toFlatObject(t,L,function(U){return U!==Error.prototype},z=>z!=="isAxiosError"),di.call(L,t.message,i,a,u,m),L.cause=t,L.name=t.name,M&&Object.assign(L,M),L};const Kle=null;function I4(t){return Wt.isPlainObject(t)||Wt.isArray(t)}function Zj(t){return Wt.endsWith(t,"[]")?t.slice(0,-2):t}function d8(t,i,a){return t?t.concat(i).map(function(m,M){return m=Zj(m),!a&&M?"["+m+"]":m}).join(a?".":""):i}function Jle(t){return Wt.isArray(t)&&!t.some(I4)}const Qle=Wt.toFlatObject(Wt,{},null,function(i){return/^is[A-Z]/.test(i)});function H3(t,i,a){if(!Wt.isObject(t))throw new TypeError("target must be an object");i=i||new FormData,a=Wt.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(oe,me){return!Wt.isUndefined(me[oe])});const u=a.metaTokens,m=a.visitor||J,M=a.dots,L=a.indexes,U=(a.Blob||typeof Blob<"u"&&Blob)&&Wt.isSpecCompliantForm(i);if(!Wt.isFunction(m))throw new TypeError("visitor must be a function");function W(he){if(he===null)return"";if(Wt.isDate(he))return he.toISOString();if(!U&&Wt.isBlob(he))throw new di("Blob is not supported. Use a Buffer instead.");return Wt.isArrayBuffer(he)||Wt.isTypedArray(he)?U&&typeof Blob=="function"?new Blob([he]):Buffer.from(he):he}function J(he,oe,me){let ge=he;if(he&&!me&&typeof he=="object"){if(Wt.endsWith(oe,"{}"))oe=u?oe:oe.slice(0,-2),he=JSON.stringify(he);else if(Wt.isArray(he)&&Jle(he)||(Wt.isFileList(he)||Wt.endsWith(oe,"[]"))&&(ge=Wt.toArray(he)))return oe=Zj(oe),ge.forEach(function(ce,_e){!(Wt.isUndefined(ce)||ce===null)&&i.append(L===!0?d8([oe],_e,M):L===null?oe:oe+"[]",W(ce))}),!1}return I4(he)?!0:(i.append(d8(me,oe,M),W(he)),!1)}const te=[],ae=Object.assign(Qle,{defaultVisitor:J,convertValue:W,isVisitable:I4});function ve(he,oe){if(!Wt.isUndefined(he)){if(te.indexOf(he)!==-1)throw Error("Circular reference detected in "+oe.join("."));te.push(he),Wt.forEach(he,function(ge,de){(!(Wt.isUndefined(ge)||ge===null)&&m.call(i,ge,Wt.isString(de)?de.trim():de,oe,ae))===!0&&ve(ge,oe?oe.concat(de):[de])}),te.pop()}}if(!Wt.isObject(t))throw new TypeError("data must be an object");return ve(t),i}function p8(t){const i={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(u){return i[u]})}function JD(t,i){this._pairs=[],t&&H3(t,this,i)}const qj=JD.prototype;qj.append=function(i,a){this._pairs.push([i,a])};qj.toString=function(i){const a=i?function(u){return i.call(this,u,p8)}:p8;return this._pairs.map(function(m){return a(m[0])+"="+a(m[1])},"").join("&")};function $le(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Kj(t,i,a){if(!i)return t;const u=a&&a.encode||$le,m=a&&a.serialize;let M;if(m?M=m(i,a):M=Wt.isURLSearchParams(i)?i.toString():new JD(i,a).toString(u),M){const L=t.indexOf("#");L!==-1&&(t=t.slice(0,L)),t+=(t.indexOf("?")===-1?"?":"&")+M}return t}class m8{constructor(){this.handlers=[]}use(i,a,u){return this.handlers.push({fulfilled:i,rejected:a,synchronous:u?u.synchronous:!1,runWhen:u?u.runWhen:null}),this.handlers.length-1}eject(i){this.handlers[i]&&(this.handlers[i]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(i){Wt.forEach(this.handlers,function(u){u!==null&&i(u)})}}const Jj={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},eue=typeof URLSearchParams<"u"?URLSearchParams:JD,tue=typeof FormData<"u"?FormData:null,rue=typeof Blob<"u"?Blob:null,nue={isBrowser:!0,classes:{URLSearchParams:eue,FormData:tue,Blob:rue},protocols:["http","https","file","blob","url","data"]},QD=typeof window<"u"&&typeof document<"u",iue=(t=>QD&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),oue=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",aue=QD&&window.location.href||"http://localhost",sue=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:QD,hasStandardBrowserEnv:iue,hasStandardBrowserWebWorkerEnv:oue,origin:aue},Symbol.toStringTag,{value:"Module"})),Rh={...sue,...nue};function lue(t,i){return H3(t,new Rh.classes.URLSearchParams,Object.assign({visitor:function(a,u,m,M){return Rh.isNode&&Wt.isBuffer(a)?(this.append(u,a.toString("base64")),!1):M.defaultVisitor.apply(this,arguments)}},i))}function uue(t){return Wt.matchAll(/\w+|\[(\w*)]/g,t).map(i=>i[0]==="[]"?"":i[1]||i[0])}function cue(t){const i={},a=Object.keys(t);let u;const m=a.length;let M;for(u=0;u<m;u++)M=a[u],i[M]=t[M];return i}function Qj(t){function i(a,u,m,M){let L=a[M++];if(L==="__proto__")return!0;const z=Number.isFinite(+L),U=M>=a.length;return L=!L&&Wt.isArray(m)?m.length:L,U?(Wt.hasOwnProp(m,L)?m[L]=[m[L],u]:m[L]=u,!z):((!m[L]||!Wt.isObject(m[L]))&&(m[L]=[]),i(a,u,m[L],M)&&Wt.isArray(m[L])&&(m[L]=cue(m[L])),!z)}if(Wt.isFormData(t)&&Wt.isFunction(t.entries)){const a={};return Wt.forEachEntry(t,(u,m)=>{i(uue(u),m,a,0)}),a}return null}function hue(t,i,a){if(Wt.isString(t))try{return(i||JSON.parse)(t),Wt.trim(t)}catch(u){if(u.name!=="SyntaxError")throw u}return(a||JSON.stringify)(t)}const DC={transitional:Jj,adapter:["xhr","http","fetch"],transformRequest:[function(i,a){const u=a.getContentType()||"",m=u.indexOf("application/json")>-1,M=Wt.isObject(i);if(M&&Wt.isHTMLForm(i)&&(i=new FormData(i)),Wt.isFormData(i))return m?JSON.stringify(Qj(i)):i;if(Wt.isArrayBuffer(i)||Wt.isBuffer(i)||Wt.isStream(i)||Wt.isFile(i)||Wt.isBlob(i)||Wt.isReadableStream(i))return i;if(Wt.isArrayBufferView(i))return i.buffer;if(Wt.isURLSearchParams(i))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),i.toString();let z;if(M){if(u.indexOf("application/x-www-form-urlencoded")>-1)return lue(i,this.formSerializer).toString();if((z=Wt.isFileList(i))||u.indexOf("multipart/form-data")>-1){const U=this.env&&this.env.FormData;return H3(z?{"files[]":i}:i,U&&new U,this.formSerializer)}}return M||m?(a.setContentType("application/json",!1),hue(i)):i}],transformResponse:[function(i){const a=this.transitional||DC.transitional,u=a&&a.forcedJSONParsing,m=this.responseType==="json";if(Wt.isResponse(i)||Wt.isReadableStream(i))return i;if(i&&Wt.isString(i)&&(u&&!this.responseType||m)){const L=!(a&&a.silentJSONParsing)&&m;try{return JSON.parse(i)}catch(z){if(L)throw z.name==="SyntaxError"?di.from(z,di.ERR_BAD_RESPONSE,this,null,this.response):z}}return i}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Rh.classes.FormData,Blob:Rh.classes.Blob},validateStatus:function(i){return i>=200&&i<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Wt.forEach(["delete","get","head","post","put","patch"],t=>{DC.headers[t]={}});const fue=Wt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),due=t=>{const i={};let a,u,m;return t&&t.split(`
`).forEach(function(L){m=L.indexOf(":"),a=L.substring(0,m).trim().toLowerCase(),u=L.substring(m+1).trim(),!(!a||i[a]&&fue[a])&&(a==="set-cookie"?i[a]?i[a].push(u):i[a]=[u]:i[a]=i[a]?i[a]+", "+u:u)}),i},g8=Symbol("internals");function pw(t){return t&&String(t).trim().toLowerCase()}function YT(t){return t===!1||t==null?t:Wt.isArray(t)?t.map(YT):String(t)}function pue(t){const i=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let u;for(;u=a.exec(t);)i[u[1]]=u[2];return i}const mue=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function L5(t,i,a,u,m){if(Wt.isFunction(u))return u.call(this,i,a);if(m&&(i=a),!!Wt.isString(i)){if(Wt.isString(u))return i.indexOf(u)!==-1;if(Wt.isRegExp(u))return u.test(i)}}function gue(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(i,a,u)=>a.toUpperCase()+u)}function vue(t,i){const a=Wt.toCamelCase(" "+i);["get","set","has"].forEach(u=>{Object.defineProperty(t,u+a,{value:function(m,M,L){return this[u].call(this,i,m,M,L)},configurable:!0})})}class au{constructor(i){i&&this.set(i)}set(i,a,u){const m=this;function M(z,U,W){const J=pw(U);if(!J)throw new Error("header name must be a non-empty string");const te=Wt.findKey(m,J);(!te||m[te]===void 0||W===!0||W===void 0&&m[te]!==!1)&&(m[te||U]=YT(z))}const L=(z,U)=>Wt.forEach(z,(W,J)=>M(W,J,U));if(Wt.isPlainObject(i)||i instanceof this.constructor)L(i,a);else if(Wt.isString(i)&&(i=i.trim())&&!mue(i))L(due(i),a);else if(Wt.isHeaders(i))for(const[z,U]of i.entries())M(U,z,u);else i!=null&&M(a,i,u);return this}get(i,a){if(i=pw(i),i){const u=Wt.findKey(this,i);if(u){const m=this[u];if(!a)return m;if(a===!0)return pue(m);if(Wt.isFunction(a))return a.call(this,m,u);if(Wt.isRegExp(a))return a.exec(m);throw new TypeError("parser must be boolean|regexp|function")}}}has(i,a){if(i=pw(i),i){const u=Wt.findKey(this,i);return!!(u&&this[u]!==void 0&&(!a||L5(this,this[u],u,a)))}return!1}delete(i,a){const u=this;let m=!1;function M(L){if(L=pw(L),L){const z=Wt.findKey(u,L);z&&(!a||L5(u,u[z],z,a))&&(delete u[z],m=!0)}}return Wt.isArray(i)?i.forEach(M):M(i),m}clear(i){const a=Object.keys(this);let u=a.length,m=!1;for(;u--;){const M=a[u];(!i||L5(this,this[M],M,i,!0))&&(delete this[M],m=!0)}return m}normalize(i){const a=this,u={};return Wt.forEach(this,(m,M)=>{const L=Wt.findKey(u,M);if(L){a[L]=YT(m),delete a[M];return}const z=i?gue(M):String(M).trim();z!==M&&delete a[M],a[z]=YT(m),u[z]=!0}),this}concat(...i){return this.constructor.concat(this,...i)}toJSON(i){const a=Object.create(null);return Wt.forEach(this,(u,m)=>{u!=null&&u!==!1&&(a[m]=i&&Wt.isArray(u)?u.join(", "):u)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([i,a])=>i+": "+a).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(i){return i instanceof this?i:new this(i)}static concat(i,...a){const u=new this(i);return a.forEach(m=>u.set(m)),u}static accessor(i){const u=(this[g8]=this[g8]={accessors:{}}).accessors,m=this.prototype;function M(L){const z=pw(L);u[z]||(vue(m,L),u[z]=!0)}return Wt.isArray(i)?i.forEach(M):M(i),this}}au.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Wt.reduceDescriptors(au.prototype,({value:t},i)=>{let a=i[0].toUpperCase()+i.slice(1);return{get:()=>t,set(u){this[a]=u}}});Wt.freezeMethods(au);function P5(t,i){const a=this||DC,u=i||a,m=au.from(u.headers);let M=u.data;return Wt.forEach(t,function(z){M=z.call(a,M,m.normalize(),i?i.status:void 0)}),m.normalize(),M}function $j(t){return!!(t&&t.__CANCEL__)}function Mx(t,i,a){di.call(this,t??"canceled",di.ERR_CANCELED,i,a),this.name="CanceledError"}Wt.inherits(Mx,di,{__CANCEL__:!0});function eG(t,i,a){const u=a.config.validateStatus;!a.status||!u||u(a.status)?t(a):i(new di("Request failed with status code "+a.status,[di.ERR_BAD_REQUEST,di.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function yue(t){const i=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return i&&i[1]||""}function xue(t,i){t=t||10;const a=new Array(t),u=new Array(t);let m=0,M=0,L;return i=i!==void 0?i:1e3,function(U){const W=Date.now(),J=u[M];L||(L=W),a[m]=U,u[m]=W;let te=M,ae=0;for(;te!==m;)ae+=a[te++],te=te%t;if(m=(m+1)%t,m===M&&(M=(M+1)%t),W-L<i)return;const ve=J&&W-J;return ve?Math.round(ae*1e3/ve):void 0}}function Aue(t,i){let a=0;const u=1e3/i;let m=null;return function(){const L=this===!0,z=Date.now();if(L||z-a>u)return m&&(clearTimeout(m),m=null),a=z,t.apply(null,arguments);m||(m=setTimeout(()=>(m=null,a=Date.now(),t.apply(null,arguments)),u-(z-a)))}}const HE=(t,i,a=3)=>{let u=0;const m=xue(50,250);return Aue(M=>{const L=M.loaded,z=M.lengthComputable?M.total:void 0,U=L-u,W=m(U),J=L<=z;u=L;const te={loaded:L,total:z,progress:z?L/z:void 0,bytes:U,rate:W||void 0,estimated:W&&z&&J?(z-L)/W:void 0,event:M,lengthComputable:z!=null};te[i?"download":"upload"]=!0,t(te)},a)},wue=Rh.hasStandardBrowserEnv?function(){const i=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a");let u;function m(M){let L=M;return i&&(a.setAttribute("href",L),L=a.href),a.setAttribute("href",L),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:a.pathname.charAt(0)==="/"?a.pathname:"/"+a.pathname}}return u=m(window.location.href),function(L){const z=Wt.isString(L)?m(L):L;return z.protocol===u.protocol&&z.host===u.host}}():function(){return function(){return!0}}(),Cue=Rh.hasStandardBrowserEnv?{write(t,i,a,u,m,M){const L=[t+"="+encodeURIComponent(i)];Wt.isNumber(a)&&L.push("expires="+new Date(a).toGMTString()),Wt.isString(u)&&L.push("path="+u),Wt.isString(m)&&L.push("domain="+m),M===!0&&L.push("secure"),document.cookie=L.join("; ")},read(t){const i=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function _ue(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Mue(t,i){return i?t.replace(/\/?\/$/,"")+"/"+i.replace(/^\/+/,""):t}function tG(t,i){return t&&!_ue(i)?Mue(t,i):i}const v8=t=>t instanceof au?{...t}:t;function i0(t,i){i=i||{};const a={};function u(W,J,te){return Wt.isPlainObject(W)&&Wt.isPlainObject(J)?Wt.merge.call({caseless:te},W,J):Wt.isPlainObject(J)?Wt.merge({},J):Wt.isArray(J)?J.slice():J}function m(W,J,te){if(Wt.isUndefined(J)){if(!Wt.isUndefined(W))return u(void 0,W,te)}else return u(W,J,te)}function M(W,J){if(!Wt.isUndefined(J))return u(void 0,J)}function L(W,J){if(Wt.isUndefined(J)){if(!Wt.isUndefined(W))return u(void 0,W)}else return u(void 0,J)}function z(W,J,te){if(te in i)return u(W,J);if(te in t)return u(void 0,W)}const U={url:M,method:M,data:M,baseURL:L,transformRequest:L,transformResponse:L,paramsSerializer:L,timeout:L,timeoutMessage:L,withCredentials:L,withXSRFToken:L,adapter:L,responseType:L,xsrfCookieName:L,xsrfHeaderName:L,onUploadProgress:L,onDownloadProgress:L,decompress:L,maxContentLength:L,maxBodyLength:L,beforeRedirect:L,transport:L,httpAgent:L,httpsAgent:L,cancelToken:L,socketPath:L,responseEncoding:L,validateStatus:z,headers:(W,J)=>m(v8(W),v8(J),!0)};return Wt.forEach(Object.keys(Object.assign({},t,i)),function(J){const te=U[J]||m,ae=te(t[J],i[J],J);Wt.isUndefined(ae)&&te!==z||(a[J]=ae)}),a}const rG=t=>{const i=i0({},t);let{data:a,withXSRFToken:u,xsrfHeaderName:m,xsrfCookieName:M,headers:L,auth:z}=i;i.headers=L=au.from(L),i.url=Kj(tG(i.baseURL,i.url),t.params,t.paramsSerializer),z&&L.set("Authorization","Basic "+btoa((z.username||"")+":"+(z.password?unescape(encodeURIComponent(z.password)):"")));let U;if(Wt.isFormData(a)){if(Rh.hasStandardBrowserEnv||Rh.hasStandardBrowserWebWorkerEnv)L.setContentType(void 0);else if((U=L.getContentType())!==!1){const[W,...J]=U?U.split(";").map(te=>te.trim()).filter(Boolean):[];L.setContentType([W||"multipart/form-data",...J].join("; "))}}if(Rh.hasStandardBrowserEnv&&(u&&Wt.isFunction(u)&&(u=u(i)),u||u!==!1&&wue(i.url))){const W=m&&M&&Cue.read(M);W&&L.set(m,W)}return i},Sue=typeof XMLHttpRequest<"u",Tue=Sue&&function(t){return new Promise(function(a,u){const m=rG(t);let M=m.data;const L=au.from(m.headers).normalize();let{responseType:z}=m,U;function W(){m.cancelToken&&m.cancelToken.unsubscribe(U),m.signal&&m.signal.removeEventListener("abort",U)}let J=new XMLHttpRequest;J.open(m.method.toUpperCase(),m.url,!0),J.timeout=m.timeout;function te(){if(!J)return;const ve=au.from("getAllResponseHeaders"in J&&J.getAllResponseHeaders()),oe={data:!z||z==="text"||z==="json"?J.responseText:J.response,status:J.status,statusText:J.statusText,headers:ve,config:t,request:J};eG(function(ge){a(ge),W()},function(ge){u(ge),W()},oe),J=null}"onloadend"in J?J.onloadend=te:J.onreadystatechange=function(){!J||J.readyState!==4||J.status===0&&!(J.responseURL&&J.responseURL.indexOf("file:")===0)||setTimeout(te)},J.onabort=function(){J&&(u(new di("Request aborted",di.ECONNABORTED,m,J)),J=null)},J.onerror=function(){u(new di("Network Error",di.ERR_NETWORK,m,J)),J=null},J.ontimeout=function(){let he=m.timeout?"timeout of "+m.timeout+"ms exceeded":"timeout exceeded";const oe=m.transitional||Jj;m.timeoutErrorMessage&&(he=m.timeoutErrorMessage),u(new di(he,oe.clarifyTimeoutError?di.ETIMEDOUT:di.ECONNABORTED,m,J)),J=null},M===void 0&&L.setContentType(null),"setRequestHeader"in J&&Wt.forEach(L.toJSON(),function(he,oe){J.setRequestHeader(oe,he)}),Wt.isUndefined(m.withCredentials)||(J.withCredentials=!!m.withCredentials),z&&z!=="json"&&(J.responseType=m.responseType),typeof m.onDownloadProgress=="function"&&J.addEventListener("progress",HE(m.onDownloadProgress,!0)),typeof m.onUploadProgress=="function"&&J.upload&&J.upload.addEventListener("progress",HE(m.onUploadProgress)),(m.cancelToken||m.signal)&&(U=ve=>{J&&(u(!ve||ve.type?new Mx(null,t,J):ve),J.abort(),J=null)},m.cancelToken&&m.cancelToken.subscribe(U),m.signal&&(m.signal.aborted?U():m.signal.addEventListener("abort",U)));const ae=yue(m.url);if(ae&&Rh.protocols.indexOf(ae)===-1){u(new di("Unsupported protocol "+ae+":",di.ERR_BAD_REQUEST,t));return}J.send(M||null)})},Eue=(t,i)=>{let a=new AbortController,u;const m=function(U){if(!u){u=!0,L();const W=U instanceof Error?U:this.reason;a.abort(W instanceof di?W:new Mx(W instanceof Error?W.message:W))}};let M=i&&setTimeout(()=>{m(new di(`timeout ${i} of ms exceeded`,di.ETIMEDOUT))},i);const L=()=>{t&&(M&&clearTimeout(M),M=null,t.forEach(U=>{U&&(U.removeEventListener?U.removeEventListener("abort",m):U.unsubscribe(m))}),t=null)};t.forEach(U=>U&&U.addEventListener&&U.addEventListener("abort",m));const{signal:z}=a;return z.unsubscribe=L,[z,()=>{M&&clearTimeout(M),M=null}]},Iue=function*(t,i){let a=t.byteLength;if(!i||a<i){yield t;return}let u=0,m;for(;u<a;)m=u+i,yield t.slice(u,m),u=m},Rue=async function*(t,i,a){for await(const u of t)yield*Iue(ArrayBuffer.isView(u)?u:await a(String(u)),i)},y8=(t,i,a,u,m)=>{const M=Rue(t,i,m);let L=0;return new ReadableStream({type:"bytes",async pull(z){const{done:U,value:W}=await M.next();if(U){z.close(),u();return}let J=W.byteLength;a&&a(L+=J),z.enqueue(new Uint8Array(W))},cancel(z){return u(z),M.return()}},{highWaterMark:2})},x8=(t,i)=>{const a=t!=null;return u=>setTimeout(()=>i({lengthComputable:a,total:t,loaded:u}))},j3=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",nG=j3&&typeof ReadableStream=="function",R4=j3&&(typeof TextEncoder=="function"?(t=>i=>t.encode(i))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Lue=nG&&(()=>{let t=!1;const i=new Request(Rh.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!i})(),A8=64*1024,L4=nG&&!!(()=>{try{return Wt.isReadableStream(new Response("").body)}catch{}})(),jE={stream:L4&&(t=>t.body)};j3&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(i=>{!jE[i]&&(jE[i]=Wt.isFunction(t[i])?a=>a[i]():(a,u)=>{throw new di(`Response type '${i}' is not supported`,di.ERR_NOT_SUPPORT,u)})})})(new Response);const Pue=async t=>{if(t==null)return 0;if(Wt.isBlob(t))return t.size;if(Wt.isSpecCompliantForm(t))return(await new Request(t).arrayBuffer()).byteLength;if(Wt.isArrayBufferView(t))return t.byteLength;if(Wt.isURLSearchParams(t)&&(t=t+""),Wt.isString(t))return(await R4(t)).byteLength},Oue=async(t,i)=>{const a=Wt.toFiniteNumber(t.getContentLength());return a??Pue(i)},Due=j3&&(async t=>{let{url:i,method:a,data:u,signal:m,cancelToken:M,timeout:L,onDownloadProgress:z,onUploadProgress:U,responseType:W,headers:J,withCredentials:te="same-origin",fetchOptions:ae}=rG(t);W=W?(W+"").toLowerCase():"text";let[ve,he]=m||M||L?Eue([m,M],L):[],oe,me;const ge=()=>{!oe&&setTimeout(()=>{ve&&ve.unsubscribe()}),oe=!0};let de;try{if(U&&Lue&&a!=="get"&&a!=="head"&&(de=await Oue(J,u))!==0){let Ee=new Request(i,{method:"POST",body:u,duplex:"half"}),De;Wt.isFormData(u)&&(De=Ee.headers.get("content-type"))&&J.setContentType(De),Ee.body&&(u=y8(Ee.body,A8,x8(de,HE(U)),null,R4))}Wt.isString(te)||(te=te?"cors":"omit"),me=new Request(i,{...ae,signal:ve,method:a.toUpperCase(),headers:J.normalize().toJSON(),body:u,duplex:"half",withCredentials:te});let ce=await fetch(me);const _e=L4&&(W==="stream"||W==="response");if(L4&&(z||_e)){const Ee={};["status","statusText","headers"].forEach(We=>{Ee[We]=ce[We]});const De=Wt.toFiniteNumber(ce.headers.get("content-length"));ce=new Response(y8(ce.body,A8,z&&x8(De,HE(z,!0)),_e&&ge,R4),Ee)}W=W||"text";let Re=await jE[Wt.findKey(jE,W)||"text"](ce,t);return!_e&&ge(),he&&he(),await new Promise((Ee,De)=>{eG(Ee,De,{data:Re,headers:au.from(ce.headers),status:ce.status,statusText:ce.statusText,config:t,request:me})})}catch(ce){throw ge(),ce&&ce.name==="TypeError"&&/fetch/i.test(ce.message)?Object.assign(new di("Network Error",di.ERR_NETWORK,t,me),{cause:ce.cause||ce}):di.from(ce,ce&&ce.code,t,me)}}),P4={http:Kle,xhr:Tue,fetch:Due};Wt.forEach(P4,(t,i)=>{if(t){try{Object.defineProperty(t,"name",{value:i})}catch{}Object.defineProperty(t,"adapterName",{value:i})}});const w8=t=>`- ${t}`,bue=t=>Wt.isFunction(t)||t===null||t===!1,iG={getAdapter:t=>{t=Wt.isArray(t)?t:[t];const{length:i}=t;let a,u;const m={};for(let M=0;M<i;M++){a=t[M];let L;if(u=a,!bue(a)&&(u=P4[(L=String(a)).toLowerCase()],u===void 0))throw new di(`Unknown adapter '${L}'`);if(u)break;m[L||"#"+M]=u}if(!u){const M=Object.entries(m).map(([z,U])=>`adapter ${z} `+(U===!1?"is not supported by the environment":"is not available in the build"));let L=i?M.length>1?`since :
`+M.map(w8).join(`
`):" "+w8(M[0]):"as no adapter specified";throw new di("There is no suitable adapter to dispatch the request "+L,"ERR_NOT_SUPPORT")}return u},adapters:P4};function O5(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Mx(null,t)}function C8(t){return O5(t),t.headers=au.from(t.headers),t.data=P5.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),iG.getAdapter(t.adapter||DC.adapter)(t).then(function(u){return O5(t),u.data=P5.call(t,t.transformResponse,u),u.headers=au.from(u.headers),u},function(u){return $j(u)||(O5(t),u&&u.response&&(u.response.data=P5.call(t,t.transformResponse,u.response),u.response.headers=au.from(u.response.headers))),Promise.reject(u)})}const oG="1.7.2",$D={};["object","boolean","number","function","string","symbol"].forEach((t,i)=>{$D[t]=function(u){return typeof u===t||"a"+(i<1?"n ":" ")+t}});const _8={};$D.transitional=function(i,a,u){function m(M,L){return"[Axios v"+oG+"] Transitional option '"+M+"'"+L+(u?". "+u:"")}return(M,L,z)=>{if(i===!1)throw new di(m(L," has been removed"+(a?" in "+a:"")),di.ERR_DEPRECATED);return a&&!_8[L]&&(_8[L]=!0,console.warn(m(L," has been deprecated since v"+a+" and will be removed in the near future"))),i?i(M,L,z):!0}};function Fue(t,i,a){if(typeof t!="object")throw new di("options must be an object",di.ERR_BAD_OPTION_VALUE);const u=Object.keys(t);let m=u.length;for(;m-- >0;){const M=u[m],L=i[M];if(L){const z=t[M],U=z===void 0||L(z,M,t);if(U!==!0)throw new di("option "+M+" must be "+U,di.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new di("Unknown option "+M,di.ERR_BAD_OPTION)}}const O4={assertOptions:Fue,validators:$D},vm=O4.validators;class qv{constructor(i){this.defaults=i,this.interceptors={request:new m8,response:new m8}}async request(i,a){try{return await this._request(i,a)}catch(u){if(u instanceof Error){let m;Error.captureStackTrace?Error.captureStackTrace(m={}):m=new Error;const M=m.stack?m.stack.replace(/^.+\n/,""):"";try{u.stack?M&&!String(u.stack).endsWith(M.replace(/^.+\n.+\n/,""))&&(u.stack+=`
`+M):u.stack=M}catch{}}throw u}}_request(i,a){typeof i=="string"?(a=a||{},a.url=i):a=i||{},a=i0(this.defaults,a);const{transitional:u,paramsSerializer:m,headers:M}=a;u!==void 0&&O4.assertOptions(u,{silentJSONParsing:vm.transitional(vm.boolean),forcedJSONParsing:vm.transitional(vm.boolean),clarifyTimeoutError:vm.transitional(vm.boolean)},!1),m!=null&&(Wt.isFunction(m)?a.paramsSerializer={serialize:m}:O4.assertOptions(m,{encode:vm.function,serialize:vm.function},!0)),a.method=(a.method||this.defaults.method||"get").toLowerCase();let L=M&&Wt.merge(M.common,M[a.method]);M&&Wt.forEach(["delete","get","head","post","put","patch","common"],he=>{delete M[he]}),a.headers=au.concat(L,M);const z=[];let U=!0;this.interceptors.request.forEach(function(oe){typeof oe.runWhen=="function"&&oe.runWhen(a)===!1||(U=U&&oe.synchronous,z.unshift(oe.fulfilled,oe.rejected))});const W=[];this.interceptors.response.forEach(function(oe){W.push(oe.fulfilled,oe.rejected)});let J,te=0,ae;if(!U){const he=[C8.bind(this),void 0];for(he.unshift.apply(he,z),he.push.apply(he,W),ae=he.length,J=Promise.resolve(a);te<ae;)J=J.then(he[te++],he[te++]);return J}ae=z.length;let ve=a;for(te=0;te<ae;){const he=z[te++],oe=z[te++];try{ve=he(ve)}catch(me){oe.call(this,me);break}}try{J=C8.call(this,ve)}catch(he){return Promise.reject(he)}for(te=0,ae=W.length;te<ae;)J=J.then(W[te++],W[te++]);return J}getUri(i){i=i0(this.defaults,i);const a=tG(i.baseURL,i.url);return Kj(a,i.params,i.paramsSerializer)}}Wt.forEach(["delete","get","head","options"],function(i){qv.prototype[i]=function(a,u){return this.request(i0(u||{},{method:i,url:a,data:(u||{}).data}))}});Wt.forEach(["post","put","patch"],function(i){function a(u){return function(M,L,z){return this.request(i0(z||{},{method:i,headers:u?{"Content-Type":"multipart/form-data"}:{},url:M,data:L}))}}qv.prototype[i]=a(),qv.prototype[i+"Form"]=a(!0)});class eb{constructor(i){if(typeof i!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(M){a=M});const u=this;this.promise.then(m=>{if(!u._listeners)return;let M=u._listeners.length;for(;M-- >0;)u._listeners[M](m);u._listeners=null}),this.promise.then=m=>{let M;const L=new Promise(z=>{u.subscribe(z),M=z}).then(m);return L.cancel=function(){u.unsubscribe(M)},L},i(function(M,L,z){u.reason||(u.reason=new Mx(M,L,z),a(u.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(i){if(this.reason){i(this.reason);return}this._listeners?this._listeners.push(i):this._listeners=[i]}unsubscribe(i){if(!this._listeners)return;const a=this._listeners.indexOf(i);a!==-1&&this._listeners.splice(a,1)}static source(){let i;return{token:new eb(function(m){i=m}),cancel:i}}}function Nue(t){return function(a){return t.apply(null,a)}}function Bue(t){return Wt.isObject(t)&&t.isAxiosError===!0}const D4={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(D4).forEach(([t,i])=>{D4[i]=t});function aG(t){const i=new qv(t),a=zj(qv.prototype.request,i);return Wt.extend(a,qv.prototype,i,{allOwnKeys:!0}),Wt.extend(a,i,null,{allOwnKeys:!0}),a.create=function(m){return aG(i0(t,m))},a}const qa=aG(DC);qa.Axios=qv;qa.CanceledError=Mx;qa.CancelToken=eb;qa.isCancel=$j;qa.VERSION=oG;qa.toFormData=H3;qa.AxiosError=di;qa.Cancel=qa.CanceledError;qa.all=function(i){return Promise.all(i)};qa.spread=Nue;qa.isAxiosError=Bue;qa.mergeConfig=i0;qa.AxiosHeaders=au;qa.formToJSON=t=>Qj(Wt.isHTMLForm(t)?new FormData(t):t);qa.getAdapter=iG.getAdapter;qa.HttpStatusCode=D4;qa.default=qa;const sG=qa.create({baseURL:"http://localhost:2805",timeout:2e4});sG.interceptors.request.use(t=>t,t=>Promise.reject(t));sG.interceptors.response.use(t=>t.data,t=>Promise.reject(t));const zue=()=>{let t=l0();ie.useEffect(()=>{c8(),window.onresize=function(){c8()}},[]);const[i,a]=ie.useState(""),[u,m]=ie.useState("");ie.useState("");const M=U=>{a(U.target.value)},L=U=>{m(U.target.value)},z=()=>{if(console.log("点击",i,u),i.trim()&&u.trim()){let U={password:u,no:i};U.password==="20000804"&&U.no==="zzpzadie"?(Nw.success("登录成功！"),localStorage.setItem("my-project-token","zzp"),t("/test/home")):Nw.error("账号或密码错误");return}else{Nw.error("请输入账号或密码！！！");return}};return rn.jsxs("div",{className:xT.loginPage,children:[rn.jsx("div",{className:"back",children:rn.jsx("canvas",{id:"canvas",style:{display:"block"}})}),rn.jsxs("div",{className:xT.loginBox+" loginBox",children:[rn.jsx("div",{className:xT.title,children:rn.jsx("h1",{children:"平看世界"})}),rn.jsx("div",{className:"form",children:rn.jsxs(YH,{direction:"vertical",size:"middle",style:{display:"flex"},children:[rn.jsx(n0,{placeholder:"用户名",onChange:M}),rn.jsx(n0.Password,{placeholder:"密码",onChange:L}),rn.jsx(T3,{type:"primary",className:"loginBtn",block:!0,onClick:z,children:"登录"})]})}),rn.jsx("div",{className:xT.title,children:rn.jsx("p",{children:"Copyright@ 2024 zzp"})})]})]})},Uue=ie.lazy(()=>_C(()=>import("./PlanLine-DhX2jvdb.js"),[])),kue=ie.lazy(()=>_C(()=>import("./AccountInfo-BSGKds6I.js"),[])),Hue=ie.lazy(()=>_C(()=>import("./WillGo-CJMC38-2.js"),[])),jue=ie.lazy(()=>_C(()=>import("./OnceGo-BoCoY7Bm.js"),[])),Gue=ie.lazy(()=>_C(()=>import("./UserManege-CS7t18cJ.js"),__vite__mapDeps([0,1]))),Vue=[{path:"/test",element:rn.jsx(JN,{to:"/test/login"})},{path:"/test/login",element:rn.jsx(zue,{})},{path:"/test/home",element:rn.jsx(qse,{})},{path:"/test/about",element:rn.jsx(u8,{})},{path:"/",element:rn.jsx(u8,{}),children:[{path:"/test/accountInfo",element:rn.jsx(dr.Suspense,{fallback:rn.jsx("div",{children:"Loading..."}),children:rn.jsx(kue,{})})},{path:"/test/planLine",element:rn.jsx(dr.Suspense,{fallback:rn.jsx("div",{children:"Loading..."}),children:rn.jsx(Uue,{})})},{path:"/test/willGo",element:rn.jsx(dr.Suspense,{fallback:rn.jsx("div",{children:"Loading..."}),children:rn.jsx(Hue,{})})},{path:"/test/onceGo/site",element:rn.jsx(dr.Suspense,{fallback:rn.jsx("div",{children:"Loading..."}),children:rn.jsx(jue,{})})},{path:"/test/System/UserManege",element:rn.jsx(dr.Suspense,{fallback:rn.jsx("div",{children:"Loading..."}),children:rn.jsx(Gue,{})})}]},{path:"*",element:rn.jsx(JN,{to:"/test/accountInfo"})}];function Wue(){const t=l0();return ie.useEffect(()=>{t("/test/login"),Nw.warning("您还没登陆！")}),rn.jsx("div",{})}function Xue(){const t=l0();return ie.useEffect(()=>{t("/test/home")}),rn.jsx("div",{})}function Yue(){const t=jZ(Vue),i=s0();let a=localStorage.getItem("my-project-token");return console.log("location.pathname",i.pathname,a),i.pathname!=="/test/login"&&!a?(console.log("1"),rn.jsx(Wue,{})):i.pathname==="/test/login"&&a?(console.log("2"),rn.jsx(Xue,{})):t}function Zue(){return rn.jsxs("div",{className:"App",children:[rn.jsx($N,{to:"/test/home",children:"主页"}),rn.jsx($N,{to:"/test/accountInfo",children:"我的"}),rn.jsx(Yue,{})]})}var lG={exports:{}},uG={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bC=ie;function que(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Kue=typeof Object.is=="function"?Object.is:que,Jue=bC.useSyncExternalStore,Que=bC.useRef,$ue=bC.useEffect,ece=bC.useMemo,tce=bC.useDebugValue;uG.useSyncExternalStoreWithSelector=function(t,i,a,u,m){var M=Que(null);if(M.current===null){var L={hasValue:!1,value:null};M.current=L}else L=M.current;M=ece(function(){function U(ve){if(!W){if(W=!0,J=ve,ve=u(ve),m!==void 0&&L.hasValue){var he=L.value;if(m(he,ve))return te=he}return te=ve}if(he=te,Kue(J,ve))return he;var oe=u(ve);return m!==void 0&&m(he,oe)?he:(J=ve,te=oe)}var W=!1,J,te,ae=a===void 0?null:a;return[function(){return U(i())},ae===null?void 0:function(){return U(ae())}]},[i,a,u,m]);var z=Jue(t,M[0],M[1]);return $ue(function(){L.hasValue=!0,L.value=z},[z]),tce(z),z};lG.exports=uG;var rce=lG.exports,Du="default"in Kv?dr:Kv,M8=Symbol.for("react-redux-context"),S8=typeof globalThis<"u"?globalThis:{};function nce(){if(!Du.createContext)return{};const t=S8[M8]??(S8[M8]=new Map);let i=t.get(Du.createContext);return i||(i=Du.createContext(null),t.set(Du.createContext,i)),i}var jm=nce(),ice=()=>{throw new Error("uSES not initialized!")};function tb(t=jm){return function(){return Du.useContext(t)}}var cG=tb(),hG=ice,oce=t=>{hG=t},ace=(t,i)=>t===i;function sce(t=jm){const i=t===jm?cG:tb(t),a=(u,m={})=>{const{equalityFn:M=ace,devModeChecks:L={}}=typeof m=="function"?{equalityFn:m}:m,{store:z,subscription:U,getServerState:W,stabilityCheck:J,identityFunctionCheck:te}=i();Du.useRef(!0);const ae=Du.useCallback({[u.name](he){return u(he)}}[u.name],[u,J,L.stabilityCheck]),ve=hG(U.addNestedSub,z.getState,W||z.getState,ae,M);return Du.useDebugValue(ve),ve};return Object.assign(a,{withTypes:()=>a}),a}var Bce=sce();function lce(t){t()}function uce(){let t=null,i=null;return{clear(){t=null,i=null},notify(){lce(()=>{let a=t;for(;a;)a.callback(),a=a.next})},get(){const a=[];let u=t;for(;u;)a.push(u),u=u.next;return a},subscribe(a){let u=!0;const m=i={callback:a,next:null,prev:i};return m.prev?m.prev.next=m:t=m,function(){!u||t===null||(u=!1,m.next?m.next.prev=m.prev:i=m.prev,m.prev?m.prev.next=m.next:t=m.next)}}}}var T8={notify(){},get:()=>[]};function cce(t,i){let a,u=T8,m=0,M=!1;function L(oe){J();const me=u.subscribe(oe);let ge=!1;return()=>{ge||(ge=!0,me(),te())}}function z(){u.notify()}function U(){he.onStateChange&&he.onStateChange()}function W(){return M}function J(){m++,a||(a=t.subscribe(U),u=uce())}function te(){m--,a&&m===0&&(a(),a=void 0,u.clear(),u=T8)}function ae(){M||(M=!0,J())}function ve(){M&&(M=!1,te())}const he={addNestedSub:L,notifyNestedSubs:z,handleChangeWrapper:U,isSubscribed:W,trySubscribe:ae,tryUnsubscribe:ve,getListeners:()=>u};return he}var hce=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fce=typeof navigator<"u"&&navigator.product==="ReactNative",dce=hce||fce?Du.useLayoutEffect:Du.useEffect;function pce({store:t,context:i,children:a,serverState:u,stabilityCheck:m="once",identityFunctionCheck:M="once"}){const L=Du.useMemo(()=>{const W=cce(t);return{store:t,subscription:W,getServerState:u?()=>u:void 0,stabilityCheck:m,identityFunctionCheck:M}},[t,u,m,M]),z=Du.useMemo(()=>t.getState(),[t]);dce(()=>{const{subscription:W}=L;return W.onStateChange=W.notifyNestedSubs,W.trySubscribe(),z!==t.getState()&&W.notifyNestedSubs(),()=>{W.tryUnsubscribe(),W.onStateChange=void 0}},[L,z]);const U=i||jm;return Du.createElement(U.Provider,{value:L},a)}var mce=pce;function fG(t=jm){const i=t===jm?cG:tb(t),a=()=>{const{store:u}=i();return u};return Object.assign(a,{withTypes:()=>a}),a}var gce=fG();function vce(t=jm){const i=t===jm?gce:fG(t),a=()=>i().dispatch;return Object.assign(a,{withTypes:()=>a}),a}var zce=vce();oce(rce.useSyncExternalStoreWithSelector);function al(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var yce=typeof Symbol=="function"&&Symbol.observable||"@@observable",E8=yce,D5=()=>Math.random().toString(36).substring(7).split("").join("."),xce={INIT:`@@redux/INIT${D5()}`,REPLACE:`@@redux/REPLACE${D5()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${D5()}`},GE=xce;function Ace(t){if(typeof t!="object"||t===null)return!1;let i=t;for(;Object.getPrototypeOf(i)!==null;)i=Object.getPrototypeOf(i);return Object.getPrototypeOf(t)===i||Object.getPrototypeOf(t)===null}function dG(t,i,a){if(typeof t!="function")throw new Error(al(2));if(typeof i=="function"&&typeof a=="function"||typeof a=="function"&&typeof arguments[3]=="function")throw new Error(al(0));if(typeof i=="function"&&typeof a>"u"&&(a=i,i=void 0),typeof a<"u"){if(typeof a!="function")throw new Error(al(1));return a(dG)(t,i)}let u=t,m=i,M=new Map,L=M,z=0,U=!1;function W(){L===M&&(L=new Map,M.forEach((me,ge)=>{L.set(ge,me)}))}function J(){if(U)throw new Error(al(3));return m}function te(me){if(typeof me!="function")throw new Error(al(4));if(U)throw new Error(al(5));let ge=!0;W();const de=z++;return L.set(de,me),function(){if(ge){if(U)throw new Error(al(6));ge=!1,W(),L.delete(de),M=null}}}function ae(me){if(!Ace(me))throw new Error(al(7));if(typeof me.type>"u")throw new Error(al(8));if(typeof me.type!="string")throw new Error(al(17));if(U)throw new Error(al(9));try{U=!0,m=u(m,me)}finally{U=!1}return(M=L).forEach(de=>{de()}),me}function ve(me){if(typeof me!="function")throw new Error(al(10));u=me,ae({type:GE.REPLACE})}function he(){const me=te;return{subscribe(ge){if(typeof ge!="object"||ge===null)throw new Error(al(11));function de(){const _e=ge;_e.next&&_e.next(J())}return de(),{unsubscribe:me(de)}},[E8](){return this}}}return ae({type:GE.INIT}),{dispatch:ae,subscribe:te,getState:J,replaceReducer:ve,[E8]:he}}function wce(t,i,a){return dG(t,i,a)}function Cce(t){Object.keys(t).forEach(i=>{const a=t[i];if(typeof a(void 0,{type:GE.INIT})>"u")throw new Error(al(12));if(typeof a(void 0,{type:GE.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(al(13))})}function _ce(t){const i=Object.keys(t),a={};for(let M=0;M<i.length;M++){const L=i[M];typeof t[L]=="function"&&(a[L]=t[L])}const u=Object.keys(a);let m;try{Cce(a)}catch(M){m=M}return function(L={},z){if(m)throw m;let U=!1;const W={};for(let J=0;J<u.length;J++){const te=u[J],ae=a[te],ve=L[te],he=ae(ve,z);if(typeof he>"u")throw z&&z.type,new Error(al(14));W[te]=he,U=U||he!==ve}return U=U||u.length!==Object.keys(L).length,U?W:L}}const Dv={state:{num:20},actions:{add1(t,i){t.num++},add2(t,i){t.num+=i.val}},add1:"add1",add2:"add2"};let Mce=(t={...Dv.state},i)=>{let a=JSON.parse(JSON.stringify(t));switch(i.type){case Dv.add1:Dv.actions[Dv.add1](a,i);break;case Dv.add2:Dv.actions[Dv.add2](a,i);break}return a};const AT={state:{sarr:[10,20,30]},actions:{sarrpush(t,i){t.sarr.push(i.val)}},sarrpush:"sarrpush"};let Sce=(t={...AT.state},i)=>{let a=JSON.parse(JSON.stringify(t));switch(i.type){case AT.sarrpush:AT.actions[AT.sarrpush](a,i);break}return a};const Tce=_ce({NumStatusReducer:Mce,ArrStatusReducer:Sce}),Ece=wce(Tce,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());b5.createRoot(document.getElementById("root")).render(rn.jsx(mce,{store:Ece,children:rn.jsx(lq,{children:rn.jsx(Zue,{})})}));export{I9 as $,pn as A,T3 as B,yx as C,kJ as D,c0 as E,$J as F,_s as G,lo as H,Zm as I,L9 as J,yn as K,B7 as L,dz as M,IE as N,E9 as O,Z9 as P,F9 as Q,dr as R,iQ as S,GP as T,jQ as U,u$ as V,w9 as W,t$ as X,f$ as Y,Ec as Z,_C as _,Bce as a,Wie as a$,eee as a0,b9 as a1,kQ as a2,Gd as a3,yq as a4,ep as a5,Vd as a6,_t as a7,Qi as a8,aH as a9,Um as aA,f0 as aB,sx as aC,c4 as aD,iD as aE,mx as aF,dH as aG,aD as aH,hH as aI,WO as aJ,Of as aK,pne as aL,PC as aM,Fce as aN,Tz as aO,$7 as aP,hee as aQ,N9 as aR,Qre as aS,lH as aT,jH as aU,dB as aV,ioe as aW,NH as aX,FH as aY,HH as aZ,jie as a_,Il as aa,rJ as ab,wre as ac,as as ad,u0 as ae,fl as af,hl as ag,DT as ah,Qd as ai,g3 as aj,Oh as ak,Pf as al,bs as am,ere as an,rre as ao,tre as ap,nre as aq,KJ as ar,pz as as,Q7 as at,W9 as au,Ka as av,T9 as aw,qre as ax,$O as ay,sH as az,on as b,Vie as b0,Zie as b1,Gie as b2,Xie as b3,Yie as b4,YH as b5,Iie as b6,Jte as b7,ure as b8,bce as b9,NO as bA,Lce as bB,qee as bC,Ym as bD,gx as bE,Bi as bF,$re as bG,C5 as bH,n0 as bI,sG as bJ,b4 as bK,Nw as bL,nee as ba,PQ as bb,eH as bc,sJ as bd,Kte as be,lx as bf,Dce as bg,Pce as bh,IC as bi,sD as bj,QO as bk,Oce as bl,ux as bm,LE as bn,Q9 as bo,jte as bp,Zte as bq,Hk as br,kH as bs,BH as bt,pD as bu,ene as bv,lJ as bw,Oz as bx,oC as by,If as bz,Z1 as c,Rce as d,MC as e,mr as f,Ft as g,ii as h,Sn as i,rn as j,sr as k,_3 as l,rte as m,eK as n,a$ as o,C9 as p,Nu as q,ie as r,Tl as s,Ice as t,zce as u,Ca as v,ul as w,rH as x,Df as y,nD as z};
